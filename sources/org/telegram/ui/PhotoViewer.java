package org.telegram.ui;

import android.animation.Animator;
import android.animation.AnimatorListenerAdapter;
import android.animation.AnimatorSet;
import android.animation.ArgbEvaluator;
import android.animation.ObjectAnimator;
import android.animation.TimeInterpolator;
import android.animation.ValueAnimator;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Configuration;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.ColorFilter;
import android.graphics.Outline;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.PorterDuff;
import android.graphics.PorterDuffColorFilter;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.SurfaceTexture;
import android.graphics.drawable.ColorDrawable;
import android.graphics.drawable.Drawable;
import android.graphics.drawable.GradientDrawable;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.os.SystemClock;
import android.os.Vibrator;
import android.provider.Settings;
import android.text.Layout;
import android.text.SpannableString;
import android.text.SpannableStringBuilder;
import android.text.StaticLayout;
import android.text.TextPaint;
import android.text.TextUtils;
import android.text.style.ClickableSpan;
import android.text.style.URLSpan;
import android.transition.ChangeBounds;
import android.transition.Fade;
import android.transition.Transition;
import android.transition.TransitionManager;
import android.transition.TransitionSet;
import android.transition.TransitionValues;
import android.util.FloatProperty;
import android.util.Property;
import android.util.SparseArray;
import android.view.ActionMode;
import android.view.ContextThemeWrapper;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.OrientationEventListener;
import android.view.TextureView;
import android.view.VelocityTracker;
import android.view.View;
import android.view.ViewConfiguration;
import android.view.ViewGroup;
import android.view.ViewOutlineProvider;
import android.view.ViewPropertyAnimator;
import android.view.ViewTreeObserver;
import android.view.WindowInsets;
import android.view.WindowManager;
import android.view.accessibility.AccessibilityManager;
import android.view.animation.DecelerateInterpolator;
import android.view.animation.Interpolator;
import android.view.animation.LinearInterpolator;
import android.view.animation.OvershootInterpolator;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.OverScroller;
import android.widget.Scroller;
import android.widget.TextView;
import android.widget.Toast;
import androidx.annotation.Keep;
import androidx.collection.ArrayMap;
import androidx.collection.LongSparseArray;
import androidx.core.content.ContextCompat;
import androidx.core.graphics.ColorUtils;
import androidx.core.util.ObjectsCompat$$ExternalSyntheticBackport0;
import androidx.core.view.inputmethod.InputContentInfoCompat;
import androidx.core.widget.NestedScrollView;
import androidx.dynamicanimation.animation.DynamicAnimation;
import androidx.dynamicanimation.animation.SpringAnimation;
import androidx.exifinterface.media.ExifInterface;
import androidx.recyclerview.widget.DefaultItemAnimator;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.LinearSmoothScrollerEnd;
import androidx.recyclerview.widget.RecyclerView;
import com.google.android.exoplayer2.analytics.AnalyticsListener;
import com.google.android.exoplayer2.ui.AspectRatioFrameLayout;
import com.google.android.gms.vision.Frame;
import com.google.android.gms.vision.face.Face;
import com.google.android.gms.vision.face.FaceDetector;
import java.io.File;
import java.io.FileOutputStream;
import java.lang.reflect.Array;
import java.lang.reflect.Field;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import org.telegram.messenger.AccountInstance;
import org.telegram.messenger.AndroidUtilities;
import org.telegram.messenger.ApplicationLoader;
import org.telegram.messenger.Bitmaps;
import org.telegram.messenger.BringAppForegroundService;
import org.telegram.messenger.BuildVars;
import org.telegram.messenger.ChatObject;
import org.telegram.messenger.DialogObject;
import org.telegram.messenger.DispatchQueue;
import org.telegram.messenger.DownloadController;
import org.telegram.messenger.Emoji;
import org.telegram.messenger.FileLoader;
import org.telegram.messenger.FileLog;
import org.telegram.messenger.ImageLoader;
import org.telegram.messenger.ImageLocation;
import org.telegram.messenger.ImageReceiver;
import org.telegram.messenger.LocaleController;
import org.telegram.messenger.MediaController;
import org.telegram.messenger.MediaDataController;
import org.telegram.messenger.MessageObject;
import org.telegram.messenger.MessagesController;
import org.telegram.messenger.MessagesStorage;
import org.telegram.messenger.NotificationCenter;
import org.telegram.messenger.R;
import org.telegram.messenger.SecureDocument;
import org.telegram.messenger.SendMessagesHelper;
import org.telegram.messenger.SharedConfig;
import org.telegram.messenger.UserConfig;
import org.telegram.messenger.UserObject;
import org.telegram.messenger.Utilities;
import org.telegram.messenger.VideoEditedInfo;
import org.telegram.messenger.WebFile;
import org.telegram.messenger.utils.BitmapsCache;
import org.telegram.messenger.video.VideoPlayerRewinder;
import org.telegram.tgnet.ConnectionsManager;
import org.telegram.tgnet.TLObject;
import org.telegram.tgnet.TLRPC$BotInlineResult;
import org.telegram.tgnet.TLRPC$Chat;
import org.telegram.tgnet.TLRPC$Dialog;
import org.telegram.tgnet.TLRPC$Document;
import org.telegram.tgnet.TLRPC$EncryptedChat;
import org.telegram.tgnet.TLRPC$FileLocation;
import org.telegram.tgnet.TLRPC$InputFile;
import org.telegram.tgnet.TLRPC$InputPhoto;
import org.telegram.tgnet.TLRPC$Message;
import org.telegram.tgnet.TLRPC$MessageAction;
import org.telegram.tgnet.TLRPC$MessageEntity;
import org.telegram.tgnet.TLRPC$PageBlock;
import org.telegram.tgnet.TLRPC$Photo;
import org.telegram.tgnet.TLRPC$PhotoSize;
import org.telegram.tgnet.TLRPC$ReplyMarkup;
import org.telegram.tgnet.TLRPC$TL_error;
import org.telegram.tgnet.TLRPC$TL_fileLocationToBeDeprecated;
import org.telegram.tgnet.TLRPC$TL_inputChatPhoto;
import org.telegram.tgnet.TLRPC$TL_inputPhoto;
import org.telegram.tgnet.TLRPC$TL_message;
import org.telegram.tgnet.TLRPC$TL_messageActionEmpty;
import org.telegram.tgnet.TLRPC$TL_messageActionUserUpdatedPhoto;
import org.telegram.tgnet.TLRPC$TL_messageMediaEmpty;
import org.telegram.tgnet.TLRPC$TL_messageMediaInvoice;
import org.telegram.tgnet.TLRPC$TL_messageMediaPhoto;
import org.telegram.tgnet.TLRPC$TL_messageMediaWebPage;
import org.telegram.tgnet.TLRPC$TL_messageService;
import org.telegram.tgnet.TLRPC$TL_photo;
import org.telegram.tgnet.TLRPC$TL_photoEmpty;
import org.telegram.tgnet.TLRPC$TL_photos_photo;
import org.telegram.tgnet.TLRPC$TL_webDocument;
import org.telegram.tgnet.TLRPC$User;
import org.telegram.tgnet.TLRPC$WebDocument;
import org.telegram.tgnet.TLRPC$WebPage;
import org.telegram.ui.ActionBar.ActionBar;
import org.telegram.ui.ActionBar.ActionBarMenu;
import org.telegram.ui.ActionBar.ActionBarMenuItem;
import org.telegram.ui.ActionBar.ActionBarMenuSubItem;
import org.telegram.ui.ActionBar.ActionBarPopupWindow;
import org.telegram.ui.ActionBar.AdjustPanLayoutHelper;
import org.telegram.ui.ActionBar.AlertDialog;
import org.telegram.ui.ActionBar.BaseFragment;
import org.telegram.ui.ActionBar.BottomSheet;
import org.telegram.ui.ActionBar.SimpleTextView;
import org.telegram.ui.ActionBar.Theme;
import org.telegram.ui.Adapters.MentionsAdapter;
import org.telegram.ui.Cells.CheckBoxCell;
import org.telegram.ui.Cells.PhotoPickerPhotoCell;
import org.telegram.ui.ChooseSpeedLayout;
import org.telegram.ui.Components.AlertsCreator;
import org.telegram.ui.Components.AnimatedEmojiDrawable;
import org.telegram.ui.Components.AnimatedEmojiSpan;
import org.telegram.ui.Components.AnimatedFileDrawable;
import org.telegram.ui.Components.AnimationProperties;
import org.telegram.ui.Components.BackupImageView;
import org.telegram.ui.Components.Bulletin;
import org.telegram.ui.Components.BulletinFactory;
import org.telegram.ui.Components.ChatAttachAlert;
import org.telegram.ui.Components.CheckBox;
import org.telegram.ui.Components.ClippingImageView;
import org.telegram.ui.Components.CombinedDrawable;
import org.telegram.ui.Components.Crop.CropAreaView;
import org.telegram.ui.Components.Crop.CropTransform;
import org.telegram.ui.Components.CubicBezierInterpolator;
import org.telegram.ui.Components.FadingTextViewLayout;
import org.telegram.ui.Components.FloatSeekBarAccessibilityDelegate;
import org.telegram.ui.Components.GestureDetector2;
import org.telegram.ui.Components.GroupedPhotosListView;
import org.telegram.ui.Components.HideViewAfterAnimation;
import org.telegram.ui.Components.LayoutHelper;
import org.telegram.ui.Components.LinkSpanDrawable;
import org.telegram.ui.Components.NumberPicker;
import org.telegram.ui.Components.PaintingOverlay;
import org.telegram.ui.Components.PhotoCropView;
import org.telegram.ui.Components.PhotoFilterView;
import org.telegram.ui.Components.PhotoPaintView;
import org.telegram.ui.Components.PhotoViewerCaptionEnterView;
import org.telegram.ui.Components.PhotoViewerWebView;
import org.telegram.ui.Components.PickerBottomLayoutViewer;
import org.telegram.ui.Components.PipVideoOverlay;
import org.telegram.ui.Components.PlayPauseDrawable;
import org.telegram.ui.Components.Premium.LimitReachedBottomSheet;
import org.telegram.ui.Components.RLottieDrawable;
import org.telegram.ui.Components.RadialProgressView;
import org.telegram.ui.Components.RecyclerListView;
import org.telegram.ui.Components.ShareAlert;
import org.telegram.ui.Components.SizeNotifierFrameLayoutPhoto;
import org.telegram.ui.Components.StickersAlert;
import org.telegram.ui.Components.TextViewSwitcher;
import org.telegram.ui.Components.Tooltip;
import org.telegram.ui.Components.URLSpanReplacement;
import org.telegram.ui.Components.URLSpanUserMentionPhotoViewer;
import org.telegram.ui.Components.UndoView;
import org.telegram.ui.Components.VideoEditTextureView;
import org.telegram.ui.Components.VideoForwardDrawable;
import org.telegram.ui.Components.VideoPlayer;
import org.telegram.ui.Components.VideoPlayerSeekBar;
import org.telegram.ui.Components.VideoSeekPreviewImage;
import org.telegram.ui.Components.VideoTimelinePlayView;
import org.telegram.ui.Components.ViewHelper;
import org.telegram.ui.Components.spoilers.SpoilerEffect;
import org.telegram.ui.Components.spoilers.SpoilersTextView;

@SuppressLint({"WrongConstant"})
public class PhotoViewer implements NotificationCenter.NotificationCenterDelegate, GestureDetector2.OnGestureListener, GestureDetector2.OnDoubleTapListener {
    /* access modifiers changed from: private */
    @SuppressLint({"StaticFieldLeak"})
    public static volatile PhotoViewer Instance = null;
    /* access modifiers changed from: private */
    public static volatile PhotoViewer PipInstance = null;
    private static final Property<VideoPlayerControlFrameLayout, Float> VPC_PROGRESS;
    /* access modifiers changed from: private */
    public static DecelerateInterpolator decelerateInterpolator;
    /* access modifiers changed from: private */
    public static Drawable[] progressDrawables;
    /* access modifiers changed from: private */
    public static Paint progressPaint;
    public final Property<View, Float> FLASH_VIEW_VALUE = new AnimationProperties.FloatProperty<View>("flashViewAlpha") {
        public void setValue(View view, float f) {
            view.setAlpha(f);
            if (PhotoViewer.this.photoCropView != null) {
                PhotoViewer.this.photoCropView.setVideoThumbFlashAlpha(f);
            }
        }

        public Float get(View view) {
            return Float.valueOf(view.getAlpha());
        }
    };
    /* access modifiers changed from: private */
    public ActionBar actionBar;
    /* access modifiers changed from: private */
    public AnimatorSet actionBarAnimator;
    private Map<View, Boolean> actionBarItemsVisibility = new HashMap(3);
    /* access modifiers changed from: private */
    public boolean actionBarWasShownBeforeByEnd = false;
    private Context activityContext;
    private ActionBarMenuSubItem allMediaItem;
    /* access modifiers changed from: private */
    public boolean allowMentions;
    private boolean allowOrder = true;
    private boolean allowShare;
    /* access modifiers changed from: private */
    public boolean allowShowFullscreenButton;
    /* access modifiers changed from: private */
    public float animateToMirror;
    /* access modifiers changed from: private */
    public float animateToRotate;
    /* access modifiers changed from: private */
    public float animateToScale;
    /* access modifiers changed from: private */
    public float animateToX;
    /* access modifiers changed from: private */
    public float animateToY;
    /* access modifiers changed from: private */
    public ClippingImageView animatingImageView;
    /* access modifiers changed from: private */
    public Runnable animationEndRunnable;
    /* access modifiers changed from: private */
    public int animationInProgress;
    /* access modifiers changed from: private */
    public long animationStartTime;
    private float animationValue;
    /* access modifiers changed from: private */
    public float[][] animationValues = ((float[][]) Array.newInstance(float.class, new int[]{2, 13}));
    /* access modifiers changed from: private */
    public boolean applying;
    /* access modifiers changed from: private */
    public AspectRatioFrameLayout aspectRatioFrameLayout;
    /* access modifiers changed from: private */
    public boolean attachedToWindow;
    /* access modifiers changed from: private */
    public long audioFramesSize;
    /* access modifiers changed from: private */
    public float avatarStartProgress;
    /* access modifiers changed from: private */
    public long avatarStartTime;
    /* access modifiers changed from: private */
    public ArrayList<TLRPC$Photo> avatarsArr = new ArrayList<>();
    /* access modifiers changed from: private */
    public long avatarsDialogId;
    /* access modifiers changed from: private */
    public BackgroundDrawable backgroundDrawable = new BackgroundDrawable(-16777216);
    private Paint bitmapPaint = new Paint(2);
    /* access modifiers changed from: private */
    public int bitrate;
    /* access modifiers changed from: private */
    public Paint blackPaint = new Paint();
    /* access modifiers changed from: private */
    public LinearLayout bottomButtonsLayout;
    /* access modifiers changed from: private */
    public FrameLayout bottomLayout;
    /* access modifiers changed from: private */
    public boolean bottomTouchEnabled = true;
    /* access modifiers changed from: private */
    public ImageView cameraItem;
    private boolean canDragDown = true;
    private boolean canEditAvatar;
    private boolean canZoom = true;
    /* access modifiers changed from: private */
    public FrameLayout captionContainer;
    /* access modifiers changed from: private */
    public PhotoViewerCaptionEnterView captionEditText;
    public CharSequence captionForAllMedia;
    private boolean captionHwLayerEnabled;
    /* access modifiers changed from: private */
    public TextView captionLimitView;
    /* access modifiers changed from: private */
    public CaptionScrollView captionScrollView;
    /* access modifiers changed from: private */
    public CaptionTextViewSwitcher captionTextViewSwitcher;
    /* access modifiers changed from: private */
    public long captureFrameAtTime = -1;
    /* access modifiers changed from: private */
    public long captureFrameReadyAtTime = -1;
    /* access modifiers changed from: private */
    public ImageReceiver centerImage = new ImageReceiver();
    private boolean centerImageIsVideo;
    /* access modifiers changed from: private */
    public AnimatorSet changeModeAnimation;
    /* access modifiers changed from: private */
    public TextureView changedTextureView;
    private boolean changingPage;
    /* access modifiers changed from: private */
    public boolean changingTextureView;
    /* access modifiers changed from: private */
    public CheckBox checkImageView;
    ChooseSpeedLayout chooseSpeedLayout;
    private int classGuid;
    /* access modifiers changed from: private */
    public float clippingImageProgress;
    /* access modifiers changed from: private */
    public ImageView compressItem;
    private AnimatorSet compressItemAnimation;
    /* access modifiers changed from: private */
    public int compressionsCount = -1;
    /* access modifiers changed from: private */
    public FrameLayoutDrawer containerView;
    private boolean cropInitied;
    private ImageView cropItem;
    /* access modifiers changed from: private */
    public CropTransform cropTransform = new CropTransform();
    /* access modifiers changed from: private */
    public int currentAccount;
    private AnimatedFileDrawable currentAnimation;
    /* access modifiers changed from: private */
    public ImageLocation currentAvatarLocation = null;
    /* access modifiers changed from: private */
    public Bitmap currentBitmap;
    private TLRPC$BotInlineResult currentBotInlineResult;
    /* access modifiers changed from: private */
    public long currentDialogId;
    /* access modifiers changed from: private */
    public int currentEditMode;
    /* access modifiers changed from: private */
    public ImageLocation currentFileLocation;
    /* access modifiers changed from: private */
    public ImageLocation currentFileLocationVideo;
    /* access modifiers changed from: private */
    public String[] currentFileNames = new String[3];
    private String currentImageFaceKey;
    private int currentImageHasFace;
    private String currentImagePath;
    /* access modifiers changed from: private */
    public int currentIndex;
    /* access modifiers changed from: private */
    public AnimatorSet currentListViewAnimation;
    /* access modifiers changed from: private */
    public Runnable currentLoadingVideoRunnable;
    /* access modifiers changed from: private */
    public MessageObject currentMessageObject;
    private TLRPC$PageBlock currentPageBlock;
    /* access modifiers changed from: private */
    public float currentPanTranslationY;
    private String currentPathObject;
    /* access modifiers changed from: private */
    public PlaceProviderObject currentPlaceObject;
    private Uri currentPlayingVideoFile;
    /* access modifiers changed from: private */
    public SecureDocument currentSecureDocument;
    private String currentSubtitle;
    /* access modifiers changed from: private */
    public ImageReceiver.BitmapHolder currentThumb;
    /* access modifiers changed from: private */
    public boolean currentVideoFinishedLoading;
    /* access modifiers changed from: private */
    public float currentVideoSpeed;
    private int dateOverride;
    /* access modifiers changed from: private */
    public FadingTextViewLayout dateTextView;
    /* access modifiers changed from: private */
    public boolean disableShowCheck;
    private boolean discardTap;
    private TextView docInfoTextView;
    private TextView docNameTextView;
    private boolean doneButtonPressed;
    /* access modifiers changed from: private */
    public boolean dontAutoPlay;
    /* access modifiers changed from: private */
    public boolean dontChangeCaptionPosition;
    /* access modifiers changed from: private */
    public boolean dontResetZoomOnFirstLayout;
    private boolean doubleTap;
    private boolean doubleTapEnabled;
    private float dragY;
    private boolean draggingDown;
    private boolean[] drawPressedDrawable = new boolean[2];
    /* access modifiers changed from: private */
    public EditState editState = new EditState();
    /* access modifiers changed from: private */
    public PickerBottomLayoutViewer editorDoneLayout;
    private boolean[] endReached = {false, true};
    private long endTime;
    private long estimatedDuration;
    private long estimatedSize;
    /* access modifiers changed from: private */
    public ImageView exitFullscreenButton;
    private boolean firstAnimationDelay;
    /* access modifiers changed from: private */
    public FirstFrameView firstFrameView;
    /* access modifiers changed from: private */
    public AnimatorSet flashAnimator;
    /* access modifiers changed from: private */
    public View flashView;
    boolean fromCamera;
    /* access modifiers changed from: private */
    public ImageView[] fullscreenButton = new ImageView[3];
    /* access modifiers changed from: private */
    public int fullscreenedByButton;
    /* access modifiers changed from: private */
    public GestureDetector2 gestureDetector;
    /* access modifiers changed from: private */
    public GroupedPhotosListView groupedPhotosListView;
    public boolean hasCaptionForAllMedia;
    /* access modifiers changed from: private */
    public Runnable hideActionBarRunnable = new Runnable() {
        public void run() {
            PhotoViewer photoViewer;
            if (PhotoViewer.this.videoPlayerControlVisible && PhotoViewer.this.isPlaying && !ApplicationLoader.mainInterfacePaused) {
                if (PhotoViewer.this.menuItem != null && PhotoViewer.this.menuItem.isSubMenuShowing()) {
                    return;
                }
                if (PhotoViewer.this.captionScrollView != null && PhotoViewer.this.captionScrollView.getScrollY() != 0) {
                    return;
                }
                if ((PhotoViewer.this.miniProgressView == null || PhotoViewer.this.miniProgressView.getVisibility() != 0) && PhotoViewer.PipInstance != (photoViewer = PhotoViewer.this)) {
                    photoViewer.toggleActionBar(false, true);
                }
            }
        }
    };
    /* access modifiers changed from: private */
    public PlaceProviderObject hideAfterAnimation;
    /* access modifiers changed from: private */
    public UndoView hintView;
    private Rect hitRect = new Rect();
    private boolean ignoreDidSetImage;
    /* access modifiers changed from: private */
    public AnimatorSet imageMoveAnimation;
    /* access modifiers changed from: private */
    public ArrayList<MessageObject> imagesArr = new ArrayList<>();
    /* access modifiers changed from: private */
    public ArrayList<Object> imagesArrLocals = new ArrayList<>();
    /* access modifiers changed from: private */
    public ArrayList<ImageLocation> imagesArrLocations = new ArrayList<>();
    /* access modifiers changed from: private */
    public ArrayList<Long> imagesArrLocationsSizes = new ArrayList<>();
    /* access modifiers changed from: private */
    public ArrayList<ImageLocation> imagesArrLocationsVideo = new ArrayList<>();
    /* access modifiers changed from: private */
    public ArrayList<TLRPC$Message> imagesArrMessages = new ArrayList<>();
    private ArrayList<MessageObject> imagesArrTemp = new ArrayList<>();
    private SparseArray<MessageObject>[] imagesByIds = {new SparseArray<>(), new SparseArray<>()};
    private SparseArray<MessageObject>[] imagesByIdsTemp = {new SparseArray<>(), new SparseArray<>()};
    /* access modifiers changed from: private */
    public boolean inBubbleMode;
    /* access modifiers changed from: private */
    public boolean inPreview;
    private VideoPlayer injectingVideoPlayer;
    private SurfaceTexture injectingVideoPlayerSurface;
    /* access modifiers changed from: private */
    public float inlineOutAnimationProgress;
    private DecelerateInterpolator interpolator = new DecelerateInterpolator(1.5f);
    private boolean invalidCoords;
    /* access modifiers changed from: private */
    public boolean isActionBarVisible = true;
    /* access modifiers changed from: private */
    public boolean isCurrentVideo;
    private boolean isDocumentsPicker;
    /* access modifiers changed from: private */
    public boolean isEmbedVideo;
    /* access modifiers changed from: private */
    public boolean isEvent;
    private boolean isFirstLoading;
    /* access modifiers changed from: private */
    public boolean isInline;
    /* access modifiers changed from: private */
    public boolean isPhotosListViewVisible;
    /* access modifiers changed from: private */
    public boolean isPlaying;
    /* access modifiers changed from: private */
    public boolean isStreaming;
    /* access modifiers changed from: private */
    public boolean isVisible;
    /* access modifiers changed from: private */
    public LinearLayout itemsLayout;
    private boolean keepScreenOnFlagSet;
    boolean keyboardAnimationEnabled;
    /* access modifiers changed from: private */
    public int keyboardSize;
    /* access modifiers changed from: private */
    public long lastBufferedPositionCheck;
    private String lastControlFrameDuration;
    private int lastImageId = -1;
    /* access modifiers changed from: private */
    public Object lastInsets;
    private long lastPhotoSetTime;
    /* access modifiers changed from: private */
    public long lastSaveTime;
    /* access modifiers changed from: private */
    public String lastTitle;
    /* access modifiers changed from: private */
    public MediaController.CropState leftCropState;
    /* access modifiers changed from: private */
    public CropTransform leftCropTransform = new CropTransform();
    /* access modifiers changed from: private */
    public ImageReceiver leftImage = new ImageReceiver();
    private boolean leftImageIsVideo;
    /* access modifiers changed from: private */
    public PaintingOverlay leftPaintingOverlay;
    private boolean loadInitialVideo;
    private boolean loadingMoreImages;
    Runnable longPressRunnable = new PhotoViewer$$ExternalSyntheticLambda51(this);
    float longPressX;
    /* access modifiers changed from: private */
    public boolean manuallyPaused;
    /* access modifiers changed from: private */
    public StickersAlert masksAlert;
    private ActionBarMenuItem masksItem;
    private int maxSelectedPhotos = -1;
    private float maxX;
    private float maxY;
    /* access modifiers changed from: private */
    public LinearLayoutManager mentionLayoutManager;
    /* access modifiers changed from: private */
    public AnimatorSet mentionListAnimation;
    /* access modifiers changed from: private */
    public RecyclerListView mentionListView;
    /* access modifiers changed from: private */
    public MentionsAdapter mentionsAdapter;
    /* access modifiers changed from: private */
    public ActionBarMenuItem menuItem;
    private long mergeDialogId;
    private float minX;
    private float minY;
    /* access modifiers changed from: private */
    public AnimatorSet miniProgressAnimator;
    private Runnable miniProgressShowRunnable = new PhotoViewer$$ExternalSyntheticLambda56(this);
    /* access modifiers changed from: private */
    public RadialProgressView miniProgressView;
    /* access modifiers changed from: private */
    public float mirror = 0.0f;
    /* access modifiers changed from: private */
    public ImageView mirrorItem;
    private float moveStartX;
    private float moveStartY;
    /* access modifiers changed from: private */
    public boolean moving;
    /* access modifiers changed from: private */
    public ImageView muteItem;
    /* access modifiers changed from: private */
    public boolean muteVideo;
    private String nameOverride;
    /* access modifiers changed from: private */
    public FadingTextViewLayout nameTextView;
    private ValueAnimator navBarAnimator;
    /* access modifiers changed from: private */
    public View navigationBar;
    /* access modifiers changed from: private */
    public int navigationBarHeight;
    /* access modifiers changed from: private */
    public boolean needCaptionLayout;
    /* access modifiers changed from: private */
    public long needCaptureFrameReadyAtTime = -1;
    private boolean needSearchImageInArr;
    /* access modifiers changed from: private */
    public boolean needShowOnReady;
    private Runnable onUserLeaveHintListener = new PhotoViewer$$ExternalSyntheticLambda57(this);
    /* access modifiers changed from: private */
    public boolean openedFullScreenVideo;
    private boolean opennedFromMedia;
    /* access modifiers changed from: private */
    public OrientationEventListener orientationEventListener;
    /* access modifiers changed from: private */
    public int originalBitrate;
    /* access modifiers changed from: private */
    public int originalHeight;
    private long originalSize;
    /* access modifiers changed from: private */
    public int originalWidth;
    /* access modifiers changed from: private */
    public boolean padImageForHorizontalInsets;
    /* access modifiers changed from: private */
    public PageBlocksAdapter pageBlocksAdapter;
    private ImageView paintButton;
    private ImageView paintItem;
    private int paintViewTouched;
    /* access modifiers changed from: private */
    public PaintingOverlay paintingOverlay;
    /* access modifiers changed from: private */
    public Activity parentActivity;
    /* access modifiers changed from: private */
    public ChatAttachAlert parentAlert;
    /* access modifiers changed from: private */
    public ChatActivity parentChatActivity;
    private BaseFragment parentFragment;
    /* access modifiers changed from: private */
    public PhotoCropView photoCropView;
    /* access modifiers changed from: private */
    public PhotoFilterView photoFilterView;
    /* access modifiers changed from: private */
    public PhotoPaintView photoPaintView;
    /* access modifiers changed from: private */
    public PhotoProgressView[] photoProgressViews = new PhotoProgressView[3];
    /* access modifiers changed from: private */
    public PhotoViewerWebView photoViewerWebView;
    /* access modifiers changed from: private */
    public CounterView photosCounterView;
    /* access modifiers changed from: private */
    public FrameLayout pickerView;
    /* access modifiers changed from: private */
    public ImageView pickerViewSendButton;
    private Drawable pickerViewSendDrawable;
    private float pinchCenterX;
    private float pinchCenterY;
    private float pinchStartDistance;
    private float pinchStartScale = 1.0f;
    private float pinchStartX;
    private float pinchStartY;
    /* access modifiers changed from: private */
    public boolean pipAnimationInProgress;
    private boolean pipAvailable;
    /* access modifiers changed from: private */
    public ActionBarMenuItem pipItem;
    /* access modifiers changed from: private */
    public int[] pipPosition = new int[2];
    /* access modifiers changed from: private */
    public boolean pipVideoOverlayAnimateFlag = true;
    /* access modifiers changed from: private */
    public PhotoViewerProvider placeProvider;
    private View playButtonAccessibilityOverlay;
    /* access modifiers changed from: private */
    public boolean playerAutoStarted;
    private boolean playerInjected;
    private boolean playerLooping;
    private boolean playerWasPlaying;
    /* access modifiers changed from: private */
    public boolean playerWasReady;
    private GradientDrawable[] pressedDrawable = new GradientDrawable[2];
    private float[] pressedDrawableAlpha = new float[2];
    /* access modifiers changed from: private */
    public int prevOrientation = -10;
    private int previousCompression;
    private boolean previousCropMirrored;
    private int previousCropOrientation;
    private float previousCropPh;
    private float previousCropPw;
    private float previousCropPx;
    private float previousCropPy;
    private float previousCropRotation;
    private float previousCropScale;
    private boolean previousHasTransform;
    /* access modifiers changed from: private */
    public RadialProgressView progressView;
    /* access modifiers changed from: private */
    public QualityChooseView qualityChooseView;
    /* access modifiers changed from: private */
    public AnimatorSet qualityChooseViewAnimation;
    /* access modifiers changed from: private */
    public PickerBottomLayoutViewer qualityPicker;
    private boolean requestingPreview;
    private TextView resetButton;
    /* access modifiers changed from: private */
    public Theme.ResourcesProvider resourcesProvider;
    /* access modifiers changed from: private */
    public int resultHeight;
    /* access modifiers changed from: private */
    public int resultWidth;
    /* access modifiers changed from: private */
    public MediaController.CropState rightCropState;
    /* access modifiers changed from: private */
    public CropTransform rightCropTransform = new CropTransform();
    /* access modifiers changed from: private */
    public ImageReceiver rightImage = new ImageReceiver();
    private boolean rightImageIsVideo;
    /* access modifiers changed from: private */
    public PaintingOverlay rightPaintingOverlay;
    /* access modifiers changed from: private */
    public float rotate = 0.0f;
    /* access modifiers changed from: private */
    public ImageView rotateItem;
    /* access modifiers changed from: private */
    public int rotationValue;
    /* access modifiers changed from: private */
    public SavedState savedState = null;
    private ArrayMap<String, SavedVideoPosition> savedVideoPositions = new ArrayMap<>();
    /* access modifiers changed from: private */
    public float scale = 1.0f;
    private Scroller scroller;
    /* access modifiers changed from: private */
    public ArrayList<SecureDocument> secureDocuments = new ArrayList<>();
    /* access modifiers changed from: private */
    public float seekToProgressPending;
    private float seekToProgressPending2;
    /* access modifiers changed from: private */
    public int selectedCompression;
    /* access modifiers changed from: private */
    public ListAdapter selectedPhotosAdapter;
    /* access modifiers changed from: private */
    public SelectedPhotosListView selectedPhotosListView;
    private ActionBarMenuItem sendItem;
    /* access modifiers changed from: private */
    public int sendPhotoType;
    private ActionBarPopupWindow.ActionBarPopupWindowLayout sendPopupLayout;
    private ActionBarPopupWindow sendPopupWindow;
    private Runnable setLoadingRunnable = new Runnable() {
        public void run() {
            if (PhotoViewer.this.currentMessageObject != null) {
                FileLoader.getInstance(PhotoViewer.this.currentMessageObject.currentAccount).setLoadingVideo(PhotoViewer.this.currentMessageObject.getDocument(), true, false);
            }
        }
    };
    private ImageView shareButton;
    private ActionBarMenuItem shareItem;
    private int sharedMediaType;
    /* access modifiers changed from: private */
    public String shouldSavePositionForCurrentVideo;
    private String shouldSavePositionForCurrentVideoShortTerm;
    /* access modifiers changed from: private */
    public PlaceProviderObject showAfterAnimation;
    /* access modifiers changed from: private */
    public boolean shownControlsByEnd = false;
    private ImageReceiver sideImage;
    private boolean skipFirstBufferingProgress;
    /* access modifiers changed from: private */
    public int slideshowMessageId;
    private ActionBarPopupWindow.GapView speedGap;
    private ActionBarMenuSubItem speedItem;
    private int startOffset;
    /* access modifiers changed from: private */
    public long startTime;
    private long startedPlayTime;
    private boolean streamingAlertShown;
    /* access modifiers changed from: private */
    public TextureView.SurfaceTextureListener surfaceTextureListener = new TextureView.SurfaceTextureListener() {
        public void onSurfaceTextureAvailable(SurfaceTexture surfaceTexture, int i, int i2) {
        }

        public void onSurfaceTextureSizeChanged(SurfaceTexture surfaceTexture, int i, int i2) {
        }

        public boolean onSurfaceTextureDestroyed(SurfaceTexture surfaceTexture) {
            if (PhotoViewer.this.videoTextureView == null || !PhotoViewer.this.changingTextureView) {
                return true;
            }
            if (PhotoViewer.this.switchingInlineMode) {
                int unused = PhotoViewer.this.waitingForFirstTextureUpload = 2;
            }
            PhotoViewer.this.videoTextureView.setSurfaceTexture(surfaceTexture);
            PhotoViewer.this.videoTextureView.setVisibility(0);
            boolean unused2 = PhotoViewer.this.changingTextureView = false;
            PhotoViewer.this.containerView.invalidate();
            return false;
        }

        public void onSurfaceTextureUpdated(SurfaceTexture surfaceTexture) {
            if (PhotoViewer.this.waitingForFirstTextureUpload == 1) {
                PhotoViewer.this.changedTextureView.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
                    public boolean onPreDraw() {
                        PhotoViewer.this.changedTextureView.getViewTreeObserver().removeOnPreDrawListener(this);
                        if (PhotoViewer.this.textureImageView != null) {
                            if (PhotoViewer.this.isInline) {
                                AndroidUtilities.runOnUIThread(new PhotoViewer$7$1$$ExternalSyntheticLambda0(this), 300);
                            } else {
                                PhotoViewer.this.textureImageView.setVisibility(4);
                                PhotoViewer.this.textureImageView.setImageDrawable((Drawable) null);
                                if (PhotoViewer.this.currentBitmap != null) {
                                    PhotoViewer.this.currentBitmap.recycle();
                                    Bitmap unused = PhotoViewer.this.currentBitmap = null;
                                }
                            }
                        }
                        AndroidUtilities.runOnUIThread(new PhotoViewer$7$1$$ExternalSyntheticLambda1(this));
                        int unused2 = PhotoViewer.this.waitingForFirstTextureUpload = 0;
                        return true;
                    }

                    /* access modifiers changed from: private */
                    public /* synthetic */ void lambda$onPreDraw$0() {
                        PhotoViewer.this.textureImageView.setVisibility(4);
                        PhotoViewer.this.textureImageView.setImageDrawable((Drawable) null);
                        if (PhotoViewer.this.currentBitmap != null) {
                            PhotoViewer.this.currentBitmap.recycle();
                            Bitmap unused = PhotoViewer.this.currentBitmap = null;
                        }
                    }

                    /* access modifiers changed from: private */
                    public /* synthetic */ void lambda$onPreDraw$1() {
                        if (PhotoViewer.this.isInline) {
                            PhotoViewer.this.dismissInternal();
                        }
                    }
                });
                PhotoViewer.this.changedTextureView.invalidate();
            }
        }
    };
    private int switchImageAfterAnimation;
    /* access modifiers changed from: private */
    public Runnable switchToInlineRunnable = new Runnable() {
        public void run() {
            if (PipVideoOverlay.isVisible()) {
                PipVideoOverlay.dismiss();
                AndroidUtilities.runOnUIThread(this, 250);
                return;
            }
            boolean unused = PhotoViewer.this.switchingInlineMode = false;
            if (PhotoViewer.this.currentBitmap != null) {
                PhotoViewer.this.currentBitmap.recycle();
                Bitmap unused2 = PhotoViewer.this.currentBitmap = null;
            }
            boolean unused3 = PhotoViewer.this.changingTextureView = true;
            if (PhotoViewer.this.textureImageView != null) {
                try {
                    PhotoViewer photoViewer = PhotoViewer.this;
                    Bitmap unused4 = photoViewer.currentBitmap = Bitmaps.createBitmap(photoViewer.videoTextureView.getWidth(), PhotoViewer.this.videoTextureView.getHeight(), Bitmap.Config.ARGB_8888);
                    PhotoViewer.this.videoTextureView.getBitmap(PhotoViewer.this.currentBitmap);
                } catch (Throwable th) {
                    if (PhotoViewer.this.currentBitmap != null) {
                        PhotoViewer.this.currentBitmap.recycle();
                        Bitmap unused5 = PhotoViewer.this.currentBitmap = null;
                    }
                    FileLog.e(th);
                }
                if (PhotoViewer.this.currentBitmap != null) {
                    PhotoViewer.this.textureImageView.setVisibility(0);
                    PhotoViewer.this.textureImageView.setImageBitmap(PhotoViewer.this.currentBitmap);
                } else {
                    PhotoViewer.this.textureImageView.setImageDrawable((Drawable) null);
                }
            }
            boolean unused6 = PhotoViewer.this.isInline = true;
            TextureView unused7 = PhotoViewer.this.changedTextureView = new TextureView(PhotoViewer.this.parentActivity);
            if (PipVideoOverlay.show(false, PhotoViewer.this.parentActivity, PhotoViewer.this.changedTextureView, PhotoViewer.this.videoWidth, PhotoViewer.this.videoHeight, PhotoViewer.this.pipVideoOverlayAnimateFlag)) {
                PipVideoOverlay.setPhotoViewer(PhotoViewer.this);
            }
            boolean unused8 = PhotoViewer.this.pipVideoOverlayAnimateFlag = true;
            PhotoViewer.this.changedTextureView.setVisibility(4);
            PhotoViewer.this.aspectRatioFrameLayout.removeView(PhotoViewer.this.videoTextureView);
        }
    };
    /* access modifiers changed from: private */
    public boolean switchingInlineMode;
    private int switchingToIndex;
    /* access modifiers changed from: private */
    public int switchingToMode = -1;
    private int[] tempInt = new int[2];
    /* access modifiers changed from: private */
    public ImageView textureImageView;
    /* access modifiers changed from: private */
    public boolean textureUploaded;
    private ImageView timeItem;
    private Tooltip tooltip;
    private int totalImagesCount;
    private int totalImagesCountMerge;
    private int touchSlop;
    /* access modifiers changed from: private */
    public long transitionAnimationStartTime;
    /* access modifiers changed from: private */
    public int transitionIndex;
    /* access modifiers changed from: private */
    public float translationX;
    /* access modifiers changed from: private */
    public float translationY;
    private boolean tryStartRequestPreviewOnFinish;
    private ImageView tuneItem;
    private final Runnable updateContainerFlagsRunnable = new PhotoViewer$$ExternalSyntheticLambda55(this);
    /* access modifiers changed from: private */
    public Runnable updateProgressRunnable = new Runnable() {
        public void run() {
            float f;
            float f2;
            if (PhotoViewer.this.videoPlayer != null || (PhotoViewer.this.photoViewerWebView != null && PhotoViewer.this.photoViewerWebView.isControllable())) {
                float f3 = 0.0f;
                if (!PhotoViewer.this.isCurrentVideo) {
                    float access$1800 = ((float) PhotoViewer.this.getCurrentVideoPosition()) / ((float) PhotoViewer.this.getVideoDuration());
                    if (PhotoViewer.this.shownControlsByEnd && !PhotoViewer.this.actionBarWasShownBeforeByEnd) {
                        access$1800 = 0.0f;
                    }
                    if (PhotoViewer.this.currentVideoFinishedLoading) {
                        f2 = 1.0f;
                    } else {
                        long elapsedRealtime = SystemClock.elapsedRealtime();
                        if (Math.abs(elapsedRealtime - PhotoViewer.this.lastBufferedPositionCheck) >= 500) {
                            if (PhotoViewer.this.photoViewerWebView != null && PhotoViewer.this.photoViewerWebView.isControllable()) {
                                f2 = PhotoViewer.this.photoViewerWebView.getBufferedPosition();
                            } else if (PhotoViewer.this.isStreaming) {
                                f2 = FileLoader.getInstance(PhotoViewer.this.currentAccount).getBufferedProgressFromPosition(PhotoViewer.this.seekToProgressPending != 0.0f ? PhotoViewer.this.seekToProgressPending : f, PhotoViewer.this.currentFileNames[0]);
                            } else {
                                f2 = 1.0f;
                            }
                            long unused = PhotoViewer.this.lastBufferedPositionCheck = elapsedRealtime;
                        } else {
                            f2 = -1.0f;
                        }
                    }
                    if (PhotoViewer.this.inPreview || PhotoViewer.this.videoTimelineView.getVisibility() != 0) {
                        if (PhotoViewer.this.seekToProgressPending == 0.0f) {
                            PhotoViewer photoViewer = PhotoViewer.this;
                            VideoPlayerRewinder videoPlayerRewinder = photoViewer.videoPlayerRewinder;
                            if (videoPlayerRewinder.rewindCount == 0 || !videoPlayerRewinder.rewindByBackSeek) {
                                photoViewer.videoPlayerSeekbar.setProgress(f, false);
                            }
                        }
                        if (f2 != -1.0f) {
                            PhotoViewer.this.videoPlayerSeekbar.setBufferedProgress(f2);
                            PipVideoOverlay.setBufferedProgress(f2);
                        }
                    } else if (f >= PhotoViewer.this.videoTimelineView.getRightProgress()) {
                        boolean unused2 = PhotoViewer.this.manuallyPaused = false;
                        PhotoViewer.this.pauseVideoOrWeb();
                        PhotoViewer.this.videoPlayerSeekbar.setProgress(0.0f);
                        PhotoViewer photoViewer2 = PhotoViewer.this;
                        photoViewer2.seekVideoOrWebTo((long) ((int) (photoViewer2.videoTimelineView.getLeftProgress() * ((float) PhotoViewer.this.getVideoDuration()))));
                        PhotoViewer.this.containerView.invalidate();
                    } else {
                        float leftProgress = f - PhotoViewer.this.videoTimelineView.getLeftProgress();
                        if (leftProgress < 0.0f) {
                            leftProgress = 0.0f;
                        }
                        f = leftProgress / (PhotoViewer.this.videoTimelineView.getRightProgress() - PhotoViewer.this.videoTimelineView.getLeftProgress());
                        if (f > 1.0f) {
                            f = 1.0f;
                        }
                        PhotoViewer.this.videoPlayerSeekbar.setProgress(f);
                    }
                    PhotoViewer.this.videoPlayerSeekbarView.invalidate();
                    if (PhotoViewer.this.shouldSavePositionForCurrentVideo != null && f >= 0.0f && SystemClock.elapsedRealtime() - PhotoViewer.this.lastSaveTime >= 1000) {
                        String unused3 = PhotoViewer.this.shouldSavePositionForCurrentVideo;
                        long unused4 = PhotoViewer.this.lastSaveTime = SystemClock.elapsedRealtime();
                        Utilities.globalQueue.postRunnable(new PhotoViewer$5$$ExternalSyntheticLambda0(this, f));
                    }
                    PhotoViewer.this.updateVideoPlayerTime();
                } else if (!PhotoViewer.this.videoTimelineView.isDragging()) {
                    float access$18002 = ((float) PhotoViewer.this.getCurrentVideoPosition()) / ((float) PhotoViewer.this.getVideoDuration());
                    if (!PhotoViewer.this.shownControlsByEnd || PhotoViewer.this.actionBarWasShownBeforeByEnd) {
                        f3 = access$18002;
                    }
                    if (PhotoViewer.this.inPreview || (PhotoViewer.this.currentEditMode == 0 && PhotoViewer.this.videoTimelineView.getVisibility() != 0)) {
                        if (PhotoViewer.this.sendPhotoType != 1) {
                            PhotoViewer.this.videoTimelineView.setProgress(f3);
                        }
                    } else if (f3 >= PhotoViewer.this.videoTimelineView.getRightProgress()) {
                        PhotoViewer.this.videoTimelineView.setProgress(PhotoViewer.this.videoTimelineView.getLeftProgress());
                        PhotoViewer.this.videoPlayer.seekTo((long) ((int) (PhotoViewer.this.videoTimelineView.getLeftProgress() * ((float) PhotoViewer.this.getVideoDuration()))));
                        boolean unused5 = PhotoViewer.this.manuallyPaused = false;
                        PhotoViewer.this.cancelVideoPlayRunnable();
                        if (PhotoViewer.this.muteVideo || PhotoViewer.this.sendPhotoType == 1 || PhotoViewer.this.currentEditMode != 0 || PhotoViewer.this.switchingToMode > 0) {
                            PhotoViewer.this.playVideoOrWeb();
                        } else {
                            PhotoViewer.this.pauseVideoOrWeb();
                        }
                        PhotoViewer.this.containerView.invalidate();
                    } else {
                        PhotoViewer.this.videoTimelineView.setProgress(f3);
                    }
                    PhotoViewer.this.updateVideoPlayerTime();
                }
            }
            if (PhotoViewer.this.firstFrameView != null) {
                PhotoViewer.this.firstFrameView.updateAlpha();
            }
            if (PhotoViewer.this.isPlaying) {
                AndroidUtilities.runOnUIThread(PhotoViewer.this.updateProgressRunnable, 17);
            }
        }

        /* access modifiers changed from: private */
        public /* synthetic */ void lambda$run$0(float f) {
            ApplicationLoader.applicationContext.getSharedPreferences("media_saved_pos", 0).edit().putFloat(PhotoViewer.this.shouldSavePositionForCurrentVideo, f).commit();
        }
    };
    /* access modifiers changed from: private */
    public boolean useSmoothKeyboard;
    private VelocityTracker velocityTracker;
    /* access modifiers changed from: private */
    public TextView videoAvatarTooltip;
    /* access modifiers changed from: private */
    public boolean videoConvertSupported;
    private float videoCrossfadeAlpha;
    private long videoCrossfadeAlphaLastTime;
    private boolean videoCrossfadeStarted;
    private float videoCutEnd;
    private float videoCutStart;
    /* access modifiers changed from: private */
    public float videoDuration;
    /* access modifiers changed from: private */
    public VideoForwardDrawable videoForwardDrawable;
    private Bitmap videoFrameBitmap = null;
    private Paint videoFrameBitmapPaint = new Paint();
    /* access modifiers changed from: private */
    public int videoFramerate;
    /* access modifiers changed from: private */
    public long videoFramesSize;
    /* access modifiers changed from: private */
    public int videoHeight;
    /* access modifiers changed from: private */
    public Runnable videoPlayRunnable;
    /* access modifiers changed from: private */
    public VideoPlayer videoPlayer;
    private Animator videoPlayerControlAnimator;
    /* access modifiers changed from: private */
    public VideoPlayerControlFrameLayout videoPlayerControlFrameLayout;
    /* access modifiers changed from: private */
    public boolean videoPlayerControlVisible = true;
    /* access modifiers changed from: private */
    public int[] videoPlayerCurrentTime = new int[2];
    VideoPlayerRewinder videoPlayerRewinder = new VideoPlayerRewinder() {
        /* access modifiers changed from: protected */
        public void onRewindCanceled() {
            boolean unused = PhotoViewer.this.onTouchEvent(MotionEvent.obtain(0, 0, 3, 0.0f, 0.0f, 0));
            PhotoViewer.this.videoForwardDrawable.setShowing(false);
            PipVideoOverlay.onRewindCanceled();
        }

        /* access modifiers changed from: protected */
        public void updateRewindProgressUi(long j, float f, boolean z) {
            PhotoViewer.this.videoForwardDrawable.setTime(Math.abs(j));
            if (z) {
                PhotoViewer.this.videoPlayerSeekbar.setProgress(f);
                PhotoViewer.this.videoPlayerSeekbarView.invalidate();
            }
            PipVideoOverlay.onUpdateRewindProgressUi(j, f, z);
        }

        /* access modifiers changed from: protected */
        public void onRewindStart(boolean z) {
            PhotoViewer.this.videoForwardDrawable.setOneShootAnimation(false);
            PhotoViewer.this.videoForwardDrawable.setLeftSide(!z);
            PhotoViewer.this.videoForwardDrawable.setShowing(true);
            PhotoViewer.this.containerView.invalidate();
            PipVideoOverlay.onRewindStart(z);
        }
    };
    /* access modifiers changed from: private */
    public VideoPlayerSeekBar videoPlayerSeekbar;
    /* access modifiers changed from: private */
    public View videoPlayerSeekbarView;
    /* access modifiers changed from: private */
    public SimpleTextView videoPlayerTime;
    /* access modifiers changed from: private */
    public int[] videoPlayerTotalTime = new int[2];
    /* access modifiers changed from: private */
    public VideoSeekPreviewImage videoPreviewFrame;
    /* access modifiers changed from: private */
    public AnimatorSet videoPreviewFrameAnimation;
    private MessageObject videoPreviewMessageObject;
    /* access modifiers changed from: private */
    public boolean videoSizeSet;
    /* access modifiers changed from: private */
    public TextureView videoTextureView;
    private ObjectAnimator videoTimelineAnimator;
    /* access modifiers changed from: private */
    public VideoTimelinePlayView videoTimelineView;
    /* access modifiers changed from: private */
    public int videoWidth;
    private AlertDialog visibleDialog;
    private int waitingForDraw;
    /* access modifiers changed from: private */
    public int waitingForFirstTextureUpload;
    /* access modifiers changed from: private */
    public boolean wasLayout;
    /* access modifiers changed from: private */
    public boolean wasRotated;
    /* access modifiers changed from: private */
    public WindowManager.LayoutParams windowLayoutParams;
    /* access modifiers changed from: private */
    public FrameLayout windowView;
    /* access modifiers changed from: private */
    public boolean zoomAnimation;
    private boolean zooming;

    public static class EmptyPhotoViewerProvider implements PhotoViewerProvider {
        public boolean allowCaption() {
            return true;
        }

        public boolean allowSendingSubmenu() {
            return true;
        }

        public boolean canCaptureMorePhotos() {
            return true;
        }

        public boolean canReplace(int i) {
            return false;
        }

        public boolean canScrollAway() {
            return true;
        }

        public boolean cancelButtonPressed() {
            return true;
        }

        public boolean closeKeyboard() {
            return false;
        }

        public void deleteImageAtIndex(int i) {
        }

        public String getDeleteMessageString() {
            return null;
        }

        public MessageObject getEditingMessageObject() {
            return null;
        }

        public int getPhotoIndex(int i) {
            return -1;
        }

        public PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, TLRPC$FileLocation tLRPC$FileLocation, int i, boolean z) {
            return null;
        }

        public int getSelectedCount() {
            return 0;
        }

        public HashMap<Object, Object> getSelectedPhotos() {
            return null;
        }

        public ArrayList<Object> getSelectedPhotosOrder() {
            return null;
        }

        public CharSequence getSubtitleFor(int i) {
            return null;
        }

        public ImageReceiver.BitmapHolder getThumbForPhoto(MessageObject messageObject, TLRPC$FileLocation tLRPC$FileLocation, int i) {
            return null;
        }

        public CharSequence getTitleFor(int i) {
            return null;
        }

        public int getTotalImageCount() {
            return -1;
        }

        public boolean isPhotoChecked(int i) {
            return false;
        }

        public boolean loadMore() {
            return false;
        }

        public void needAddMorePhotos() {
        }

        public void onApplyCaption(CharSequence charSequence) {
        }

        public void onCaptionChanged(CharSequence charSequence) {
        }

        public void onClose() {
        }

        public void onOpen() {
        }

        public void openPhotoForEdit(String str, String str2, boolean z) {
        }

        public void replaceButtonPressed(int i, VideoEditedInfo videoEditedInfo) {
        }

        public boolean scaleToFill() {
            return false;
        }

        public void sendButtonPressed(int i, VideoEditedInfo videoEditedInfo, boolean z, int i2, boolean z2) {
        }

        public int setPhotoChecked(int i, VideoEditedInfo videoEditedInfo) {
            return -1;
        }

        public int setPhotoUnchecked(Object obj) {
            return -1;
        }

        public void updatePhotoAtIndex(int i) {
        }

        public void willHidePhotoViewer() {
        }

        public void willSwitchFromPhoto(MessageObject messageObject, TLRPC$FileLocation tLRPC$FileLocation, int i) {
        }
    }

    public interface PageBlocksAdapter {
        TLRPC$PageBlock get(int i);

        List<TLRPC$PageBlock> getAll();

        CharSequence getCaption(int i);

        File getFile(int i);

        TLRPC$PhotoSize getFileLocation(TLObject tLObject, int[] iArr);

        String getFileName(int i);

        int getItemsCount();

        TLObject getMedia(int i);

        Object getParentObject();

        boolean isVideo(int i);

        void updateSlideshowCell(TLRPC$PageBlock tLRPC$PageBlock);
    }

    public interface PhotoViewerProvider {
        boolean allowCaption();

        boolean allowSendingSubmenu();

        boolean canCaptureMorePhotos();

        boolean canReplace(int i);

        boolean canScrollAway();

        boolean cancelButtonPressed();

        boolean closeKeyboard();

        void deleteImageAtIndex(int i);

        String getDeleteMessageString();

        MessageObject getEditingMessageObject();

        int getPhotoIndex(int i);

        PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, TLRPC$FileLocation tLRPC$FileLocation, int i, boolean z);

        int getSelectedCount();

        HashMap<Object, Object> getSelectedPhotos();

        ArrayList<Object> getSelectedPhotosOrder();

        CharSequence getSubtitleFor(int i);

        ImageReceiver.BitmapHolder getThumbForPhoto(MessageObject messageObject, TLRPC$FileLocation tLRPC$FileLocation, int i);

        CharSequence getTitleFor(int i);

        int getTotalImageCount();

        boolean isPhotoChecked(int i);

        boolean loadMore();

        void needAddMorePhotos();

        void onApplyCaption(CharSequence charSequence);

        void onCaptionChanged(CharSequence charSequence);

        void onClose();

        void onOpen();

        void openPhotoForEdit(String str, String str2, boolean z);

        void replaceButtonPressed(int i, VideoEditedInfo videoEditedInfo);

        boolean scaleToFill();

        void sendButtonPressed(int i, VideoEditedInfo videoEditedInfo, boolean z, int i2, boolean z2);

        int setPhotoChecked(int i, VideoEditedInfo videoEditedInfo);

        int setPhotoUnchecked(Object obj);

        void updatePhotoAtIndex(int i);

        void willHidePhotoViewer();

        void willSwitchFromPhoto(MessageObject messageObject, TLRPC$FileLocation tLRPC$FileLocation, int i);
    }

    public static class PlaceProviderObject {
        public boolean allowTakeAnimation = true;
        public ClippingImageView animatingImageView;
        public int animatingImageViewYOffset;
        public boolean canEdit;
        public int clipBottomAddition;
        public int clipTopAddition;
        public long dialogId;
        public ImageReceiver imageReceiver;
        public boolean isEvent;
        public View parentView;
        public int[] radius;
        public float scale = 1.0f;
        public long size;
        public int starOffset;
        public ImageReceiver.BitmapHolder thumb;
        public int viewX;
        public int viewY;
    }

    private boolean enableSwipeToPiP() {
        return false;
    }

    /* access modifiers changed from: private */
    public static /* synthetic */ boolean lambda$setParentActivity$24(View view, MotionEvent motionEvent) {
        return true;
    }

    /* access modifiers changed from: private */
    public static /* synthetic */ boolean lambda$setParentActivity$25(View view, MotionEvent motionEvent) {
        return true;
    }

    public void onConfigurationChanged(Configuration configuration) {
    }

    public boolean onDoubleTapEvent(MotionEvent motionEvent) {
        return false;
    }

    public void onLongPress(MotionEvent motionEvent) {
    }

    public boolean onScroll(MotionEvent motionEvent, MotionEvent motionEvent2, float f, float f2) {
        return false;
    }

    public void onShowPress(MotionEvent motionEvent) {
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$new$0() {
        toggleMiniProgressInternal(true);
    }

    public void addPhoto(MessageObject messageObject, int i) {
        if (i == this.classGuid) {
            if (this.imagesByIds[0].indexOfKey(messageObject.getId()) < 0) {
                if (this.opennedFromMedia) {
                    this.imagesArr.add(messageObject);
                } else {
                    this.imagesArr.add(0, messageObject);
                }
                this.imagesByIds[0].put(messageObject.getId(), messageObject);
            }
            this.endReached[0] = this.imagesArr.size() == this.totalImagesCount;
            setImages();
        }
    }

    public int getClassGuid() {
        return this.classGuid;
    }

    public void setCaption(CharSequence charSequence) {
        this.hasCaptionForAllMedia = true;
        this.captionForAllMedia = charSequence;
        setCurrentCaption((MessageObject) null, charSequence, false);
        updateCaptionTextForCurrentPhoto((Object) null);
    }

    private static class SavedVideoPosition {
        public final float position;
        public final long timestamp;

        public SavedVideoPosition(float f, long j) {
            this.position = f;
            this.timestamp = j;
        }
    }

    /* access modifiers changed from: private */
    public void onLinkClick(ClickableSpan clickableSpan, TextView textView) {
        if (textView == null || !(clickableSpan instanceof URLSpan)) {
            clickableSpan.onClick(textView);
            return;
        }
        String url = ((URLSpan) clickableSpan).getURL();
        if (url.startsWith("video")) {
            if (this.videoPlayer != null && this.currentMessageObject != null) {
                int intValue = Utilities.parseInt((CharSequence) url).intValue();
                if (this.videoPlayer.getDuration() == -9223372036854775807L) {
                    this.seekToProgressPending = ((float) intValue) / ((float) this.currentMessageObject.getDuration());
                    return;
                }
                long j = ((long) intValue) * 1000;
                this.videoPlayer.seekTo(j);
                this.videoPlayerSeekbar.setProgress(((float) j) / ((float) this.videoPlayer.getDuration()), true);
                this.videoPlayerSeekbarView.invalidate();
            }
        } else if (url.startsWith("#")) {
            if (this.parentActivity instanceof LaunchActivity) {
                DialogsActivity dialogsActivity = new DialogsActivity((Bundle) null);
                dialogsActivity.setSearchString(url);
                ((LaunchActivity) this.parentActivity).presentFragment(dialogsActivity, false, true);
                closePhoto(false, false);
            }
        } else if (this.parentChatActivity == null || (!(clickableSpan instanceof URLSpanReplacement) && !AndroidUtilities.shouldShowUrlInAlert(url))) {
            clickableSpan.onClick(textView);
        } else {
            AlertsCreator.showOpenUrlAlert(this.parentChatActivity, url, true, true);
        }
    }

    /* access modifiers changed from: private */
    /* JADX WARNING: Removed duplicated region for block: B:7:0x0036  */
    /* JADX WARNING: Removed duplicated region for block: B:8:0x003e  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public void onLinkLongPress(android.text.style.URLSpan r11, android.widget.TextView r12, java.lang.Runnable r13) {
        /*
            r10 = this;
            org.telegram.ui.ActionBar.BottomSheet$Builder r0 = new org.telegram.ui.ActionBar.BottomSheet$Builder
            android.app.Activity r1 = r10.parentActivity
            org.telegram.ui.ActionBar.Theme$ResourcesProvider r2 = r10.resourcesProvider
            r3 = 0
            r4 = -14933463(0xffffffffff1CLASSNAME, float:-2.0753694E38)
            r0.<init>(r1, r3, r2, r4)
            java.lang.String r1 = r11.getURL()
            java.lang.String r2 = "video?"
            boolean r1 = r1.startsWith(r2)
            r2 = -1
            r5 = 1
            if (r1 == 0) goto L_0x0033
            java.lang.String r1 = r11.getURL()     // Catch:{ all -> 0x0033 }
            java.lang.String r6 = r11.getURL()     // Catch:{ all -> 0x0033 }
            r7 = 63
            int r6 = r6.indexOf(r7)     // Catch:{ all -> 0x0033 }
            int r6 = r6 + r5
            java.lang.String r1 = r1.substring(r6)     // Catch:{ all -> 0x0033 }
            int r1 = java.lang.Integer.parseInt(r1)     // Catch:{ all -> 0x0033 }
            goto L_0x0034
        L_0x0033:
            r1 = -1
        L_0x0034:
            if (r1 < 0) goto L_0x003e
            java.lang.String r6 = org.telegram.messenger.AndroidUtilities.formatDuration(r1, r3)
            r0.setTitle(r6)
            goto L_0x0045
        L_0x003e:
            java.lang.String r6 = r11.getURL()
            r0.setTitle(r6)
        L_0x0045:
            r6 = 2
            java.lang.CharSequence[] r7 = new java.lang.CharSequence[r6]
            int r8 = org.telegram.messenger.R.string.Open
            java.lang.String r9 = "Open"
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r9, r8)
            r7[r3] = r8
            int r8 = org.telegram.messenger.R.string.Copy
            java.lang.String r9 = "Copy"
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r9, r8)
            r7[r5] = r8
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda13 r8 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda13
            r8.<init>(r10, r11, r12, r1)
            r0.setItems(r7, r8)
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda14 r11 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda14
            r11.<init>(r13)
            r0.setOnPreDismissListener(r11)
            org.telegram.ui.ActionBar.BottomSheet r11 = r0.create()
            r11.scrollNavBar = r5
            r11.show()
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r12 = r10.containerView     // Catch:{ Exception -> 0x007a }
            r12.performHapticFeedback(r3, r6)     // Catch:{ Exception -> 0x007a }
        L_0x007a:
            r11.setItemColor(r3, r2, r2)
            r11.setItemColor(r5, r2, r2)
            r11.setBackgroundColor(r4)
            r12 = -7697782(0xffffffffff8a8a8a, float:NaN)
            r11.setTitleColor(r12)
            r11.setCalcMandatoryInsets(r5)
            android.view.Window r12 = r11.getWindow()
            org.telegram.messenger.AndroidUtilities.setNavigationBarColor(r12, r4, r3)
            android.view.Window r12 = r11.getWindow()
            org.telegram.messenger.AndroidUtilities.setLightNavigationBar((android.view.Window) r12, (boolean) r3)
            r11.scrollNavBar = r5
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.onLinkLongPress(android.text.style.URLSpan, android.widget.TextView, java.lang.Runnable):void");
    }

    /* access modifiers changed from: private */
    /* JADX WARNING: Removed duplicated region for block: B:51:0x0104  */
    /* JADX WARNING: Removed duplicated region for block: B:52:0x010d  */
    /* JADX WARNING: Removed duplicated region for block: B:61:0x013d  */
    /* JADX WARNING: Removed duplicated region for block: B:65:? A[RETURN, SYNTHETIC] */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public /* synthetic */ void lambda$onLinkLongPress$1(android.text.style.URLSpan r6, android.widget.TextView r7, int r8, android.content.DialogInterface r9, int r10) {
        /*
            r5 = this;
            if (r10 != 0) goto L_0x0007
            r5.onLinkClick(r6, r7)
            goto L_0x014e
        L_0x0007:
            r7 = 1
            if (r10 != r7) goto L_0x014e
            java.lang.String r6 = r6.getURL()
            java.lang.String r9 = "mailto:"
            boolean r9 = r6.startsWith(r9)
            r10 = 0
            if (r9 == 0) goto L_0x001f
            r7 = 7
            java.lang.String r6 = r6.substring(r7)
        L_0x001c:
            r7 = 0
            goto L_0x00ff
        L_0x001f:
            java.lang.String r9 = "tel:"
            boolean r9 = r6.startsWith(r9)
            if (r9 == 0) goto L_0x002e
            r8 = 4
            java.lang.String r6 = r6.substring(r8)
            goto L_0x00ff
        L_0x002e:
            if (r8 < 0) goto L_0x001c
            org.telegram.messenger.MessageObject r9 = r5.currentMessageObject
            if (r9 == 0) goto L_0x001c
            boolean r0 = r9.scheduled
            if (r0 != 0) goto L_0x001c
            boolean r0 = r9.isVideo()
            if (r0 != 0) goto L_0x0058
            org.telegram.messenger.MessageObject r0 = r5.currentMessageObject
            boolean r0 = r0.isRoundVideo()
            if (r0 != 0) goto L_0x0058
            org.telegram.messenger.MessageObject r0 = r5.currentMessageObject
            boolean r0 = r0.isVoice()
            if (r0 != 0) goto L_0x0058
            org.telegram.messenger.MessageObject r0 = r5.currentMessageObject
            boolean r0 = r0.isMusic()
            if (r0 == 0) goto L_0x0057
            goto L_0x0058
        L_0x0057:
            r7 = 0
        L_0x0058:
            if (r7 != 0) goto L_0x0061
            org.telegram.messenger.MessageObject r7 = r5.currentMessageObject
            org.telegram.messenger.MessageObject r7 = r7.replyMessageObject
            if (r7 == 0) goto L_0x0061
            r9 = r7
        L_0x0061:
            long r0 = r9.getDialogId()
            int r7 = r9.getId()
            org.telegram.tgnet.TLRPC$Message r2 = r9.messageOwner
            org.telegram.tgnet.TLRPC$MessageFwdHeader r2 = r2.fwd_from
            if (r2 == 0) goto L_0x008c
            org.telegram.tgnet.TLRPC$Peer r3 = r2.saved_from_peer
            if (r3 == 0) goto L_0x007e
            long r0 = org.telegram.messenger.MessageObject.getPeerId(r3)
            org.telegram.tgnet.TLRPC$Message r7 = r9.messageOwner
            org.telegram.tgnet.TLRPC$MessageFwdHeader r7 = r7.fwd_from
            int r7 = r7.saved_from_msg_id
            goto L_0x008c
        L_0x007e:
            org.telegram.tgnet.TLRPC$Peer r2 = r2.from_id
            if (r2 == 0) goto L_0x008c
            long r0 = org.telegram.messenger.MessageObject.getPeerId(r2)
            org.telegram.tgnet.TLRPC$Message r7 = r9.messageOwner
            org.telegram.tgnet.TLRPC$MessageFwdHeader r7 = r7.fwd_from
            int r7 = r7.channel_post
        L_0x008c:
            boolean r9 = org.telegram.messenger.DialogObject.isChatDialog(r0)
            java.lang.String r2 = "?t="
            java.lang.String r3 = "/"
            java.lang.String r4 = "https://t.me/"
            if (r9 == 0) goto L_0x00cc
            int r9 = r5.currentAccount
            org.telegram.messenger.MessagesController r9 = org.telegram.messenger.MessagesController.getInstance(r9)
            long r0 = -r0
            java.lang.Long r0 = java.lang.Long.valueOf(r0)
            org.telegram.tgnet.TLRPC$Chat r9 = r9.getChat(r0)
            if (r9 == 0) goto L_0x001c
            java.lang.String r0 = r9.username
            if (r0 == 0) goto L_0x001c
            java.lang.StringBuilder r6 = new java.lang.StringBuilder
            r6.<init>()
            r6.append(r4)
            java.lang.String r9 = r9.username
            r6.append(r9)
            r6.append(r3)
            r6.append(r7)
            r6.append(r2)
            r6.append(r8)
            java.lang.String r6 = r6.toString()
            goto L_0x001c
        L_0x00cc:
            int r9 = r5.currentAccount
            org.telegram.messenger.MessagesController r9 = org.telegram.messenger.MessagesController.getInstance(r9)
            java.lang.Long r0 = java.lang.Long.valueOf(r0)
            org.telegram.tgnet.TLRPC$User r9 = r9.getUser(r0)
            if (r9 == 0) goto L_0x001c
            java.lang.String r0 = r9.username
            if (r0 == 0) goto L_0x001c
            java.lang.StringBuilder r6 = new java.lang.StringBuilder
            r6.<init>()
            r6.append(r4)
            java.lang.String r9 = r9.username
            r6.append(r9)
            r6.append(r3)
            r6.append(r7)
            r6.append(r2)
            r6.append(r8)
            java.lang.String r6 = r6.toString()
            goto L_0x001c
        L_0x00ff:
            org.telegram.messenger.AndroidUtilities.addToClipboard(r6)
            if (r7 == 0) goto L_0x010d
            int r6 = org.telegram.messenger.R.string.PhoneCopied
            java.lang.String r7 = "PhoneCopied"
            java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r7, r6)
            goto L_0x0137
        L_0x010d:
            java.lang.String r7 = "#"
            boolean r7 = r6.startsWith(r7)
            if (r7 == 0) goto L_0x011e
            int r6 = org.telegram.messenger.R.string.HashtagCopied
            java.lang.String r7 = "HashtagCopied"
            java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r7, r6)
            goto L_0x0137
        L_0x011e:
            java.lang.String r7 = "@"
            boolean r6 = r6.startsWith(r7)
            if (r6 == 0) goto L_0x012f
            int r6 = org.telegram.messenger.R.string.UsernameCopied
            java.lang.String r7 = "UsernameCopied"
            java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r7, r6)
            goto L_0x0137
        L_0x012f:
            int r6 = org.telegram.messenger.R.string.LinkCopied
            java.lang.String r7 = "LinkCopied"
            java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r7, r6)
        L_0x0137:
            int r7 = android.os.Build.VERSION.SDK_INT
            r8 = 31
            if (r7 >= r8) goto L_0x014e
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r7 = r5.containerView
            org.telegram.ui.ActionBar.Theme$ResourcesProvider r8 = r5.resourcesProvider
            org.telegram.ui.Components.BulletinFactory r7 = org.telegram.ui.Components.BulletinFactory.of(r7, r8)
            int r8 = org.telegram.messenger.R.raw.voip_invite
            org.telegram.ui.Components.Bulletin r6 = r7.createSimpleBulletin(r8, r6)
            r6.show()
        L_0x014e:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.lambda$onLinkLongPress$1(android.text.style.URLSpan, android.widget.TextView, int, android.content.DialogInterface, int):void");
    }

    /* access modifiers changed from: private */
    public void cancelFlashAnimations() {
        View view = this.flashView;
        if (view != null) {
            view.animate().setListener((Animator.AnimatorListener) null).cancel();
            this.flashView.setAlpha(0.0f);
        }
        AnimatorSet animatorSet = this.flashAnimator;
        if (animatorSet != null) {
            animatorSet.cancel();
            this.flashAnimator = null;
        }
        PhotoCropView photoCropView2 = this.photoCropView;
        if (photoCropView2 != null) {
            photoCropView2.cancelThumbAnimation();
        }
    }

    /* access modifiers changed from: private */
    public void cancelVideoPlayRunnable() {
        Runnable runnable = this.videoPlayRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
            this.videoPlayRunnable = null;
        }
    }

    /* access modifiers changed from: private */
    public long getCurrentVideoPosition() {
        PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
        if (photoViewerWebView2 != null && photoViewerWebView2.isControllable()) {
            return (long) this.photoViewerWebView.getCurrentPosition();
        }
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 == null) {
            return 0;
        }
        return videoPlayer2.getCurrentPosition();
    }

    /* access modifiers changed from: private */
    public long getVideoDuration() {
        PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
        if (photoViewerWebView2 != null && photoViewerWebView2.isControllable()) {
            return (long) this.photoViewerWebView.getVideoDuration();
        }
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 == null) {
            return 0;
        }
        return videoPlayer2.getDuration();
    }

    /* access modifiers changed from: private */
    public void seekVideoOrWebTo(long j) {
        PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
        if (photoViewerWebView2 == null || !photoViewerWebView2.isControllable()) {
            VideoPlayer videoPlayer2 = this.videoPlayer;
            if (videoPlayer2 != null) {
                videoPlayer2.seekTo(j);
            }
        } else {
            this.photoViewerWebView.seekTo(j);
        }
        updateVideoPlayerTime();
    }

    /* access modifiers changed from: private */
    public boolean isVideoPlaying() {
        PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
        if (photoViewerWebView2 != null && photoViewerWebView2.isControllable()) {
            return this.photoViewerWebView.isPlaying();
        }
        VideoPlayer videoPlayer2 = this.videoPlayer;
        return videoPlayer2 != null && videoPlayer2.isPlaying();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$new$3() {
        if (this.isVisible && this.animationInProgress == 0) {
            updateContainerFlags(this.isActionBarVisible);
        }
    }

    private static class EditState {
        public long averageDuration;
        public MediaController.CropState cropState;
        public ArrayList<VideoEditedInfo.MediaEntity> croppedMediaEntities;
        public String croppedPaintPath;
        public ArrayList<VideoEditedInfo.MediaEntity> mediaEntities;
        public String paintPath;
        public MediaController.SavedFilterState savedFilterState;

        private EditState() {
        }

        public void reset() {
            this.paintPath = null;
            this.cropState = null;
            this.savedFilterState = null;
            this.mediaEntities = null;
            this.croppedPaintPath = null;
            this.croppedMediaEntities = null;
            this.averageDuration = 0;
        }
    }

    private class SavedState {
        private int index;
        private ArrayList<MessageObject> messages;
        private PhotoViewerProvider provider;

        public SavedState(int i, ArrayList<MessageObject> arrayList, PhotoViewerProvider photoViewerProvider) {
            this.messages = arrayList;
            this.index = i;
            this.provider = photoViewerProvider;
        }

        public void restore() {
            PhotoViewerProvider unused = PhotoViewer.this.placeProvider = this.provider;
            if (Build.VERSION.SDK_INT >= 21) {
                PhotoViewer.this.windowLayoutParams.flags = -NUM;
            } else {
                PhotoViewer.this.windowLayoutParams.flags = 131072;
            }
            PhotoViewer.this.windowLayoutParams.softInputMode = (PhotoViewer.this.useSmoothKeyboard ? 32 : 16) | 256;
            PhotoViewer.this.windowView.setFocusable(false);
            PhotoViewer.this.containerView.setFocusable(false);
            PhotoViewer.this.backgroundDrawable.setAlpha(255);
            PhotoViewer.this.containerView.setAlpha(1.0f);
            PhotoViewer photoViewer = PhotoViewer.this;
            ArrayList<MessageObject> arrayList = this.messages;
            int i = this.index;
            photoViewer.onPhotoShow((MessageObject) null, (TLRPC$FileLocation) null, (ImageLocation) null, (ImageLocation) null, arrayList, (ArrayList<SecureDocument>) null, (List<Object>) null, i, this.provider.getPlaceForPhoto(arrayList.get(i), (TLRPC$FileLocation) null, this.index, true));
        }
    }

    private class BackgroundDrawable extends ColorDrawable {
        private boolean allowDrawContent;
        /* access modifiers changed from: private */
        public Runnable drawRunnable;
        private final Paint paint;
        private final RectF rect = new RectF();
        private final RectF visibleRect = new RectF();

        public BackgroundDrawable(int i) {
            super(i);
            Paint paint2 = new Paint(1);
            this.paint = paint2;
            paint2.setColor(i);
        }

        @Keep
        public void setAlpha(int i) {
            if (PhotoViewer.this.parentActivity instanceof LaunchActivity) {
                this.allowDrawContent = !PhotoViewer.this.isVisible || i != 255;
                ((LaunchActivity) PhotoViewer.this.parentActivity).drawerLayoutContainer.setAllowDrawContent(this.allowDrawContent);
                if (PhotoViewer.this.parentAlert != null) {
                    if (!this.allowDrawContent) {
                        AndroidUtilities.runOnUIThread(new PhotoViewer$BackgroundDrawable$$ExternalSyntheticLambda0(this), 50);
                    } else {
                        PhotoViewer.this.parentAlert.setAllowDrawContent(true);
                    }
                }
            }
            super.setAlpha(i);
            this.paint.setAlpha(i);
        }

        /* access modifiers changed from: private */
        public /* synthetic */ void lambda$setAlpha$0() {
            if (PhotoViewer.this.parentAlert != null) {
                PhotoViewer.this.parentAlert.setAllowDrawContent(this.allowDrawContent);
            }
        }

        public void draw(Canvas canvas) {
            Runnable runnable;
            if (PhotoViewer.this.animationInProgress == 0 || AndroidUtilities.isTablet() || PhotoViewer.this.currentPlaceObject == null || PhotoViewer.this.currentPlaceObject.animatingImageView == null) {
                super.draw(canvas);
            } else {
                PhotoViewer.this.animatingImageView.getClippedVisibleRect(this.visibleRect);
                if (!this.visibleRect.isEmpty()) {
                    this.visibleRect.inset((float) AndroidUtilities.dp(1.0f), (float) AndroidUtilities.dp(1.0f));
                    Rect bounds = getBounds();
                    float f = (float) bounds.right;
                    float f2 = (float) bounds.bottom;
                    for (int i = 0; i < 4; i++) {
                        if (i == 0) {
                            RectF rectF = this.rect;
                            RectF rectF2 = this.visibleRect;
                            rectF.set(0.0f, rectF2.top, rectF2.left, rectF2.bottom);
                        } else if (i == 1) {
                            this.rect.set(0.0f, 0.0f, f, this.visibleRect.top);
                        } else if (i == 2) {
                            RectF rectF3 = this.rect;
                            RectF rectF4 = this.visibleRect;
                            rectF3.set(rectF4.right, rectF4.top, f, rectF4.bottom);
                        } else if (i == 3) {
                            this.rect.set(0.0f, this.visibleRect.bottom, f, f2);
                        }
                        canvas.drawRect(this.rect, this.paint);
                    }
                }
            }
            if (getAlpha() != 0 && (runnable = this.drawRunnable) != null) {
                AndroidUtilities.runOnUIThread(runnable);
                this.drawRunnable = null;
            }
        }
    }

    private static class SelectedPhotosListView extends RecyclerListView {
        private Drawable arrowDrawable;
        private Paint paint = new Paint(1);
        private RectF rect = new RectF();

        public SelectedPhotosListView(Context context) {
            super(context);
            setWillNotDraw(false);
            setClipToPadding(false);
            setTranslationY((float) (-AndroidUtilities.dp(10.0f)));
            AnonymousClass1 r1 = new DefaultItemAnimator() {
                /* access modifiers changed from: protected */
                public void onMoveAnimationUpdate(RecyclerView.ViewHolder viewHolder) {
                    SelectedPhotosListView.this.invalidate();
                }
            };
            setItemAnimator(r1);
            r1.setDelayAnimations(false);
            r1.setSupportsChangeAnimations(false);
            setPadding(AndroidUtilities.dp(12.0f), AndroidUtilities.dp(12.0f), AndroidUtilities.dp(12.0f), AndroidUtilities.dp(6.0f));
            this.paint.setColor(NUM);
            this.arrowDrawable = context.getResources().getDrawable(R.drawable.photo_tooltip2).mutate();
        }

        public void onDraw(Canvas canvas) {
            super.onDraw(canvas);
            int childCount = getChildCount();
            if (childCount > 0) {
                int measuredWidth = getMeasuredWidth() - AndroidUtilities.dp(87.0f);
                Drawable drawable = this.arrowDrawable;
                drawable.setBounds(measuredWidth, 0, drawable.getIntrinsicWidth() + measuredWidth, AndroidUtilities.dp(6.0f));
                this.arrowDrawable.draw(canvas);
                int i = Integer.MAX_VALUE;
                int i2 = Integer.MIN_VALUE;
                for (int i3 = 0; i3 < childCount; i3++) {
                    View childAt = getChildAt(i3);
                    i = (int) Math.min((double) i, Math.floor((double) childAt.getX()));
                    i2 = (int) Math.max((double) i2, Math.ceil((double) (childAt.getX() + ((float) childAt.getMeasuredWidth()))));
                }
                if (i != Integer.MAX_VALUE && i2 != Integer.MIN_VALUE) {
                    this.rect.set((float) (i - AndroidUtilities.dp(6.0f)), (float) AndroidUtilities.dp(6.0f), (float) (i2 + AndroidUtilities.dp(6.0f)), (float) AndroidUtilities.dp(103.0f));
                    canvas.drawRoundRect(this.rect, (float) AndroidUtilities.dp(8.0f), (float) AndroidUtilities.dp(8.0f), this.paint);
                }
            }
        }
    }

    private static class CounterView extends View {
        private int currentCount = 0;
        private int height;
        private Paint paint;
        private RectF rect;
        private float rotation;
        private StaticLayout staticLayout;
        private TextPaint textPaint;
        private int width;

        public CounterView(Context context) {
            super(context);
            TextPaint textPaint2 = new TextPaint(1);
            this.textPaint = textPaint2;
            textPaint2.setTextSize((float) AndroidUtilities.dp(15.0f));
            this.textPaint.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            this.textPaint.setColor(-1);
            Paint paint2 = new Paint(1);
            this.paint = paint2;
            paint2.setColor(-1);
            this.paint.setStrokeWidth((float) AndroidUtilities.dp(2.0f));
            this.paint.setStyle(Paint.Style.STROKE);
            this.paint.setStrokeJoin(Paint.Join.ROUND);
            this.rect = new RectF();
            setCount(0);
        }

        @Keep
        public void setScaleX(float f) {
            super.setScaleX(f);
            invalidate();
        }

        @Keep
        public void setRotationX(float f) {
            this.rotation = f;
            invalidate();
        }

        public float getRotationX() {
            return this.rotation;
        }

        public void setCount(int i) {
            StaticLayout staticLayout2 = new StaticLayout("" + Math.max(1, i), this.textPaint, AndroidUtilities.dp(100.0f), Layout.Alignment.ALIGN_NORMAL, 1.0f, 0.0f, false);
            this.staticLayout = staticLayout2;
            this.width = (int) Math.ceil((double) staticLayout2.getLineWidth(0));
            this.height = this.staticLayout.getLineBottom(0);
            AnimatorSet animatorSet = new AnimatorSet();
            if (i == 0) {
                Paint paint2 = this.paint;
                Property<Paint, Integer> property = AnimationProperties.PAINT_ALPHA;
                animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, View.SCALE_X, new float[]{0.0f}), ObjectAnimator.ofFloat(this, View.SCALE_Y, new float[]{0.0f}), ObjectAnimator.ofInt(paint2, property, new int[]{0}), ObjectAnimator.ofInt(this.textPaint, property, new int[]{0})});
                animatorSet.setInterpolator(new DecelerateInterpolator());
            } else {
                int i2 = this.currentCount;
                if (i2 == 0) {
                    Paint paint3 = this.paint;
                    Property<Paint, Integer> property2 = AnimationProperties.PAINT_ALPHA;
                    animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, View.SCALE_X, new float[]{0.0f, 1.0f}), ObjectAnimator.ofFloat(this, View.SCALE_Y, new float[]{0.0f, 1.0f}), ObjectAnimator.ofInt(paint3, property2, new int[]{0, 255}), ObjectAnimator.ofInt(this.textPaint, property2, new int[]{0, 255})});
                    animatorSet.setInterpolator(new DecelerateInterpolator());
                } else if (i < i2) {
                    animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, View.SCALE_X, new float[]{1.1f, 1.0f}), ObjectAnimator.ofFloat(this, View.SCALE_Y, new float[]{1.1f, 1.0f})});
                    animatorSet.setInterpolator(new OvershootInterpolator());
                } else {
                    animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, View.SCALE_X, new float[]{0.9f, 1.0f}), ObjectAnimator.ofFloat(this, View.SCALE_Y, new float[]{0.9f, 1.0f})});
                    animatorSet.setInterpolator(new OvershootInterpolator());
                }
            }
            animatorSet.setDuration(180);
            animatorSet.start();
            requestLayout();
            this.currentCount = i;
        }

        /* access modifiers changed from: protected */
        public void onMeasure(int i, int i2) {
            super.onMeasure(View.MeasureSpec.makeMeasureSpec(Math.max(this.width + AndroidUtilities.dp(20.0f), AndroidUtilities.dp(30.0f)), NUM), View.MeasureSpec.makeMeasureSpec(AndroidUtilities.dp(40.0f), NUM));
        }

        /* access modifiers changed from: protected */
        public void onDraw(Canvas canvas) {
            int measuredHeight = getMeasuredHeight() / 2;
            this.paint.setAlpha(255);
            this.rect.set((float) AndroidUtilities.dp(1.0f), (float) (measuredHeight - AndroidUtilities.dp(14.0f)), (float) (getMeasuredWidth() - AndroidUtilities.dp(1.0f)), (float) (measuredHeight + AndroidUtilities.dp(14.0f)));
            canvas.drawRoundRect(this.rect, (float) AndroidUtilities.dp(15.0f), (float) AndroidUtilities.dp(15.0f), this.paint);
            if (this.staticLayout != null) {
                this.textPaint.setAlpha((int) ((1.0f - this.rotation) * 255.0f));
                canvas.save();
                canvas.translate((float) ((getMeasuredWidth() - this.width) / 2), ((float) ((getMeasuredHeight() - this.height) / 2)) + AndroidUtilities.dpf2(0.2f) + (this.rotation * ((float) AndroidUtilities.dp(5.0f))));
                this.staticLayout.draw(canvas);
                canvas.restore();
                this.paint.setAlpha((int) (this.rotation * 255.0f));
                int centerX = (int) this.rect.centerX();
                int centerY = (int) (((float) ((int) this.rect.centerY())) - (((float) AndroidUtilities.dp(5.0f)) * (1.0f - this.rotation)));
                Canvas canvas2 = canvas;
                canvas2.drawLine((float) (AndroidUtilities.dp(5.0f) + centerX), (float) (centerY - AndroidUtilities.dp(5.0f)), (float) (centerX - AndroidUtilities.dp(5.0f)), (float) (AndroidUtilities.dp(5.0f) + centerY), this.paint);
                canvas2.drawLine((float) (centerX - AndroidUtilities.dp(5.0f)), (float) (centerY - AndroidUtilities.dp(5.0f)), (float) (centerX + AndroidUtilities.dp(5.0f)), (float) (centerY + AndroidUtilities.dp(5.0f)), this.paint);
            }
        }
    }

    private class PhotoProgressView {
        private float[] alphas = new float[3];
        /* access modifiers changed from: private */
        public float[] animAlphas = new float[3];
        private float animatedAlphaValue = 1.0f;
        private float animatedProgressValue = 0.0f;
        private float animationProgressStart = 0.0f;
        /* access modifiers changed from: private */
        public int backgroundState = -1;
        private float currentProgress = 0.0f;
        private long currentProgressTime = 0;
        private long lastUpdateTime = 0;
        private View parent;
        private final CombinedDrawable playDrawable;
        private final PlayPauseDrawable playPauseDrawable;
        /* access modifiers changed from: private */
        public int previousBackgroundState = -2;
        private RectF progressRect = new RectF();
        private float radOffset = 0.0f;
        private float scale = 1.0f;
        /* access modifiers changed from: private */
        public int size = AndroidUtilities.dp(64.0f);
        private boolean visible;

        /* access modifiers changed from: protected */
        public void onBackgroundStateUpdated(int i) {
            throw null;
        }

        /* access modifiers changed from: protected */
        public void onVisibilityChanged(boolean z) {
            throw null;
        }

        public PhotoProgressView(View view) {
            if (PhotoViewer.decelerateInterpolator == null) {
                DecelerateInterpolator unused = PhotoViewer.decelerateInterpolator = new DecelerateInterpolator(1.5f);
                Paint unused2 = PhotoViewer.progressPaint = new Paint(1);
                PhotoViewer.progressPaint.setStyle(Paint.Style.STROKE);
                PhotoViewer.progressPaint.setStrokeCap(Paint.Cap.ROUND);
                PhotoViewer.progressPaint.setStrokeWidth((float) AndroidUtilities.dp(3.0f));
                PhotoViewer.progressPaint.setColor(-1);
            }
            this.parent = view;
            resetAlphas();
            PlayPauseDrawable playPauseDrawable2 = new PlayPauseDrawable(28);
            this.playPauseDrawable = playPauseDrawable2;
            playPauseDrawable2.setDuration(200);
            this.playDrawable = new CombinedDrawable(ContextCompat.getDrawable(PhotoViewer.this.parentActivity, R.drawable.circle_big).mutate(), playPauseDrawable2);
        }

        private void updateAnimation(boolean z) {
            boolean z2;
            long currentTimeMillis = System.currentTimeMillis();
            long j = currentTimeMillis - this.lastUpdateTime;
            if (j > 18) {
                j = 18;
            }
            this.lastUpdateTime = currentTimeMillis;
            int i = 0;
            if (z) {
                if (this.animatedProgressValue == 1.0f && this.currentProgress == 1.0f) {
                    z2 = false;
                } else {
                    this.radOffset += ((float) (360 * j)) / 3000.0f;
                    float f = this.currentProgress - this.animationProgressStart;
                    if (Math.abs(f) > 0.0f) {
                        long j2 = this.currentProgressTime + j;
                        this.currentProgressTime = j2;
                        if (j2 >= 300) {
                            float f2 = this.currentProgress;
                            this.animatedProgressValue = f2;
                            this.animationProgressStart = f2;
                            this.currentProgressTime = 0;
                        } else {
                            this.animatedProgressValue = this.animationProgressStart + (f * PhotoViewer.decelerateInterpolator.getInterpolation(((float) this.currentProgressTime) / 300.0f));
                        }
                    }
                    z2 = true;
                }
                float f3 = this.animatedAlphaValue;
                if (f3 > 0.0f && this.previousBackgroundState != -2) {
                    float f4 = f3 - (((float) j) / 200.0f);
                    this.animatedAlphaValue = f4;
                    if (f4 <= 0.0f) {
                        this.animatedAlphaValue = 0.0f;
                        this.previousBackgroundState = -2;
                    }
                    z2 = true;
                }
            } else {
                z2 = false;
            }
            while (true) {
                float[] fArr = this.alphas;
                if (i >= fArr.length) {
                    break;
                }
                float f5 = fArr[i];
                float[] fArr2 = this.animAlphas;
                if (f5 > fArr2[i]) {
                    fArr2[i] = Math.min(1.0f, fArr2[i] + (((float) j) / 200.0f));
                } else if (fArr[i] < fArr2[i]) {
                    fArr2[i] = Math.max(0.0f, fArr2[i] - (((float) j) / 200.0f));
                } else {
                    i++;
                }
                z2 = true;
                i++;
            }
            if (z2) {
                this.parent.postInvalidateOnAnimation();
            }
        }

        public void setProgress(float f, boolean z) {
            if (!z) {
                this.animatedProgressValue = f;
                this.animationProgressStart = f;
            } else {
                this.animationProgressStart = this.animatedProgressValue;
            }
            this.currentProgress = f;
            this.currentProgressTime = 0;
            this.parent.invalidate();
        }

        public void setBackgroundState(int i, boolean z, boolean z2) {
            int i2;
            int i3 = this.backgroundState;
            if (i3 != i) {
                PlayPauseDrawable playPauseDrawable2 = this.playPauseDrawable;
                if (playPauseDrawable2 != null) {
                    boolean z3 = z2 && (i3 == 3 || i3 == 4);
                    if (i == 3) {
                        playPauseDrawable2.setPause(false, z3);
                    } else if (i == 4) {
                        playPauseDrawable2.setPause(true, z3);
                    }
                    this.playPauseDrawable.setParent(this.parent);
                    this.playPauseDrawable.invalidateSelf();
                }
                this.lastUpdateTime = System.currentTimeMillis();
                if (!z || (i2 = this.backgroundState) == i) {
                    this.previousBackgroundState = -2;
                } else {
                    this.previousBackgroundState = i2;
                    this.animatedAlphaValue = 1.0f;
                }
                this.backgroundState = i;
                onBackgroundStateUpdated(i);
                this.parent.invalidate();
            }
        }

        public void setAlpha(float f) {
            setIndexedAlpha(0, f, false);
        }

        public void setScale(float f) {
            this.scale = f;
        }

        public void setIndexedAlpha(int i, float f, boolean z) {
            float[] fArr = this.alphas;
            if (fArr[i] != f) {
                fArr[i] = f;
                if (!z) {
                    this.animAlphas[i] = f;
                }
                checkVisibility();
                this.parent.invalidate();
            }
        }

        public void resetAlphas() {
            int i = 0;
            while (true) {
                float[] fArr = this.alphas;
                if (i < fArr.length) {
                    this.animAlphas[i] = 1.0f;
                    fArr[i] = 1.0f;
                    i++;
                } else {
                    checkVisibility();
                    return;
                }
            }
        }

        private float calculateAlpha() {
            float f;
            float f2 = 1.0f;
            int i = 0;
            while (true) {
                float[] fArr = this.animAlphas;
                if (i >= fArr.length) {
                    return f2;
                }
                if (i == 2) {
                    f = AndroidUtilities.accelerateInterpolator.getInterpolation(fArr[i]);
                } else {
                    f = fArr[i];
                }
                f2 *= f;
                i++;
            }
        }

        private void checkVisibility() {
            boolean z = false;
            int i = 0;
            while (true) {
                float[] fArr = this.alphas;
                if (i >= fArr.length) {
                    z = true;
                    break;
                } else if (fArr[i] != 1.0f) {
                    break;
                } else {
                    i++;
                }
            }
            if (z != this.visible) {
                this.visible = z;
                onVisibilityChanged(z);
            }
        }

        public boolean isVisible() {
            return this.visible;
        }

        public int getX() {
            return (PhotoViewer.this.containerView.getWidth() - ((int) (((float) this.size) * this.scale))) / 2;
        }

        public int getY() {
            int access$7300 = (int) (((float) (((AndroidUtilities.displaySize.y + (PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0)) - ((int) (((float) this.size) * this.scale))) / 2)) + PhotoViewer.this.currentPanTranslationY);
            return PhotoViewer.this.sendPhotoType == 1 ? access$7300 - AndroidUtilities.dp(38.0f) : access$7300;
        }

        public void onDraw(Canvas canvas) {
            int i;
            Drawable drawable;
            Drawable drawable2;
            int i2 = (int) (((float) this.size) * this.scale);
            int x = getX();
            int y = getY();
            float calculateAlpha = calculateAlpha();
            int i3 = this.previousBackgroundState;
            if (i3 >= 0 && i3 < PhotoViewer.progressDrawables.length + 2) {
                if (this.previousBackgroundState < PhotoViewer.progressDrawables.length) {
                    drawable2 = PhotoViewer.progressDrawables[this.previousBackgroundState];
                } else {
                    drawable2 = this.playDrawable;
                }
                if (drawable2 != null) {
                    drawable2.setAlpha((int) (this.animatedAlphaValue * 255.0f * calculateAlpha));
                    drawable2.setBounds(x, y, x + i2, y + i2);
                    drawable2.draw(canvas);
                }
            }
            int i4 = this.backgroundState;
            if (i4 >= 0 && i4 < PhotoViewer.progressDrawables.length + 2) {
                if (this.backgroundState < PhotoViewer.progressDrawables.length) {
                    drawable = PhotoViewer.progressDrawables[this.backgroundState];
                } else {
                    drawable = this.playDrawable;
                }
                if (drawable != null) {
                    if (this.previousBackgroundState != -2) {
                        drawable.setAlpha((int) ((1.0f - this.animatedAlphaValue) * 255.0f * calculateAlpha));
                    } else {
                        drawable.setAlpha((int) (calculateAlpha * 255.0f));
                    }
                    drawable.setBounds(x, y, x + i2, y + i2);
                    drawable.draw(canvas);
                }
            }
            int i5 = this.backgroundState;
            if (i5 == 0 || i5 == 1 || (i = this.previousBackgroundState) == 0 || i == 1) {
                int dp = AndroidUtilities.dp(4.0f);
                if (this.previousBackgroundState != -2) {
                    PhotoViewer.progressPaint.setAlpha((int) (this.animatedAlphaValue * 255.0f * calculateAlpha));
                } else {
                    PhotoViewer.progressPaint.setAlpha((int) (calculateAlpha * 255.0f));
                }
                this.progressRect.set((float) (x + dp), (float) (y + dp), (float) ((x + i2) - dp), (float) ((y + i2) - dp));
                canvas.drawArc(this.progressRect, this.radOffset - 0.049804688f, Math.max(4.0f, this.animatedProgressValue * 360.0f), false, PhotoViewer.progressPaint);
                updateAnimation(true);
                return;
            }
            updateAnimation(false);
        }
    }

    private class FrameLayoutDrawer extends SizeNotifierFrameLayoutPhoto {
        AdjustPanLayoutHelper adjustPanLayoutHelper = new AdjustPanLayoutHelper(this, false) {
            /* access modifiers changed from: protected */
            public void onPanTranslationUpdate(float f, float f2, boolean z) {
                float unused = PhotoViewer.this.currentPanTranslationY = f;
                if (PhotoViewer.this.currentEditMode != 3) {
                    PhotoViewer.this.actionBar.setTranslationY(f);
                }
                if (PhotoViewer.this.miniProgressView != null) {
                    PhotoViewer.this.miniProgressView.setTranslationY(f);
                }
                if (PhotoViewer.this.progressView != null) {
                    PhotoViewer.this.progressView.setTranslationY(f);
                }
                if (PhotoViewer.this.checkImageView != null) {
                    PhotoViewer.this.checkImageView.setTranslationY(f);
                }
                if (PhotoViewer.this.photosCounterView != null) {
                    PhotoViewer.this.photosCounterView.setTranslationY(f);
                }
                if (PhotoViewer.this.selectedPhotosListView != null) {
                    PhotoViewer.this.selectedPhotosListView.setTranslationY(f);
                }
                if (PhotoViewer.this.aspectRatioFrameLayout != null) {
                    PhotoViewer.this.aspectRatioFrameLayout.setTranslationY(f);
                }
                if (PhotoViewer.this.textureImageView != null) {
                    PhotoViewer.this.textureImageView.setTranslationY(f);
                }
                if (PhotoViewer.this.photoCropView != null) {
                    PhotoViewer.this.photoCropView.setTranslationY(f);
                }
                if (PhotoViewer.this.photoFilterView != null) {
                    PhotoViewer.this.photoFilterView.setTranslationY(f);
                }
                if (PhotoViewer.this.pickerView != null) {
                    PhotoViewer.this.pickerView.setTranslationY(f);
                }
                if (PhotoViewer.this.pickerViewSendButton != null) {
                    PhotoViewer.this.pickerViewSendButton.setTranslationY(f);
                }
                float f3 = 0.0f;
                if (PhotoViewer.this.currentEditMode == 3) {
                    if (PhotoViewer.this.captionEditText != null) {
                        PhotoViewer.this.captionEditText.setTranslationY(f);
                    }
                    if (PhotoViewer.this.photoPaintView != null) {
                        PhotoViewer.this.photoPaintView.setTranslationY(0.0f);
                        PhotoViewer.this.photoPaintView.getColorPicker().setTranslationY(f);
                        PhotoViewer.this.photoPaintView.getToolsView().setTranslationY(f);
                        PhotoViewer.this.photoPaintView.getColorPickerBackground().setTranslationY(f);
                        PhotoViewer.this.photoPaintView.getCurtainView().setTranslationY(f);
                    }
                } else {
                    if (PhotoViewer.this.photoPaintView != null) {
                        PhotoViewer.this.photoPaintView.setTranslationY(f);
                    }
                    if (PhotoViewer.this.captionEditText != null) {
                        if (f2 >= 0.5f) {
                            f3 = (f2 - 0.5f) / 0.5f;
                        }
                        PhotoViewer.this.captionEditText.setAlpha(f3);
                        PhotoViewerCaptionEnterView access$8300 = PhotoViewer.this.captionEditText;
                        float f4 = this.keyboardSize;
                        access$8300.setTranslationY((f - f4) + (((float) AndroidUtilities.dp(f4 / 2.0f)) * (1.0f - f2)));
                    }
                }
                if (PhotoViewer.this.muteItem != null) {
                    PhotoViewer.this.muteItem.setTranslationY(f);
                }
                if (PhotoViewer.this.cameraItem != null) {
                    PhotoViewer.this.cameraItem.setTranslationY(f);
                }
                if (PhotoViewer.this.captionLimitView != null) {
                    PhotoViewer.this.captionLimitView.setTranslationY(f);
                }
                FrameLayoutDrawer.this.invalidate();
            }

            /* access modifiers changed from: protected */
            public void onTransitionStart(boolean z, int i) {
                int i2;
                String str;
                PhotoViewer.this.navigationBar.setVisibility(4);
                PhotoViewer.this.animateNavBarColorTo(-16777216);
                if (PhotoViewer.this.captionEditText.getTag() == null || !z) {
                    PhotoViewer.this.checkImageView.animate().alpha(1.0f).setDuration(220).start();
                    PhotoViewer.this.photosCounterView.animate().alpha(1.0f).setDuration(220).start();
                    if (PhotoViewer.this.lastTitle != null && !PhotoViewer.this.isCurrentVideo) {
                        PhotoViewer.this.actionBar.setTitleAnimated(PhotoViewer.this.lastTitle, false, 220);
                        String unused = PhotoViewer.this.lastTitle = null;
                        return;
                    }
                    return;
                }
                if (PhotoViewer.this.isCurrentVideo) {
                    if (PhotoViewer.this.muteVideo) {
                        i2 = R.string.GifCaption;
                        str = "GifCaption";
                    } else {
                        i2 = R.string.VideoCaption;
                        str = "VideoCaption";
                    }
                    PhotoViewer.this.actionBar.setTitleAnimated(LocaleController.getString(str, i2), true, 220);
                } else {
                    PhotoViewer.this.actionBar.setTitleAnimated(LocaleController.getString("PhotoCaption", R.string.PhotoCaption), true, 220);
                }
                PhotoViewer.this.captionEditText.setAlpha(0.0f);
                PhotoViewer.this.checkImageView.animate().alpha(0.0f).setDuration(220).start();
                PhotoViewer.this.photosCounterView.animate().alpha(0.0f).setDuration(220).start();
                PhotoViewer.this.selectedPhotosListView.animate().alpha(0.0f).translationY((float) (-AndroidUtilities.dp(10.0f))).setDuration(220).start();
            }

            /* access modifiers changed from: protected */
            public void onTransitionEnd() {
                super.onTransitionEnd();
                PhotoViewer.this.navigationBar.setVisibility(PhotoViewer.this.currentEditMode != 2 ? 0 : 4);
                if (PhotoViewer.this.captionEditText.getTag() == null) {
                    PhotoViewer.this.captionEditText.setVisibility(8);
                }
                PhotoViewer.this.captionEditText.setTranslationY(0.0f);
            }

            /* access modifiers changed from: protected */
            public boolean heightAnimationEnabled() {
                return !PhotoViewer.this.captionEditText.isPopupShowing() && PhotoViewer.this.keyboardAnimationEnabled;
            }
        };
        private boolean captionAbove;
        private boolean ignoreLayout;
        private Paint paint = new Paint();

        public FrameLayoutDrawer(Context context) {
            super(context, false);
            setWillNotDraw(false);
            this.paint.setColor(NUM);
        }

        /* access modifiers changed from: protected */
        /* JADX WARNING: Removed duplicated region for block: B:92:0x029c  */
        /* JADX WARNING: Removed duplicated region for block: B:93:0x029f  */
        /* Code decompiled incorrectly, please refer to instructions dump. */
        public void onMeasure(int r19, int r20) {
            /*
                r18 = this;
                r6 = r18
                int r7 = android.view.View.MeasureSpec.getSize(r19)
                int r0 = android.view.View.MeasureSpec.getSize(r20)
                android.view.ViewGroup$LayoutParams r1 = r18.getLayoutParams()
                int r1 = r1.height
                if (r1 <= 0) goto L_0x0018
                android.view.ViewGroup$LayoutParams r0 = r18.getLayoutParams()
                int r0 = r0.height
            L_0x0018:
                r8 = r0
                r6.setMeasuredDimension(r7, r8)
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                boolean r0 = r0.isCurrentVideo
                r9 = 1
                r10 = 0
                if (r0 != 0) goto L_0x0076
                r6.ignoreLayout = r9
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                boolean r0 = r0.needCaptionLayout
                if (r0 == 0) goto L_0x0057
                android.graphics.Point r0 = org.telegram.messenger.AndroidUtilities.displaySize
                int r1 = r0.x
                int r0 = r0.y
                if (r1 <= r0) goto L_0x003a
                r0 = 5
                goto L_0x003c
            L_0x003a:
                r0 = 10
            L_0x003c:
                org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r1 = r1.captionTextViewSwitcher
                android.widget.TextView r1 = r1.getCurrentView()
                r1.setMaxLines(r0)
                org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r1 = r1.captionTextViewSwitcher
                android.widget.TextView r1 = r1.getNextView()
                r1.setMaxLines(r0)
                goto L_0x0074
            L_0x0057:
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r0 = r0.captionTextViewSwitcher
                android.widget.TextView r0 = r0.getCurrentView()
                r1 = 2147483647(0x7fffffff, float:NaN)
                r0.setMaxLines(r1)
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r0 = r0.captionTextViewSwitcher
                android.widget.TextView r0 = r0.getNextView()
                r0.setMaxLines(r1)
            L_0x0074:
                r6.ignoreLayout = r10
            L_0x0076:
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.PhotoViewerCaptionEnterView r1 = r0.captionEditText
                r3 = 0
                r5 = 0
                r0 = r18
                r2 = r19
                r4 = r20
                r0.measureChildWithMargins(r1, r2, r3, r4, r5)
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.PhotoViewerCaptionEnterView r0 = r0.captionEditText
                int r11 = r0.getMeasuredHeight()
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                android.widget.FrameLayout r0 = r0.bottomLayout
                int r0 = r0.getVisibility()
                r12 = 8
                if (r0 == r12) goto L_0x00a7
                r0 = 1111490560(0x42400000, float:48.0)
                int r0 = org.telegram.messenger.AndroidUtilities.dp(r0)
                r13 = r0
                goto L_0x00a8
            L_0x00a7:
                r13 = 0
            L_0x00a8:
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.GroupedPhotosListView r0 = r0.groupedPhotosListView
                if (r0 == 0) goto L_0x011f
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.GroupedPhotosListView r0 = r0.groupedPhotosListView
                int r0 = r0.getVisibility()
                if (r0 == r12) goto L_0x011f
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.GroupedPhotosListView r0 = r0.groupedPhotosListView
                android.view.ViewGroup$LayoutParams r0 = r0.getLayoutParams()
                android.view.ViewGroup$MarginLayoutParams r0 = (android.view.ViewGroup.MarginLayoutParams) r0
                r0.bottomMargin = r13
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.GroupedPhotosListView r1 = r0.groupedPhotosListView
                r3 = 0
                r5 = 0
                r0 = r18
                r2 = r19
                r4 = r20
                r0.measureChildWithMargins(r1, r2, r3, r4, r5)
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.GroupedPhotosListView r0 = r0.groupedPhotosListView
                int r0 = r0.getMeasuredHeight()
                r6.ignoreLayout = r9
                boolean r1 = org.telegram.messenger.AndroidUtilities.isTablet()
                if (r1 != 0) goto L_0x0106
                if (r8 >= r7) goto L_0x0106
                org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.GroupedPhotosListView r1 = r1.groupedPhotosListView
                int r1 = r1.getVisibility()
                r2 = 4
                if (r1 == r2) goto L_0x011b
                org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.GroupedPhotosListView r1 = r1.groupedPhotosListView
                r1.setVisibility(r2)
                goto L_0x011b
            L_0x0106:
                org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.GroupedPhotosListView r1 = r1.groupedPhotosListView
                int r1 = r1.getVisibility()
                if (r1 == 0) goto L_0x011b
                org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.GroupedPhotosListView r1 = r1.groupedPhotosListView
                r1.setVisibility(r10)
            L_0x011b:
                r6.ignoreLayout = r10
                r14 = r0
                goto L_0x0120
            L_0x011f:
                r14 = 0
            L_0x0120:
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.PhotoViewer$VideoPlayerControlFrameLayout r0 = r0.videoPlayerControlFrameLayout
                if (r0 == 0) goto L_0x013a
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.PhotoViewer$VideoPlayerControlFrameLayout r0 = r0.videoPlayerControlFrameLayout
                int unused = r0.parentWidth = r7
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.PhotoViewer$VideoPlayerControlFrameLayout r0 = r0.videoPlayerControlFrameLayout
                int unused = r0.parentHeight = r8
            L_0x013a:
                int r0 = r18.getPaddingRight()
                int r1 = r18.getPaddingLeft()
                int r0 = r0 + r1
                int r7 = r7 - r0
                int r0 = r18.getPaddingBottom()
                int r8 = r8 - r0
                int r15 = r18.getChildCount()
                r5 = 0
            L_0x014e:
                if (r5 >= r15) goto L_0x02d9
                android.view.View r1 = r6.getChildAt(r5)
                int r0 = r1.getVisibility()
                if (r0 == r12) goto L_0x02d1
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.PhotoViewerCaptionEnterView r0 = r0.captionEditText
                if (r1 == r0) goto L_0x02d1
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.GroupedPhotosListView r0 = r0.groupedPhotosListView
                if (r1 != r0) goto L_0x016c
                goto L_0x02d1
            L_0x016c:
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                com.google.android.exoplayer2.ui.AspectRatioFrameLayout r0 = r0.aspectRatioFrameLayout
                r2 = 1073741824(0x40000000, float:2.0)
                if (r1 != r0) goto L_0x0192
                android.graphics.Point r0 = org.telegram.messenger.AndroidUtilities.displaySize
                int r0 = r0.y
                org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                boolean r3 = r3.isStatusBarVisible()
                if (r3 == 0) goto L_0x0185
                int r3 = org.telegram.messenger.AndroidUtilities.statusBarHeight
                goto L_0x0186
            L_0x0185:
                r3 = 0
            L_0x0186:
                int r0 = r0 + r3
                int r0 = android.view.View.MeasureSpec.makeMeasureSpec(r0, r2)
                r4 = r19
                r1.measure(r4, r0)
                goto L_0x02d1
            L_0x0192:
                r4 = r19
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.PaintingOverlay r0 = r0.paintingOverlay
                if (r1 != r0) goto L_0x01f2
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                com.google.android.exoplayer2.ui.AspectRatioFrameLayout r0 = r0.aspectRatioFrameLayout
                if (r0 == 0) goto L_0x01c5
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                com.google.android.exoplayer2.ui.AspectRatioFrameLayout r0 = r0.aspectRatioFrameLayout
                int r0 = r0.getVisibility()
                if (r0 != 0) goto L_0x01c5
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                android.view.TextureView r0 = r0.videoTextureView
                int r0 = r0.getMeasuredWidth()
                org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                android.view.TextureView r1 = r1.videoTextureView
                int r1 = r1.getMeasuredHeight()
                goto L_0x01d9
            L_0x01c5:
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.messenger.ImageReceiver r0 = r0.centerImage
                int r0 = r0.getBitmapWidth()
                org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                org.telegram.messenger.ImageReceiver r1 = r1.centerImage
                int r1 = r1.getBitmapHeight()
            L_0x01d9:
                if (r0 == 0) goto L_0x01dd
                if (r1 != 0) goto L_0x01df
            L_0x01dd:
                r0 = r7
                r1 = r8
            L_0x01df:
                org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.PaintingOverlay r3 = r3.paintingOverlay
                int r0 = android.view.View.MeasureSpec.makeMeasureSpec(r0, r2)
                int r1 = android.view.View.MeasureSpec.makeMeasureSpec(r1, r2)
                r3.measure(r0, r1)
                goto L_0x02d1
            L_0x01f2:
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.PhotoViewerCaptionEnterView r0 = r0.captionEditText
                boolean r0 = r0.isPopupView(r1)
                if (r0 == 0) goto L_0x0261
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                boolean r0 = r0.inBubbleMode
                if (r0 == 0) goto L_0x0215
                int r0 = android.view.View.MeasureSpec.makeMeasureSpec(r7, r2)
                int r3 = r8 - r11
                int r2 = android.view.View.MeasureSpec.makeMeasureSpec(r3, r2)
                r1.measure(r0, r2)
                goto L_0x02d1
            L_0x0215:
                boolean r0 = org.telegram.messenger.AndroidUtilities.isInMultiwindow
                if (r0 == 0) goto L_0x024e
                boolean r0 = org.telegram.messenger.AndroidUtilities.isTablet()
                if (r0 == 0) goto L_0x023c
                int r0 = android.view.View.MeasureSpec.makeMeasureSpec(r7, r2)
                r3 = 1134559232(0x43a00000, float:320.0)
                int r3 = org.telegram.messenger.AndroidUtilities.dp(r3)
                int r16 = r8 - r11
                int r17 = org.telegram.messenger.AndroidUtilities.statusBarHeight
                int r12 = r16 - r17
                int r3 = java.lang.Math.min(r3, r12)
                int r2 = android.view.View.MeasureSpec.makeMeasureSpec(r3, r2)
                r1.measure(r0, r2)
                goto L_0x02d1
            L_0x023c:
                int r0 = android.view.View.MeasureSpec.makeMeasureSpec(r7, r2)
                int r3 = r8 - r11
                int r12 = org.telegram.messenger.AndroidUtilities.statusBarHeight
                int r3 = r3 - r12
                int r2 = android.view.View.MeasureSpec.makeMeasureSpec(r3, r2)
                r1.measure(r0, r2)
                goto L_0x02d1
            L_0x024e:
                int r0 = android.view.View.MeasureSpec.makeMeasureSpec(r7, r2)
                android.view.ViewGroup$LayoutParams r3 = r1.getLayoutParams()
                int r3 = r3.height
                int r2 = android.view.View.MeasureSpec.makeMeasureSpec(r3, r2)
                r1.measure(r0, r2)
                goto L_0x02d1
            L_0x0261:
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.PhotoViewer$CaptionScrollView r0 = r0.captionScrollView
                if (r1 != r0) goto L_0x02c2
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                boolean r0 = r0.dontChangeCaptionPosition
                if (r0 == 0) goto L_0x0278
                boolean r0 = r6.captionAbove
                if (r0 == 0) goto L_0x0293
                int r0 = r13 + r14
                goto L_0x0294
            L_0x0278:
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.GroupedPhotosListView r0 = r0.groupedPhotosListView
                boolean r0 = r0.hasPhotos()
                if (r0 == 0) goto L_0x0291
                boolean r0 = org.telegram.messenger.AndroidUtilities.isTablet()
                if (r0 != 0) goto L_0x028c
                if (r8 <= r7) goto L_0x0291
            L_0x028c:
                int r0 = r13 + r14
                r6.captionAbove = r9
                goto L_0x0294
            L_0x0291:
                r6.captionAbove = r10
            L_0x0293:
                r0 = r13
            L_0x0294:
                org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                boolean r3 = r3.isStatusBarVisible()
                if (r3 == 0) goto L_0x029f
                int r3 = org.telegram.messenger.AndroidUtilities.statusBarHeight
                goto L_0x02a0
            L_0x029f:
                r3 = 0
            L_0x02a0:
                int r12 = org.telegram.ui.ActionBar.ActionBar.getCurrentActionBarHeight()
                int r3 = r3 + r12
                int r3 = r8 - r3
                int r3 = r3 - r0
                org.telegram.ui.PhotoViewer r12 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.PhotoViewer$CaptionScrollView r12 = r12.captionScrollView
                android.view.ViewGroup$LayoutParams r12 = r12.getLayoutParams()
                android.view.ViewGroup$MarginLayoutParams r12 = (android.view.ViewGroup.MarginLayoutParams) r12
                r12.bottomMargin = r0
                int r0 = android.view.View.MeasureSpec.makeMeasureSpec(r7, r2)
                int r2 = android.view.View.MeasureSpec.makeMeasureSpec(r3, r2)
                r1.measure(r0, r2)
                goto L_0x02d1
            L_0x02c2:
                r3 = 0
                r12 = 0
                r0 = r18
                r2 = r19
                r4 = r20
                r16 = r5
                r5 = r12
                r0.measureChildWithMargins(r1, r2, r3, r4, r5)
                goto L_0x02d3
            L_0x02d1:
                r16 = r5
            L_0x02d3:
                int r5 = r16 + 1
                r12 = 8
                goto L_0x014e
            L_0x02d9:
                return
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.FrameLayoutDrawer.onMeasure(int, int):void");
        }

        /* access modifiers changed from: protected */
        /* JADX WARNING: Removed duplicated region for block: B:25:0x008d  */
        /* JADX WARNING: Removed duplicated region for block: B:29:0x009b  */
        /* JADX WARNING: Removed duplicated region for block: B:33:0x00af  */
        /* JADX WARNING: Removed duplicated region for block: B:35:0x00bc  */
        /* Code decompiled incorrectly, please refer to instructions dump. */
        public void onLayout(boolean r16, int r17, int r18, int r19, int r20) {
            /*
                r15 = this;
                r0 = r15
                int r1 = r15.getChildCount()
                int r2 = r15.measureKeyboardHeight()
                org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                int unused = r3.keyboardSize = r2
                r3 = 1101004800(0x41a00000, float:20.0)
                int r3 = org.telegram.messenger.AndroidUtilities.dp(r3)
                r4 = 0
                if (r2 > r3) goto L_0x0026
                boolean r2 = org.telegram.messenger.AndroidUtilities.isInMultiwindow
                if (r2 != 0) goto L_0x0026
                org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.PhotoViewerCaptionEnterView r2 = r2.captionEditText
                int r2 = r2.getEmojiPadding()
                goto L_0x0027
            L_0x0026:
                r2 = 0
            L_0x0027:
                if (r4 >= r1) goto L_0x01af
                android.view.View r3 = r15.getChildAt(r4)
                int r5 = r3.getVisibility()
                r6 = 8
                if (r5 != r6) goto L_0x0037
                goto L_0x01ab
            L_0x0037:
                org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                com.google.android.exoplayer2.ui.AspectRatioFrameLayout r5 = r5.aspectRatioFrameLayout
                if (r3 != r5) goto L_0x0046
                r5 = r17
                r6 = r19
                r7 = r20
                goto L_0x0058
            L_0x0046:
                int r5 = r15.getPaddingLeft()
                int r5 = r17 + r5
                int r6 = r15.getPaddingRight()
                int r6 = r19 - r6
                int r7 = r15.getPaddingBottom()
                int r7 = r20 - r7
            L_0x0058:
                android.view.ViewGroup$LayoutParams r8 = r3.getLayoutParams()
                android.widget.FrameLayout$LayoutParams r8 = (android.widget.FrameLayout.LayoutParams) r8
                int r9 = r3.getMeasuredWidth()
                int r10 = r3.getMeasuredHeight()
                int r11 = r8.gravity
                r12 = -1
                if (r11 != r12) goto L_0x006d
                r11 = 51
            L_0x006d:
                r12 = r11 & 7
                r11 = r11 & 112(0x70, float:1.57E-43)
                r13 = 5
                r14 = 1
                if (r12 == r14) goto L_0x007f
                if (r12 == r13) goto L_0x007a
                int r6 = r8.leftMargin
                goto L_0x0089
            L_0x007a:
                int r6 = r6 - r5
                int r6 = r6 - r9
                int r12 = r8.rightMargin
                goto L_0x0088
            L_0x007f:
                int r6 = r6 - r5
                int r6 = r6 - r9
                int r6 = r6 / 2
                int r12 = r8.leftMargin
                int r6 = r6 + r12
                int r12 = r8.rightMargin
            L_0x0088:
                int r6 = r6 - r12
            L_0x0089:
                r12 = 16
                if (r11 == r12) goto L_0x009b
                r12 = 80
                if (r11 == r12) goto L_0x0094
                int r7 = r8.topMargin
                goto L_0x00a7
            L_0x0094:
                int r7 = r7 - r2
                int r7 = r7 - r18
                int r7 = r7 - r10
                int r8 = r8.bottomMargin
                goto L_0x00a6
            L_0x009b:
                int r7 = r7 - r2
                int r7 = r7 - r18
                int r7 = r7 - r10
                int r7 = r7 / 2
                int r11 = r8.topMargin
                int r7 = r7 + r11
                int r8 = r8.bottomMargin
            L_0x00a6:
                int r7 = r7 - r8
            L_0x00a7:
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.RecyclerListView r8 = r8.mentionListView
                if (r3 != r8) goto L_0x00bc
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.PhotoViewerCaptionEnterView r8 = r8.captionEditText
                int r8 = r8.getMeasuredHeight()
            L_0x00b9:
                int r7 = r7 - r8
                goto L_0x01a3
            L_0x00bc:
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.PhotoViewerCaptionEnterView r8 = r8.captionEditText
                boolean r8 = r8.isPopupView(r3)
                if (r8 == 0) goto L_0x00ee
                boolean r7 = org.telegram.messenger.AndroidUtilities.isInMultiwindow
                if (r7 == 0) goto L_0x00e2
                org.telegram.ui.PhotoViewer r7 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.PhotoViewerCaptionEnterView r7 = r7.captionEditText
                int r7 = r7.getTop()
                int r8 = r3.getMeasuredHeight()
                int r7 = r7 - r8
                r8 = 1065353216(0x3var_, float:1.0)
                int r8 = org.telegram.messenger.AndroidUtilities.dp(r8)
                goto L_0x0106
            L_0x00e2:
                org.telegram.ui.PhotoViewer r7 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.PhotoViewerCaptionEnterView r7 = r7.captionEditText
                int r7 = r7.getBottom()
                goto L_0x01a3
            L_0x00ee:
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.PhotoViewer$SelectedPhotosListView r8 = r8.selectedPhotosListView
                if (r3 != r8) goto L_0x0109
                org.telegram.ui.PhotoViewer r7 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.ActionBar.ActionBar r7 = r7.actionBar
                int r7 = r7.getMeasuredHeight()
                r8 = 1084227584(0x40a00000, float:5.0)
                int r8 = org.telegram.messenger.AndroidUtilities.dp(r8)
            L_0x0106:
                int r7 = r7 + r8
                goto L_0x01a3
            L_0x0109:
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                android.widget.ImageView r8 = r8.cameraItem
                if (r3 == r8) goto L_0x0158
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                android.widget.ImageView r8 = r8.muteItem
                if (r3 != r8) goto L_0x011a
                goto L_0x0158
            L_0x011a:
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.VideoTimelinePlayView r8 = r8.videoTimelineView
                if (r3 != r8) goto L_0x013d
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                android.widget.FrameLayout r8 = r8.pickerView
                int r8 = r8.getHeight()
                int r7 = r7 - r8
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                int r8 = r8.sendPhotoType
                if (r8 != r14) goto L_0x01a3
                r8 = 1112539136(0x42500000, float:52.0)
                int r8 = org.telegram.messenger.AndroidUtilities.dp(r8)
                goto L_0x00b9
            L_0x013d:
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                android.widget.TextView r8 = r8.videoAvatarTooltip
                if (r3 != r8) goto L_0x01a3
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                android.widget.FrameLayout r8 = r8.pickerView
                int r8 = r8.getHeight()
                r11 = 1106771968(0x41var_, float:31.0)
                int r11 = org.telegram.messenger.AndroidUtilities.dp(r11)
                int r8 = r8 + r11
                goto L_0x00b9
            L_0x0158:
                org.telegram.ui.PhotoViewer r7 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.VideoTimelinePlayView r7 = r7.videoTimelineView
                if (r7 == 0) goto L_0x0177
                org.telegram.ui.PhotoViewer r7 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.VideoTimelinePlayView r7 = r7.videoTimelineView
                int r7 = r7.getVisibility()
                if (r7 != 0) goto L_0x0177
                org.telegram.ui.PhotoViewer r7 = org.telegram.ui.PhotoViewer.this
                org.telegram.ui.Components.VideoTimelinePlayView r7 = r7.videoTimelineView
                int r7 = r7.getTop()
                goto L_0x0181
            L_0x0177:
                org.telegram.ui.PhotoViewer r7 = org.telegram.ui.PhotoViewer.this
                android.widget.FrameLayout r7 = r7.pickerView
                int r7 = r7.getTop()
            L_0x0181:
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                int r8 = r8.sendPhotoType
                r11 = 4
                if (r8 == r11) goto L_0x0196
                org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                int r8 = r8.sendPhotoType
                if (r8 != r13) goto L_0x0193
                goto L_0x0196
            L_0x0193:
                r8 = 1097859072(0x41700000, float:15.0)
                goto L_0x0198
            L_0x0196:
                r8 = 1109393408(0x42200000, float:40.0)
            L_0x0198:
                int r8 = org.telegram.messenger.AndroidUtilities.dp(r8)
                int r7 = r7 - r8
                int r8 = r3.getMeasuredHeight()
                goto L_0x00b9
            L_0x01a3:
                int r8 = r6 + r5
                int r6 = r6 + r9
                int r6 = r6 + r5
                int r10 = r10 + r7
                r3.layout(r8, r7, r6, r10)
            L_0x01ab:
                int r4 = r4 + 1
                goto L_0x0027
            L_0x01af:
                r15.notifyHeightChanged()
                return
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.FrameLayoutDrawer.onLayout(boolean, int, int, int, int):void");
        }

        /* access modifiers changed from: protected */
        public void onDraw(Canvas canvas) {
            PhotoViewer.this.onDraw(canvas);
            if (PhotoViewer.this.isStatusBarVisible() && AndroidUtilities.statusBarHeight != 0 && PhotoViewer.this.actionBar != null) {
                if (Build.VERSION.SDK_INT < 21) {
                    this.paint.setAlpha((int) (PhotoViewer.this.actionBar.getAlpha() * 255.0f * 0.2f));
                    canvas.drawRect(0.0f, PhotoViewer.this.currentPanTranslationY, (float) getMeasuredWidth(), PhotoViewer.this.currentPanTranslationY + ((float) AndroidUtilities.statusBarHeight), this.paint);
                }
                this.paint.setAlpha((int) (PhotoViewer.this.actionBar.getAlpha() * 255.0f * 0.498f));
                if (getPaddingRight() > 0) {
                    canvas.drawRect((float) (getMeasuredWidth() - getPaddingRight()), 0.0f, (float) getMeasuredWidth(), (float) getMeasuredHeight(), this.paint);
                }
                if (getPaddingLeft() > 0) {
                    canvas.drawRect(0.0f, 0.0f, (float) getPaddingLeft(), (float) getMeasuredHeight(), this.paint);
                }
                if (getPaddingBottom() > 0) {
                    float dpf2 = AndroidUtilities.dpf2(24.0f) * (1.0f - PhotoViewer.this.actionBar.getAlpha());
                    canvas.drawRect(0.0f, ((float) (getMeasuredHeight() - getPaddingBottom())) + dpf2, (float) getMeasuredWidth(), ((float) getMeasuredHeight()) + dpf2, this.paint);
                }
            }
        }

        public void draw(Canvas canvas) {
            super.draw(canvas);
            if (PhotoViewer.this.photoViewerWebView != null && PhotoViewer.this.photoViewerWebView.isControllable() && PhotoViewer.this.videoForwardDrawable != null && PhotoViewer.this.videoForwardDrawable.isAnimating()) {
                int measuredHeight = ((int) (((float) PhotoViewer.this.photoViewerWebView.getWebView().getMeasuredHeight()) * (PhotoViewer.this.scale - 1.0f))) / 2;
                PhotoViewer.this.videoForwardDrawable.setBounds(PhotoViewer.this.photoViewerWebView.getLeft(), (PhotoViewer.this.photoViewerWebView.getWebView().getTop() - measuredHeight) + ((int) (PhotoViewer.this.translationY / PhotoViewer.this.scale)), PhotoViewer.this.photoViewerWebView.getRight(), PhotoViewer.this.photoViewerWebView.getWebView().getBottom() + measuredHeight + ((int) (PhotoViewer.this.translationY / PhotoViewer.this.scale)));
                PhotoViewer.this.videoForwardDrawable.draw(canvas);
            }
        }

        /* access modifiers changed from: protected */
        public void dispatchDraw(Canvas canvas) {
            canvas.save();
            canvas.clipRect(0, 0, getWidth(), getHeight());
            super.dispatchDraw(canvas);
            canvas.restore();
        }

        /* access modifiers changed from: protected */
        public boolean drawChild(Canvas canvas, View view, long j) {
            if (view == PhotoViewer.this.leftPaintingOverlay || view == PhotoViewer.this.rightPaintingOverlay) {
                return false;
            }
            if (view != PhotoViewer.this.navigationBar) {
                canvas.save();
                canvas.clipRect(0, 0, getWidth(), getHeight());
            }
            boolean drawChildInternal = drawChildInternal(canvas, view, j);
            if (view != PhotoViewer.this.navigationBar) {
                canvas.restore();
            }
            return drawChildInternal;
        }

        /* access modifiers changed from: protected */
        public boolean drawChildInternal(Canvas canvas, View view, long j) {
            if (view == PhotoViewer.this.mentionListView || view == PhotoViewer.this.captionEditText) {
                if (PhotoViewer.this.currentEditMode != 0 && PhotoViewer.this.currentPanTranslationY == 0.0f) {
                    return false;
                }
                if (AndroidUtilities.isInMultiwindow || AndroidUtilities.usingHardwareInput) {
                    if (!PhotoViewer.this.captionEditText.isPopupShowing() && PhotoViewer.this.captionEditText.getEmojiPadding() == 0 && PhotoViewer.this.captionEditText.getTag() == null) {
                        return false;
                    }
                } else if (!PhotoViewer.this.captionEditText.isPopupShowing() && PhotoViewer.this.captionEditText.getEmojiPadding() == 0 && getKeyboardHeight() == 0 && PhotoViewer.this.currentPanTranslationY == 0.0f) {
                    return false;
                }
                if (view == PhotoViewer.this.mentionListView) {
                    canvas.save();
                    canvas.clipRect(view.getX(), view.getY(), view.getX() + ((float) view.getWidth()), view.getY() + ((float) view.getHeight()));
                    boolean drawChild = super.drawChild(canvas, view, j);
                    canvas.restore();
                    return drawChild;
                }
            } else if (view == PhotoViewer.this.cameraItem || view == PhotoViewer.this.muteItem || view == PhotoViewer.this.pickerView || view == PhotoViewer.this.videoTimelineView || view == PhotoViewer.this.pickerViewSendButton || view == PhotoViewer.this.captionLimitView || view == PhotoViewer.this.captionTextViewSwitcher || (PhotoViewer.this.muteItem.getVisibility() == 0 && view == PhotoViewer.this.bottomLayout)) {
                if (PhotoViewer.this.captionEditText.isPopupAnimating()) {
                    view.setTranslationY((float) PhotoViewer.this.captionEditText.getEmojiPadding());
                    boolean unused = PhotoViewer.this.bottomTouchEnabled = false;
                } else {
                    int emojiPadding = (getKeyboardHeight() > AndroidUtilities.dp(20.0f) || AndroidUtilities.isInMultiwindow) ? 0 : PhotoViewer.this.captionEditText.getEmojiPadding();
                    if (PhotoViewer.this.captionEditText.isPopupShowing() || (((AndroidUtilities.isInMultiwindow || AndroidUtilities.usingHardwareInput) && PhotoViewer.this.captionEditText.getTag() != null) || getKeyboardHeight() > AndroidUtilities.dp(80.0f) || emojiPadding != 0)) {
                        boolean unused2 = PhotoViewer.this.bottomTouchEnabled = false;
                        return false;
                    }
                    boolean unused3 = PhotoViewer.this.bottomTouchEnabled = true;
                }
            } else if (view == PhotoViewer.this.checkImageView || view == PhotoViewer.this.photosCounterView) {
                if (PhotoViewer.this.captionEditText.getTag() != null) {
                    boolean unused4 = PhotoViewer.this.bottomTouchEnabled = false;
                    if (view.getAlpha() < 0.0f) {
                        return false;
                    }
                } else {
                    boolean unused5 = PhotoViewer.this.bottomTouchEnabled = true;
                }
            } else if (view == PhotoViewer.this.miniProgressView) {
                return false;
            }
            if (view == PhotoViewer.this.videoTimelineView && PhotoViewer.this.videoTimelineView.getTranslationY() > 0.0f && PhotoViewer.this.pickerView.getTranslationY() == 0.0f) {
                canvas.save();
                canvas.clipRect(PhotoViewer.this.videoTimelineView.getX(), PhotoViewer.this.videoTimelineView.getY(), PhotoViewer.this.videoTimelineView.getX() + ((float) PhotoViewer.this.videoTimelineView.getMeasuredWidth()), (float) PhotoViewer.this.videoTimelineView.getBottom());
                boolean drawChild2 = super.drawChild(canvas, view, j);
                canvas.restore();
                return drawChild2;
            }
            try {
                if (view == PhotoViewer.this.aspectRatioFrameLayout || view == PhotoViewer.this.paintingOverlay || !super.drawChild(canvas, view, j)) {
                    return false;
                }
                return true;
            } catch (Throwable unused6) {
                return true;
            }
        }

        public void requestLayout() {
            if (!this.ignoreLayout) {
                super.requestLayout();
            }
        }

        /* access modifiers changed from: protected */
        public void onAttachedToWindow() {
            super.onAttachedToWindow();
            this.adjustPanLayoutHelper.setResizableView(PhotoViewer.this.windowView);
            this.adjustPanLayoutHelper.onAttach();
            Bulletin.addDelegate((FrameLayout) this, (Bulletin.Delegate) new Bulletin.Delegate() {
                public /* synthetic */ void onHide(Bulletin bulletin) {
                    Bulletin.Delegate.CC.$default$onHide(this, bulletin);
                }

                public /* synthetic */ void onOffsetChange(float f) {
                    Bulletin.Delegate.CC.$default$onOffsetChange(this, f);
                }

                public /* synthetic */ void onShow(Bulletin bulletin) {
                    Bulletin.Delegate.CC.$default$onShow(this, bulletin);
                }

                public int getBottomOffset(int i) {
                    int i2 = 0;
                    if (PhotoViewer.this.bottomLayout != null && PhotoViewer.this.bottomLayout.getVisibility() == 0) {
                        i2 = 0 + PhotoViewer.this.bottomLayout.getHeight();
                    }
                    if (PhotoViewer.this.groupedPhotosListView == null || !PhotoViewer.this.groupedPhotosListView.hasPhotos()) {
                        return i2;
                    }
                    return (AndroidUtilities.isTablet() || PhotoViewer.this.containerView.getMeasuredHeight() > PhotoViewer.this.containerView.getMeasuredWidth()) ? i2 + PhotoViewer.this.groupedPhotosListView.getHeight() : i2;
                }
            });
        }

        /* access modifiers changed from: protected */
        public void onDetachedFromWindow() {
            super.onDetachedFromWindow();
            this.adjustPanLayoutHelper.onDetach();
            Bulletin.removeDelegate((FrameLayout) this);
        }

        public void notifyHeightChanged() {
            super.notifyHeightChanged();
            if (PhotoViewer.this.isCurrentVideo) {
                PhotoViewer.this.photoProgressViews[0].setIndexedAlpha(2, getKeyboardHeight() <= AndroidUtilities.dp(20.0f) ? 1.0f : 0.0f, true);
            }
        }
    }

    static {
        if (Build.VERSION.SDK_INT >= 24) {
            VPC_PROGRESS = new FloatProperty<VideoPlayerControlFrameLayout>("progress") {
                public void setValue(VideoPlayerControlFrameLayout videoPlayerControlFrameLayout, float f) {
                    videoPlayerControlFrameLayout.setProgress(f);
                }

                public Float get(VideoPlayerControlFrameLayout videoPlayerControlFrameLayout) {
                    return Float.valueOf(videoPlayerControlFrameLayout.getProgress());
                }
            };
        } else {
            VPC_PROGRESS = new Property<VideoPlayerControlFrameLayout, Float>(Float.class, "progress") {
                public void set(VideoPlayerControlFrameLayout videoPlayerControlFrameLayout, Float f) {
                    videoPlayerControlFrameLayout.setProgress(f.floatValue());
                }

                public Float get(VideoPlayerControlFrameLayout videoPlayerControlFrameLayout) {
                    return Float.valueOf(videoPlayerControlFrameLayout.getProgress());
                }
            };
        }
    }

    private class VideoPlayerControlFrameLayout extends FrameLayout {
        private boolean ignoreLayout;
        /* access modifiers changed from: private */
        public int parentHeight;
        /* access modifiers changed from: private */
        public int parentWidth;
        private float progress = 1.0f;
        private boolean seekBarTransitionEnabled;
        private boolean translationYAnimationEnabled = true;

        public VideoPlayerControlFrameLayout(Context context) {
            super(context);
            setWillNotDraw(false);
        }

        public boolean onTouchEvent(MotionEvent motionEvent) {
            if (this.progress < 1.0f) {
                return false;
            }
            if (PhotoViewer.this.videoPlayerSeekbar.onTouch(motionEvent.getAction(), motionEvent.getX() - ((float) AndroidUtilities.dp(2.0f)), motionEvent.getY())) {
                getParent().requestDisallowInterceptTouchEvent(true);
                PhotoViewer.this.videoPlayerSeekbarView.invalidate();
            }
            return true;
        }

        public void requestLayout() {
            if (!this.ignoreLayout) {
                super.requestLayout();
            }
        }

        /* access modifiers changed from: protected */
        public void onMeasure(int i, int i2) {
            int i3;
            String str;
            this.ignoreLayout = true;
            FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) PhotoViewer.this.videoPlayerTime.getLayoutParams();
            if (this.parentWidth > this.parentHeight) {
                if (PhotoViewer.this.exitFullscreenButton.getVisibility() != 0) {
                    PhotoViewer.this.exitFullscreenButton.setVisibility(0);
                }
                i3 = AndroidUtilities.dp(48.0f);
                layoutParams.rightMargin = AndroidUtilities.dp(47.0f);
            } else {
                if (PhotoViewer.this.exitFullscreenButton.getVisibility() != 4) {
                    PhotoViewer.this.exitFullscreenButton.setVisibility(4);
                }
                layoutParams.rightMargin = AndroidUtilities.dp(12.0f);
                i3 = 0;
            }
            this.ignoreLayout = false;
            super.onMeasure(i, i2);
            long j = 0;
            if (PhotoViewer.this.videoPlayer != null) {
                long duration = PhotoViewer.this.videoPlayer.getDuration();
                if (duration != -9223372036854775807L) {
                    j = duration;
                }
            } else if (PhotoViewer.this.photoViewerWebView != null && PhotoViewer.this.photoViewerWebView.isControllable()) {
                j = (long) PhotoViewer.this.photoViewerWebView.getVideoDuration();
            }
            long j2 = j / 1000;
            long j3 = j2 / 60;
            if (j3 > 60) {
                str = String.format(Locale.ROOT, "%02d:%02d:%02d", new Object[]{Long.valueOf(j3 / 60), Long.valueOf(j3 % 60), Long.valueOf(j2 % 60)});
            } else {
                str = String.format(Locale.ROOT, "%02d:%02d", new Object[]{Long.valueOf(j3), Long.valueOf(j2 % 60)});
            }
            VideoPlayerSeekBar access$1000 = PhotoViewer.this.videoPlayerSeekbar;
            int measuredWidth = getMeasuredWidth() - AndroidUtilities.dp(16.0f);
            access$1000.setSize((measuredWidth - ((int) Math.ceil((double) PhotoViewer.this.videoPlayerTime.getPaint().measureText(String.format(Locale.ROOT, "%1$s / %1$s", new Object[]{str}))))) - i3, getMeasuredHeight());
        }

        /* access modifiers changed from: protected */
        public void onLayout(boolean z, int i, int i2, int i3, int i4) {
            super.onLayout(z, i, i2, i3, i4);
            float currentPosition = PhotoViewer.this.videoPlayer != null ? ((float) PhotoViewer.this.videoPlayer.getCurrentPosition()) / ((float) PhotoViewer.this.videoPlayer.getDuration()) : 0.0f;
            if (PhotoViewer.this.playerWasReady) {
                PhotoViewer.this.videoPlayerSeekbar.setProgress(currentPosition);
            }
            PhotoViewer.this.videoTimelineView.setProgress(currentPosition);
        }

        public float getProgress() {
            return this.progress;
        }

        public void setProgress(float f) {
            if (this.progress != f) {
                this.progress = f;
                onProgressChanged(f);
            }
        }

        private void onProgressChanged(float f) {
            PhotoViewer.this.videoPlayerTime.setAlpha(f);
            PhotoViewer.this.exitFullscreenButton.setAlpha(f);
            if (this.seekBarTransitionEnabled) {
                PhotoViewer.this.videoPlayerTime.setPivotX((float) PhotoViewer.this.videoPlayerTime.getWidth());
                PhotoViewer.this.videoPlayerTime.setPivotY((float) PhotoViewer.this.videoPlayerTime.getHeight());
                float f2 = 1.0f - f;
                float f3 = 1.0f - (0.1f * f2);
                PhotoViewer.this.videoPlayerTime.setScaleX(f3);
                PhotoViewer.this.videoPlayerTime.setScaleY(f3);
                PhotoViewer.this.videoPlayerSeekbar.setTransitionProgress(f2);
                return;
            }
            if (this.translationYAnimationEnabled) {
                setTranslationY(AndroidUtilities.dpf2(24.0f) * (1.0f - f));
            }
            PhotoViewer.this.videoPlayerSeekbarView.setAlpha(f);
        }

        public void setSeekBarTransitionEnabled(boolean z) {
            if (this.seekBarTransitionEnabled != z) {
                this.seekBarTransitionEnabled = z;
                if (z) {
                    setTranslationY(0.0f);
                    PhotoViewer.this.videoPlayerSeekbarView.setAlpha(1.0f);
                } else {
                    PhotoViewer.this.videoPlayerTime.setScaleX(1.0f);
                    PhotoViewer.this.videoPlayerTime.setScaleY(1.0f);
                    PhotoViewer.this.videoPlayerSeekbar.setTransitionProgress(0.0f);
                }
                onProgressChanged(this.progress);
            }
        }

        public void setTranslationYAnimationEnabled(boolean z) {
            if (this.translationYAnimationEnabled != z) {
                this.translationYAnimationEnabled = z;
                if (!z) {
                    setTranslationY(0.0f);
                }
                onProgressChanged(this.progress);
            }
        }
    }

    private class CaptionTextViewSwitcher extends TextViewSwitcher {
        private float alpha = 1.0f;
        private boolean inScrollView = false;

        public CaptionTextViewSwitcher(Context context) {
            super(context);
        }

        public void setVisibility(int i) {
            setVisibility(i, true);
        }

        public void setVisibility(int i, boolean z) {
            super.setVisibility(i);
            if (this.inScrollView && z) {
                PhotoViewer.this.captionScrollView.setVisibility(i);
            }
        }

        public void setAlpha(float f) {
            this.alpha = f;
            if (this.inScrollView) {
                PhotoViewer.this.captionScrollView.setAlpha(f);
            } else {
                super.setAlpha(f);
            }
        }

        public float getAlpha() {
            if (this.inScrollView) {
                return this.alpha;
            }
            return super.getAlpha();
        }

        public void setTranslationY(float f) {
            super.setTranslationY(f);
            if (this.inScrollView) {
                PhotoViewer.this.captionScrollView.invalidate();
            }
        }

        /* access modifiers changed from: protected */
        public void onAttachedToWindow() {
            super.onAttachedToWindow();
            if (PhotoViewer.this.captionContainer != null && getParent() == PhotoViewer.this.captionContainer) {
                this.inScrollView = true;
                PhotoViewer.this.captionScrollView.setVisibility(getVisibility());
                PhotoViewer.this.captionScrollView.setAlpha(this.alpha);
                super.setAlpha(1.0f);
            }
        }

        /* access modifiers changed from: protected */
        public void onDetachedFromWindow() {
            super.onDetachedFromWindow();
            if (this.inScrollView) {
                this.inScrollView = false;
                PhotoViewer.this.captionScrollView.setVisibility(8);
                super.setAlpha(this.alpha);
            }
        }
    }

    private class CaptionScrollView extends NestedScrollView {
        private Method abortAnimatedScrollMethod;
        /* access modifiers changed from: private */
        public float backgroundAlpha = 1.0f;
        /* access modifiers changed from: private */
        public boolean dontChangeTopMargin;
        private boolean isLandscape;
        private boolean nestedScrollStarted;
        private float overScrollY;
        private final Paint paint;
        private int pendingTopMargin = -1;
        private int prevHeight;
        private OverScroller scroller;
        private final SpringAnimation springAnimation;
        private int textHash;
        private float velocitySign;
        private float velocityY;

        /* access modifiers changed from: protected */
        public float getBottomFadingEdgeStrength() {
            return 1.0f;
        }

        /* access modifiers changed from: protected */
        public float getTopFadingEdgeStrength() {
            return 1.0f;
        }

        public CaptionScrollView(Context context) {
            super(context);
            Paint paint2 = new Paint(1);
            this.paint = paint2;
            setClipChildren(false);
            setOverScrollMode(2);
            paint2.setColor(-16777216);
            setFadingEdgeLength(AndroidUtilities.dp(12.0f));
            setVerticalFadingEdgeEnabled(true);
            setWillNotDraw(false);
            SpringAnimation springAnimation2 = new SpringAnimation(PhotoViewer.this.captionTextViewSwitcher, DynamicAnimation.TRANSLATION_Y, 0.0f);
            this.springAnimation = springAnimation2;
            springAnimation2.getSpring().setStiffness(100.0f);
            springAnimation2.setMinimumVisibleChange(1.0f);
            springAnimation2.addUpdateListener(new PhotoViewer$CaptionScrollView$$ExternalSyntheticLambda0(this));
            springAnimation2.getSpring().setDampingRatio(1.0f);
            try {
                Method declaredMethod = NestedScrollView.class.getDeclaredMethod("abortAnimatedScroll", new Class[0]);
                this.abortAnimatedScrollMethod = declaredMethod;
                declaredMethod.setAccessible(true);
            } catch (Exception e) {
                this.abortAnimatedScrollMethod = null;
                FileLog.e((Throwable) e);
            }
            try {
                Field declaredField = NestedScrollView.class.getDeclaredField("mScroller");
                declaredField.setAccessible(true);
                this.scroller = (OverScroller) declaredField.get(this);
            } catch (Exception e2) {
                this.scroller = null;
                FileLog.e((Throwable) e2);
            }
        }

        /* access modifiers changed from: private */
        public /* synthetic */ void lambda$new$0(DynamicAnimation dynamicAnimation, float f, float f2) {
            this.overScrollY = f;
            this.velocityY = f2;
        }

        public boolean onTouchEvent(MotionEvent motionEvent) {
            if (motionEvent.getAction() != 0 || motionEvent.getY() >= ((float) (PhotoViewer.this.captionContainer.getTop() - getScrollY())) + PhotoViewer.this.captionTextViewSwitcher.getTranslationY()) {
                return super.onTouchEvent(motionEvent);
            }
            return false;
        }

        /* access modifiers changed from: protected */
        public void onMeasure(int i, int i2) {
            updateTopMargin(View.MeasureSpec.getSize(i), View.MeasureSpec.getSize(i2));
            super.onMeasure(i, i2);
        }

        public void applyPendingTopMargin() {
            this.dontChangeTopMargin = false;
            if (this.pendingTopMargin >= 0) {
                ((ViewGroup.MarginLayoutParams) PhotoViewer.this.captionContainer.getLayoutParams()).topMargin = this.pendingTopMargin;
                this.pendingTopMargin = -1;
                requestLayout();
            }
        }

        public int getPendingMarginTopDiff() {
            int i = this.pendingTopMargin;
            if (i >= 0) {
                return i - ((ViewGroup.MarginLayoutParams) PhotoViewer.this.captionContainer.getLayoutParams()).topMargin;
            }
            return 0;
        }

        public void updateTopMargin() {
            updateTopMargin(getWidth(), getHeight());
        }

        private void updateTopMargin(int i, int i2) {
            int calculateNewContainerMarginTop = calculateNewContainerMarginTop(i, i2);
            if (calculateNewContainerMarginTop < 0) {
                return;
            }
            if (this.dontChangeTopMargin) {
                this.pendingTopMargin = calculateNewContainerMarginTop;
                return;
            }
            ((ViewGroup.MarginLayoutParams) PhotoViewer.this.captionContainer.getLayoutParams()).topMargin = calculateNewContainerMarginTop;
            this.pendingTopMargin = -1;
        }

        public int calculateNewContainerMarginTop(int i, int i2) {
            int i3;
            if (i == 0 || i2 == 0) {
                return -1;
            }
            TextView currentView = PhotoViewer.this.captionTextViewSwitcher.getCurrentView();
            CharSequence text = currentView.getText();
            int hashCode = text.hashCode();
            Point point = AndroidUtilities.displaySize;
            boolean z = point.x > point.y;
            if (this.textHash == hashCode && this.isLandscape == z && this.prevHeight == i2) {
                return -1;
            }
            this.textHash = hashCode;
            this.isLandscape = z;
            this.prevHeight = i2;
            currentView.measure(View.MeasureSpec.makeMeasureSpec(i, NUM), View.MeasureSpec.makeMeasureSpec(i2, Integer.MIN_VALUE));
            Layout layout = currentView.getLayout();
            int lineCount = layout.getLineCount();
            int i4 = 2;
            if ((!z || lineCount > 2) && (z || lineCount > 5)) {
                if (!z) {
                    i4 = 5;
                }
                int min = Math.min(i4, lineCount);
                loop0:
                while (min > 1) {
                    int i5 = min - 1;
                    for (int lineStart = layout.getLineStart(i5); lineStart < layout.getLineEnd(i5); lineStart++) {
                        if (Character.isLetterOrDigit(text.charAt(lineStart))) {
                            break loop0;
                        }
                    }
                    min--;
                }
                i2 -= currentView.getPaint().getFontMetricsInt((Paint.FontMetricsInt) null) * min;
                i3 = AndroidUtilities.dp(8.0f);
            } else {
                i3 = currentView.getMeasuredHeight();
            }
            return i2 - i3;
        }

        public void reset() {
            scrollTo(0, 0);
        }

        public void stopScrolling() {
            Method method = this.abortAnimatedScrollMethod;
            if (method != null) {
                try {
                    method.invoke(this, new Object[0]);
                } catch (Exception e) {
                    FileLog.e((Throwable) e);
                }
            }
        }

        public void fling(int i) {
            super.fling(i);
            this.velocitySign = Math.signum((float) i);
            this.velocityY = 0.0f;
        }

        public boolean dispatchNestedPreScroll(int i, int i2, int[] iArr, int[] iArr2, int i3) {
            iArr[1] = 0;
            if (this.nestedScrollStarted) {
                float f = this.overScrollY;
                if ((f > 0.0f && i2 > 0) || (f < 0.0f && i2 < 0)) {
                    float f2 = (float) i2;
                    float f3 = f - f2;
                    if (f > 0.0f) {
                        if (f3 < 0.0f) {
                            this.overScrollY = 0.0f;
                            iArr[1] = (int) (((float) iArr[1]) + f2 + f3);
                        } else {
                            this.overScrollY = f3;
                            iArr[1] = iArr[1] + i2;
                        }
                    } else if (f3 > 0.0f) {
                        this.overScrollY = 0.0f;
                        iArr[1] = (int) (((float) iArr[1]) + f2 + f3);
                    } else {
                        this.overScrollY = f3;
                        iArr[1] = iArr[1] + i2;
                    }
                    PhotoViewer.this.captionTextViewSwitcher.setTranslationY(this.overScrollY);
                    return true;
                }
            }
            return false;
        }

        public void dispatchNestedScroll(int i, int i2, int i3, int i4, int[] iArr, int i5, int[] iArr2) {
            float f;
            if (i4 != 0) {
                int round = Math.round(((float) i4) * (1.0f - Math.abs((-this.overScrollY) / ((float) (PhotoViewer.this.captionContainer.getTop() - ((PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0) + ActionBar.getCurrentActionBarHeight()))))));
                if (round == 0) {
                    return;
                }
                if (this.nestedScrollStarted) {
                    this.overScrollY -= (float) round;
                    PhotoViewer.this.captionTextViewSwitcher.setTranslationY(this.overScrollY);
                } else if (!this.springAnimation.isRunning()) {
                    OverScroller overScroller = this.scroller;
                    float currVelocity = overScroller != null ? overScroller.getCurrVelocity() : Float.NaN;
                    if (!Float.isNaN(currVelocity)) {
                        Point point = AndroidUtilities.displaySize;
                        float min = Math.min(point.x > point.y ? 3000.0f : 5000.0f, currVelocity);
                        round = (int) ((((float) round) * min) / currVelocity);
                        f = min * (-this.velocitySign);
                    } else {
                        f = 0.0f;
                    }
                    if (round != 0) {
                        this.overScrollY -= (float) round;
                        PhotoViewer.this.captionTextViewSwitcher.setTranslationY(this.overScrollY);
                    }
                    startSpringAnimationIfNotRunning(f);
                }
            }
        }

        private void startSpringAnimationIfNotRunning(float f) {
            if (!this.springAnimation.isRunning()) {
                this.springAnimation.setStartVelocity(f);
                this.springAnimation.start();
            }
        }

        public boolean startNestedScroll(int i, int i2) {
            if (i2 == 0) {
                this.springAnimation.cancel();
                this.nestedScrollStarted = true;
                this.overScrollY = PhotoViewer.this.captionTextViewSwitcher.getTranslationY();
            }
            return true;
        }

        public void computeScroll() {
            OverScroller overScroller;
            super.computeScroll();
            if (!this.nestedScrollStarted && this.overScrollY != 0.0f && (overScroller = this.scroller) != null && overScroller.isFinished()) {
                startSpringAnimationIfNotRunning(0.0f);
            }
        }

        public void stopNestedScroll(int i) {
            OverScroller overScroller;
            if (this.nestedScrollStarted && i == 0) {
                this.nestedScrollStarted = false;
                if (this.overScrollY != 0.0f && (overScroller = this.scroller) != null && overScroller.isFinished()) {
                    startSpringAnimationIfNotRunning(this.velocityY);
                }
            }
        }

        public void draw(Canvas canvas) {
            int width = getWidth();
            int height = getHeight();
            int scrollY = getScrollY();
            int save = canvas.save();
            int i = height + scrollY;
            canvas.clipRect(0, scrollY, width, i);
            this.paint.setAlpha((int) (this.backgroundAlpha * 127.0f));
            canvas.drawRect(0.0f, ((float) PhotoViewer.this.captionContainer.getTop()) + PhotoViewer.this.captionTextViewSwitcher.getTranslationY(), (float) width, (float) i, this.paint);
            super.draw(canvas);
            canvas.restoreToCount(save);
        }

        public void invalidate() {
            super.invalidate();
            if (PhotoViewer.this.isActionBarVisible) {
                int scrollY = getScrollY();
                float translationY = PhotoViewer.this.captionTextViewSwitcher.getTranslationY();
                float f = 0.0f;
                boolean z = scrollY == 0 && translationY == 0.0f;
                boolean z2 = scrollY == 0 && translationY == 0.0f;
                if (!z) {
                    int y = PhotoViewer.this.photoProgressViews[0].getY() + PhotoViewer.this.photoProgressViews[0].size;
                    int top = (((PhotoViewer.this.captionContainer.getTop() + ((int) translationY)) - scrollY) + ((PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0) + ActionBar.getCurrentActionBarHeight())) - AndroidUtilities.dp(12.0f);
                    z2 = top > ((int) PhotoViewer.this.fullscreenButton[0].getY()) + AndroidUtilities.dp(32.0f);
                    z = top > y;
                }
                if (PhotoViewer.this.allowShowFullscreenButton) {
                    if (PhotoViewer.this.fullscreenButton[0].getTag() != null && ((Integer) PhotoViewer.this.fullscreenButton[0].getTag()).intValue() == 3 && z2) {
                        PhotoViewer.this.fullscreenButton[0].setTag(2);
                        PhotoViewer.this.fullscreenButton[0].animate().alpha(1.0f).setDuration(150).setListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animator) {
                                PhotoViewer.this.fullscreenButton[0].setTag((Object) null);
                            }
                        }).start();
                    } else if (PhotoViewer.this.fullscreenButton[0].getTag() == null && !z2) {
                        PhotoViewer.this.fullscreenButton[0].setTag(3);
                        PhotoViewer.this.fullscreenButton[0].animate().alpha(0.0f).setListener((Animator.AnimatorListener) null).setDuration(150).start();
                    }
                }
                PhotoProgressView photoProgressView = PhotoViewer.this.photoProgressViews[0];
                if (z) {
                    f = 1.0f;
                }
                photoProgressView.setIndexedAlpha(2, f, true);
            }
        }
    }

    public static PhotoViewer getPipInstance() {
        return PipInstance;
    }

    public static PhotoViewer getInstance() {
        PhotoViewer photoViewer = Instance;
        if (photoViewer == null) {
            synchronized (PhotoViewer.class) {
                photoViewer = Instance;
                if (photoViewer == null) {
                    photoViewer = new PhotoViewer();
                    Instance = photoViewer;
                }
            }
        }
        return photoViewer;
    }

    public boolean isOpenedFullScreenVideo() {
        return this.openedFullScreenVideo;
    }

    public static boolean hasInstance() {
        return Instance != null;
    }

    public PhotoViewer() {
        this.blackPaint.setColor(-16777216);
        this.videoFrameBitmapPaint.setColor(-1);
        this.centerImage.setFileLoadingPriority(3);
    }

    /* JADX WARNING: Code restructure failed: missing block: B:289:0x060f, code lost:
        if (r1.get(r1.size() - 1).getDialogId() != r0.mergeDialogId) goto L_0x0654;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:302:0x0652, code lost:
        if (r0.imagesArrTemp.get(0).getDialogId() != r0.mergeDialogId) goto L_0x0654;
     */
    /* JADX WARNING: Removed duplicated region for block: B:150:0x0266  */
    /* JADX WARNING: Removed duplicated region for block: B:153:0x0274  */
    /* JADX WARNING: Removed duplicated region for block: B:154:0x0279  */
    /* JADX WARNING: Removed duplicated region for block: B:156:0x027c  */
    /* JADX WARNING: Removed duplicated region for block: B:161:0x02ae  */
    /* JADX WARNING: Removed duplicated region for block: B:308:0x0661  */
    /* JADX WARNING: Removed duplicated region for block: B:475:? A[RETURN, SYNTHETIC] */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public void didReceivedNotification(int r21, int r22, java.lang.Object... r23) {
        /*
            r20 = this;
            r0 = r20
            r1 = r21
            int r2 = org.telegram.messenger.NotificationCenter.fileLoadFailed
            r3 = 1065353216(0x3var_, float:1.0)
            r4 = 3
            r5 = 2
            r6 = 1
            r7 = 0
            if (r1 != r2) goto L_0x0048
            r1 = r23[r7]
            java.lang.String r1 = (java.lang.String) r1
            r2 = 0
        L_0x0013:
            if (r2 >= r4) goto L_0x0896
            java.lang.String[] r8 = r0.currentFileNames
            r9 = r8[r2]
            if (r9 == 0) goto L_0x0045
            r8 = r8[r2]
            boolean r8 = r8.equals(r1)
            if (r8 == 0) goto L_0x0045
            if (r2 == 0) goto L_0x0038
            if (r2 != r6) goto L_0x002d
            org.telegram.messenger.ImageReceiver r1 = r0.sideImage
            org.telegram.messenger.ImageReceiver r4 = r0.rightImage
            if (r1 == r4) goto L_0x0038
        L_0x002d:
            if (r2 != r5) goto L_0x0036
            org.telegram.messenger.ImageReceiver r1 = r0.sideImage
            org.telegram.messenger.ImageReceiver r4 = r0.leftImage
            if (r1 != r4) goto L_0x0036
            goto L_0x0038
        L_0x0036:
            r1 = 0
            goto L_0x0039
        L_0x0038:
            r1 = 1
        L_0x0039:
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r4 = r0.photoProgressViews
            r4 = r4[r2]
            r4.setProgress(r3, r1)
            r0.checkProgress(r2, r7, r6)
            goto L_0x0896
        L_0x0045:
            int r2 = r2 + 1
            goto L_0x0013
        L_0x0048:
            int r2 = org.telegram.messenger.NotificationCenter.fileLoaded
            if (r1 != r2) goto L_0x00c5
            r1 = r23[r7]
            java.lang.String r1 = (java.lang.String) r1
            r2 = 0
        L_0x0051:
            if (r2 >= r4) goto L_0x0896
            java.lang.String[] r8 = r0.currentFileNames
            r9 = r8[r2]
            if (r9 == 0) goto L_0x00c2
            r8 = r8[r2]
            boolean r8 = r8.equals(r1)
            if (r8 == 0) goto L_0x00c2
            if (r2 == 0) goto L_0x0076
            if (r2 != r6) goto L_0x006b
            org.telegram.messenger.ImageReceiver r1 = r0.sideImage
            org.telegram.messenger.ImageReceiver r4 = r0.rightImage
            if (r1 == r4) goto L_0x0076
        L_0x006b:
            if (r2 != r5) goto L_0x0074
            org.telegram.messenger.ImageReceiver r1 = r0.sideImage
            org.telegram.messenger.ImageReceiver r4 = r0.leftImage
            if (r1 != r4) goto L_0x0074
            goto L_0x0076
        L_0x0074:
            r1 = 0
            goto L_0x0077
        L_0x0076:
            r1 = 1
        L_0x0077:
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r4 = r0.photoProgressViews
            r4 = r4[r2]
            r4.setProgress(r3, r1)
            r0.checkProgress(r2, r7, r1)
            org.telegram.ui.Components.VideoPlayer r1 = r0.videoPlayer
            if (r1 != 0) goto L_0x00b8
            if (r2 != 0) goto L_0x00b8
            org.telegram.messenger.MessageObject r1 = r0.currentMessageObject
            if (r1 == 0) goto L_0x0091
            boolean r1 = r1.isVideo()
            if (r1 != 0) goto L_0x00b5
        L_0x0091:
            org.telegram.tgnet.TLRPC$BotInlineResult r1 = r0.currentBotInlineResult
            if (r1 == 0) goto L_0x00a9
            java.lang.String r1 = r1.type
            java.lang.String r3 = "video"
            boolean r1 = r1.equals(r3)
            if (r1 != 0) goto L_0x00b5
            org.telegram.tgnet.TLRPC$BotInlineResult r1 = r0.currentBotInlineResult
            org.telegram.tgnet.TLRPC$Document r1 = r1.document
            boolean r1 = org.telegram.messenger.MessageObject.isVideoDocument(r1)
            if (r1 != 0) goto L_0x00b5
        L_0x00a9:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r0.pageBlocksAdapter
            if (r1 == 0) goto L_0x00b8
            int r3 = r0.currentIndex
            boolean r1 = r1.isVideo(r3)
            if (r1 == 0) goto L_0x00b8
        L_0x00b5:
            r0.onActionClick(r7)
        L_0x00b8:
            if (r2 != 0) goto L_0x0896
            org.telegram.ui.Components.VideoPlayer r1 = r0.videoPlayer
            if (r1 == 0) goto L_0x0896
            r0.currentVideoFinishedLoading = r6
            goto L_0x0896
        L_0x00c2:
            int r2 = r2 + 1
            goto L_0x0051
        L_0x00c5:
            int r2 = org.telegram.messenger.NotificationCenter.fileLoadProgressChanged
            r8 = 0
            if (r1 != r2) goto L_0x0198
            r1 = r23[r7]
            java.lang.String r1 = (java.lang.String) r1
            r2 = 0
        L_0x00d0:
            if (r2 >= r4) goto L_0x0896
            java.lang.String[] r10 = r0.currentFileNames
            r11 = r10[r2]
            if (r11 == 0) goto L_0x018f
            r10 = r10[r2]
            boolean r10 = r10.equals(r1)
            if (r10 == 0) goto L_0x018f
            r10 = r23[r6]
            java.lang.Long r10 = (java.lang.Long) r10
            r11 = r23[r5]
            java.lang.Long r11 = (java.lang.Long) r11
            long r12 = r10.longValue()
            float r10 = (float) r12
            long r11 = r11.longValue()
            float r11 = (float) r11
            float r10 = r10 / r11
            float r10 = java.lang.Math.min(r3, r10)
            if (r2 == 0) goto L_0x010c
            if (r2 != r6) goto L_0x0101
            org.telegram.messenger.ImageReceiver r11 = r0.sideImage
            org.telegram.messenger.ImageReceiver r12 = r0.rightImage
            if (r11 == r12) goto L_0x010c
        L_0x0101:
            if (r2 != r5) goto L_0x010a
            org.telegram.messenger.ImageReceiver r11 = r0.sideImage
            org.telegram.messenger.ImageReceiver r12 = r0.leftImage
            if (r11 != r12) goto L_0x010a
            goto L_0x010c
        L_0x010a:
            r11 = 0
            goto L_0x010d
        L_0x010c:
            r11 = 1
        L_0x010d:
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r12 = r0.photoProgressViews
            r12 = r12[r2]
            r12.setProgress(r10, r11)
            if (r2 != 0) goto L_0x018f
            org.telegram.ui.Components.VideoPlayer r11 = r0.videoPlayer
            if (r11 == 0) goto L_0x018f
            org.telegram.ui.Components.VideoPlayerSeekBar r11 = r0.videoPlayerSeekbar
            if (r11 == 0) goto L_0x018f
            boolean r11 = r0.currentVideoFinishedLoading
            if (r11 == 0) goto L_0x0125
        L_0x0122:
            r4 = -1082130432(0xffffffffbvar_, float:-1.0)
            goto L_0x017b
        L_0x0125:
            long r13 = android.os.SystemClock.elapsedRealtime()
            long r5 = r0.lastBufferedPositionCheck
            long r5 = r13 - r5
            long r5 = java.lang.Math.abs(r5)
            r15 = 500(0x1f4, double:2.47E-321)
            int r17 = (r5 > r15 ? 1 : (r5 == r15 ? 0 : -1))
            if (r17 < 0) goto L_0x0178
            float r5 = r0.seekToProgressPending
            r6 = 0
            int r15 = (r5 > r6 ? 1 : (r5 == r6 ? 0 : -1))
            if (r15 != 0) goto L_0x0160
            org.telegram.ui.Components.VideoPlayer r5 = r0.videoPlayer
            long r3 = r5.getDuration()
            org.telegram.ui.Components.VideoPlayer r5 = r0.videoPlayer
            long r11 = r5.getCurrentPosition()
            int r5 = (r3 > r8 ? 1 : (r3 == r8 ? 0 : -1))
            if (r5 < 0) goto L_0x015f
            r18 = -9223372036854775807(0xNUM, double:-4.9E-324)
            int r5 = (r3 > r18 ? 1 : (r3 == r18 ? 0 : -1))
            if (r5 == 0) goto L_0x015f
            int r5 = (r11 > r8 ? 1 : (r11 == r8 ? 0 : -1))
            if (r5 < 0) goto L_0x015f
            float r5 = (float) r11
            float r3 = (float) r3
            float r5 = r5 / r3
            goto L_0x0160
        L_0x015f:
            r5 = 0
        L_0x0160:
            boolean r3 = r0.isStreaming
            if (r3 == 0) goto L_0x0173
            int r3 = r0.currentAccount
            org.telegram.messenger.FileLoader r3 = org.telegram.messenger.FileLoader.getInstance(r3)
            java.lang.String[] r4 = r0.currentFileNames
            r4 = r4[r7]
            float r3 = r3.getBufferedProgressFromPosition(r5, r4)
            goto L_0x0175
        L_0x0173:
            r3 = 1065353216(0x3var_, float:1.0)
        L_0x0175:
            r0.lastBufferedPositionCheck = r13
            goto L_0x0122
        L_0x0178:
            r3 = -1082130432(0xffffffffbvar_, float:-1.0)
            goto L_0x0122
        L_0x017b:
            int r4 = (r3 > r4 ? 1 : (r3 == r4 ? 0 : -1))
            if (r4 == 0) goto L_0x018c
            org.telegram.ui.Components.VideoPlayerSeekBar r4 = r0.videoPlayerSeekbar
            r4.setBufferedProgress(r3)
            org.telegram.ui.Components.PipVideoOverlay.setBufferedProgress(r3)
            android.view.View r3 = r0.videoPlayerSeekbarView
            r3.invalidate()
        L_0x018c:
            r0.checkBufferedProgress(r10)
        L_0x018f:
            int r2 = r2 + 1
            r3 = 1065353216(0x3var_, float:1.0)
            r4 = 3
            r5 = 2
            r6 = 1
            goto L_0x00d0
        L_0x0198:
            int r2 = org.telegram.messenger.NotificationCenter.dialogPhotosLoaded
            r3 = 5
            r5 = 4
            r6 = -1
            if (r1 != r2) goto L_0x038d
            r2 = 3
            r1 = r23[r2]
            java.lang.Integer r1 = (java.lang.Integer) r1
            int r1 = r1.intValue()
            r2 = r23[r7]
            java.lang.Long r2 = (java.lang.Long) r2
            long r10 = r2.longValue()
            long r12 = r0.avatarsDialogId
            int r2 = (r12 > r10 ? 1 : (r12 == r10 ? 0 : -1))
            if (r2 != 0) goto L_0x0896
            int r2 = r0.classGuid
            if (r2 != r1) goto L_0x0896
            r1 = 2
            r1 = r23[r1]
            java.lang.Boolean r1 = (java.lang.Boolean) r1
            boolean r1 = r1.booleanValue()
            r2 = r23[r5]
            java.util.ArrayList r2 = (java.util.ArrayList) r2
            boolean r5 = r2.isEmpty()
            if (r5 == 0) goto L_0x01ce
            return
        L_0x01ce:
            r3 = r23[r3]
            java.util.ArrayList r3 = (java.util.ArrayList) r3
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r5 = r0.imagesArrLocations
            r5.clear()
            java.util.ArrayList<java.lang.Long> r5 = r0.imagesArrLocationsSizes
            r5.clear()
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r5 = r0.imagesArrLocationsVideo
            r5.clear()
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Message> r5 = r0.imagesArrMessages
            r5.clear()
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Photo> r5 = r0.avatarsArr
            r5.clear()
            r5 = 0
            r10 = -1
        L_0x01ed:
            int r11 = r2.size()
            r12 = 0
            if (r5 >= r11) goto L_0x02ba
            java.lang.Object r11 = r2.get(r5)
            org.telegram.tgnet.TLRPC$Photo r11 = (org.telegram.tgnet.TLRPC$Photo) r11
            if (r11 == 0) goto L_0x02b1
            boolean r13 = r11 instanceof org.telegram.tgnet.TLRPC$TL_photoEmpty
            if (r13 != 0) goto L_0x02b1
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r13 = r11.sizes
            if (r13 != 0) goto L_0x0206
            goto L_0x02b1
        L_0x0206:
            r14 = 640(0x280, float:8.97E-43)
            org.telegram.tgnet.TLRPC$PhotoSize r13 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r13, r14)
            java.util.ArrayList<org.telegram.tgnet.TLRPC$VideoSize> r14 = r11.video_sizes
            boolean r14 = r14.isEmpty()
            if (r14 == 0) goto L_0x0216
            r14 = r12
            goto L_0x021e
        L_0x0216:
            java.util.ArrayList<org.telegram.tgnet.TLRPC$VideoSize> r14 = r11.video_sizes
            java.lang.Object r14 = r14.get(r7)
            org.telegram.tgnet.TLRPC$VideoSize r14 = (org.telegram.tgnet.TLRPC$VideoSize) r14
        L_0x021e:
            if (r13 == 0) goto L_0x02b1
            if (r10 != r6) goto L_0x0260
            org.telegram.messenger.ImageLocation r15 = r0.currentFileLocation
            if (r15 == 0) goto L_0x0260
            r15 = 0
        L_0x0227:
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r8 = r11.sizes
            int r8 = r8.size()
            if (r15 >= r8) goto L_0x0260
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r8 = r11.sizes
            java.lang.Object r8 = r8.get(r15)
            org.telegram.tgnet.TLRPC$PhotoSize r8 = (org.telegram.tgnet.TLRPC$PhotoSize) r8
            org.telegram.tgnet.TLRPC$FileLocation r8 = r8.location
            if (r8 == 0) goto L_0x0257
            int r9 = r8.local_id
            org.telegram.messenger.ImageLocation r6 = r0.currentFileLocation
            org.telegram.tgnet.TLRPC$TL_fileLocationToBeDeprecated r6 = r6.location
            int r7 = r6.local_id
            if (r9 != r7) goto L_0x0257
            long r7 = r8.volume_id
            r16 = r5
            long r4 = r6.volume_id
            int r6 = (r7 > r4 ? 1 : (r7 == r4 ? 0 : -1))
            if (r6 != 0) goto L_0x0259
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r4 = r0.imagesArrLocations
            int r4 = r4.size()
            r10 = r4
            goto L_0x0262
        L_0x0257:
            r16 = r5
        L_0x0259:
            int r15 = r15 + 1
            r5 = r16
            r6 = -1
            r7 = 0
            goto L_0x0227
        L_0x0260:
            r16 = r5
        L_0x0262:
            int r4 = r11.dc_id
            if (r4 == 0) goto L_0x026e
            org.telegram.tgnet.TLRPC$FileLocation r5 = r13.location
            r5.dc_id = r4
            byte[] r4 = r11.file_reference
            r5.file_reference = r4
        L_0x026e:
            org.telegram.messenger.ImageLocation r4 = org.telegram.messenger.ImageLocation.getForPhoto((org.telegram.tgnet.TLRPC$PhotoSize) r13, (org.telegram.tgnet.TLRPC$Photo) r11)
            if (r14 == 0) goto L_0x0279
            org.telegram.messenger.ImageLocation r5 = org.telegram.messenger.ImageLocation.getForPhoto((org.telegram.tgnet.TLRPC$VideoSize) r14, (org.telegram.tgnet.TLRPC$Photo) r11)
            goto L_0x027a
        L_0x0279:
            r5 = r4
        L_0x027a:
            if (r4 == 0) goto L_0x02ae
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r6 = r0.imagesArrLocations
            r6.add(r4)
            java.util.ArrayList<java.lang.Long> r4 = r0.imagesArrLocationsSizes
            long r6 = r5.currentSize
            java.lang.Long r6 = java.lang.Long.valueOf(r6)
            r4.add(r6)
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r4 = r0.imagesArrLocationsVideo
            r4.add(r5)
            if (r3 == 0) goto L_0x02a1
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Message> r4 = r0.imagesArrMessages
            r7 = r16
            java.lang.Object r5 = r3.get(r7)
            org.telegram.tgnet.TLRPC$Message r5 = (org.telegram.tgnet.TLRPC$Message) r5
            r4.add(r5)
            goto L_0x02a8
        L_0x02a1:
            r7 = r16
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Message> r4 = r0.imagesArrMessages
            r4.add(r12)
        L_0x02a8:
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Photo> r4 = r0.avatarsArr
            r4.add(r11)
            goto L_0x02b2
        L_0x02ae:
            r7 = r16
            goto L_0x02b2
        L_0x02b1:
            r7 = r5
        L_0x02b2:
            int r5 = r7 + 1
            r6 = -1
            r7 = 0
            r8 = 0
            goto L_0x01ed
        L_0x02ba:
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Photo> r2 = r0.avatarsArr
            boolean r2 = r2.isEmpty()
            if (r2 != 0) goto L_0x02c9
            org.telegram.ui.ActionBar.ActionBarMenuItem r2 = r0.menuItem
            r3 = 6
            r2.showSubItem(r3)
            goto L_0x02cf
        L_0x02c9:
            r3 = 6
            org.telegram.ui.ActionBar.ActionBarMenuItem r2 = r0.menuItem
            r2.hideSubItem(r3)
        L_0x02cf:
            r2 = 0
            r0.needSearchImageInArr = r2
            r2 = -1
            r0.currentIndex = r2
            if (r10 == r2) goto L_0x02dc
            r0.setImageIndex(r10)
            goto L_0x0378
        L_0x02dc:
            long r2 = r0.avatarsDialogId
            r4 = 0
            int r6 = (r2 > r4 ? 1 : (r2 == r4 ? 0 : -1))
            if (r6 <= 0) goto L_0x02f6
            int r2 = r0.currentAccount
            org.telegram.messenger.MessagesController r2 = org.telegram.messenger.MessagesController.getInstance(r2)
            long r3 = r0.avatarsDialogId
            java.lang.Long r3 = java.lang.Long.valueOf(r3)
            org.telegram.tgnet.TLRPC$User r2 = r2.getUser(r3)
            r3 = r12
            goto L_0x0309
        L_0x02f6:
            int r2 = r0.currentAccount
            org.telegram.messenger.MessagesController r2 = org.telegram.messenger.MessagesController.getInstance(r2)
            long r3 = r0.avatarsDialogId
            long r3 = -r3
            java.lang.Long r3 = java.lang.Long.valueOf(r3)
            org.telegram.tgnet.TLRPC$Chat r2 = r2.getChat(r3)
            r3 = r2
            r2 = r12
        L_0x0309:
            if (r2 != 0) goto L_0x030d
            if (r3 == 0) goto L_0x0378
        L_0x030d:
            if (r2 == 0) goto L_0x0315
            r4 = 0
            org.telegram.messenger.ImageLocation r2 = org.telegram.messenger.ImageLocation.getForUserOrChat(r2, r4)
            goto L_0x031a
        L_0x0315:
            r4 = 0
            org.telegram.messenger.ImageLocation r2 = org.telegram.messenger.ImageLocation.getForUserOrChat(r3, r4)
        L_0x031a:
            if (r2 == 0) goto L_0x0378
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r3 = r0.imagesArrLocations
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x034d
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r3 = r0.imagesArrLocations
            java.lang.Object r3 = r3.get(r4)
            org.telegram.messenger.ImageLocation r3 = (org.telegram.messenger.ImageLocation) r3
            long r5 = r3.photoId
            long r7 = r2.photoId
            int r3 = (r5 > r7 ? 1 : (r5 == r7 ? 0 : -1))
            if (r3 != 0) goto L_0x034d
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r3 = r0.imagesArrLocations
            r3.remove(r4)
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Photo> r3 = r0.avatarsArr
            r3.remove(r4)
            java.util.ArrayList<java.lang.Long> r3 = r0.imagesArrLocationsSizes
            r3.remove(r4)
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r3 = r0.imagesArrLocationsVideo
            r3.remove(r4)
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Message> r3 = r0.imagesArrMessages
            r3.remove(r4)
        L_0x034d:
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r3 = r0.imagesArrLocations
            r3.add(r4, r2)
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Photo> r2 = r0.avatarsArr
            org.telegram.tgnet.TLRPC$TL_photoEmpty r3 = new org.telegram.tgnet.TLRPC$TL_photoEmpty
            r3.<init>()
            r2.add(r4, r3)
            java.util.ArrayList<java.lang.Long> r2 = r0.imagesArrLocationsSizes
            org.telegram.messenger.ImageLocation r3 = r0.currentFileLocationVideo
            long r5 = r3.currentSize
            java.lang.Long r3 = java.lang.Long.valueOf(r5)
            r2.add(r4, r3)
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r2 = r0.imagesArrLocationsVideo
            org.telegram.messenger.ImageLocation r3 = r0.currentFileLocationVideo
            r2.add(r4, r3)
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Message> r2 = r0.imagesArrMessages
            r2.add(r4, r12)
            r0.setImageIndex(r4)
        L_0x0378:
            if (r1 == 0) goto L_0x0896
            int r1 = r0.currentAccount
            org.telegram.messenger.MessagesController r2 = org.telegram.messenger.MessagesController.getInstance(r1)
            long r3 = r0.avatarsDialogId
            r5 = 80
            r6 = 0
            r7 = 0
            int r8 = r0.classGuid
            r2.loadDialogPhotos(r3, r5, r6, r7, r8)
            goto L_0x0896
        L_0x038d:
            int r2 = org.telegram.messenger.NotificationCenter.mediaCountDidLoad
            if (r1 != r2) goto L_0x0491
            r2 = 0
            r1 = r23[r2]
            java.lang.Long r1 = (java.lang.Long) r1
            long r1 = r1.longValue()
            long r3 = r0.currentDialogId
            int r5 = (r1 > r3 ? 1 : (r1 == r3 ? 0 : -1))
            if (r5 == 0) goto L_0x03a6
            long r3 = r0.mergeDialogId
            int r5 = (r1 > r3 ? 1 : (r1 == r3 ? 0 : -1))
            if (r5 != 0) goto L_0x0896
        L_0x03a6:
            org.telegram.messenger.MessageObject r3 = r0.currentMessageObject
            if (r3 == 0) goto L_0x03b4
            org.telegram.tgnet.TLRPC$Message r3 = r3.messageOwner
            int r3 = org.telegram.messenger.MediaDataController.getMediaType(r3)
            int r4 = r0.sharedMediaType
            if (r3 != r4) goto L_0x0896
        L_0x03b4:
            long r3 = r0.currentDialogId
            int r5 = (r1 > r3 ? 1 : (r1 == r3 ? 0 : -1))
            if (r5 != 0) goto L_0x03c6
            r1 = 1
            r2 = r23[r1]
            java.lang.Integer r2 = (java.lang.Integer) r2
            int r2 = r2.intValue()
            r0.totalImagesCount = r2
            goto L_0x03d1
        L_0x03c6:
            r1 = 1
            r2 = r23[r1]
            java.lang.Integer r2 = (java.lang.Integer) r2
            int r2 = r2.intValue()
            r0.totalImagesCountMerge = r2
        L_0x03d1:
            boolean r2 = r0.needSearchImageInArr
            if (r2 == 0) goto L_0x03f5
            boolean r2 = r0.isFirstLoading
            if (r2 == 0) goto L_0x03f5
            r2 = 0
            r0.isFirstLoading = r2
            r0.loadingMoreImages = r1
            int r1 = r0.currentAccount
            org.telegram.messenger.MediaDataController r2 = org.telegram.messenger.MediaDataController.getInstance(r1)
            long r3 = r0.currentDialogId
            r5 = 20
            r6 = 0
            r7 = 0
            int r8 = r0.sharedMediaType
            r9 = 1
            int r10 = r0.classGuid
            r11 = 0
            r2.loadMedia(r3, r5, r6, r7, r8, r9, r10, r11)
            goto L_0x0896
        L_0x03f5:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            boolean r1 = r1.isEmpty()
            if (r1 != 0) goto L_0x0896
            boolean r1 = r0.opennedFromMedia
            java.lang.String r2 = "Of"
            if (r1 == 0) goto L_0x042c
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            int r3 = org.telegram.messenger.R.string.Of
            r4 = 2
            java.lang.Object[] r4 = new java.lang.Object[r4]
            int r5 = r0.startOffset
            int r6 = r0.currentIndex
            int r5 = r5 + r6
            r6 = 1
            int r5 = r5 + r6
            java.lang.Integer r5 = java.lang.Integer.valueOf(r5)
            r7 = 0
            r4[r7] = r5
            int r5 = r0.totalImagesCount
            int r7 = r0.totalImagesCountMerge
            int r5 = r5 + r7
            java.lang.Integer r5 = java.lang.Integer.valueOf(r5)
            r4[r6] = r5
            java.lang.String r2 = org.telegram.messenger.LocaleController.formatString(r2, r3, r4)
            r1.setTitle(r2)
            goto L_0x0896
        L_0x042c:
            org.telegram.messenger.MessageObject r1 = r0.currentMessageObject
            if (r1 == 0) goto L_0x045e
            boolean r1 = r1.hasRevealedExtendedMedia()
            if (r1 == 0) goto L_0x045e
            org.telegram.messenger.MessageObject r1 = r0.currentMessageObject
            boolean r1 = r1.isVideo()
            if (r1 == 0) goto L_0x044e
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            int r2 = org.telegram.messenger.R.string.AttachVideo
            r3 = 0
            java.lang.Object[] r3 = new java.lang.Object[r3]
            java.lang.String r2 = org.telegram.messenger.LocaleController.formatString(r2, r3)
            r1.setTitle(r2)
            goto L_0x0896
        L_0x044e:
            r3 = 0
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            int r2 = org.telegram.messenger.R.string.AttachPhoto
            java.lang.Object[] r3 = new java.lang.Object[r3]
            java.lang.String r2 = org.telegram.messenger.LocaleController.formatString(r2, r3)
            r1.setTitle(r2)
            goto L_0x0896
        L_0x045e:
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            int r3 = org.telegram.messenger.R.string.Of
            r4 = 2
            java.lang.Object[] r4 = new java.lang.Object[r4]
            int r5 = r0.totalImagesCount
            int r6 = r0.totalImagesCountMerge
            int r5 = r5 + r6
            java.util.ArrayList<org.telegram.messenger.MessageObject> r6 = r0.imagesArr
            int r6 = r6.size()
            int r5 = r5 - r6
            int r6 = r0.currentIndex
            int r5 = r5 + r6
            r6 = 1
            int r5 = r5 + r6
            java.lang.Integer r5 = java.lang.Integer.valueOf(r5)
            r7 = 0
            r4[r7] = r5
            int r5 = r0.totalImagesCount
            int r7 = r0.totalImagesCountMerge
            int r5 = r5 + r7
            java.lang.Integer r5 = java.lang.Integer.valueOf(r5)
            r4[r6] = r5
            java.lang.String r2 = org.telegram.messenger.LocaleController.formatString(r2, r3, r4)
            r1.setTitle(r2)
            goto L_0x0896
        L_0x0491:
            int r2 = org.telegram.messenger.NotificationCenter.mediaDidLoad
            if (r1 != r2) goto L_0x0715
            r2 = 0
            r1 = r23[r2]
            java.lang.Long r1 = (java.lang.Long) r1
            long r1 = r1.longValue()
            r4 = 3
            r4 = r23[r4]
            java.lang.Integer r4 = (java.lang.Integer) r4
            int r4 = r4.intValue()
            long r5 = r0.currentDialogId
            int r7 = (r1 > r5 ? 1 : (r1 == r5 ? 0 : -1))
            if (r7 == 0) goto L_0x04b3
            long r7 = r0.mergeDialogId
            int r10 = (r1 > r7 ? 1 : (r1 == r7 ? 0 : -1))
            if (r10 != 0) goto L_0x0896
        L_0x04b3:
            int r7 = r0.classGuid
            if (r4 != r7) goto L_0x0896
            r4 = 0
            r0.loadingMoreImages = r4
            int r4 = (r1 > r5 ? 1 : (r1 == r5 ? 0 : -1))
            if (r4 != 0) goto L_0x04c0
            r1 = 0
            goto L_0x04c1
        L_0x04c0:
            r1 = 1
        L_0x04c1:
            r2 = 2
            r4 = r23[r2]
            java.util.ArrayList r4 = (java.util.ArrayList) r4
            boolean[] r2 = r0.endReached
            r3 = r23[r3]
            java.lang.Boolean r3 = (java.lang.Boolean) r3
            boolean r3 = r3.booleanValue()
            r2[r1] = r3
            r2 = 6
            r2 = r23[r2]
            java.lang.Boolean r2 = (java.lang.Boolean) r2
            boolean r2 = r2.booleanValue()
            boolean r3 = r0.needSearchImageInArr
            if (r3 == 0) goto L_0x0683
            boolean r2 = r4.isEmpty()
            if (r2 == 0) goto L_0x04ef
            if (r1 != 0) goto L_0x067f
            long r2 = r0.mergeDialogId
            r5 = 0
            int r7 = (r2 > r5 ? 1 : (r2 == r5 ? 0 : -1))
            if (r7 == 0) goto L_0x067f
        L_0x04ef:
            int r2 = r0.currentIndex
            if (r2 < 0) goto L_0x067f
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            int r3 = r3.size()
            if (r2 < r3) goto L_0x04fd
            goto L_0x067f
        L_0x04fd:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArr
            int r3 = r0.currentIndex
            java.lang.Object r2 = r2.get(r3)
            org.telegram.messenger.MessageObject r2 = (org.telegram.messenger.MessageObject) r2
            r3 = -1
            r5 = 0
            r6 = 0
        L_0x050a:
            int r7 = r4.size()
            if (r5 >= r7) goto L_0x0560
            java.lang.Object r7 = r4.get(r5)
            org.telegram.messenger.MessageObject r7 = (org.telegram.messenger.MessageObject) r7
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r8 = r0.imagesByIdsTemp
            r8 = r8[r1]
            int r9 = r7.getId()
            int r8 = r8.indexOfKey(r9)
            if (r8 >= 0) goto L_0x055d
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r8 = r0.imagesByIdsTemp
            r8 = r8[r1]
            int r9 = r7.getId()
            r8.put(r9, r7)
            boolean r8 = r0.opennedFromMedia
            if (r8 == 0) goto L_0x0546
            java.util.ArrayList<org.telegram.messenger.MessageObject> r8 = r0.imagesArrTemp
            r8.add(r7)
            int r7 = r7.getId()
            int r8 = r2.getId()
            if (r7 != r8) goto L_0x0543
            r3 = r6
        L_0x0543:
            int r6 = r6 + 1
            goto L_0x055d
        L_0x0546:
            int r6 = r6 + 1
            java.util.ArrayList<org.telegram.messenger.MessageObject> r8 = r0.imagesArrTemp
            r9 = 0
            r8.add(r9, r7)
            int r7 = r7.getId()
            int r8 = r2.getId()
            if (r7 != r8) goto L_0x055d
            int r3 = r4.size()
            int r3 = r3 - r6
        L_0x055d:
            int r5 = r5 + 1
            goto L_0x050a
        L_0x0560:
            if (r6 != 0) goto L_0x0577
            if (r1 != 0) goto L_0x056c
            long r4 = r0.mergeDialogId
            r6 = 0
            int r2 = (r4 > r6 ? 1 : (r4 == r6 ? 0 : -1))
            if (r2 != 0) goto L_0x0577
        L_0x056c:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArr
            int r2 = r2.size()
            r0.totalImagesCount = r2
            r2 = 0
            r0.totalImagesCountMerge = r2
        L_0x0577:
            r2 = -1
            if (r3 == r2) goto L_0x05c1
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            r1.clear()
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArrTemp
            r1.addAll(r2)
            r1 = 0
        L_0x0587:
            r2 = 2
            if (r1 >= r2) goto L_0x05a0
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r2 = r0.imagesByIds
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r4 = r0.imagesByIdsTemp
            r4 = r4[r1]
            android.util.SparseArray r4 = r4.clone()
            r2[r1] = r4
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r2 = r0.imagesByIdsTemp
            r2 = r2[r1]
            r2.clear()
            int r1 = r1 + 1
            goto L_0x0587
        L_0x05a0:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArrTemp
            r1.clear()
            r1 = 0
            r0.needSearchImageInArr = r1
            r1 = -1
            r0.currentIndex = r1
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            int r1 = r1.size()
            if (r3 < r1) goto L_0x05bc
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            int r1 = r1.size()
            r2 = 1
            int r3 = r1 + -1
        L_0x05bc:
            r0.setImageIndex(r3)
            goto L_0x0896
        L_0x05c1:
            boolean r2 = r0.opennedFromMedia
            if (r2 == 0) goto L_0x0612
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArrTemp
            boolean r2 = r2.isEmpty()
            if (r2 == 0) goto L_0x05cf
            r2 = 0
            goto L_0x05e1
        L_0x05cf:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArrTemp
            int r3 = r2.size()
            r4 = 1
            int r3 = r3 - r4
            java.lang.Object r2 = r2.get(r3)
            org.telegram.messenger.MessageObject r2 = (org.telegram.messenger.MessageObject) r2
            int r2 = r2.getId()
        L_0x05e1:
            if (r1 != 0) goto L_0x065a
            boolean[] r3 = r0.endReached
            boolean r3 = r3[r1]
            if (r3 == 0) goto L_0x065a
            long r3 = r0.mergeDialogId
            r5 = 0
            int r7 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r7 == 0) goto L_0x065a
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArrTemp
            boolean r1 = r1.isEmpty()
            if (r1 != 0) goto L_0x0657
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArrTemp
            int r3 = r1.size()
            r4 = 1
            int r3 = r3 - r4
            java.lang.Object r1 = r1.get(r3)
            org.telegram.messenger.MessageObject r1 = (org.telegram.messenger.MessageObject) r1
            long r3 = r1.getDialogId()
            long r5 = r0.mergeDialogId
            int r1 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r1 == 0) goto L_0x0657
            goto L_0x0654
        L_0x0612:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArrTemp
            boolean r2 = r2.isEmpty()
            if (r2 == 0) goto L_0x061c
            r2 = 0
            goto L_0x0629
        L_0x061c:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArrTemp
            r3 = 0
            java.lang.Object r2 = r2.get(r3)
            org.telegram.messenger.MessageObject r2 = (org.telegram.messenger.MessageObject) r2
            int r2 = r2.getId()
        L_0x0629:
            if (r1 != 0) goto L_0x065a
            boolean[] r3 = r0.endReached
            boolean r3 = r3[r1]
            if (r3 == 0) goto L_0x065a
            long r3 = r0.mergeDialogId
            r5 = 0
            int r7 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r7 == 0) goto L_0x065a
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArrTemp
            boolean r1 = r1.isEmpty()
            if (r1 != 0) goto L_0x0657
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArrTemp
            r3 = 0
            java.lang.Object r1 = r1.get(r3)
            org.telegram.messenger.MessageObject r1 = (org.telegram.messenger.MessageObject) r1
            long r3 = r1.getDialogId()
            long r5 = r0.mergeDialogId
            int r1 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r1 == 0) goto L_0x0657
        L_0x0654:
            r1 = 1
            r6 = 0
            goto L_0x065b
        L_0x0657:
            r6 = r2
            r1 = 1
            goto L_0x065b
        L_0x065a:
            r6 = r2
        L_0x065b:
            boolean[] r2 = r0.endReached
            boolean r2 = r2[r1]
            if (r2 != 0) goto L_0x0896
            r2 = 1
            r0.loadingMoreImages = r2
            int r2 = r0.currentAccount
            org.telegram.messenger.MediaDataController r2 = org.telegram.messenger.MediaDataController.getInstance(r2)
            if (r1 != 0) goto L_0x066f
            long r3 = r0.currentDialogId
            goto L_0x0671
        L_0x066f:
            long r3 = r0.mergeDialogId
        L_0x0671:
            r5 = 40
            r7 = 0
            int r8 = r0.sharedMediaType
            r9 = 1
            int r10 = r0.classGuid
            r11 = 0
            r2.loadMedia(r3, r5, r6, r7, r8, r9, r10, r11)
            goto L_0x0896
        L_0x067f:
            r1 = 0
            r0.needSearchImageInArr = r1
            return
        L_0x0683:
            r3 = 0
            r5 = 0
        L_0x0685:
            int r6 = r4.size()
            if (r3 >= r6) goto L_0x06e3
            if (r2 == 0) goto L_0x0695
            int r6 = r4.size()
            r7 = 1
            int r6 = r6 - r7
            int r6 = r6 - r3
            goto L_0x0696
        L_0x0695:
            r6 = r3
        L_0x0696:
            java.lang.Object r6 = r4.get(r6)
            org.telegram.messenger.MessageObject r6 = (org.telegram.messenger.MessageObject) r6
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r7 = r0.imagesByIds
            r7 = r7[r1]
            int r8 = r6.getId()
            int r7 = r7.indexOfKey(r8)
            if (r7 >= 0) goto L_0x06e0
            int r5 = r5 + 1
            boolean r7 = r0.opennedFromMedia
            if (r7 == 0) goto L_0x06cf
            if (r2 == 0) goto L_0x06c8
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            r8 = 0
            r7.add(r8, r6)
            int r7 = r0.startOffset
            r9 = 1
            int r7 = r7 - r9
            r0.startOffset = r7
            int r10 = r0.currentIndex
            int r10 = r10 + r9
            r0.currentIndex = r10
            if (r7 >= 0) goto L_0x06d5
            r0.startOffset = r8
            goto L_0x06d5
        L_0x06c8:
            r8 = 0
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            r7.add(r6)
            goto L_0x06d5
        L_0x06cf:
            r8 = 0
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            r7.add(r8, r6)
        L_0x06d5:
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r7 = r0.imagesByIds
            r7 = r7[r1]
            int r8 = r6.getId()
            r7.put(r8, r6)
        L_0x06e0:
            int r3 = r3 + 1
            goto L_0x0685
        L_0x06e3:
            boolean r1 = r0.opennedFromMedia
            if (r1 == 0) goto L_0x06fb
            if (r5 != 0) goto L_0x0896
            if (r2 != 0) goto L_0x0896
            int r1 = r0.startOffset
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArr
            int r2 = r2.size()
            int r1 = r1 + r2
            r0.totalImagesCount = r1
            r1 = 0
            r0.totalImagesCountMerge = r1
            goto L_0x0896
        L_0x06fb:
            if (r5 == 0) goto L_0x0708
            int r1 = r0.currentIndex
            r2 = -1
            r0.currentIndex = r2
            int r1 = r1 + r5
            r0.setImageIndex(r1)
            goto L_0x0896
        L_0x0708:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            int r1 = r1.size()
            r0.totalImagesCount = r1
            r1 = 0
            r0.totalImagesCountMerge = r1
            goto L_0x0896
        L_0x0715:
            int r2 = org.telegram.messenger.NotificationCenter.emojiLoaded
            if (r1 != r2) goto L_0x0722
            org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r1 = r0.captionTextViewSwitcher
            if (r1 == 0) goto L_0x0896
            r1.invalidateViews()
            goto L_0x0896
        L_0x0722:
            int r2 = org.telegram.messenger.NotificationCenter.filePreparingFailed
            if (r1 != r2) goto L_0x0765
            r2 = 0
            r1 = r23[r2]
            org.telegram.messenger.MessageObject r1 = (org.telegram.messenger.MessageObject) r1
            boolean r3 = r0.loadInitialVideo
            if (r3 == 0) goto L_0x0741
            r0.loadInitialVideo = r2
            org.telegram.ui.Components.RadialProgressView r1 = r0.progressView
            r1.setVisibility(r5)
            android.net.Uri r1 = r0.currentPlayingVideoFile
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$SavedFilterState r3 = r3.savedFilterState
            r0.preparePlayer(r1, r2, r2, r3)
            goto L_0x0896
        L_0x0741:
            boolean r3 = r0.tryStartRequestPreviewOnFinish
            if (r3 == 0) goto L_0x0758
            r0.releasePlayer(r2)
            org.telegram.messenger.MediaController r1 = org.telegram.messenger.MediaController.getInstance()
            org.telegram.messenger.MessageObject r2 = r0.videoPreviewMessageObject
            r3 = 1
            boolean r1 = r1.scheduleVideoConvert(r2, r3)
            r1 = r1 ^ r3
            r0.tryStartRequestPreviewOnFinish = r1
            goto L_0x0896
        L_0x0758:
            org.telegram.messenger.MessageObject r3 = r0.videoPreviewMessageObject
            if (r1 != r3) goto L_0x0896
            r0.requestingPreview = r2
            org.telegram.ui.Components.RadialProgressView r1 = r0.progressView
            r1.setVisibility(r5)
            goto L_0x0896
        L_0x0765:
            r2 = 0
            int r3 = org.telegram.messenger.NotificationCenter.fileNewChunkAvailable
            if (r1 != r3) goto L_0x07bb
            r1 = r23[r2]
            org.telegram.messenger.MessageObject r1 = (org.telegram.messenger.MessageObject) r1
            org.telegram.messenger.MessageObject r2 = r0.videoPreviewMessageObject
            if (r1 != r2) goto L_0x0896
            r1 = 1
            r2 = r23[r1]
            java.lang.String r2 = (java.lang.String) r2
            r3 = 3
            r4 = r23[r3]
            java.lang.Long r4 = (java.lang.Long) r4
            long r3 = r4.longValue()
            r5 = r23[r5]
            java.lang.Float r5 = (java.lang.Float) r5
            float r5 = r5.floatValue()
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r6 = r0.photoProgressViews
            r7 = 0
            r6 = r6[r7]
            r6.setProgress(r5, r1)
            r5 = 0
            int r8 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r8 == 0) goto L_0x0896
            r0.requestingPreview = r7
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r3 = r0.photoProgressViews
            r3 = r3[r7]
            r4 = 1065353216(0x3var_, float:1.0)
            r3.setProgress(r4, r1)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r3 = r0.photoProgressViews
            r3 = r3[r7]
            r4 = 3
            r3.setBackgroundState(r4, r1, r1)
            java.io.File r3 = new java.io.File
            r3.<init>(r2)
            android.net.Uri r2 = android.net.Uri.fromFile(r3)
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$SavedFilterState r3 = r3.savedFilterState
            r0.preparePlayer(r2, r7, r1, r3)
            goto L_0x0896
        L_0x07bb:
            int r2 = org.telegram.messenger.NotificationCenter.messagesDeleted
            if (r1 != r2) goto L_0x0896
            r1 = 2
            r2 = r23[r1]
            java.lang.Boolean r2 = (java.lang.Boolean) r2
            boolean r2 = r2.booleanValue()
            if (r2 == 0) goto L_0x07cb
            return
        L_0x07cb:
            r2 = 1
            r3 = r23[r2]
            java.lang.Long r3 = (java.lang.Long) r3
            long r2 = r3.longValue()
            r4 = 0
            r5 = r23[r4]
            java.util.ArrayList r5 = (java.util.ArrayList) r5
            r4 = 0
            r6 = 0
            r7 = 0
        L_0x07dc:
            if (r4 >= r1) goto L_0x0864
            if (r4 != 0) goto L_0x07e3
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            goto L_0x07e5
        L_0x07e3:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArrTemp
        L_0x07e5:
            if (r4 != 0) goto L_0x07ea
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r8 = r0.imagesByIds
            goto L_0x07ec
        L_0x07ea:
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r8 = r0.imagesByIdsTemp
        L_0x07ec:
            boolean r9 = r1.isEmpty()
            if (r9 != 0) goto L_0x085e
            r9 = r7
            r10 = 2
            r7 = r6
            r6 = 0
        L_0x07f6:
            if (r6 >= r10) goto L_0x085b
            r11 = r8[r6]
            int r11 = r11.size()
            if (r11 <= 0) goto L_0x0858
            r11 = r8[r6]
            r12 = 0
            java.lang.Object r11 = r11.valueAt(r12)
            org.telegram.messenger.MessageObject r11 = (org.telegram.messenger.MessageObject) r11
            org.telegram.tgnet.TLRPC$Message r11 = r11.messageOwner
            org.telegram.tgnet.TLRPC$Peer r11 = r11.peer_id
            long r11 = r11.channel_id
            int r13 = (r11 > r2 ? 1 : (r11 == r2 ? 0 : -1))
            if (r13 != 0) goto L_0x0858
            int r11 = r5.size()
            r12 = 0
        L_0x0818:
            if (r12 >= r11) goto L_0x0858
            java.lang.Object r13 = r5.get(r12)
            java.lang.Integer r13 = (java.lang.Integer) r13
            int r13 = r13.intValue()
            r14 = r8[r6]
            java.lang.Object r15 = r5.get(r12)
            java.lang.Integer r15 = (java.lang.Integer) r15
            int r15 = r15.intValue()
            java.lang.Object r14 = r14.get(r15)
            org.telegram.messenger.MessageObject r14 = (org.telegram.messenger.MessageObject) r14
            if (r14 == 0) goto L_0x0855
            r7 = r8[r6]
            r7.remove(r13)
            r1.remove(r14)
            if (r6 != 0) goto L_0x0849
            int r7 = r0.totalImagesCount
            r13 = 1
            int r7 = r7 - r13
            r0.totalImagesCount = r7
            goto L_0x084f
        L_0x0849:
            r13 = 1
            int r7 = r0.totalImagesCountMerge
            int r7 = r7 - r13
            r0.totalImagesCountMerge = r7
        L_0x084f:
            org.telegram.messenger.MessageObject r7 = r0.currentMessageObject
            if (r14 != r7) goto L_0x0854
            r9 = 1
        L_0x0854:
            r7 = 1
        L_0x0855:
            int r12 = r12 + 1
            goto L_0x0818
        L_0x0858:
            int r6 = r6 + 1
            goto L_0x07f6
        L_0x085b:
            r6 = r7
            r7 = r9
            goto L_0x085f
        L_0x085e:
            r10 = 2
        L_0x085f:
            int r4 = r4 + 1
            r1 = 2
            goto L_0x07dc
        L_0x0864:
            if (r6 == 0) goto L_0x0896
            if (r7 == 0) goto L_0x0870
            org.telegram.ui.PhotoViewer r1 = PipInstance
            if (r0 != r1) goto L_0x0870
            r20.destroyPhotoViewer()
            goto L_0x0896
        L_0x0870:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            boolean r1 = r1.isEmpty()
            if (r1 != 0) goto L_0x0891
            int r1 = r0.currentIndex
            r2 = -1
            r0.currentIndex = r2
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArr
            int r2 = r2.size()
            if (r1 < r2) goto L_0x088d
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            int r1 = r1.size()
            r2 = 1
            int r1 = r1 - r2
        L_0x088d:
            r0.setImageIndex(r1)
            goto L_0x0896
        L_0x0891:
            r1 = 0
            r2 = 1
            r0.closePhoto(r1, r2)
        L_0x0896:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.didReceivedNotification(int, int, java.lang.Object[]):void");
    }

    /* access modifiers changed from: private */
    public void showDownloadAlert() {
        AlertDialog.Builder builder = new AlertDialog.Builder(this.parentActivity, this.resourcesProvider);
        builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
        builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), (DialogInterface.OnClickListener) null);
        MessageObject messageObject = this.currentMessageObject;
        boolean z = false;
        if (messageObject != null && messageObject.isVideo() && FileLoader.getInstance(this.currentMessageObject.currentAccount).isLoadingFile(this.currentFileNames[0])) {
            z = true;
        }
        if (z) {
            builder.setMessage(LocaleController.getString("PleaseStreamDownload", R.string.PleaseStreamDownload));
        } else {
            builder.setMessage(LocaleController.getString("PleaseDownload", R.string.PleaseDownload));
        }
        showAlertDialog(builder);
    }

    /* access modifiers changed from: private */
    /* JADX WARNING: Can't wrap try/catch for region: R(4:41|42|43|44) */
    /* JADX WARNING: Missing exception handler attribute for start block: B:43:0x00cc */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public void onSharePressed() {
        /*
            r10 = this;
            android.app.Activity r0 = r10.parentActivity
            if (r0 == 0) goto L_0x00f7
            boolean r0 = r10.allowShare
            if (r0 != 0) goto L_0x000a
            goto L_0x00f7
        L_0x000a:
            org.telegram.messenger.MessageObject r0 = r10.currentMessageObject     // Catch:{ Exception -> 0x00f3 }
            r1 = 1
            r2 = 0
            r3 = 0
            if (r0 == 0) goto L_0x0045
            boolean r2 = r0.isVideo()     // Catch:{ Exception -> 0x00f3 }
            org.telegram.messenger.MessageObject r0 = r10.currentMessageObject     // Catch:{ Exception -> 0x00f3 }
            org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner     // Catch:{ Exception -> 0x00f3 }
            java.lang.String r0 = r0.attachPath     // Catch:{ Exception -> 0x00f3 }
            boolean r0 = android.text.TextUtils.isEmpty(r0)     // Catch:{ Exception -> 0x00f3 }
            if (r0 != 0) goto L_0x0034
            java.io.File r0 = new java.io.File     // Catch:{ Exception -> 0x00f3 }
            org.telegram.messenger.MessageObject r4 = r10.currentMessageObject     // Catch:{ Exception -> 0x00f3 }
            org.telegram.tgnet.TLRPC$Message r4 = r4.messageOwner     // Catch:{ Exception -> 0x00f3 }
            java.lang.String r4 = r4.attachPath     // Catch:{ Exception -> 0x00f3 }
            r0.<init>(r4)     // Catch:{ Exception -> 0x00f3 }
            boolean r4 = r0.exists()     // Catch:{ Exception -> 0x00f3 }
            if (r4 != 0) goto L_0x0033
            goto L_0x0034
        L_0x0033:
            r3 = r0
        L_0x0034:
            if (r3 != 0) goto L_0x007a
            int r0 = r10.currentAccount     // Catch:{ Exception -> 0x00f3 }
            org.telegram.messenger.FileLoader r0 = org.telegram.messenger.FileLoader.getInstance(r0)     // Catch:{ Exception -> 0x00f3 }
            org.telegram.messenger.MessageObject r3 = r10.currentMessageObject     // Catch:{ Exception -> 0x00f3 }
            org.telegram.tgnet.TLRPC$Message r3 = r3.messageOwner     // Catch:{ Exception -> 0x00f3 }
            java.io.File r3 = r0.getPathToMessage(r3)     // Catch:{ Exception -> 0x00f3 }
            goto L_0x007a
        L_0x0045:
            org.telegram.messenger.ImageLocation r0 = r10.currentFileLocationVideo     // Catch:{ Exception -> 0x00f3 }
            if (r0 == 0) goto L_0x0070
            int r0 = r10.currentAccount     // Catch:{ Exception -> 0x00f3 }
            org.telegram.messenger.FileLoader r0 = org.telegram.messenger.FileLoader.getInstance(r0)     // Catch:{ Exception -> 0x00f3 }
            org.telegram.messenger.ImageLocation r3 = r10.currentFileLocationVideo     // Catch:{ Exception -> 0x00f3 }
            org.telegram.tgnet.TLRPC$FileLocation r3 = getFileLocation(r3)     // Catch:{ Exception -> 0x00f3 }
            org.telegram.messenger.ImageLocation r4 = r10.currentFileLocationVideo     // Catch:{ Exception -> 0x00f3 }
            java.lang.String r4 = getFileLocationExt(r4)     // Catch:{ Exception -> 0x00f3 }
            long r5 = r10.avatarsDialogId     // Catch:{ Exception -> 0x00f3 }
            r7 = 0
            int r9 = (r5 > r7 ? 1 : (r5 == r7 ? 0 : -1))
            if (r9 != 0) goto L_0x006a
            boolean r5 = r10.isEvent     // Catch:{ Exception -> 0x00f3 }
            if (r5 == 0) goto L_0x0068
            goto L_0x006a
        L_0x0068:
            r5 = 0
            goto L_0x006b
        L_0x006a:
            r5 = 1
        L_0x006b:
            java.io.File r3 = r0.getPathToAttach(r3, r4, r5)     // Catch:{ Exception -> 0x00f3 }
            goto L_0x007a
        L_0x0070:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r10.pageBlocksAdapter     // Catch:{ Exception -> 0x00f3 }
            if (r0 == 0) goto L_0x007a
            int r3 = r10.currentIndex     // Catch:{ Exception -> 0x00f3 }
            java.io.File r3 = r0.getFile(r3)     // Catch:{ Exception -> 0x00f3 }
        L_0x007a:
            if (r3 == 0) goto L_0x00ef
            boolean r0 = r3.exists()     // Catch:{ Exception -> 0x00f3 }
            if (r0 == 0) goto L_0x00ef
            android.content.Intent r0 = new android.content.Intent     // Catch:{ Exception -> 0x00f3 }
            java.lang.String r4 = "android.intent.action.SEND"
            r0.<init>(r4)     // Catch:{ Exception -> 0x00f3 }
            if (r2 == 0) goto L_0x0091
            java.lang.String r2 = "video/mp4"
            r0.setType(r2)     // Catch:{ Exception -> 0x00f3 }
            goto L_0x00a2
        L_0x0091:
            org.telegram.messenger.MessageObject r2 = r10.currentMessageObject     // Catch:{ Exception -> 0x00f3 }
            if (r2 == 0) goto L_0x009d
            java.lang.String r2 = r2.getMimeType()     // Catch:{ Exception -> 0x00f3 }
            r0.setType(r2)     // Catch:{ Exception -> 0x00f3 }
            goto L_0x00a2
        L_0x009d:
            java.lang.String r2 = "image/jpeg"
            r0.setType(r2)     // Catch:{ Exception -> 0x00f3 }
        L_0x00a2:
            int r2 = android.os.Build.VERSION.SDK_INT     // Catch:{ Exception -> 0x00f3 }
            r4 = 24
            java.lang.String r5 = "android.intent.extra.STREAM"
            if (r2 < r4) goto L_0x00d4
            android.app.Activity r2 = r10.parentActivity     // Catch:{ Exception -> 0x00cc }
            java.lang.StringBuilder r4 = new java.lang.StringBuilder     // Catch:{ Exception -> 0x00cc }
            r4.<init>()     // Catch:{ Exception -> 0x00cc }
            java.lang.String r6 = org.telegram.messenger.ApplicationLoader.getApplicationId()     // Catch:{ Exception -> 0x00cc }
            r4.append(r6)     // Catch:{ Exception -> 0x00cc }
            java.lang.String r6 = ".provider"
            r4.append(r6)     // Catch:{ Exception -> 0x00cc }
            java.lang.String r4 = r4.toString()     // Catch:{ Exception -> 0x00cc }
            android.net.Uri r2 = androidx.core.content.FileProvider.getUriForFile(r2, r4, r3)     // Catch:{ Exception -> 0x00cc }
            r0.putExtra(r5, r2)     // Catch:{ Exception -> 0x00cc }
            r0.setFlags(r1)     // Catch:{ Exception -> 0x00cc }
            goto L_0x00db
        L_0x00cc:
            android.net.Uri r1 = android.net.Uri.fromFile(r3)     // Catch:{ Exception -> 0x00f3 }
            r0.putExtra(r5, r1)     // Catch:{ Exception -> 0x00f3 }
            goto L_0x00db
        L_0x00d4:
            android.net.Uri r1 = android.net.Uri.fromFile(r3)     // Catch:{ Exception -> 0x00f3 }
            r0.putExtra(r5, r1)     // Catch:{ Exception -> 0x00f3 }
        L_0x00db:
            android.app.Activity r1 = r10.parentActivity     // Catch:{ Exception -> 0x00f3 }
            java.lang.String r2 = "ShareFile"
            int r3 = org.telegram.messenger.R.string.ShareFile     // Catch:{ Exception -> 0x00f3 }
            java.lang.String r2 = org.telegram.messenger.LocaleController.getString(r2, r3)     // Catch:{ Exception -> 0x00f3 }
            android.content.Intent r0 = android.content.Intent.createChooser(r0, r2)     // Catch:{ Exception -> 0x00f3 }
            r2 = 500(0x1f4, float:7.0E-43)
            r1.startActivityForResult(r0, r2)     // Catch:{ Exception -> 0x00f3 }
            goto L_0x00f7
        L_0x00ef:
            r10.showDownloadAlert()     // Catch:{ Exception -> 0x00f3 }
            goto L_0x00f7
        L_0x00f3:
            r0 = move-exception
            org.telegram.messenger.FileLog.e((java.lang.Throwable) r0)
        L_0x00f7:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.onSharePressed():void");
    }

    /* access modifiers changed from: private */
    public void setScaleToFill() {
        float bitmapWidth = (float) this.centerImage.getBitmapWidth();
        float bitmapHeight = (float) this.centerImage.getBitmapHeight();
        if (bitmapWidth != 0.0f && bitmapHeight != 0.0f) {
            float containerViewWidth = (float) getContainerViewWidth();
            float containerViewHeight = (float) getContainerViewHeight();
            float min = Math.min(containerViewHeight / bitmapHeight, containerViewWidth / bitmapWidth);
            float max = Math.max(containerViewWidth / ((float) ((int) (bitmapWidth * min))), containerViewHeight / ((float) ((int) (bitmapHeight * min))));
            this.scale = max;
            updateMinMax(max);
        }
    }

    public void setParentAlert(ChatAttachAlert chatAttachAlert) {
        this.parentAlert = chatAttachAlert;
    }

    public void setParentActivity(Activity activity, Theme.ResourcesProvider resourcesProvider2) {
        setParentActivity(activity, (BaseFragment) null, resourcesProvider2);
    }

    public void setParentActivity(BaseFragment baseFragment) {
        setParentActivity(baseFragment, (Theme.ResourcesProvider) null);
    }

    public void setParentActivity(BaseFragment baseFragment, Theme.ResourcesProvider resourcesProvider2) {
        setParentActivity((Activity) null, baseFragment, resourcesProvider2);
    }

    public void setParentActivity(Activity activity, BaseFragment baseFragment, Theme.ResourcesProvider resourcesProvider2) {
        String str;
        final Theme.ResourcesProvider resourcesProvider3 = resourcesProvider2;
        Activity parentActivity2 = activity != null ? activity : baseFragment.getParentActivity();
        Theme.createChatResources(parentActivity2, false);
        this.resourcesProvider = resourcesProvider3;
        this.parentFragment = baseFragment;
        int i = UserConfig.selectedAccount;
        this.currentAccount = i;
        this.centerImage.setCurrentAccount(i);
        this.leftImage.setCurrentAccount(this.currentAccount);
        this.rightImage.setCurrentAccount(this.currentAccount);
        PhotoViewerCaptionEnterView photoViewerCaptionEnterView = this.captionEditText;
        if (photoViewerCaptionEnterView != null) {
            photoViewerCaptionEnterView.currentAccount = UserConfig.selectedAccount;
        }
        if (this.parentActivity == parentActivity2 || parentActivity2 == null) {
            updateColors();
            return;
        }
        this.inBubbleMode = parentActivity2 instanceof BubbleActivity;
        this.parentActivity = parentActivity2;
        this.activityContext = new ContextThemeWrapper(this.parentActivity, R.style.Theme_TMessages);
        this.touchSlop = ViewConfiguration.get(this.parentActivity).getScaledTouchSlop();
        if (progressDrawables == null) {
            progressDrawables = new Drawable[]{ContextCompat.getDrawable(this.parentActivity, R.drawable.circle_big), ContextCompat.getDrawable(this.parentActivity, R.drawable.cancel_big), ContextCompat.getDrawable(this.parentActivity, R.drawable.load_big)};
        }
        this.scroller = new Scroller(parentActivity2);
        AnonymousClass10 r1 = new FrameLayout(parentActivity2) {
            public boolean onInterceptTouchEvent(MotionEvent motionEvent) {
                return PhotoViewer.this.isVisible && super.onInterceptTouchEvent(motionEvent);
            }

            public boolean onTouchEvent(MotionEvent motionEvent) {
                return PhotoViewer.this.isVisible && PhotoViewer.this.onTouchEvent(motionEvent);
            }

            public boolean dispatchKeyEvent(KeyEvent keyEvent) {
                keyEvent.getKeyCode();
                if (!PhotoViewer.this.muteVideo && PhotoViewer.this.sendPhotoType != 1 && PhotoViewer.this.isCurrentVideo && PhotoViewer.this.videoPlayer != null && keyEvent.getRepeatCount() == 0 && keyEvent.getAction() == 0 && (keyEvent.getKeyCode() == 24 || keyEvent.getKeyCode() == 25)) {
                    PhotoViewer.this.videoPlayer.setVolume(1.0f);
                }
                return super.dispatchKeyEvent(keyEvent);
            }

            /* JADX WARNING: Code restructure failed: missing block: B:13:0x0020, code lost:
                if (r0 != 6) goto L_0x0032;
             */
            /* Code decompiled incorrectly, please refer to instructions dump. */
            public boolean dispatchTouchEvent(android.view.MotionEvent r3) {
                /*
                    r2 = this;
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    boolean r0 = r0.videoPlayerControlVisible
                    if (r0 == 0) goto L_0x0032
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    boolean r0 = r0.isPlaying
                    if (r0 == 0) goto L_0x0032
                    int r0 = r3.getActionMasked()
                    if (r0 == 0) goto L_0x0029
                    r1 = 1
                    if (r0 == r1) goto L_0x0023
                    r1 = 3
                    if (r0 == r1) goto L_0x0023
                    r1 = 5
                    if (r0 == r1) goto L_0x0029
                    r1 = 6
                    if (r0 == r1) goto L_0x0023
                    goto L_0x0032
                L_0x0023:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.scheduleActionBarHide()
                    goto L_0x0032
                L_0x0029:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    java.lang.Runnable r0 = r0.hideActionBarRunnable
                    org.telegram.messenger.AndroidUtilities.cancelRunOnUIThread(r0)
                L_0x0032:
                    boolean r3 = super.dispatchTouchEvent(r3)
                    return r3
                */
                throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.AnonymousClass10.dispatchTouchEvent(android.view.MotionEvent):boolean");
            }

            /* access modifiers changed from: protected */
            public boolean drawChild(Canvas canvas, View view, long j) {
                try {
                    return super.drawChild(canvas, view, j);
                } catch (Throwable unused) {
                    return false;
                }
            }

            /* access modifiers changed from: protected */
            public void onMeasure(int i, int i2) {
                int i3;
                int stableInsetBottom;
                int size = View.MeasureSpec.getSize(i);
                int size2 = View.MeasureSpec.getSize(i2);
                if (Build.VERSION.SDK_INT < 21 || PhotoViewer.this.lastInsets == null) {
                    int i4 = AndroidUtilities.displaySize.y;
                    if (size2 > i4) {
                        size2 = i4;
                    }
                } else {
                    WindowInsets windowInsets = (WindowInsets) PhotoViewer.this.lastInsets;
                    if (!PhotoViewer.this.inBubbleMode) {
                        if (AndroidUtilities.incorrectDisplaySizeFix) {
                            int i5 = AndroidUtilities.displaySize.y;
                            if (size2 > i5) {
                                size2 = i5;
                            }
                            size2 += AndroidUtilities.statusBarHeight;
                        } else if (windowInsets.getStableInsetBottom() >= 0 && (i3 = AndroidUtilities.statusBarHeight) >= 0 && (stableInsetBottom = (size2 - i3) - windowInsets.getStableInsetBottom()) > 0 && stableInsetBottom < 4096) {
                            AndroidUtilities.displaySize.y = stableInsetBottom;
                        }
                    }
                    int systemWindowInsetBottom = windowInsets.getSystemWindowInsetBottom();
                    if (PhotoViewer.this.captionEditText.isPopupShowing()) {
                        systemWindowInsetBottom -= PhotoViewer.this.containerView.getKeyboardHeight();
                    }
                    size2 -= systemWindowInsetBottom;
                }
                int paddingLeft = size - (getPaddingLeft() + getPaddingRight());
                int paddingBottom = size2 - getPaddingBottom();
                setMeasuredDimension(paddingLeft, paddingBottom);
                ViewGroup.LayoutParams layoutParams = PhotoViewer.this.animatingImageView.getLayoutParams();
                PhotoViewer.this.animatingImageView.measure(View.MeasureSpec.makeMeasureSpec(layoutParams.width, Integer.MIN_VALUE), View.MeasureSpec.makeMeasureSpec(layoutParams.height, Integer.MIN_VALUE));
                PhotoViewer.this.containerView.measure(View.MeasureSpec.makeMeasureSpec(paddingLeft, NUM), View.MeasureSpec.makeMeasureSpec(paddingBottom, NUM));
                PhotoViewer.this.navigationBar.measure(View.MeasureSpec.makeMeasureSpec(paddingLeft, NUM), View.MeasureSpec.makeMeasureSpec(PhotoViewer.this.navigationBarHeight, NUM));
            }

            /* access modifiers changed from: protected */
            public void onLayout(boolean z, int i, int i2, int i3, int i4) {
                PhotoViewer.this.animatingImageView.layout(getPaddingLeft(), 0, getPaddingLeft() + PhotoViewer.this.animatingImageView.getMeasuredWidth(), PhotoViewer.this.animatingImageView.getMeasuredHeight());
                PhotoViewer.this.containerView.layout(getPaddingLeft(), 0, getPaddingLeft() + PhotoViewer.this.containerView.getMeasuredWidth(), PhotoViewer.this.containerView.getMeasuredHeight());
                PhotoViewer.this.navigationBar.layout(getPaddingLeft(), PhotoViewer.this.containerView.getMeasuredHeight(), PhotoViewer.this.navigationBar.getMeasuredWidth(), PhotoViewer.this.containerView.getMeasuredHeight() + PhotoViewer.this.navigationBar.getMeasuredHeight());
                boolean unused = PhotoViewer.this.wasLayout = true;
                if (z) {
                    if (!PhotoViewer.this.dontResetZoomOnFirstLayout) {
                        float unused2 = PhotoViewer.this.scale = 1.0f;
                        float unused3 = PhotoViewer.this.translationX = 0.0f;
                        float unused4 = PhotoViewer.this.translationY = 0.0f;
                        PhotoViewer photoViewer = PhotoViewer.this;
                        photoViewer.updateMinMax(photoViewer.scale);
                    }
                    if (PhotoViewer.this.checkImageView != null) {
                        PhotoViewer.this.checkImageView.post(new PhotoViewer$10$$ExternalSyntheticLambda0(this));
                    }
                }
                if (PhotoViewer.this.dontResetZoomOnFirstLayout) {
                    PhotoViewer.this.setScaleToFill();
                    boolean unused5 = PhotoViewer.this.dontResetZoomOnFirstLayout = false;
                }
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onLayout$0() {
                FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) PhotoViewer.this.checkImageView.getLayoutParams();
                ((WindowManager) ApplicationLoader.applicationContext.getSystemService("window")).getDefaultDisplay().getRotation();
                int i = 0;
                int currentActionBarHeight = ((ActionBar.getCurrentActionBarHeight() - AndroidUtilities.dp(34.0f)) / 2) + (PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0);
                if (currentActionBarHeight != layoutParams.topMargin) {
                    layoutParams.topMargin = currentActionBarHeight;
                    PhotoViewer.this.checkImageView.setLayoutParams(layoutParams);
                }
                FrameLayout.LayoutParams layoutParams2 = (FrameLayout.LayoutParams) PhotoViewer.this.photosCounterView.getLayoutParams();
                int currentActionBarHeight2 = (ActionBar.getCurrentActionBarHeight() - AndroidUtilities.dp(40.0f)) / 2;
                if (PhotoViewer.this.isStatusBarVisible()) {
                    i = AndroidUtilities.statusBarHeight;
                }
                int i2 = currentActionBarHeight2 + i;
                if (layoutParams2.topMargin != i2) {
                    layoutParams2.topMargin = i2;
                    PhotoViewer.this.photosCounterView.setLayoutParams(layoutParams2);
                }
            }

            /* access modifiers changed from: protected */
            public void onAttachedToWindow() {
                super.onAttachedToWindow();
                PhotoViewer.this.centerImage.onAttachedToWindow();
                PhotoViewer.this.leftImage.onAttachedToWindow();
                PhotoViewer.this.rightImage.onAttachedToWindow();
                boolean unused = PhotoViewer.this.attachedToWindow = true;
            }

            /* access modifiers changed from: protected */
            public void onDetachedFromWindow() {
                super.onDetachedFromWindow();
                PhotoViewer.this.centerImage.onDetachedFromWindow();
                PhotoViewer.this.leftImage.onDetachedFromWindow();
                PhotoViewer.this.rightImage.onDetachedFromWindow();
                boolean unused = PhotoViewer.this.attachedToWindow = false;
                boolean unused2 = PhotoViewer.this.wasLayout = false;
            }

            public boolean dispatchKeyEventPreIme(KeyEvent keyEvent) {
                if (keyEvent == null || keyEvent.getKeyCode() != 4 || keyEvent.getAction() != 1) {
                    return super.dispatchKeyEventPreIme(keyEvent);
                }
                if (PhotoViewer.this.captionEditText.isPopupShowing() || PhotoViewer.this.captionEditText.isKeyboardVisible()) {
                    PhotoViewer.this.closeCaptionEnter(true);
                    return false;
                }
                PhotoViewer.getInstance().closePhoto(true, false);
                return true;
            }

            /* access modifiers changed from: protected */
            public void onDraw(Canvas canvas) {
                if (Build.VERSION.SDK_INT >= 21 && PhotoViewer.this.isVisible && PhotoViewer.this.lastInsets != null) {
                    PhotoViewer.this.blackPaint.setAlpha(PhotoViewer.this.backgroundDrawable.getAlpha());
                    canvas.drawRect(0.0f, (float) getMeasuredHeight(), (float) getMeasuredWidth(), (float) (getMeasuredHeight() + ((WindowInsets) PhotoViewer.this.lastInsets).getSystemWindowInsetBottom()), PhotoViewer.this.blackPaint);
                }
            }

            /* access modifiers changed from: protected */
            public void dispatchDraw(Canvas canvas) {
                super.dispatchDraw(canvas);
                if (PhotoViewer.this.parentChatActivity != null) {
                    UndoView undoView = PhotoViewer.this.parentChatActivity.getUndoView();
                    if (undoView.getVisibility() == 0) {
                        canvas.save();
                        View view = (View) undoView.getParent();
                        canvas.clipRect(view.getX(), view.getY(), view.getX() + ((float) view.getWidth()), view.getY() + ((float) view.getHeight()));
                        canvas.translate(undoView.getX(), undoView.getY());
                        undoView.draw(canvas);
                        canvas.restore();
                        invalidate();
                    }
                }
            }
        };
        this.windowView = r1;
        r1.setBackgroundDrawable(this.backgroundDrawable);
        this.windowView.setFocusable(false);
        ClippingImageView clippingImageView = new ClippingImageView(parentActivity2);
        this.animatingImageView = clippingImageView;
        clippingImageView.setAnimationValues(this.animationValues);
        this.windowView.addView(this.animatingImageView, LayoutHelper.createFrame(40, 40.0f));
        FrameLayoutDrawer frameLayoutDrawer = new FrameLayoutDrawer(parentActivity2);
        this.containerView = frameLayoutDrawer;
        frameLayoutDrawer.setFocusable(false);
        this.containerView.setClipChildren(true);
        this.containerView.setClipToPadding(true);
        this.windowView.setClipChildren(false);
        this.windowView.setClipToPadding(false);
        this.windowView.addView(this.containerView, LayoutHelper.createFrame(-1, -1, 51));
        int i2 = Build.VERSION.SDK_INT;
        if (i2 >= 21) {
            this.containerView.setFitsSystemWindows(true);
            this.containerView.setOnApplyWindowInsetsListener(new PhotoViewer$$ExternalSyntheticLambda16(this));
            this.containerView.setSystemUiVisibility(1792);
        }
        WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams();
        this.windowLayoutParams = layoutParams;
        layoutParams.height = -1;
        layoutParams.format = -3;
        layoutParams.width = -1;
        layoutParams.gravity = 51;
        layoutParams.type = 99;
        if (i2 >= 28) {
            layoutParams.layoutInDisplayCutoutMode = 1;
        }
        if (i2 >= 21) {
            layoutParams.flags = -NUM;
        } else {
            layoutParams.flags = 131072;
        }
        PaintingOverlay paintingOverlay2 = new PaintingOverlay(this.parentActivity);
        this.paintingOverlay = paintingOverlay2;
        this.containerView.addView(paintingOverlay2, LayoutHelper.createFrame(-2, -2.0f));
        PaintingOverlay paintingOverlay3 = new PaintingOverlay(this.parentActivity);
        this.leftPaintingOverlay = paintingOverlay3;
        this.containerView.addView(paintingOverlay3, LayoutHelper.createFrame(-2, -2.0f));
        PaintingOverlay paintingOverlay4 = new PaintingOverlay(this.parentActivity);
        this.rightPaintingOverlay = paintingOverlay4;
        this.containerView.addView(paintingOverlay4, LayoutHelper.createFrame(-2, -2.0f));
        AnonymousClass11 r12 = new ActionBar(parentActivity2) {
            public void setAlpha(float f) {
                super.setAlpha(f);
                PhotoViewer.this.containerView.invalidate();
            }
        };
        this.actionBar = r12;
        r12.setOverlayTitleAnimation(true);
        this.actionBar.setTitleColor(-1);
        this.actionBar.setSubtitleColor(-1);
        this.actionBar.setBackgroundColor(NUM);
        this.actionBar.setOccupyStatusBar(isStatusBarVisible());
        this.actionBar.setItemsBackgroundColor(NUM, false);
        this.actionBar.setBackButtonImage(R.drawable.ic_ab_back);
        this.actionBar.setTitle(LocaleController.formatString("Of", R.string.Of, 1, 1));
        this.containerView.addView(this.actionBar, LayoutHelper.createFrame(-1, -2.0f));
        this.actionBar.setActionBarMenuOnItemClick(new ActionBar.ActionBarMenuOnItemClick() {
            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onItemClick$0(boolean z) {
                BulletinFactory.createSaveToGalleryBulletin(PhotoViewer.this.containerView, z, -NUM, -1).show();
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onItemClick$1(DialogInterface dialogInterface, int i) {
                ArrayList arrayList = new ArrayList(1);
                arrayList.add(PhotoViewer.this.currentMessageObject);
                PhotoViewer.this.showShareAlert(arrayList);
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onItemClick$2(ArrayList arrayList, DialogInterface dialogInterface, int i) {
                PhotoViewer.this.showShareAlert(arrayList);
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onItemClick$4(ArrayList arrayList, ChatActivity chatActivity, DialogsActivity dialogsActivity, ArrayList arrayList2, CharSequence charSequence, boolean z) {
                ArrayList arrayList3 = arrayList2;
                if (arrayList2.size() > 1 || ((Long) arrayList3.get(0)).longValue() == UserConfig.getInstance(PhotoViewer.this.currentAccount).getClientUserId() || charSequence != null) {
                    ArrayList arrayList4 = arrayList;
                    for (int i = 0; i < arrayList2.size(); i++) {
                        long longValue = ((Long) arrayList3.get(i)).longValue();
                        if (charSequence != null) {
                            SendMessagesHelper.getInstance(PhotoViewer.this.currentAccount).sendMessage(charSequence.toString(), longValue, (MessageObject) null, (MessageObject) null, (TLRPC$WebPage) null, true, (ArrayList<TLRPC$MessageEntity>) null, (TLRPC$ReplyMarkup) null, (HashMap<String, String>) null, true, 0, (MessageObject.SendAnimationData) null, false);
                        }
                        SendMessagesHelper.getInstance(PhotoViewer.this.currentAccount).sendMessage((ArrayList<MessageObject>) arrayList, longValue, false, false, true, 0);
                    }
                    dialogsActivity.finishFragment();
                    if (chatActivity == null) {
                        return;
                    }
                    if (arrayList2.size() == 1) {
                        chatActivity.getUndoView().showWithAction(((Long) arrayList3.get(0)).longValue(), 53, (Object) Integer.valueOf(arrayList.size()));
                    } else {
                        chatActivity.getUndoView().showWithAction(0, 53, (Object) Integer.valueOf(arrayList.size()), (Object) Integer.valueOf(arrayList2.size()), (Runnable) null, (Runnable) null);
                    }
                } else {
                    long longValue2 = ((Long) arrayList3.get(0)).longValue();
                    Bundle bundle = new Bundle();
                    bundle.putBoolean("scrollToTopOnResume", true);
                    if (DialogObject.isEncryptedDialog(longValue2)) {
                        bundle.putInt("enc_id", DialogObject.getEncryptedChatId(longValue2));
                    } else if (DialogObject.isUserDialog(longValue2)) {
                        bundle.putLong("user_id", longValue2);
                    } else {
                        bundle.putLong("chat_id", -longValue2);
                    }
                    NotificationCenter.getInstance(PhotoViewer.this.currentAccount).postNotificationName(NotificationCenter.closeChats, new Object[0]);
                    ChatActivity chatActivity2 = new ChatActivity(bundle);
                    if (((LaunchActivity) PhotoViewer.this.parentActivity).presentFragment(chatActivity2, true, false)) {
                        chatActivity2.showFieldPanelForForward(true, arrayList);
                    } else {
                        dialogsActivity.finishFragment();
                    }
                }
            }

            /* access modifiers changed from: private */
            public static /* synthetic */ void lambda$onItemClick$5(boolean[] zArr, View view) {
                zArr[0] = !zArr[0];
                ((CheckBoxCell) view).setChecked(zArr[0], true);
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onItemClick$6(boolean[] zArr, DialogInterface dialogInterface, int i) {
                TLRPC$EncryptedChat tLRPC$EncryptedChat;
                ArrayList arrayList;
                if (!PhotoViewer.this.imagesArr.isEmpty()) {
                    if (PhotoViewer.this.currentIndex >= 0 && PhotoViewer.this.currentIndex < PhotoViewer.this.imagesArr.size()) {
                        MessageObject messageObject = (MessageObject) PhotoViewer.this.imagesArr.get(PhotoViewer.this.currentIndex);
                        if (messageObject.isSent()) {
                            PhotoViewer.this.closePhoto(false, false);
                            ArrayList arrayList2 = new ArrayList();
                            if (PhotoViewer.this.slideshowMessageId != 0) {
                                arrayList2.add(Integer.valueOf(PhotoViewer.this.slideshowMessageId));
                            } else {
                                arrayList2.add(Integer.valueOf(messageObject.getId()));
                            }
                            if (!DialogObject.isEncryptedDialog(messageObject.getDialogId()) || messageObject.messageOwner.random_id == 0) {
                                arrayList = null;
                                tLRPC$EncryptedChat = null;
                            } else {
                                ArrayList arrayList3 = new ArrayList();
                                arrayList3.add(Long.valueOf(messageObject.messageOwner.random_id));
                                arrayList = arrayList3;
                                tLRPC$EncryptedChat = MessagesController.getInstance(PhotoViewer.this.currentAccount).getEncryptedChat(Integer.valueOf(DialogObject.getEncryptedChatId(messageObject.getDialogId())));
                            }
                            MessagesController.getInstance(PhotoViewer.this.currentAccount).deleteMessages(arrayList2, arrayList, tLRPC$EncryptedChat, messageObject.getDialogId(), zArr[0], messageObject.scheduled);
                        }
                    }
                } else if (!PhotoViewer.this.avatarsArr.isEmpty()) {
                    if (PhotoViewer.this.currentIndex >= 0 && PhotoViewer.this.currentIndex < PhotoViewer.this.avatarsArr.size()) {
                        TLRPC$Message tLRPC$Message = (TLRPC$Message) PhotoViewer.this.imagesArrMessages.get(PhotoViewer.this.currentIndex);
                        if (tLRPC$Message != null) {
                            ArrayList arrayList4 = new ArrayList();
                            arrayList4.add(Integer.valueOf(tLRPC$Message.id));
                            MessagesController.getInstance(PhotoViewer.this.currentAccount).deleteMessages(arrayList4, (ArrayList<Long>) null, (TLRPC$EncryptedChat) null, MessageObject.getDialogId(tLRPC$Message), true, false);
                            NotificationCenter.getInstance(PhotoViewer.this.currentAccount).postNotificationName(NotificationCenter.reloadDialogPhotos, new Object[0]);
                        }
                        if (PhotoViewer.this.isCurrentAvatarSet()) {
                            if (PhotoViewer.this.avatarsDialogId > 0) {
                                MessagesController.getInstance(PhotoViewer.this.currentAccount).deleteUserPhoto((TLRPC$InputPhoto) null);
                            } else {
                                MessagesController.getInstance(PhotoViewer.this.currentAccount).changeChatAvatar(-PhotoViewer.this.avatarsDialogId, (TLRPC$TL_inputChatPhoto) null, (TLRPC$InputFile) null, (TLRPC$InputFile) null, 0.0d, (String) null, (TLRPC$FileLocation) null, (TLRPC$FileLocation) null, (Runnable) null);
                            }
                            PhotoViewer.this.closePhoto(false, false);
                            return;
                        }
                        TLRPC$Photo tLRPC$Photo = (TLRPC$Photo) PhotoViewer.this.avatarsArr.get(PhotoViewer.this.currentIndex);
                        if (tLRPC$Photo != null) {
                            TLRPC$TL_inputPhoto tLRPC$TL_inputPhoto = new TLRPC$TL_inputPhoto();
                            tLRPC$TL_inputPhoto.id = tLRPC$Photo.id;
                            tLRPC$TL_inputPhoto.access_hash = tLRPC$Photo.access_hash;
                            byte[] bArr = tLRPC$Photo.file_reference;
                            tLRPC$TL_inputPhoto.file_reference = bArr;
                            if (bArr == null) {
                                tLRPC$TL_inputPhoto.file_reference = new byte[0];
                            }
                            if (PhotoViewer.this.avatarsDialogId > 0) {
                                MessagesController.getInstance(PhotoViewer.this.currentAccount).deleteUserPhoto(tLRPC$TL_inputPhoto);
                            }
                            MessagesStorage.getInstance(PhotoViewer.this.currentAccount).clearUserPhoto(PhotoViewer.this.avatarsDialogId, tLRPC$Photo.id);
                            PhotoViewer.this.imagesArrLocations.remove(PhotoViewer.this.currentIndex);
                            PhotoViewer.this.imagesArrLocationsSizes.remove(PhotoViewer.this.currentIndex);
                            PhotoViewer.this.imagesArrLocationsVideo.remove(PhotoViewer.this.currentIndex);
                            PhotoViewer.this.imagesArrMessages.remove(PhotoViewer.this.currentIndex);
                            PhotoViewer.this.avatarsArr.remove(PhotoViewer.this.currentIndex);
                            if (PhotoViewer.this.imagesArrLocations.isEmpty()) {
                                PhotoViewer.this.closePhoto(false, false);
                            } else {
                                int access$13500 = PhotoViewer.this.currentIndex;
                                if (access$13500 >= PhotoViewer.this.avatarsArr.size()) {
                                    access$13500 = PhotoViewer.this.avatarsArr.size() - 1;
                                }
                                int unused = PhotoViewer.this.currentIndex = -1;
                                PhotoViewer.this.setImageIndex(access$13500);
                            }
                            if (tLRPC$Message == null) {
                                NotificationCenter.getInstance(PhotoViewer.this.currentAccount).postNotificationName(NotificationCenter.reloadDialogPhotos, new Object[0]);
                            }
                        }
                    }
                } else if (!PhotoViewer.this.secureDocuments.isEmpty() && PhotoViewer.this.placeProvider != null) {
                    PhotoViewer.this.secureDocuments.remove(PhotoViewer.this.currentIndex);
                    PhotoViewer.this.placeProvider.deleteImageAtIndex(PhotoViewer.this.currentIndex);
                    if (PhotoViewer.this.secureDocuments.isEmpty()) {
                        PhotoViewer.this.closePhoto(false, false);
                        return;
                    }
                    int access$135002 = PhotoViewer.this.currentIndex;
                    if (access$135002 >= PhotoViewer.this.secureDocuments.size()) {
                        access$135002 = PhotoViewer.this.secureDocuments.size() - 1;
                    }
                    int unused2 = PhotoViewer.this.currentIndex = -1;
                    PhotoViewer.this.setImageIndex(access$135002);
                }
            }

            /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r9v1, resolved type: java.lang.String} */
            /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r9v3, resolved type: org.telegram.messenger.MessageObject$GroupedMessages} */
            /* JADX WARNING: type inference failed for: r9v0 */
            /* JADX WARNING: type inference failed for: r9v7 */
            /* JADX WARNING: type inference failed for: r9v11 */
            /* JADX WARNING: type inference failed for: r9v12 */
            /* JADX WARNING: type inference failed for: r9v15 */
            /* JADX WARNING: Multi-variable type inference failed */
            /* JADX WARNING: Removed duplicated region for block: B:105:0x02ea  */
            /* JADX WARNING: Removed duplicated region for block: B:140:0x041c  */
            /* JADX WARNING: Removed duplicated region for block: B:157:0x04c8  */
            /* JADX WARNING: Removed duplicated region for block: B:158:0x04d6  */
            /* JADX WARNING: Removed duplicated region for block: B:190:0x05b9  */
            /* JADX WARNING: Removed duplicated region for block: B:236:0x072f  */
            /* JADX WARNING: Removed duplicated region for block: B:373:? A[RETURN, SYNTHETIC] */
            /* JADX WARNING: Removed duplicated region for block: B:50:0x0151  */
            /* JADX WARNING: Removed duplicated region for block: B:51:0x0167  */
            /* Code decompiled incorrectly, please refer to instructions dump. */
            public void onItemClick(int r23) {
                /*
                    r22 = this;
                    r7 = r22
                    r0 = r23
                    r1 = -1
                    r2 = 1
                    java.lang.Integer r3 = java.lang.Integer.valueOf(r2)
                    r4 = 0
                    if (r0 != r1) goto L_0x003a
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    boolean r0 = r0.needCaptionLayout
                    if (r0 == 0) goto L_0x0033
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.Components.PhotoViewerCaptionEnterView r0 = r0.captionEditText
                    boolean r0 = r0.isPopupShowing()
                    if (r0 != 0) goto L_0x002d
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.Components.PhotoViewerCaptionEnterView r0 = r0.captionEditText
                    boolean r0 = r0.isKeyboardVisible()
                    if (r0 == 0) goto L_0x0033
                L_0x002d:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.closeCaptionEnter(r4)
                    return
                L_0x0033:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.closePhoto(r2, r4)
                    goto L_0x0c8a
                L_0x003a:
                    r5 = 0
                    r8 = 4
                    r9 = 0
                    if (r0 != r2) goto L_0x016e
                    int r0 = android.os.Build.VERSION.SDK_INT
                    r1 = 23
                    if (r0 < r1) goto L_0x006a
                    r1 = 28
                    if (r0 <= r1) goto L_0x004e
                    boolean r0 = org.telegram.messenger.BuildVars.NO_SCOPED_STORAGE
                    if (r0 == 0) goto L_0x006a
                L_0x004e:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r0 = r0.parentActivity
                    java.lang.String r1 = "android.permission.WRITE_EXTERNAL_STORAGE"
                    int r0 = r0.checkSelfPermission(r1)
                    if (r0 == 0) goto L_0x006a
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r0 = r0.parentActivity
                    java.lang.String[] r2 = new java.lang.String[r2]
                    r2[r4] = r1
                    r0.requestPermissions(r2, r8)
                    return
                L_0x006a:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    if (r0 == 0) goto L_0x00df
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner
                    org.telegram.tgnet.TLRPC$MessageMedia r0 = org.telegram.messenger.MessageObject.getMedia(r0)
                    boolean r0 = r0 instanceof org.telegram.tgnet.TLRPC$TL_messageMediaWebPage
                    if (r0 == 0) goto L_0x00bd
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner
                    org.telegram.tgnet.TLRPC$MessageMedia r0 = org.telegram.messenger.MessageObject.getMedia(r0)
                    org.telegram.tgnet.TLRPC$WebPage r0 = r0.webpage
                    if (r0 == 0) goto L_0x00bd
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner
                    org.telegram.tgnet.TLRPC$MessageMedia r0 = org.telegram.messenger.MessageObject.getMedia(r0)
                    org.telegram.tgnet.TLRPC$WebPage r0 = r0.webpage
                    org.telegram.tgnet.TLRPC$Document r0 = r0.document
                    if (r0 != 0) goto L_0x00bd
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    int r1 = r0.currentIndex
                    org.telegram.tgnet.TLObject r0 = r0.getFileLocation(r1, r9)
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    int r1 = r1.currentAccount
                    org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
                    java.io.File r0 = r1.getPathToAttach(r0, r2)
                    goto L_0x00d3
                L_0x00bd:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    int r0 = r0.currentAccount
                    org.telegram.messenger.FileLoader r0 = org.telegram.messenger.FileLoader.getInstance(r0)
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r1 = r1.currentMessageObject
                    org.telegram.tgnet.TLRPC$Message r1 = r1.messageOwner
                    java.io.File r0 = r0.getPathToMessage(r1)
                L_0x00d3:
                    r9 = r0
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    boolean r4 = r0.isVideo()
                    goto L_0x0146
                L_0x00df:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r0 = r0.currentFileLocationVideo
                    if (r0 == 0) goto L_0x011e
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    int r0 = r0.currentAccount
                    org.telegram.messenger.FileLoader r0 = org.telegram.messenger.FileLoader.getInstance(r0)
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r1 = r1.currentFileLocationVideo
                    org.telegram.tgnet.TLRPC$FileLocation r1 = org.telegram.ui.PhotoViewer.getFileLocation(r1)
                    org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r3 = r3.currentFileLocationVideo
                    java.lang.String r3 = org.telegram.ui.PhotoViewer.getFileLocationExt(r3)
                    org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                    long r8 = r8.avatarsDialogId
                    int r10 = (r8 > r5 ? 1 : (r8 == r5 ? 0 : -1))
                    if (r10 != 0) goto L_0x0119
                    org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                    boolean r5 = r5.isEvent
                    if (r5 == 0) goto L_0x0118
                    goto L_0x0119
                L_0x0118:
                    r2 = 0
                L_0x0119:
                    java.io.File r9 = r0.getPathToAttach(r1, r3, r2)
                    goto L_0x0148
                L_0x011e:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r0.pageBlocksAdapter
                    if (r0 == 0) goto L_0x0148
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r0.pageBlocksAdapter
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    int r1 = r1.currentIndex
                    java.io.File r9 = r0.getFile(r1)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r0.pageBlocksAdapter
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    int r1 = r1.currentIndex
                    boolean r4 = r0.isVideo(r1)
                L_0x0146:
                    r12 = r4
                    goto L_0x0149
                L_0x0148:
                    r12 = 0
                L_0x0149:
                    if (r9 == 0) goto L_0x0167
                    boolean r0 = r9.exists()
                    if (r0 == 0) goto L_0x0167
                    java.lang.String r10 = r9.toString()
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r11 = r0.parentActivity
                    r13 = 0
                    r14 = 0
                    org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda7 r15 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda7
                    r15.<init>(r7, r12)
                    org.telegram.messenger.MediaController.saveFile(r10, r11, r12, r13, r14, r15)
                    goto L_0x0c8a
                L_0x0167:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.showDownloadAlert()
                    goto L_0x0c8a
                L_0x016e:
                    r10 = 2
                    if (r0 != r10) goto L_0x01c6
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    long r0 = r0.currentDialogId
                    int r3 = (r0 > r5 ? 1 : (r0 == r5 ? 0 : -1))
                    if (r3 == 0) goto L_0x0c8a
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    boolean unused = r0.disableShowCheck = r2
                    android.os.Bundle r0 = new android.os.Bundle
                    r0.<init>()
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    long r5 = r1.currentDialogId
                    java.lang.String r1 = "dialog_id"
                    r0.putLong(r1, r5)
                    org.telegram.ui.Components.MediaActivity r1 = new org.telegram.ui.Components.MediaActivity
                    r1.<init>(r0, r9)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.ChatActivity r0 = r0.parentChatActivity
                    if (r0 == 0) goto L_0x01aa
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.ChatActivity r0 = r0.parentChatActivity
                    org.telegram.tgnet.TLRPC$ChatFull r0 = r0.getCurrentChatInfo()
                    r1.setChatInfo(r0)
                L_0x01aa:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.closePhoto(r4, r4)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r0 = r0.parentActivity
                    boolean r0 = r0 instanceof org.telegram.ui.LaunchActivity
                    if (r0 == 0) goto L_0x0c8a
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r0 = r0.parentActivity
                    org.telegram.ui.LaunchActivity r0 = (org.telegram.ui.LaunchActivity) r0
                    r0.presentFragment(r1, r4, r2)
                    goto L_0x0c8a
                L_0x01c6:
                    if (r0 != r8) goto L_0x0289
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    if (r0 != 0) goto L_0x01d1
                    return
                L_0x01d1:
                    android.os.Bundle r0 = new android.os.Bundle
                    r0.<init>()
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    long r5 = r1.currentDialogId
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r1 = r1.currentMessageObject
                    if (r1 == 0) goto L_0x01ee
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r1 = r1.currentMessageObject
                    long r5 = r1.getDialogId()
                L_0x01ee:
                    boolean r1 = org.telegram.messenger.DialogObject.isEncryptedDialog(r5)
                    if (r1 == 0) goto L_0x01fe
                    int r1 = org.telegram.messenger.DialogObject.getEncryptedChatId(r5)
                    java.lang.String r3 = "enc_id"
                    r0.putInt(r3, r1)
                    goto L_0x0233
                L_0x01fe:
                    boolean r1 = org.telegram.messenger.DialogObject.isUserDialog(r5)
                    if (r1 == 0) goto L_0x020a
                    java.lang.String r1 = "user_id"
                    r0.putLong(r1, r5)
                    goto L_0x0233
                L_0x020a:
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    int r1 = r1.currentAccount
                    org.telegram.messenger.MessagesController r1 = org.telegram.messenger.MessagesController.getInstance(r1)
                    long r10 = -r5
                    java.lang.Long r3 = java.lang.Long.valueOf(r10)
                    org.telegram.tgnet.TLRPC$Chat r1 = r1.getChat(r3)
                    if (r1 == 0) goto L_0x022d
                    org.telegram.tgnet.TLRPC$InputChannel r3 = r1.migrated_to
                    if (r3 == 0) goto L_0x022d
                    java.lang.String r3 = "migrated_to"
                    r0.putLong(r3, r5)
                    org.telegram.tgnet.TLRPC$InputChannel r1 = r1.migrated_to
                    long r5 = r1.channel_id
                    long r5 = -r5
                L_0x022d:
                    long r5 = -r5
                    java.lang.String r1 = "chat_id"
                    r0.putLong(r1, r5)
                L_0x0233:
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r1 = r1.currentMessageObject
                    int r1 = r1.getId()
                    java.lang.String r3 = "message_id"
                    r0.putInt(r3, r1)
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    int r1 = r1.currentAccount
                    org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getInstance(r1)
                    int r3 = org.telegram.messenger.NotificationCenter.closeChats
                    java.lang.Object[] r5 = new java.lang.Object[r4]
                    r1.postNotificationName(r3, r5)
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r1 = r1.parentActivity
                    boolean r1 = r1 instanceof org.telegram.ui.LaunchActivity
                    if (r1 == 0) goto L_0x027d
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r1 = r1.parentActivity
                    org.telegram.ui.LaunchActivity r1 = (org.telegram.ui.LaunchActivity) r1
                    int r3 = r1.getMainFragmentsCount()
                    if (r3 > r2) goto L_0x0274
                    boolean r3 = org.telegram.messenger.AndroidUtilities.isTablet()
                    if (r3 == 0) goto L_0x0272
                    goto L_0x0274
                L_0x0272:
                    r3 = 0
                    goto L_0x0275
                L_0x0274:
                    r3 = 1
                L_0x0275:
                    org.telegram.ui.ChatActivity r5 = new org.telegram.ui.ChatActivity
                    r5.<init>(r0)
                    r1.presentFragment(r5, r3, r2)
                L_0x027d:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.closePhoto(r4, r4)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject unused = r0.currentMessageObject = r9
                    goto L_0x0c8a
                L_0x0289:
                    java.lang.String r5 = "Cancel"
                    r6 = 3
                    if (r0 != r6) goto L_0x045f
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    if (r0 == 0) goto L_0x045e
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r0 = r0.parentActivity
                    boolean r0 = r0 instanceof org.telegram.ui.LaunchActivity
                    if (r0 != 0) goto L_0x02a2
                    goto L_0x045e
                L_0x02a2:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    boolean r0 = r0.scheduled
                    if (r0 != 0) goto L_0x02d4
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    long r0 = r0.getDialogId()
                    boolean r3 = org.telegram.messenger.DialogObject.isChatDialog(r0)
                    if (r3 == 0) goto L_0x02d4
                    org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                    int r3 = r3.currentAccount
                    org.telegram.messenger.MessagesController r3 = org.telegram.messenger.MessagesController.getInstance(r3)
                    long r0 = -r0
                    java.lang.Long r0 = java.lang.Long.valueOf(r0)
                    org.telegram.tgnet.TLRPC$Chat r0 = r3.getChat(r0)
                    boolean r0 = org.telegram.messenger.ChatObject.isChannelAndNotMegaGroup(r0)
                    goto L_0x02d5
                L_0x02d4:
                    r0 = 0
                L_0x02d5:
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r1 = r1.parentActivity
                    org.telegram.ui.LaunchActivity r1 = (org.telegram.ui.LaunchActivity) r1
                    org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r3 = r3.currentMessageObject
                    int r3 = r3.currentAccount
                    r1.switchToAccount(r3, r2)
                    if (r0 == 0) goto L_0x041c
                    java.util.ArrayList r0 = new java.util.ArrayList
                    r0.<init>(r2)
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.ChatActivity r1 = r1.parentChatActivity
                    if (r1 == 0) goto L_0x030b
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.ChatActivity r1 = r1.parentChatActivity
                    org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r3 = r3.currentMessageObject
                    long r8 = r3.getGroupId()
                    org.telegram.messenger.MessageObject$GroupedMessages r9 = r1.getGroup(r8)
                L_0x030b:
                    if (r9 == 0) goto L_0x0313
                    java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r9.messages
                    r0.addAll(r1)
                    goto L_0x031c
                L_0x0313:
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r1 = r1.currentMessageObject
                    r0.add(r1)
                L_0x031c:
                    int r1 = r0.size()
                    if (r1 > r2) goto L_0x0329
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    r1.showShareAlert(r0)
                    goto L_0x0c8a
                L_0x0329:
                    r1 = 0
                L_0x032a:
                    int r3 = r0.size()
                    if (r1 >= r3) goto L_0x034e
                    java.lang.Object r3 = r0.get(r1)
                    org.telegram.messenger.MessageObject r3 = (org.telegram.messenger.MessageObject) r3
                    boolean r3 = r3.isPhoto()
                    if (r3 == 0) goto L_0x034c
                    java.lang.Object r3 = r0.get(r1)
                    org.telegram.messenger.MessageObject r3 = (org.telegram.messenger.MessageObject) r3
                    boolean r3 = r3.isVideo()
                    if (r3 == 0) goto L_0x0349
                    goto L_0x034c
                L_0x0349:
                    int r1 = r1 + 1
                    goto L_0x032a
                L_0x034c:
                    r1 = 0
                    goto L_0x034f
                L_0x034e:
                    r1 = 1
                L_0x034f:
                    org.telegram.ui.ActionBar.AlertDialog$Builder r3 = new org.telegram.ui.ActionBar.AlertDialog$Builder
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r6 = r6.parentActivity
                    org.telegram.ui.ActionBar.Theme$ResourcesProvider r8 = r15
                    r3.<init>(r6, r8)
                    int r6 = org.telegram.messenger.R.string.ForwardGroupMedia
                    java.lang.String r8 = "ForwardGroupMedia"
                    java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r8, r6)
                    org.telegram.ui.ActionBar.AlertDialog$Builder r3 = r3.setTitle(r6)
                    int r6 = org.telegram.messenger.R.string.ForwardGroupMediaMessage
                    java.lang.String r8 = "ForwardGroupMediaMessage"
                    java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r8, r6)
                    org.telegram.ui.ActionBar.AlertDialog$Builder r3 = r3.setMessage(r6)
                    java.lang.String r6 = "voipgroup_listeningText"
                    org.telegram.ui.ActionBar.AlertDialog$Builder r3 = r3.setDialogButtonColorKey(r6)
                    if (r1 == 0) goto L_0x0381
                    int r6 = org.telegram.messenger.R.string.ThisPhoto
                    java.lang.String r8 = "ThisPhoto"
                    goto L_0x0385
                L_0x0381:
                    int r6 = org.telegram.messenger.R.string.ThisMedia
                    java.lang.String r8 = "ThisMedia"
                L_0x0385:
                    java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r8, r6)
                    org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda0 r8 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda0
                    r8.<init>(r7)
                    org.telegram.ui.ActionBar.AlertDialog$Builder r3 = r3.setNegativeButton(r6, r8)
                    if (r1 == 0) goto L_0x03a1
                    int r1 = r0.size()
                    java.lang.Object[] r4 = new java.lang.Object[r4]
                    java.lang.String r6 = "AllNPhotos"
                    java.lang.String r1 = org.telegram.messenger.LocaleController.formatPluralString(r6, r1, r4)
                    goto L_0x03ad
                L_0x03a1:
                    int r1 = r0.size()
                    java.lang.Object[] r4 = new java.lang.Object[r4]
                    java.lang.String r6 = "AllNMedia"
                    java.lang.String r1 = org.telegram.messenger.LocaleController.formatPluralString(r6, r1, r4)
                L_0x03ad:
                    org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda1 r4 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda1
                    r4.<init>(r7, r0)
                    org.telegram.ui.ActionBar.AlertDialog$Builder r0 = r3.setPositiveButton(r1, r4)
                    int r1 = org.telegram.messenger.R.string.Cancel
                    java.lang.String r1 = org.telegram.messenger.LocaleController.getString(r5, r1)
                    org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda3 r3 = org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda3.INSTANCE
                    org.telegram.ui.ActionBar.AlertDialog$Builder r0 = r0.setNeutralButton(r1, r3)
                    org.telegram.ui.ActionBar.AlertDialog r0 = r0.create()
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    java.lang.String r3 = "voipgroup_dialogBackground"
                    int r1 = r1.getThemedColor(r3)
                    r0.setBackgroundColor(r1)
                    r0.show()
                    r1 = -3
                    android.view.View r1 = r0.getButton(r1)
                    boolean r3 = r1 instanceof android.widget.TextView
                    if (r3 == 0) goto L_0x040f
                    r3 = r1
                    android.widget.TextView r3 = (android.widget.TextView) r3
                    org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                    java.lang.String r5 = "dialogTextRed"
                    int r4 = r4.getThemedColor(r5)
                    r3.setTextColor(r4)
                    org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                    int r3 = r3.getThemedColor(r5)
                    android.graphics.drawable.Drawable r3 = org.telegram.ui.ActionBar.Theme.getRoundRectSelectorDrawable(r3)
                    r1.setBackground(r3)
                    android.view.ViewGroup r3 = r0.getButtonsLayout()
                    boolean r3 = r3 instanceof android.widget.LinearLayout
                    if (r3 == 0) goto L_0x040f
                    android.view.ViewGroup r3 = r0.getButtonsLayout()
                    android.widget.LinearLayout r3 = (android.widget.LinearLayout) r3
                    int r3 = r3.getOrientation()
                    if (r3 != r2) goto L_0x040f
                    r1.bringToFront()
                L_0x040f:
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    java.lang.String r2 = "voipgroup_actionBarItems"
                    int r1 = r1.getThemedColor(r2)
                    r0.setTextColor(r1)
                    goto L_0x0c8a
                L_0x041c:
                    android.os.Bundle r0 = new android.os.Bundle
                    r0.<init>()
                    java.lang.String r1 = "onlySelect"
                    r0.putBoolean(r1, r2)
                    java.lang.String r1 = "dialogsType"
                    r0.putInt(r1, r6)
                    org.telegram.ui.DialogsActivity r1 = new org.telegram.ui.DialogsActivity
                    r1.<init>(r0)
                    java.util.ArrayList r0 = new java.util.ArrayList
                    r0.<init>()
                    org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r3 = r3.currentMessageObject
                    r0.add(r3)
                    org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.ChatActivity r3 = r3.parentChatActivity
                    org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda9 r5 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda9
                    r5.<init>(r7, r0, r3)
                    r1.setDelegate(r5)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r0 = r0.parentActivity
                    org.telegram.ui.LaunchActivity r0 = (org.telegram.ui.LaunchActivity) r0
                    r0.presentFragment(r1, r4, r2)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.closePhoto(r4, r4)
                    goto L_0x0c8a
                L_0x045e:
                    return
                L_0x045f:
                    r6 = 6
                    if (r0 != r6) goto L_0x073d
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r0 = r0.parentActivity
                    if (r0 == 0) goto L_0x073c
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PhotoViewerProvider r0 = r0.placeProvider
                    if (r0 != 0) goto L_0x0474
                    goto L_0x073c
                L_0x0474:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    if (r0 == 0) goto L_0x04ae
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    boolean r0 = r0.scheduled
                    if (r0 != 0) goto L_0x04ae
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    long r10 = r0.getDialogId()
                    boolean r0 = org.telegram.messenger.DialogObject.isChatDialog(r10)
                    if (r0 == 0) goto L_0x04ae
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    int r0 = r0.currentAccount
                    org.telegram.messenger.MessagesController r0 = org.telegram.messenger.MessagesController.getInstance(r0)
                    long r10 = -r10
                    java.lang.Long r3 = java.lang.Long.valueOf(r10)
                    org.telegram.tgnet.TLRPC$Chat r0 = r0.getChat(r3)
                    boolean r0 = org.telegram.messenger.ChatObject.isChannel(r0)
                    goto L_0x04af
                L_0x04ae:
                    r0 = 0
                L_0x04af:
                    org.telegram.ui.ActionBar.AlertDialog$Builder r3 = new org.telegram.ui.ActionBar.AlertDialog$Builder
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r6 = r6.parentActivity
                    r3.<init>((android.content.Context) r6)
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PhotoViewerProvider r6 = r6.placeProvider
                    java.lang.String r6 = r6.getDeleteMessageString()
                    java.lang.String r8 = "AreYouSureDeletePhotoTitle"
                    if (r6 == 0) goto L_0x04d6
                    int r0 = org.telegram.messenger.R.string.AreYouSureDeletePhotoTitle
                    java.lang.String r0 = org.telegram.messenger.LocaleController.getString(r8, r0)
                    r3.setTitle(r0)
                    r3.setMessage(r6)
                    goto L_0x0595
                L_0x04d6:
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    boolean r6 = r6.isEmbedVideo
                    if (r6 != 0) goto L_0x056d
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r6 = r6.currentFileLocationVideo
                    if (r6 == 0) goto L_0x04f4
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r6 = r6.currentFileLocationVideo
                    org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r10 = r10.currentFileLocation
                    if (r6 != r10) goto L_0x056d
                L_0x04f4:
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r6 = r6.currentMessageObject
                    if (r6 == 0) goto L_0x0509
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r6 = r6.currentMessageObject
                    boolean r6 = r6.isVideo()
                    if (r6 == 0) goto L_0x0509
                    goto L_0x056d
                L_0x0509:
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r6 = r6.currentMessageObject
                    if (r6 == 0) goto L_0x0546
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r6 = r6.currentMessageObject
                    boolean r6 = r6.isGif()
                    if (r6 == 0) goto L_0x0546
                    int r6 = org.telegram.messenger.R.string.AreYouSureDeleteGIFTitle
                    java.lang.String r8 = "AreYouSureDeleteGIFTitle"
                    java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r8, r6)
                    r3.setTitle(r6)
                    if (r0 == 0) goto L_0x0538
                    int r0 = org.telegram.messenger.R.string.AreYouSureDeleteGIFEveryone
                    java.lang.Object[] r6 = new java.lang.Object[r4]
                    java.lang.String r8 = "AreYouSureDeleteGIFEveryone"
                    java.lang.String r0 = org.telegram.messenger.LocaleController.formatString(r8, r0, r6)
                    r3.setMessage(r0)
                    goto L_0x0595
                L_0x0538:
                    int r0 = org.telegram.messenger.R.string.AreYouSureDeleteGIF
                    java.lang.Object[] r6 = new java.lang.Object[r4]
                    java.lang.String r8 = "AreYouSureDeleteGIF"
                    java.lang.String r0 = org.telegram.messenger.LocaleController.formatString(r8, r0, r6)
                    r3.setMessage(r0)
                    goto L_0x0595
                L_0x0546:
                    int r6 = org.telegram.messenger.R.string.AreYouSureDeletePhotoTitle
                    java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r8, r6)
                    r3.setTitle(r6)
                    if (r0 == 0) goto L_0x055f
                    int r0 = org.telegram.messenger.R.string.AreYouSureDeletePhotoEveryone
                    java.lang.Object[] r6 = new java.lang.Object[r4]
                    java.lang.String r8 = "AreYouSureDeletePhotoEveryone"
                    java.lang.String r0 = org.telegram.messenger.LocaleController.formatString(r8, r0, r6)
                    r3.setMessage(r0)
                    goto L_0x0595
                L_0x055f:
                    int r0 = org.telegram.messenger.R.string.AreYouSureDeletePhoto
                    java.lang.Object[] r6 = new java.lang.Object[r4]
                    java.lang.String r8 = "AreYouSureDeletePhoto"
                    java.lang.String r0 = org.telegram.messenger.LocaleController.formatString(r8, r0, r6)
                    r3.setMessage(r0)
                    goto L_0x0595
                L_0x056d:
                    int r6 = org.telegram.messenger.R.string.AreYouSureDeleteVideoTitle
                    java.lang.String r8 = "AreYouSureDeleteVideoTitle"
                    java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r8, r6)
                    r3.setTitle(r6)
                    if (r0 == 0) goto L_0x0588
                    int r0 = org.telegram.messenger.R.string.AreYouSureDeleteVideoEveryone
                    java.lang.Object[] r6 = new java.lang.Object[r4]
                    java.lang.String r8 = "AreYouSureDeleteVideoEveryone"
                    java.lang.String r0 = org.telegram.messenger.LocaleController.formatString(r8, r0, r6)
                    r3.setMessage(r0)
                    goto L_0x0595
                L_0x0588:
                    int r0 = org.telegram.messenger.R.string.AreYouSureDeleteVideo
                    java.lang.Object[] r6 = new java.lang.Object[r4]
                    java.lang.String r8 = "AreYouSureDeleteVideo"
                    java.lang.String r0 = org.telegram.messenger.LocaleController.formatString(r8, r0, r6)
                    r3.setMessage(r0)
                L_0x0595:
                    boolean[] r0 = new boolean[r2]
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r6 = r6.currentMessageObject
                    if (r6 == 0) goto L_0x0705
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r6 = r6.currentMessageObject
                    boolean r6 = r6.scheduled
                    if (r6 != 0) goto L_0x0705
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r6 = r6.currentMessageObject
                    long r10 = r6.getDialogId()
                    boolean r6 = org.telegram.messenger.DialogObject.isEncryptedDialog(r10)
                    if (r6 != 0) goto L_0x0705
                    boolean r6 = org.telegram.messenger.DialogObject.isUserDialog(r10)
                    if (r6 == 0) goto L_0x05d3
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    int r6 = r6.currentAccount
                    org.telegram.messenger.MessagesController r6 = org.telegram.messenger.MessagesController.getInstance(r6)
                    java.lang.Long r8 = java.lang.Long.valueOf(r10)
                    org.telegram.tgnet.TLRPC$User r6 = r6.getUser(r8)
                    r8 = r9
                    goto L_0x05e8
                L_0x05d3:
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    int r6 = r6.currentAccount
                    org.telegram.messenger.MessagesController r6 = org.telegram.messenger.MessagesController.getInstance(r6)
                    long r10 = -r10
                    java.lang.Long r8 = java.lang.Long.valueOf(r10)
                    org.telegram.tgnet.TLRPC$Chat r6 = r6.getChat(r8)
                    r8 = r6
                    r6 = r9
                L_0x05e8:
                    if (r6 != 0) goto L_0x05f0
                    boolean r10 = org.telegram.messenger.ChatObject.isChannel(r8)
                    if (r10 != 0) goto L_0x0705
                L_0x05f0:
                    org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                    int r10 = r10.currentAccount
                    org.telegram.tgnet.ConnectionsManager r10 = org.telegram.tgnet.ConnectionsManager.getInstance(r10)
                    int r10 = r10.getCurrentTime()
                    if (r6 == 0) goto L_0x060d
                    org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                    int r11 = r11.currentAccount
                    org.telegram.messenger.MessagesController r11 = org.telegram.messenger.MessagesController.getInstance(r11)
                    int r11 = r11.revokeTimePmLimit
                    goto L_0x0619
                L_0x060d:
                    org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                    int r11 = r11.currentAccount
                    org.telegram.messenger.MessagesController r11 = org.telegram.messenger.MessagesController.getInstance(r11)
                    int r11 = r11.revokeTimeLimit
                L_0x0619:
                    if (r6 == 0) goto L_0x062f
                    long r12 = r6.id
                    org.telegram.ui.PhotoViewer r14 = org.telegram.ui.PhotoViewer.this
                    int r14 = r14.currentAccount
                    org.telegram.messenger.UserConfig r14 = org.telegram.messenger.UserConfig.getInstance(r14)
                    long r14 = r14.getClientUserId()
                    int r16 = (r12 > r14 ? 1 : (r12 == r14 ? 0 : -1))
                    if (r16 != 0) goto L_0x0631
                L_0x062f:
                    if (r8 == 0) goto L_0x0705
                L_0x0631:
                    if (r6 == 0) goto L_0x0643
                    org.telegram.ui.PhotoViewer r12 = org.telegram.ui.PhotoViewer.this
                    int r12 = r12.currentAccount
                    org.telegram.messenger.MessagesController r12 = org.telegram.messenger.MessagesController.getInstance(r12)
                    boolean r12 = r12.canRevokePmInbox
                    if (r12 == 0) goto L_0x0643
                    r12 = 1
                    goto L_0x0644
                L_0x0643:
                    r12 = 0
                L_0x0644:
                    org.telegram.ui.PhotoViewer r13 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r13 = r13.currentMessageObject
                    org.telegram.tgnet.TLRPC$Message r13 = r13.messageOwner
                    org.telegram.tgnet.TLRPC$MessageAction r13 = r13.action
                    if (r13 == 0) goto L_0x065e
                    org.telegram.ui.PhotoViewer r13 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r13 = r13.currentMessageObject
                    org.telegram.tgnet.TLRPC$Message r13 = r13.messageOwner
                    org.telegram.tgnet.TLRPC$MessageAction r13 = r13.action
                    boolean r13 = r13 instanceof org.telegram.tgnet.TLRPC$TL_messageActionEmpty
                    if (r13 == 0) goto L_0x0705
                L_0x065e:
                    org.telegram.ui.PhotoViewer r13 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r13 = r13.currentMessageObject
                    boolean r13 = r13.isOut()
                    if (r13 != 0) goto L_0x0672
                    if (r12 != 0) goto L_0x0672
                    boolean r12 = org.telegram.messenger.ChatObject.hasAdminRights(r8)
                    if (r12 == 0) goto L_0x0705
                L_0x0672:
                    org.telegram.ui.PhotoViewer r12 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r12 = r12.currentMessageObject
                    org.telegram.tgnet.TLRPC$Message r12 = r12.messageOwner
                    int r12 = r12.date
                    int r10 = r10 - r12
                    if (r10 > r11) goto L_0x0705
                    android.widget.FrameLayout r10 = new android.widget.FrameLayout
                    org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r11 = r11.parentActivity
                    r10.<init>(r11)
                    org.telegram.ui.Cells.CheckBoxCell r11 = new org.telegram.ui.Cells.CheckBoxCell
                    org.telegram.ui.PhotoViewer r12 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r12 = r12.parentActivity
                    org.telegram.ui.ActionBar.Theme$ResourcesProvider r13 = r15
                    r11.<init>(r12, r2, r13)
                    android.graphics.drawable.Drawable r12 = org.telegram.ui.ActionBar.Theme.getSelectorDrawable(r4)
                    r11.setBackgroundDrawable(r12)
                    java.lang.String r12 = ""
                    if (r8 == 0) goto L_0x06ae
                    int r2 = org.telegram.messenger.R.string.DeleteForAll
                    java.lang.String r6 = "DeleteForAll"
                    java.lang.String r2 = org.telegram.messenger.LocaleController.getString(r6, r2)
                    r11.setText(r2, r12, r4, r4)
                    goto L_0x06c1
                L_0x06ae:
                    int r8 = org.telegram.messenger.R.string.DeleteForUser
                    java.lang.Object[] r2 = new java.lang.Object[r2]
                    java.lang.String r6 = org.telegram.messenger.UserObject.getFirstName(r6)
                    r2[r4] = r6
                    java.lang.String r6 = "DeleteForUser"
                    java.lang.String r2 = org.telegram.messenger.LocaleController.formatString(r6, r8, r2)
                    r11.setText(r2, r12, r4, r4)
                L_0x06c1:
                    boolean r2 = org.telegram.messenger.LocaleController.isRTL
                    r6 = 1098907648(0x41800000, float:16.0)
                    r8 = 1090519040(0x41000000, float:8.0)
                    if (r2 == 0) goto L_0x06ce
                    int r2 = org.telegram.messenger.AndroidUtilities.dp(r6)
                    goto L_0x06d2
                L_0x06ce:
                    int r2 = org.telegram.messenger.AndroidUtilities.dp(r8)
                L_0x06d2:
                    boolean r12 = org.telegram.messenger.LocaleController.isRTL
                    if (r12 == 0) goto L_0x06db
                    int r6 = org.telegram.messenger.AndroidUtilities.dp(r8)
                    goto L_0x06df
                L_0x06db:
                    int r6 = org.telegram.messenger.AndroidUtilities.dp(r6)
                L_0x06df:
                    r11.setPadding(r2, r4, r6, r4)
                    r12 = -1
                    r13 = 1111490560(0x42400000, float:48.0)
                    r14 = 51
                    r15 = 0
                    r16 = 0
                    r17 = 0
                    r18 = 0
                    android.widget.FrameLayout$LayoutParams r2 = org.telegram.ui.Components.LayoutHelper.createFrame(r12, r13, r14, r15, r16, r17, r18)
                    r10.addView(r11, r2)
                    org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda4 r2 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda4
                    r2.<init>(r0)
                    r11.setOnClickListener(r2)
                    r3.setView(r10)
                    r2 = 9
                    r3.setCustomViewOffset(r2)
                L_0x0705:
                    int r2 = org.telegram.messenger.R.string.Delete
                    java.lang.String r4 = "Delete"
                    java.lang.String r2 = org.telegram.messenger.LocaleController.getString(r4, r2)
                    org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda2 r4 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda2
                    r4.<init>(r7, r0)
                    r3.setPositiveButton(r2, r4)
                    int r0 = org.telegram.messenger.R.string.Cancel
                    java.lang.String r0 = org.telegram.messenger.LocaleController.getString(r5, r0)
                    r3.setNegativeButton(r0, r9)
                    org.telegram.ui.ActionBar.AlertDialog r0 = r3.create()
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    r2.showAlertDialog(r3)
                    android.view.View r0 = r0.getButton(r1)
                    android.widget.TextView r0 = (android.widget.TextView) r0
                    if (r0 == 0) goto L_0x0c8a
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    java.lang.String r2 = "dialogTextRed2"
                    int r1 = r1.getThemedColor(r2)
                    r0.setTextColor(r1)
                    goto L_0x0c8a
                L_0x073c:
                    return
                L_0x073d:
                    r5 = 10
                    if (r0 == r5) goto L_0x0CLASSNAME
                    r5 = 18
                    if (r0 != r5) goto L_0x0747
                    goto L_0x0CLASSNAME
                L_0x0747:
                    r5 = 11
                    if (r0 != r5) goto L_0x07d5
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    boolean r0 = r0.isEmbedVideo     // Catch:{ Exception -> 0x07cf }
                    if (r0 == 0) goto L_0x0773
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    android.app.Activity r0 = r0.parentActivity     // Catch:{ Exception -> 0x07cf }
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    org.telegram.messenger.MessageObject r1 = r1.currentMessageObject     // Catch:{ Exception -> 0x07cf }
                    org.telegram.tgnet.TLRPC$Message r1 = r1.messageOwner     // Catch:{ Exception -> 0x07cf }
                    org.telegram.tgnet.TLRPC$MessageMedia r1 = org.telegram.messenger.MessageObject.getMedia(r1)     // Catch:{ Exception -> 0x07cf }
                    org.telegram.tgnet.TLRPC$WebPage r1 = r1.webpage     // Catch:{ Exception -> 0x07cf }
                    java.lang.String r1 = r1.url     // Catch:{ Exception -> 0x07cf }
                    org.telegram.messenger.browser.Browser.openUrl((android.content.Context) r0, (java.lang.String) r1)     // Catch:{ Exception -> 0x07cf }
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    r0.closePhoto(r4, r4)     // Catch:{ Exception -> 0x07cf }
                    goto L_0x0c8a
                L_0x0773:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject     // Catch:{ Exception -> 0x07cf }
                    if (r0 == 0) goto L_0x079d
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject     // Catch:{ Exception -> 0x07cf }
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    android.app.Activity r1 = r1.parentActivity     // Catch:{ Exception -> 0x07cf }
                    org.telegram.ui.ActionBar.Theme$ResourcesProvider r2 = r15     // Catch:{ Exception -> 0x07cf }
                    boolean r0 = org.telegram.messenger.AndroidUtilities.openForView((org.telegram.messenger.MessageObject) r0, (android.app.Activity) r1, (org.telegram.ui.ActionBar.Theme.ResourcesProvider) r2)     // Catch:{ Exception -> 0x07cf }
                    if (r0 == 0) goto L_0x0796
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    r0.closePhoto(r4, r4)     // Catch:{ Exception -> 0x07cf }
                    goto L_0x0c8a
                L_0x0796:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    r0.showDownloadAlert()     // Catch:{ Exception -> 0x07cf }
                    goto L_0x0c8a
                L_0x079d:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r0.pageBlocksAdapter     // Catch:{ Exception -> 0x07cf }
                    if (r0 == 0) goto L_0x0c8a
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r0.pageBlocksAdapter     // Catch:{ Exception -> 0x07cf }
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    int r1 = r1.currentIndex     // Catch:{ Exception -> 0x07cf }
                    org.telegram.tgnet.TLObject r0 = r0.getMedia(r1)     // Catch:{ Exception -> 0x07cf }
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    android.app.Activity r1 = r1.parentActivity     // Catch:{ Exception -> 0x07cf }
                    boolean r0 = org.telegram.messenger.AndroidUtilities.openForView(r0, r1)     // Catch:{ Exception -> 0x07cf }
                    if (r0 == 0) goto L_0x07c8
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    r0.closePhoto(r4, r4)     // Catch:{ Exception -> 0x07cf }
                    goto L_0x0c8a
                L_0x07c8:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x07cf }
                    r0.showDownloadAlert()     // Catch:{ Exception -> 0x07cf }
                    goto L_0x0c8a
                L_0x07cf:
                    r0 = move-exception
                    org.telegram.messenger.FileLog.e((java.lang.Throwable) r0)
                    goto L_0x0c8a
                L_0x07d5:
                    r5 = 13
                    if (r0 == r5) goto L_0x0c0f
                    r5 = 15
                    if (r0 != r5) goto L_0x07df
                    goto L_0x0c0f
                L_0x07df:
                    r5 = 5
                    if (r0 != r5) goto L_0x0865
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.ActionBar.ActionBarMenuItem r0 = r0.pipItem
                    float r0 = r0.getAlpha()
                    r1 = 1065353216(0x3var_, float:1.0)
                    int r0 = (r0 > r1 ? 1 : (r0 == r1 ? 0 : -1))
                    if (r0 == 0) goto L_0x07f3
                    return
                L_0x07f3:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    boolean r0 = r0.isEmbedVideo
                    if (r0 == 0) goto L_0x085e
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.Components.PhotoViewerWebView r0 = r0.photoViewerWebView
                    boolean r0 = r0.openInPip()
                    if (r0 == 0) goto L_0x0c8a
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.PipInstance
                    if (r0 == 0) goto L_0x0814
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.PipInstance
                    r0.destroyPhotoViewer()
                L_0x0814:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    boolean unused = r0.isInline = r2
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.Instance
                    org.telegram.ui.PhotoViewer unused = org.telegram.ui.PhotoViewer.PipInstance = r0
                    org.telegram.ui.PhotoViewer unused = org.telegram.ui.PhotoViewer.Instance = r9
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    boolean unused = r0.isVisible = r4
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PlaceProviderObject r0 = r0.currentPlaceObject
                    if (r0 == 0) goto L_0x0849
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PlaceProviderObject r0 = r0.currentPlaceObject
                    org.telegram.messenger.ImageReceiver r0 = r0.imageReceiver
                    boolean r0 = r0.getVisible()
                    if (r0 != 0) goto L_0x0849
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PlaceProviderObject r0 = r0.currentPlaceObject
                    org.telegram.messenger.ImageReceiver r0 = r0.imageReceiver
                    r0.setVisible(r2, r2)
                L_0x0849:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    float unused = r0.clippingImageProgress = r1
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r0.containerView
                    r0.invalidate()
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.dismissInternal()
                    goto L_0x0c8a
                L_0x085e:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.switchToPip(r4)
                    goto L_0x0c8a
                L_0x0865:
                    r5 = 7
                    if (r0 != r5) goto L_0x08a1
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    if (r0 != 0) goto L_0x0871
                    return
                L_0x0871:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    int r0 = r0.currentAccount
                    org.telegram.messenger.FileLoader r0 = org.telegram.messenger.FileLoader.getInstance(r0)
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r1 = r1.currentMessageObject
                    org.telegram.tgnet.TLRPC$Document r1 = r1.getDocument()
                    r0.cancelLoadFile((org.telegram.tgnet.TLRPC$Document) r1)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.releasePlayer(r4)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    android.widget.FrameLayout r0 = r0.bottomLayout
                    r0.setTag(r3)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    android.widget.FrameLayout r0 = r0.bottomLayout
                    r0.setVisibility(r4)
                    goto L_0x0c8a
                L_0x08a1:
                    r5 = 14
                    if (r0 != r5) goto L_0x0968
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    r3 = 1000(0x3e8, double:4.94E-321)
                    if (r0 == 0) goto L_0x08fe
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    org.telegram.tgnet.TLRPC$Document r0 = r0.getDocument()
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.ChatActivity r1 = r1.parentChatActivity
                    if (r1 == 0) goto L_0x08d7
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.ChatActivity r1 = r1.parentChatActivity
                    org.telegram.ui.Components.ChatActivityEnterView r1 = r1.chatActivityEnterView
                    if (r1 == 0) goto L_0x08d7
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.ChatActivity r1 = r1.parentChatActivity
                    org.telegram.ui.Components.ChatActivityEnterView r1 = r1.chatActivityEnterView
                    r1.addRecentGif(r0)
                    goto L_0x08ea
                L_0x08d7:
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    int r1 = r1.currentAccount
                    org.telegram.messenger.MediaDataController r1 = org.telegram.messenger.MediaDataController.getInstance(r1)
                    long r5 = java.lang.System.currentTimeMillis()
                    long r5 = r5 / r3
                    int r3 = (int) r5
                    r1.addRecentGif(r0, r3, r2)
                L_0x08ea:
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    int r1 = r1.currentAccount
                    org.telegram.messenger.MessagesController r1 = org.telegram.messenger.MessagesController.getInstance(r1)
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r2 = r2.currentMessageObject
                    r1.saveGif(r2, r0)
                    goto L_0x0946
                L_0x08fe:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r0.pageBlocksAdapter
                    if (r0 == 0) goto L_0x0967
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r0.pageBlocksAdapter
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    int r1 = r1.currentIndex
                    org.telegram.tgnet.TLObject r0 = r0.getMedia(r1)
                    boolean r1 = r0 instanceof org.telegram.tgnet.TLRPC$Document
                    if (r1 == 0) goto L_0x0946
                    org.telegram.tgnet.TLRPC$Document r0 = (org.telegram.tgnet.TLRPC$Document) r0
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    int r1 = r1.currentAccount
                    org.telegram.messenger.MediaDataController r1 = org.telegram.messenger.MediaDataController.getInstance(r1)
                    long r5 = java.lang.System.currentTimeMillis()
                    long r5 = r5 / r3
                    int r3 = (int) r5
                    r1.addRecentGif(r0, r3, r2)
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    int r1 = r1.currentAccount
                    org.telegram.messenger.MessagesController r1 = org.telegram.messenger.MessagesController.getInstance(r1)
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PageBlocksAdapter r2 = r2.pageBlocksAdapter
                    java.lang.Object r2 = r2.getParentObject()
                    r1.saveGif(r2, r0)
                L_0x0946:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r0.containerView
                    if (r0 == 0) goto L_0x0c8a
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r0.containerView
                    org.telegram.ui.ActionBar.Theme$ResourcesProvider r1 = r15
                    org.telegram.ui.Components.BulletinFactory r0 = org.telegram.ui.Components.BulletinFactory.of(r0, r1)
                    org.telegram.ui.Components.BulletinFactory$FileType r1 = org.telegram.ui.Components.BulletinFactory.FileType.GIF
                    org.telegram.ui.ActionBar.Theme$ResourcesProvider r2 = r15
                    org.telegram.ui.Components.Bulletin r0 = r0.createDownloadBulletin(r1, r2)
                    r0.show()
                    goto L_0x0c8a
                L_0x0967:
                    return
                L_0x0968:
                    r5 = 16
                    if (r0 != r5) goto L_0x0ba7
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r0 = r0.avatarsArr
                    org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                    int r5 = r5.currentIndex
                    java.lang.Object r0 = r0.get(r5)
                    org.telegram.tgnet.TLRPC$Photo r0 = (org.telegram.tgnet.TLRPC$Photo) r0
                    if (r0 == 0) goto L_0x0ba6
                    java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r5 = r0.sizes
                    boolean r5 = r5.isEmpty()
                    if (r5 == 0) goto L_0x098a
                    goto L_0x0ba6
                L_0x098a:
                    java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r5 = r0.sizes
                    r6 = 800(0x320, float:1.121E-42)
                    org.telegram.tgnet.TLRPC$PhotoSize r5 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r5, r6)
                    java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r6 = r0.sizes
                    r8 = 90
                    org.telegram.tgnet.TLRPC$PhotoSize r6 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r6, r8)
                    org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                    int r8 = r8.currentAccount
                    org.telegram.messenger.UserConfig r8 = org.telegram.messenger.UserConfig.getInstance(r8)
                    org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                    long r10 = r10.avatarsDialogId
                    long r12 = r8.clientUserId
                    int r14 = (r10 > r12 ? 1 : (r10 == r12 ? 0 : -1))
                    if (r14 != 0) goto L_0x0a1a
                    org.telegram.tgnet.TLRPC$TL_photos_updateProfilePhoto r10 = new org.telegram.tgnet.TLRPC$TL_photos_updateProfilePhoto
                    r10.<init>()
                    org.telegram.tgnet.TLRPC$TL_inputPhoto r11 = new org.telegram.tgnet.TLRPC$TL_inputPhoto
                    r11.<init>()
                    r10.id = r11
                    long r12 = r0.id
                    r11.id = r12
                    long r12 = r0.access_hash
                    r11.access_hash = r12
                    byte[] r12 = r0.file_reference
                    r11.file_reference = r12
                    org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                    int r11 = r11.currentAccount
                    org.telegram.tgnet.ConnectionsManager r11 = org.telegram.tgnet.ConnectionsManager.getInstance(r11)
                    org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda8 r12 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda8
                    r12.<init>(r7, r8, r0)
                    r11.sendRequest(r10, r12)
                    org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                    int r10 = r10.currentAccount
                    org.telegram.messenger.MessagesController r10 = org.telegram.messenger.MessagesController.getInstance(r10)
                    long r11 = r8.clientUserId
                    java.lang.Long r11 = java.lang.Long.valueOf(r11)
                    org.telegram.tgnet.TLRPC$User r10 = r10.getUser(r11)
                    if (r10 == 0) goto L_0x0a95
                    org.telegram.tgnet.TLRPC$UserProfilePhoto r11 = r10.photo
                    long r12 = r0.id
                    r11.photo_id = r12
                    int r12 = r0.dc_id
                    r11.dc_id = r12
                    org.telegram.tgnet.TLRPC$FileLocation r6 = r6.location
                    r11.photo_small = r6
                    org.telegram.tgnet.TLRPC$FileLocation r6 = r5.location
                    r11.photo_big = r6
                    r8.setCurrentUser(r10)
                    r8.saveConfig(r2)
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    int r2 = r2.currentAccount
                    org.telegram.messenger.NotificationCenter r2 = org.telegram.messenger.NotificationCenter.getInstance(r2)
                    int r6 = org.telegram.messenger.NotificationCenter.mainUserInfoChanged
                    java.lang.Object[] r8 = new java.lang.Object[r4]
                    r2.postNotificationName(r6, r8)
                    goto L_0x0a95
                L_0x0a1a:
                    org.telegram.ui.PhotoViewer r8 = org.telegram.ui.PhotoViewer.this
                    int r8 = r8.currentAccount
                    org.telegram.messenger.MessagesController r8 = org.telegram.messenger.MessagesController.getInstance(r8)
                    org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                    long r10 = r10.avatarsDialogId
                    long r10 = -r10
                    java.lang.Long r10 = java.lang.Long.valueOf(r10)
                    org.telegram.tgnet.TLRPC$Chat r8 = r8.getChat(r10)
                    if (r8 != 0) goto L_0x0a36
                    return
                L_0x0a36:
                    org.telegram.tgnet.TLRPC$TL_inputChatPhoto r13 = new org.telegram.tgnet.TLRPC$TL_inputChatPhoto
                    r13.<init>()
                    org.telegram.tgnet.TLRPC$TL_inputPhoto r10 = new org.telegram.tgnet.TLRPC$TL_inputPhoto
                    r10.<init>()
                    r13.id = r10
                    long r11 = r0.id
                    r10.id = r11
                    long r11 = r0.access_hash
                    r10.access_hash = r11
                    byte[] r11 = r0.file_reference
                    r10.file_reference = r11
                    org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                    int r10 = r10.currentAccount
                    org.telegram.messenger.MessagesController r10 = org.telegram.messenger.MessagesController.getInstance(r10)
                    org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                    long r11 = r11.avatarsDialogId
                    long r11 = -r11
                    r14 = 0
                    r15 = 0
                    r16 = 0
                    r18 = 0
                    r19 = 0
                    r20 = 0
                    r21 = 0
                    r10.changeChatAvatar(r11, r13, r14, r15, r16, r18, r19, r20, r21)
                    org.telegram.tgnet.TLRPC$ChatPhoto r8 = r8.photo
                    int r10 = r0.dc_id
                    r8.dc_id = r10
                    org.telegram.tgnet.TLRPC$FileLocation r6 = r6.location
                    r8.photo_small = r6
                    org.telegram.tgnet.TLRPC$FileLocation r6 = r5.location
                    r8.photo_big = r6
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    int r6 = r6.currentAccount
                    org.telegram.messenger.NotificationCenter r6 = org.telegram.messenger.NotificationCenter.getInstance(r6)
                    int r8 = org.telegram.messenger.NotificationCenter.updateInterfaces
                    java.lang.Object[] r2 = new java.lang.Object[r2]
                    int r10 = org.telegram.messenger.MessagesController.UPDATE_MASK_AVATAR
                    java.lang.Integer r10 = java.lang.Integer.valueOf(r10)
                    r2[r4] = r10
                    r6.postNotificationName(r8, r2)
                L_0x0a95:
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r5 = org.telegram.messenger.ImageLocation.getForPhoto((org.telegram.tgnet.TLRPC$PhotoSize) r5, (org.telegram.tgnet.TLRPC$Photo) r0)
                    org.telegram.messenger.ImageLocation unused = r2.currentAvatarLocation = r5
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r2 = r2.avatarsArr
                    org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                    int r5 = r5.currentIndex
                    r2.remove(r5)
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r2 = r2.avatarsArr
                    r2.add(r4, r0)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r0 = r0.imagesArrLocations
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    int r2 = r2.currentIndex
                    java.lang.Object r0 = r0.get(r2)
                    org.telegram.messenger.ImageLocation r0 = (org.telegram.messenger.ImageLocation) r0
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r2 = r2.imagesArrLocations
                    org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                    int r5 = r5.currentIndex
                    r2.remove(r5)
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r2 = r2.imagesArrLocations
                    r2.add(r4, r0)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r0 = r0.imagesArrLocationsVideo
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    int r2 = r2.currentIndex
                    java.lang.Object r0 = r0.get(r2)
                    org.telegram.messenger.ImageLocation r0 = (org.telegram.messenger.ImageLocation) r0
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r2 = r2.imagesArrLocationsVideo
                    org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                    int r5 = r5.currentIndex
                    r2.remove(r5)
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r2 = r2.imagesArrLocationsVideo
                    r2.add(r4, r0)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r0 = r0.imagesArrLocationsSizes
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    int r2 = r2.currentIndex
                    java.lang.Object r0 = r0.get(r2)
                    java.lang.Long r0 = (java.lang.Long) r0
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r2 = r2.imagesArrLocationsSizes
                    org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                    int r5 = r5.currentIndex
                    r2.remove(r5)
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r2 = r2.imagesArrLocationsSizes
                    r2.add(r4, r0)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r0 = r0.imagesArrMessages
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    int r2 = r2.currentIndex
                    java.lang.Object r0 = r0.get(r2)
                    org.telegram.tgnet.TLRPC$Message r0 = (org.telegram.tgnet.TLRPC$Message) r0
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r2 = r2.imagesArrMessages
                    org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                    int r5 = r5.currentIndex
                    r2.remove(r5)
                    org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                    java.util.ArrayList r2 = r2.imagesArrMessages
                    r2.add(r4, r0)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    int unused = r0.currentIndex = r1
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.setImageIndex(r4)
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.Components.GroupedPhotosListView r0 = r0.groupedPhotosListView
                    r0.clear()
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.Components.GroupedPhotosListView r0 = r0.groupedPhotosListView
                    r0.fillList()
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.Components.UndoView r0 = r0.hintView
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    long r1 = r1.avatarsDialogId
                    r4 = 22
                    org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r5 = r5.currentFileLocationVideo
                    org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r6 = r6.currentFileLocation
                    if (r5 != r6) goto L_0x0b97
                    r3 = r9
                L_0x0b97:
                    r0.showWithAction((long) r1, (int) r4, (java.lang.Object) r3)
                    org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda5 r0 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda5
                    r0.<init>(r7)
                    r1 = 300(0x12c, double:1.48E-321)
                    org.telegram.messenger.AndroidUtilities.runOnUIThread(r0, r1)
                    goto L_0x0c8a
                L_0x0ba6:
                    return
                L_0x0ba7:
                    r1 = 17
                    if (r0 != r1) goto L_0x0c8a
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    int r0 = r0.currentAccount
                    org.telegram.messenger.FileLoader r0 = org.telegram.messenger.FileLoader.getInstance(r0)
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r1 = r1.currentFileLocationVideo
                    org.telegram.tgnet.TLRPC$FileLocation r1 = org.telegram.ui.PhotoViewer.getFileLocation(r1)
                    org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r3 = r3.currentFileLocationVideo
                    java.lang.String r3 = org.telegram.ui.PhotoViewer.getFileLocationExt(r3)
                    java.io.File r0 = r0.getPathToAttach(r1, r3, r2)
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r1 = r1.currentFileLocationVideo
                    int r1 = r1.imageType
                    if (r1 != r10) goto L_0x0bd8
                    r4 = 1
                L_0x0bd8:
                    if (r4 == 0) goto L_0x0CLASSNAME
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    int r1 = r1.currentAccount
                    org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
                    org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r3 = r3.currentFileLocation
                    org.telegram.tgnet.TLRPC$FileLocation r3 = org.telegram.ui.PhotoViewer.getFileLocation(r3)
                    org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.ImageLocation r5 = r5.currentFileLocation
                    java.lang.String r5 = org.telegram.ui.PhotoViewer.getFileLocationExt(r5)
                    java.io.File r1 = r1.getPathToAttach(r3, r5, r2)
                    java.lang.String r9 = r1.getAbsolutePath()
                L_0x0CLASSNAME:
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$PhotoViewerProvider r1 = r1.placeProvider
                    java.lang.String r0 = r0.getAbsolutePath()
                    r1.openPhotoForEdit(r0, r9, r4)
                    goto L_0x0c8a
                L_0x0c0f:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r0 = r0.parentActivity
                    if (r0 == 0) goto L_0x0CLASSNAME
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    if (r0 != 0) goto L_0x0CLASSNAME
                    goto L_0x0CLASSNAME
                L_0x0CLASSNAME:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner
                    org.telegram.tgnet.TLRPC$MessageMedia r0 = org.telegram.messenger.MessageObject.getMedia(r0)
                    boolean r0 = r0 instanceof org.telegram.tgnet.TLRPC$TL_messageMediaPhoto
                    if (r0 == 0) goto L_0x0CLASSNAME
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner
                    org.telegram.tgnet.TLRPC$MessageMedia r0 = org.telegram.messenger.MessageObject.getMedia(r0)
                    org.telegram.tgnet.TLRPC$Photo r0 = r0.photo
                L_0x0c3e:
                    r5 = r0
                    goto L_0x0c5f
                L_0x0CLASSNAME:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner
                    org.telegram.tgnet.TLRPC$MessageMedia r0 = org.telegram.messenger.MessageObject.getMedia(r0)
                    boolean r0 = r0 instanceof org.telegram.tgnet.TLRPC$TL_messageMediaDocument
                    if (r0 == 0) goto L_0x0CLASSNAME
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                    org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner
                    org.telegram.tgnet.TLRPC$MessageMedia r0 = org.telegram.messenger.MessageObject.getMedia(r0)
                    org.telegram.tgnet.TLRPC$Document r0 = r0.document
                    goto L_0x0c3e
                L_0x0c5f:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.PhotoViewer$12$1 r8 = new org.telegram.ui.PhotoViewer$12$1
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    android.app.Activity r3 = r1.parentActivity
                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                    org.telegram.messenger.MessageObject r4 = r1.currentMessageObject
                    org.telegram.ui.ActionBar.Theme$ResourcesProvider r6 = r15
                    r1 = r8
                    r2 = r22
                    r1.<init>(r3, r4, r5, r6)
                    org.telegram.ui.Components.StickersAlert unused = r0.masksAlert = r8
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.Components.StickersAlert r0 = r0.masksAlert
                    r0.show()
                    goto L_0x0c8a
                L_0x0CLASSNAME:
                    return
                L_0x0CLASSNAME:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    r0.onSharePressed()
                L_0x0c8a:
                    return
                */
                throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.AnonymousClass12.onItemClick(int):void");
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onItemClick$8(UserConfig userConfig, TLRPC$Photo tLRPC$Photo, TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
                AndroidUtilities.runOnUIThread(new PhotoViewer$12$$ExternalSyntheticLambda6(this, tLObject, userConfig, tLRPC$Photo));
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onItemClick$7(TLObject tLObject, UserConfig userConfig, TLRPC$Photo tLRPC$Photo) {
                if (tLObject instanceof TLRPC$TL_photos_photo) {
                    TLRPC$TL_photos_photo tLRPC$TL_photos_photo = (TLRPC$TL_photos_photo) tLObject;
                    MessagesController.getInstance(PhotoViewer.this.currentAccount).putUsers(tLRPC$TL_photos_photo.users, false);
                    TLRPC$User user = MessagesController.getInstance(PhotoViewer.this.currentAccount).getUser(Long.valueOf(userConfig.clientUserId));
                    if (tLRPC$TL_photos_photo.photo instanceof TLRPC$TL_photo) {
                        int indexOf = PhotoViewer.this.avatarsArr.indexOf(tLRPC$Photo);
                        if (indexOf >= 0) {
                            PhotoViewer.this.avatarsArr.set(indexOf, tLRPC$TL_photos_photo.photo);
                        }
                        if (user != null) {
                            user.photo.photo_id = tLRPC$TL_photos_photo.photo.id;
                            userConfig.setCurrentUser(user);
                            userConfig.saveConfig(true);
                        }
                    }
                }
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onItemClick$9() {
                if (PhotoViewer.this.menuItem != null) {
                    PhotoViewer.this.menuItem.hideSubItem(16);
                }
            }

            public boolean canOpenMenu() {
                boolean z = true;
                if (PhotoViewer.this.currentMessageObject != null || PhotoViewer.this.currentSecureDocument != null) {
                    return true;
                }
                if (PhotoViewer.this.currentFileLocationVideo != null) {
                    FileLoader instance = FileLoader.getInstance(PhotoViewer.this.currentAccount);
                    TLRPC$FileLocation fileLocation = PhotoViewer.getFileLocation(PhotoViewer.this.currentFileLocationVideo);
                    String fileLocationExt = PhotoViewer.getFileLocationExt(PhotoViewer.this.currentFileLocationVideo);
                    if (PhotoViewer.this.avatarsDialogId == 0 && !PhotoViewer.this.isEvent) {
                        z = false;
                    }
                    return instance.getPathToAttach(fileLocation, fileLocationExt, z).exists();
                } else if (PhotoViewer.this.pageBlocksAdapter != null) {
                    return true;
                } else {
                    return false;
                }
            }
        });
        ActionBarMenu createMenu = this.actionBar.createMenu();
        ActionBarMenuItem addItem = createMenu.addItem(13, R.drawable.msg_mask);
        this.masksItem = addItem;
        addItem.setContentDescription(LocaleController.getString("Masks", R.string.Masks));
        ActionBarMenuItem addItem2 = createMenu.addItem(5, R.drawable.ic_goinline);
        this.pipItem = addItem2;
        addItem2.setContentDescription(LocaleController.getString("AccDescrPipMode", R.string.AccDescrPipMode));
        ActionBarMenuItem addItem3 = createMenu.addItem(3, R.drawable.msg_forward);
        this.sendItem = addItem3;
        addItem3.setContentDescription(LocaleController.getString("Forward", R.string.Forward));
        ActionBarMenuItem addItem4 = createMenu.addItem(18, R.drawable.share);
        this.shareItem = addItem4;
        int i3 = R.string.ShareFile;
        addItem4.setContentDescription(LocaleController.getString("ShareFile", i3));
        ActionBarMenuItem addItem5 = createMenu.addItem(0, R.drawable.ic_ab_other);
        this.menuItem = addItem5;
        addItem5.getPopupLayout().swipeBackGravityRight = true;
        this.chooseSpeedLayout = new ChooseSpeedLayout(this.activityContext, this.menuItem.getPopupLayout().getSwipeBack(), new ChooseSpeedLayout.Callback() {
            public void onSpeedSelected(float f) {
                PhotoViewer.this.menuItem.toggleSubMenu();
                if (f != PhotoViewer.this.currentVideoSpeed) {
                    float unused = PhotoViewer.this.currentVideoSpeed = f;
                    if (PhotoViewer.this.currentMessageObject != null) {
                        SharedPreferences sharedPreferences = ApplicationLoader.applicationContext.getSharedPreferences("playback_speed", 0);
                        if (Math.abs(PhotoViewer.this.currentVideoSpeed - 1.0f) < 0.001f) {
                            SharedPreferences.Editor edit = sharedPreferences.edit();
                            edit.remove("speed" + PhotoViewer.this.currentMessageObject.getDialogId() + "_" + PhotoViewer.this.currentMessageObject.getId()).commit();
                        } else {
                            SharedPreferences.Editor edit2 = sharedPreferences.edit();
                            edit2.putFloat("speed" + PhotoViewer.this.currentMessageObject.getDialogId() + "_" + PhotoViewer.this.currentMessageObject.getId(), PhotoViewer.this.currentVideoSpeed).commit();
                        }
                    }
                    if (PhotoViewer.this.videoPlayer != null) {
                        PhotoViewer.this.videoPlayer.setPlaybackSpeed(PhotoViewer.this.currentVideoSpeed);
                    }
                    if (PhotoViewer.this.photoViewerWebView != null) {
                        PhotoViewer.this.photoViewerWebView.setPlaybackSpeed(PhotoViewer.this.currentVideoSpeed);
                    }
                    PhotoViewer.this.setMenuItemIcon();
                }
            }
        });
        this.speedItem = this.menuItem.addSwipeBackItem(R.drawable.msg_speed, (Drawable) null, LocaleController.getString("Speed", R.string.Speed), this.chooseSpeedLayout.speedSwipeBackLayout);
        this.menuItem.getPopupLayout().setSwipeBackForegroundColor(-14540254);
        this.speedItem.setSubtext(LocaleController.getString("SpeedNormal", R.string.SpeedNormal));
        this.speedItem.setColors(-328966, -328966);
        ActionBarPopupWindow.GapView addColoredGap = this.menuItem.addColoredGap();
        this.speedGap = addColoredGap;
        addColoredGap.setColor(-15198184);
        this.menuItem.getPopupLayout().setFitItems(true);
        this.menuItem.addSubItem(11, R.drawable.msg_openin, LocaleController.getString("OpenInExternalApp", R.string.OpenInExternalApp)).setColors(-328966, -328966);
        this.menuItem.setContentDescription(LocaleController.getString("AccDescrMoreOptions", R.string.AccDescrMoreOptions));
        ActionBarMenuSubItem addSubItem = this.menuItem.addSubItem(2, R.drawable.msg_media, LocaleController.getString("ShowAllMedia", R.string.ShowAllMedia));
        this.allMediaItem = addSubItem;
        addSubItem.setColors(-328966, -328966);
        this.menuItem.addSubItem(14, R.drawable.msg_gif, LocaleController.getString("SaveToGIFs", R.string.SaveToGIFs)).setColors(-328966, -328966);
        this.menuItem.addSubItem(4, R.drawable.msg_message, LocaleController.getString("ShowInChat", R.string.ShowInChat)).setColors(-328966, -328966);
        this.menuItem.addSubItem(15, R.drawable.msg_sticker, LocaleController.getString("ShowStickers", R.string.ShowStickers)).setColors(-328966, -328966);
        this.menuItem.addSubItem(10, R.drawable.msg_shareout, LocaleController.getString("ShareFile", i3)).setColors(-328966, -328966);
        this.menuItem.addSubItem(1, R.drawable.msg_gallery, LocaleController.getString("SaveToGallery", R.string.SaveToGallery)).setColors(-328966, -328966);
        this.menuItem.addSubItem(16, R.drawable.msg_openprofile, LocaleController.getString("SetAsMain", R.string.SetAsMain)).setColors(-328966, -328966);
        this.menuItem.addSubItem(6, R.drawable.msg_delete, LocaleController.getString("Delete", R.string.Delete)).setColors(-328966, -328966);
        this.menuItem.addSubItem(7, R.drawable.msg_cancel, LocaleController.getString("StopDownload", R.string.StopDownload)).setColors(-328966, -328966);
        this.menuItem.redrawPopup(-NUM);
        setMenuItemIcon();
        this.menuItem.setPopupItemsSelectorColor(NUM);
        this.menuItem.setSubMenuDelegate(new ActionBarMenuItem.ActionBarSubMenuItemDelegate() {
            public void onShowSubMenu() {
                if (PhotoViewer.this.videoPlayerControlVisible && PhotoViewer.this.isPlaying) {
                    AndroidUtilities.cancelRunOnUIThread(PhotoViewer.this.hideActionBarRunnable);
                }
            }

            public void onHideSubMenu() {
                if (PhotoViewer.this.videoPlayerControlVisible && PhotoViewer.this.isPlaying) {
                    PhotoViewer.this.scheduleActionBarHide();
                }
            }
        });
        AnonymousClass15 r13 = new FrameLayout(this.activityContext) {
            /* access modifiers changed from: protected */
            public void measureChildWithMargins(View view, int i, int i2, int i3, int i4) {
                if (view == PhotoViewer.this.nameTextView || view == PhotoViewer.this.dateTextView) {
                    i2 = PhotoViewer.this.bottomButtonsLayout.getMeasuredWidth();
                }
                super.measureChildWithMargins(view, i, i2, i3, i4);
            }
        };
        this.bottomLayout = r13;
        r13.setBackgroundColor(NUM);
        this.containerView.addView(this.bottomLayout, LayoutHelper.createFrame(-1, 48, 83));
        View view = new View(this.activityContext);
        this.navigationBar = view;
        view.setBackgroundColor(NUM);
        this.windowView.addView(this.navigationBar, LayoutHelper.createFrame(-1.0f, ((float) this.navigationBarHeight) / AndroidUtilities.density, 87));
        this.pressedDrawable[0] = new GradientDrawable(GradientDrawable.Orientation.LEFT_RIGHT, new int[]{NUM, 0});
        this.pressedDrawable[0].setShape(0);
        this.pressedDrawable[1] = new GradientDrawable(GradientDrawable.Orientation.RIGHT_LEFT, new int[]{NUM, 0});
        this.pressedDrawable[1].setShape(0);
        GroupedPhotosListView groupedPhotosListView2 = new GroupedPhotosListView(this.activityContext, AndroidUtilities.dp(10.0f));
        this.groupedPhotosListView = groupedPhotosListView2;
        this.containerView.addView(groupedPhotosListView2, LayoutHelper.createFrame(-1, 68, 83));
        this.groupedPhotosListView.setDelegate(new GroupedPhotosListView.GroupedPhotosListViewDelegate() {
            public int getCurrentIndex() {
                return PhotoViewer.this.currentIndex;
            }

            public int getCurrentAccount() {
                return PhotoViewer.this.currentAccount;
            }

            public long getAvatarsDialogId() {
                return PhotoViewer.this.avatarsDialogId;
            }

            public int getSlideshowMessageId() {
                return PhotoViewer.this.slideshowMessageId;
            }

            public ArrayList<ImageLocation> getImagesArrLocations() {
                return PhotoViewer.this.imagesArrLocations;
            }

            public ArrayList<MessageObject> getImagesArr() {
                return PhotoViewer.this.imagesArr;
            }

            public List<TLRPC$PageBlock> getPageBlockArr() {
                if (PhotoViewer.this.pageBlocksAdapter != null) {
                    return PhotoViewer.this.pageBlocksAdapter.getAll();
                }
                return null;
            }

            public Object getParentObject() {
                if (PhotoViewer.this.pageBlocksAdapter != null) {
                    return PhotoViewer.this.pageBlocksAdapter.getParentObject();
                }
                return null;
            }

            public void setCurrentIndex(int i) {
                int unused = PhotoViewer.this.currentIndex = -1;
                if (PhotoViewer.this.currentThumb != null) {
                    PhotoViewer.this.currentThumb.release();
                    ImageReceiver.BitmapHolder unused2 = PhotoViewer.this.currentThumb = null;
                }
                boolean unused3 = PhotoViewer.this.dontAutoPlay = true;
                PhotoViewer.this.setImageIndex(i);
                boolean unused4 = PhotoViewer.this.dontAutoPlay = false;
            }

            public void onShowAnimationStart() {
                PhotoViewer.this.containerView.requestLayout();
            }

            public void onStopScrolling() {
                PhotoViewer photoViewer = PhotoViewer.this;
                if (photoViewer.shouldMessageObjectAutoPlayed(photoViewer.currentMessageObject)) {
                    boolean unused = PhotoViewer.this.playerAutoStarted = true;
                    PhotoViewer.this.onActionClick(true);
                    PhotoViewer.this.checkProgress(0, false, true);
                }
            }
        });
        for (int i4 = 0; i4 < 3; i4++) {
            this.fullscreenButton[i4] = new ImageView(this.parentActivity);
            this.fullscreenButton[i4].setImageResource(R.drawable.msg_maxvideo);
            this.fullscreenButton[i4].setContentDescription(LocaleController.getString("AccSwitchToFullscreen", R.string.AccSwitchToFullscreen));
            this.fullscreenButton[i4].setScaleType(ImageView.ScaleType.CENTER);
            this.fullscreenButton[i4].setBackground(Theme.createSelectorDrawable(NUM));
            this.fullscreenButton[i4].setVisibility(4);
            this.fullscreenButton[i4].setAlpha(1.0f);
            this.containerView.addView(this.fullscreenButton[i4], LayoutHelper.createFrame(48, 48.0f));
            this.fullscreenButton[i4].setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda31(this));
        }
        CaptionTextViewSwitcher captionTextViewSwitcher2 = new CaptionTextViewSwitcher(this.containerView.getContext());
        this.captionTextViewSwitcher = captionTextViewSwitcher2;
        captionTextViewSwitcher2.setFactory(new PhotoViewer$$ExternalSyntheticLambda50(this));
        this.captionTextViewSwitcher.setVisibility(4);
        setCaptionHwLayerEnabled(true);
        for (int i5 = 0; i5 < 3; i5++) {
            this.photoProgressViews[i5] = new PhotoProgressView(this.containerView) {
                /* access modifiers changed from: protected */
                public void onBackgroundStateUpdated(int i) {
                    if (this == PhotoViewer.this.photoProgressViews[0]) {
                        PhotoViewer.this.updateAccessibilityOverlayVisibility();
                    }
                }

                /* access modifiers changed from: protected */
                public void onVisibilityChanged(boolean z) {
                    if (this == PhotoViewer.this.photoProgressViews[0]) {
                        PhotoViewer.this.updateAccessibilityOverlayVisibility();
                    }
                }
            };
            this.photoProgressViews[i5].setBackgroundState(0, false, true);
        }
        AnonymousClass18 r14 = new RadialProgressView(this.activityContext, resourcesProvider3) {
            public void setAlpha(float f) {
                super.setAlpha(f);
                if (PhotoViewer.this.containerView != null) {
                    PhotoViewer.this.containerView.invalidate();
                }
            }

            public void invalidate() {
                super.invalidate();
                if (PhotoViewer.this.containerView != null) {
                    PhotoViewer.this.containerView.invalidate();
                }
            }
        };
        this.miniProgressView = r14;
        r14.setUseSelfAlpha(true);
        this.miniProgressView.setProgressColor(-1);
        this.miniProgressView.setSize(AndroidUtilities.dp(54.0f));
        RadialProgressView radialProgressView = this.miniProgressView;
        int i6 = R.drawable.circle_big;
        radialProgressView.setBackgroundResource(i6);
        this.miniProgressView.setVisibility(4);
        this.miniProgressView.setAlpha(0.0f);
        this.containerView.addView(this.miniProgressView, LayoutHelper.createFrame(64, 64, 17));
        LinearLayout linearLayout = new LinearLayout(this.containerView.getContext());
        this.bottomButtonsLayout = linearLayout;
        linearLayout.setOrientation(0);
        this.bottomLayout.addView(this.bottomButtonsLayout, LayoutHelper.createFrame(-2, -1, 53));
        ImageView imageView = new ImageView(this.containerView.getContext());
        this.paintButton = imageView;
        int i7 = R.drawable.msg_photo_draw;
        imageView.setImageResource(i7);
        this.paintButton.setScaleType(ImageView.ScaleType.CENTER);
        this.paintButton.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
        this.bottomButtonsLayout.addView(this.paintButton, LayoutHelper.createFrame(50, -1.0f));
        this.paintButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda30(this));
        ImageView imageView2 = this.paintButton;
        int i8 = R.string.AccDescrPhotoEditor;
        imageView2.setContentDescription(LocaleController.getString("AccDescrPhotoEditor", i8));
        ImageView imageView3 = new ImageView(this.containerView.getContext());
        this.shareButton = imageView3;
        imageView3.setImageResource(R.drawable.share);
        this.shareButton.setScaleType(ImageView.ScaleType.CENTER);
        this.shareButton.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
        this.bottomButtonsLayout.addView(this.shareButton, LayoutHelper.createFrame(50, -1.0f));
        this.shareButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda34(this));
        this.shareButton.setContentDescription(LocaleController.getString("ShareFile", R.string.ShareFile));
        AnonymousClass19 r15 = new FadingTextViewLayout(this, this.containerView.getContext()) {
            /* access modifiers changed from: protected */
            public void onTextViewCreated(TextView textView) {
                super.onTextViewCreated(textView);
                textView.setTextSize(1, 14.0f);
                textView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
                textView.setEllipsize(TextUtils.TruncateAt.END);
                textView.setTextColor(-1);
                textView.setGravity(3);
            }
        };
        this.nameTextView = r15;
        this.bottomLayout.addView(r15, LayoutHelper.createFrame(-1, -2.0f, 51, 16.0f, 5.0f, 8.0f, 0.0f));
        AnonymousClass20 r16 = new FadingTextViewLayout(this, this.containerView.getContext(), true) {
            private LocaleController.LocaleInfo lastLocaleInfo = null;
            private int staticCharsCount = 0;

            /* access modifiers changed from: protected */
            public void onTextViewCreated(TextView textView) {
                super.onTextViewCreated(textView);
                textView.setTextSize(1, 13.0f);
                textView.setEllipsize(TextUtils.TruncateAt.END);
                textView.setTextColor(-1);
                textView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
                textView.setGravity(3);
            }

            /* access modifiers changed from: protected */
            public int getStaticCharsCount() {
                LocaleController.LocaleInfo currentLocaleInfo = LocaleController.getInstance().getCurrentLocaleInfo();
                if (this.lastLocaleInfo != currentLocaleInfo) {
                    this.lastLocaleInfo = currentLocaleInfo;
                    this.staticCharsCount = LocaleController.formatString("formatDateAtTime", R.string.formatDateAtTime, LocaleController.getInstance().formatterYear.format(new Date()), LocaleController.getInstance().formatterDay.format(new Date())).length();
                }
                return this.staticCharsCount;
            }

            public void setText(CharSequence charSequence, boolean z) {
                int staticCharsCount2;
                boolean z2 = false;
                if (z) {
                    if (!LocaleController.isRTL || (staticCharsCount2 = getStaticCharsCount()) <= 0 || (charSequence.length() == staticCharsCount2 && getText() != null && getText().length() == staticCharsCount2)) {
                        z2 = true;
                    }
                    setText(charSequence, true, z2);
                    return;
                }
                setText(charSequence, false, false);
            }
        };
        this.dateTextView = r16;
        this.bottomLayout.addView(r16, LayoutHelper.createFrame(-1, -2.0f, 51, 16.0f, 25.0f, 8.0f, 0.0f));
        createVideoControlsInterface();
        RadialProgressView radialProgressView2 = new RadialProgressView(this.parentActivity, resourcesProvider3);
        this.progressView = radialProgressView2;
        radialProgressView2.setProgressColor(-1);
        this.progressView.setBackgroundResource(i6);
        this.progressView.setVisibility(4);
        this.containerView.addView(this.progressView, LayoutHelper.createFrame(54, 54, 17));
        PickerBottomLayoutViewer pickerBottomLayoutViewer = new PickerBottomLayoutViewer(this.parentActivity);
        this.qualityPicker = pickerBottomLayoutViewer;
        pickerBottomLayoutViewer.setBackgroundColor(NUM);
        this.qualityPicker.updateSelectedCount(0, false);
        this.qualityPicker.setTranslationY((float) AndroidUtilities.dp(120.0f));
        this.qualityPicker.doneButton.setText(LocaleController.getString("Done", R.string.Done).toUpperCase());
        this.qualityPicker.doneButton.setTextColor(getThemedColor("dialogFloatingButton"));
        this.containerView.addView(this.qualityPicker, LayoutHelper.createFrame(-1, 48, 83));
        this.qualityPicker.cancelButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda29(this));
        this.qualityPicker.doneButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda38(this));
        VideoForwardDrawable videoForwardDrawable2 = new VideoForwardDrawable(false);
        this.videoForwardDrawable = videoForwardDrawable2;
        videoForwardDrawable2.setDelegate(new VideoForwardDrawable.VideoForwardDrawableDelegate() {
            public void onAnimationEnd() {
            }

            public void invalidate() {
                PhotoViewer.this.containerView.invalidate();
            }
        });
        QualityChooseView qualityChooseView2 = new QualityChooseView(this.parentActivity);
        this.qualityChooseView = qualityChooseView2;
        qualityChooseView2.setTranslationY((float) AndroidUtilities.dp(120.0f));
        this.qualityChooseView.setVisibility(4);
        this.qualityChooseView.setBackgroundColor(NUM);
        this.containerView.addView(this.qualityChooseView, LayoutHelper.createFrame(-1, 70.0f, 83, 0.0f, 0.0f, 0.0f, 48.0f));
        AnonymousClass22 r17 = new FrameLayout(this.activityContext) {
            public boolean dispatchTouchEvent(MotionEvent motionEvent) {
                return PhotoViewer.this.bottomTouchEnabled && super.dispatchTouchEvent(motionEvent);
            }

            public boolean onInterceptTouchEvent(MotionEvent motionEvent) {
                return PhotoViewer.this.bottomTouchEnabled && super.onInterceptTouchEvent(motionEvent);
            }

            public boolean onTouchEvent(MotionEvent motionEvent) {
                return PhotoViewer.this.bottomTouchEnabled && super.onTouchEvent(motionEvent);
            }

            public void setTranslationY(float f) {
                super.setTranslationY(f);
                if (!(PhotoViewer.this.videoTimelineView == null || PhotoViewer.this.videoTimelineView.getVisibility() == 8)) {
                    PhotoViewer.this.videoTimelineView.setTranslationY(f);
                    PhotoViewer.this.videoAvatarTooltip.setTranslationY(f);
                }
                if (PhotoViewer.this.videoAvatarTooltip != null && PhotoViewer.this.videoAvatarTooltip.getVisibility() != 8) {
                    PhotoViewer.this.videoAvatarTooltip.setTranslationY(f);
                }
            }

            public void setAlpha(float f) {
                super.setAlpha(f);
                if (PhotoViewer.this.videoTimelineView != null && PhotoViewer.this.videoTimelineView.getVisibility() != 8) {
                    PhotoViewer.this.videoTimelineView.setAlpha(f);
                }
            }

            public void setVisibility(int i) {
                super.setVisibility(i);
                if (PhotoViewer.this.videoTimelineView != null && PhotoViewer.this.videoTimelineView.getVisibility() != 8) {
                    PhotoViewer.this.videoTimelineView.setVisibility(i == 0 ? 0 : 4);
                }
            }

            /* access modifiers changed from: protected */
            public void onLayout(boolean z, int i, int i2, int i3, int i4) {
                super.onLayout(z, i, i2, i3, i4);
                if (PhotoViewer.this.itemsLayout.getVisibility() != 8) {
                    int dp = (((i3 - i) - AndroidUtilities.dp(70.0f)) - PhotoViewer.this.itemsLayout.getMeasuredWidth()) / 2;
                    PhotoViewer.this.itemsLayout.layout(dp, PhotoViewer.this.itemsLayout.getTop(), PhotoViewer.this.itemsLayout.getMeasuredWidth() + dp, PhotoViewer.this.itemsLayout.getTop() + PhotoViewer.this.itemsLayout.getMeasuredHeight());
                }
            }
        };
        this.pickerView = r17;
        r17.setBackgroundColor(NUM);
        this.containerView.addView(this.pickerView, LayoutHelper.createFrame(-1, -2, 83));
        TextView textView = new TextView(this.containerView.getContext());
        this.docNameTextView = textView;
        textView.setTextSize(1, 15.0f);
        this.docNameTextView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        this.docNameTextView.setSingleLine(true);
        this.docNameTextView.setMaxLines(1);
        this.docNameTextView.setEllipsize(TextUtils.TruncateAt.END);
        this.docNameTextView.setTextColor(-1);
        this.docNameTextView.setGravity(3);
        this.pickerView.addView(this.docNameTextView, LayoutHelper.createFrame(-1, -2.0f, 51, 20.0f, 23.0f, 84.0f, 0.0f));
        TextView textView2 = new TextView(this.containerView.getContext());
        this.docInfoTextView = textView2;
        textView2.setTextSize(1, 14.0f);
        this.docInfoTextView.setSingleLine(true);
        this.docInfoTextView.setMaxLines(1);
        this.docInfoTextView.setEllipsize(TextUtils.TruncateAt.END);
        this.docInfoTextView.setTextColor(-1);
        this.docInfoTextView.setGravity(3);
        this.pickerView.addView(this.docInfoTextView, LayoutHelper.createFrame(-1, -2.0f, 51, 20.0f, 46.0f, 84.0f, 0.0f));
        AnonymousClass23 r18 = new VideoTimelinePlayView(this.parentActivity) {
            public void setTranslationY(float f) {
                if (getTranslationY() != f) {
                    super.setTranslationY(f);
                    PhotoViewer.this.containerView.invalidate();
                }
            }
        };
        this.videoTimelineView = r18;
        r18.setDelegate(new VideoTimelinePlayView.VideoTimelineViewDelegate() {
            private int seekTo;
            private Runnable seekToRunnable;
            private boolean wasPlaying;

            public void onLeftProgressChanged(float f) {
                if (PhotoViewer.this.videoPlayer != null) {
                    if (PhotoViewer.this.videoPlayer.isPlaying()) {
                        boolean unused = PhotoViewer.this.manuallyPaused = false;
                        PhotoViewer.this.videoPlayer.pause();
                        PhotoViewer.this.containerView.invalidate();
                    }
                    updateAvatarStartTime(1);
                    seekTo(f);
                    PhotoViewer.this.videoPlayerSeekbar.setProgress(0.0f);
                    PhotoViewer.this.videoTimelineView.setProgress(f);
                    PhotoViewer.this.updateVideoInfo();
                }
            }

            public void onRightProgressChanged(float f) {
                if (PhotoViewer.this.videoPlayer != null) {
                    if (PhotoViewer.this.videoPlayer.isPlaying()) {
                        boolean unused = PhotoViewer.this.manuallyPaused = false;
                        PhotoViewer.this.videoPlayer.pause();
                        PhotoViewer.this.containerView.invalidate();
                    }
                    updateAvatarStartTime(2);
                    seekTo(f);
                    PhotoViewer.this.videoPlayerSeekbar.setProgress(1.0f);
                    PhotoViewer.this.videoTimelineView.setProgress(f);
                    PhotoViewer.this.updateVideoInfo();
                }
            }

            public void onPlayProgressChanged(float f) {
                if (PhotoViewer.this.videoPlayer != null) {
                    if (PhotoViewer.this.sendPhotoType == 1) {
                        updateAvatarStartTime(0);
                    }
                    seekTo(f);
                }
            }

            private void seekTo(float f) {
                this.seekTo = (int) (PhotoViewer.this.videoDuration * f);
                if (SharedConfig.getDevicePerformanceClass() == 2) {
                    PhotoViewer.this.seekVideoOrWebTo((long) this.seekTo);
                    if (PhotoViewer.this.sendPhotoType == 1) {
                        long unused = PhotoViewer.this.needCaptureFrameReadyAtTime = (long) this.seekTo;
                        if (PhotoViewer.this.captureFrameReadyAtTime != PhotoViewer.this.needCaptureFrameReadyAtTime) {
                            long unused2 = PhotoViewer.this.captureFrameReadyAtTime = -1;
                        }
                    }
                    this.seekToRunnable = null;
                } else if (this.seekToRunnable == null) {
                    PhotoViewer$24$$ExternalSyntheticLambda0 photoViewer$24$$ExternalSyntheticLambda0 = new PhotoViewer$24$$ExternalSyntheticLambda0(this);
                    this.seekToRunnable = photoViewer$24$$ExternalSyntheticLambda0;
                    AndroidUtilities.runOnUIThread(photoViewer$24$$ExternalSyntheticLambda0, 100);
                }
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$seekTo$0() {
                PhotoViewer.this.seekVideoOrWebTo((long) this.seekTo);
                if (PhotoViewer.this.sendPhotoType == 1) {
                    long unused = PhotoViewer.this.needCaptureFrameReadyAtTime = (long) this.seekTo;
                    if (PhotoViewer.this.captureFrameReadyAtTime != PhotoViewer.this.needCaptureFrameReadyAtTime) {
                        long unused2 = PhotoViewer.this.captureFrameReadyAtTime = -1;
                    }
                }
                this.seekToRunnable = null;
            }

            private void updateAvatarStartTime(int i) {
                if (PhotoViewer.this.sendPhotoType == 1) {
                    if (i == 0) {
                        PhotoViewer photoViewer = PhotoViewer.this;
                        float unused = photoViewer.avatarStartProgress = photoViewer.videoTimelineView.getProgress();
                        PhotoViewer photoViewer2 = PhotoViewer.this;
                        long unused2 = photoViewer2.avatarStartTime = (long) (photoViewer2.videoDuration * 1000.0f * PhotoViewer.this.avatarStartProgress);
                    } else if (PhotoViewer.this.photoCropView == null) {
                    } else {
                        if (PhotoViewer.this.videoTimelineView.getLeftProgress() > PhotoViewer.this.avatarStartProgress || PhotoViewer.this.videoTimelineView.getRightProgress() < PhotoViewer.this.avatarStartProgress) {
                            PhotoViewer.this.photoCropView.setVideoThumbVisible(false);
                            if (i == 1) {
                                PhotoViewer photoViewer3 = PhotoViewer.this;
                                long unused3 = photoViewer3.avatarStartTime = (long) (photoViewer3.videoDuration * 1000.0f * PhotoViewer.this.videoTimelineView.getLeftProgress());
                            } else {
                                PhotoViewer photoViewer4 = PhotoViewer.this;
                                long unused4 = photoViewer4.avatarStartTime = (long) (photoViewer4.videoDuration * 1000.0f * PhotoViewer.this.videoTimelineView.getRightProgress());
                            }
                            long unused5 = PhotoViewer.this.captureFrameAtTime = -1;
                        }
                    }
                }
            }

            public void didStartDragging(int i) {
                if (i == VideoTimelinePlayView.TYPE_PROGRESS) {
                    PhotoViewer.this.cancelVideoPlayRunnable();
                    if (PhotoViewer.this.sendPhotoType == 1) {
                        PhotoViewer.this.cancelFlashAnimations();
                        long unused = PhotoViewer.this.captureFrameAtTime = -1;
                    }
                    boolean access$18900 = PhotoViewer.this.isVideoPlaying();
                    this.wasPlaying = access$18900;
                    if (access$18900) {
                        boolean unused2 = PhotoViewer.this.manuallyPaused = false;
                        PhotoViewer.this.pauseVideoOrWeb();
                        PhotoViewer.this.containerView.invalidate();
                    }
                }
            }

            public void didStopDragging(int i) {
                Runnable runnable = this.seekToRunnable;
                if (runnable != null) {
                    AndroidUtilities.cancelRunOnUIThread(runnable);
                    this.seekToRunnable.run();
                }
                PhotoViewer.this.cancelVideoPlayRunnable();
                if (PhotoViewer.this.sendPhotoType == 1 && PhotoViewer.this.flashView != null && i == VideoTimelinePlayView.TYPE_PROGRESS) {
                    PhotoViewer.this.cancelFlashAnimations();
                    PhotoViewer photoViewer = PhotoViewer.this;
                    long unused = photoViewer.captureFrameAtTime = photoViewer.avatarStartTime;
                    if (PhotoViewer.this.captureFrameReadyAtTime == ((long) this.seekTo)) {
                        PhotoViewer.this.captureCurrentFrame();
                    }
                } else if (PhotoViewer.this.sendPhotoType == 1 || this.wasPlaying) {
                    boolean unused2 = PhotoViewer.this.manuallyPaused = false;
                    PhotoViewer.this.playVideoOrWeb();
                }
            }
        });
        showVideoTimeline(false, false);
        this.videoTimelineView.setBackgroundColor(NUM);
        this.containerView.addView(this.videoTimelineView, LayoutHelper.createFrame(-1, 58.0f, 83, 0.0f, 8.0f, 0.0f, 0.0f));
        TextView textView3 = new TextView(this.parentActivity);
        this.videoAvatarTooltip = textView3;
        textView3.setSingleLine(true);
        this.videoAvatarTooltip.setVisibility(8);
        this.videoAvatarTooltip.setText(LocaleController.getString("ChooseCover", R.string.ChooseCover));
        this.videoAvatarTooltip.setGravity(1);
        this.videoAvatarTooltip.setTextSize(1, 14.0f);
        this.videoAvatarTooltip.setTextColor(-7566196);
        this.containerView.addView(this.videoAvatarTooltip, LayoutHelper.createFrame(-1, -2.0f, 83, 0.0f, 8.0f, 0.0f, 0.0f));
        AnonymousClass25 r19 = new ImageView(this.parentActivity) {
            public boolean dispatchTouchEvent(MotionEvent motionEvent) {
                return PhotoViewer.this.bottomTouchEnabled && super.dispatchTouchEvent(motionEvent);
            }

            public boolean onTouchEvent(MotionEvent motionEvent) {
                return PhotoViewer.this.bottomTouchEnabled && super.onTouchEvent(motionEvent);
            }

            public void setVisibility(int i) {
                super.setVisibility(i);
                if (PhotoViewer.this.captionEditText.getCaptionLimitOffset() < 0) {
                    PhotoViewer.this.captionLimitView.setVisibility(i);
                } else {
                    PhotoViewer.this.captionLimitView.setVisibility(8);
                }
            }

            public void setTranslationY(float f) {
                super.setTranslationY(f);
                PhotoViewer.this.captionLimitView.setTranslationY(f);
            }

            public void setAlpha(float f) {
                super.setAlpha(f);
                PhotoViewer.this.captionLimitView.setAlpha(f);
            }
        };
        this.pickerViewSendButton = r19;
        r19.setScaleType(ImageView.ScaleType.CENTER);
        int dp = AndroidUtilities.dp(56.0f);
        int themedColor = getThemedColor("dialogFloatingButton");
        int i9 = Build.VERSION.SDK_INT;
        if (i9 >= 21) {
            str = "dialogFloatingButtonPressed";
        } else {
            str = "dialogFloatingButton";
        }
        Drawable createSimpleSelectorCircleDrawable = Theme.createSimpleSelectorCircleDrawable(dp, themedColor, getThemedColor(str));
        this.pickerViewSendDrawable = createSimpleSelectorCircleDrawable;
        this.pickerViewSendButton.setBackgroundDrawable(createSimpleSelectorCircleDrawable);
        this.pickerViewSendButton.setColorFilter(new PorterDuffColorFilter(-1, PorterDuff.Mode.MULTIPLY));
        this.pickerViewSendButton.setImageResource(R.drawable.attach_send);
        this.pickerViewSendButton.setColorFilter(new PorterDuffColorFilter(getThemedColor("dialogFloatingIcon"), PorterDuff.Mode.MULTIPLY));
        this.containerView.addView(this.pickerViewSendButton, LayoutHelper.createFrame(56, 56.0f, 85, 0.0f, 0.0f, 14.0f, 14.0f));
        this.pickerViewSendButton.setContentDescription(LocaleController.getString("Send", R.string.Send));
        this.pickerViewSendButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda36(this));
        this.pickerViewSendButton.setOnLongClickListener(new PhotoViewer$$ExternalSyntheticLambda46(this, resourcesProvider3));
        TextView textView4 = new TextView(this.parentActivity);
        this.captionLimitView = textView4;
        textView4.setTextSize(1, 15.0f);
        this.captionLimitView.setTextColor(-1280137);
        this.captionLimitView.setGravity(17);
        this.captionLimitView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        this.containerView.addView(this.captionLimitView, LayoutHelper.createFrame(56, 20.0f, 85, 3.0f, 0.0f, 14.0f, 78.0f));
        AnonymousClass26 r110 = new LinearLayout(this.parentActivity) {
            /* access modifiers changed from: protected */
            public void onMeasure(int i, int i2) {
                int childCount = getChildCount();
                int i3 = 0;
                for (int i4 = 0; i4 < childCount; i4++) {
                    if (getChildAt(i4).getVisibility() == 0) {
                        i3++;
                    }
                }
                int size = View.MeasureSpec.getSize(i);
                int size2 = View.MeasureSpec.getSize(i2);
                if (i3 != 0) {
                    int min = Math.min(AndroidUtilities.dp(70.0f), size / i3);
                    if (PhotoViewer.this.compressItem.getVisibility() == 0) {
                        int max = Math.max(0, (min - AndroidUtilities.dp((float) (PhotoViewer.this.selectedCompression < 2 ? 48 : 64))) / 2);
                        PhotoViewer.this.compressItem.setPadding(max, 0, max, 0);
                    }
                    for (int i5 = 0; i5 < childCount; i5++) {
                        View childAt = getChildAt(i5);
                        if (childAt.getVisibility() != 8) {
                            childAt.measure(View.MeasureSpec.makeMeasureSpec(min, NUM), View.MeasureSpec.makeMeasureSpec(size2, NUM));
                        }
                    }
                    setMeasuredDimension(min * i3, size2);
                    return;
                }
                setMeasuredDimension(size, size2);
            }
        };
        this.itemsLayout = r110;
        r110.setOrientation(0);
        this.pickerView.addView(this.itemsLayout, LayoutHelper.createFrame(-2, 48.0f, 81, 0.0f, 0.0f, 70.0f, 0.0f));
        ImageView imageView4 = new ImageView(this.parentActivity);
        this.cropItem = imageView4;
        imageView4.setScaleType(ImageView.ScaleType.CENTER);
        this.cropItem.setImageResource(R.drawable.msg_photo_crop);
        this.cropItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
        this.itemsLayout.addView(this.cropItem, LayoutHelper.createLinear(48, 48));
        this.cropItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda41(this));
        this.cropItem.setContentDescription(LocaleController.getString("CropImage", R.string.CropImage));
        ImageView imageView5 = new ImageView(this.parentActivity);
        this.rotateItem = imageView5;
        imageView5.setScaleType(ImageView.ScaleType.CENTER);
        this.rotateItem.setImageResource(R.drawable.msg_photo_rotate);
        this.rotateItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
        this.itemsLayout.addView(this.rotateItem, LayoutHelper.createLinear(48, 48));
        this.rotateItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda23(this));
        this.rotateItem.setContentDescription(LocaleController.getString("AccDescrRotate", R.string.AccDescrRotate));
        ImageView imageView6 = new ImageView(this.parentActivity);
        this.mirrorItem = imageView6;
        imageView6.setScaleType(ImageView.ScaleType.CENTER);
        this.mirrorItem.setImageResource(R.drawable.msg_photo_flip);
        this.mirrorItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
        this.itemsLayout.addView(this.mirrorItem, LayoutHelper.createLinear(48, 48));
        this.mirrorItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda21(this));
        this.mirrorItem.setContentDescription(LocaleController.getString("AccDescrMirror", R.string.AccDescrMirror));
        ImageView imageView7 = new ImageView(this.parentActivity);
        this.paintItem = imageView7;
        imageView7.setScaleType(ImageView.ScaleType.CENTER);
        this.paintItem.setImageResource(i7);
        this.paintItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
        this.itemsLayout.addView(this.paintItem, LayoutHelper.createLinear(48, 48));
        this.paintItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda35(this));
        this.paintItem.setContentDescription(LocaleController.getString("AccDescrPhotoEditor", i8));
        ImageView imageView8 = new ImageView(this.parentActivity);
        this.muteItem = imageView8;
        imageView8.setScaleType(ImageView.ScaleType.CENTER);
        this.muteItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
        this.containerView.addView(this.muteItem, LayoutHelper.createFrame(48, 48.0f, 83, 16.0f, 0.0f, 0.0f, 0.0f));
        this.muteItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda25(this));
        ImageView imageView9 = new ImageView(this.parentActivity);
        this.cameraItem = imageView9;
        imageView9.setScaleType(ImageView.ScaleType.CENTER);
        this.cameraItem.setImageResource(R.drawable.photo_add);
        this.cameraItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
        this.cameraItem.setContentDescription(LocaleController.getString("AccDescrTakeMorePics", R.string.AccDescrTakeMorePics));
        this.containerView.addView(this.cameraItem, LayoutHelper.createFrame(48, 48.0f, 85, 0.0f, 0.0f, 16.0f, 0.0f));
        this.cameraItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda37(this));
        ImageView imageView10 = new ImageView(this.parentActivity);
        this.tuneItem = imageView10;
        imageView10.setScaleType(ImageView.ScaleType.CENTER);
        this.tuneItem.setImageResource(R.drawable.msg_photo_settings);
        this.tuneItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
        this.itemsLayout.addView(this.tuneItem, LayoutHelper.createLinear(48, 48));
        this.tuneItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda32(this));
        this.tuneItem.setContentDescription(LocaleController.getString("AccDescrPhotoAdjust", R.string.AccDescrPhotoAdjust));
        ImageView imageView11 = new ImageView(this.parentActivity);
        this.compressItem = imageView11;
        imageView11.setTag(1);
        this.compressItem.setScaleType(ImageView.ScaleType.CENTER);
        this.compressItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
        int selectCompression = selectCompression();
        this.selectedCompression = selectCompression;
        if (selectCompression <= 1) {
            this.compressItem.setImageResource(R.drawable.video_quality1);
        } else if (selectCompression == 2) {
            this.compressItem.setImageResource(R.drawable.video_quality2);
        } else {
            this.selectedCompression = this.compressionsCount - 1;
            this.compressItem.setImageResource(R.drawable.video_quality3);
        }
        this.compressItem.setContentDescription(LocaleController.getString("AccDescrVideoQuality", R.string.AccDescrVideoQuality));
        this.itemsLayout.addView(this.compressItem, LayoutHelper.createLinear(48, 48));
        this.compressItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda43(this, parentActivity2));
        ImageView imageView12 = new ImageView(this.parentActivity);
        this.timeItem = imageView12;
        imageView12.setScaleType(ImageView.ScaleType.CENTER);
        this.timeItem.setImageResource(R.drawable.msg_autodelete);
        this.timeItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
        this.timeItem.setContentDescription(LocaleController.getString("SetTimer", R.string.SetTimer));
        this.itemsLayout.addView(this.timeItem, LayoutHelper.createLinear(48, 48));
        this.timeItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda44(this, resourcesProvider3));
        PickerBottomLayoutViewer pickerBottomLayoutViewer2 = new PickerBottomLayoutViewer(this.activityContext);
        this.editorDoneLayout = pickerBottomLayoutViewer2;
        pickerBottomLayoutViewer2.setBackgroundColor(-NUM);
        this.editorDoneLayout.updateSelectedCount(0, false);
        this.editorDoneLayout.setVisibility(8);
        this.containerView.addView(this.editorDoneLayout, LayoutHelper.createFrame(-1, 48, 83));
        this.editorDoneLayout.cancelButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda19(this));
        this.editorDoneLayout.doneButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda20(this));
        TextView textView5 = new TextView(this.activityContext);
        this.resetButton = textView5;
        textView5.setClickable(false);
        this.resetButton.setVisibility(8);
        this.resetButton.setTextSize(1, 14.0f);
        this.resetButton.setTextColor(-1);
        this.resetButton.setGravity(17);
        this.resetButton.setBackgroundDrawable(Theme.createSelectorDrawable(-12763843, 0));
        this.resetButton.setPadding(AndroidUtilities.dp(20.0f), 0, AndroidUtilities.dp(20.0f), 0);
        this.resetButton.setText(LocaleController.getString("Reset", R.string.CropReset).toUpperCase());
        this.resetButton.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        this.editorDoneLayout.addView(this.resetButton, LayoutHelper.createFrame(-2, -1, 49));
        this.resetButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda18(this));
        GestureDetector2 gestureDetector2 = new GestureDetector2(this.containerView.getContext(), this);
        this.gestureDetector = gestureDetector2;
        gestureDetector2.setIsLongpressEnabled(false);
        setDoubleTapEnabled(true);
        PhotoViewer$$ExternalSyntheticLambda76 photoViewer$$ExternalSyntheticLambda76 = new PhotoViewer$$ExternalSyntheticLambda76(this);
        this.centerImage.setParentView(this.containerView);
        this.centerImage.setCrossfadeAlpha((byte) 2);
        this.centerImage.setInvalidateAll(true);
        this.centerImage.setDelegate(photoViewer$$ExternalSyntheticLambda76);
        this.leftImage.setParentView(this.containerView);
        this.leftImage.setCrossfadeAlpha((byte) 2);
        this.leftImage.setInvalidateAll(true);
        this.leftImage.setDelegate(photoViewer$$ExternalSyntheticLambda76);
        this.rightImage.setParentView(this.containerView);
        this.rightImage.setCrossfadeAlpha((byte) 2);
        this.rightImage.setInvalidateAll(true);
        this.rightImage.setDelegate(photoViewer$$ExternalSyntheticLambda76);
        int rotation = ((WindowManager) ApplicationLoader.applicationContext.getSystemService("window")).getDefaultDisplay().getRotation();
        AnonymousClass28 r111 = new CheckBox(this.containerView.getContext(), R.drawable.selectphoto_large) {
            public boolean onTouchEvent(MotionEvent motionEvent) {
                return PhotoViewer.this.bottomTouchEnabled && super.onTouchEvent(motionEvent);
            }
        };
        this.checkImageView = r111;
        r111.setDrawBackground(true);
        this.checkImageView.setHasBorder(true);
        this.checkImageView.setSize(34);
        this.checkImageView.setCheckOffset(AndroidUtilities.dp(1.0f));
        this.checkImageView.setColor(getThemedColor("dialogFloatingButton"), -1);
        this.checkImageView.setVisibility(8);
        this.containerView.addView(this.checkImageView, LayoutHelper.createFrame(34, 34.0f, 53, 0.0f, (rotation == 3 || rotation == 1) ? 61.0f : 71.0f, 11.0f, 0.0f));
        if (isStatusBarVisible()) {
            ((FrameLayout.LayoutParams) this.checkImageView.getLayoutParams()).topMargin += AndroidUtilities.statusBarHeight;
        }
        this.checkImageView.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda39(this));
        CounterView counterView = new CounterView(this.parentActivity);
        this.photosCounterView = counterView;
        this.containerView.addView(counterView, LayoutHelper.createFrame(40, 40.0f, 53, 0.0f, (rotation == 3 || rotation == 1) ? 58.0f : 68.0f, 64.0f, 0.0f));
        if (isStatusBarVisible()) {
            ((FrameLayout.LayoutParams) this.photosCounterView.getLayoutParams()).topMargin += AndroidUtilities.statusBarHeight;
        }
        this.photosCounterView.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda26(this));
        SelectedPhotosListView selectedPhotosListView2 = new SelectedPhotosListView(this.parentActivity);
        this.selectedPhotosListView = selectedPhotosListView2;
        selectedPhotosListView2.setVisibility(8);
        this.selectedPhotosListView.setAlpha(0.0f);
        this.selectedPhotosListView.setLayoutManager(new LinearLayoutManager(this, this.parentActivity, 0, true) {
            public void smoothScrollToPosition(RecyclerView recyclerView, RecyclerView.State state, int i) {
                AnonymousClass1 r2 = new LinearSmoothScrollerEnd(this, recyclerView.getContext()) {
                    /* access modifiers changed from: protected */
                    public int calculateTimeForDeceleration(int i) {
                        return Math.max(180, super.calculateTimeForDeceleration(i));
                    }
                };
                r2.setTargetPosition(i);
                startSmoothScroll(r2);
            }
        });
        SelectedPhotosListView selectedPhotosListView3 = this.selectedPhotosListView;
        ListAdapter listAdapter = new ListAdapter(this.parentActivity);
        this.selectedPhotosAdapter = listAdapter;
        selectedPhotosListView3.setAdapter(listAdapter);
        this.containerView.addView(this.selectedPhotosListView, LayoutHelper.createFrame(-1, 103, 51));
        this.selectedPhotosListView.setOnItemClickListener((RecyclerListView.OnItemClickListener) new PhotoViewer$$ExternalSyntheticLambda80(this));
        AnonymousClass30 r0 = new PhotoViewerCaptionEnterView(this.activityContext, this.containerView, this.windowView, resourcesProvider2) {
            public boolean dispatchTouchEvent(MotionEvent motionEvent) {
                try {
                    return !PhotoViewer.this.bottomTouchEnabled && super.dispatchTouchEvent(motionEvent);
                } catch (Exception e) {
                    FileLog.e((Throwable) e);
                    return false;
                }
            }

            public boolean onInterceptTouchEvent(MotionEvent motionEvent) {
                try {
                    return !PhotoViewer.this.bottomTouchEnabled && super.onInterceptTouchEvent(motionEvent);
                } catch (Exception e) {
                    FileLog.e((Throwable) e);
                    return false;
                }
            }

            public boolean onTouchEvent(MotionEvent motionEvent) {
                if (PhotoViewer.this.bottomTouchEnabled && motionEvent.getAction() == 0) {
                    PhotoViewer.this.keyboardAnimationEnabled = true;
                }
                if (PhotoViewer.this.bottomTouchEnabled || !super.onTouchEvent(motionEvent)) {
                    return false;
                }
                return true;
            }

            /* access modifiers changed from: protected */
            public void extendActionMode(ActionMode actionMode, Menu menu) {
                if (PhotoViewer.this.parentChatActivity != null) {
                    PhotoViewer.this.parentChatActivity.extendActionMode(menu);
                }
            }
        };
        this.captionEditText = r0;
        r0.setDelegate(new PhotoViewerCaptionEnterView.PhotoViewerCaptionEnterViewDelegate() {
            public void onCaptionEnter() {
                PhotoViewer.this.closeCaptionEnter(true);
            }

            public void onTextChanged(CharSequence charSequence) {
                if (!(PhotoViewer.this.mentionsAdapter == null || PhotoViewer.this.captionEditText == null || PhotoViewer.this.parentChatActivity == null || charSequence == null)) {
                    PhotoViewer.this.mentionsAdapter.searchUsernameOrHashtag(charSequence.toString(), PhotoViewer.this.captionEditText.getCursorPosition(), PhotoViewer.this.parentChatActivity.messages, false, false);
                }
                int access$14500 = PhotoViewer.this.getThemedColor("dialogFloatingIcon");
                if (PhotoViewer.this.captionEditText.getCaptionLimitOffset() < 0) {
                    PhotoViewer.this.captionLimitView.setText(Integer.toString(PhotoViewer.this.captionEditText.getCaptionLimitOffset()));
                    PhotoViewer.this.captionLimitView.setVisibility(PhotoViewer.this.pickerViewSendButton.getVisibility());
                    PhotoViewer.this.pickerViewSendButton.setColorFilter(new PorterDuffColorFilter(ColorUtils.setAlphaComponent(access$14500, (int) (((float) Color.alpha(access$14500)) * 0.58f)), PorterDuff.Mode.MULTIPLY));
                } else {
                    PhotoViewer.this.pickerViewSendButton.setColorFilter(new PorterDuffColorFilter(access$14500, PorterDuff.Mode.MULTIPLY));
                    PhotoViewer.this.captionLimitView.setVisibility(8);
                }
                if (PhotoViewer.this.placeProvider != null) {
                    PhotoViewer.this.placeProvider.onCaptionChanged(charSequence);
                }
            }

            public void onWindowSizeChanged(int i) {
                if (i - (ActionBar.getCurrentActionBarHeight() * 2) < AndroidUtilities.dp((float) ((Math.min(3, PhotoViewer.this.mentionsAdapter.getItemCount()) * 36) + (PhotoViewer.this.mentionsAdapter.getItemCount() > 3 ? 18 : 0)))) {
                    boolean unused = PhotoViewer.this.allowMentions = false;
                    if (PhotoViewer.this.mentionListView != null && PhotoViewer.this.mentionListView.getVisibility() == 0) {
                        PhotoViewer.this.mentionListView.setVisibility(4);
                        return;
                    }
                    return;
                }
                boolean unused2 = PhotoViewer.this.allowMentions = true;
                if (PhotoViewer.this.mentionListView != null && PhotoViewer.this.mentionListView.getVisibility() == 4) {
                    PhotoViewer.this.mentionListView.setVisibility(0);
                }
            }

            public void onEmojiViewOpen() {
                PhotoViewer.this.navigationBar.setVisibility(4);
                PhotoViewer photoViewer = PhotoViewer.this;
                photoViewer.animateNavBarColorTo(Theme.getColor("chat_emojiPanelBackground", photoViewer.captionEditText.getResourcesProvider()), false);
            }

            public void onEmojiViewCloseStart() {
                String str;
                int i;
                PhotoViewer.this.navigationBar.setVisibility(PhotoViewer.this.currentEditMode != 2 ? 0 : 4);
                PhotoViewer.this.animateNavBarColorTo(-16777216);
                setOffset(PhotoViewer.this.captionEditText.getEmojiPadding());
                if (PhotoViewer.this.captionEditText.getTag() != null) {
                    if (PhotoViewer.this.isCurrentVideo) {
                        ActionBar access$7500 = PhotoViewer.this.actionBar;
                        if (PhotoViewer.this.muteVideo) {
                            i = R.string.GifCaption;
                            str = "GifCaption";
                        } else {
                            i = R.string.VideoCaption;
                            str = "VideoCaption";
                        }
                        access$7500.setTitleAnimated(LocaleController.getString(str, i), true, 220);
                    } else {
                        PhotoViewer.this.actionBar.setTitleAnimated(LocaleController.getString("PhotoCaption", R.string.PhotoCaption), true, 220);
                    }
                    PhotoViewer.this.checkImageView.animate().alpha(0.0f).setDuration(220).start();
                    PhotoViewer.this.photosCounterView.animate().alpha(0.0f).setDuration(220).start();
                    PhotoViewer.this.selectedPhotosListView.animate().alpha(0.0f).translationY((float) (-AndroidUtilities.dp(10.0f))).setDuration(220).start();
                    return;
                }
                PhotoViewer.this.checkImageView.animate().alpha(1.0f).setDuration(220).start();
                PhotoViewer.this.photosCounterView.animate().alpha(1.0f).setDuration(220).start();
                if (PhotoViewer.this.lastTitle != null) {
                    PhotoViewer.this.actionBar.setTitleAnimated(PhotoViewer.this.lastTitle, false, 220);
                    String unused = PhotoViewer.this.lastTitle = null;
                }
            }

            public void onEmojiViewCloseEnd() {
                setOffset(0);
                PhotoViewer.this.captionEditText.setVisibility(8);
            }

            private void setOffset(int i) {
                for (int i2 = 0; i2 < PhotoViewer.this.containerView.getChildCount(); i2++) {
                    View childAt = PhotoViewer.this.containerView.getChildAt(i2);
                    if (childAt == PhotoViewer.this.cameraItem || childAt == PhotoViewer.this.muteItem || childAt == PhotoViewer.this.pickerView || childAt == PhotoViewer.this.videoTimelineView || childAt == PhotoViewer.this.pickerViewSendButton || childAt == PhotoViewer.this.captionTextViewSwitcher || (PhotoViewer.this.muteItem.getVisibility() == 0 && childAt == PhotoViewer.this.bottomLayout)) {
                        childAt.setTranslationY((float) i);
                    }
                }
            }
        });
        if (i9 >= 19) {
            this.captionEditText.setImportantForAccessibility(4);
        }
        this.captionEditText.setVisibility(8);
        this.containerView.addView(this.captionEditText, LayoutHelper.createFrame(-1, -2, 83));
        AnonymousClass32 r02 = new RecyclerListView(this.activityContext, resourcesProvider3) {
            public boolean dispatchTouchEvent(MotionEvent motionEvent) {
                return !PhotoViewer.this.bottomTouchEnabled && super.dispatchTouchEvent(motionEvent);
            }

            public boolean onInterceptTouchEvent(MotionEvent motionEvent) {
                return !PhotoViewer.this.bottomTouchEnabled && super.onInterceptTouchEvent(motionEvent);
            }

            public boolean onTouchEvent(MotionEvent motionEvent) {
                return !PhotoViewer.this.bottomTouchEnabled && super.onTouchEvent(motionEvent);
            }
        };
        this.mentionListView = r02;
        r02.setTag(5);
        AnonymousClass33 r03 = new LinearLayoutManager(this, this.activityContext) {
            public boolean supportsPredictiveItemAnimations() {
                return false;
            }
        };
        this.mentionLayoutManager = r03;
        r03.setOrientation(1);
        this.mentionListView.setLayoutManager(this.mentionLayoutManager);
        this.mentionListView.setBackgroundColor(NUM);
        this.mentionListView.setVisibility(8);
        this.mentionListView.setClipToPadding(true);
        this.mentionListView.setOverScrollMode(2);
        this.containerView.addView(this.mentionListView, LayoutHelper.createFrame(-1, 110, 83));
        RecyclerListView recyclerListView = this.mentionListView;
        MentionsAdapter mentionsAdapter2 = new MentionsAdapter(this.activityContext, true, 0, 0, new MentionsAdapter.MentionsAdapterDelegate() {
            public void onContextClick(TLRPC$BotInlineResult tLRPC$BotInlineResult) {
            }

            public void onContextSearch(boolean z) {
            }

            public void onItemCountUpdate(int i, int i2) {
            }

            public void needChangePanelVisibility(boolean z) {
                if (z) {
                    FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) PhotoViewer.this.mentionListView.getLayoutParams();
                    float min = (float) ((Math.min(3, PhotoViewer.this.mentionsAdapter.getItemCount()) * 36) + (PhotoViewer.this.mentionsAdapter.getItemCount() > 3 ? 18 : 0));
                    layoutParams.height = AndroidUtilities.dp(min);
                    layoutParams.topMargin = -AndroidUtilities.dp(min);
                    PhotoViewer.this.mentionListView.setLayoutParams(layoutParams);
                    if (PhotoViewer.this.mentionListAnimation != null) {
                        PhotoViewer.this.mentionListAnimation.cancel();
                        AnimatorSet unused = PhotoViewer.this.mentionListAnimation = null;
                    }
                    if (PhotoViewer.this.mentionListView.getVisibility() == 0) {
                        PhotoViewer.this.mentionListView.setAlpha(1.0f);
                        return;
                    }
                    PhotoViewer.this.mentionLayoutManager.scrollToPositionWithOffset(0, 10000);
                    if (PhotoViewer.this.allowMentions) {
                        PhotoViewer.this.mentionListView.setVisibility(0);
                        AnimatorSet unused2 = PhotoViewer.this.mentionListAnimation = new AnimatorSet();
                        PhotoViewer.this.mentionListAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.mentionListView, View.ALPHA, new float[]{0.0f, 1.0f})});
                        PhotoViewer.this.mentionListAnimation.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animator) {
                                if (PhotoViewer.this.mentionListAnimation != null && PhotoViewer.this.mentionListAnimation.equals(animator)) {
                                    AnimatorSet unused = PhotoViewer.this.mentionListAnimation = null;
                                }
                            }
                        });
                        PhotoViewer.this.mentionListAnimation.setDuration(200);
                        PhotoViewer.this.mentionListAnimation.start();
                        return;
                    }
                    PhotoViewer.this.mentionListView.setAlpha(1.0f);
                    PhotoViewer.this.mentionListView.setVisibility(4);
                    return;
                }
                if (PhotoViewer.this.mentionListAnimation != null) {
                    PhotoViewer.this.mentionListAnimation.cancel();
                    AnimatorSet unused3 = PhotoViewer.this.mentionListAnimation = null;
                }
                if (PhotoViewer.this.mentionListView.getVisibility() != 8) {
                    if (PhotoViewer.this.allowMentions) {
                        AnimatorSet unused4 = PhotoViewer.this.mentionListAnimation = new AnimatorSet();
                        PhotoViewer.this.mentionListAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.mentionListView, View.ALPHA, new float[]{0.0f})});
                        PhotoViewer.this.mentionListAnimation.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animator) {
                                if (PhotoViewer.this.mentionListAnimation != null && PhotoViewer.this.mentionListAnimation.equals(animator)) {
                                    PhotoViewer.this.mentionListView.setVisibility(8);
                                    AnimatorSet unused = PhotoViewer.this.mentionListAnimation = null;
                                }
                            }
                        });
                        PhotoViewer.this.mentionListAnimation.setDuration(200);
                        PhotoViewer.this.mentionListAnimation.start();
                        return;
                    }
                    PhotoViewer.this.mentionListView.setVisibility(8);
                }
            }
        }, resourcesProvider2);
        this.mentionsAdapter = mentionsAdapter2;
        recyclerListView.setAdapter(mentionsAdapter2);
        this.mentionListView.setOnItemClickListener((RecyclerListView.OnItemClickListener) new PhotoViewer$$ExternalSyntheticLambda81(this));
        this.mentionListView.setOnItemLongClickListener((RecyclerListView.OnItemLongClickListener) new PhotoViewer$$ExternalSyntheticLambda82(this, resourcesProvider3));
        UndoView undoView = new UndoView(this.activityContext, (BaseFragment) null, false, resourcesProvider3);
        this.hintView = undoView;
        undoView.setAdditionalTranslationY((float) AndroidUtilities.dp(112.0f));
        this.hintView.setColors(-NUM, -1);
        this.containerView.addView(this.hintView, LayoutHelper.createFrame(-1, -2.0f, 83, 8.0f, 0.0f, 8.0f, 8.0f));
        if (AndroidUtilities.isAccessibilityScreenReaderEnabled()) {
            View view2 = new View(this.activityContext);
            this.playButtonAccessibilityOverlay = view2;
            view2.setContentDescription(LocaleController.getString("AccActionPlay", R.string.AccActionPlay));
            this.playButtonAccessibilityOverlay.setFocusable(true);
            this.containerView.addView(this.playButtonAccessibilityOverlay, LayoutHelper.createFrame(64, 64, 17));
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ WindowInsets lambda$setParentActivity$4(View view, WindowInsets windowInsets) {
        int systemWindowInsetTop = windowInsets.getSystemWindowInsetTop();
        Activity activity = this.parentActivity;
        if ((activity instanceof LaunchActivity) && ((systemWindowInsetTop != 0 || AndroidUtilities.isInMultiwindow) && !this.inBubbleMode && AndroidUtilities.statusBarHeight != systemWindowInsetTop)) {
            AndroidUtilities.statusBarHeight = systemWindowInsetTop;
            ((LaunchActivity) activity).drawerLayoutContainer.requestLayout();
        }
        WindowInsets windowInsets2 = (WindowInsets) this.lastInsets;
        this.lastInsets = windowInsets;
        if (windowInsets2 == null || !windowInsets2.toString().equals(windowInsets.toString())) {
            int i = this.animationInProgress;
            if (i == 1 || i == 3) {
                ClippingImageView clippingImageView = this.animatingImageView;
                clippingImageView.setTranslationX(clippingImageView.getTranslationX() - ((float) getLeftInset()));
                this.animationValues[0][2] = this.animatingImageView.getTranslationX();
            }
            FrameLayout frameLayout = this.windowView;
            if (frameLayout != null) {
                frameLayout.requestLayout();
            }
        }
        if (this.navigationBar != null) {
            this.navigationBarHeight = windowInsets.getSystemWindowInsetBottom();
            ViewGroup.MarginLayoutParams marginLayoutParams = (ViewGroup.MarginLayoutParams) this.navigationBar.getLayoutParams();
            int i2 = this.navigationBarHeight;
            marginLayoutParams.height = i2;
            marginLayoutParams.bottomMargin = (-i2) / 2;
            this.navigationBar.setLayoutParams(marginLayoutParams);
        }
        this.containerView.setPadding(windowInsets.getSystemWindowInsetLeft(), 0, windowInsets.getSystemWindowInsetRight(), 0);
        if (this.actionBar != null) {
            AndroidUtilities.cancelRunOnUIThread(this.updateContainerFlagsRunnable);
            if (this.isVisible && this.animationInProgress == 0) {
                AndroidUtilities.runOnUIThread(this.updateContainerFlagsRunnable, 200);
            }
        }
        if (Build.VERSION.SDK_INT >= 30) {
            return WindowInsets.CONSUMED;
        }
        return windowInsets.consumeSystemWindowInsets();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$5(View view) {
        Activity activity = this.parentActivity;
        if (activity != null) {
            this.wasRotated = false;
            this.fullscreenedByButton = 1;
            if (this.prevOrientation == -10) {
                this.prevOrientation = activity.getRequestedOrientation();
            }
            if (((WindowManager) this.parentActivity.getSystemService("window")).getDefaultDisplay().getRotation() == 3) {
                this.parentActivity.setRequestedOrientation(8);
            } else {
                this.parentActivity.setRequestedOrientation(0);
            }
            toggleActionBar(false, false);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$7(View view) {
        openCurrentPhotoInPaintModeForSelect();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$8(View view) {
        onSharePressed();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$9(View view) {
        this.selectedCompression = this.previousCompression;
        didChangedCompressionLevel(false);
        showQualityView(false);
        requestVideoPreview(2);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$10(View view) {
        showQualityView(false);
        requestVideoPreview(2);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$11(View view) {
        if (this.captionEditText.getCaptionLimitOffset() < 0) {
            AndroidUtilities.shakeView(this.captionLimitView, 2.0f, 0);
            Vibrator vibrator = (Vibrator) this.captionLimitView.getContext().getSystemService("vibrator");
            if (vibrator != null) {
                vibrator.vibrate(200);
                return;
            }
            return;
        }
        ChatActivity chatActivity = this.parentChatActivity;
        if (chatActivity == null || !chatActivity.isInScheduleMode() || this.parentChatActivity.isEditingMessageMedia()) {
            sendPressed(true, 0);
        } else {
            showScheduleDatePickerDialog();
        }
    }

    /* access modifiers changed from: private */
    /* JADX WARNING: Code restructure failed: missing block: B:48:0x00d2, code lost:
        if (r13 != false) goto L_0x008b;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:51:0x00db, code lost:
        if (org.telegram.messenger.UserObject.isUserSelf(r2) != false) goto L_0x008b;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:53:0x00e0, code lost:
        if (r11 == 3) goto L_0x00e2;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:54:0x00e2, code lost:
        if (r4 == false) goto L_0x008b;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:55:0x00e5, code lost:
        if (r11 != 4) goto L_0x00f4;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:57:0x00e9, code lost:
        if (r0.isCurrentVideo == false) goto L_0x00eb;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:59:0x00f1, code lost:
        if (r0.timeItem.getColorFilter() == null) goto L_0x00f4;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public /* synthetic */ boolean lambda$setParentActivity$15(org.telegram.ui.ActionBar.Theme.ResourcesProvider r17, android.view.View r18) {
        /*
            r16 = this;
            r0 = r16
            r1 = r18
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r2 = r0.placeProvider
            r3 = 0
            if (r2 == 0) goto L_0x0010
            boolean r2 = r2.allowSendingSubmenu()
            if (r2 != 0) goto L_0x0010
            return r3
        L_0x0010:
            org.telegram.ui.ChatActivity r2 = r0.parentChatActivity
            if (r2 == 0) goto L_0x0227
            boolean r2 = r2.isInScheduleMode()
            if (r2 == 0) goto L_0x001c
            goto L_0x0227
        L_0x001c:
            org.telegram.ui.Components.PhotoViewerCaptionEnterView r2 = r0.captionEditText
            int r2 = r2.getCaptionLimitOffset()
            if (r2 >= 0) goto L_0x0025
            return r3
        L_0x0025:
            org.telegram.ui.ChatActivity r2 = r0.parentChatActivity
            r2.getCurrentChat()
            org.telegram.ui.ChatActivity r2 = r0.parentChatActivity
            org.telegram.tgnet.TLRPC$User r2 = r2.getCurrentUser()
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r4 = new org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout
            android.app.Activity r5 = r0.parentActivity
            r4.<init>(r5)
            r0.sendPopupLayout = r4
            r4.setAnimationEnabled(r3)
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r4 = r0.sendPopupLayout
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda47 r5 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda47
            r5.<init>(r0)
            r4.setOnTouchListener(r5)
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r4 = r0.sendPopupLayout
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda77 r5 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda77
            r5.<init>(r0)
            r4.setDispatchKeyEventListener(r5)
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r4 = r0.sendPopupLayout
            r4.setShownFromBottom(r3)
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r4 = r0.sendPopupLayout
            r5 = -115203550(0xffffffffvar_, float:-5.2615274E34)
            r4.setBackgroundColor(r5)
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r4 = r0.placeProvider
            r5 = 1
            if (r4 == 0) goto L_0x006c
            int r6 = r0.currentIndex
            boolean r4 = r4.canReplace(r6)
            if (r4 == 0) goto L_0x006c
            r4 = 1
            goto L_0x006d
        L_0x006c:
            r4 = 0
        L_0x006d:
            r6 = 5
            int[] r7 = new int[r6]
            r7 = {4, 3, 2, 0, 1} // fill-array
            r8 = 0
        L_0x0074:
            r9 = 3
            r10 = 2
            if (r8 >= r6) goto L_0x018e
            r11 = r7[r8]
            if (r11 == r10) goto L_0x0081
            if (r11 == r9) goto L_0x0081
            if (r4 == 0) goto L_0x0081
            goto L_0x008b
        L_0x0081:
            if (r11 != 0) goto L_0x008f
            org.telegram.ui.ChatActivity r12 = r0.parentChatActivity
            boolean r12 = r12.canScheduleMessage()
            if (r12 != 0) goto L_0x008f
        L_0x008b:
            r6 = r17
            goto L_0x0188
        L_0x008f:
            r12 = 4
            if (r11 != 0) goto L_0x00d5
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r13 = r0.placeProvider
            if (r13 == 0) goto L_0x00d5
            java.util.HashMap r13 = r13.getSelectedPhotos()
            if (r13 == 0) goto L_0x00d5
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r13 = r0.placeProvider
            java.util.HashMap r13 = r13.getSelectedPhotos()
            java.util.Set r13 = r13.entrySet()
            java.util.Iterator r13 = r13.iterator()
        L_0x00aa:
            boolean r14 = r13.hasNext()
            if (r14 == 0) goto L_0x00d1
            java.lang.Object r14 = r13.next()
            java.util.Map$Entry r14 = (java.util.Map.Entry) r14
            java.lang.Object r14 = r14.getValue()
            boolean r15 = r14 instanceof org.telegram.messenger.MediaController.PhotoEntry
            if (r15 == 0) goto L_0x00c6
            org.telegram.messenger.MediaController$PhotoEntry r14 = (org.telegram.messenger.MediaController.PhotoEntry) r14
            int r14 = r14.ttl
            if (r14 == 0) goto L_0x00aa
        L_0x00c4:
            r13 = 1
            goto L_0x00d2
        L_0x00c6:
            boolean r15 = r14 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r15 == 0) goto L_0x00aa
            org.telegram.messenger.MediaController$SearchImage r14 = (org.telegram.messenger.MediaController.SearchImage) r14
            int r14 = r14.ttl
            if (r14 == 0) goto L_0x00aa
            goto L_0x00c4
        L_0x00d1:
            r13 = 0
        L_0x00d2:
            if (r13 == 0) goto L_0x00f4
            goto L_0x008b
        L_0x00d5:
            if (r11 != r5) goto L_0x00de
            boolean r13 = org.telegram.messenger.UserObject.isUserSelf(r2)
            if (r13 == 0) goto L_0x00de
            goto L_0x008b
        L_0x00de:
            if (r11 == r10) goto L_0x00e2
            if (r11 != r9) goto L_0x00e5
        L_0x00e2:
            if (r4 != 0) goto L_0x00e5
            goto L_0x008b
        L_0x00e5:
            if (r11 != r12) goto L_0x00f4
            boolean r13 = r0.isCurrentVideo
            if (r13 != 0) goto L_0x008b
            android.widget.ImageView r13 = r0.timeItem
            android.graphics.ColorFilter r13 = r13.getColorFilter()
            if (r13 == 0) goto L_0x00f4
            goto L_0x008b
        L_0x00f4:
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r13 = new org.telegram.ui.ActionBar.ActionBarMenuSubItem
            android.app.Activity r14 = r0.parentActivity
            if (r11 != 0) goto L_0x00fc
            r15 = 1
            goto L_0x00fd
        L_0x00fc:
            r15 = 0
        L_0x00fd:
            r6 = r17
            if (r11 != r9) goto L_0x0102
            r3 = 1
        L_0x0102:
            r13.<init>((android.content.Context) r14, (boolean) r15, (boolean) r3, (org.telegram.ui.ActionBar.Theme.ResourcesProvider) r6)
            if (r11 != 0) goto L_0x0129
            boolean r3 = org.telegram.messenger.UserObject.isUserSelf(r2)
            if (r3 == 0) goto L_0x011b
            int r3 = org.telegram.messenger.R.string.SetReminder
            java.lang.String r9 = "SetReminder"
            java.lang.String r3 = org.telegram.messenger.LocaleController.getString(r9, r3)
            int r9 = org.telegram.messenger.R.drawable.msg_calendar2
            r13.setTextAndIcon(r3, r9)
            goto L_0x0168
        L_0x011b:
            int r3 = org.telegram.messenger.R.string.ScheduleMessage
            java.lang.String r9 = "ScheduleMessage"
            java.lang.String r3 = org.telegram.messenger.LocaleController.getString(r9, r3)
            int r9 = org.telegram.messenger.R.drawable.msg_calendar2
            r13.setTextAndIcon(r3, r9)
            goto L_0x0168
        L_0x0129:
            if (r11 != r5) goto L_0x0139
            int r3 = org.telegram.messenger.R.string.SendWithoutSound
            java.lang.String r9 = "SendWithoutSound"
            java.lang.String r3 = org.telegram.messenger.LocaleController.getString(r9, r3)
            int r9 = org.telegram.messenger.R.drawable.input_notify_off
            r13.setTextAndIcon(r3, r9)
            goto L_0x0168
        L_0x0139:
            if (r11 != r10) goto L_0x0149
            int r3 = org.telegram.messenger.R.string.ReplacePhoto
            java.lang.String r9 = "ReplacePhoto"
            java.lang.String r3 = org.telegram.messenger.LocaleController.getString(r9, r3)
            int r9 = org.telegram.messenger.R.drawable.msg_replace
            r13.setTextAndIcon(r3, r9)
            goto L_0x0168
        L_0x0149:
            if (r11 != r9) goto L_0x0159
            int r3 = org.telegram.messenger.R.string.SendAsNewPhoto
            java.lang.String r9 = "SendAsNewPhoto"
            java.lang.String r3 = org.telegram.messenger.LocaleController.getString(r9, r3)
            int r9 = org.telegram.messenger.R.drawable.msg_send
            r13.setTextAndIcon(r3, r9)
            goto L_0x0168
        L_0x0159:
            if (r11 != r12) goto L_0x0168
            int r3 = org.telegram.messenger.R.string.SendWithoutCompression
            java.lang.String r9 = "SendWithoutCompression"
            java.lang.String r3 = org.telegram.messenger.LocaleController.getString(r9, r3)
            int r9 = org.telegram.messenger.R.drawable.msg_sendfile
            r13.setTextAndIcon(r3, r9)
        L_0x0168:
            r3 = 1128529920(0x43440000, float:196.0)
            int r3 = org.telegram.messenger.AndroidUtilities.dp(r3)
            r13.setMinimumWidth(r3)
            r3 = -1
            r13.setColors(r3, r3)
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r9 = r0.sendPopupLayout
            r10 = 48
            android.widget.LinearLayout$LayoutParams r3 = org.telegram.ui.Components.LayoutHelper.createLinear(r3, r10)
            r9.addView(r13, r3)
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda42 r3 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda42
            r3.<init>(r0, r11)
            r13.setOnClickListener(r3)
        L_0x0188:
            int r8 = r8 + 1
            r3 = 0
            r6 = 5
            goto L_0x0074
        L_0x018e:
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r2 = r0.sendPopupLayout
            int r2 = r2.getChildCount()
            if (r2 != 0) goto L_0x0198
            r2 = 0
            return r2
        L_0x0198:
            r2 = 0
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r3 = r0.sendPopupLayout
            r4 = 620756991(0x24ffffff, float:1.11022296E-16)
            r3.setupRadialSelectors(r4)
            org.telegram.ui.ActionBar.ActionBarPopupWindow r3 = new org.telegram.ui.ActionBar.ActionBarPopupWindow
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r4 = r0.sendPopupLayout
            r6 = -2
            r3.<init>(r4, r6, r6)
            r0.sendPopupWindow = r3
            r3.setAnimationEnabled(r2)
            org.telegram.ui.ActionBar.ActionBarPopupWindow r3 = r0.sendPopupWindow
            int r4 = org.telegram.messenger.R.style.PopupContextAnimation2
            r3.setAnimationStyle(r4)
            org.telegram.ui.ActionBar.ActionBarPopupWindow r3 = r0.sendPopupWindow
            r3.setOutsideTouchable(r5)
            org.telegram.ui.ActionBar.ActionBarPopupWindow r3 = r0.sendPopupWindow
            r3.setClippingEnabled(r5)
            org.telegram.ui.ActionBar.ActionBarPopupWindow r3 = r0.sendPopupWindow
            r3.setInputMethodMode(r10)
            org.telegram.ui.ActionBar.ActionBarPopupWindow r3 = r0.sendPopupWindow
            r3.setSoftInputMode(r2)
            org.telegram.ui.ActionBar.ActionBarPopupWindow r2 = r0.sendPopupWindow
            android.view.View r2 = r2.getContentView()
            r2.setFocusableInTouchMode(r5)
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r2 = r0.sendPopupLayout
            r3 = 1148846080(0x447a0000, float:1000.0)
            int r4 = org.telegram.messenger.AndroidUtilities.dp(r3)
            r6 = -2147483648(0xfffffffvar_, float:-0.0)
            int r4 = android.view.View.MeasureSpec.makeMeasureSpec(r4, r6)
            int r3 = org.telegram.messenger.AndroidUtilities.dp(r3)
            int r3 = android.view.View.MeasureSpec.makeMeasureSpec(r3, r6)
            r2.measure(r4, r3)
            org.telegram.ui.ActionBar.ActionBarPopupWindow r2 = r0.sendPopupWindow
            r2.setFocusable(r5)
            int[] r2 = new int[r10]
            r1.getLocationInWindow(r2)
            org.telegram.ui.ActionBar.ActionBarPopupWindow r3 = r0.sendPopupWindow
            r4 = 51
            r6 = 0
            r7 = r2[r6]
            int r6 = r18.getMeasuredWidth()
            int r7 = r7 + r6
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r6 = r0.sendPopupLayout
            int r6 = r6.getMeasuredWidth()
            int r7 = r7 - r6
            r6 = 1096810496(0x41600000, float:14.0)
            int r6 = org.telegram.messenger.AndroidUtilities.dp(r6)
            int r7 = r7 + r6
            r2 = r2[r5]
            org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout r5 = r0.sendPopupLayout
            int r5 = r5.getMeasuredHeight()
            int r2 = r2 - r5
            r5 = 1099956224(0x41900000, float:18.0)
            int r5 = org.telegram.messenger.AndroidUtilities.dp(r5)
            int r2 = r2 - r5
            r3.showAtLocation(r1, r4, r7, r2)
            r1.performHapticFeedback(r9, r10)
            r1 = 0
            return r1
        L_0x0227:
            r1 = 0
            return r1
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.lambda$setParentActivity$15(org.telegram.ui.ActionBar.Theme$ResourcesProvider, android.view.View):boolean");
    }

    /* access modifiers changed from: private */
    public /* synthetic */ boolean lambda$setParentActivity$12(View view, MotionEvent motionEvent) {
        ActionBarPopupWindow actionBarPopupWindow;
        if (motionEvent.getActionMasked() != 0 || (actionBarPopupWindow = this.sendPopupWindow) == null || !actionBarPopupWindow.isShowing()) {
            return false;
        }
        view.getHitRect(this.hitRect);
        if (this.hitRect.contains((int) motionEvent.getX(), (int) motionEvent.getY())) {
            return false;
        }
        this.sendPopupWindow.dismiss();
        return false;
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$13(KeyEvent keyEvent) {
        ActionBarPopupWindow actionBarPopupWindow;
        if (keyEvent.getKeyCode() == 4 && keyEvent.getRepeatCount() == 0 && (actionBarPopupWindow = this.sendPopupWindow) != null && actionBarPopupWindow.isShowing()) {
            this.sendPopupWindow.dismiss();
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$14(int i, View view) {
        ActionBarPopupWindow actionBarPopupWindow = this.sendPopupWindow;
        if (actionBarPopupWindow != null && actionBarPopupWindow.isShowing()) {
            this.sendPopupWindow.dismiss();
        }
        if (i == 0) {
            showScheduleDatePickerDialog();
        } else if (i == 1) {
            sendPressed(false, 0);
        } else if (i == 2) {
            replacePressed();
        } else if (i == 3) {
            sendPressed(true, 0);
        } else if (i == 4) {
            sendPressed(true, 0, false, true);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$16(View view) {
        if (this.captionEditText.getTag() == null) {
            if (this.isCurrentVideo) {
                if (this.videoConvertSupported) {
                    TextureView textureView = this.videoTextureView;
                    if (textureView instanceof VideoEditTextureView) {
                        VideoEditTextureView videoEditTextureView = (VideoEditTextureView) textureView;
                        if (videoEditTextureView.getVideoWidth() <= 0 || videoEditTextureView.getVideoHeight() <= 0) {
                            return;
                        }
                    } else {
                        return;
                    }
                } else {
                    return;
                }
            }
            switchToEditMode(1);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$17(View view) {
        cropRotate(-90.0f);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$18(View view) {
        cropMirror();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$19(View view) {
        if (this.captionEditText.getTag() == null) {
            if (this.isCurrentVideo) {
                if (this.videoConvertSupported) {
                    TextureView textureView = this.videoTextureView;
                    if (textureView instanceof VideoEditTextureView) {
                        VideoEditTextureView videoEditTextureView = (VideoEditTextureView) textureView;
                        if (videoEditTextureView.getVideoWidth() <= 0 || videoEditTextureView.getVideoHeight() <= 0) {
                            return;
                        }
                    } else {
                        return;
                    }
                } else {
                    return;
                }
            }
            switchToEditMode(3);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$20(View view) {
        if (this.captionEditText.getTag() == null) {
            this.muteVideo = !this.muteVideo;
            updateMuteButton();
            updateVideoInfo();
            if (!this.muteVideo || this.checkImageView.isChecked()) {
                Object obj = this.imagesArrLocals.get(this.currentIndex);
                if (obj instanceof MediaController.MediaEditState) {
                    ((MediaController.MediaEditState) obj).editedInfo = getCurrentVideoEditedInfo();
                    return;
                }
                return;
            }
            this.checkImageView.callOnClick();
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$21(View view) {
        if (this.placeProvider != null && this.captionEditText.getTag() == null) {
            this.placeProvider.needAddMorePhotos();
            closePhoto(true, false);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$22(View view) {
        if (this.captionEditText.getTag() == null) {
            if (this.isCurrentVideo) {
                if (this.videoConvertSupported) {
                    TextureView textureView = this.videoTextureView;
                    if (textureView instanceof VideoEditTextureView) {
                        VideoEditTextureView videoEditTextureView = (VideoEditTextureView) textureView;
                        if (videoEditTextureView.getVideoWidth() <= 0 || videoEditTextureView.getVideoHeight() <= 0) {
                            return;
                        }
                    } else {
                        return;
                    }
                } else {
                    return;
                }
            }
            switchToEditMode(2);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$23(Activity activity, View view) {
        if (this.captionEditText.getTag() == null && !this.muteVideo) {
            if (this.compressItem.getTag() != null) {
                showQualityView(true);
                requestVideoPreview(1);
            } else if (this.videoConvertSupported) {
                if (this.tooltip == null) {
                    this.tooltip = new Tooltip(activity, this.containerView, -NUM, -1);
                }
                this.tooltip.setText(LocaleController.getString("VideoQualityIsTooLow", R.string.VideoQualityIsTooLow));
                this.tooltip.show(this.compressItem);
            }
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$29(Theme.ResourcesProvider resourcesProvider2, View view) {
        String str;
        int i;
        int i2;
        Theme.ResourcesProvider resourcesProvider3 = resourcesProvider2;
        if (this.parentActivity != null && this.captionEditText.getTag() == null) {
            BottomSheet.Builder builder = new BottomSheet.Builder(this.parentActivity, false, resourcesProvider3, -16777216);
            builder.setUseHardwareLayer(false);
            LinearLayout linearLayout = new LinearLayout(this.parentActivity);
            linearLayout.setOrientation(1);
            builder.setCustomView(linearLayout);
            TextView textView = new TextView(this.parentActivity);
            textView.setLines(1);
            textView.setSingleLine(true);
            textView.setText(LocaleController.getString("MessageLifetime", R.string.MessageLifetime));
            textView.setTextColor(-1);
            textView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            textView.setTextSize(1, 20.0f);
            textView.setEllipsize(TextUtils.TruncateAt.MIDDLE);
            textView.setPadding(AndroidUtilities.dp(21.0f), AndroidUtilities.dp(8.0f), AndroidUtilities.dp(21.0f), AndroidUtilities.dp(4.0f));
            textView.setGravity(16);
            linearLayout.addView(textView, LayoutHelper.createFrame(-1, -2.0f));
            textView.setOnTouchListener(PhotoViewer$$ExternalSyntheticLambda49.INSTANCE);
            TextView textView2 = new TextView(this.parentActivity);
            if (this.isCurrentVideo) {
                i = R.string.MessageLifetimeVideo;
                str = "MessageLifetimeVideo";
            } else {
                i = R.string.MessageLifetimePhoto;
                str = "MessageLifetimePhoto";
            }
            textView2.setText(LocaleController.getString(str, i));
            textView2.setTextColor(-8355712);
            textView2.setTextSize(1, 14.0f);
            textView2.setEllipsize(TextUtils.TruncateAt.MIDDLE);
            textView2.setPadding(AndroidUtilities.dp(21.0f), 0, AndroidUtilities.dp(21.0f), AndroidUtilities.dp(8.0f));
            textView2.setGravity(16);
            linearLayout.addView(textView2, LayoutHelper.createFrame(-1, -2.0f));
            textView2.setOnTouchListener(PhotoViewer$$ExternalSyntheticLambda48.INSTANCE);
            BottomSheet create = builder.create();
            NumberPicker numberPicker = new NumberPicker((Context) this.parentActivity, resourcesProvider3);
            numberPicker.setMinValue(0);
            numberPicker.setMaxValue(28);
            Object obj = this.imagesArrLocals.get(this.currentIndex);
            if (obj instanceof MediaController.PhotoEntry) {
                i2 = ((MediaController.PhotoEntry) obj).ttl;
            } else {
                i2 = obj instanceof MediaController.SearchImage ? ((MediaController.SearchImage) obj).ttl : 0;
            }
            if (i2 == 0) {
                numberPicker.setValue(MessagesController.getGlobalMainSettings().getInt("self_destruct", 7));
            } else if (i2 < 0 || i2 >= 21) {
                numberPicker.setValue(((i2 / 5) + 21) - 5);
            } else {
                numberPicker.setValue(i2);
            }
            numberPicker.setTextColor(-1);
            numberPicker.setSelectorColor(-11711155);
            numberPicker.setFormatter(PhotoViewer$$ExternalSyntheticLambda79.INSTANCE);
            linearLayout.addView(numberPicker, LayoutHelper.createLinear(-1, -2));
            AnonymousClass27 r7 = new FrameLayout(this, this.parentActivity) {
                /* access modifiers changed from: protected */
                public void onLayout(boolean z, int i, int i2, int i3, int i4) {
                    int childCount = getChildCount();
                    int i5 = i3 - i;
                    for (int i6 = 0; i6 < childCount; i6++) {
                        View childAt = getChildAt(i6);
                        if (((Integer) childAt.getTag()).intValue() == -1) {
                            childAt.layout((i5 - getPaddingRight()) - childAt.getMeasuredWidth(), getPaddingTop(), i5 - getPaddingRight(), getPaddingTop() + childAt.getMeasuredHeight());
                        } else if (((Integer) childAt.getTag()).intValue() == -2) {
                            int paddingLeft = getPaddingLeft();
                            childAt.layout(paddingLeft, getPaddingTop(), childAt.getMeasuredWidth() + paddingLeft, getPaddingTop() + childAt.getMeasuredHeight());
                        } else {
                            childAt.layout(getPaddingLeft(), getPaddingTop(), getPaddingLeft() + childAt.getMeasuredWidth(), getPaddingTop() + childAt.getMeasuredHeight());
                        }
                    }
                }
            };
            r7.setPadding(AndroidUtilities.dp(8.0f), AndroidUtilities.dp(8.0f), AndroidUtilities.dp(8.0f), AndroidUtilities.dp(8.0f));
            linearLayout.addView(r7, LayoutHelper.createLinear(-1, 52));
            TextView textView3 = new TextView(this.parentActivity);
            textView3.setMinWidth(AndroidUtilities.dp(64.0f));
            textView3.setTag(-1);
            textView3.setTextSize(1, 14.0f);
            textView3.setTextColor(getThemedColor("dialogFloatingButton"));
            textView3.setGravity(17);
            textView3.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            textView3.setText(LocaleController.getString("Done", R.string.Done).toUpperCase());
            textView3.setBackgroundDrawable(Theme.getRoundRectSelectorDrawable(-11944718));
            textView3.setPadding(AndroidUtilities.dp(10.0f), 0, AndroidUtilities.dp(10.0f), 0);
            r7.addView(textView3, LayoutHelper.createFrame(-2, 36, 53));
            textView3.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda45(this, numberPicker, create));
            TextView textView4 = new TextView(this.parentActivity);
            textView4.setMinWidth(AndroidUtilities.dp(64.0f));
            textView4.setTag(-2);
            textView4.setTextSize(1, 14.0f);
            textView4.setTextColor(-1);
            textView4.setGravity(17);
            textView4.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            textView4.setText(LocaleController.getString("Cancel", R.string.Cancel).toUpperCase());
            textView4.setBackgroundDrawable(Theme.getRoundRectSelectorDrawable(-1));
            textView4.setPadding(AndroidUtilities.dp(10.0f), 0, AndroidUtilities.dp(10.0f), 0);
            r7.addView(textView4, LayoutHelper.createFrame(-2, 36, 53));
            textView4.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda17(create));
            create.setBackgroundColor(-16777216);
            create.show();
            AndroidUtilities.setNavigationBarColor(create.getWindow(), -16777216, false);
            AndroidUtilities.setLightNavigationBar(create.getWindow(), false);
        }
    }

    /* access modifiers changed from: private */
    public static /* synthetic */ String lambda$setParentActivity$26(int i) {
        if (i == 0) {
            return LocaleController.getString("ShortMessageLifetimeForever", R.string.ShortMessageLifetimeForever);
        }
        if (i < 1 || i >= 21) {
            return LocaleController.formatTTLString((i - 16) * 5);
        }
        return LocaleController.formatTTLString(i);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$27(NumberPicker numberPicker, BottomSheet bottomSheet, View view) {
        int value = numberPicker.getValue();
        SharedPreferences.Editor edit = MessagesController.getGlobalMainSettings().edit();
        edit.putInt("self_destruct", value);
        edit.commit();
        bottomSheet.dismiss();
        if (value < 0 || value >= 21) {
            value = (value - 16) * 5;
        }
        Object obj = this.imagesArrLocals.get(this.currentIndex);
        if (obj instanceof MediaController.PhotoEntry) {
            ((MediaController.PhotoEntry) obj).ttl = value;
        } else if (obj instanceof MediaController.SearchImage) {
            ((MediaController.SearchImage) obj).ttl = value;
        }
        this.timeItem.setColorFilter(value != 0 ? new PorterDuffColorFilter(getThemedColor("dialogFloatingButton"), PorterDuff.Mode.MULTIPLY) : null);
        if (!this.checkImageView.isChecked()) {
            this.checkImageView.callOnClick();
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$31(View view) {
        if (this.imageMoveAnimation == null) {
            PhotoViewer$$ExternalSyntheticLambda54 photoViewer$$ExternalSyntheticLambda54 = new PhotoViewer$$ExternalSyntheticLambda54(this);
            if (!this.previousHasTransform) {
                float stateOrientation = ((float) this.previousCropOrientation) - this.photoCropView.cropView.getStateOrientation();
                if (Math.abs(stateOrientation) > 180.0f) {
                    stateOrientation = stateOrientation < 0.0f ? stateOrientation + 360.0f : -(360.0f - stateOrientation);
                }
                cropRotate(stateOrientation, this.photoCropView.cropView.getStateMirror(), photoViewer$$ExternalSyntheticLambda54);
                return;
            }
            photoViewer$$ExternalSyntheticLambda54.run();
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$30() {
        this.cropTransform.setViewTransform(this.previousHasTransform, this.previousCropPx, this.previousCropPy, this.previousCropRotation, this.previousCropOrientation, this.previousCropScale, 1.0f, 1.0f, this.previousCropPw, this.previousCropPh, 0.0f, 0.0f, this.previousCropMirrored);
        switchToEditMode(0);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$32(View view) {
        if (this.currentEditMode != 1 || this.photoCropView.isReady()) {
            applyCurrentEditMode();
            switchToEditMode(0);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$34(View view) {
        float f = -this.photoCropView.cropView.getStateOrientation();
        if (Math.abs(f) > 180.0f) {
            f = f < 0.0f ? f + 360.0f : -(360.0f - f);
        }
        cropRotate(f, this.photoCropView.cropView.getStateMirror(), new PhotoViewer$$ExternalSyntheticLambda59(this));
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$33() {
        this.photoCropView.reset(true);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$35(ImageReceiver imageReceiver, boolean z, boolean z2, boolean z3) {
        PhotoViewerProvider photoViewerProvider;
        Bitmap bitmap;
        if (imageReceiver == this.centerImage && z && !z2) {
            if (!this.isCurrentVideo && !((this.currentEditMode != 1 && this.sendPhotoType != 1) || this.photoCropView == null || (bitmap = imageReceiver.getBitmap()) == null)) {
                this.photoCropView.setBitmap(bitmap, imageReceiver.getOrientation(), this.sendPhotoType != 1, true, this.paintingOverlay, this.cropTransform, (VideoEditTextureView) null, (MediaController.CropState) null);
            }
            if (this.paintingOverlay.getVisibility() == 0) {
                this.containerView.requestLayout();
            }
            detectFaces();
        }
        if (imageReceiver == this.centerImage && z && (photoViewerProvider = this.placeProvider) != null && photoViewerProvider.scaleToFill() && !this.ignoreDidSetImage && this.sendPhotoType != 1) {
            if (!this.wasLayout) {
                this.dontResetZoomOnFirstLayout = true;
            } else {
                setScaleToFill();
            }
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$36(View view) {
        if (this.captionEditText.getTag() == null) {
            setPhotoChecked();
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$37(View view) {
        PhotoViewerProvider photoViewerProvider;
        if (this.captionEditText.getTag() == null && (photoViewerProvider = this.placeProvider) != null && photoViewerProvider.getSelectedPhotosOrder() != null && !this.placeProvider.getSelectedPhotosOrder().isEmpty()) {
            togglePhotosListView(!this.isPhotosListViewVisible, true);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$38(View view, int i) {
        int i2;
        if (!this.imagesArrLocals.isEmpty() && (i2 = this.currentIndex) >= 0 && i2 < this.imagesArrLocals.size()) {
            Object obj = this.imagesArrLocals.get(this.currentIndex);
            if (obj instanceof MediaController.MediaEditState) {
                ((MediaController.MediaEditState) obj).editedInfo = getCurrentVideoEditedInfo();
            }
        }
        this.ignoreDidSetImage = true;
        int indexOf = this.imagesArrLocals.indexOf(view.getTag());
        if (indexOf >= 0) {
            this.currentIndex = -1;
            setImageIndex(indexOf);
        }
        this.ignoreDidSetImage = false;
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$39(View view, int i) {
        AnimatedEmojiSpan animatedEmojiSpan;
        Object item = this.mentionsAdapter.getItem(i);
        int resultStartPosition = this.mentionsAdapter.getResultStartPosition();
        int resultLength = this.mentionsAdapter.getResultLength();
        if (item instanceof TLRPC$User) {
            TLRPC$User tLRPC$User = (TLRPC$User) item;
            if (tLRPC$User.username != null) {
                PhotoViewerCaptionEnterView photoViewerCaptionEnterView = this.captionEditText;
                photoViewerCaptionEnterView.replaceWithText(resultStartPosition, resultLength, "@" + tLRPC$User.username + " ", false);
                return;
            }
            String firstName = UserObject.getFirstName(tLRPC$User);
            SpannableString spannableString = new SpannableString(firstName + " ");
            spannableString.setSpan(new URLSpanUserMentionPhotoViewer("" + tLRPC$User.id, true), 0, spannableString.length(), 33);
            this.captionEditText.replaceWithText(resultStartPosition, resultLength, spannableString, false);
        } else if (item instanceof String) {
            PhotoViewerCaptionEnterView photoViewerCaptionEnterView2 = this.captionEditText;
            photoViewerCaptionEnterView2.replaceWithText(resultStartPosition, resultLength, item + " ", false);
        } else if (item instanceof MediaDataController.KeywordResult) {
            String str = ((MediaDataController.KeywordResult) item).emoji;
            this.captionEditText.addEmojiToRecent(str);
            if (str == null || !str.startsWith("animated_")) {
                this.captionEditText.replaceWithText(resultStartPosition, resultLength, str, true);
                return;
            }
            try {
                long parseLong = Long.parseLong(str.substring(9));
                TLRPC$Document findDocument = AnimatedEmojiDrawable.findDocument(this.currentAccount, parseLong);
                SpannableString spannableString2 = new SpannableString(MessageObject.findAnimatedEmojiEmoticon(findDocument));
                if (findDocument != null) {
                    animatedEmojiSpan = new AnimatedEmojiSpan(findDocument, this.captionEditText.getMessageEditText().getPaint().getFontMetricsInt());
                } else {
                    animatedEmojiSpan = new AnimatedEmojiSpan(parseLong, this.captionEditText.getMessageEditText().getPaint().getFontMetricsInt());
                }
                spannableString2.setSpan(animatedEmojiSpan, 0, spannableString2.length(), 33);
                this.captionEditText.replaceWithText(resultStartPosition, resultLength, spannableString2, false);
            } catch (Exception unused) {
                this.captionEditText.replaceWithText(resultStartPosition, resultLength, str, true);
            }
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ boolean lambda$setParentActivity$41(Theme.ResourcesProvider resourcesProvider2, View view, int i) {
        if (!(this.mentionsAdapter.getItem(i) instanceof String)) {
            return false;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(this.parentActivity, resourcesProvider2);
        builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
        builder.setMessage(LocaleController.getString("ClearSearch", R.string.ClearSearch));
        builder.setPositiveButton(LocaleController.getString("ClearButton", R.string.ClearButton).toUpperCase(), new PhotoViewer$$ExternalSyntheticLambda12(this));
        builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), (DialogInterface.OnClickListener) null);
        showAlertDialog(builder);
        return true;
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setParentActivity$40(DialogInterface dialogInterface, int i) {
        this.mentionsAdapter.clearRecentHashtags();
    }

    /* access modifiers changed from: private */
    public void animateNavBarColorTo(int i) {
        animateNavBarColorTo(i, true);
    }

    /* access modifiers changed from: private */
    public void animateNavBarColorTo(final int i, boolean z) {
        ValueAnimator valueAnimator = this.navBarAnimator;
        if (valueAnimator != null) {
            valueAnimator.cancel();
        }
        int color = this.blackPaint.getColor();
        AndroidUtilities.setLightNavigationBar((View) this.windowView, ((double) AndroidUtilities.computePerceivedBrightness(i)) >= 0.721d);
        if (z) {
            ValueAnimator ofFloat = ValueAnimator.ofFloat(new float[]{0.0f, 1.0f});
            this.navBarAnimator = ofFloat;
            ofFloat.addUpdateListener(new PhotoViewer$$ExternalSyntheticLambda8(this, color, i));
            this.navBarAnimator.addListener(new AnimatorListenerAdapter() {
                public void onAnimationEnd(Animator animator) {
                    PhotoViewer.this.blackPaint.setColor(i);
                    if (PhotoViewer.this.windowView != null) {
                        PhotoViewer.this.windowView.invalidate();
                    }
                }
            });
            this.navBarAnimator.setInterpolator(CubicBezierInterpolator.DEFAULT);
            this.navBarAnimator.setDuration(200);
            this.navBarAnimator.start();
            return;
        }
        this.navBarAnimator = null;
        this.blackPaint.setColor(i);
        this.windowView.invalidate();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$animateNavBarColorTo$42(int i, int i2, ValueAnimator valueAnimator) {
        this.blackPaint.setColor(ColorUtils.blendARGB(i, i2, ((Float) valueAnimator.getAnimatedValue()).floatValue()));
        FrameLayout frameLayout = this.windowView;
        if (frameLayout != null) {
            frameLayout.invalidate();
        }
    }

    private void showScheduleDatePickerDialog() {
        if (this.parentChatActivity != null) {
            AlertsCreator.createScheduleDatePickerDialog((Context) this.parentActivity, this.parentChatActivity.getDialogId(), (AlertsCreator.ScheduleDatePickerDelegate) new PhotoViewer$$ExternalSyntheticLambda78(this), new AlertsCreator.ScheduleDatePickerColors(-1, -14342875, -1, NUM, -1, -NUM, NUM));
        }
    }

    /* access modifiers changed from: private */
    public void sendPressed(boolean z, int i) {
        sendPressed(z, i, false, false);
    }

    private void replacePressed() {
        sendPressed(false, 0, true, false);
    }

    private void sendPressed(boolean z, int i, boolean z2, boolean z3) {
        int i2;
        ChatActivity chatActivity;
        if (this.captionEditText.getTag() == null && this.placeProvider != null && !this.doneButtonPressed) {
            if (this.sendPhotoType == 1) {
                applyCurrentEditMode();
            }
            if (!z2 && (chatActivity = this.parentChatActivity) != null) {
                TLRPC$Chat currentChat = chatActivity.getCurrentChat();
                if (this.parentChatActivity.getCurrentUser() != null || ((ChatObject.isChannel(currentChat) && currentChat.megagroup) || !ChatObject.isChannel(currentChat))) {
                    SharedPreferences.Editor edit = MessagesController.getNotificationsSettings(this.currentAccount).edit();
                    edit.putBoolean("silent_" + this.parentChatActivity.getDialogId(), !z).commit();
                }
            }
            VideoEditedInfo currentVideoEditedInfo = getCurrentVideoEditedInfo();
            if (!this.imagesArrLocals.isEmpty() && (i2 = this.currentIndex) >= 0 && i2 < this.imagesArrLocals.size()) {
                Object obj = this.imagesArrLocals.get(this.currentIndex);
                if (obj instanceof MediaController.MediaEditState) {
                    ((MediaController.MediaEditState) obj).editedInfo = currentVideoEditedInfo;
                }
            }
            this.doneButtonPressed = true;
            if (currentVideoEditedInfo != null) {
                long j = (long) (((float) currentVideoEditedInfo.estimatedSize) * 0.9f);
                if ((j > NUM && !UserConfig.getInstance(this.currentAccount).isPremium()) || j > 4194304000L) {
                    new LimitReachedBottomSheet(this.parentAlert.getBaseFragment(), this.parentAlert.getContainer().getContext(), 6, UserConfig.selectedAccount).show();
                    return;
                }
            }
            if (!z2) {
                this.placeProvider.sendButtonPressed(this.currentIndex, currentVideoEditedInfo, z, i, z3);
            } else {
                this.placeProvider.replaceButtonPressed(this.currentIndex, currentVideoEditedInfo);
            }
            closePhoto(false, false);
        }
    }

    /* access modifiers changed from: private */
    public void showShareAlert(ArrayList<MessageObject> arrayList) {
        boolean z;
        boolean z2;
        final FrameLayoutDrawer frameLayoutDrawer = this.containerView;
        requestAdjustToNothing();
        ChatActivity chatActivity = this.parentChatActivity;
        if (chatActivity == null || chatActivity.getChatActivityEnterView() == null || this.parentChatActivity.getFragmentView() == null) {
            z = false;
        } else {
            if (this.parentChatActivity.getChatActivityEnterView().isKeyboardVisible()) {
                this.parentChatActivity.getChatActivityEnterView().showEmojiView();
                z2 = true;
            } else {
                z2 = false;
            }
            AndroidUtilities.setAdjustResizeToNothing(this.parentChatActivity.getParentActivity(), this.classGuid);
            this.parentChatActivity.getFragmentView().requestLayout();
            z = z2;
        }
        AnonymousClass36 r18 = r0;
        final boolean z3 = z;
        AnonymousClass36 r0 = new ShareAlert(this, this.parentActivity, this.parentChatActivity, arrayList, (String) null, (String) null, false, (String) null, (String) null, false, true, (Theme.ResourcesProvider) null) {
            final /* synthetic */ PhotoViewer this$0;

            {
                this.this$0 = r14;
            }

            /* access modifiers changed from: protected */
            public void onSend(LongSparseArray<TLRPC$Dialog> longSparseArray, int i) {
                AndroidUtilities.runOnUIThread(new PhotoViewer$36$$ExternalSyntheticLambda1(this, frameLayoutDrawer, longSparseArray, i), 250);
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onSend$0(FrameLayout frameLayout, LongSparseArray longSparseArray, int i) {
                BulletinFactory.createForwardedBulletin(this.this$0.parentActivity, frameLayout, longSparseArray.size(), longSparseArray.size() == 1 ? ((TLRPC$Dialog) longSparseArray.valueAt(0)).id : 0, i, -NUM, -1).show();
            }

            public void dismissInternal() {
                super.dismissInternal();
                if (z3) {
                    AndroidUtilities.runOnUIThread(new PhotoViewer$36$$ExternalSyntheticLambda0(this), 50);
                }
                this.this$0.requestAdjust();
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$dismissInternal$1() {
                if (this.this$0.parentChatActivity != null && this.this$0.parentChatActivity.getChatActivityEnterView() != null) {
                    this.this$0.parentChatActivity.getChatActivityEnterView().openKeyboard();
                }
            }
        };
        AnonymousClass36 r02 = r18;
        r02.setFocusable(false);
        r02.getWindow().setSoftInputMode(48);
        AndroidUtilities.runOnUIThread(new PhotoViewer$$ExternalSyntheticLambda67(this, r02), 250);
        r02.show();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$showShareAlert$43(ShareAlert shareAlert) {
        if (shareAlert != null && shareAlert.getWindow() != null) {
            shareAlert.setFocusable(true);
            ChatActivity chatActivity = this.parentChatActivity;
            if (chatActivity != null && chatActivity.getChatActivityEnterView() != null) {
                this.parentChatActivity.getChatActivityEnterView().hidePopup(false);
            }
        }
    }

    /* access modifiers changed from: private */
    public void setMenuItemIcon() {
        if (this.speedItem.getVisibility() != 0) {
            this.menuItem.setIcon(R.drawable.ic_ab_other);
            return;
        }
        if (Math.abs(this.currentVideoSpeed - 0.25f) < 0.001f) {
            this.menuItem.setIcon(R.drawable.msg_more_0_2);
            this.speedItem.setSubtext(LocaleController.getString("SpeedVerySlow", R.string.SpeedVerySlow));
        } else if (Math.abs(this.currentVideoSpeed - 0.5f) < 0.001f) {
            this.menuItem.setIcon(R.drawable.msg_more_0_5);
            this.speedItem.setSubtext(LocaleController.getString("SpeedSlow", R.string.SpeedSlow));
        } else if (Math.abs(this.currentVideoSpeed - 1.0f) < 0.001f) {
            this.menuItem.setIcon(R.drawable.ic_ab_other);
            this.speedItem.setSubtext(LocaleController.getString("SpeedNormal", R.string.SpeedNormal));
        } else if (Math.abs(this.currentVideoSpeed - 1.5f) < 0.001f) {
            this.menuItem.setIcon(R.drawable.msg_more_1_5);
            this.speedItem.setSubtext(LocaleController.getString("SpeedFast", R.string.SpeedFast));
        } else {
            this.menuItem.setIcon(R.drawable.msg_more_2);
            this.speedItem.setSubtext(LocaleController.getString("SpeedVeryFast", R.string.SpeedVeryFast));
        }
        this.chooseSpeedLayout.update(this.currentVideoSpeed);
    }

    public float getCurrentVideoSpeed() {
        return this.currentVideoSpeed;
    }

    private boolean checkInlinePermissions() {
        Activity activity = this.parentActivity;
        if (activity == null) {
            return false;
        }
        if (Build.VERSION.SDK_INT < 23 || Settings.canDrawOverlays(activity)) {
            return true;
        }
        AlertsCreator.createDrawOverlayPermissionDialog(this.parentActivity, (DialogInterface.OnClickListener) null).show();
        return false;
    }

    /* access modifiers changed from: private */
    public void captureCurrentFrame() {
        TextureView textureView;
        if (this.captureFrameAtTime != -1 && (textureView = this.videoTextureView) != null) {
            this.captureFrameAtTime = -1;
            final Bitmap bitmap = textureView.getBitmap();
            this.flashView.animate().alpha(1.0f).setInterpolator(CubicBezierInterpolator.EASE_BOTH).setDuration(85).setListener(new AnimatorListenerAdapter() {
                public void onAnimationEnd(Animator animator) {
                    PhotoViewer.this.photoCropView.setVideoThumb(bitmap, 0);
                    AnimatorSet unused = PhotoViewer.this.flashAnimator = new AnimatorSet();
                    PhotoViewer.this.flashAnimator.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.flashView, PhotoViewer.this.FLASH_VIEW_VALUE, new float[]{0.0f})});
                    PhotoViewer.this.flashAnimator.setDuration(85);
                    PhotoViewer.this.flashAnimator.setInterpolator(CubicBezierInterpolator.EASE_OUT);
                    PhotoViewer.this.flashAnimator.addListener(new AnimatorListenerAdapter() {
                        public void onAnimationEnd(Animator animator) {
                            if (PhotoViewer.this.flashAnimator != null) {
                                AndroidUtilities.runOnUIThread(PhotoViewer.this.videoPlayRunnable = new PhotoViewer$37$1$$ExternalSyntheticLambda0(this), 860);
                            }
                        }

                        /* access modifiers changed from: private */
                        public /* synthetic */ void lambda$onAnimationEnd$0() {
                            boolean unused = PhotoViewer.this.manuallyPaused = false;
                            if (PhotoViewer.this.videoPlayer != null) {
                                PhotoViewer.this.videoPlayer.play();
                            }
                            Runnable unused2 = PhotoViewer.this.videoPlayRunnable = null;
                        }

                        public void onAnimationCancel(Animator animator) {
                            AnimatorSet unused = PhotoViewer.this.flashAnimator = null;
                        }
                    });
                    PhotoViewer.this.flashAnimator.start();
                }
            }).start();
        }
    }

    /* access modifiers changed from: private */
    /* renamed from: createCaptionTextView */
    public TextView lambda$setParentActivity$6() {
        AnonymousClass38 r0 = new SpoilersTextView(this.activityContext) {
            private AnimatedEmojiSpan.EmojiGroupedSpans animatedEmojiDrawables;
            private Layout lastLayout;
            private LinkSpanDrawable.LinkCollector links = new LinkSpanDrawable.LinkCollector(this);
            private LinkSpanDrawable<ClickableSpan> pressedLink;

            /* JADX WARNING: Removed duplicated region for block: B:27:0x00f9  */
            /* JADX WARNING: Removed duplicated region for block: B:36:0x0122  */
            /* JADX WARNING: Removed duplicated region for block: B:37:0x0124  */
            /* JADX WARNING: Removed duplicated region for block: B:40:0x012d A[ADDED_TO_REGION] */
            /* JADX WARNING: Removed duplicated region for block: B:42:? A[ADDED_TO_REGION, RETURN, SYNTHETIC] */
            /* Code decompiled incorrectly, please refer to instructions dump. */
            public boolean onTouchEvent(android.view.MotionEvent r10) {
                /*
                    r9 = this;
                    int r0 = r10.getAction()
                    r1 = 0
                    r2 = 0
                    r3 = 1
                    if (r0 == 0) goto L_0x0028
                    org.telegram.ui.Components.LinkSpanDrawable<android.text.style.ClickableSpan> r0 = r9.pressedLink
                    if (r0 == 0) goto L_0x0014
                    int r0 = r10.getAction()
                    if (r0 != r3) goto L_0x0014
                    goto L_0x0028
                L_0x0014:
                    int r0 = r10.getAction()
                    r4 = 3
                    if (r0 != r4) goto L_0x0025
                    org.telegram.ui.Components.LinkSpanDrawable$LinkCollector r0 = r9.links
                    r0.clear()
                    r9.pressedLink = r1
                L_0x0022:
                    r0 = 1
                    goto L_0x0119
                L_0x0025:
                    r0 = 0
                    goto L_0x0119
                L_0x0028:
                    float r0 = r10.getX()
                    int r4 = r9.getPaddingLeft()
                    float r4 = (float) r4
                    float r0 = r0 - r4
                    int r0 = (int) r0
                    float r4 = r10.getY()
                    int r5 = r9.getPaddingTop()
                    float r5 = (float) r5
                    float r4 = r4 - r5
                    int r4 = (int) r4
                    android.text.Layout r5 = r9.getLayout()
                    int r5 = r5.getLineForVertical(r4)
                    android.text.Layout r6 = r9.getLayout()
                    float r0 = (float) r0
                    int r6 = r6.getOffsetForHorizontal(r5, r0)
                    android.text.Layout r7 = r9.getLayout()
                    float r7 = r7.getLineLeft(r5)
                    int r8 = (r7 > r0 ? 1 : (r7 == r0 ? 0 : -1))
                    if (r8 > 0) goto L_0x00f1
                    android.text.Layout r8 = r9.getLayout()
                    float r5 = r8.getLineWidth(r5)
                    float r7 = r7 + r5
                    int r0 = (r7 > r0 ? 1 : (r7 == r0 ? 0 : -1))
                    if (r0 < 0) goto L_0x00f1
                    if (r4 < 0) goto L_0x00f1
                    android.text.Layout r0 = r9.getLayout()
                    int r0 = r0.getHeight()
                    if (r4 > r0) goto L_0x00f1
                    android.text.SpannableString r0 = new android.text.SpannableString
                    java.lang.CharSequence r4 = r9.getText()
                    r0.<init>(r4)
                    java.lang.Class<android.text.style.ClickableSpan> r4 = android.text.style.ClickableSpan.class
                    java.lang.Object[] r4 = r0.getSpans(r6, r6, r4)
                    android.text.style.ClickableSpan[] r4 = (android.text.style.ClickableSpan[]) r4
                    int r5 = r4.length
                    if (r5 == 0) goto L_0x00f1
                    r5 = r4[r2]
                    int r6 = r10.getAction()
                    if (r6 != 0) goto L_0x00f2
                    org.telegram.ui.Components.LinkSpanDrawable$LinkCollector r6 = r9.links
                    r6.clear()
                    org.telegram.ui.Components.LinkSpanDrawable r6 = new org.telegram.ui.Components.LinkSpanDrawable
                    r4 = r4[r2]
                    float r7 = r10.getX()
                    float r8 = r10.getY()
                    r6.<init>(r4, r1, r7, r8)
                    r9.pressedLink = r6
                    r4 = 1717742051(0x6662a9e3, float:2.6759717E23)
                    r6.setColor(r4)
                    org.telegram.ui.Components.LinkSpanDrawable$LinkCollector r4 = r9.links
                    org.telegram.ui.Components.LinkSpanDrawable<android.text.style.ClickableSpan> r6 = r9.pressedLink
                    r4.addLink(r6)
                    org.telegram.ui.Components.LinkSpanDrawable<android.text.style.ClickableSpan> r4 = r9.pressedLink
                    android.text.style.CharacterStyle r4 = r4.getSpan()
                    int r4 = r0.getSpanStart(r4)
                    org.telegram.ui.Components.LinkSpanDrawable<android.text.style.ClickableSpan> r6 = r9.pressedLink
                    android.text.style.CharacterStyle r6 = r6.getSpan()
                    int r0 = r0.getSpanEnd(r6)
                    org.telegram.ui.Components.LinkSpanDrawable<android.text.style.ClickableSpan> r6 = r9.pressedLink
                    org.telegram.ui.Components.LinkPath r6 = r6.obtainNewPath()
                    android.text.Layout r7 = r9.getLayout()
                    int r8 = r9.getPaddingTop()
                    float r8 = (float) r8
                    r6.setCurrentLayout(r7, r4, r8)
                    android.text.Layout r7 = r9.getLayout()
                    r7.getSelectionPath(r4, r0, r6)
                    org.telegram.ui.Components.LinkSpanDrawable<android.text.style.ClickableSpan> r0 = r9.pressedLink
                    org.telegram.ui.PhotoViewer$38$$ExternalSyntheticLambda1 r4 = new org.telegram.ui.PhotoViewer$38$$ExternalSyntheticLambda1
                    r4.<init>(r9, r0)
                    int r0 = android.view.ViewConfiguration.getLongPressTimeout()
                    long r6 = (long) r0
                    r9.postDelayed(r4, r6)
                    r0 = 1
                    goto L_0x00f3
                L_0x00f1:
                    r5 = r1
                L_0x00f2:
                    r0 = 0
                L_0x00f3:
                    int r4 = r10.getAction()
                    if (r4 != r3) goto L_0x0119
                    org.telegram.ui.Components.LinkSpanDrawable$LinkCollector r0 = r9.links
                    r0.clear()
                    org.telegram.ui.Components.LinkSpanDrawable<android.text.style.ClickableSpan> r0 = r9.pressedLink
                    if (r0 == 0) goto L_0x0115
                    android.text.style.CharacterStyle r0 = r0.getSpan()
                    if (r0 != r5) goto L_0x0115
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    org.telegram.ui.Components.LinkSpanDrawable<android.text.style.ClickableSpan> r4 = r9.pressedLink
                    android.text.style.CharacterStyle r4 = r4.getSpan()
                    android.text.style.ClickableSpan r4 = (android.text.style.ClickableSpan) r4
                    r0.onLinkClick(r4, r9)
                L_0x0115:
                    r9.pressedLink = r1
                    goto L_0x0022
                L_0x0119:
                    if (r0 != 0) goto L_0x0124
                    boolean r10 = super.onTouchEvent(r10)
                    if (r10 == 0) goto L_0x0122
                    goto L_0x0124
                L_0x0122:
                    r10 = 0
                    goto L_0x0125
                L_0x0124:
                    r10 = 1
                L_0x0125:
                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                    boolean r0 = r0.bottomTouchEnabled
                    if (r0 == 0) goto L_0x0130
                    if (r10 == 0) goto L_0x0130
                    r2 = 1
                L_0x0130:
                    return r2
                */
                throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.AnonymousClass38.onTouchEvent(android.view.MotionEvent):boolean");
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onTouchEvent$1(LinkSpanDrawable linkSpanDrawable) {
                LinkSpanDrawable<ClickableSpan> linkSpanDrawable2 = this.pressedLink;
                if (linkSpanDrawable == linkSpanDrawable2 && linkSpanDrawable2 != null && (linkSpanDrawable2.getSpan() instanceof URLSpan)) {
                    PhotoViewer.this.onLinkLongPress((URLSpan) this.pressedLink.getSpan(), this, new PhotoViewer$38$$ExternalSyntheticLambda0(this));
                    this.pressedLink = null;
                }
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$onTouchEvent$0() {
                this.links.clear();
            }

            public void setPressed(boolean z) {
                boolean z2 = z != isPressed();
                super.setPressed(z);
                if (z2) {
                    invalidate();
                }
            }

            /* access modifiers changed from: protected */
            public void onDraw(Canvas canvas) {
                canvas.save();
                canvas.translate((float) getPaddingLeft(), 0.0f);
                if (this.links.draw(canvas)) {
                    invalidate();
                }
                canvas.restore();
                super.onDraw(canvas);
                if (this.lastLayout != getLayout()) {
                    this.animatedEmojiDrawables = AnimatedEmojiSpan.update(0, (View) this, this.animatedEmojiDrawables, getLayout());
                    this.lastLayout = getLayout();
                }
            }

            /* access modifiers changed from: protected */
            public void onDetachedFromWindow() {
                super.onDetachedFromWindow();
                AnimatedEmojiSpan.release((View) this, this.animatedEmojiDrawables);
            }

            /* access modifiers changed from: protected */
            public void onTextChanged(CharSequence charSequence, int i, int i2, int i3) {
                super.onTextChanged(charSequence, i, i2, i3);
                this.animatedEmojiDrawables = AnimatedEmojiSpan.update(0, (View) this, this.animatedEmojiDrawables, getLayout());
            }

            /* access modifiers changed from: protected */
            public void dispatchDraw(Canvas canvas) {
                super.dispatchDraw(canvas);
                canvas.save();
                canvas.translate((float) getPaddingLeft(), (float) getPaddingTop());
                canvas.clipRect(0.0f, (float) getScrollY(), (float) (getWidth() - getPaddingRight()), ((float) (getHeight() + getScrollY())) - (((float) getPaddingBottom()) * 0.75f));
                AnimatedEmojiSpan.drawAnimatedEmojis(canvas, getLayout(), this.animatedEmojiDrawables, 0.0f, (List<SpoilerEffect>) null, 0.0f, 0.0f, 0.0f, 1.0f);
                canvas.restore();
            }
        };
        ViewHelper.setPadding(r0, 16.0f, 8.0f, 16.0f, 8.0f);
        r0.setLinkTextColor(-8796932);
        r0.setTextColor(-1);
        r0.setHighlightColor(NUM);
        r0.setGravity(LayoutHelper.getAbsoluteGravityStart() | 16);
        r0.setTextSize(1, 16.0f);
        r0.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda24(this));
        return r0;
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$createCaptionTextView$44(View view) {
        if (this.needCaptionLayout) {
            openCaptionEnter();
        }
    }

    /* access modifiers changed from: private */
    public int getLeftInset() {
        Object obj = this.lastInsets;
        if (obj == null || Build.VERSION.SDK_INT < 21) {
            return 0;
        }
        return ((WindowInsets) obj).getSystemWindowInsetLeft();
    }

    /* access modifiers changed from: private */
    public int getRightInset() {
        Object obj = this.lastInsets;
        if (obj == null || Build.VERSION.SDK_INT < 21) {
            return 0;
        }
        return ((WindowInsets) obj).getSystemWindowInsetRight();
    }

    /* access modifiers changed from: private */
    public void dismissInternal() {
        try {
            if (this.windowView.getParent() != null) {
                Activity activity = this.parentActivity;
                if (activity instanceof LaunchActivity) {
                    ((LaunchActivity) activity).drawerLayoutContainer.setAllowDrawContent(true);
                }
                ((WindowManager) this.parentActivity.getSystemService("window")).removeView(this.windowView);
                onHideView();
            }
        } catch (Exception e) {
            FileLog.e((Throwable) e);
        }
    }

    /* access modifiers changed from: private */
    public void switchToPip(boolean z) {
        CubicBezierInterpolator cubicBezierInterpolator;
        CubicBezierInterpolator cubicBezierInterpolator2;
        if (this.videoPlayer != null && this.textureUploaded && checkInlinePermissions() && !this.changingTextureView && !this.switchingInlineMode && !this.isInline) {
            if (PipInstance != null) {
                PipInstance.destroyPhotoViewer();
            }
            this.openedFullScreenVideo = false;
            PipInstance = Instance;
            Instance = null;
            this.switchingInlineMode = true;
            this.isVisible = false;
            AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
            PlaceProviderObject placeProviderObject = this.currentPlaceObject;
            if (placeProviderObject != null && !placeProviderObject.imageReceiver.getVisible()) {
                this.currentPlaceObject.imageReceiver.setVisible(true, true);
                AnimatedFileDrawable animation = this.currentPlaceObject.imageReceiver.getAnimation();
                if (animation != null) {
                    Bitmap animatedBitmap = animation.getAnimatedBitmap();
                    if (animatedBitmap != null) {
                        try {
                            Bitmap bitmap = this.videoTextureView.getBitmap(animatedBitmap.getWidth(), animatedBitmap.getHeight());
                            new Canvas(animatedBitmap).drawBitmap(bitmap, 0.0f, 0.0f, (Paint) null);
                            bitmap.recycle();
                        } catch (Throwable th) {
                            FileLog.e(th);
                        }
                    }
                    animation.seekTo(this.videoPlayer.getCurrentPosition(), true);
                    if (z) {
                        this.currentPlaceObject.imageReceiver.setAlpha(0.0f);
                        final ImageReceiver imageReceiver = this.currentPlaceObject.imageReceiver;
                        ValueAnimator ofFloat = ValueAnimator.ofFloat(new float[]{0.0f, 1.0f});
                        ofFloat.addUpdateListener(new PhotoViewer$$ExternalSyntheticLambda0(imageReceiver));
                        ofFloat.addListener(new AnimatorListenerAdapter(this) {
                            public void onAnimationEnd(Animator animator) {
                                imageReceiver.setAlpha(1.0f);
                            }
                        });
                        ofFloat.setDuration(250);
                        ofFloat.start();
                    }
                    this.currentPlaceObject.imageReceiver.setAllowStartAnimation(true);
                    this.currentPlaceObject.imageReceiver.startAnimation();
                }
            }
            if (Build.VERSION.SDK_INT >= 21) {
                this.pipAnimationInProgress = true;
                org.telegram.ui.Components.Rect pipRect = PipVideoOverlay.getPipRect(true, this.aspectRatioFrameLayout.getAspectRatio());
                final float width = pipRect.width / ((float) this.videoTextureView.getWidth());
                final ValueAnimator ofFloat2 = ValueAnimator.ofFloat(new float[]{0.0f, 1.0f});
                float translationX2 = this.videoTextureView.getTranslationX();
                float translationY2 = this.videoTextureView.getTranslationY() + this.translationY;
                float translationY3 = this.textureImageView.getTranslationY() + this.translationY;
                float f = pipRect.x;
                float x = (f - this.aspectRatioFrameLayout.getX()) + ((float) getLeftInset());
                float f2 = pipRect.y;
                float y = f2 - this.aspectRatioFrameLayout.getY();
                this.textureImageView.setTranslationY(translationY3);
                this.videoTextureView.setTranslationY(translationY2);
                FirstFrameView firstFrameView2 = this.firstFrameView;
                if (firstFrameView2 != null) {
                    firstFrameView2.setTranslationY(translationY2);
                }
                this.translationY = 0.0f;
                this.containerView.invalidate();
                if (z) {
                    if (translationY2 < y) {
                        cubicBezierInterpolator2 = new CubicBezierInterpolator(0.5d, 0.0d, 0.9d, 0.9d);
                    } else {
                        cubicBezierInterpolator2 = new CubicBezierInterpolator(0.0d, 0.5d, 0.9d, 0.9d);
                    }
                    cubicBezierInterpolator = cubicBezierInterpolator2;
                } else {
                    cubicBezierInterpolator = null;
                }
                AnonymousClass40 r1 = new ViewOutlineProvider(this) {
                    public void getOutline(View view, Outline outline) {
                        outline.setRoundRect(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight(), ((Float) ofFloat2.getAnimatedValue()).floatValue() * ((float) AndroidUtilities.dp(10.0f)) * (1.0f / width));
                    }
                };
                this.videoTextureView.setOutlineProvider(r1);
                this.videoTextureView.setClipToOutline(true);
                this.textureImageView.setOutlineProvider(r1);
                this.textureImageView.setClipToOutline(true);
                FirstFrameView firstFrameView3 = this.firstFrameView;
                if (firstFrameView3 != null) {
                    firstFrameView3.setOutlineProvider(r1);
                    this.firstFrameView.setClipToOutline(true);
                }
                PhotoViewer$$ExternalSyntheticLambda9 photoViewer$$ExternalSyntheticLambda9 = r1;
                float f3 = translationY2;
                float f4 = f2;
                ValueAnimator valueAnimator = ofFloat2;
                float f5 = width;
                PhotoViewer$$ExternalSyntheticLambda9 photoViewer$$ExternalSyntheticLambda92 = new PhotoViewer$$ExternalSyntheticLambda9(this, cubicBezierInterpolator, translationX2, f, translationY3, f4, x, f3, y);
                valueAnimator.addUpdateListener(photoViewer$$ExternalSyntheticLambda9);
                AnimatorSet animatorSet = new AnimatorSet();
                ValueAnimator ofFloat3 = ValueAnimator.ofFloat(new float[]{0.0f, 1.0f});
                ofFloat3.addUpdateListener(new PhotoViewer$$ExternalSyntheticLambda2(this));
                animatorSet.playTogether(new Animator[]{ofFloat3, ObjectAnimator.ofFloat(this.textureImageView, View.SCALE_X, new float[]{f5}), ObjectAnimator.ofFloat(this.textureImageView, View.SCALE_Y, new float[]{f5}), ObjectAnimator.ofFloat(this.videoTextureView, View.SCALE_X, new float[]{f5}), ObjectAnimator.ofFloat(this.videoTextureView, View.SCALE_Y, new float[]{f5}), ObjectAnimator.ofInt(this.backgroundDrawable, AnimationProperties.COLOR_DRAWABLE_ALPHA, new int[]{0}), valueAnimator});
                if (z) {
                    animatorSet.setInterpolator(CubicBezierInterpolator.EASE_OUT);
                    animatorSet.setDuration(300);
                } else {
                    animatorSet.setInterpolator(new DecelerateInterpolator());
                    animatorSet.setDuration(250);
                }
                animatorSet.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animator) {
                        boolean unused = PhotoViewer.this.pipAnimationInProgress = false;
                        PhotoViewer.this.switchToInlineRunnable.run();
                        AndroidUtilities.runOnUIThread(new PhotoViewer$41$$ExternalSyntheticLambda0(this), 100);
                    }

                    /* access modifiers changed from: private */
                    public /* synthetic */ void lambda$onAnimationEnd$0() {
                        PhotoViewer.this.videoTextureView.setOutlineProvider((ViewOutlineProvider) null);
                        PhotoViewer.this.textureImageView.setOutlineProvider((ViewOutlineProvider) null);
                        if (PhotoViewer.this.firstFrameView != null) {
                            PhotoViewer.this.firstFrameView.setOutlineProvider((ViewOutlineProvider) null);
                        }
                    }
                });
                animatorSet.start();
                if (!z) {
                    toggleActionBar(false, true, new ActionBarToggleParams().enableStatusBarAnimation(false).enableTranslationAnimation(false).animationDuration(250).animationInterpolator(new DecelerateInterpolator()));
                }
            } else {
                this.switchToInlineRunnable.run();
                dismissInternal();
            }
            ChatActivity chatActivity = this.parentChatActivity;
            if (chatActivity != null) {
                chatActivity.getFragmentView().invalidate();
            }
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$switchToPip$46(CubicBezierInterpolator cubicBezierInterpolator, float f, float f2, float f3, float f4, float f5, float f6, float f7, ValueAnimator valueAnimator) {
        float f8;
        float floatValue = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        if (cubicBezierInterpolator == null) {
            f8 = floatValue;
        } else {
            f8 = cubicBezierInterpolator.getInterpolation(floatValue);
        }
        ImageView imageView = this.textureImageView;
        if (imageView != null) {
            imageView.setTranslationX(((1.0f - floatValue) * f) + (f2 * floatValue));
            this.textureImageView.setTranslationY((f3 * (1.0f - f8)) + (f4 * f8));
            this.textureImageView.invalidateOutline();
        }
        TextureView textureView = this.videoTextureView;
        if (textureView != null) {
            textureView.setTranslationX((f * (1.0f - floatValue)) + (f5 * floatValue));
            this.videoTextureView.setTranslationY((f6 * (1.0f - f8)) + (f7 * f8));
            this.videoTextureView.invalidateOutline();
        }
        FirstFrameView firstFrameView2 = this.firstFrameView;
        if (firstFrameView2 != null) {
            firstFrameView2.setTranslationX(this.videoTextureView.getTranslationX());
            this.firstFrameView.setTranslationY(this.videoTextureView.getTranslationY());
            this.firstFrameView.setScaleX(this.videoTextureView.getScaleX());
            this.firstFrameView.setScaleY(this.videoTextureView.getScaleY());
            this.firstFrameView.invalidateOutline();
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$switchToPip$47(ValueAnimator valueAnimator) {
        this.clippingImageProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
    }

    /* access modifiers changed from: private */
    public boolean cropMirror() {
        if (this.imageMoveAnimation != null || this.photoCropView == null) {
            return false;
        }
        this.mirror = 0.0f;
        this.animateToMirror = 1.0f;
        this.animationStartTime = System.currentTimeMillis();
        AnimatorSet animatorSet = new AnimatorSet();
        this.imageMoveAnimation = animatorSet;
        animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f})});
        this.imageMoveAnimation.setDuration(250);
        this.imageMoveAnimation.setInterpolator(CubicBezierInterpolator.DEFAULT);
        this.imageMoveAnimation.addListener(new AnimatorListenerAdapter() {
            public void onAnimationEnd(Animator animator) {
                AnimatorSet unused = PhotoViewer.this.imageMoveAnimation = null;
                if (PhotoViewer.this.photoCropView != null) {
                    if (PhotoViewer.this.photoCropView.mirror()) {
                        PhotoViewer.this.mirrorItem.setColorFilter(new PorterDuffColorFilter(PhotoViewer.this.getThemedColor("dialogFloatingButton"), PorterDuff.Mode.MULTIPLY));
                    } else {
                        PhotoViewer.this.mirrorItem.setColorFilter((ColorFilter) null);
                    }
                    PhotoViewer photoViewer = PhotoViewer.this;
                    float unused2 = photoViewer.mirror = photoViewer.animateToMirror = 0.0f;
                    PhotoViewer.this.containerView.invalidate();
                }
            }
        });
        this.imageMoveAnimation.start();
        return !this.photoCropView.cropView.isMirrored();
    }

    /* access modifiers changed from: private */
    public boolean cropRotate(float f) {
        return cropRotate(f, false, (Runnable) null);
    }

    private boolean cropRotate(final float f, boolean z, final Runnable runnable) {
        PhotoCropView photoCropView2;
        if (this.imageMoveAnimation != null || (photoCropView2 = this.photoCropView) == null) {
            return false;
        }
        photoCropView2.cropView.maximize(true);
        this.rotate = 0.0f;
        this.animateToRotate = 0.0f + f;
        if (z) {
            this.mirror = 0.0f;
            this.animateToMirror = 1.0f;
        }
        this.animationStartTime = System.currentTimeMillis();
        this.imageMoveAnimation = new AnimatorSet();
        ImageReceiver imageReceiver = this.centerImage;
        if (imageReceiver != null) {
            int bitmapWidth = imageReceiver.getBitmapWidth();
            int bitmapHeight = this.centerImage.getBitmapHeight();
            if (Math.abs((((int) this.photoCropView.cropView.getStateOrientation()) / 90) % 2) == 1) {
                int i = bitmapHeight;
                bitmapHeight = bitmapWidth;
                bitmapWidth = i;
            }
            MediaController.CropState cropState = this.editState.cropState;
            if (cropState != null) {
                bitmapWidth = (int) (((float) bitmapWidth) * cropState.cropPw);
                bitmapHeight = (int) (((float) bitmapHeight) * cropState.cropPh);
            }
            float f2 = (float) bitmapWidth;
            float f3 = (float) bitmapHeight;
            float min = Math.min(((float) getContainerViewWidth(1)) / f2, ((float) getContainerViewHeight(1)) / f3);
            this.animateToScale = (Math.abs((f / 90.0f) % 2.0f) == 1.0f ? Math.min(((float) getContainerViewWidth(1)) / f3, ((float) getContainerViewHeight(1)) / f2) : min) / min;
        }
        ValueAnimator ofFloat = ValueAnimator.ofFloat(new float[]{0.0f, 1.0f});
        ofFloat.addUpdateListener(new PhotoViewer$$ExternalSyntheticLambda7(this, f, this.photoCropView.wheelView.getRotation()));
        this.imageMoveAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}), ofFloat});
        this.imageMoveAnimation.setDuration(250);
        this.imageMoveAnimation.setInterpolator(CubicBezierInterpolator.DEFAULT);
        this.imageMoveAnimation.addListener(new AnimatorListenerAdapter() {
            public void onAnimationEnd(Animator animator) {
                AnimatorSet unused = PhotoViewer.this.imageMoveAnimation = null;
                PhotoViewer photoViewer = PhotoViewer.this;
                float unused2 = photoViewer.rotate = photoViewer.animateToRotate = 0.0f;
                PhotoViewer photoViewer2 = PhotoViewer.this;
                float unused3 = photoViewer2.mirror = photoViewer2.animateToMirror = 0.0f;
                PhotoViewer photoViewer3 = PhotoViewer.this;
                float unused4 = photoViewer3.scale = photoViewer3.animateToScale = 1.0f;
                PhotoViewer.this.containerView.invalidate();
                PhotoViewer.this.photoCropView.cropView.areaView.setRotationScaleTranslation(0.0f, 1.0f, 0.0f, 0.0f);
                PhotoViewer.this.photoCropView.wheelView.setRotated(false);
                if (Math.abs(f) > 0.0f) {
                    if (PhotoViewer.this.photoCropView.rotate(f)) {
                        PhotoViewer.this.rotateItem.setColorFilter(new PorterDuffColorFilter(PhotoViewer.this.getThemedColor("dialogFloatingButton"), PorterDuff.Mode.MULTIPLY));
                    } else {
                        PhotoViewer.this.rotateItem.setColorFilter((ColorFilter) null);
                    }
                }
                if (PhotoViewer.this.editState.cropState != null) {
                    MediaController.CropState cropState = PhotoViewer.this.editState.cropState;
                    PhotoViewer.this.editState.cropState.cropPy = 0.0f;
                    cropState.cropPx = 0.0f;
                    MediaController.CropState cropState2 = PhotoViewer.this.editState.cropState;
                    PhotoViewer.this.editState.cropState.cropPh = 1.0f;
                    cropState2.cropPw = 1.0f;
                }
                Runnable runnable = runnable;
                if (runnable != null) {
                    runnable.run();
                }
            }
        });
        this.imageMoveAnimation.start();
        if (Math.abs(this.photoCropView.cropView.getStateOrientation() + f) > 0.01f) {
            return true;
        }
        return false;
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$cropRotate$48(float f, float f2, ValueAnimator valueAnimator) {
        CropAreaView cropAreaView = this.photoCropView.cropView.areaView;
        float floatValue = ((Float) valueAnimator.getAnimatedValue()).floatValue() * f;
        float f3 = this.scale;
        cropAreaView.setRotationScaleTranslation(floatValue, f3 + ((this.animateToScale - f3) * this.animationValue), 0.0f, 0.0f);
        this.photoCropView.wheelView.setRotation(AndroidUtilities.lerp(f2, 0.0f, ((Float) valueAnimator.getAnimatedValue()).floatValue()), false);
    }

    public VideoPlayer getVideoPlayer() {
        return this.videoPlayer;
    }

    public void exitFromPip() {
        TextureView textureView;
        if (this.isInline) {
            if (Instance != null) {
                Instance.closePhoto(false, true);
            }
            PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
            if (photoViewerWebView2 != null) {
                photoViewerWebView2.exitFromPip();
            }
            Instance = PipInstance;
            PipInstance = null;
            if (this.photoViewerWebView == null) {
                this.switchingInlineMode = true;
                Bitmap bitmap = this.currentBitmap;
                if (bitmap != null) {
                    bitmap.recycle();
                    this.currentBitmap = null;
                }
                this.changingTextureView = true;
            }
            this.isInline = false;
            if (this.photoViewerWebView == null && (textureView = this.videoTextureView) != null) {
                if (textureView.getParent() != null) {
                    ((ViewGroup) this.videoTextureView.getParent()).removeView(this.videoTextureView);
                }
                this.videoTextureView.setVisibility(4);
                this.aspectRatioFrameLayout.addView(this.videoTextureView);
            }
            if (ApplicationLoader.mainInterfacePaused) {
                try {
                    this.parentActivity.startService(new Intent(ApplicationLoader.applicationContext, BringAppForegroundService.class));
                } catch (Throwable th) {
                    FileLog.e(th);
                }
            }
            if (this.photoViewerWebView != null) {
                this.clippingImageProgress = 0.0f;
            } else if (Build.VERSION.SDK_INT < 21 || this.videoTextureView == null) {
                PipVideoOverlay.dismiss(true);
            } else {
                this.pipAnimationInProgress = true;
                org.telegram.ui.Components.Rect pipRect = PipVideoOverlay.getPipRect(false, this.aspectRatioFrameLayout.getAspectRatio());
                final float f = pipRect.width / ((float) this.textureImageView.getLayoutParams().width);
                this.textureImageView.setScaleX(f);
                this.textureImageView.setScaleY(f);
                this.textureImageView.setTranslationX(pipRect.x);
                this.textureImageView.setTranslationY(pipRect.y);
                this.videoTextureView.setScaleX(f);
                this.videoTextureView.setScaleY(f);
                this.videoTextureView.setTranslationX(pipRect.x - this.aspectRatioFrameLayout.getX());
                this.videoTextureView.setTranslationY(pipRect.y - this.aspectRatioFrameLayout.getY());
                FirstFrameView firstFrameView2 = this.firstFrameView;
                if (firstFrameView2 != null) {
                    firstFrameView2.setScaleX(f);
                    this.firstFrameView.setScaleY(f);
                    this.firstFrameView.setTranslationX(this.videoTextureView.getTranslationX());
                    this.firstFrameView.setTranslationY(this.videoTextureView.getTranslationY());
                }
                this.inlineOutAnimationProgress = 0.0f;
                AnonymousClass44 r0 = new ViewOutlineProvider() {
                    public void getOutline(View view, Outline outline) {
                        outline.setRoundRect(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight(), (1.0f - PhotoViewer.this.inlineOutAnimationProgress) * ((float) AndroidUtilities.dp(10.0f)) * (1.0f / f));
                    }
                };
                this.videoTextureView.setOutlineProvider(r0);
                this.videoTextureView.setClipToOutline(true);
                this.textureImageView.setOutlineProvider(r0);
                this.textureImageView.setClipToOutline(true);
                FirstFrameView firstFrameView3 = this.firstFrameView;
                if (firstFrameView3 != null) {
                    firstFrameView3.setOutlineProvider(r0);
                    this.firstFrameView.setClipToOutline(true);
                }
            }
            try {
                this.isVisible = true;
                ((WindowManager) this.parentActivity.getSystemService("window")).addView(this.windowView, this.windowLayoutParams);
                onShowView();
                PlaceProviderObject placeProviderObject = this.currentPlaceObject;
                if (placeProviderObject != null) {
                    placeProviderObject.imageReceiver.setVisible(false, false);
                }
            } catch (Exception e) {
                FileLog.e((Throwable) e);
            }
            if (Build.VERSION.SDK_INT >= 21) {
                this.waitingForDraw = 4;
            }
        }
    }

    private void onShowView() {
        Activity activity = this.parentActivity;
        if (activity instanceof LaunchActivity) {
            ((LaunchActivity) activity).addOnUserLeaveHintListener(this.onUserLeaveHintListener);
        }
    }

    private void onHideView() {
        Activity activity = this.parentActivity;
        if (activity instanceof LaunchActivity) {
            ((LaunchActivity) activity).removeOnUserLeaveHintListener(this.onUserLeaveHintListener);
        }
        BaseFragment baseFragment = this.parentFragment;
        if (baseFragment != null && baseFragment.getFragmentView() != null) {
            this.clippingImageProgress = 1.0f;
            View fragmentView = this.parentFragment.getFragmentView();
            fragmentView.setScaleX(1.0f);
            fragmentView.setScaleY(1.0f);
            ChatAttachAlert chatAttachAlert = this.parentAlert;
            if (chatAttachAlert != null) {
                FrameLayout container = chatAttachAlert.getContainer();
                container.setScaleX(1.0f);
                container.setScaleY(1.0f);
            }
        }
    }

    /* access modifiers changed from: private */
    public void onUserLeaveHint() {
        if (this.pipItem.getAlpha() == 1.0f && AndroidUtilities.checkInlinePermissions(this.parentActivity) && !PipVideoOverlay.isVisible() && this.isPlaying) {
            if (this.isEmbedVideo) {
                PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
                if (photoViewerWebView2 != null && !photoViewerWebView2.isInAppOnly() && this.photoViewerWebView.openInPip()) {
                    this.pipVideoOverlayAnimateFlag = false;
                    if (PipInstance != null) {
                        PipInstance.destroyPhotoViewer();
                    }
                    this.isInline = true;
                    PipInstance = Instance;
                    Instance = null;
                    this.isVisible = false;
                    PlaceProviderObject placeProviderObject = this.currentPlaceObject;
                    if (placeProviderObject != null && !placeProviderObject.imageReceiver.getVisible()) {
                        this.currentPlaceObject.imageReceiver.setVisible(true, true);
                    }
                    this.clippingImageProgress = 1.0f;
                    this.containerView.invalidate();
                    dismissInternal();
                    return;
                }
                return;
            }
            this.pipVideoOverlayAnimateFlag = false;
            switchToPip(false);
        }
    }

    /* access modifiers changed from: private */
    public void updateVideoSeekPreviewPosition() {
        int thumbX = (this.videoPlayerSeekbar.getThumbX() + AndroidUtilities.dp(2.0f)) - (this.videoPreviewFrame.getMeasuredWidth() / 2);
        int dp = AndroidUtilities.dp(10.0f);
        int measuredWidth = (this.videoPlayerControlFrameLayout.getMeasuredWidth() - AndroidUtilities.dp(10.0f)) - (this.videoPreviewFrame.getMeasuredWidth() / 2);
        if (thumbX < dp) {
            thumbX = dp;
        } else if (thumbX >= measuredWidth) {
            thumbX = measuredWidth;
        }
        this.videoPreviewFrame.setTranslationX((float) thumbX);
    }

    /* access modifiers changed from: private */
    public void showVideoSeekPreviewPosition(boolean z) {
        PhotoViewerWebView photoViewerWebView2;
        if (z && this.videoPreviewFrame.getTag() != null) {
            return;
        }
        if (!z && this.videoPreviewFrame.getTag() == null) {
            return;
        }
        if (!z || this.videoPreviewFrame.isReady() || ((photoViewerWebView2 = this.photoViewerWebView) != null && photoViewerWebView2.isYouTube() && this.photoViewerWebView.hasYoutubeStoryboards())) {
            AnimatorSet animatorSet = this.videoPreviewFrameAnimation;
            if (animatorSet != null) {
                animatorSet.cancel();
            }
            this.videoPreviewFrame.setTag(z ? 1 : null);
            AnimatorSet animatorSet2 = new AnimatorSet();
            this.videoPreviewFrameAnimation = animatorSet2;
            Animator[] animatorArr = new Animator[1];
            VideoSeekPreviewImage videoSeekPreviewImage = this.videoPreviewFrame;
            Property property = View.ALPHA;
            float[] fArr = new float[1];
            fArr[0] = z ? 1.0f : 0.0f;
            animatorArr[0] = ObjectAnimator.ofFloat(videoSeekPreviewImage, property, fArr);
            animatorSet2.playTogether(animatorArr);
            this.videoPreviewFrameAnimation.addListener(new AnimatorListenerAdapter() {
                public void onAnimationEnd(Animator animator) {
                    AnimatorSet unused = PhotoViewer.this.videoPreviewFrameAnimation = null;
                }
            });
            this.videoPreviewFrameAnimation.setDuration(180);
            this.videoPreviewFrameAnimation.start();
            return;
        }
        this.needShowOnReady = true;
    }

    private void createVideoControlsInterface() {
        VideoPlayerControlFrameLayout videoPlayerControlFrameLayout2 = new VideoPlayerControlFrameLayout(this.containerView.getContext());
        this.videoPlayerControlFrameLayout = videoPlayerControlFrameLayout2;
        this.containerView.addView(videoPlayerControlFrameLayout2, LayoutHelper.createFrame(-1, 48, 83));
        final AnonymousClass46 r0 = new VideoPlayerSeekBar.SeekBarDelegate() {
            public void onSeekBarDrag(float f) {
                if (PhotoViewer.this.videoPlayer != null || (PhotoViewer.this.photoViewerWebView != null && PhotoViewer.this.photoViewerWebView.isControllable())) {
                    if (!PhotoViewer.this.inPreview && PhotoViewer.this.videoTimelineView.getVisibility() == 0) {
                        f = PhotoViewer.this.videoTimelineView.getLeftProgress() + ((PhotoViewer.this.videoTimelineView.getRightProgress() - PhotoViewer.this.videoTimelineView.getLeftProgress()) * f);
                    }
                    long access$1900 = PhotoViewer.this.getVideoDuration();
                    if (access$1900 == -9223372036854775807L) {
                        float unused = PhotoViewer.this.seekToProgressPending = f;
                    } else {
                        PhotoViewer.this.seekVideoOrWebTo((long) ((int) (f * ((float) access$1900))));
                    }
                    PhotoViewer.this.showVideoSeekPreviewPosition(false);
                    boolean unused2 = PhotoViewer.this.needShowOnReady = false;
                }
            }

            public void onSeekBarContinuousDrag(float f) {
                if (PhotoViewer.this.photoViewerWebView != null && PhotoViewer.this.photoViewerWebView.isYouTube() && PhotoViewer.this.videoPreviewFrame != null) {
                    PhotoViewer.this.videoPreviewFrame.setProgressForYouTube(PhotoViewer.this.photoViewerWebView, f, PhotoViewer.this.videoPlayerSeekbar.getWidth());
                } else if (!(PhotoViewer.this.videoPlayer == null || PhotoViewer.this.videoPreviewFrame == null)) {
                    PhotoViewer.this.videoPreviewFrame.setProgress(f, PhotoViewer.this.videoPlayerSeekbar.getWidth());
                }
                PhotoViewer.this.showVideoSeekPreviewPosition(true);
                PhotoViewer.this.updateVideoSeekPreviewPosition();
            }
        };
        AnonymousClass47 r1 = new FloatSeekBarAccessibilityDelegate() {
            public float getProgress() {
                return PhotoViewer.this.videoPlayerSeekbar.getProgress();
            }

            public void setProgress(float f) {
                r0.onSeekBarDrag(f);
                PhotoViewer.this.videoPlayerSeekbar.setProgress(f);
                PhotoViewer.this.videoPlayerSeekbarView.invalidate();
            }

            public String getContentDescription(View view) {
                return LocaleController.formatString("AccDescrPlayerDuration", R.string.AccDescrPlayerDuration, LocaleController.formatPluralString("Minutes", PhotoViewer.this.videoPlayerCurrentTime[0], new Object[0]) + ' ' + LocaleController.formatPluralString("Seconds", PhotoViewer.this.videoPlayerCurrentTime[1], new Object[0]), LocaleController.formatPluralString("Minutes", PhotoViewer.this.videoPlayerTotalTime[0], new Object[0]) + ' ' + LocaleController.formatPluralString("Seconds", PhotoViewer.this.videoPlayerTotalTime[1], new Object[0]));
            }
        };
        AnonymousClass48 r4 = new View(this.containerView.getContext()) {
            /* access modifiers changed from: protected */
            public void onDraw(Canvas canvas) {
                PhotoViewer.this.videoPlayerSeekbar.draw(canvas, this);
            }
        };
        this.videoPlayerSeekbarView = r4;
        r4.setAccessibilityDelegate(r1);
        this.videoPlayerSeekbarView.setImportantForAccessibility(1);
        this.videoPlayerControlFrameLayout.addView(this.videoPlayerSeekbarView, LayoutHelper.createFrame(-1, -1.0f));
        VideoPlayerSeekBar videoPlayerSeekBar = new VideoPlayerSeekBar(this.videoPlayerSeekbarView);
        this.videoPlayerSeekbar = videoPlayerSeekBar;
        videoPlayerSeekBar.setHorizontalPadding(AndroidUtilities.dp(2.0f));
        this.videoPlayerSeekbar.setColors(NUM, NUM, -1, -1, -1, NUM);
        this.videoPlayerSeekbar.setDelegate(r0);
        AnonymousClass49 r02 = new VideoSeekPreviewImage(this.containerView.getContext(), new PhotoViewer$$ExternalSyntheticLambda84(this)) {
            /* access modifiers changed from: protected */
            public void onLayout(boolean z, int i, int i2, int i3, int i4) {
                super.onLayout(z, i, i2, i3, i4);
                PhotoViewer.this.updateVideoSeekPreviewPosition();
            }

            public void setVisibility(int i) {
                super.setVisibility(i);
                if (i == 0) {
                    PhotoViewer.this.updateVideoSeekPreviewPosition();
                }
            }
        };
        this.videoPreviewFrame = r02;
        r02.setAlpha(0.0f);
        this.containerView.addView(this.videoPreviewFrame, LayoutHelper.createFrame(-2, -2.0f, 83, 0.0f, 0.0f, 0.0f, 58.0f));
        SimpleTextView simpleTextView = new SimpleTextView(this.containerView.getContext());
        this.videoPlayerTime = simpleTextView;
        simpleTextView.setTextColor(-1);
        this.videoPlayerTime.setGravity(53);
        this.videoPlayerTime.setTextSize(14);
        this.videoPlayerTime.setImportantForAccessibility(2);
        this.videoPlayerControlFrameLayout.addView(this.videoPlayerTime, LayoutHelper.createFrame(-2, -2.0f, 53, 0.0f, 15.0f, 12.0f, 0.0f));
        ImageView imageView = new ImageView(this.containerView.getContext());
        this.exitFullscreenButton = imageView;
        imageView.setImageResource(R.drawable.msg_minvideo);
        this.exitFullscreenButton.setContentDescription(LocaleController.getString("AccExitFullscreen", R.string.AccExitFullscreen));
        this.exitFullscreenButton.setScaleType(ImageView.ScaleType.CENTER);
        this.exitFullscreenButton.setBackground(Theme.createSelectorDrawable(NUM));
        this.exitFullscreenButton.setVisibility(4);
        this.videoPlayerControlFrameLayout.addView(this.exitFullscreenButton, LayoutHelper.createFrame(48, 48, 53));
        this.exitFullscreenButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda27(this));
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$createVideoControlsInterface$49() {
        if (this.needShowOnReady) {
            showVideoSeekPreviewPosition(true);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$createVideoControlsInterface$50(View view) {
        Activity activity = this.parentActivity;
        if (activity != null) {
            this.wasRotated = false;
            this.fullscreenedByButton = 2;
            if (this.prevOrientation == -10) {
                this.prevOrientation = activity.getRequestedOrientation();
            }
            this.parentActivity.setRequestedOrientation(1);
        }
    }

    private void openCaptionEnter() {
        int i;
        if (this.imageMoveAnimation == null && this.changeModeAnimation == null && this.currentEditMode == 0 && (i = this.sendPhotoType) != 1 && i != 3 && i != 10) {
            if (!this.windowView.isFocusable()) {
                makeFocusable();
            }
            this.keyboardAnimationEnabled = true;
            this.selectedPhotosListView.setEnabled(false);
            this.photosCounterView.setRotationX(0.0f);
            this.isPhotosListViewVisible = false;
            if (this.captionEditText.getMessageEditText() != null) {
                this.captionEditText.getMessageEditText().invalidateEffects();
                this.captionEditText.getMessageEditText().setText(this.captionEditText.getMessageEditText().getText());
            }
            this.captionEditText.setTag(1);
            this.captionEditText.openKeyboard();
            this.captionEditText.setImportantForAccessibility(0);
            this.lastTitle = this.actionBar.getTitle();
            this.captionEditText.setVisibility(0);
        }
    }

    /* JADX WARNING: Code restructure failed: missing block: B:13:0x0067, code lost:
        if (r4 == null) goto L_0x006a;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private int[] fixVideoWidthHeight(int r8, int r9) {
        /*
            r7 = this;
            java.lang.String r0 = "video/avc"
            r1 = 2
            int[] r1 = new int[r1]
            r2 = 0
            r1[r2] = r8
            r3 = 1
            r1[r3] = r9
            int r4 = android.os.Build.VERSION.SDK_INT
            r5 = 21
            if (r4 < r5) goto L_0x006a
            r4 = 0
            android.media.MediaCodec r4 = android.media.MediaCodec.createEncoderByType(r0)     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            android.media.MediaCodecInfo r5 = r4.getCodecInfo()     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            android.media.MediaCodecInfo$CodecCapabilities r0 = r5.getCapabilitiesForType(r0)     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            android.media.MediaCodecInfo$VideoCapabilities r0 = r0.getVideoCapabilities()     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            android.util.Range r5 = r0.getSupportedWidths()     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            android.util.Range r0 = r0.getSupportedHeights()     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            java.lang.Comparable r5 = r5.getLower()     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            java.lang.Integer r5 = (java.lang.Integer) r5     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            int r5 = r5.intValue()     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            float r8 = (float) r8     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            r6 = 1098907648(0x41800000, float:16.0)
            float r8 = r8 / r6
            int r8 = java.lang.Math.round(r8)     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            int r8 = r8 * 16
            int r8 = java.lang.Math.max(r5, r8)     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            r1[r2] = r8     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            java.lang.Comparable r8 = r0.getLower()     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            java.lang.Integer r8 = (java.lang.Integer) r8     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            int r8 = r8.intValue()     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            float r9 = (float) r9     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            float r9 = r9 / r6
            int r9 = java.lang.Math.round(r9)     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            int r9 = r9 * 16
            int r8 = java.lang.Math.max(r8, r9)     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
            r1[r3] = r8     // Catch:{ Exception -> 0x0067, all -> 0x0060 }
        L_0x005c:
            r4.release()     // Catch:{ Exception -> 0x006a }
            goto L_0x006a
        L_0x0060:
            r8 = move-exception
            if (r4 == 0) goto L_0x0066
            r4.release()     // Catch:{ Exception -> 0x0066 }
        L_0x0066:
            throw r8
        L_0x0067:
            if (r4 == 0) goto L_0x006a
            goto L_0x005c
        L_0x006a:
            return r1
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.fixVideoWidthHeight(int, int):int[]");
    }

    /* access modifiers changed from: private */
    public VideoEditedInfo getCurrentVideoEditedInfo() {
        int i;
        long j;
        int i2 = -1;
        boolean z = false;
        ArrayList<VideoEditedInfo.MediaEntity> arrayList = null;
        if (!this.isCurrentVideo && hasAnimatedMediaEntities() && this.centerImage.getBitmapWidth() > 0) {
            float f = this.sendPhotoType == 1 ? 800.0f : 854.0f;
            VideoEditedInfo videoEditedInfo = new VideoEditedInfo();
            videoEditedInfo.startTime = 0;
            videoEditedInfo.start = (float) 0;
            videoEditedInfo.endTime = Math.min(3000, this.editState.averageDuration);
            while (true) {
                j = videoEditedInfo.endTime;
                if (j <= 0 || j >= 1000) {
                    videoEditedInfo.end = (float) j;
                    videoEditedInfo.rotationValue = 0;
                    videoEditedInfo.originalPath = this.currentImagePath;
                    videoEditedInfo.estimatedSize = (long) ((int) ((((float) j) / 1000.0f) * 115200.0f));
                    videoEditedInfo.estimatedDuration = j;
                    videoEditedInfo.framerate = 30;
                    videoEditedInfo.originalDuration = j;
                    EditState editState2 = this.editState;
                    videoEditedInfo.filterState = editState2.savedFilterState;
                    String str = editState2.croppedPaintPath;
                } else {
                    videoEditedInfo.endTime = j * 2;
                }
            }
            videoEditedInfo.end = (float) j;
            videoEditedInfo.rotationValue = 0;
            videoEditedInfo.originalPath = this.currentImagePath;
            videoEditedInfo.estimatedSize = (long) ((int) ((((float) j) / 1000.0f) * 115200.0f));
            videoEditedInfo.estimatedDuration = j;
            videoEditedInfo.framerate = 30;
            videoEditedInfo.originalDuration = j;
            EditState editState22 = this.editState;
            videoEditedInfo.filterState = editState22.savedFilterState;
            String str2 = editState22.croppedPaintPath;
            if (str2 != null) {
                videoEditedInfo.paintPath = str2;
                ArrayList<VideoEditedInfo.MediaEntity> arrayList2 = editState22.croppedMediaEntities;
                if (arrayList2 != null && !arrayList2.isEmpty()) {
                    arrayList = this.editState.croppedMediaEntities;
                }
                videoEditedInfo.mediaEntities = arrayList;
            } else {
                videoEditedInfo.paintPath = editState22.paintPath;
                videoEditedInfo.mediaEntities = editState22.mediaEntities;
            }
            videoEditedInfo.isPhoto = true;
            int bitmapWidth = this.centerImage.getBitmapWidth();
            int bitmapHeight = this.centerImage.getBitmapHeight();
            MediaController.CropState cropState = this.editState.cropState;
            if (cropState != null) {
                int i3 = cropState.transformRotation;
                if (i3 == 90 || i3 == 270) {
                    int i4 = bitmapHeight;
                    bitmapHeight = bitmapWidth;
                    bitmapWidth = i4;
                }
                bitmapWidth = (int) (((float) bitmapWidth) * cropState.cropPw);
                bitmapHeight = (int) (((float) bitmapHeight) * cropState.cropPh);
            }
            if (this.sendPhotoType == 1) {
                bitmapWidth = bitmapHeight;
            }
            float f2 = (float) bitmapWidth;
            float f3 = (float) bitmapHeight;
            float max = Math.max(f2 / f, f3 / f);
            if (max < 1.0f) {
                max = 1.0f;
            }
            int i5 = (int) (f2 / max);
            int i6 = (int) (f3 / max);
            if (i5 % 16 != 0) {
                i5 = Math.max(1, Math.round(((float) i5) / 16.0f)) * 16;
            }
            if (i6 % 16 != 0) {
                i6 = Math.max(1, Math.round(((float) i6) / 16.0f)) * 16;
            }
            videoEditedInfo.resultWidth = i5;
            videoEditedInfo.originalWidth = i5;
            videoEditedInfo.resultHeight = i6;
            videoEditedInfo.originalHeight = i6;
            videoEditedInfo.bitrate = -1;
            videoEditedInfo.muted = true;
            videoEditedInfo.avatarStartTime = 0;
            return videoEditedInfo;
        } else if (!this.isCurrentVideo || this.currentPlayingVideoFile == null || this.compressionsCount == 0) {
            return null;
        } else {
            VideoEditedInfo videoEditedInfo2 = new VideoEditedInfo();
            videoEditedInfo2.startTime = this.startTime;
            videoEditedInfo2.endTime = this.endTime;
            videoEditedInfo2.start = this.videoCutStart;
            videoEditedInfo2.end = this.videoCutEnd;
            videoEditedInfo2.rotationValue = this.rotationValue;
            videoEditedInfo2.originalWidth = this.originalWidth;
            videoEditedInfo2.originalHeight = this.originalHeight;
            videoEditedInfo2.bitrate = this.bitrate;
            videoEditedInfo2.originalPath = this.currentPathObject;
            long j2 = this.estimatedSize;
            if (j2 == 0) {
                j2 = 1;
            }
            videoEditedInfo2.estimatedSize = j2;
            videoEditedInfo2.estimatedDuration = this.estimatedDuration;
            videoEditedInfo2.framerate = this.videoFramerate;
            videoEditedInfo2.originalDuration = (long) (this.videoDuration * 1000.0f);
            EditState editState3 = this.editState;
            videoEditedInfo2.filterState = editState3.savedFilterState;
            String str3 = editState3.croppedPaintPath;
            if (str3 != null) {
                videoEditedInfo2.paintPath = str3;
                ArrayList<VideoEditedInfo.MediaEntity> arrayList3 = editState3.croppedMediaEntities;
                if (arrayList3 != null && !arrayList3.isEmpty()) {
                    arrayList = this.editState.croppedMediaEntities;
                }
                videoEditedInfo2.mediaEntities = arrayList;
            } else {
                videoEditedInfo2.paintPath = editState3.paintPath;
                ArrayList<VideoEditedInfo.MediaEntity> arrayList4 = editState3.mediaEntities;
                if (arrayList4 != null && !arrayList4.isEmpty()) {
                    arrayList = this.editState.mediaEntities;
                }
                videoEditedInfo2.mediaEntities = arrayList;
            }
            if (this.sendPhotoType == 1 || this.muteVideo || !(this.compressItem.getTag() == null || (videoEditedInfo2.resultWidth == this.originalWidth && videoEditedInfo2.resultHeight == this.originalHeight))) {
                if (this.muteVideo || this.sendPhotoType == 1) {
                    this.selectedCompression = 1;
                    updateWidthHeightBitrateForCompression();
                }
                videoEditedInfo2.resultWidth = this.resultWidth;
                videoEditedInfo2.resultHeight = this.resultHeight;
                if (!this.muteVideo && this.sendPhotoType != 1) {
                    i2 = this.bitrate;
                }
                videoEditedInfo2.bitrate = i2;
            } else {
                videoEditedInfo2.resultWidth = this.originalWidth;
                videoEditedInfo2.resultHeight = this.originalHeight;
                if (!this.muteVideo) {
                    i2 = this.originalBitrate;
                }
                videoEditedInfo2.bitrate = i2;
            }
            MediaController.CropState cropState2 = this.editState.cropState;
            videoEditedInfo2.cropState = cropState2;
            if (cropState2 != null) {
                videoEditedInfo2.rotationValue += cropState2.transformRotation;
                while (true) {
                    i = videoEditedInfo2.rotationValue;
                    if (i < 360) {
                        break;
                    }
                    videoEditedInfo2.rotationValue = i - 360;
                }
                if (i == 90 || i == 270) {
                    MediaController.CropState cropState3 = videoEditedInfo2.cropState;
                    cropState3.transformWidth = (int) (((float) videoEditedInfo2.resultWidth) * cropState3.cropPh);
                    cropState3.transformHeight = (int) (((float) videoEditedInfo2.resultHeight) * cropState3.cropPw);
                } else {
                    MediaController.CropState cropState4 = videoEditedInfo2.cropState;
                    cropState4.transformWidth = (int) (((float) videoEditedInfo2.resultWidth) * cropState4.cropPw);
                    cropState4.transformHeight = (int) (((float) videoEditedInfo2.resultHeight) * cropState4.cropPh);
                }
                if (this.sendPhotoType == 1) {
                    MediaController.CropState cropState5 = videoEditedInfo2.cropState;
                    if (cropState5.transformWidth > 800) {
                        cropState5.transformWidth = 800;
                    }
                    if (cropState5.transformHeight > 800) {
                        cropState5.transformHeight = 800;
                    }
                    int min = Math.min(cropState5.transformWidth, cropState5.transformHeight);
                    cropState5.transformHeight = min;
                    cropState5.transformWidth = min;
                }
                if (BuildVars.LOGS_ENABLED) {
                    FileLog.d("original transformed w = " + videoEditedInfo2.cropState.transformWidth + " h = " + videoEditedInfo2.cropState.transformHeight + " r = " + videoEditedInfo2.rotationValue);
                }
                MediaController.CropState cropState6 = videoEditedInfo2.cropState;
                int[] fixVideoWidthHeight = fixVideoWidthHeight(cropState6.transformWidth, cropState6.transformHeight);
                MediaController.CropState cropState7 = videoEditedInfo2.cropState;
                cropState7.transformWidth = fixVideoWidthHeight[0];
                cropState7.transformHeight = fixVideoWidthHeight[1];
                if (BuildVars.LOGS_ENABLED) {
                    FileLog.d("fixed transformed w = " + videoEditedInfo2.cropState.transformWidth + " h = " + videoEditedInfo2.cropState.transformHeight);
                }
            }
            int i7 = this.sendPhotoType;
            if (i7 == 1) {
                videoEditedInfo2.avatarStartTime = this.avatarStartTime;
                videoEditedInfo2.originalBitrate = this.originalBitrate;
            }
            if (this.muteVideo || i7 == 1) {
                z = true;
            }
            videoEditedInfo2.muted = z;
            return videoEditedInfo2;
        }
    }

    /* JADX WARNING: Code restructure failed: missing block: B:2:0x0004, code lost:
        r0 = r0.currentEncryptedChat;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private boolean supportsSendingNewEntities() {
        /*
            r2 = this;
            org.telegram.ui.ChatActivity r0 = r2.parentChatActivity
            if (r0 == 0) goto L_0x0014
            org.telegram.tgnet.TLRPC$EncryptedChat r0 = r0.currentEncryptedChat
            if (r0 == 0) goto L_0x0012
            int r0 = r0.layer
            int r0 = org.telegram.messenger.AndroidUtilities.getPeerLayerVersion(r0)
            r1 = 101(0x65, float:1.42E-43)
            if (r0 < r1) goto L_0x0014
        L_0x0012:
            r0 = 1
            goto L_0x0015
        L_0x0014:
            r0 = 0
        L_0x0015:
            return r0
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.supportsSendingNewEntities():boolean");
    }

    /* access modifiers changed from: private */
    public void closeCaptionEnter(boolean z) {
        int i = this.currentIndex;
        if (i >= 0 && i < this.imagesArrLocals.size() && this.captionEditText.getTag() != null) {
            Object obj = this.imagesArrLocals.get(this.currentIndex);
            if (z) {
                CharSequence fieldCharSequence = this.captionEditText.getFieldCharSequence();
                CharSequence[] charSequenceArr = {fieldCharSequence};
                if (this.hasCaptionForAllMedia && !TextUtils.equals(this.captionForAllMedia, fieldCharSequence) && this.placeProvider.getPhotoIndex(this.currentIndex) != 0 && this.placeProvider.getSelectedCount() > 0) {
                    this.hasCaptionForAllMedia = false;
                }
                ArrayList<TLRPC$MessageEntity> entities = MediaDataController.getInstance(this.currentAccount).getEntities(charSequenceArr, supportsSendingNewEntities());
                this.captionForAllMedia = fieldCharSequence;
                if (obj instanceof MediaController.PhotoEntry) {
                    MediaController.PhotoEntry photoEntry = (MediaController.PhotoEntry) obj;
                    photoEntry.caption = charSequenceArr[0];
                    photoEntry.entities = entities;
                } else if (obj instanceof MediaController.SearchImage) {
                    MediaController.SearchImage searchImage = (MediaController.SearchImage) obj;
                    searchImage.caption = charSequenceArr[0];
                    searchImage.entities = entities;
                }
                if (this.captionEditText.getFieldCharSequence().length() != 0 && !this.placeProvider.isPhotoChecked(this.currentIndex)) {
                    setPhotoChecked();
                }
                PhotoViewerProvider photoViewerProvider = this.placeProvider;
                if (photoViewerProvider != null) {
                    photoViewerProvider.onApplyCaption(fieldCharSequence);
                }
                setCurrentCaption((MessageObject) null, charSequenceArr[0], false);
            }
            this.captionEditText.setTag((Object) null);
            if (this.isCurrentVideo) {
                this.actionBar.setTitleAnimated(this.lastTitle, false, 220);
                this.actionBar.setSubtitle(this.muteVideo ? LocaleController.getString("SoundMuted", R.string.SoundMuted) : this.currentSubtitle);
            }
            updateCaptionTextForCurrentPhoto(obj);
            if (this.captionEditText.isPopupShowing()) {
                this.captionEditText.hidePopup();
            }
            this.captionEditText.closeKeyboard();
            if (Build.VERSION.SDK_INT >= 19) {
                this.captionEditText.setImportantForAccessibility(4);
            }
        }
    }

    /* access modifiers changed from: private */
    public void updateVideoPlayerTime() {
        String str;
        String str2;
        Arrays.fill(this.videoPlayerCurrentTime, 0);
        Arrays.fill(this.videoPlayerTotalTime, 0);
        VideoPlayer videoPlayer2 = this.videoPlayer;
        long j = 0;
        if (videoPlayer2 != null) {
            long max = Math.max(0, videoPlayer2.getCurrentPosition());
            if (this.shownControlsByEnd && !this.actionBarWasShownBeforeByEnd) {
                max = 0;
            }
            long max2 = Math.max(0, this.videoPlayer.getDuration());
            if (!this.inPreview && this.videoTimelineView.getVisibility() == 0) {
                max2 = (long) (((float) max2) * (this.videoTimelineView.getRightProgress() - this.videoTimelineView.getLeftProgress()));
                max = (long) (((float) max) - (this.videoTimelineView.getLeftProgress() * ((float) max2)));
                if (max > max2) {
                    max = max2;
                }
            }
            long j2 = max / 1000;
            long j3 = max2 / 1000;
            int[] iArr = this.videoPlayerCurrentTime;
            iArr[0] = (int) (j2 / 60);
            iArr[1] = (int) (j2 % 60);
            int[] iArr2 = this.videoPlayerTotalTime;
            iArr2[0] = (int) (j3 / 60);
            iArr2[1] = (int) (j3 % 60);
        } else {
            PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
            if (photoViewerWebView2 != null && photoViewerWebView2.isControllable()) {
                long max3 = (long) Math.max(0, this.photoViewerWebView.getCurrentPosition());
                if (!this.shownControlsByEnd || this.actionBarWasShownBeforeByEnd) {
                    j = max3;
                }
                long max4 = (long) Math.max(0, this.photoViewerWebView.getVideoDuration());
                if (!this.inPreview && this.videoTimelineView.getVisibility() == 0) {
                    max4 = (long) (((float) max4) * (this.videoTimelineView.getRightProgress() - this.videoTimelineView.getLeftProgress()));
                    j = (long) (((float) j) - (this.videoTimelineView.getLeftProgress() * ((float) max4)));
                    if (j > max4) {
                        j = max4;
                    }
                }
                long j4 = j / 1000;
                long j5 = max4 / 1000;
                int[] iArr3 = this.videoPlayerCurrentTime;
                iArr3[0] = (int) (j4 / 60);
                iArr3[1] = (int) (j4 % 60);
                int[] iArr4 = this.videoPlayerTotalTime;
                iArr4[0] = (int) (j5 / 60);
                iArr4[1] = (int) (j5 % 60);
            }
        }
        int[] iArr5 = this.videoPlayerCurrentTime;
        if (iArr5[0] > 60) {
            str = String.format(Locale.ROOT, "%02d:%02d:%02d", new Object[]{Integer.valueOf(iArr5[0] / 60), Integer.valueOf(this.videoPlayerCurrentTime[0] % 60), Integer.valueOf(this.videoPlayerCurrentTime[1])});
        } else {
            str = String.format(Locale.ROOT, "%02d:%02d", new Object[]{Integer.valueOf(iArr5[0]), Integer.valueOf(this.videoPlayerCurrentTime[1])});
        }
        int[] iArr6 = this.videoPlayerTotalTime;
        if (iArr6[0] > 60) {
            str2 = String.format(Locale.ROOT, "%02d:%02d:%02d", new Object[]{Integer.valueOf(iArr6[0] / 60), Integer.valueOf(this.videoPlayerTotalTime[0] % 60), Integer.valueOf(this.videoPlayerTotalTime[1])});
        } else {
            str2 = String.format(Locale.ROOT, "%02d:%02d", new Object[]{Integer.valueOf(iArr6[0]), Integer.valueOf(this.videoPlayerTotalTime[1])});
        }
        this.videoPlayerTime.setText(String.format(Locale.ROOT, "%s / %s", new Object[]{str, str2}));
        if (!ObjectsCompat$$ExternalSyntheticBackport0.m(this.lastControlFrameDuration, str2)) {
            this.lastControlFrameDuration = str2;
            this.videoPlayerControlFrameLayout.requestLayout();
        }
    }

    private void checkBufferedProgress(float f) {
        MessageObject messageObject;
        TLRPC$Document document;
        if (this.isStreaming && this.parentActivity != null && !this.streamingAlertShown && this.videoPlayer != null && (messageObject = this.currentMessageObject) != null && (document = messageObject.getDocument()) != null && this.currentMessageObject.getDuration() >= 20) {
            boolean z = false;
            boolean z2 = document.size >= 2147483648L;
            if ((DownloadController.getInstance(this.currentAccount).getAutodownloadMask() & 4) != 0) {
                z = true;
            }
            if (z && f < 0.9f) {
                long j = document.size;
                if (((float) j) * f >= 5242880.0f || (f >= 0.5f && j >= 2097152)) {
                    if (Math.abs(SystemClock.elapsedRealtime() - this.startedPlayTime) >= ((long) (z2 ? 10000 : 3000))) {
                        if (this.videoPlayer.getDuration() == -9223372036854775807L) {
                            Toast.makeText(this.parentActivity, LocaleController.getString("VideoDoesNotSupportStreaming", R.string.VideoDoesNotSupportStreaming), 1).show();
                        }
                        this.streamingAlertShown = true;
                    }
                }
            }
        }
    }

    public void updateColors() {
        String str;
        int themedColor = getThemedColor("dialogFloatingButton");
        ImageView imageView = this.pickerViewSendButton;
        if (imageView != null) {
            Drawable background = imageView.getBackground();
            Theme.setSelectorDrawableColor(background, themedColor, false);
            if (Build.VERSION.SDK_INT >= 21) {
                str = "dialogFloatingButtonPressed";
            } else {
                str = "dialogFloatingButton";
            }
            Theme.setSelectorDrawableColor(background, getThemedColor(str), true);
            this.pickerViewSendButton.setColorFilter(new PorterDuffColorFilter(getThemedColor("dialogFloatingIcon"), PorterDuff.Mode.MULTIPLY));
        }
        CheckBox checkBox = this.checkImageView;
        if (checkBox != null) {
            checkBox.setColor(getThemedColor("dialogFloatingButton"), -1);
        }
        PorterDuffColorFilter porterDuffColorFilter = new PorterDuffColorFilter(themedColor, PorterDuff.Mode.MULTIPLY);
        ImageView imageView2 = this.timeItem;
        if (!(imageView2 == null || imageView2.getColorFilter() == null)) {
            this.timeItem.setColorFilter(porterDuffColorFilter);
        }
        ImageView imageView3 = this.paintItem;
        if (!(imageView3 == null || imageView3.getColorFilter() == null)) {
            this.paintItem.setColorFilter(porterDuffColorFilter);
        }
        ImageView imageView4 = this.cropItem;
        if (!(imageView4 == null || imageView4.getColorFilter() == null)) {
            this.cropItem.setColorFilter(porterDuffColorFilter);
        }
        ImageView imageView5 = this.tuneItem;
        if (!(imageView5 == null || imageView5.getColorFilter() == null)) {
            this.tuneItem.setColorFilter(porterDuffColorFilter);
        }
        ImageView imageView6 = this.rotateItem;
        if (!(imageView6 == null || imageView6.getColorFilter() == null)) {
            this.rotateItem.setColorFilter(porterDuffColorFilter);
        }
        ImageView imageView7 = this.mirrorItem;
        if (!(imageView7 == null || imageView7.getColorFilter() == null)) {
            this.mirrorItem.setColorFilter(porterDuffColorFilter);
        }
        PickerBottomLayoutViewer pickerBottomLayoutViewer = this.editorDoneLayout;
        if (pickerBottomLayoutViewer != null) {
            pickerBottomLayoutViewer.doneButton.setTextColor(themedColor);
        }
        PickerBottomLayoutViewer pickerBottomLayoutViewer2 = this.qualityPicker;
        if (pickerBottomLayoutViewer2 != null) {
            pickerBottomLayoutViewer2.doneButton.setTextColor(themedColor);
        }
        PhotoPaintView photoPaintView2 = this.photoPaintView;
        if (photoPaintView2 != null) {
            photoPaintView2.updateColors();
        }
        PhotoFilterView photoFilterView2 = this.photoFilterView;
        if (photoFilterView2 != null) {
            photoFilterView2.updateColors();
        }
        PhotoViewerCaptionEnterView photoViewerCaptionEnterView = this.captionEditText;
        if (photoViewerCaptionEnterView != null) {
            photoViewerCaptionEnterView.updateColors();
        }
        VideoTimelinePlayView videoTimelinePlayView = this.videoTimelineView;
        if (videoTimelinePlayView != null) {
            videoTimelinePlayView.invalidate();
        }
        SelectedPhotosListView selectedPhotosListView2 = this.selectedPhotosListView;
        if (selectedPhotosListView2 != null) {
            int childCount = selectedPhotosListView2.getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = this.selectedPhotosListView.getChildAt(i);
                if (childAt instanceof PhotoPickerPhotoCell) {
                    ((PhotoPickerPhotoCell) childAt).updateColors();
                }
            }
        }
        StickersAlert stickersAlert = this.masksAlert;
        if (stickersAlert != null) {
            stickersAlert.updateColors(true);
        }
    }

    public void injectVideoPlayer(VideoPlayer videoPlayer2) {
        this.injectingVideoPlayer = videoPlayer2;
    }

    public void injectVideoPlayerSurface(SurfaceTexture surfaceTexture) {
        this.injectingVideoPlayerSurface = surfaceTexture;
    }

    public boolean isInjectingVideoPlayer() {
        return this.injectingVideoPlayer != null;
    }

    /* access modifiers changed from: private */
    public void scheduleActionBarHide() {
        scheduleActionBarHide(3000);
    }

    private void scheduleActionBarHide(int i) {
        if (!isAccessibilityEnabled()) {
            AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
            AndroidUtilities.runOnUIThread(this.hideActionBarRunnable, (long) i);
        }
    }

    private boolean isAccessibilityEnabled() {
        try {
            AccessibilityManager accessibilityManager = (AccessibilityManager) this.activityContext.getSystemService("accessibility");
            if (!accessibilityManager.isEnabled() || !accessibilityManager.isTouchExplorationEnabled()) {
                return false;
            }
            return true;
        } catch (Exception e) {
            FileLog.e((Throwable) e);
            return false;
        }
    }

    public void updateWebPlayerState(boolean z, int i) {
        updatePlayerState(z, i);
    }

    /* access modifiers changed from: private */
    public void updatePlayerState(boolean z, int i) {
        MessageObject messageObject;
        VideoPlayer videoPlayer2;
        PhotoViewerWebView photoViewerWebView2;
        if (this.videoPlayer != null || ((photoViewerWebView2 = this.photoViewerWebView) != null && photoViewerWebView2.isControllable())) {
            PhotoViewerWebView photoViewerWebView3 = this.photoViewerWebView;
            if (photoViewerWebView3 != null && photoViewerWebView3.isControllable() && !z) {
                toggleActionBar(true, true);
            }
            float f = 0.0f;
            if (this.isStreaming) {
                if (i != 2 || !this.skipFirstBufferingProgress) {
                    boolean z2 = this.seekToProgressPending != 0.0f || i == 2;
                    if (z2) {
                        AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
                    } else {
                        scheduleActionBarHide();
                    }
                    toggleMiniProgress(z2, true);
                } else if (z) {
                    this.skipFirstBufferingProgress = false;
                }
            }
            AspectRatioFrameLayout aspectRatioFrameLayout2 = this.aspectRatioFrameLayout;
            int i2 = 4;
            if (aspectRatioFrameLayout2 != null) {
                aspectRatioFrameLayout2.setKeepScreenOn((!z || i == 4 || i == 1) ? false : true);
            }
            if (!z || i == 4 || i == 1) {
                try {
                    this.parentActivity.getWindow().clearFlags(128);
                    this.keepScreenOnFlagSet = false;
                } catch (Exception e) {
                    FileLog.e((Throwable) e);
                }
            } else {
                try {
                    this.parentActivity.getWindow().addFlags(128);
                    this.keepScreenOnFlagSet = true;
                } catch (Exception e2) {
                    FileLog.e((Throwable) e2);
                }
            }
            if (i == 3 || i == 1) {
                if (!(this.currentMessageObject == null || (videoPlayer2 = this.videoPlayer) == null)) {
                    this.videoPreviewFrame.open(videoPlayer2.getCurrentUri());
                }
                float f2 = this.seekToProgressPending;
                if (f2 != 0.0f) {
                    seekVideoOrWebToProgress(f2);
                    this.seekToProgressPending = 0.0f;
                    MessageObject messageObject2 = this.currentMessageObject;
                    if (messageObject2 != null && !FileLoader.getInstance(messageObject2.currentAccount).isLoadingVideoAny(this.currentMessageObject.getDocument())) {
                        this.skipFirstBufferingProgress = true;
                    }
                }
            }
            if (i == 3) {
                AspectRatioFrameLayout aspectRatioFrameLayout3 = this.aspectRatioFrameLayout;
                if (!(aspectRatioFrameLayout3 == null || aspectRatioFrameLayout3.getVisibility() == 0)) {
                    this.aspectRatioFrameLayout.setVisibility(0);
                }
                if (!this.pipItem.isEnabled() && this.pipItem.getVisibility() == 0) {
                    this.pipAvailable = true;
                    this.pipItem.setEnabled(true);
                    this.pipItem.animate().alpha(1.0f).setDuration(175).withEndAction((Runnable) null).start();
                }
                this.playerWasReady = true;
                MessageObject messageObject3 = this.currentMessageObject;
                if (messageObject3 != null && messageObject3.isVideo()) {
                    AndroidUtilities.cancelRunOnUIThread(this.setLoadingRunnable);
                    FileLoader.getInstance(this.currentMessageObject.currentAccount).removeLoadingVideo(this.currentMessageObject.getDocument(), true, false);
                }
            } else if (i == 2 && z && (messageObject = this.currentMessageObject) != null && messageObject.isVideo()) {
                if (this.playerWasReady) {
                    this.setLoadingRunnable.run();
                } else {
                    AndroidUtilities.runOnUIThread(this.setLoadingRunnable, 1000);
                }
            }
            VideoPlayer videoPlayer3 = this.videoPlayer;
            if (videoPlayer3 == null ? this.photoViewerWebView.isPlaying() : videoPlayer3.isPlaying()) {
                if (i != 4) {
                    if (!this.isPlaying) {
                        this.isPlaying = true;
                        PhotoProgressView photoProgressView = this.photoProgressViews[0];
                        if (this.isCurrentVideo) {
                            i2 = -1;
                        }
                        photoProgressView.setBackgroundState(i2, false, true);
                        PhotoProgressView photoProgressView2 = this.photoProgressViews[0];
                        if (this.isCurrentVideo || ((isAccessibilityEnabled() && !this.playerWasPlaying) || ((!this.playerAutoStarted || this.playerWasPlaying) && this.isActionBarVisible))) {
                            f = 1.0f;
                        }
                        photoProgressView2.setIndexedAlpha(1, f, false);
                        this.playerWasPlaying = true;
                        AndroidUtilities.runOnUIThread(this.updateProgressRunnable);
                    }
                    PipVideoOverlay.updatePlayButton();
                    this.videoPlayerSeekbar.updateTimestamps(this.currentMessageObject, getVideoDuration());
                    updateVideoPlayerTime();
                }
            }
            if (this.isPlaying || i == 4) {
                if (this.currentEditMode != 3) {
                    this.photoProgressViews[0].setIndexedAlpha(1, 1.0f, i == 4);
                    PhotoProgressView[] photoProgressViewArr = this.photoProgressViews;
                    photoProgressViewArr[0].setBackgroundState(3, false, photoProgressViewArr[0].animAlphas[1] > 0.0f);
                }
                this.isPlaying = false;
                AndroidUtilities.cancelRunOnUIThread(this.updateProgressRunnable);
                if (i == 4) {
                    if (!this.isCurrentVideo) {
                        this.videoPlayerSeekbar.setProgress(0.0f);
                        this.videoPlayerSeekbarView.invalidate();
                        if (this.inPreview || this.videoTimelineView.getVisibility() != 0) {
                            seekVideoOrWebToProgress(0.0f);
                        } else {
                            seekVideoOrWebToProgress(this.videoTimelineView.getLeftProgress());
                        }
                        this.manuallyPaused = false;
                        pauseVideoOrWeb();
                        if (!this.isActionBarVisible) {
                            toggleActionBar(true, true);
                        }
                    } else if (!this.videoTimelineView.isDragging()) {
                        VideoTimelinePlayView videoTimelinePlayView = this.videoTimelineView;
                        videoTimelinePlayView.setProgress(videoTimelinePlayView.getLeftProgress());
                        if (this.inPreview || (this.currentEditMode == 0 && this.videoTimelineView.getVisibility() != 0)) {
                            seekVideoOrWebToProgress(0.0f);
                        } else {
                            seekVideoOrWebToProgress(this.videoTimelineView.getLeftProgress());
                        }
                        this.manuallyPaused = false;
                        cancelVideoPlayRunnable();
                        if (this.sendPhotoType == 1 || this.currentEditMode != 0 || this.switchingToMode > 0) {
                            playVideoOrWeb();
                        } else {
                            pauseVideoOrWeb();
                        }
                        this.containerView.invalidate();
                    }
                    PipVideoOverlay.onVideoCompleted();
                }
            }
            PipVideoOverlay.updatePlayButton();
            this.videoPlayerSeekbar.updateTimestamps(this.currentMessageObject, getVideoDuration());
            updateVideoPlayerTime();
        }
    }

    /* access modifiers changed from: private */
    public void playVideoOrWeb() {
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null) {
            videoPlayer2.play();
        } else {
            this.photoViewerWebView.playVideo();
        }
    }

    /* access modifiers changed from: private */
    public void pauseVideoOrWeb() {
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null) {
            videoPlayer2.pause();
        } else {
            this.photoViewerWebView.pauseVideo();
        }
    }

    private void seekVideoOrWebToProgress(float f) {
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null) {
            videoPlayer2.seekTo((long) (f * ((float) videoPlayer2.getDuration())));
            return;
        }
        PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
        photoViewerWebView2.seekTo((long) (f * ((float) photoViewerWebView2.getVideoDuration())));
    }

    private void preparePlayer(Uri uri, boolean z, boolean z2) {
        preparePlayer(uri, z, z2, (MediaController.SavedFilterState) null);
    }

    private void preparePlayer(Uri uri, boolean z, boolean z2, MediaController.SavedFilterState savedFilterState) {
        boolean z3;
        Uri uri2 = uri;
        boolean z4 = z2;
        if (!z4) {
            this.currentPlayingVideoFile = uri2;
        }
        if (this.parentActivity != null) {
            this.streamingAlertShown = false;
            this.startedPlayTime = SystemClock.elapsedRealtime();
            this.currentVideoFinishedLoading = false;
            this.lastBufferedPositionCheck = 0;
            this.firstAnimationDelay = true;
            this.inPreview = z4;
            releasePlayer(false);
            SavedVideoPosition savedVideoPosition = null;
            if (this.imagesArrLocals.isEmpty()) {
                createVideoTextureView((MediaController.SavedFilterState) null);
            }
            if (Build.VERSION.SDK_INT >= 21 && this.textureImageView == null) {
                ImageView imageView = new ImageView(this.parentActivity);
                this.textureImageView = imageView;
                imageView.setBackgroundColor(-65536);
                this.textureImageView.setPivotX(0.0f);
                this.textureImageView.setPivotY(0.0f);
                this.textureImageView.setVisibility(4);
                this.containerView.addView(this.textureImageView);
            }
            checkFullscreenButton();
            if (this.orientationEventListener == null) {
                AnonymousClass50 r7 = new OrientationEventListener(ApplicationLoader.applicationContext) {
                    public void onOrientationChanged(int i) {
                        if (PhotoViewer.this.orientationEventListener != null && PhotoViewer.this.aspectRatioFrameLayout != null && PhotoViewer.this.aspectRatioFrameLayout.getVisibility() == 0 && PhotoViewer.this.parentActivity != null && PhotoViewer.this.fullscreenedByButton != 0) {
                            if (PhotoViewer.this.fullscreenedByButton == 1) {
                                if (i >= 240 && i <= 300) {
                                    boolean unused = PhotoViewer.this.wasRotated = true;
                                } else if (PhotoViewer.this.wasRotated && i > 0) {
                                    if (i >= 330 || i <= 30) {
                                        PhotoViewer.this.parentActivity.setRequestedOrientation(PhotoViewer.this.prevOrientation);
                                        int unused2 = PhotoViewer.this.fullscreenedByButton = 0;
                                        boolean unused3 = PhotoViewer.this.wasRotated = false;
                                    }
                                }
                            } else if (i > 0 && (i >= 330 || i <= 30)) {
                                boolean unused4 = PhotoViewer.this.wasRotated = true;
                            } else if (PhotoViewer.this.wasRotated && i >= 240 && i <= 300) {
                                PhotoViewer.this.parentActivity.setRequestedOrientation(PhotoViewer.this.prevOrientation);
                                int unused5 = PhotoViewer.this.fullscreenedByButton = 0;
                                boolean unused6 = PhotoViewer.this.wasRotated = false;
                            }
                        }
                    }
                };
                this.orientationEventListener = r7;
                if (r7.canDetectOrientation()) {
                    this.orientationEventListener.enable();
                } else {
                    this.orientationEventListener.disable();
                    this.orientationEventListener = null;
                }
            }
            this.textureUploaded = false;
            this.videoSizeSet = false;
            this.videoCrossfadeStarted = false;
            this.playerWasReady = false;
            this.playerWasPlaying = false;
            this.captureFrameReadyAtTime = -1;
            this.captureFrameAtTime = -1;
            this.needCaptureFrameReadyAtTime = -1;
            if (this.videoPlayer == null) {
                VideoPlayer videoPlayer2 = this.injectingVideoPlayer;
                if (videoPlayer2 != null) {
                    this.videoPlayer = videoPlayer2;
                    this.injectingVideoPlayer = null;
                    this.playerInjected = true;
                    updatePlayerState(videoPlayer2.getPlayWhenReady(), this.videoPlayer.getPlaybackState());
                    z3 = false;
                } else {
                    this.videoPlayer = new VideoPlayer() {
                        public void play() {
                            super.play();
                            PhotoViewer.this.playOrStopAnimatedStickers(true);
                        }

                        public void pause() {
                            super.pause();
                            if (PhotoViewer.this.currentEditMode == 0) {
                                PhotoViewer.this.playOrStopAnimatedStickers(false);
                            }
                        }

                        public void seekTo(long j) {
                            super.seekTo(j);
                            if (PhotoViewer.this.isCurrentVideo) {
                                PhotoViewer.this.seekAnimatedStickersTo(j);
                            }
                        }
                    };
                    z3 = true;
                }
                TextureView textureView = this.videoTextureView;
                if (textureView != null) {
                    this.videoPlayer.setTextureView(textureView);
                }
                FirstFrameView firstFrameView2 = this.firstFrameView;
                if (firstFrameView2 != null) {
                    firstFrameView2.clear();
                }
                this.videoPlayer.setDelegate(new VideoPlayer.VideoPlayerDelegate() {
                    public /* synthetic */ void onSeekFinished(AnalyticsListener.EventTime eventTime) {
                        VideoPlayer.VideoPlayerDelegate.CC.$default$onSeekFinished(this, eventTime);
                    }

                    public /* synthetic */ void onSeekStarted(AnalyticsListener.EventTime eventTime) {
                        VideoPlayer.VideoPlayerDelegate.CC.$default$onSeekStarted(this, eventTime);
                    }

                    public void onStateChanged(boolean z, int i) {
                        PhotoViewer.this.updatePlayerState(z, i);
                    }

                    public void onError(VideoPlayer videoPlayer, Exception exc) {
                        if (PhotoViewer.this.videoPlayer == videoPlayer) {
                            FileLog.e((Throwable) exc);
                            if (PhotoViewer.this.menuItem.isSubItemVisible(11)) {
                                AlertDialog.Builder builder = new AlertDialog.Builder(PhotoViewer.this.parentActivity, PhotoViewer.this.resourcesProvider);
                                builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                                builder.setMessage(LocaleController.getString("CantPlayVideo", R.string.CantPlayVideo));
                                builder.setPositiveButton(LocaleController.getString("Open", R.string.Open), new PhotoViewer$52$$ExternalSyntheticLambda2(this));
                                builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), (DialogInterface.OnClickListener) null);
                                PhotoViewer.this.showAlertDialog(builder);
                            }
                        }
                    }

                    /* access modifiers changed from: private */
                    public /* synthetic */ void lambda$onError$0(DialogInterface dialogInterface, int i) {
                        try {
                            AndroidUtilities.openForView(PhotoViewer.this.currentMessageObject, PhotoViewer.this.parentActivity, PhotoViewer.this.resourcesProvider);
                            PhotoViewer.this.closePhoto(false, false);
                        } catch (Exception e) {
                            FileLog.e((Throwable) e);
                        }
                    }

                    public void onVideoSizeChanged(int i, int i2, int i3, float f) {
                        if (PhotoViewer.this.aspectRatioFrameLayout != null) {
                            if (i3 == 90 || i3 == 270) {
                                int i4 = i2;
                                i2 = i;
                                i = i4;
                            }
                            float f2 = ((float) i) * f;
                            int i5 = (int) f2;
                            int unused = PhotoViewer.this.videoWidth = i5;
                            float f3 = (float) i2;
                            int unused2 = PhotoViewer.this.videoHeight = (int) (f * f3);
                            PhotoViewer.this.aspectRatioFrameLayout.setAspectRatio(i2 == 0 ? 1.0f : f2 / f3, i3);
                            if (PhotoViewer.this.videoTextureView instanceof VideoEditTextureView) {
                                ((VideoEditTextureView) PhotoViewer.this.videoTextureView).setVideoSize(i5, i2);
                                if (PhotoViewer.this.sendPhotoType == 1) {
                                    PhotoViewer.this.setCropBitmap();
                                }
                            }
                            boolean unused3 = PhotoViewer.this.videoSizeSet = true;
                        }
                    }

                    public void onRenderedFirstFrame() {
                        if (!PhotoViewer.this.textureUploaded) {
                            boolean unused = PhotoViewer.this.textureUploaded = true;
                            PhotoViewer.this.containerView.invalidate();
                        }
                        if (PhotoViewer.this.firstFrameView == null) {
                            return;
                        }
                        if (PhotoViewer.this.videoPlayer == null || !PhotoViewer.this.videoPlayer.isLooping()) {
                            AndroidUtilities.runOnUIThread(new PhotoViewer$52$$ExternalSyntheticLambda4(this), 64);
                        }
                    }

                    /* access modifiers changed from: private */
                    public /* synthetic */ void lambda$onRenderedFirstFrame$1() {
                        PhotoViewer.this.firstFrameView.updateAlpha();
                    }

                    public void onRenderedFirstFrame(AnalyticsListener.EventTime eventTime) {
                        if (eventTime.eventPlaybackPositionMs == PhotoViewer.this.needCaptureFrameReadyAtTime) {
                            long unused = PhotoViewer.this.captureFrameReadyAtTime = eventTime.eventPlaybackPositionMs;
                            long unused2 = PhotoViewer.this.needCaptureFrameReadyAtTime = -1;
                            PhotoViewer.this.captureCurrentFrame();
                        }
                        if (PhotoViewer.this.firstFrameView == null) {
                            return;
                        }
                        if (PhotoViewer.this.videoPlayer == null || !PhotoViewer.this.videoPlayer.isLooping()) {
                            AndroidUtilities.runOnUIThread(new PhotoViewer$52$$ExternalSyntheticLambda3(this), 64);
                        }
                    }

                    /* access modifiers changed from: private */
                    public /* synthetic */ void lambda$onRenderedFirstFrame$2() {
                        PhotoViewer.this.firstFrameView.updateAlpha();
                    }

                    public boolean onSurfaceDestroyed(SurfaceTexture surfaceTexture) {
                        if (PhotoViewer.this.changingTextureView) {
                            boolean unused = PhotoViewer.this.changingTextureView = false;
                            if (PhotoViewer.this.isInline) {
                                int unused2 = PhotoViewer.this.waitingForFirstTextureUpload = 1;
                                PhotoViewer.this.changedTextureView.setSurfaceTexture(surfaceTexture);
                                PhotoViewer.this.changedTextureView.setSurfaceTextureListener(PhotoViewer.this.surfaceTextureListener);
                                PhotoViewer.this.changedTextureView.setVisibility(0);
                                return true;
                            }
                        }
                        return false;
                    }

                    public void onSurfaceTextureUpdated(SurfaceTexture surfaceTexture) {
                        if (PhotoViewer.this.waitingForFirstTextureUpload == 2) {
                            if (PhotoViewer.this.textureImageView != null) {
                                PhotoViewer.this.textureImageView.setVisibility(4);
                                PhotoViewer.this.textureImageView.setImageDrawable((Drawable) null);
                                if (PhotoViewer.this.currentBitmap != null) {
                                    PhotoViewer.this.currentBitmap.recycle();
                                    Bitmap unused = PhotoViewer.this.currentBitmap = null;
                                }
                            }
                            boolean unused2 = PhotoViewer.this.switchingInlineMode = false;
                            if (Build.VERSION.SDK_INT >= 21) {
                                PhotoViewer.this.aspectRatioFrameLayout.getLocationInWindow(PhotoViewer.this.pipPosition);
                                int[] access$23600 = PhotoViewer.this.pipPosition;
                                access$23600[1] = (int) (((float) access$23600[1]) - PhotoViewer.this.containerView.getTranslationY());
                                if (PhotoViewer.this.textureImageView != null) {
                                    PhotoViewer.this.textureImageView.setTranslationX(PhotoViewer.this.textureImageView.getTranslationX() + ((float) PhotoViewer.this.getLeftInset()));
                                }
                                if (PhotoViewer.this.videoTextureView != null) {
                                    PhotoViewer.this.videoTextureView.setTranslationX((PhotoViewer.this.videoTextureView.getTranslationX() + ((float) PhotoViewer.this.getLeftInset())) - PhotoViewer.this.aspectRatioFrameLayout.getX());
                                }
                                if (PhotoViewer.this.firstFrameView != null) {
                                    PhotoViewer.this.firstFrameView.setTranslationX(PhotoViewer.this.videoTextureView.getTranslationX());
                                }
                                ValueAnimator ofFloat = ValueAnimator.ofFloat(new float[]{0.0f, 1.0f});
                                ofFloat.addUpdateListener(new PhotoViewer$52$$ExternalSyntheticLambda1(this));
                                AnimatorSet animatorSet = new AnimatorSet();
                                ArrayList arrayList = new ArrayList();
                                arrayList.add(ofFloat);
                                arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.textureImageView, View.SCALE_X, new float[]{1.0f}));
                                arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.textureImageView, View.SCALE_Y, new float[]{1.0f}));
                                arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.textureImageView, View.TRANSLATION_X, new float[]{(float) PhotoViewer.this.pipPosition[0]}));
                                arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.textureImageView, View.TRANSLATION_Y, new float[]{(float) PhotoViewer.this.pipPosition[1]}));
                                arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.videoTextureView, View.SCALE_X, new float[]{1.0f}));
                                arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.videoTextureView, View.SCALE_Y, new float[]{1.0f}));
                                arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.videoTextureView, View.TRANSLATION_X, new float[]{((float) PhotoViewer.this.pipPosition[0]) - PhotoViewer.this.aspectRatioFrameLayout.getX()}));
                                arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.videoTextureView, View.TRANSLATION_Y, new float[]{((float) PhotoViewer.this.pipPosition[1]) - PhotoViewer.this.aspectRatioFrameLayout.getY()}));
                                arrayList.add(ObjectAnimator.ofInt(PhotoViewer.this.backgroundDrawable, AnimationProperties.COLOR_DRAWABLE_ALPHA, new int[]{255}));
                                if (PhotoViewer.this.firstFrameView != null) {
                                    arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.firstFrameView, View.SCALE_X, new float[]{1.0f}));
                                    arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.firstFrameView, View.SCALE_Y, new float[]{1.0f}));
                                    arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.firstFrameView, View.TRANSLATION_X, new float[]{((float) PhotoViewer.this.pipPosition[0]) - PhotoViewer.this.aspectRatioFrameLayout.getX()}));
                                    arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.firstFrameView, View.TRANSLATION_Y, new float[]{((float) PhotoViewer.this.pipPosition[1]) - PhotoViewer.this.aspectRatioFrameLayout.getY()}));
                                }
                                float f = PipVideoOverlay.getPipRect(false, PhotoViewer.this.aspectRatioFrameLayout.getAspectRatio()).width;
                                PhotoViewer.this.videoTextureView.getWidth();
                                ValueAnimator ofFloat2 = ValueAnimator.ofFloat(new float[]{0.0f, 1.0f});
                                ofFloat2.addUpdateListener(new PhotoViewer$52$$ExternalSyntheticLambda0(this));
                                arrayList.add(ofFloat2);
                                animatorSet.playTogether(arrayList);
                                DecelerateInterpolator decelerateInterpolator = new DecelerateInterpolator();
                                animatorSet.setInterpolator(decelerateInterpolator);
                                animatorSet.setDuration(250);
                                animatorSet.addListener(new AnimatorListenerAdapter() {
                                    public void onAnimationEnd(Animator animator) {
                                        boolean unused = PhotoViewer.this.pipAnimationInProgress = false;
                                        if (PhotoViewer.this.videoTextureView != null) {
                                            PhotoViewer.this.videoTextureView.setOutlineProvider((ViewOutlineProvider) null);
                                        }
                                        if (PhotoViewer.this.textureImageView != null) {
                                            PhotoViewer.this.textureImageView.setOutlineProvider((ViewOutlineProvider) null);
                                        }
                                        if (PhotoViewer.this.firstFrameView != null) {
                                            PhotoViewer.this.firstFrameView.setOutlineProvider((ViewOutlineProvider) null);
                                        }
                                    }
                                });
                                animatorSet.start();
                                PhotoViewer.this.toggleActionBar(true, true, new ActionBarToggleParams().enableStatusBarAnimation(false).enableTranslationAnimation(false).animationDuration(250).animationInterpolator(decelerateInterpolator));
                            } else {
                                PhotoViewer.this.toggleActionBar(true, false);
                            }
                            int unused3 = PhotoViewer.this.waitingForFirstTextureUpload = 0;
                        }
                        if (PhotoViewer.this.firstFrameView != null) {
                            PhotoViewer.this.firstFrameView.checkFromPlayer(PhotoViewer.this.videoPlayer);
                        }
                    }

                    /* access modifiers changed from: private */
                    public /* synthetic */ void lambda$onSurfaceTextureUpdated$3(ValueAnimator valueAnimator) {
                        float unused = PhotoViewer.this.clippingImageProgress = 1.0f - ((Float) valueAnimator.getAnimatedValue()).floatValue();
                    }

                    /* access modifiers changed from: private */
                    public /* synthetic */ void lambda$onSurfaceTextureUpdated$4(ValueAnimator valueAnimator) {
                        float unused = PhotoViewer.this.inlineOutAnimationProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
                        if (PhotoViewer.this.videoTextureView != null) {
                            PhotoViewer.this.videoTextureView.invalidateOutline();
                        }
                        if (PhotoViewer.this.textureImageView != null) {
                            PhotoViewer.this.textureImageView.invalidateOutline();
                        }
                        if (PhotoViewer.this.firstFrameView != null) {
                            PhotoViewer.this.firstFrameView.invalidateOutline();
                        }
                    }
                });
            } else {
                z3 = false;
            }
            if (!this.imagesArrLocals.isEmpty()) {
                createVideoTextureView(savedFilterState);
            }
            TextureView textureView2 = this.videoTextureView;
            this.videoCrossfadeAlpha = 0.0f;
            textureView2.setAlpha(0.0f);
            PaintingOverlay paintingOverlay2 = this.paintingOverlay;
            if (paintingOverlay2 != null) {
                paintingOverlay2.setAlpha(this.videoCrossfadeAlpha);
            }
            this.shouldSavePositionForCurrentVideo = null;
            this.shouldSavePositionForCurrentVideoShortTerm = null;
            this.lastSaveTime = 0;
            if (z3) {
                this.seekToProgressPending = this.seekToProgressPending2;
                this.videoPlayerSeekbar.setProgress(0.0f);
                this.videoTimelineView.setProgress(0.0f);
                this.videoPlayerSeekbar.setBufferedProgress(0.0f);
                MessageObject messageObject = this.currentMessageObject;
                if (messageObject != null) {
                    int duration = messageObject.getDuration();
                    String fileName = this.currentMessageObject.getFileName();
                    if (!TextUtils.isEmpty(fileName)) {
                        if (duration >= 600) {
                            if (this.currentMessageObject.forceSeekTo < 0.0f) {
                                float f = ApplicationLoader.applicationContext.getSharedPreferences("media_saved_pos", 0).getFloat(fileName, -1.0f);
                                if (f > 0.0f && f < 0.999f) {
                                    this.currentMessageObject.forceSeekTo = f;
                                    this.videoPlayerSeekbar.setProgress(f);
                                }
                            }
                            this.shouldSavePositionForCurrentVideo = fileName;
                        } else if (duration >= 10) {
                            for (int size = this.savedVideoPositions.size() - 1; size >= 0; size--) {
                                SavedVideoPosition valueAt = this.savedVideoPositions.valueAt(size);
                                if (valueAt.timestamp < SystemClock.elapsedRealtime() - 5000) {
                                    this.savedVideoPositions.removeAt(size);
                                } else if (savedVideoPosition == null && this.savedVideoPositions.keyAt(size).equals(fileName)) {
                                    savedVideoPosition = valueAt;
                                }
                            }
                            MessageObject messageObject2 = this.currentMessageObject;
                            if (messageObject2.forceSeekTo < 0.0f && savedVideoPosition != null) {
                                float f2 = savedVideoPosition.position;
                                if (f2 > 0.0f && f2 < 0.999f) {
                                    messageObject2.forceSeekTo = f2;
                                    this.videoPlayerSeekbar.setProgress(f2);
                                }
                            }
                            this.shouldSavePositionForCurrentVideoShortTerm = fileName;
                        }
                    }
                }
                this.videoPlayer.preparePlayer(uri2, "other");
                this.videoPlayer.setPlayWhenReady(z);
            }
            MessageObject messageObject3 = this.currentMessageObject;
            boolean z5 = messageObject3 != null && messageObject3.getDuration() <= 30;
            this.playerLooping = z5;
            this.videoPlayerControlFrameLayout.setSeekBarTransitionEnabled(z5);
            this.videoPlayer.setLooping(this.playerLooping);
            MessageObject messageObject4 = this.currentMessageObject;
            if (messageObject4 != null) {
                float f3 = messageObject4.forceSeekTo;
                if (f3 >= 0.0f) {
                    this.seekToProgressPending = f3;
                    messageObject4.forceSeekTo = -1.0f;
                }
            }
            TLRPC$BotInlineResult tLRPC$BotInlineResult = this.currentBotInlineResult;
            if (tLRPC$BotInlineResult == null || (!tLRPC$BotInlineResult.type.equals("video") && !MessageObject.isVideoDocument(this.currentBotInlineResult.document))) {
                this.bottomLayout.setPadding(0, 0, 0, 0);
            } else {
                this.bottomLayout.setVisibility(0);
                this.bottomLayout.setPadding(0, 0, AndroidUtilities.dp(84.0f), 0);
                this.pickerView.setVisibility(8);
            }
            if (this.pageBlocksAdapter != null) {
                this.bottomLayout.setVisibility(0);
            }
            setVideoPlayerControlVisible(!this.isCurrentVideo, true);
            if (!this.isCurrentVideo) {
                scheduleActionBarHide(this.playerAutoStarted ? 3000 : 1000);
            }
            if (this.currentMessageObject != null) {
                this.videoPlayer.setPlaybackSpeed(this.currentVideoSpeed);
            }
            this.inPreview = z4;
        }
    }

    /* JADX WARNING: Code restructure failed: missing block: B:22:0x0057, code lost:
        r7 = r13.currentMessageObject;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public void checkFullscreenButton() {
        /*
            r13 = this;
            java.util.ArrayList<org.telegram.messenger.MessageObject> r0 = r13.imagesArr
            boolean r0 = r0.isEmpty()
            r1 = 3
            r2 = 4
            r3 = 0
            if (r0 == 0) goto L_0x0018
        L_0x000b:
            if (r3 >= r1) goto L_0x0017
            android.widget.ImageView[] r0 = r13.fullscreenButton
            r0 = r0[r3]
            r0.setVisibility(r2)
            int r3 = r3 + 1
            goto L_0x000b
        L_0x0017:
            return
        L_0x0018:
            r0 = 0
        L_0x0019:
            if (r0 >= r1) goto L_0x0164
            int r4 = r13.currentIndex
            r5 = 2
            r6 = 1
            if (r0 != r6) goto L_0x0024
            int r4 = r4 + 1
            goto L_0x0028
        L_0x0024:
            if (r0 != r5) goto L_0x0028
            int r4 = r4 + -1
        L_0x0028:
            if (r4 < 0) goto L_0x0159
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r13.imagesArr
            int r7 = r7.size()
            if (r4 < r7) goto L_0x0034
            goto L_0x0159
        L_0x0034:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r13.imagesArr
            java.lang.Object r4 = r7.get(r4)
            org.telegram.messenger.MessageObject r4 = (org.telegram.messenger.MessageObject) r4
            boolean r7 = r4.isVideo()
            if (r7 != 0) goto L_0x0051
            boolean r7 = r4.isYouTubeVideo()
            if (r7 != 0) goto L_0x0051
            android.widget.ImageView[] r4 = r13.fullscreenButton
            r4 = r4[r0]
            r4.setVisibility(r2)
            goto L_0x0160
        L_0x0051:
            boolean r7 = r4.isYouTubeVideo()
            if (r7 == 0) goto L_0x0067
            org.telegram.messenger.MessageObject r7 = r13.currentMessageObject
            if (r7 == 0) goto L_0x0067
            int r7 = r7.getId()
            int r8 = r4.getId()
            if (r7 != r8) goto L_0x0067
            r7 = 1
            goto L_0x0068
        L_0x0067:
            r7 = 0
        L_0x0068:
            if (r7 == 0) goto L_0x0073
            org.telegram.tgnet.TLRPC$Message r8 = r4.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r8 = r8.media
            org.telegram.tgnet.TLRPC$WebPage r8 = r8.webpage
            int r8 = r8.embed_width
            goto L_0x007f
        L_0x0073:
            if (r0 != 0) goto L_0x007e
            android.view.TextureView r8 = r13.videoTextureView
            if (r8 == 0) goto L_0x007e
            int r8 = r8.getMeasuredWidth()
            goto L_0x007f
        L_0x007e:
            r8 = 0
        L_0x007f:
            if (r7 == 0) goto L_0x008a
            org.telegram.tgnet.TLRPC$Message r7 = r4.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r7 = r7.media
            org.telegram.tgnet.TLRPC$WebPage r7 = r7.webpage
            int r7 = r7.embed_height
            goto L_0x0096
        L_0x008a:
            if (r0 != 0) goto L_0x0095
            android.view.TextureView r7 = r13.videoTextureView
            if (r7 == 0) goto L_0x0095
            int r7 = r7.getMeasuredHeight()
            goto L_0x0096
        L_0x0095:
            r7 = 0
        L_0x0096:
            org.telegram.tgnet.TLRPC$Document r4 = r4.getDocument()
            if (r4 == 0) goto L_0x00b9
            java.util.ArrayList<org.telegram.tgnet.TLRPC$DocumentAttribute> r9 = r4.attributes
            int r9 = r9.size()
            r10 = 0
        L_0x00a3:
            if (r10 >= r9) goto L_0x00b9
            java.util.ArrayList<org.telegram.tgnet.TLRPC$DocumentAttribute> r11 = r4.attributes
            java.lang.Object r11 = r11.get(r10)
            org.telegram.tgnet.TLRPC$DocumentAttribute r11 = (org.telegram.tgnet.TLRPC$DocumentAttribute) r11
            boolean r12 = r11 instanceof org.telegram.tgnet.TLRPC$TL_documentAttributeVideo
            if (r12 == 0) goto L_0x00b6
            int r8 = r11.w
            int r7 = r11.h
            goto L_0x00b9
        L_0x00b6:
            int r10 = r10 + 1
            goto L_0x00a3
        L_0x00b9:
            android.graphics.Point r4 = org.telegram.messenger.AndroidUtilities.displaySize
            int r9 = r4.y
            int r4 = r4.x
            r10 = 1111490560(0x42400000, float:48.0)
            if (r9 <= r4) goto L_0x0102
            android.view.TextureView r4 = r13.videoTextureView
            boolean r4 = r4 instanceof org.telegram.ui.Components.VideoEditTextureView
            if (r4 != 0) goto L_0x0102
            if (r8 <= r7) goto L_0x0102
            android.widget.ImageView[] r4 = r13.fullscreenButton
            r4 = r4[r0]
            int r4 = r4.getVisibility()
            if (r4 == 0) goto L_0x00dc
            android.widget.ImageView[] r4 = r13.fullscreenButton
            r4 = r4[r0]
            r4.setVisibility(r3)
        L_0x00dc:
            float r4 = (float) r8
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r8 = r13.containerView
            int r8 = r8.getMeasuredWidth()
            float r8 = (float) r8
            float r4 = r4 / r8
            float r7 = (float) r7
            float r7 = r7 / r4
            int r4 = (int) r7
            android.widget.ImageView[] r7 = r13.fullscreenButton
            r7 = r7[r0]
            android.view.ViewGroup$LayoutParams r7 = r7.getLayoutParams()
            android.widget.FrameLayout$LayoutParams r7 = (android.widget.FrameLayout.LayoutParams) r7
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r8 = r13.containerView
            int r8 = r8.getMeasuredHeight()
            int r8 = r8 + r4
            int r8 = r8 / r5
            int r4 = org.telegram.messenger.AndroidUtilities.dp(r10)
            int r8 = r8 - r4
            r7.topMargin = r8
            goto L_0x0113
        L_0x0102:
            android.widget.ImageView[] r4 = r13.fullscreenButton
            r4 = r4[r0]
            int r4 = r4.getVisibility()
            if (r4 == r2) goto L_0x0113
            android.widget.ImageView[] r4 = r13.fullscreenButton
            r4 = r4[r0]
            r4.setVisibility(r2)
        L_0x0113:
            android.animation.AnimatorSet r4 = r13.imageMoveAnimation
            if (r4 == 0) goto L_0x0122
            float r4 = r13.translationX
            float r7 = r13.animateToX
            float r7 = r7 - r4
            float r8 = r13.animationValue
            float r7 = r7 * r8
            float r4 = r4 + r7
            goto L_0x0124
        L_0x0122:
            float r4 = r13.translationX
        L_0x0124:
            r7 = 0
            if (r0 != r6) goto L_0x0128
            goto L_0x0145
        L_0x0128:
            if (r0 != r5) goto L_0x013d
            android.graphics.Point r5 = org.telegram.messenger.AndroidUtilities.displaySize
            int r5 = r5.x
            int r5 = -r5
            r6 = 1097859072(0x41700000, float:15.0)
            int r6 = org.telegram.messenger.AndroidUtilities.dp(r6)
            int r5 = r5 - r6
            float r5 = (float) r5
            float r6 = r13.maxX
            float r4 = r4 - r6
            float r7 = r5 + r4
            goto L_0x0145
        L_0x013d:
            float r5 = r13.minX
            int r6 = (r4 > r5 ? 1 : (r4 == r5 ? 0 : -1))
            if (r6 >= 0) goto L_0x0145
            float r4 = r4 - r5
            r7 = r4
        L_0x0145:
            android.widget.ImageView[] r4 = r13.fullscreenButton
            r4 = r4[r0]
            android.graphics.Point r5 = org.telegram.messenger.AndroidUtilities.displaySize
            int r5 = r5.x
            float r5 = (float) r5
            float r7 = r7 + r5
            int r5 = org.telegram.messenger.AndroidUtilities.dp(r10)
            float r5 = (float) r5
            float r7 = r7 - r5
            r4.setTranslationX(r7)
            goto L_0x0160
        L_0x0159:
            android.widget.ImageView[] r4 = r13.fullscreenButton
            r4 = r4[r0]
            r4.setVisibility(r2)
        L_0x0160:
            int r0 = r0 + 1
            goto L_0x0019
        L_0x0164:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.checkFullscreenButton():void");
    }

    private void createVideoTextureView(MediaController.SavedFilterState savedFilterState) {
        if (this.videoTextureView == null) {
            AnonymousClass53 r0 = new AspectRatioFrameLayout(this.parentActivity) {
                /* access modifiers changed from: protected */
                public void onMeasure(int i, int i2) {
                    super.onMeasure(i, i2);
                    if (PhotoViewer.this.textureImageView != null) {
                        ViewGroup.LayoutParams layoutParams = PhotoViewer.this.textureImageView.getLayoutParams();
                        layoutParams.width = getMeasuredWidth();
                        layoutParams.height = getMeasuredHeight();
                    }
                    if (PhotoViewer.this.videoTextureView instanceof VideoEditTextureView) {
                        PhotoViewer.this.videoTextureView.setPivotX((float) (PhotoViewer.this.videoTextureView.getMeasuredWidth() / 2));
                        PhotoViewer.this.firstFrameView.setPivotX((float) (PhotoViewer.this.videoTextureView.getMeasuredWidth() / 2));
                    } else {
                        PhotoViewer.this.videoTextureView.setPivotX(0.0f);
                        PhotoViewer.this.firstFrameView.setPivotX(0.0f);
                    }
                    PhotoViewer.this.checkFullscreenButton();
                }
            };
            this.aspectRatioFrameLayout = r0;
            r0.setWillNotDraw(false);
            this.aspectRatioFrameLayout.setVisibility(4);
            this.containerView.addView(this.aspectRatioFrameLayout, 0, LayoutHelper.createFrame(-1, -1, 17));
            if (this.imagesArrLocals.isEmpty()) {
                this.videoTextureView = new TextureView(this.parentActivity);
            } else {
                VideoEditTextureView videoEditTextureView = new VideoEditTextureView(this.parentActivity, this.videoPlayer);
                if (savedFilterState != null) {
                    videoEditTextureView.setDelegate(new PhotoViewer$$ExternalSyntheticLambda83(savedFilterState));
                }
                this.videoTextureView = videoEditTextureView;
            }
            SurfaceTexture surfaceTexture = this.injectingVideoPlayerSurface;
            if (surfaceTexture != null) {
                this.videoTextureView.setSurfaceTexture(surfaceTexture);
                this.textureUploaded = true;
                this.videoSizeSet = true;
                this.injectingVideoPlayerSurface = null;
            }
            this.videoTextureView.setPivotX(0.0f);
            this.videoTextureView.setPivotY(0.0f);
            this.videoTextureView.setOpaque(false);
            this.aspectRatioFrameLayout.addView(this.videoTextureView, LayoutHelper.createFrame(-1, -1, 17));
            FirstFrameView firstFrameView2 = new FirstFrameView(this.parentActivity);
            this.firstFrameView = firstFrameView2;
            firstFrameView2.setPivotX(0.0f);
            this.firstFrameView.setPivotY(0.0f);
            this.firstFrameView.setScaleType(ImageView.ScaleType.FIT_XY);
            this.aspectRatioFrameLayout.addView(this.firstFrameView, LayoutHelper.createFrame(-1, -1, 17));
            if (this.sendPhotoType == 1) {
                View view = new View(this.parentActivity);
                this.flashView = view;
                view.setBackgroundColor(-1);
                this.flashView.setAlpha(0.0f);
                this.aspectRatioFrameLayout.addView(this.flashView, LayoutHelper.createFrame(-1, -1, 17));
            }
        }
    }

    /* access modifiers changed from: private */
    public void releasePlayer(boolean z) {
        if (this.videoPlayer != null) {
            cancelVideoPlayRunnable();
            AndroidUtilities.cancelRunOnUIThread(this.setLoadingRunnable);
            AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
            if (this.shouldSavePositionForCurrentVideoShortTerm != null) {
                this.savedVideoPositions.put(this.shouldSavePositionForCurrentVideoShortTerm, new SavedVideoPosition(((float) this.videoPlayer.getCurrentPosition()) / ((float) this.videoPlayer.getDuration()), SystemClock.elapsedRealtime()));
            }
            this.videoPlayer.releasePlayer(true);
            this.videoPlayer = null;
        } else {
            this.playerWasPlaying = false;
        }
        OrientationEventListener orientationEventListener2 = this.orientationEventListener;
        if (orientationEventListener2 != null) {
            orientationEventListener2.disable();
            this.orientationEventListener = null;
        }
        this.videoPreviewFrame.close();
        toggleMiniProgress(false, false);
        this.pipAvailable = false;
        this.playerInjected = false;
        if (this.pipItem.isEnabled()) {
            this.pipItem.setEnabled(false);
            this.pipItem.animate().alpha(0.5f).setDuration(175).withEndAction((Runnable) null).start();
        }
        if (this.keepScreenOnFlagSet) {
            try {
                this.parentActivity.getWindow().clearFlags(128);
                this.keepScreenOnFlagSet = false;
            } catch (Exception e) {
                FileLog.e((Throwable) e);
            }
        }
        AspectRatioFrameLayout aspectRatioFrameLayout2 = this.aspectRatioFrameLayout;
        if (aspectRatioFrameLayout2 != null) {
            try {
                this.containerView.removeView(aspectRatioFrameLayout2);
            } catch (Throwable unused) {
            }
            this.aspectRatioFrameLayout = null;
        }
        cancelFlashAnimations();
        this.flashView = null;
        TextureView textureView = this.videoTextureView;
        if (textureView != null) {
            if (textureView instanceof VideoEditTextureView) {
                ((VideoEditTextureView) textureView).release();
            }
            this.videoTextureView = null;
        }
        if (this.isPlaying) {
            this.isPlaying = false;
            AndroidUtilities.cancelRunOnUIThread(this.updateProgressRunnable);
        }
        if (!z && !this.inPreview && !this.requestingPreview) {
            setVideoPlayerControlVisible(false, true);
        }
        this.photoProgressViews[0].resetAlphas();
    }

    private void setVideoPlayerControlVisible(final boolean z, boolean z2) {
        if (this.videoPlayerControlVisible != z) {
            Animator animator = this.videoPlayerControlAnimator;
            if (animator != null) {
                animator.cancel();
            }
            this.videoPlayerControlVisible = z;
            float f = 1.0f;
            int i = 0;
            if (z2) {
                if (z) {
                    this.videoPlayerControlFrameLayout.setVisibility(0);
                } else {
                    this.dateTextView.setVisibility(0);
                    this.nameTextView.setVisibility(0);
                    if (this.allowShare) {
                        this.bottomButtonsLayout.setVisibility(0);
                    }
                }
                final boolean z3 = this.allowShare;
                float[] fArr = new float[2];
                fArr[0] = this.videoPlayerControlFrameLayout.getAlpha();
                if (!z) {
                    f = 0.0f;
                }
                fArr[1] = f;
                ValueAnimator ofFloat = ValueAnimator.ofFloat(fArr);
                ofFloat.setDuration(200);
                ofFloat.addUpdateListener(new PhotoViewer$$ExternalSyntheticLambda10(this, z3));
                ofFloat.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animator) {
                        if (!z) {
                            PhotoViewer.this.videoPlayerControlFrameLayout.setVisibility(8);
                            return;
                        }
                        PhotoViewer.this.dateTextView.setVisibility(8);
                        PhotoViewer.this.nameTextView.setVisibility(8);
                        if (z3) {
                            PhotoViewer.this.bottomButtonsLayout.setVisibility(8);
                        }
                    }
                });
                this.videoPlayerControlAnimator = ofFloat;
                ofFloat.start();
            } else {
                this.videoPlayerControlFrameLayout.setVisibility(z ? 0 : 8);
                this.videoPlayerControlFrameLayout.setAlpha(z ? 1.0f : 0.0f);
                this.dateTextView.setVisibility(z ? 8 : 0);
                this.dateTextView.setAlpha(z ? 0.0f : 1.0f);
                this.nameTextView.setVisibility(z ? 8 : 0);
                this.nameTextView.setAlpha(z ? 0.0f : 1.0f);
                if (this.allowShare) {
                    LinearLayout linearLayout = this.bottomButtonsLayout;
                    if (z) {
                        i = 8;
                    }
                    linearLayout.setVisibility(i);
                    LinearLayout linearLayout2 = this.bottomButtonsLayout;
                    if (z) {
                        f = 0.0f;
                    }
                    linearLayout2.setAlpha(f);
                }
            }
            if (this.allowShare && this.pageBlocksAdapter == null) {
                if (z) {
                    this.menuItem.showSubItem(10);
                } else {
                    this.menuItem.hideSubItem(10);
                }
            }
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$setVideoPlayerControlVisible$52(boolean z, ValueAnimator valueAnimator) {
        float floatValue = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        this.videoPlayerControlFrameLayout.setAlpha(floatValue);
        float f = 1.0f - floatValue;
        this.dateTextView.setAlpha(f);
        this.nameTextView.setAlpha(f);
        if (z) {
            this.bottomButtonsLayout.setAlpha(f);
        }
    }

    private void updateCaptionTextForCurrentPhoto(Object obj) {
        CharSequence charSequence;
        if (this.hasCaptionForAllMedia) {
            charSequence = this.captionForAllMedia;
        } else if (obj instanceof MediaController.PhotoEntry) {
            charSequence = ((MediaController.PhotoEntry) obj).caption;
        } else {
            charSequence = (!(obj instanceof TLRPC$BotInlineResult) && (obj instanceof MediaController.SearchImage)) ? ((MediaController.SearchImage) obj).caption : null;
        }
        if (TextUtils.isEmpty(charSequence)) {
            this.captionEditText.setFieldText("");
        } else {
            this.captionEditText.setFieldText(charSequence);
        }
        this.captionEditText.setAllowTextEntitiesIntersection(supportsSendingNewEntities());
    }

    public void showAlertDialog(AlertDialog.Builder builder) {
        if (this.parentActivity != null) {
            try {
                AlertDialog alertDialog = this.visibleDialog;
                if (alertDialog != null) {
                    alertDialog.dismiss();
                    this.visibleDialog = null;
                }
            } catch (Exception e) {
                FileLog.e((Throwable) e);
            }
            try {
                AlertDialog show = builder.show();
                this.visibleDialog = show;
                show.setCanceledOnTouchOutside(true);
                this.visibleDialog.setOnDismissListener(new PhotoViewer$$ExternalSyntheticLambda15(this));
            } catch (Exception e2) {
                FileLog.e((Throwable) e2);
            }
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$showAlertDialog$53(DialogInterface dialogInterface) {
        this.visibleDialog = null;
    }

    private void mergeImages(String str, String str2, Bitmap bitmap, Bitmap bitmap2, float f, boolean z) {
        boolean z2;
        if (bitmap == null) {
            try {
                bitmap = BitmapFactory.decodeFile(str2);
                z2 = true;
            } catch (Exception e) {
                FileLog.e((Throwable) e);
            } catch (Throwable th) {
                FileLog.e(th);
                return;
            }
        } else {
            z2 = false;
        }
        int width = bitmap.getWidth();
        int height = bitmap.getHeight();
        float f2 = (float) width;
        if (f2 > f || ((float) height) > f) {
            float max = ((float) Math.max(width, height)) / f;
            height = (int) (((float) height) / max);
            width = (int) (f2 / max);
        }
        Bitmap createBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(createBitmap);
        Rect rect = new Rect(0, 0, width, height);
        if (z) {
            canvas.drawBitmap(bitmap2, (Rect) null, rect, this.bitmapPaint);
            canvas.drawBitmap(bitmap, (Rect) null, rect, this.bitmapPaint);
        } else {
            canvas.drawBitmap(bitmap, (Rect) null, rect, this.bitmapPaint);
            canvas.drawBitmap(bitmap2, (Rect) null, rect, this.bitmapPaint);
        }
        FileOutputStream fileOutputStream = new FileOutputStream(new File(str));
        createBitmap.compress(Bitmap.CompressFormat.JPEG, f == 512.0f ? 83 : 87, fileOutputStream);
        fileOutputStream.close();
        if (z2) {
            bitmap.recycle();
        }
        createBitmap.recycle();
    }

    /* access modifiers changed from: private */
    public void seekAnimatedStickersTo(long j) {
        RLottieDrawable lottieAnimation;
        ArrayList<VideoEditedInfo.MediaEntity> arrayList = this.editState.mediaEntities;
        if (arrayList != null) {
            int size = arrayList.size();
            for (int i = 0; i < size; i++) {
                VideoEditedInfo.MediaEntity mediaEntity = this.editState.mediaEntities.get(i);
                if (mediaEntity.type == 0 && (mediaEntity.subType & 1) != 0) {
                    View view = mediaEntity.view;
                    if ((view instanceof BackupImageView) && (lottieAnimation = ((BackupImageView) view).getImageReceiver().getLottieAnimation()) != null) {
                        long j2 = this.startTime;
                        long j3 = 0;
                        if (j2 > 0) {
                            j3 = j2 / 1000;
                        }
                        lottieAnimation.setProgressMs(j - j3);
                    }
                }
            }
        }
    }

    /* access modifiers changed from: private */
    public void playOrStopAnimatedStickers(boolean z) {
        RLottieDrawable lottieAnimation;
        ArrayList<VideoEditedInfo.MediaEntity> arrayList = this.editState.mediaEntities;
        if (arrayList != null) {
            int size = arrayList.size();
            for (int i = 0; i < size; i++) {
                VideoEditedInfo.MediaEntity mediaEntity = this.editState.mediaEntities.get(i);
                if (mediaEntity.type == 0 && (mediaEntity.subType & 1) != 0) {
                    View view = mediaEntity.view;
                    if ((view instanceof BackupImageView) && (lottieAnimation = ((BackupImageView) view).getImageReceiver().getLottieAnimation()) != null) {
                        if (z) {
                            lottieAnimation.start();
                        } else {
                            lottieAnimation.stop();
                        }
                    }
                }
            }
        }
    }

    private int getAnimatedMediaEntitiesCount(boolean z) {
        ArrayList<VideoEditedInfo.MediaEntity> arrayList = this.editState.mediaEntities;
        if (arrayList == null) {
            return 0;
        }
        int size = arrayList.size();
        int i = 0;
        for (int i2 = 0; i2 < size; i2++) {
            VideoEditedInfo.MediaEntity mediaEntity = this.editState.mediaEntities.get(i2);
            if (mediaEntity.type == 0) {
                byte b = mediaEntity.subType;
                if ((b & 1) != 0 || (b & 4) != 0) {
                    i++;
                    if (z) {
                        break;
                    }
                }
            }
        }
        return i;
    }

    private boolean hasAnimatedMediaEntities() {
        return getAnimatedMediaEntitiesCount(true) != 0;
    }

    /* JADX WARNING: Removed duplicated region for block: B:16:0x004d A[Catch:{ all -> 0x0083 }] */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private android.graphics.Bitmap createCroppedBitmap(android.graphics.Bitmap r12, org.telegram.messenger.MediaController.CropState r13, int[] r14, boolean r15) {
        /*
            r11 = this;
            int r0 = r13.transformRotation     // Catch:{ all -> 0x0083 }
            r1 = 0
            if (r14 == 0) goto L_0x0007
            r1 = r14[r1]     // Catch:{ all -> 0x0083 }
        L_0x0007:
            int r0 = r0 + r1
            int r0 = r0 % 360
            int r14 = r12.getWidth()     // Catch:{ all -> 0x0083 }
            int r1 = r12.getHeight()     // Catch:{ all -> 0x0083 }
            r2 = 270(0x10e, float:3.78E-43)
            r3 = 90
            if (r0 == r3) goto L_0x001e
            if (r0 != r2) goto L_0x001b
            goto L_0x001e
        L_0x001b:
            r4 = r14
            r5 = r1
            goto L_0x0020
        L_0x001e:
            r5 = r14
            r4 = r1
        L_0x0020:
            float r4 = (float) r4     // Catch:{ all -> 0x0083 }
            float r6 = r13.cropPw     // Catch:{ all -> 0x0083 }
            float r6 = r6 * r4
            int r6 = (int) r6     // Catch:{ all -> 0x0083 }
            float r5 = (float) r5     // Catch:{ all -> 0x0083 }
            float r7 = r13.cropPh     // Catch:{ all -> 0x0083 }
            float r7 = r7 * r5
            int r7 = (int) r7     // Catch:{ all -> 0x0083 }
            android.graphics.Bitmap$Config r8 = android.graphics.Bitmap.Config.ARGB_8888     // Catch:{ all -> 0x0083 }
            android.graphics.Bitmap r8 = android.graphics.Bitmap.createBitmap(r6, r7, r8)     // Catch:{ all -> 0x0083 }
            android.graphics.Matrix r9 = new android.graphics.Matrix     // Catch:{ all -> 0x0083 }
            r9.<init>()     // Catch:{ all -> 0x0083 }
            int r14 = -r14
            r10 = 2
            int r14 = r14 / r10
            float r14 = (float) r14     // Catch:{ all -> 0x0083 }
            int r1 = -r1
            int r1 = r1 / r10
            float r1 = (float) r1     // Catch:{ all -> 0x0083 }
            r9.postTranslate(r14, r1)     // Catch:{ all -> 0x0083 }
            if (r15 == 0) goto L_0x0057
            boolean r14 = r13.mirrored     // Catch:{ all -> 0x0083 }
            if (r14 == 0) goto L_0x0057
            r14 = -1082130432(0xffffffffbvar_, float:-1.0)
            r15 = 1065353216(0x3var_, float:1.0)
            if (r0 == r3) goto L_0x0054
            if (r0 != r2) goto L_0x0050
            goto L_0x0054
        L_0x0050:
            r9.postScale(r14, r15)     // Catch:{ all -> 0x0083 }
            goto L_0x0057
        L_0x0054:
            r9.postScale(r15, r14)     // Catch:{ all -> 0x0083 }
        L_0x0057:
            float r14 = r13.cropRotate     // Catch:{ all -> 0x0083 }
            float r15 = (float) r0     // Catch:{ all -> 0x0083 }
            float r14 = r14 + r15
            r9.postRotate(r14)     // Catch:{ all -> 0x0083 }
            float r14 = r13.cropPx     // Catch:{ all -> 0x0083 }
            float r14 = r14 * r4
            float r15 = r13.cropPy     // Catch:{ all -> 0x0083 }
            float r15 = r15 * r5
            r9.postTranslate(r14, r15)     // Catch:{ all -> 0x0083 }
            float r13 = r13.cropScale     // Catch:{ all -> 0x0083 }
            r9.postScale(r13, r13)     // Catch:{ all -> 0x0083 }
            int r6 = r6 / r10
            float r13 = (float) r6     // Catch:{ all -> 0x0083 }
            int r7 = r7 / r10
            float r14 = (float) r7     // Catch:{ all -> 0x0083 }
            r9.postTranslate(r13, r14)     // Catch:{ all -> 0x0083 }
            android.graphics.Canvas r13 = new android.graphics.Canvas     // Catch:{ all -> 0x0083 }
            r13.<init>(r8)     // Catch:{ all -> 0x0083 }
            android.graphics.Paint r14 = new android.graphics.Paint     // Catch:{ all -> 0x0083 }
            r14.<init>(r10)     // Catch:{ all -> 0x0083 }
            r13.drawBitmap(r12, r9, r14)     // Catch:{ all -> 0x0083 }
            return r8
        L_0x0083:
            r12 = move-exception
            org.telegram.messenger.FileLog.e((java.lang.Throwable) r12)
            r12 = 0
            return r12
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.createCroppedBitmap(android.graphics.Bitmap, org.telegram.messenger.MediaController$CropState, int[], boolean):android.graphics.Bitmap");
    }

    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r26v0, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r12v1, resolved type: org.telegram.messenger.MediaController$SavedFilterState} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r26v1, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r26v2, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r26v3, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r26v4, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r26v5, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r26v6, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r26v7, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r26v8, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r26v9, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r26v10, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r15v11, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r15v12, resolved type: java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity>} */
    /* JADX WARNING: type inference failed for: r4v47, types: [org.telegram.messenger.MediaController$SavedFilterState] */
    /* JADX WARNING: Code restructure failed: missing block: B:17:0x005b, code lost:
        r1 = r7.sendPhotoType;
     */
    /* JADX WARNING: Multi-variable type inference failed */
    /* JADX WARNING: Removed duplicated region for block: B:166:0x050c  */
    /* JADX WARNING: Removed duplicated region for block: B:195:0x05f3 A[LOOP:1: B:191:0x05e9->B:195:0x05f3, LOOP_END] */
    /* JADX WARNING: Removed duplicated region for block: B:226:0x074a  */
    /* JADX WARNING: Removed duplicated region for block: B:229:0x0757  */
    /* JADX WARNING: Removed duplicated region for block: B:230:0x076a  */
    /* JADX WARNING: Removed duplicated region for block: B:245:0x07b1  */
    /* JADX WARNING: Removed duplicated region for block: B:248:0x07b9  */
    /* JADX WARNING: Removed duplicated region for block: B:249:0x0811  */
    /* JADX WARNING: Removed duplicated region for block: B:252:0x081e  */
    /* JADX WARNING: Removed duplicated region for block: B:259:0x082d  */
    /* JADX WARNING: Removed duplicated region for block: B:262:0x0835  */
    /* JADX WARNING: Removed duplicated region for block: B:45:0x00f9 A[RETURN] */
    /* JADX WARNING: Removed duplicated region for block: B:46:0x00fa  */
    /* JADX WARNING: Removed duplicated region for block: B:91:0x02b7  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private void applyCurrentEditMode() {
        /*
            r44 = this;
            r7 = r44
            int r0 = r7.currentIndex
            if (r0 < 0) goto L_0x084e
            java.util.ArrayList<java.lang.Object> r1 = r7.imagesArrLocals
            int r1 = r1.size()
            if (r0 < r1) goto L_0x0010
            goto L_0x084e
        L_0x0010:
            java.util.ArrayList<java.lang.Object> r0 = r7.imagesArrLocals
            int r1 = r7.currentIndex
            java.lang.Object r0 = r0.get(r1)
            boolean r0 = r0 instanceof org.telegram.messenger.MediaController.MediaEditState
            if (r0 != 0) goto L_0x001d
            return
        L_0x001d:
            r8 = 1
            android.graphics.Bitmap[] r0 = new android.graphics.Bitmap[r8]
            java.util.ArrayList<java.lang.Object> r1 = r7.imagesArrLocals
            int r2 = r7.currentIndex
            java.lang.Object r1 = r1.get(r2)
            r9 = r1
            org.telegram.messenger.MediaController$MediaEditState r9 = (org.telegram.messenger.MediaController.MediaEditState) r9
            int r1 = r7.currentEditMode
            r2 = 1148846080(0x447a0000, float:1000.0)
            r10 = 3
            r3 = 1140850688(0x44000000, float:512.0)
            r11 = 2
            r12 = 0
            r13 = 0
            if (r1 == r8) goto L_0x008c
            if (r1 != 0) goto L_0x003e
            int r4 = r7.sendPhotoType
            if (r4 != r8) goto L_0x003e
            goto L_0x008c
        L_0x003e:
            if (r1 != r11) goto L_0x0053
            org.telegram.ui.Components.PhotoFilterView r1 = r7.photoFilterView
            android.graphics.Bitmap r1 = r1.getBitmap()
            org.telegram.ui.Components.PhotoFilterView r4 = r7.photoFilterView
            org.telegram.messenger.MediaController$SavedFilterState r4 = r4.getSavedFilterState()
            r6 = r1
            r5 = r4
            r1 = r12
            r4 = r1
            r15 = r4
            goto L_0x00f5
        L_0x0053:
            if (r1 != r10) goto L_0x0085
            int r1 = android.os.Build.VERSION.SDK_INT
            r4 = 18
            if (r1 < r4) goto L_0x0069
            int r1 = r7.sendPhotoType
            if (r1 == 0) goto L_0x0063
            if (r1 == r8) goto L_0x0063
            if (r1 != r11) goto L_0x0069
        L_0x0063:
            java.util.ArrayList r1 = new java.util.ArrayList
            r1.<init>()
            goto L_0x006a
        L_0x0069:
            r1 = r12
        L_0x006a:
            org.telegram.ui.Components.PhotoPaintView r4 = r7.photoPaintView
            boolean r4 = r4.hasChanges()
            org.telegram.ui.Components.PhotoPaintView r5 = r7.photoPaintView
            android.graphics.Bitmap r5 = r5.getBitmap(r1, r0)
            org.telegram.ui.Components.PhotoPaintView r6 = r7.photoPaintView
            java.util.ArrayList r6 = r6.getMasks()
            r22 = r4
            r15 = r6
            r4 = r1
            r6 = r5
            r1 = r12
            r5 = r1
            goto L_0x00f7
        L_0x0085:
            r1 = r12
            r4 = r1
            r5 = r4
            r6 = r5
            r15 = r6
            goto L_0x00f5
        L_0x008c:
            org.telegram.ui.Components.PhotoCropView r1 = r7.photoCropView
            r1.makeCrop(r9)
            org.telegram.messenger.MediaController$CropState r1 = r9.cropState
            if (r1 != 0) goto L_0x009a
            int r1 = r7.currentEditMode
            if (r1 == r8) goto L_0x009a
            return
        L_0x009a:
            boolean r1 = r7.isCurrentVideo
            if (r1 == 0) goto L_0x00e0
            java.lang.String r1 = r9.filterPath
            boolean r1 = android.text.TextUtils.isEmpty(r1)
            if (r1 != 0) goto L_0x00b0
            java.lang.String r1 = r9.filterPath
            android.graphics.Bitmap r1 = org.telegram.messenger.ImageLoader.loadBitmap(r1, r12, r3, r3, r8)
        L_0x00ac:
            r6 = r1
            r1 = r12
            r4 = r1
            goto L_0x00f3
        L_0x00b0:
            int r1 = r7.sendPhotoType
            if (r1 != r8) goto L_0x00c5
            int[] r1 = new int[r8]
            java.lang.String r4 = r9.getPath()
            long r5 = r7.avatarStartTime
            r14 = 1000(0x3e8, double:4.94E-321)
            long r5 = r5 / r14
            android.graphics.Bitmap r4 = org.telegram.messenger.SendMessagesHelper.createVideoThumbnailAtTime(r4, r5, r1, r8)
            r6 = r4
            goto L_0x00f2
        L_0x00c5:
            java.lang.String r1 = r9.getPath()
            org.telegram.ui.Components.VideoTimelinePlayView r4 = r7.videoTimelineView
            float r4 = r4.getLeftProgress()
            org.telegram.ui.Components.VideoPlayer r5 = r7.videoPlayer
            long r5 = r5.getDuration()
            float r5 = (float) r5
            float r4 = r4 * r5
            float r4 = r4 * r2
            long r4 = (long) r4
            android.graphics.Bitmap r1 = org.telegram.messenger.SendMessagesHelper.createVideoThumbnailAtTime(r1, r4)
            goto L_0x00ac
        L_0x00e0:
            org.telegram.messenger.ImageReceiver r1 = r7.centerImage
            android.graphics.Bitmap r1 = r1.getBitmap()
            int[] r4 = new int[r8]
            org.telegram.messenger.ImageReceiver r5 = r7.centerImage
            int r5 = r5.getOrientation()
            r4[r13] = r5
            r6 = r1
            r1 = r4
        L_0x00f2:
            r4 = r12
        L_0x00f3:
            r5 = r4
            r15 = r5
        L_0x00f5:
            r22 = 0
        L_0x00f7:
            if (r6 != 0) goto L_0x00fa
            return
        L_0x00fa:
            java.lang.String r14 = r9.thumbPath
            if (r14 == 0) goto L_0x010a
            java.io.File r14 = new java.io.File
            java.lang.String r3 = r9.thumbPath
            r14.<init>(r3)
            r14.delete()
            r9.thumbPath = r12
        L_0x010a:
            java.lang.String r3 = r9.imagePath
            if (r3 == 0) goto L_0x011a
            java.io.File r3 = new java.io.File
            java.lang.String r14 = r9.imagePath
            r3.<init>(r14)
            r3.delete()
            r9.imagePath = r12
        L_0x011a:
            int r3 = r7.currentEditMode
            java.lang.String r14 = "_temp.jpg"
            r10 = 4
            if (r3 == r8) goto L_0x0608
            if (r3 != 0) goto L_0x0129
            int r2 = r7.sendPhotoType
            if (r2 != r8) goto L_0x0129
            goto L_0x0608
        L_0x0129:
            if (r3 != r11) goto L_0x02c3
            java.lang.String r0 = r9.filterPath
            if (r0 == 0) goto L_0x0139
            java.io.File r0 = new java.io.File
            java.lang.String r1 = r9.filterPath
            r0.<init>(r1)
            r0.delete()
        L_0x0139:
            android.graphics.Bitmap$CompressFormat r15 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r18 = 87
            r19 = 0
            r20 = 101(0x65, float:1.42E-43)
            r21 = 101(0x65, float:1.42E-43)
            r4 = r14
            r14 = r6
            r16 = r0
            r17 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r14, (android.graphics.Bitmap.CompressFormat) r15, (float) r16, (float) r17, (int) r18, (boolean) r19, (int) r20, (int) r21)
            int r1 = r7.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            java.io.File r0 = r1.getPathToAttach(r0, r8)
            java.lang.String r0 = r0.toString()
            r9.filterPath = r0
            org.telegram.messenger.MediaController$CropState r0 = r9.cropState
            if (r0 == 0) goto L_0x0172
            android.graphics.Bitmap r0 = r7.createCroppedBitmap(r6, r0, r12, r8)
            r23 = r0
            goto L_0x0174
        L_0x0172:
            r23 = r6
        L_0x0174:
            java.lang.String r0 = r9.paintPath
            if (r0 != 0) goto L_0x01d5
            boolean r0 = r7.isCurrentVideo
            if (r0 != 0) goto L_0x01ac
            android.graphics.Bitmap$CompressFormat r15 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r18 = 87
            r19 = 0
            r20 = 101(0x65, float:1.42E-43)
            r21 = 101(0x65, float:1.42E-43)
            r14 = r23
            r16 = r0
            r17 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r14, (android.graphics.Bitmap.CompressFormat) r15, (float) r16, (float) r17, (int) r18, (boolean) r19, (int) r20, (int) r21)
            int r1 = r7.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            java.io.File r0 = r1.getPathToAttach(r0, r8)
            java.lang.String r0 = r0.toString()
            r7.currentImagePath = r0
            r9.imagePath = r0
        L_0x01ac:
            android.graphics.Bitmap$CompressFormat r15 = android.graphics.Bitmap.CompressFormat.JPEG
            r16 = 1140850688(0x44000000, float:512.0)
            r17 = 1140850688(0x44000000, float:512.0)
            r18 = 83
            r19 = 0
            r20 = 101(0x65, float:1.42E-43)
            r21 = 101(0x65, float:1.42E-43)
            r14 = r23
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r14, (android.graphics.Bitmap.CompressFormat) r15, (float) r16, (float) r17, (int) r18, (boolean) r19, (int) r20, (int) r21)
            int r1 = r7.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            java.io.File r0 = r1.getPathToAttach(r0, r8)
            java.lang.String r0 = r0.toString()
            r9.thumbPath = r0
            r26 = r5
            r14 = r6
            goto L_0x02ba
        L_0x01d5:
            java.lang.String r3 = r9.fullPaintPath
            boolean r0 = r0.equals(r3)
            if (r0 == 0) goto L_0x01e4
            org.telegram.ui.Components.PaintingOverlay r0 = r7.paintingOverlay
            android.graphics.Bitmap r0 = r0.getThumb()
            goto L_0x01e5
        L_0x01e4:
            r0 = r12
        L_0x01e5:
            org.telegram.messenger.MediaController$CropState r1 = r9.cropState
            if (r1 == 0) goto L_0x0205
            if (r0 != 0) goto L_0x01fc
            java.lang.String r0 = r9.fullPaintPath
            android.graphics.Bitmap r0 = android.graphics.BitmapFactory.decodeFile(r0)
            org.telegram.messenger.MediaController$CropState r1 = r9.cropState
            android.graphics.Bitmap r1 = r7.createCroppedBitmap(r0, r1, r12, r13)
            r0.recycle()
            r0 = r1
            goto L_0x0200
        L_0x01fc:
            android.graphics.Bitmap r0 = r7.createCroppedBitmap(r0, r1, r12, r13)
        L_0x0200:
            r24 = r0
            r25 = 1
            goto L_0x0209
        L_0x0205:
            r24 = r0
            r25 = 0
        L_0x0209:
            boolean r0 = r7.isCurrentVideo
            if (r0 != 0) goto L_0x027f
            boolean r0 = r44.hasAnimatedMediaEntities()
            if (r0 == 0) goto L_0x0244
            android.graphics.Bitmap$CompressFormat r15 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r18 = 87
            r19 = 0
            r20 = 101(0x65, float:1.42E-43)
            r21 = 101(0x65, float:1.42E-43)
            r14 = r23
            r16 = r0
            r17 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r14, (android.graphics.Bitmap.CompressFormat) r15, (float) r16, (float) r17, (int) r18, (boolean) r19, (int) r20, (int) r21)
            int r1 = r7.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            java.io.File r0 = r1.getPathToAttach(r0, r8)
            java.lang.String r0 = r0.toString()
            r7.currentImagePath = r0
            r9.imagePath = r0
            goto L_0x027f
        L_0x0244:
            java.io.File r0 = new java.io.File
            java.io.File r1 = org.telegram.messenger.FileLoader.getDirectory(r10)
            java.lang.StringBuilder r2 = new java.lang.StringBuilder
            r2.<init>()
            int r14 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r2.append(r14)
            r2.append(r4)
            java.lang.String r2 = r2.toString()
            r0.<init>(r1, r2)
            java.lang.String r1 = r0.getAbsolutePath()
            r9.imagePath = r1
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r14 = (float) r0
            r15 = 1
            r0 = r44
            r2 = r3
            r16 = r3
            r3 = r24
            r11 = r4
            r4 = r23
            r26 = r5
            r5 = r14
            r14 = r6
            r6 = r15
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
            goto L_0x0285
        L_0x027f:
            r16 = r3
            r11 = r4
            r26 = r5
            r14 = r6
        L_0x0285:
            java.io.File r0 = new java.io.File
            java.io.File r1 = org.telegram.messenger.FileLoader.getDirectory(r10)
            java.lang.StringBuilder r2 = new java.lang.StringBuilder
            r2.<init>()
            int r3 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r2.append(r3)
            r2.append(r11)
            java.lang.String r2 = r2.toString()
            r0.<init>(r1, r2)
            java.lang.String r1 = r0.getAbsolutePath()
            r9.thumbPath = r1
            r5 = 1140850688(0x44000000, float:512.0)
            r6 = 1
            r0 = r44
            r2 = r16
            r3 = r24
            r4 = r23
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
            if (r25 == 0) goto L_0x02ba
            r24.recycle()
        L_0x02ba:
            org.telegram.messenger.MediaController$CropState r0 = r9.cropState
            if (r0 == 0) goto L_0x0605
            r23.recycle()
            goto L_0x0605
        L_0x02c3:
            r26 = r5
            r11 = r14
            r1 = 3
            r14 = r6
            if (r3 != r1) goto L_0x0605
            java.lang.String r1 = r9.paintPath
            if (r1 == 0) goto L_0x02ec
            java.io.File r1 = new java.io.File
            java.lang.String r2 = r9.paintPath
            r1.<init>(r2)
            r1.delete()
            java.lang.String r1 = r9.paintPath
            java.lang.String r2 = r9.fullPaintPath
            boolean r1 = r1.equals(r2)
            if (r1 != 0) goto L_0x02ec
            java.io.File r1 = new java.io.File
            java.lang.String r2 = r9.fullPaintPath
            r1.<init>(r2)
            r1.delete()
        L_0x02ec:
            android.graphics.Bitmap$CompressFormat r1 = android.graphics.Bitmap.CompressFormat.PNG
            int r2 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r2 = (float) r2
            int r3 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r3 = (float) r3
            r18 = 87
            r19 = 0
            r20 = 101(0x65, float:1.42E-43)
            r21 = 101(0x65, float:1.42E-43)
            r6 = r14
            r5 = r15
            r15 = r1
            r16 = r2
            r17 = r3
            org.telegram.tgnet.TLRPC$PhotoSize r1 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r14, (android.graphics.Bitmap.CompressFormat) r15, (float) r16, (float) r17, (int) r18, (boolean) r19, (int) r20, (int) r21)
            r9.stickers = r5
            org.telegram.ui.PhotoViewer$EditState r2 = r7.editState
            int r3 = r7.currentAccount
            org.telegram.messenger.FileLoader r3 = org.telegram.messenger.FileLoader.getInstance(r3)
            java.io.File r1 = r3.getPathToAttach(r1, r8)
            java.lang.String r1 = r1.toString()
            r2.paintPath = r1
            r9.paintPath = r1
            org.telegram.ui.Components.PaintingOverlay r1 = r7.paintingOverlay
            org.telegram.ui.PhotoViewer$EditState r2 = r7.editState
            if (r4 == 0) goto L_0x032d
            boolean r3 = r4.isEmpty()
            if (r3 == 0) goto L_0x032e
        L_0x032d:
            r4 = r12
        L_0x032e:
            r2.mediaEntities = r4
            r9.mediaEntities = r4
            boolean r2 = r7.isCurrentVideo
            r1.setEntities(r4, r2, r8)
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            org.telegram.ui.Components.PhotoPaintView r2 = r7.photoPaintView
            long r2 = r2.getLcm()
            r1.averageDuration = r2
            r9.averageDuration = r2
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r1 = r9.mediaEntities
            if (r1 == 0) goto L_0x037a
            r1 = r0[r13]
            if (r1 == 0) goto L_0x037a
            r14 = r0[r13]
            android.graphics.Bitmap$CompressFormat r15 = android.graphics.Bitmap.CompressFormat.PNG
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            int r2 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r2 = (float) r2
            r18 = 87
            r19 = 0
            r20 = 101(0x65, float:1.42E-43)
            r21 = 101(0x65, float:1.42E-43)
            r16 = r1
            r17 = r2
            org.telegram.tgnet.TLRPC$PhotoSize r1 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r14, (android.graphics.Bitmap.CompressFormat) r15, (float) r16, (float) r17, (int) r18, (boolean) r19, (int) r20, (int) r21)
            int r2 = r7.currentAccount
            org.telegram.messenger.FileLoader r2 = org.telegram.messenger.FileLoader.getInstance(r2)
            java.io.File r1 = r2.getPathToAttach(r1, r8)
            java.lang.String r1 = r1.toString()
            r9.fullPaintPath = r1
            goto L_0x037e
        L_0x037a:
            java.lang.String r1 = r9.paintPath
            r9.fullPaintPath = r1
        L_0x037e:
            org.telegram.ui.Components.PaintingOverlay r1 = r7.paintingOverlay
            r1.setBitmap(r6)
            org.telegram.messenger.MediaController$CropState r1 = r9.cropState
            if (r1 == 0) goto L_0x0462
            boolean r1 = r1.initied
            if (r1 == 0) goto L_0x0462
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            java.lang.String r1 = r1.paintPath
            java.lang.String r1 = org.telegram.ui.Components.Crop.CropView.getCopy(r1)
            org.telegram.ui.PhotoViewer$EditState r2 = r7.editState
            java.lang.String r2 = r2.croppedPaintPath
            if (r2 == 0) goto L_0x03a9
            java.io.File r2 = new java.io.File
            org.telegram.ui.PhotoViewer$EditState r3 = r7.editState
            java.lang.String r3 = r3.croppedPaintPath
            r2.<init>(r3)
            r2.delete()
            org.telegram.ui.PhotoViewer$EditState r2 = r7.editState
            r2.croppedPaintPath = r12
        L_0x03a9:
            org.telegram.ui.PhotoViewer$EditState r2 = r7.editState
            r2.croppedPaintPath = r1
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r2 = r2.mediaEntities
            if (r2 == 0) goto L_0x03e9
            boolean r2 = r2.isEmpty()
            if (r2 != 0) goto L_0x03e9
            org.telegram.ui.PhotoViewer$EditState r2 = r7.editState
            java.util.ArrayList r3 = new java.util.ArrayList
            org.telegram.ui.PhotoViewer$EditState r4 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r4 = r4.mediaEntities
            int r4 = r4.size()
            r3.<init>(r4)
            r2.croppedMediaEntities = r3
            org.telegram.ui.PhotoViewer$EditState r2 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r2 = r2.mediaEntities
            int r2 = r2.size()
            r3 = 0
        L_0x03d1:
            if (r3 >= r2) goto L_0x03ed
            org.telegram.ui.PhotoViewer$EditState r4 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r5 = r4.croppedMediaEntities
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r4 = r4.mediaEntities
            java.lang.Object r4 = r4.get(r3)
            org.telegram.messenger.VideoEditedInfo$MediaEntity r4 = (org.telegram.messenger.VideoEditedInfo.MediaEntity) r4
            org.telegram.messenger.VideoEditedInfo$MediaEntity r4 = r4.copy()
            r5.add(r4)
            int r3 = r3 + 1
            goto L_0x03d1
        L_0x03e9:
            org.telegram.ui.PhotoViewer$EditState r2 = r7.editState
            r2.croppedMediaEntities = r12
        L_0x03ed:
            org.telegram.messenger.MediaController$CropState r2 = r9.cropState
            int r3 = r2.width
            int r2 = r2.height
            android.graphics.Bitmap$Config r4 = android.graphics.Bitmap.Config.ARGB_8888
            android.graphics.Bitmap r2 = android.graphics.Bitmap.createBitmap(r3, r2, r4)
            android.graphics.Canvas r3 = new android.graphics.Canvas
            r3.<init>(r2)
            boolean r4 = r7.isCurrentVideo
            if (r4 == 0) goto L_0x0413
            android.view.TextureView r4 = r7.videoTextureView
            org.telegram.ui.Components.VideoEditTextureView r4 = (org.telegram.ui.Components.VideoEditTextureView) r4
            int r5 = r4.getVideoWidth()
            int r4 = r4.getVideoHeight()
            r35 = r4
            r34 = r5
            goto L_0x0423
        L_0x0413:
            org.telegram.messenger.ImageReceiver r4 = r7.centerImage
            int r4 = r4.getBitmapWidth()
            org.telegram.messenger.ImageReceiver r5 = r7.centerImage
            int r5 = r5.getBitmapHeight()
            r34 = r4
            r35 = r5
        L_0x0423:
            android.app.Activity r4 = r7.parentActivity
            r29 = 0
            android.graphics.Bitmap$CompressFormat r32 = android.graphics.Bitmap.CompressFormat.PNG
            org.telegram.messenger.MediaController$CropState r5 = r9.cropState
            android.graphics.Matrix r14 = r5.matrix
            float r15 = r5.stateScale
            float r10 = r5.cropRotate
            int r8 = r5.transformRotation
            float r8 = (float) r8
            float r5 = r5.scale
            r40 = 0
            org.telegram.ui.PhotoViewer$EditState r12 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r12 = r12.croppedMediaEntities
            r42 = 0
            r27 = r4
            r28 = r1
            r30 = r3
            r31 = r2
            r33 = r14
            r36 = r15
            r37 = r10
            r38 = r8
            r39 = r5
            r41 = r12
            org.telegram.ui.Components.Crop.CropView.editBitmap(r27, r28, r29, r30, r31, r32, r33, r34, r35, r36, r37, r38, r39, r40, r41, r42)
            r2.recycle()
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            java.lang.String r2 = r1.croppedPaintPath
            r9.croppedPaintPath = r2
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r1 = r1.croppedMediaEntities
            r9.croppedMediaEntities = r1
        L_0x0462:
            r1 = r0[r13]
            if (r1 == 0) goto L_0x0469
            r0 = r0[r13]
            goto L_0x046a
        L_0x0469:
            r0 = r6
        L_0x046a:
            org.telegram.messenger.MediaController$CropState r1 = r9.cropState
            if (r1 == 0) goto L_0x047a
            boolean r2 = r1.initied
            if (r2 == 0) goto L_0x047a
            r2 = 0
            android.graphics.Bitmap r0 = r7.createCroppedBitmap(r0, r1, r2, r13)
            r8 = r0
            r10 = 1
            goto L_0x047c
        L_0x047a:
            r8 = r0
            r10 = 0
        L_0x047c:
            boolean r0 = r7.isCurrentVideo
            if (r0 == 0) goto L_0x04bd
            java.lang.String r0 = r9.filterPath
            if (r0 != 0) goto L_0x04a3
            java.lang.String r0 = r9.getPath()
            org.telegram.ui.Components.VideoTimelinePlayView r1 = r7.videoTimelineView
            float r1 = r1.getLeftProgress()
            org.telegram.ui.Components.VideoPlayer r2 = r7.videoPlayer
            long r2 = r2.getDuration()
            float r2 = (float) r2
            float r1 = r1 * r2
            r2 = 1148846080(0x447a0000, float:1000.0)
            float r1 = r1 * r2
            long r1 = (long) r1
            android.graphics.Bitmap r0 = org.telegram.messenger.SendMessagesHelper.createVideoThumbnailAtTime(r0, r1)
            r1 = 1
            r3 = 0
            goto L_0x04ab
        L_0x04a3:
            r1 = 1
            r2 = 1140850688(0x44000000, float:512.0)
            r3 = 0
            android.graphics.Bitmap r0 = org.telegram.messenger.ImageLoader.loadBitmap(r0, r3, r2, r2, r1)
        L_0x04ab:
            org.telegram.messenger.MediaController$CropState r2 = r9.cropState
            if (r2 == 0) goto L_0x04b4
            android.graphics.Bitmap r2 = r7.createCroppedBitmap(r0, r2, r3, r1)
            goto L_0x04b5
        L_0x04b4:
            r2 = r0
        L_0x04b5:
            org.telegram.messenger.MediaController$CropState r3 = r9.cropState
            if (r3 == 0) goto L_0x04d8
            r0.recycle()
            goto L_0x04d8
        L_0x04bd:
            r1 = 1
            int[] r0 = new int[r1]
            org.telegram.messenger.ImageReceiver r2 = r7.centerImage
            int r2 = r2.getOrientation()
            r0[r13] = r2
            org.telegram.messenger.MediaController$CropState r2 = r9.cropState
            if (r2 == 0) goto L_0x04db
            org.telegram.messenger.ImageReceiver r2 = r7.centerImage
            android.graphics.Bitmap r2 = r2.getBitmap()
            org.telegram.messenger.MediaController$CropState r3 = r9.cropState
            android.graphics.Bitmap r2 = r7.createCroppedBitmap(r2, r3, r0, r1)
        L_0x04d8:
            r12 = r2
            r14 = 1
            goto L_0x0508
        L_0x04db:
            org.telegram.messenger.ImageReceiver r1 = r7.centerImage
            android.graphics.Bitmap r27 = r1.getBitmap()
            r1 = r0[r13]
            if (r1 == 0) goto L_0x0505
            android.graphics.Matrix r1 = new android.graphics.Matrix
            r1.<init>()
            r0 = r0[r13]
            float r0 = (float) r0
            r1.postRotate(r0)
            r28 = 0
            r29 = 0
            int r30 = r27.getWidth()
            int r31 = r27.getHeight()
            r33 = 1
            r32 = r1
            android.graphics.Bitmap r2 = org.telegram.messenger.Bitmaps.createBitmap(r27, r28, r29, r30, r31, r32, r33)
            goto L_0x04d8
        L_0x0505:
            r12 = r27
            r14 = 0
        L_0x0508:
            boolean r0 = r7.isCurrentVideo
            if (r0 != 0) goto L_0x0579
            boolean r0 = r44.hasAnimatedMediaEntities()
            if (r0 == 0) goto L_0x0544
            android.graphics.Bitmap$CompressFormat r28 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r31 = 87
            r32 = 0
            r33 = 101(0x65, float:1.42E-43)
            r34 = 101(0x65, float:1.42E-43)
            r27 = r12
            r29 = r0
            r30 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r27, (android.graphics.Bitmap.CompressFormat) r28, (float) r29, (float) r30, (int) r31, (boolean) r32, (int) r33, (int) r34)
            int r1 = r7.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            r2 = 1
            java.io.File r0 = r1.getPathToAttach(r0, r2)
            java.lang.String r0 = r0.toString()
            r7.currentImagePath = r0
            r9.imagePath = r0
            goto L_0x0579
        L_0x0544:
            java.io.File r0 = new java.io.File
            r1 = 4
            java.io.File r2 = org.telegram.messenger.FileLoader.getDirectory(r1)
            java.lang.StringBuilder r1 = new java.lang.StringBuilder
            r1.<init>()
            int r3 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r1.append(r3)
            r1.append(r11)
            java.lang.String r1 = r1.toString()
            r0.<init>(r2, r1)
            java.lang.String r1 = r0.getAbsolutePath()
            r9.imagePath = r1
            r2 = 0
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r5 = (float) r0
            r15 = 0
            r0 = r44
            r3 = r12
            r4 = r8
            r43 = r6
            r6 = r15
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
            goto L_0x057b
        L_0x0579:
            r43 = r6
        L_0x057b:
            java.io.File r0 = new java.io.File
            r1 = 4
            java.io.File r2 = org.telegram.messenger.FileLoader.getDirectory(r1)
            java.lang.StringBuilder r1 = new java.lang.StringBuilder
            r1.<init>()
            int r3 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r1.append(r3)
            r1.append(r11)
            java.lang.String r1 = r1.toString()
            r0.<init>(r2, r1)
            java.lang.String r1 = r0.getAbsolutePath()
            r9.thumbPath = r1
            r2 = 0
            r5 = 1140850688(0x44000000, float:512.0)
            r6 = 0
            r0 = r44
            r3 = r12
            r4 = r8
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
            if (r10 == 0) goto L_0x05b0
            if (r8 == 0) goto L_0x05b0
            r8.recycle()
        L_0x05b0:
            if (r14 == 0) goto L_0x05b7
            if (r12 == 0) goto L_0x05b7
            r12.recycle()
        L_0x05b7:
            int r0 = r7.sendPhotoType
            r1 = 1
            if (r0 != r1) goto L_0x0740
            org.telegram.ui.Components.VideoPlayer r0 = r7.videoPlayer
            if (r0 == 0) goto L_0x0740
            boolean r0 = r7.isCurrentVideo
            if (r0 == 0) goto L_0x0740
            int r0 = r7.getAnimatedMediaEntitiesCount(r13)
            if (r0 != r1) goto L_0x0740
            org.telegram.ui.Components.VideoTimelinePlayView r0 = r7.videoTimelineView
            float r0 = r0.getLeftProgress()
            r1 = 0
            int r0 = (r0 > r1 ? 1 : (r0 == r1 ? 0 : -1))
            if (r0 > 0) goto L_0x0740
            org.telegram.ui.Components.VideoTimelinePlayView r0 = r7.videoTimelineView
            float r0 = r0.getRightProgress()
            r1 = 1065353216(0x3var_, float:1.0)
            int r0 = (r0 > r1 ? 1 : (r0 == r1 ? 0 : -1))
            if (r0 < 0) goto L_0x0740
            long r2 = r9.averageDuration
            org.telegram.ui.Components.VideoPlayer r0 = r7.videoPlayer
            long r4 = r0.getDuration()
        L_0x05e9:
            r10 = 3000(0xbb8, double:1.482E-320)
            int r0 = (r2 > r10 ? 1 : (r2 == r10 ? 0 : -1))
            if (r0 >= 0) goto L_0x05f7
            int r0 = (r2 > r4 ? 1 : (r2 == r4 ? 0 : -1))
            if (r0 >= 0) goto L_0x05f7
            long r10 = r9.averageDuration
            long r2 = r2 + r10
            goto L_0x05e9
        L_0x05f7:
            org.telegram.ui.Components.VideoTimelinePlayView r0 = r7.videoTimelineView
            float r2 = (float) r2
            float r3 = (float) r4
            float r2 = r2 / r3
            float r1 = java.lang.Math.min(r1, r2)
            r0.setRightProgress(r1)
            goto L_0x0740
        L_0x0605:
            r12 = r14
            goto L_0x0742
        L_0x0608:
            r26 = r5
            r43 = r6
            r11 = r14
            org.telegram.ui.PhotoViewer$EditState r0 = r7.editState
            org.telegram.messenger.MediaController$CropState r2 = r9.cropState
            r0.cropState = r2
            java.lang.String r3 = r9.croppedPaintPath
            r0.croppedPaintPath = r3
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r3 = r9.croppedMediaEntities
            r0.croppedMediaEntities = r3
            if (r2 == 0) goto L_0x0740
            r12 = r43
            r0 = 1
            android.graphics.Bitmap r8 = r7.createCroppedBitmap(r12, r2, r1, r0)
            java.lang.String r0 = r9.paintPath
            if (r0 == 0) goto L_0x06db
            java.lang.String r0 = r9.fullPaintPath
            android.graphics.Bitmap r10 = android.graphics.BitmapFactory.decodeFile(r0)
            org.telegram.messenger.MediaController$CropState r0 = r9.cropState
            r1 = 0
            android.graphics.Bitmap r14 = r7.createCroppedBitmap(r10, r0, r1, r13)
            boolean r0 = r7.isCurrentVideo
            if (r0 != 0) goto L_0x06a2
            boolean r0 = r44.hasAnimatedMediaEntities()
            if (r0 == 0) goto L_0x0671
            android.graphics.Bitmap$CompressFormat r28 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r31 = 87
            r32 = 0
            r33 = 101(0x65, float:1.42E-43)
            r34 = 101(0x65, float:1.42E-43)
            r27 = r8
            r29 = r0
            r30 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r27, (android.graphics.Bitmap.CompressFormat) r28, (float) r29, (float) r30, (int) r31, (boolean) r32, (int) r33, (int) r34)
            int r1 = r7.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            r2 = 1
            java.io.File r0 = r1.getPathToAttach(r0, r2)
            java.lang.String r0 = r0.toString()
            r7.currentImagePath = r0
            r9.imagePath = r0
            goto L_0x06a2
        L_0x0671:
            java.io.File r0 = new java.io.File
            r1 = 4
            java.io.File r2 = org.telegram.messenger.FileLoader.getDirectory(r1)
            java.lang.StringBuilder r1 = new java.lang.StringBuilder
            r1.<init>()
            int r3 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r1.append(r3)
            r1.append(r11)
            java.lang.String r1 = r1.toString()
            r0.<init>(r2, r1)
            java.lang.String r1 = r0.getAbsolutePath()
            r9.imagePath = r1
            r2 = 0
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r5 = (float) r0
            r6 = 1
            r0 = r44
            r3 = r14
            r4 = r8
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
        L_0x06a2:
            java.io.File r0 = new java.io.File
            r1 = 4
            java.io.File r2 = org.telegram.messenger.FileLoader.getDirectory(r1)
            java.lang.StringBuilder r1 = new java.lang.StringBuilder
            r1.<init>()
            int r3 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r1.append(r3)
            r1.append(r11)
            java.lang.String r1 = r1.toString()
            r0.<init>(r2, r1)
            java.lang.String r1 = r0.getAbsolutePath()
            r9.thumbPath = r1
            r2 = 0
            r5 = 1140850688(0x44000000, float:512.0)
            r6 = 1
            r0 = r44
            r3 = r14
            r4 = r8
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
            if (r14 == 0) goto L_0x06d5
            r14.recycle()
        L_0x06d5:
            if (r10 == 0) goto L_0x0733
            r10.recycle()
            goto L_0x0733
        L_0x06db:
            boolean r0 = r7.isCurrentVideo
            if (r0 != 0) goto L_0x0710
            android.graphics.Bitmap$CompressFormat r28 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r31 = 87
            r32 = 0
            r33 = 101(0x65, float:1.42E-43)
            r34 = 101(0x65, float:1.42E-43)
            r27 = r8
            r29 = r0
            r30 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r27, (android.graphics.Bitmap.CompressFormat) r28, (float) r29, (float) r30, (int) r31, (boolean) r32, (int) r33, (int) r34)
            int r1 = r7.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            r2 = 1
            java.io.File r0 = r1.getPathToAttach(r0, r2)
            java.lang.String r0 = r0.toString()
            r7.currentImagePath = r0
            r9.imagePath = r0
        L_0x0710:
            r28 = 1140850688(0x44000000, float:512.0)
            r29 = 1140850688(0x44000000, float:512.0)
            r30 = 70
            r31 = 0
            r32 = 101(0x65, float:1.42E-43)
            r33 = 101(0x65, float:1.42E-43)
            r27 = r8
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r27, (float) r28, (float) r29, (int) r30, (boolean) r31, (int) r32, (int) r33)
            int r1 = r7.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            r2 = 1
            java.io.File r0 = r1.getPathToAttach(r0, r2)
            java.lang.String r0 = r0.toString()
            r9.thumbPath = r0
        L_0x0733:
            int r0 = r7.currentEditMode
            if (r0 != 0) goto L_0x0742
            boolean r0 = r7.isCurrentVideo
            if (r0 == 0) goto L_0x0742
            r12.recycle()
            r6 = r8
            goto L_0x0743
        L_0x0740:
            r12 = r43
        L_0x0742:
            r6 = r12
        L_0x0743:
            org.telegram.messenger.SharedConfig.saveConfig()
            r12 = r26
            if (r12 == 0) goto L_0x0750
            org.telegram.ui.PhotoViewer$EditState r0 = r7.editState
            r0.savedFilterState = r12
            r9.savedFilterState = r12
        L_0x0750:
            int r0 = r7.currentEditMode
            java.lang.String r1 = "dialogFloatingButton"
            r2 = 1
            if (r0 != r2) goto L_0x076a
            r9.isCropped = r2
            android.widget.ImageView r0 = r7.cropItem
            android.graphics.PorterDuffColorFilter r3 = new android.graphics.PorterDuffColorFilter
            int r1 = r7.getThemedColor(r1)
            android.graphics.PorterDuff$Mode r4 = android.graphics.PorterDuff.Mode.MULTIPLY
            r3.<init>(r1, r4)
            r0.setColorFilter(r3)
            goto L_0x0797
        L_0x076a:
            r3 = 2
            if (r0 != r3) goto L_0x0780
            r9.isFiltered = r2
            android.widget.ImageView r0 = r7.tuneItem
            android.graphics.PorterDuffColorFilter r3 = new android.graphics.PorterDuffColorFilter
            int r1 = r7.getThemedColor(r1)
            android.graphics.PorterDuff$Mode r4 = android.graphics.PorterDuff.Mode.MULTIPLY
            r3.<init>(r1, r4)
            r0.setColorFilter(r3)
            goto L_0x0797
        L_0x0780:
            r3 = 3
            if (r0 != r3) goto L_0x0797
            if (r22 == 0) goto L_0x0797
            r9.isPainted = r2
            android.widget.ImageView r0 = r7.paintItem
            android.graphics.PorterDuffColorFilter r2 = new android.graphics.PorterDuffColorFilter
            int r1 = r7.getThemedColor(r1)
            android.graphics.PorterDuff$Mode r3 = android.graphics.PorterDuff.Mode.MULTIPLY
            r2.<init>(r1, r3)
            r0.setColorFilter(r2)
        L_0x0797:
            int r0 = r7.sendPhotoType
            if (r0 == 0) goto L_0x079e
            r1 = 4
            if (r0 != r1) goto L_0x07b4
        L_0x079e:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r0 = r7.placeProvider
            if (r0 == 0) goto L_0x07b4
            int r1 = r7.currentIndex
            r0.updatePhotoAtIndex(r1)
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r0 = r7.placeProvider
            int r1 = r7.currentIndex
            boolean r0 = r0.isPhotoChecked(r1)
            if (r0 != 0) goto L_0x07b4
            r44.setPhotoChecked()
        L_0x07b4:
            int r0 = r7.currentEditMode
            r1 = 1
            if (r0 != r1) goto L_0x0811
            org.telegram.ui.Components.PhotoCropView r0 = r7.photoCropView
            float r0 = r0.getRectSizeX()
            int r1 = r44.getContainerViewWidth()
            float r1 = (float) r1
            float r0 = r0 / r1
            org.telegram.ui.Components.PhotoCropView r1 = r7.photoCropView
            float r1 = r1.getRectSizeY()
            int r2 = r44.getContainerViewHeight()
            float r2 = (float) r2
            float r1 = r1 / r2
            float r0 = java.lang.Math.max(r0, r1)
            r7.scale = r0
            org.telegram.ui.Components.PhotoCropView r0 = r7.photoCropView
            float r0 = r0.getRectX()
            org.telegram.ui.Components.PhotoCropView r1 = r7.photoCropView
            float r1 = r1.getRectSizeX()
            r2 = 1073741824(0x40000000, float:2.0)
            float r1 = r1 / r2
            float r0 = r0 + r1
            int r1 = r44.getContainerViewWidth()
            r3 = 2
            int r1 = r1 / r3
            float r1 = (float) r1
            float r0 = r0 - r1
            r7.translationX = r0
            org.telegram.ui.Components.PhotoCropView r0 = r7.photoCropView
            float r0 = r0.getRectY()
            org.telegram.ui.Components.PhotoCropView r1 = r7.photoCropView
            float r1 = r1.getRectSizeY()
            float r1 = r1 / r2
            float r0 = r0 + r1
            int r1 = r44.getContainerViewHeight()
            int r1 = r1 / r3
            float r1 = (float) r1
            float r0 = r0 - r1
            r7.translationY = r0
            r0 = 1
            r7.zoomAnimation = r0
            org.telegram.ui.Components.PhotoCropView r1 = r7.photoCropView
            r1.onDisappear()
            goto L_0x0812
        L_0x0811:
            r0 = 1
        L_0x0812:
            org.telegram.messenger.ImageReceiver r1 = r7.centerImage
            r2 = 0
            r1.setParentView(r2)
            r7.ignoreDidSetImage = r0
            boolean r1 = r7.isCurrentVideo
            if (r1 == 0) goto L_0x082d
            int r1 = r7.currentEditMode
            if (r1 == r0) goto L_0x082b
            if (r1 != 0) goto L_0x0829
            int r1 = r7.sendPhotoType
            if (r1 != r0) goto L_0x0829
            goto L_0x082b
        L_0x0829:
            r1 = 0
            goto L_0x0833
        L_0x082b:
            r1 = 1
            goto L_0x0833
        L_0x082d:
            int r0 = r7.currentEditMode
            r1 = 2
            if (r0 != r1) goto L_0x0829
            goto L_0x082b
        L_0x0833:
            if (r1 == 0) goto L_0x0845
            org.telegram.messenger.ImageReceiver r0 = r7.centerImage
            r0.setImageBitmap((android.graphics.Bitmap) r6)
            org.telegram.messenger.ImageReceiver r0 = r7.centerImage
            r1 = 1
            r0.setOrientation(r13, r1)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r7.containerView
            r0.requestLayout()
        L_0x0845:
            r7.ignoreDidSetImage = r13
            org.telegram.messenger.ImageReceiver r0 = r7.centerImage
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r7.containerView
            r0.setParentView(r1)
        L_0x084e:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.applyCurrentEditMode():void");
    }

    private void setPhotoChecked() {
        ChatActivity chatActivity;
        TLRPC$Chat currentChat;
        PhotoViewerProvider photoViewerProvider = this.placeProvider;
        if (photoViewerProvider == null) {
            return;
        }
        if (photoViewerProvider.getSelectedPhotos() == null || this.maxSelectedPhotos <= 0 || this.placeProvider.getSelectedPhotos().size() < this.maxSelectedPhotos || this.placeProvider.isPhotoChecked(this.currentIndex)) {
            int photoChecked = this.placeProvider.setPhotoChecked(this.currentIndex, getCurrentVideoEditedInfo());
            boolean isPhotoChecked = this.placeProvider.isPhotoChecked(this.currentIndex);
            this.checkImageView.setChecked(isPhotoChecked, true);
            if (photoChecked >= 0) {
                if (isPhotoChecked) {
                    this.selectedPhotosAdapter.notifyItemInserted(photoChecked);
                    this.selectedPhotosListView.smoothScrollToPosition(photoChecked);
                } else {
                    this.selectedPhotosAdapter.notifyItemRemoved(photoChecked);
                    if (photoChecked == 0) {
                        this.selectedPhotosAdapter.notifyItemChanged(0);
                    }
                }
            }
            updateSelectedCount();
        } else if (this.allowOrder && (chatActivity = this.parentChatActivity) != null && (currentChat = chatActivity.getCurrentChat()) != null && !ChatObject.hasAdminRights(currentChat) && currentChat.slowmode_enabled) {
            AlertsCreator.createSimpleAlert(this.parentActivity, LocaleController.getString("Slowmode", R.string.Slowmode), LocaleController.getString("SlowmodeSelectSendError", R.string.SlowmodeSelectSendError)).show();
        }
    }

    /* access modifiers changed from: private */
    public void updateResetButtonVisibility(boolean z) {
        if (this.resetButton.isClickable() != z) {
            this.resetButton.setClickable(z);
            this.resetButton.setVisibility(0);
            this.resetButton.clearAnimation();
            this.resetButton.animate().alpha(z ? 1.0f : 0.0f).setInterpolator(CubicBezierInterpolator.DEFAULT).setDuration(150).withEndAction(new PhotoViewer$$ExternalSyntheticLambda71(this, z));
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$updateResetButtonVisibility$54(boolean z) {
        if (!z) {
            this.resetButton.setVisibility(8);
        }
    }

    private void createCropView() {
        if (this.photoCropView == null) {
            PhotoCropView photoCropView2 = new PhotoCropView(this.activityContext, this.resourcesProvider);
            this.photoCropView = photoCropView2;
            photoCropView2.setVisibility(8);
            this.photoCropView.onDisappear();
            this.containerView.addView(this.photoCropView, this.containerView.indexOfChild(this.videoTimelineView) - 1, LayoutHelper.createFrame(-1, -1.0f, 51, 0.0f, 0.0f, 0.0f, 48.0f));
            this.photoCropView.setDelegate(new PhotoCropView.PhotoCropViewDelegate() {
                public void onChange(boolean z) {
                    PhotoViewer.this.updateResetButtonVisibility(!z);
                }

                public void onUpdate() {
                    PhotoViewer.this.containerView.invalidate();
                }

                public void onTapUp() {
                    if (PhotoViewer.this.sendPhotoType == 1) {
                        boolean unused = PhotoViewer.this.manuallyPaused = true;
                        PhotoViewer.this.toggleVideoPlayer();
                    }
                }

                public void onVideoThumbClick() {
                    if (PhotoViewer.this.videoPlayer != null) {
                        PhotoViewer.this.videoPlayer.seekTo((long) (((float) PhotoViewer.this.videoPlayer.getDuration()) * PhotoViewer.this.avatarStartProgress));
                        PhotoViewer.this.videoPlayer.pause();
                        PhotoViewer.this.videoTimelineView.setProgress(PhotoViewer.this.avatarStartProgress);
                        PhotoViewer.this.cancelVideoPlayRunnable();
                        AndroidUtilities.runOnUIThread(PhotoViewer.this.videoPlayRunnable = new PhotoViewer$55$$ExternalSyntheticLambda0(this), 860);
                    }
                }

                /* access modifiers changed from: private */
                public /* synthetic */ void lambda$onVideoThumbClick$0() {
                    boolean unused = PhotoViewer.this.manuallyPaused = false;
                    if (PhotoViewer.this.videoPlayer != null) {
                        PhotoViewer.this.videoPlayer.play();
                    }
                    Runnable unused2 = PhotoViewer.this.videoPlayRunnable = null;
                }

                public boolean rotate() {
                    return PhotoViewer.this.cropRotate(-90.0f);
                }

                public boolean mirror() {
                    return PhotoViewer.this.cropMirror();
                }

                public int getVideoThumbX() {
                    return (int) (((float) AndroidUtilities.dp(16.0f)) + (((float) (PhotoViewer.this.videoTimelineView.getMeasuredWidth() - AndroidUtilities.dp(32.0f))) * PhotoViewer.this.avatarStartProgress));
                }
            });
        }
    }

    private void startVideoPlayer() {
        VideoPlayer videoPlayer2;
        if (this.isCurrentVideo && (videoPlayer2 = this.videoPlayer) != null && !videoPlayer2.isPlaying()) {
            if (!this.muteVideo || this.sendPhotoType == 1) {
                this.videoPlayer.setVolume(0.0f);
            }
            this.manuallyPaused = false;
            toggleVideoPlayer();
        }
    }

    private void detectFaces() {
        if (this.centerImage.getAnimation() == null && !this.imagesArrLocals.isEmpty() && this.sendPhotoType != 1) {
            String imageKey = this.centerImage.getImageKey();
            String str = this.currentImageFaceKey;
            if (str == null || !str.equals(imageKey)) {
                this.currentImageHasFace = 0;
                detectFaces(imageKey, this.centerImage.getBitmapSafe(), this.centerImage.getOrientation());
            }
        }
    }

    private void detectFaces(String str, ImageReceiver.BitmapHolder bitmapHolder, int i) {
        if (str != null && bitmapHolder != null && bitmapHolder.bitmap != null) {
            Utilities.globalQueue.postRunnable(new PhotoViewer$$ExternalSyntheticLambda65(this, bitmapHolder, i, str));
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$detectFaces$57(ImageReceiver.BitmapHolder bitmapHolder, int i, String str) {
        FaceDetector faceDetector = null;
        try {
            boolean z = false;
            faceDetector = new FaceDetector.Builder(ApplicationLoader.applicationContext).setMode(0).setLandmarkType(0).setTrackingEnabled(false).build();
            if (faceDetector.isOperational()) {
                SparseArray<Face> detect = faceDetector.detect(new Frame.Builder().setBitmap(bitmapHolder.bitmap).setRotation(i).build());
                if (!(detect == null || detect.size() == 0)) {
                    z = true;
                }
                AndroidUtilities.runOnUIThread(new PhotoViewer$$ExternalSyntheticLambda64(this, str, z));
            } else {
                if (BuildVars.LOGS_ENABLED) {
                    FileLog.e("face detection is not operational");
                }
                AndroidUtilities.runOnUIThread(new PhotoViewer$$ExternalSyntheticLambda66(this, bitmapHolder, str));
            }
        } catch (Exception e) {
            FileLog.e((Throwable) e);
            if (faceDetector == null) {
                return;
            }
        } catch (Throwable th) {
            if (faceDetector != null) {
                faceDetector.release();
            }
            throw th;
        }
        faceDetector.release();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$detectFaces$55(String str, boolean z) {
        if (str.equals(this.centerImage.getImageKey())) {
            this.currentImageHasFace = z ? 1 : 0;
            this.currentImageFaceKey = str;
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$detectFaces$56(ImageReceiver.BitmapHolder bitmapHolder, String str) {
        bitmapHolder.release();
        if (str.equals(this.centerImage.getImageKey())) {
            this.currentImageHasFace = 2;
            this.currentImageFaceKey = str;
        }
    }

    private void switchToEditMode(int i) {
        int i2;
        int i3;
        MediaController.SavedFilterState savedFilterState;
        int i4;
        String str;
        Bitmap bitmap;
        Bitmap bitmap2;
        int i5;
        MediaController.CropState cropState;
        int i6;
        int i7;
        int i8;
        float f;
        float f2;
        int i9;
        MediaController.CropState cropState2;
        int i10;
        int i11;
        final int i12 = i;
        if (this.currentEditMode == i12) {
            return;
        }
        if ((!this.isCurrentVideo || this.photoProgressViews[0].backgroundState == 3 || this.isCurrentVideo || (this.centerImage.getBitmap() != null && this.photoProgressViews[0].backgroundState == -1)) && this.changeModeAnimation == null && this.imageMoveAnimation == null && this.captionEditText.getTag() == null) {
            this.windowView.setClipChildren(i12 == 2);
            int i13 = NUM;
            int color = this.navigationBar.getBackground() instanceof ColorDrawable ? ((ColorDrawable) this.navigationBar.getBackground()).getColor() : NUM;
            if (i12 == 1) {
                i13 = -NUM;
            } else if (i12 == 3) {
                i13 = -16777216;
            }
            this.navigationBar.setVisibility(i12 != 2 ? 0 : 4);
            this.switchingToMode = i12;
            if (i12 == 0) {
                if (this.centerImage.getBitmap() != null) {
                    int bitmapWidth = this.centerImage.getBitmapWidth();
                    int bitmapHeight = this.centerImage.getBitmapHeight();
                    int i14 = this.currentEditMode;
                    if (i14 == 3) {
                        if (this.sendPhotoType != 1) {
                            MediaController.CropState cropState3 = this.editState.cropState;
                            if (cropState3 != null) {
                                int i15 = cropState3.transformRotation;
                                if (i15 == 90 || i15 == 270) {
                                    int i16 = bitmapHeight;
                                    bitmapHeight = bitmapWidth;
                                    bitmapWidth = i16;
                                }
                                bitmapWidth = (int) (((float) bitmapWidth) * cropState3.cropPw);
                                i11 = (int) (((float) bitmapHeight) * cropState3.cropPh);
                                float f3 = (float) bitmapWidth;
                                float f4 = (float) i11;
                                f = Math.min(((float) getContainerViewWidth(0)) / f3, ((float) getContainerViewHeight(0)) / f4);
                                f2 = Math.min(((float) getContainerViewWidth(3)) / f3, ((float) getContainerViewHeight(3)) / f4);
                            }
                        } else if (this.cropTransform.getOrientation() == 90 || this.cropTransform.getOrientation() == 270) {
                            i11 = bitmapWidth;
                            bitmapWidth = bitmapHeight;
                            float var_ = (float) bitmapWidth;
                            float var_ = (float) i11;
                            f = Math.min(((float) getContainerViewWidth(0)) / var_, ((float) getContainerViewHeight(0)) / var_);
                            f2 = Math.min(((float) getContainerViewWidth(3)) / var_, ((float) getContainerViewHeight(3)) / var_);
                        }
                        i11 = bitmapHeight;
                        float var_ = (float) bitmapWidth;
                        float var_ = (float) i11;
                        f = Math.min(((float) getContainerViewWidth(0)) / var_, ((float) getContainerViewHeight(0)) / var_);
                        f2 = Math.min(((float) getContainerViewWidth(3)) / var_, ((float) getContainerViewHeight(3)) / var_);
                    } else {
                        if (i14 != 1 && (cropState2 = this.editState.cropState) != null && ((i10 = cropState2.transformRotation) == 90 || i10 == 270)) {
                            float f5 = (float) bitmapHeight;
                            float containerViewWidth = ((float) getContainerViewWidth()) / f5;
                            float f6 = (float) bitmapWidth;
                            if (containerViewWidth * f6 > ((float) getContainerViewHeight())) {
                                containerViewWidth = ((float) getContainerViewHeight()) / f6;
                            }
                            this.scale = 1.0f / (containerViewWidth / Math.min(((float) getContainerViewWidth()) / f6, ((float) getContainerViewHeight()) / f5));
                        } else if (this.sendPhotoType == 1 && (this.cropTransform.getOrientation() == 90 || this.cropTransform.getOrientation() == 270)) {
                            float f7 = (float) bitmapHeight;
                            float containerViewWidth2 = ((float) getContainerViewWidth()) / f7;
                            float f8 = (float) bitmapWidth;
                            if (containerViewWidth2 * f8 > ((float) getContainerViewHeight())) {
                                containerViewWidth2 = ((float) getContainerViewHeight()) / f8;
                            }
                            this.scale = 1.0f / ((((this.cropTransform.getScale() / this.cropTransform.getTrueCropScale()) * containerViewWidth2) / Math.min(((float) getContainerViewWidth()) / f8, ((float) getContainerViewHeight()) / f7)) / this.cropTransform.getMinScale());
                        }
                        MediaController.CropState cropState4 = this.editState.cropState;
                        if (cropState4 != null) {
                            int i17 = cropState4.transformRotation;
                            if (i17 == 90 || i17 == 270) {
                                int i18 = bitmapHeight;
                                bitmapHeight = bitmapWidth;
                                bitmapWidth = i18;
                            }
                            bitmapWidth = (int) (((float) bitmapWidth) * cropState4.cropPw);
                            i9 = (int) (((float) bitmapHeight) * cropState4.cropPh);
                        } else if (this.sendPhotoType == 1 && (this.cropTransform.getOrientation() == 90 || this.cropTransform.getOrientation() == 270)) {
                            i9 = bitmapWidth;
                            bitmapWidth = bitmapHeight;
                        } else {
                            i9 = bitmapHeight;
                        }
                        float f9 = (float) bitmapWidth;
                        float var_ = (float) i9;
                        float min = Math.min(((float) getContainerViewWidth()) / f9, ((float) getContainerViewHeight()) / var_);
                        if (this.sendPhotoType == 1) {
                            f = getCropFillScale(this.cropTransform.getOrientation() == 90 || this.cropTransform.getOrientation() == 270);
                        } else {
                            f = Math.min(((float) getContainerViewWidth(0)) / f9, ((float) getContainerViewHeight(0)) / var_);
                        }
                        f2 = min;
                    }
                    this.animateToScale = f / f2;
                    this.animateToX = 0.0f;
                    this.translationX = (float) ((getLeftInset() / 2) - (getRightInset() / 2));
                    if (this.sendPhotoType == 1) {
                        int i19 = this.currentEditMode;
                        if (i19 == 2) {
                            this.animateToY = (float) AndroidUtilities.dp(36.0f);
                        } else if (i19 == 3) {
                            this.animateToY = (float) (-AndroidUtilities.dp(12.0f));
                        }
                    } else {
                        int i20 = this.currentEditMode;
                        if (i20 == 1) {
                            this.animateToY = (float) AndroidUtilities.dp(56.0f);
                        } else if (i20 == 2) {
                            this.animateToY = (float) AndroidUtilities.dp(93.0f);
                        } else if (i20 == 3) {
                            this.animateToY = (float) AndroidUtilities.dp(44.0f);
                        }
                        if (isStatusBarVisible()) {
                            this.animateToY -= (float) (AndroidUtilities.statusBarHeight / 2);
                        }
                    }
                    this.animationStartTime = System.currentTimeMillis();
                    this.zoomAnimation = true;
                }
                this.padImageForHorizontalInsets = false;
                this.imageMoveAnimation = new AnimatorSet();
                ArrayList arrayList = new ArrayList(4);
                int i21 = this.currentEditMode;
                if (i21 == 1) {
                    arrayList.add(ObjectAnimator.ofFloat(this.editorDoneLayout, View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(48.0f)}));
                    i8 = 2;
                    arrayList.add(ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}));
                    arrayList.add(ObjectAnimator.ofFloat(this.photoCropView, View.ALPHA, new float[]{0.0f}));
                    ValueAnimator ofFloat = ValueAnimator.ofFloat(new float[]{0.0f, 1.0f});
                    ofFloat.addUpdateListener(new PhotoViewer$$ExternalSyntheticLambda5(this));
                    arrayList.add(ofFloat);
                } else {
                    if (i21 == 2) {
                        this.photoFilterView.shutdown();
                        arrayList.add(ObjectAnimator.ofFloat(this.photoFilterView.getToolsView(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(186.0f)}));
                        arrayList.add(ObjectAnimator.ofFloat(this.photoFilterView.getCurveControl(), View.ALPHA, new float[]{0.0f}));
                        arrayList.add(ObjectAnimator.ofFloat(this.photoFilterView.getBlurControl(), View.ALPHA, new float[]{0.0f}));
                        arrayList.add(ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}));
                    } else if (i21 == 3) {
                        this.paintingOverlay.showAll();
                        this.containerView.invalidate();
                        this.photoPaintView.shutdown();
                        arrayList.add(ObjectAnimator.ofFloat(this.photoPaintView.getToolsView(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(126.0f)}));
                        arrayList.add(ObjectAnimator.ofFloat(this.photoPaintView.getColorPickerBackground(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(126.0f)}));
                        arrayList.add(ObjectAnimator.ofFloat(this.photoPaintView.getColorPicker(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(126.0f)}));
                        i8 = 2;
                        arrayList.add(ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}));
                    }
                    i8 = 2;
                }
                View view = this.navigationBar;
                ArgbEvaluator argbEvaluator = new ArgbEvaluator();
                Object[] objArr = new Object[i8];
                objArr[0] = Integer.valueOf(color);
                objArr[1] = Integer.valueOf(i13);
                arrayList.add(ObjectAnimator.ofObject(view, "backgroundColor", argbEvaluator, objArr));
                this.imageMoveAnimation.playTogether(arrayList);
                this.imageMoveAnimation.setDuration(200);
                this.imageMoveAnimation.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animator) {
                        if (PhotoViewer.this.currentEditMode == 1) {
                            PhotoViewer.this.photoCropView.onDisappear();
                            PhotoViewer.this.photoCropView.onHide();
                            PhotoViewer.this.editorDoneLayout.setVisibility(8);
                            PhotoViewer.this.photoCropView.setVisibility(8);
                            PhotoViewer.this.photoCropView.cropView.areaView.setRotationScaleTranslation(0.0f, 1.0f, 0.0f, 0.0f);
                        } else if (PhotoViewer.this.currentEditMode == 2) {
                            try {
                                PhotoViewer.this.containerView.removeView(PhotoViewer.this.photoFilterView);
                            } catch (Exception e) {
                                FileLog.e((Throwable) e);
                            }
                            PhotoFilterView unused = PhotoViewer.this.photoFilterView = null;
                        } else if (PhotoViewer.this.currentEditMode == 3) {
                            try {
                                PhotoViewer.this.containerView.removeView(PhotoViewer.this.photoPaintView);
                            } catch (Exception e2) {
                                FileLog.e((Throwable) e2);
                            }
                            PhotoPaintView unused2 = PhotoViewer.this.photoPaintView = null;
                        }
                        AnimatorSet unused3 = PhotoViewer.this.imageMoveAnimation = null;
                        int unused4 = PhotoViewer.this.currentEditMode = i12;
                        int unused5 = PhotoViewer.this.switchingToMode = -1;
                        boolean unused6 = PhotoViewer.this.applying = false;
                        if (PhotoViewer.this.sendPhotoType == 1) {
                            PhotoViewer.this.photoCropView.setVisibility(0);
                        }
                        float unused7 = PhotoViewer.this.animateToScale = 1.0f;
                        float unused8 = PhotoViewer.this.animateToX = 0.0f;
                        float unused9 = PhotoViewer.this.animateToY = 0.0f;
                        float unused10 = PhotoViewer.this.scale = 1.0f;
                        PhotoViewer photoViewer = PhotoViewer.this;
                        photoViewer.updateMinMax(photoViewer.scale);
                        PhotoViewer.this.containerView.invalidate();
                        if (PhotoViewer.this.savedState != null) {
                            PhotoViewer.this.savedState.restore();
                            SavedState unused11 = PhotoViewer.this.savedState = null;
                            ActionBarToggleParams enableStatusBarAnimation = new ActionBarToggleParams().enableStatusBarAnimation(false);
                            PhotoViewer.this.toggleActionBar(false, false, enableStatusBarAnimation);
                            PhotoViewer.this.toggleActionBar(true, true, enableStatusBarAnimation);
                            return;
                        }
                        AnimatorSet animatorSet = new AnimatorSet();
                        ArrayList arrayList = new ArrayList();
                        arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.pickerView, View.TRANSLATION_Y, new float[]{0.0f}));
                        arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.pickerViewSendButton, View.TRANSLATION_Y, new float[]{0.0f}));
                        if (PhotoViewer.this.sendPhotoType != 1) {
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.actionBar, View.TRANSLATION_Y, new float[]{0.0f}));
                        }
                        if (PhotoViewer.this.needCaptionLayout) {
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.captionTextViewSwitcher, View.TRANSLATION_Y, new float[]{0.0f}));
                        }
                        if (PhotoViewer.this.sendPhotoType == 0 || PhotoViewer.this.sendPhotoType == 4) {
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.checkImageView, View.ALPHA, new float[]{1.0f}));
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.photosCounterView, View.ALPHA, new float[]{1.0f}));
                        } else if (PhotoViewer.this.sendPhotoType == 1) {
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.photoCropView, View.ALPHA, new float[]{1.0f}));
                        }
                        if (PhotoViewer.this.cameraItem.getTag() != null) {
                            PhotoViewer.this.cameraItem.setVisibility(0);
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.cameraItem, View.ALPHA, new float[]{1.0f}));
                        }
                        if (PhotoViewer.this.muteItem.getTag() != null) {
                            PhotoViewer.this.muteItem.setVisibility(0);
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.muteItem, View.ALPHA, new float[]{1.0f}));
                        }
                        if (PhotoViewer.this.navigationBar != null) {
                            PhotoViewer.this.navigationBar.setVisibility(0);
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.navigationBar, View.ALPHA, new float[]{1.0f}));
                        }
                        animatorSet.playTogether(arrayList);
                        animatorSet.setDuration(200);
                        animatorSet.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationStart(Animator animator) {
                                PhotoViewer.this.pickerView.setVisibility(0);
                                PhotoViewer.this.pickerViewSendButton.setVisibility(0);
                                PhotoViewer.this.actionBar.setVisibility(0);
                                if (PhotoViewer.this.needCaptionLayout) {
                                    PhotoViewer.this.captionTextViewSwitcher.setVisibility(PhotoViewer.this.captionTextViewSwitcher.getTag() != null ? 0 : 4);
                                }
                                if (PhotoViewer.this.sendPhotoType == 0 || PhotoViewer.this.sendPhotoType == 4 || ((PhotoViewer.this.sendPhotoType == 2 || PhotoViewer.this.sendPhotoType == 5) && PhotoViewer.this.imagesArrLocals.size() > 1)) {
                                    PhotoViewer.this.checkImageView.setVisibility(0);
                                    PhotoViewer.this.photosCounterView.setVisibility(0);
                                }
                            }
                        });
                        animatorSet.start();
                    }
                });
                this.imageMoveAnimation.start();
                return;
            }
            float var_ = 154.0f;
            if (i12 == 1) {
                startVideoPlayer();
                createCropView();
                this.previousHasTransform = this.cropTransform.hasViewTransform();
                this.previousCropPx = this.cropTransform.getCropPx();
                this.previousCropPy = this.cropTransform.getCropPy();
                this.previousCropScale = this.cropTransform.getScale();
                this.previousCropRotation = this.cropTransform.getRotation();
                this.previousCropOrientation = this.cropTransform.getOrientation();
                this.previousCropPw = this.cropTransform.getCropPw();
                this.previousCropPh = this.cropTransform.getCropPh();
                this.previousCropMirrored = this.cropTransform.isMirrored();
                this.photoCropView.onAppear();
                this.editorDoneLayout.doneButton.setText(LocaleController.getString("Crop", R.string.Crop));
                this.editorDoneLayout.doneButton.setTextColor(getThemedColor("dialogFloatingButton"));
                this.changeModeAnimation = new AnimatorSet();
                ArrayList arrayList2 = new ArrayList();
                FrameLayout frameLayout = this.pickerView;
                Property property = View.TRANSLATION_Y;
                float[] fArr = new float[2];
                fArr[0] = 0.0f;
                fArr[1] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                arrayList2.add(ObjectAnimator.ofFloat(frameLayout, property, fArr));
                ImageView imageView = this.pickerViewSendButton;
                Property property2 = View.TRANSLATION_Y;
                float[] fArr2 = new float[2];
                fArr2[0] = 0.0f;
                fArr2[1] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                arrayList2.add(ObjectAnimator.ofFloat(imageView, property2, fArr2));
                ActionBar actionBar2 = this.actionBar;
                arrayList2.add(ObjectAnimator.ofFloat(actionBar2, View.TRANSLATION_Y, new float[]{0.0f, (float) (-actionBar2.getHeight())}));
                arrayList2.add(ObjectAnimator.ofObject(this.navigationBar, "backgroundColor", new ArgbEvaluator(), new Object[]{Integer.valueOf(color), Integer.valueOf(i13)}));
                if (this.needCaptionLayout) {
                    CaptionTextViewSwitcher captionTextViewSwitcher2 = this.captionTextViewSwitcher;
                    Property property3 = View.TRANSLATION_Y;
                    float[] fArr3 = new float[2];
                    fArr3[0] = 0.0f;
                    if (!this.isCurrentVideo) {
                        var_ = 96.0f;
                    }
                    fArr3[1] = (float) AndroidUtilities.dp(var_);
                    arrayList2.add(ObjectAnimator.ofFloat(captionTextViewSwitcher2, property3, fArr3));
                }
                int i22 = this.sendPhotoType;
                if (i22 == 0 || i22 == 4) {
                    i7 = 2;
                    arrayList2.add(ObjectAnimator.ofFloat(this.checkImageView, View.ALPHA, new float[]{1.0f, 0.0f}));
                    arrayList2.add(ObjectAnimator.ofFloat(this.photosCounterView, View.ALPHA, new float[]{1.0f, 0.0f}));
                } else {
                    i7 = 2;
                }
                if (this.selectedPhotosListView.getVisibility() == 0) {
                    float[] fArr4 = new float[i7];
                    // fill-array-data instruction
                    fArr4[0] = NUM;
                    fArr4[1] = 0;
                    arrayList2.add(ObjectAnimator.ofFloat(this.selectedPhotosListView, View.ALPHA, fArr4));
                }
                if (this.cameraItem.getTag() != null) {
                    float[] fArr5 = new float[i7];
                    // fill-array-data instruction
                    fArr5[0] = NUM;
                    fArr5[1] = 0;
                    arrayList2.add(ObjectAnimator.ofFloat(this.cameraItem, View.ALPHA, fArr5));
                }
                if (this.muteItem.getTag() != null) {
                    float[] fArr6 = new float[i7];
                    // fill-array-data instruction
                    fArr6[0] = NUM;
                    fArr6[1] = 0;
                    arrayList2.add(ObjectAnimator.ofFloat(this.muteItem, View.ALPHA, fArr6));
                }
                View view2 = this.navigationBar;
                if (view2 != null) {
                    arrayList2.add(ObjectAnimator.ofFloat(view2, View.ALPHA, new float[]{1.0f}));
                }
                this.changeModeAnimation.playTogether(arrayList2);
                this.changeModeAnimation.setDuration(200);
                this.changeModeAnimation.addListener(new AnimatorListenerAdapter() {
                    /* JADX WARNING: type inference failed for: r1v66, types: [android.view.TextureView] */
                    /* JADX WARNING: Multi-variable type inference failed */
                    /* Code decompiled incorrectly, please refer to instructions dump. */
                    public void onAnimationEnd(android.animation.Animator r20) {
                        /*
                            r19 = this;
                            r0 = r19
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            r2 = 0
                            android.animation.AnimatorSet unused = r1.changeModeAnimation = r2
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            android.widget.FrameLayout r1 = r1.pickerView
                            r3 = 8
                            r1.setVisibility(r3)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            android.widget.ImageView r1 = r1.pickerViewSendButton
                            r1.setVisibility(r3)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            android.widget.ImageView r1 = r1.cameraItem
                            r1.setVisibility(r3)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            android.widget.ImageView r1 = r1.muteItem
                            r1.setVisibility(r3)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$SelectedPhotosListView r1 = r1.selectedPhotosListView
                            r1.setVisibility(r3)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$SelectedPhotosListView r1 = r1.selectedPhotosListView
                            r4 = 0
                            r1.setAlpha(r4)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$SelectedPhotosListView r1 = r1.selectedPhotosListView
                            r5 = 1092616192(0x41200000, float:10.0)
                            int r5 = org.telegram.messenger.AndroidUtilities.dp(r5)
                            int r5 = -r5
                            float r5 = (float) r5
                            r1.setTranslationY(r5)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$CounterView r1 = r1.photosCounterView
                            r1.setRotationX(r4)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$SelectedPhotosListView r1 = r1.selectedPhotosListView
                            r5 = 0
                            r1.setEnabled(r5)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            boolean unused = r1.isPhotosListViewVisible = r5
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            boolean r1 = r1.needCaptionLayout
                            r6 = 4
                            if (r1 == 0) goto L_0x007c
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r1 = r1.captionTextViewSwitcher
                            r1.setVisibility(r6)
                        L_0x007c:
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            int r1 = r1.sendPhotoType
                            r7 = 2
                            r8 = 1
                            if (r1 == 0) goto L_0x00ab
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            int r1 = r1.sendPhotoType
                            if (r1 == r6) goto L_0x00ab
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            int r1 = r1.sendPhotoType
                            if (r1 == r7) goto L_0x009f
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            int r1 = r1.sendPhotoType
                            r6 = 5
                            if (r1 != r6) goto L_0x00bd
                        L_0x009f:
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            java.util.ArrayList r1 = r1.imagesArrLocals
                            int r1 = r1.size()
                            if (r1 <= r8) goto L_0x00bd
                        L_0x00ab:
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.Components.CheckBox r1 = r1.checkImageView
                            r1.setVisibility(r3)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$CounterView r1 = r1.photosCounterView
                            r1.setVisibility(r3)
                        L_0x00bd:
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.messenger.ImageReceiver r1 = r1.centerImage
                            android.graphics.Bitmap r10 = r1.getBitmap()
                            if (r10 != 0) goto L_0x00d1
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            boolean r1 = r1.isCurrentVideo
                            if (r1 == 0) goto L_0x0209
                        L_0x00d1:
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.Components.PhotoCropView r9 = r1.photoCropView
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.messenger.ImageReceiver r1 = r1.centerImage
                            int r11 = r1.getOrientation()
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            int r1 = r1.sendPhotoType
                            if (r1 == r8) goto L_0x00eb
                            r12 = 1
                            goto L_0x00ec
                        L_0x00eb:
                            r12 = 0
                        L_0x00ec:
                            r13 = 0
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.Components.PaintingOverlay r14 = r1.paintingOverlay
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.Components.Crop.CropTransform r15 = r1.cropTransform
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            boolean r1 = r1.isCurrentVideo
                            if (r1 == 0) goto L_0x010a
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            android.view.TextureView r1 = r1.videoTextureView
                            r2 = r1
                            org.telegram.ui.Components.VideoEditTextureView r2 = (org.telegram.ui.Components.VideoEditTextureView) r2
                        L_0x010a:
                            r16 = r2
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$EditState r1 = r1.editState
                            org.telegram.messenger.MediaController$CropState r1 = r1.cropState
                            r17 = r1
                            r9.setBitmap(r10, r11, r12, r13, r14, r15, r16, r17)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.Components.PhotoCropView r1 = r1.photoCropView
                            r1.onDisappear()
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            org.telegram.messenger.ImageReceiver r1 = r1.centerImage
                            int r1 = r1.getBitmapWidth()
                            org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                            org.telegram.messenger.ImageReceiver r2 = r2.centerImage
                            int r2 = r2.getBitmapHeight()
                            org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$EditState r3 = r3.editState
                            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
                            if (r3 == 0) goto L_0x017d
                            org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$EditState r3 = r3.editState
                            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
                            int r3 = r3.transformRotation
                            r6 = 90
                            if (r3 == r6) goto L_0x015c
                            org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$EditState r3 = r3.editState
                            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
                            int r3 = r3.transformRotation
                            r6 = 270(0x10e, float:3.78E-43)
                            if (r3 != r6) goto L_0x0161
                        L_0x015c:
                            r18 = r2
                            r2 = r1
                            r1 = r18
                        L_0x0161:
                            float r1 = (float) r1
                            org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$EditState r3 = r3.editState
                            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
                            float r3 = r3.cropPw
                            float r1 = r1 * r3
                            int r1 = (int) r1
                            float r2 = (float) r2
                            org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.PhotoViewer$EditState r3 = r3.editState
                            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
                            float r3 = r3.cropPh
                            float r2 = r2 * r3
                            int r2 = (int) r2
                        L_0x017d:
                            org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                            int r3 = r3.getContainerViewWidth()
                            float r3 = (float) r3
                            float r1 = (float) r1
                            float r3 = r3 / r1
                            org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                            int r6 = r6.getContainerViewHeight()
                            float r6 = (float) r6
                            float r2 = (float) r2
                            float r6 = r6 / r2
                            org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                            int r9 = r9.getContainerViewWidth(r8)
                            float r9 = (float) r9
                            float r9 = r9 / r1
                            org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                            int r10 = r10.getContainerViewHeight(r8)
                            float r10 = (float) r10
                            float r10 = r10 / r2
                            float r3 = java.lang.Math.min(r3, r6)
                            float r6 = java.lang.Math.min(r9, r10)
                            org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                            int r9 = r9.sendPhotoType
                            if (r9 != r8) goto L_0x01c7
                            org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                            int r6 = r6.getContainerViewWidth(r8)
                            org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                            int r9 = r9.getContainerViewHeight(r8)
                            int r6 = java.lang.Math.min(r6, r9)
                            float r6 = (float) r6
                            float r1 = r6 / r1
                            float r6 = r6 / r2
                            float r6 = java.lang.Math.max(r1, r6)
                        L_0x01c7:
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            float r6 = r6 / r3
                            float unused = r1.animateToScale = r6
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            int r2 = r1.getLeftInset()
                            int r2 = r2 / r7
                            org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                            int r3 = r3.getRightInset()
                            int r3 = r3 / r7
                            int r2 = r2 - r3
                            float r2 = (float) r2
                            float unused = r1.animateToX = r2
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            r2 = 1113587712(0x42600000, float:56.0)
                            int r2 = org.telegram.messenger.AndroidUtilities.dp(r2)
                            int r2 = -r2
                            org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                            boolean r3 = r3.isStatusBarVisible()
                            if (r3 == 0) goto L_0x01f5
                            int r3 = org.telegram.messenger.AndroidUtilities.statusBarHeight
                            int r3 = r3 / r7
                            goto L_0x01f6
                        L_0x01f5:
                            r3 = 0
                        L_0x01f6:
                            int r2 = r2 + r3
                            float r2 = (float) r2
                            float unused = r1.animateToY = r2
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            long r2 = java.lang.System.currentTimeMillis()
                            long unused = r1.animationStartTime = r2
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            boolean unused = r1.zoomAnimation = r8
                        L_0x0209:
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            android.animation.AnimatorSet r2 = new android.animation.AnimatorSet
                            r2.<init>()
                            android.animation.AnimatorSet unused = r1.imageMoveAnimation = r2
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            android.animation.AnimatorSet r1 = r1.imageMoveAnimation
                            r2 = 3
                            android.animation.Animator[] r2 = new android.animation.Animator[r2]
                            org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.Components.PickerBottomLayoutViewer r3 = r3.editorDoneLayout
                            android.util.Property r6 = android.view.View.TRANSLATION_Y
                            float[] r9 = new float[r7]
                            r10 = 1111490560(0x42400000, float:48.0)
                            int r10 = org.telegram.messenger.AndroidUtilities.dp(r10)
                            float r10 = (float) r10
                            r9[r5] = r10
                            r9[r8] = r4
                            android.animation.ObjectAnimator r3 = android.animation.ObjectAnimator.ofFloat(r3, r6, r9)
                            r2[r5] = r3
                            org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                            android.util.Property<org.telegram.ui.PhotoViewer, java.lang.Float> r4 = org.telegram.ui.Components.AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE
                            float[] r5 = new float[r7]
                            r5 = {0, NUM} // fill-array
                            android.animation.ObjectAnimator r3 = android.animation.ObjectAnimator.ofFloat(r3, r4, r5)
                            r2[r8] = r3
                            org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                            org.telegram.ui.Components.PhotoCropView r3 = r3.photoCropView
                            android.util.Property r4 = android.view.View.ALPHA
                            float[] r5 = new float[r7]
                            r5 = {0, NUM} // fill-array
                            android.animation.ObjectAnimator r3 = android.animation.ObjectAnimator.ofFloat(r3, r4, r5)
                            r2[r7] = r3
                            r1.playTogether(r2)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            android.animation.AnimatorSet r1 = r1.imageMoveAnimation
                            r2 = 200(0xc8, double:9.9E-322)
                            r1.setDuration(r2)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            android.animation.AnimatorSet r1 = r1.imageMoveAnimation
                            org.telegram.ui.PhotoViewer$57$1 r2 = new org.telegram.ui.PhotoViewer$57$1
                            r2.<init>()
                            r1.addListener(r2)
                            org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                            android.animation.AnimatorSet r1 = r1.imageMoveAnimation
                            r1.start()
                            return
                        */
                        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.AnonymousClass57.onAnimationEnd(android.animation.Animator):void");
                    }
                });
                this.changeModeAnimation.start();
            } else if (i12 == 2) {
                startVideoPlayer();
                if (this.photoFilterView == null) {
                    PaintingOverlay paintingOverlay2 = null;
                    if (!this.imagesArrLocals.isEmpty()) {
                        Object obj = this.imagesArrLocals.get(this.currentIndex);
                        i4 = obj instanceof MediaController.PhotoEntry ? ((MediaController.PhotoEntry) obj).orientation : 0;
                        MediaController.MediaEditState mediaEditState = (MediaController.MediaEditState) obj;
                        MediaController.SavedFilterState savedFilterState2 = mediaEditState.savedFilterState;
                        str = mediaEditState.getPath();
                        savedFilterState = savedFilterState2;
                    } else {
                        str = null;
                        savedFilterState = null;
                        i4 = 0;
                    }
                    if (this.videoTextureView != null) {
                        bitmap2 = null;
                    } else {
                        if (savedFilterState == null) {
                            bitmap = this.centerImage.getBitmap();
                            i4 = this.centerImage.getOrientation();
                        } else {
                            bitmap = BitmapFactory.decodeFile(str);
                        }
                        bitmap2 = bitmap;
                    }
                    int i23 = i4;
                    if (this.sendPhotoType == 1) {
                        i5 = 1;
                    } else if (this.isCurrentVideo || (i6 = this.currentImageHasFace) == 2) {
                        i5 = 2;
                    } else {
                        i5 = i6 == 1 ? 1 : 0;
                    }
                    Activity activity = this.parentActivity;
                    TextureView textureView = this.videoTextureView;
                    VideoEditTextureView videoEditTextureView = textureView != null ? (VideoEditTextureView) textureView : null;
                    if (!this.isCurrentVideo) {
                        paintingOverlay2 = this.paintingOverlay;
                    }
                    PhotoFilterView photoFilterView2 = new PhotoFilterView(activity, videoEditTextureView, bitmap2, i23, savedFilterState, paintingOverlay2, i5, textureView == null && (((cropState = this.editState.cropState) != null && cropState.mirrored) || this.cropTransform.isMirrored()), this.resourcesProvider);
                    this.photoFilterView = photoFilterView2;
                    this.containerView.addView(photoFilterView2, LayoutHelper.createFrame(-1, -1.0f));
                    this.photoFilterView.getDoneTextView().setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda22(this));
                    this.photoFilterView.getCancelTextView().setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda33(this));
                    this.photoFilterView.getToolsView().setTranslationY((float) AndroidUtilities.dp(186.0f));
                }
                this.changeModeAnimation = new AnimatorSet();
                ArrayList arrayList3 = new ArrayList();
                FrameLayout frameLayout2 = this.pickerView;
                Property property4 = View.TRANSLATION_Y;
                float[] fArr7 = new float[2];
                fArr7[0] = 0.0f;
                fArr7[1] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                arrayList3.add(ObjectAnimator.ofFloat(frameLayout2, property4, fArr7));
                ImageView imageView2 = this.pickerViewSendButton;
                Property property5 = View.TRANSLATION_Y;
                float[] fArr8 = new float[2];
                fArr8[0] = 0.0f;
                if (!this.isCurrentVideo) {
                    var_ = 96.0f;
                }
                fArr8[1] = (float) AndroidUtilities.dp(var_);
                arrayList3.add(ObjectAnimator.ofFloat(imageView2, property5, fArr8));
                ActionBar actionBar3 = this.actionBar;
                arrayList3.add(ObjectAnimator.ofFloat(actionBar3, View.TRANSLATION_Y, new float[]{0.0f, (float) (-actionBar3.getHeight())}));
                int i24 = this.sendPhotoType;
                if (i24 == 0 || i24 == 4) {
                    i3 = 2;
                    arrayList3.add(ObjectAnimator.ofFloat(this.checkImageView, View.ALPHA, new float[]{1.0f, 0.0f}));
                    arrayList3.add(ObjectAnimator.ofFloat(this.photosCounterView, View.ALPHA, new float[]{1.0f, 0.0f}));
                } else if (i24 == 1) {
                    i3 = 2;
                    arrayList3.add(ObjectAnimator.ofFloat(this.photoCropView, View.ALPHA, new float[]{1.0f, 0.0f}));
                } else {
                    i3 = 2;
                }
                if (this.selectedPhotosListView.getVisibility() == 0) {
                    float[] fArr9 = new float[i3];
                    // fill-array-data instruction
                    fArr9[0] = NUM;
                    fArr9[1] = 0;
                    arrayList3.add(ObjectAnimator.ofFloat(this.selectedPhotosListView, View.ALPHA, fArr9));
                }
                if (this.cameraItem.getTag() != null) {
                    float[] fArr10 = new float[i3];
                    // fill-array-data instruction
                    fArr10[0] = NUM;
                    fArr10[1] = 0;
                    arrayList3.add(ObjectAnimator.ofFloat(this.cameraItem, View.ALPHA, fArr10));
                }
                if (this.muteItem.getTag() != null) {
                    float[] fArr11 = new float[i3];
                    // fill-array-data instruction
                    fArr11[0] = NUM;
                    fArr11[1] = 0;
                    arrayList3.add(ObjectAnimator.ofFloat(this.muteItem, View.ALPHA, fArr11));
                }
                View view3 = this.navigationBar;
                ArgbEvaluator argbEvaluator2 = new ArgbEvaluator();
                Object[] objArr2 = new Object[i3];
                objArr2[0] = Integer.valueOf(color);
                objArr2[1] = Integer.valueOf(i13);
                arrayList3.add(ObjectAnimator.ofObject(view3, "backgroundColor", argbEvaluator2, objArr2));
                this.changeModeAnimation.playTogether(arrayList3);
                this.changeModeAnimation.setDuration(200);
                this.changeModeAnimation.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animator) {
                        float f;
                        AnimatorSet unused = PhotoViewer.this.changeModeAnimation = null;
                        PhotoViewer.this.pickerView.setVisibility(8);
                        PhotoViewer.this.pickerViewSendButton.setVisibility(8);
                        PhotoViewer.this.actionBar.setVisibility(8);
                        PhotoViewer.this.cameraItem.setVisibility(8);
                        PhotoViewer.this.muteItem.setVisibility(8);
                        if (PhotoViewer.this.photoCropView != null) {
                            PhotoViewer.this.photoCropView.setVisibility(4);
                        }
                        PhotoViewer.this.selectedPhotosListView.setVisibility(8);
                        PhotoViewer.this.selectedPhotosListView.setAlpha(0.0f);
                        PhotoViewer.this.selectedPhotosListView.setTranslationY((float) (-AndroidUtilities.dp(10.0f)));
                        PhotoViewer.this.photosCounterView.setRotationX(0.0f);
                        PhotoViewer.this.selectedPhotosListView.setEnabled(false);
                        boolean unused2 = PhotoViewer.this.isPhotosListViewVisible = false;
                        if (PhotoViewer.this.needCaptionLayout) {
                            PhotoViewer.this.captionTextViewSwitcher.setVisibility(4);
                        }
                        if (PhotoViewer.this.sendPhotoType == 0 || PhotoViewer.this.sendPhotoType == 4 || ((PhotoViewer.this.sendPhotoType == 2 || PhotoViewer.this.sendPhotoType == 5) && PhotoViewer.this.imagesArrLocals.size() > 1)) {
                            PhotoViewer.this.checkImageView.setVisibility(8);
                            PhotoViewer.this.photosCounterView.setVisibility(8);
                        }
                        if (PhotoViewer.this.centerImage.getBitmap() != null) {
                            float bitmapWidth = (float) PhotoViewer.this.centerImage.getBitmapWidth();
                            float bitmapHeight = (float) PhotoViewer.this.centerImage.getBitmapHeight();
                            float min = Math.min(((float) PhotoViewer.this.getContainerViewWidth(2)) / bitmapWidth, ((float) PhotoViewer.this.getContainerViewHeight(2)) / bitmapHeight);
                            if (PhotoViewer.this.sendPhotoType == 1) {
                                float unused3 = PhotoViewer.this.animateToY = (float) (-AndroidUtilities.dp(36.0f));
                                f = PhotoViewer.this.getCropFillScale(false);
                            } else {
                                float unused4 = PhotoViewer.this.animateToY = (float) ((-AndroidUtilities.dp(93.0f)) + (PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight / 2 : 0));
                                if (PhotoViewer.this.editState.cropState == null || !(PhotoViewer.this.editState.cropState.transformRotation == 90 || PhotoViewer.this.editState.cropState.transformRotation == 270)) {
                                    f = Math.min(((float) PhotoViewer.this.getContainerViewWidth()) / bitmapWidth, ((float) PhotoViewer.this.getContainerViewHeight()) / bitmapHeight);
                                } else {
                                    f = Math.min(((float) PhotoViewer.this.getContainerViewWidth()) / bitmapHeight, ((float) PhotoViewer.this.getContainerViewHeight()) / bitmapWidth);
                                }
                            }
                            float unused5 = PhotoViewer.this.animateToScale = min / f;
                            PhotoViewer photoViewer = PhotoViewer.this;
                            float unused6 = photoViewer.animateToX = (float) ((photoViewer.getLeftInset() / 2) - (PhotoViewer.this.getRightInset() / 2));
                            long unused7 = PhotoViewer.this.animationStartTime = System.currentTimeMillis();
                            boolean unused8 = PhotoViewer.this.zoomAnimation = true;
                        }
                        AnimatorSet unused9 = PhotoViewer.this.imageMoveAnimation = new AnimatorSet();
                        PhotoViewer.this.imageMoveAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.photoFilterView.getToolsView(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(186.0f), 0.0f})});
                        PhotoViewer.this.imageMoveAnimation.setDuration(200);
                        PhotoViewer.this.imageMoveAnimation.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationStart(Animator animator) {
                            }

                            public void onAnimationEnd(Animator animator) {
                                PhotoViewer.this.photoFilterView.init();
                                AnimatorSet unused = PhotoViewer.this.imageMoveAnimation = null;
                                AnonymousClass58 r3 = AnonymousClass58.this;
                                int unused2 = PhotoViewer.this.currentEditMode = i12;
                                int unused3 = PhotoViewer.this.switchingToMode = -1;
                                float unused4 = PhotoViewer.this.animateToScale = 1.0f;
                                float unused5 = PhotoViewer.this.animateToX = 0.0f;
                                float unused6 = PhotoViewer.this.animateToY = 0.0f;
                                float unused7 = PhotoViewer.this.scale = 1.0f;
                                PhotoViewer photoViewer = PhotoViewer.this;
                                photoViewer.updateMinMax(photoViewer.scale);
                                boolean unused8 = PhotoViewer.this.padImageForHorizontalInsets = true;
                                PhotoViewer.this.containerView.invalidate();
                            }
                        });
                        PhotoViewer.this.imageMoveAnimation.start();
                    }
                });
                this.changeModeAnimation.start();
            } else if (i12 == 3) {
                startVideoPlayer();
                createPaintView();
                this.changeModeAnimation = new AnimatorSet();
                ArrayList arrayList4 = new ArrayList();
                FrameLayout frameLayout3 = this.pickerView;
                Property property6 = View.TRANSLATION_Y;
                float[] fArr12 = new float[1];
                fArr12[0] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                arrayList4.add(ObjectAnimator.ofFloat(frameLayout3, property6, fArr12));
                ImageView imageView3 = this.pickerViewSendButton;
                Property property7 = View.TRANSLATION_Y;
                float[] fArr13 = new float[1];
                fArr13[0] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                arrayList4.add(ObjectAnimator.ofFloat(imageView3, property7, fArr13));
                ActionBar actionBar4 = this.actionBar;
                arrayList4.add(ObjectAnimator.ofFloat(actionBar4, View.TRANSLATION_Y, new float[]{(float) (-actionBar4.getHeight())}));
                arrayList4.add(ObjectAnimator.ofObject(this.navigationBar, "backgroundColor", new ArgbEvaluator(), new Object[]{Integer.valueOf(color), Integer.valueOf(i13)}));
                if (this.needCaptionLayout) {
                    CaptionTextViewSwitcher captionTextViewSwitcher3 = this.captionTextViewSwitcher;
                    Property property8 = View.TRANSLATION_Y;
                    float[] fArr14 = new float[1];
                    if (!this.isCurrentVideo) {
                        var_ = 96.0f;
                    }
                    fArr14[0] = (float) AndroidUtilities.dp(var_);
                    arrayList4.add(ObjectAnimator.ofFloat(captionTextViewSwitcher3, property8, fArr14));
                }
                int i25 = this.sendPhotoType;
                if (i25 == 0 || i25 == 4) {
                    i2 = 2;
                    arrayList4.add(ObjectAnimator.ofFloat(this.checkImageView, View.ALPHA, new float[]{1.0f, 0.0f}));
                    arrayList4.add(ObjectAnimator.ofFloat(this.photosCounterView, View.ALPHA, new float[]{1.0f, 0.0f}));
                } else if (i25 == 1) {
                    i2 = 2;
                    arrayList4.add(ObjectAnimator.ofFloat(this.photoCropView, View.ALPHA, new float[]{1.0f, 0.0f}));
                } else {
                    i2 = 2;
                }
                if (this.selectedPhotosListView.getVisibility() == 0) {
                    float[] fArr15 = new float[i2];
                    // fill-array-data instruction
                    fArr15[0] = NUM;
                    fArr15[1] = 0;
                    arrayList4.add(ObjectAnimator.ofFloat(this.selectedPhotosListView, View.ALPHA, fArr15));
                }
                if (this.cameraItem.getTag() != null) {
                    float[] fArr16 = new float[i2];
                    // fill-array-data instruction
                    fArr16[0] = NUM;
                    fArr16[1] = 0;
                    arrayList4.add(ObjectAnimator.ofFloat(this.cameraItem, View.ALPHA, fArr16));
                }
                if (this.muteItem.getTag() != null) {
                    float[] fArr17 = new float[i2];
                    // fill-array-data instruction
                    fArr17[0] = NUM;
                    fArr17[1] = 0;
                    arrayList4.add(ObjectAnimator.ofFloat(this.muteItem, View.ALPHA, fArr17));
                }
                this.changeModeAnimation.playTogether(arrayList4);
                this.changeModeAnimation.setDuration(200);
                this.changeModeAnimation.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animator) {
                        PhotoViewer.this.switchToPaintMode();
                    }
                });
                this.changeModeAnimation.start();
            }
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$switchToEditMode$58(ValueAnimator valueAnimator) {
        this.photoCropView.cropView.areaView.setRotationScaleTranslation(0.0f, AndroidUtilities.lerp(this.scale, this.animateToScale, this.animationValue), AndroidUtilities.lerp(this.translationX, this.animateToX, this.animationValue), AndroidUtilities.lerp(this.translationY, this.animateToY, this.animationValue));
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$switchToEditMode$59(View view) {
        applyCurrentEditMode();
        switchToEditMode(0);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$switchToEditMode$61(View view) {
        if (this.photoFilterView.hasChanges()) {
            Activity activity = this.parentActivity;
            if (activity != null) {
                AlertDialog.Builder builder = new AlertDialog.Builder(activity, this.resourcesProvider);
                builder.setMessage(LocaleController.getString("DiscardChanges", R.string.DiscardChanges));
                builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new PhotoViewer$$ExternalSyntheticLambda11(this));
                builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), (DialogInterface.OnClickListener) null);
                showAlertDialog(builder);
                return;
            }
            return;
        }
        switchToEditMode(0);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$switchToEditMode$60(DialogInterface dialogInterface, int i) {
        switchToEditMode(0);
    }

    private void createPaintView() {
        int i;
        int i2;
        MediaController.CropState cropState;
        if (this.photoPaintView == null) {
            TextureView textureView = this.videoTextureView;
            if (textureView != null) {
                VideoEditTextureView videoEditTextureView = (VideoEditTextureView) textureView;
                i = videoEditTextureView.getVideoWidth();
                i2 = videoEditTextureView.getVideoHeight();
                while (true) {
                    if (i <= 1280 && i2 <= 1280) {
                        break;
                    }
                    i /= 2;
                    i2 /= 2;
                }
            } else {
                i = this.centerImage.getBitmapWidth();
                i2 = this.centerImage.getBitmapHeight();
            }
            Bitmap bitmap = this.paintingOverlay.getBitmap();
            if (bitmap == null) {
                bitmap = Bitmap.createBitmap(i, i2, Bitmap.Config.ARGB_8888);
            }
            Bitmap bitmap2 = bitmap;
            if (this.sendPhotoType == 1) {
                cropState = new MediaController.CropState();
                cropState.transformRotation = this.cropTransform.getOrientation();
            } else {
                cropState = this.editState.cropState;
            }
            AnonymousClass60 r3 = new PhotoPaintView(this.parentActivity, bitmap2, this.isCurrentVideo ? null : this.centerImage.getBitmap(), this.centerImage.getOrientation(), this.editState.mediaEntities, cropState, new PhotoViewer$$ExternalSyntheticLambda52(this), this.resourcesProvider) {
                /* access modifiers changed from: protected */
                public void onOpenCloseStickersAlert(boolean z) {
                    if (PhotoViewer.this.videoPlayer != null) {
                        boolean unused = PhotoViewer.this.manuallyPaused = false;
                        PhotoViewer.this.cancelVideoPlayRunnable();
                        if (z) {
                            PhotoViewer.this.videoPlayer.pause();
                        } else {
                            PhotoViewer.this.videoPlayer.play();
                        }
                    }
                }

                /* access modifiers changed from: protected */
                public void didSetAnimatedSticker(RLottieDrawable rLottieDrawable) {
                    if (PhotoViewer.this.videoPlayer != null) {
                        long currentPosition = PhotoViewer.this.videoPlayer.getCurrentPosition();
                        long j = 0;
                        if (PhotoViewer.this.startTime > 0) {
                            j = PhotoViewer.this.startTime / 1000;
                        }
                        rLottieDrawable.setProgressMs(currentPosition - j);
                    }
                }

                /* access modifiers changed from: protected */
                public void onTextAdd() {
                    if (!PhotoViewer.this.windowView.isFocusable()) {
                        PhotoViewer.this.makeFocusable();
                    }
                }
            };
            this.photoPaintView = r3;
            this.containerView.addView(r3, LayoutHelper.createFrame(-1, -1.0f));
            this.photoPaintView.getDoneTextView().setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda28(this));
            this.photoPaintView.getCancelTextView().setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda40(this));
            this.photoPaintView.getColorPicker().setTranslationY((float) AndroidUtilities.dp(126.0f));
            this.photoPaintView.getToolsView().setTranslationY((float) AndroidUtilities.dp(126.0f));
            this.photoPaintView.getColorPickerBackground().setTranslationY((float) AndroidUtilities.dp(126.0f));
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$createPaintView$62() {
        this.paintingOverlay.hideBitmap();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$createPaintView$63(View view) {
        this.savedState = null;
        applyCurrentEditMode();
        switchToEditMode(0);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$createPaintView$64(View view) {
        closePaintMode();
    }

    private void closePaintMode() {
        this.photoPaintView.maybeShowDismissalAlert(this, this.parentActivity, new PhotoViewer$$ExternalSyntheticLambda60(this));
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$closePaintMode$65() {
        switchToEditMode(0);
    }

    /* access modifiers changed from: private */
    public void switchToPaintMode() {
        this.changeModeAnimation = null;
        this.pickerView.setVisibility(8);
        this.pickerViewSendButton.setVisibility(8);
        this.cameraItem.setVisibility(8);
        this.muteItem.setVisibility(8);
        PhotoCropView photoCropView2 = this.photoCropView;
        if (photoCropView2 != null) {
            photoCropView2.setVisibility(4);
        }
        this.selectedPhotosListView.setVisibility(8);
        this.selectedPhotosListView.setAlpha(0.0f);
        this.selectedPhotosListView.setTranslationY((float) (-AndroidUtilities.dp(10.0f)));
        this.photosCounterView.setRotationX(0.0f);
        this.selectedPhotosListView.setEnabled(false);
        this.isPhotosListViewVisible = false;
        if (this.needCaptionLayout) {
            this.captionTextViewSwitcher.setVisibility(4);
        }
        int i = this.sendPhotoType;
        if (i == 0 || i == 4 || ((i == 2 || i == 5) && this.imagesArrLocals.size() > 1)) {
            this.checkImageView.setVisibility(8);
            this.photosCounterView.setVisibility(8);
        }
        if (this.centerImage.getBitmap() != null) {
            int bitmapWidth = this.centerImage.getBitmapWidth();
            int bitmapHeight = this.centerImage.getBitmapHeight();
            if (this.sendPhotoType == 1) {
                this.animateToY = (float) AndroidUtilities.dp(12.0f);
                if (this.cropTransform.getOrientation() == 90 || this.cropTransform.getOrientation() == 270) {
                    int i2 = bitmapHeight;
                    bitmapHeight = bitmapWidth;
                    bitmapWidth = i2;
                }
            } else {
                this.animateToY = (float) ((-AndroidUtilities.dp(44.0f)) + (isStatusBarVisible() ? AndroidUtilities.statusBarHeight / 2 : 0));
                MediaController.CropState cropState = this.editState.cropState;
                if (cropState != null) {
                    int i3 = cropState.transformRotation;
                    if (i3 == 90 || i3 == 270) {
                        int i4 = bitmapHeight;
                        bitmapHeight = bitmapWidth;
                        bitmapWidth = i4;
                    }
                    bitmapWidth = (int) (((float) bitmapWidth) * cropState.cropPw);
                    bitmapHeight = (int) (((float) bitmapHeight) * cropState.cropPh);
                }
            }
            float f = (float) bitmapWidth;
            float f2 = (float) bitmapHeight;
            this.animateToScale = Math.min(((float) getContainerViewWidth(3)) / f, ((float) getContainerViewHeight(3)) / f2) / Math.min(((float) getContainerViewWidth()) / f, ((float) getContainerViewHeight()) / f2);
            this.animateToX = (float) ((getLeftInset() / 2) - (getRightInset() / 2));
            this.animationStartTime = System.currentTimeMillis();
            this.zoomAnimation = true;
        }
        this.windowView.setClipChildren(true);
        this.navigationBar.setVisibility(4);
        AnimatorSet animatorSet = new AnimatorSet();
        this.imageMoveAnimation = animatorSet;
        animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}), ObjectAnimator.ofFloat(this.photoPaintView.getColorPicker(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(126.0f), 0.0f}), ObjectAnimator.ofFloat(this.photoPaintView.getToolsView(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(126.0f), 0.0f}), ObjectAnimator.ofFloat(this.photoPaintView.getColorPickerBackground(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(126.0f), 0.0f})});
        this.imageMoveAnimation.setDuration(200);
        this.imageMoveAnimation.addListener(new AnimatorListenerAdapter() {
            public void onAnimationStart(Animator animator) {
            }

            public void onAnimationEnd(Animator animator) {
                PhotoViewer.this.photoPaintView.init();
                PhotoViewer.this.paintingOverlay.hideEntities();
                AnimatorSet unused = PhotoViewer.this.imageMoveAnimation = null;
                int unused2 = PhotoViewer.this.currentEditMode = 3;
                int unused3 = PhotoViewer.this.switchingToMode = -1;
                PhotoViewer photoViewer = PhotoViewer.this;
                float unused4 = photoViewer.animateToScale = photoViewer.scale = 1.0f;
                float unused5 = PhotoViewer.this.animateToX = 0.0f;
                float unused6 = PhotoViewer.this.animateToY = 0.0f;
                PhotoViewer photoViewer2 = PhotoViewer.this;
                photoViewer2.updateMinMax(photoViewer2.scale);
                boolean unused7 = PhotoViewer.this.padImageForHorizontalInsets = true;
                PhotoViewer.this.containerView.invalidate();
            }
        });
        this.imageMoveAnimation.start();
    }

    private void toggleCheckImageView(boolean z) {
        AnimatorSet animatorSet = new AnimatorSet();
        ArrayList arrayList = new ArrayList();
        float dpf2 = AndroidUtilities.dpf2(24.0f);
        FrameLayout frameLayout = this.pickerView;
        Property property = View.ALPHA;
        float[] fArr = new float[1];
        float f = 1.0f;
        float f2 = 0.0f;
        fArr[0] = z ? 1.0f : 0.0f;
        arrayList.add(ObjectAnimator.ofFloat(frameLayout, property, fArr));
        FrameLayout frameLayout2 = this.pickerView;
        Property property2 = View.TRANSLATION_Y;
        float[] fArr2 = new float[1];
        fArr2[0] = z ? 0.0f : dpf2;
        arrayList.add(ObjectAnimator.ofFloat(frameLayout2, property2, fArr2));
        ImageView imageView = this.pickerViewSendButton;
        Property property3 = View.ALPHA;
        float[] fArr3 = new float[1];
        fArr3[0] = z ? 1.0f : 0.0f;
        arrayList.add(ObjectAnimator.ofFloat(imageView, property3, fArr3));
        ImageView imageView2 = this.pickerViewSendButton;
        Property property4 = View.TRANSLATION_Y;
        float[] fArr4 = new float[1];
        fArr4[0] = z ? 0.0f : dpf2;
        arrayList.add(ObjectAnimator.ofFloat(imageView2, property4, fArr4));
        int i = this.sendPhotoType;
        if (i == 0 || i == 4) {
            CheckBox checkBox = this.checkImageView;
            Property property5 = View.ALPHA;
            float[] fArr5 = new float[1];
            fArr5[0] = z ? 1.0f : 0.0f;
            arrayList.add(ObjectAnimator.ofFloat(checkBox, property5, fArr5));
            CheckBox checkBox2 = this.checkImageView;
            Property property6 = View.TRANSLATION_Y;
            float[] fArr6 = new float[1];
            fArr6[0] = z ? 0.0f : -dpf2;
            arrayList.add(ObjectAnimator.ofFloat(checkBox2, property6, fArr6));
            CounterView counterView = this.photosCounterView;
            Property property7 = View.ALPHA;
            float[] fArr7 = new float[1];
            if (!z) {
                f = 0.0f;
            }
            fArr7[0] = f;
            arrayList.add(ObjectAnimator.ofFloat(counterView, property7, fArr7));
            CounterView counterView2 = this.photosCounterView;
            Property property8 = View.TRANSLATION_Y;
            float[] fArr8 = new float[1];
            if (!z) {
                f2 = -dpf2;
            }
            fArr8[0] = f2;
            arrayList.add(ObjectAnimator.ofFloat(counterView2, property8, fArr8));
        }
        animatorSet.playTogether(arrayList);
        animatorSet.setDuration(200);
        animatorSet.start();
    }

    private void toggleMiniProgressInternal(final boolean z) {
        if (z) {
            this.miniProgressView.setVisibility(0);
        }
        AnimatorSet animatorSet = new AnimatorSet();
        this.miniProgressAnimator = animatorSet;
        Animator[] animatorArr = new Animator[1];
        RadialProgressView radialProgressView = this.miniProgressView;
        Property property = View.ALPHA;
        float[] fArr = new float[1];
        fArr[0] = z ? 1.0f : 0.0f;
        animatorArr[0] = ObjectAnimator.ofFloat(radialProgressView, property, fArr);
        animatorSet.playTogether(animatorArr);
        this.miniProgressAnimator.setDuration(200);
        this.miniProgressAnimator.addListener(new AnimatorListenerAdapter() {
            public void onAnimationEnd(Animator animator) {
                if (animator.equals(PhotoViewer.this.miniProgressAnimator)) {
                    if (!z) {
                        PhotoViewer.this.miniProgressView.setVisibility(4);
                    }
                    AnimatorSet unused = PhotoViewer.this.miniProgressAnimator = null;
                }
            }

            public void onAnimationCancel(Animator animator) {
                if (animator.equals(PhotoViewer.this.miniProgressAnimator)) {
                    AnimatorSet unused = PhotoViewer.this.miniProgressAnimator = null;
                }
            }
        });
        this.miniProgressAnimator.start();
    }

    private void toggleMiniProgress(boolean z, boolean z2) {
        AndroidUtilities.cancelRunOnUIThread(this.miniProgressShowRunnable);
        int i = 0;
        if (z2) {
            toggleMiniProgressInternal(z);
            if (z) {
                AnimatorSet animatorSet = this.miniProgressAnimator;
                if (animatorSet != null) {
                    animatorSet.cancel();
                    this.miniProgressAnimator = null;
                }
                if (this.firstAnimationDelay) {
                    this.firstAnimationDelay = false;
                    toggleMiniProgressInternal(true);
                    return;
                }
                AndroidUtilities.runOnUIThread(this.miniProgressShowRunnable, 500);
                return;
            }
            AnimatorSet animatorSet2 = this.miniProgressAnimator;
            if (animatorSet2 != null) {
                animatorSet2.cancel();
                toggleMiniProgressInternal(false);
                return;
            }
            return;
        }
        AnimatorSet animatorSet3 = this.miniProgressAnimator;
        if (animatorSet3 != null) {
            animatorSet3.cancel();
            this.miniProgressAnimator = null;
        }
        this.miniProgressView.setAlpha(z ? 1.0f : 0.0f);
        RadialProgressView radialProgressView = this.miniProgressView;
        if (!z) {
            i = 4;
        }
        radialProgressView.setVisibility(i);
    }

    private void updateContainerFlags(boolean z) {
        FrameLayoutDrawer frameLayoutDrawer;
        if (Build.VERSION.SDK_INT >= 21 && this.sendPhotoType != 1 && (frameLayoutDrawer = this.containerView) != null) {
            int i = 1792;
            if (!z) {
                i = 1796;
                if (frameLayoutDrawer.getPaddingLeft() > 0 || this.containerView.getPaddingRight() > 0) {
                    i = 5894;
                }
            }
            this.containerView.setSystemUiVisibility(i);
        }
    }

    private static class ActionBarToggleParams {
        public static final ActionBarToggleParams DEFAULT = new ActionBarToggleParams();
        public int animationDuration = 200;
        public Interpolator animationInterpolator;
        public boolean enableStatusBarAnimation = true;
        public boolean enableTranslationAnimation = true;

        public ActionBarToggleParams enableStatusBarAnimation(boolean z) {
            this.enableStatusBarAnimation = z;
            return this;
        }

        public ActionBarToggleParams enableTranslationAnimation(boolean z) {
            this.enableTranslationAnimation = z;
            return this;
        }

        public ActionBarToggleParams animationDuration(int i) {
            this.animationDuration = i;
            return this;
        }

        public ActionBarToggleParams animationInterpolator(Interpolator interpolator) {
            this.animationInterpolator = interpolator;
            return this;
        }
    }

    /* access modifiers changed from: private */
    public void toggleActionBar(boolean z, boolean z2) {
        toggleActionBar(z, z2, ActionBarToggleParams.DEFAULT);
    }

    /* access modifiers changed from: private */
    public void toggleActionBar(final boolean z, boolean z2, ActionBarToggleParams actionBarToggleParams) {
        CaptionScrollView captionScrollView2;
        CaptionScrollView captionScrollView3;
        if (this.currentEditMode == 0) {
            int i = this.switchingToMode;
            if (i == 0 || i == -1) {
                AnimatorSet animatorSet = this.actionBarAnimator;
                if (animatorSet != null) {
                    animatorSet.cancel();
                }
                if (z) {
                    this.actionBar.setVisibility(0);
                    if (this.bottomLayout.getTag() != null) {
                        this.bottomLayout.setVisibility(0);
                    }
                    if (this.captionTextViewSwitcher.getTag() != null) {
                        this.captionTextViewSwitcher.setVisibility(0);
                        VideoSeekPreviewImage videoSeekPreviewImage = this.videoPreviewFrame;
                        if (videoSeekPreviewImage != null) {
                            videoSeekPreviewImage.requestLayout();
                        }
                    }
                }
                this.isActionBarVisible = z;
                PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
                if (photoViewerWebView2 != null) {
                    photoViewerWebView2.setTouchDisabled(z);
                }
                if (actionBarToggleParams.enableStatusBarAnimation) {
                    updateContainerFlags(z);
                }
                if (!this.videoPlayerControlVisible || !this.isPlaying || !z) {
                    AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
                } else {
                    scheduleActionBarHide();
                }
                if (!z) {
                    Bulletin.hide((FrameLayout) this.containerView);
                }
                float dpf2 = AndroidUtilities.dpf2(24.0f);
                this.videoPlayerControlFrameLayout.setSeekBarTransitionEnabled(actionBarToggleParams.enableTranslationAnimation && this.playerLooping);
                this.videoPlayerControlFrameLayout.setTranslationYAnimationEnabled(actionBarToggleParams.enableTranslationAnimation);
                float f = 1.0f;
                if (z2) {
                    ArrayList arrayList = new ArrayList();
                    ActionBar actionBar2 = this.actionBar;
                    Property property = View.ALPHA;
                    float[] fArr = new float[1];
                    fArr[0] = z ? 1.0f : 0.0f;
                    arrayList.add(ObjectAnimator.ofFloat(actionBar2, property, fArr));
                    if (actionBarToggleParams.enableTranslationAnimation) {
                        ActionBar actionBar3 = this.actionBar;
                        Property property2 = View.TRANSLATION_Y;
                        float[] fArr2 = new float[1];
                        fArr2[0] = z ? 0.0f : -dpf2;
                        arrayList.add(ObjectAnimator.ofFloat(actionBar3, property2, fArr2));
                    } else {
                        this.actionBar.setTranslationY(0.0f);
                    }
                    if (this.allowShowFullscreenButton) {
                        ImageView imageView = this.fullscreenButton[0];
                        Property property3 = View.ALPHA;
                        float[] fArr3 = new float[1];
                        fArr3[0] = z ? 1.0f : 0.0f;
                        arrayList.add(ObjectAnimator.ofFloat(imageView, property3, fArr3));
                    }
                    for (int i2 = 1; i2 < 3; i2++) {
                        this.fullscreenButton[i2].setTranslationY(z ? 0.0f : dpf2);
                    }
                    if (actionBarToggleParams.enableTranslationAnimation) {
                        ImageView imageView2 = this.fullscreenButton[0];
                        Property property4 = View.TRANSLATION_Y;
                        float[] fArr4 = new float[1];
                        fArr4[0] = z ? 0.0f : dpf2;
                        arrayList.add(ObjectAnimator.ofFloat(imageView2, property4, fArr4));
                    } else {
                        this.fullscreenButton[0].setTranslationY(0.0f);
                    }
                    FrameLayout frameLayout = this.bottomLayout;
                    if (frameLayout != null) {
                        Property property5 = View.ALPHA;
                        float[] fArr5 = new float[1];
                        fArr5[0] = z ? 1.0f : 0.0f;
                        arrayList.add(ObjectAnimator.ofFloat(frameLayout, property5, fArr5));
                        if (actionBarToggleParams.enableTranslationAnimation) {
                            FrameLayout frameLayout2 = this.bottomLayout;
                            Property property6 = View.TRANSLATION_Y;
                            float[] fArr6 = new float[1];
                            fArr6[0] = z ? 0.0f : dpf2;
                            arrayList.add(ObjectAnimator.ofFloat(frameLayout2, property6, fArr6));
                        } else {
                            this.bottomLayout.setTranslationY(0.0f);
                        }
                    }
                    View view = this.navigationBar;
                    if (view != null) {
                        Property property7 = View.ALPHA;
                        float[] fArr7 = new float[1];
                        fArr7[0] = z ? 1.0f : 0.0f;
                        arrayList.add(ObjectAnimator.ofFloat(view, property7, fArr7));
                    }
                    if (this.videoPlayerControlVisible) {
                        VideoPlayerControlFrameLayout videoPlayerControlFrameLayout2 = this.videoPlayerControlFrameLayout;
                        Property<VideoPlayerControlFrameLayout, Float> property8 = VPC_PROGRESS;
                        float[] fArr8 = new float[1];
                        fArr8[0] = z ? 1.0f : 0.0f;
                        arrayList.add(ObjectAnimator.ofFloat(videoPlayerControlFrameLayout2, property8, fArr8));
                    } else {
                        this.videoPlayerControlFrameLayout.setProgress(z ? 1.0f : 0.0f);
                    }
                    GroupedPhotosListView groupedPhotosListView2 = this.groupedPhotosListView;
                    Property property9 = View.ALPHA;
                    float[] fArr9 = new float[1];
                    fArr9[0] = z ? 1.0f : 0.0f;
                    arrayList.add(ObjectAnimator.ofFloat(groupedPhotosListView2, property9, fArr9));
                    if (actionBarToggleParams.enableTranslationAnimation) {
                        GroupedPhotosListView groupedPhotosListView3 = this.groupedPhotosListView;
                        Property property10 = View.TRANSLATION_Y;
                        float[] fArr10 = new float[1];
                        fArr10[0] = z ? 0.0f : dpf2;
                        arrayList.add(ObjectAnimator.ofFloat(groupedPhotosListView3, property10, fArr10));
                    } else {
                        this.groupedPhotosListView.setTranslationY(0.0f);
                    }
                    if (!this.needCaptionLayout && (captionScrollView3 = this.captionScrollView) != null) {
                        Property property11 = View.ALPHA;
                        float[] fArr11 = new float[1];
                        fArr11[0] = z ? 1.0f : 0.0f;
                        arrayList.add(ObjectAnimator.ofFloat(captionScrollView3, property11, fArr11));
                        if (actionBarToggleParams.enableTranslationAnimation) {
                            CaptionScrollView captionScrollView4 = this.captionScrollView;
                            Property property12 = View.TRANSLATION_Y;
                            float[] fArr12 = new float[1];
                            if (z) {
                                dpf2 = 0.0f;
                            }
                            fArr12[0] = dpf2;
                            arrayList.add(ObjectAnimator.ofFloat(captionScrollView4, property12, fArr12));
                        } else {
                            this.captionScrollView.setTranslationY(0.0f);
                        }
                    }
                    if (this.videoPlayerControlVisible && this.isPlaying) {
                        float[] fArr13 = new float[2];
                        fArr13[0] = this.photoProgressViews[0].animAlphas[1];
                        fArr13[1] = z ? 1.0f : 0.0f;
                        ValueAnimator ofFloat = ValueAnimator.ofFloat(fArr13);
                        ofFloat.addUpdateListener(new PhotoViewer$$ExternalSyntheticLambda4(this));
                        arrayList.add(ofFloat);
                    }
                    if (this.muteItem.getTag() != null) {
                        ImageView imageView3 = this.muteItem;
                        Property property13 = View.ALPHA;
                        float[] fArr14 = new float[1];
                        if (!z) {
                            f = 0.0f;
                        }
                        fArr14[0] = f;
                        arrayList.add(ObjectAnimator.ofFloat(imageView3, property13, fArr14));
                    }
                    AnimatorSet animatorSet2 = new AnimatorSet();
                    this.actionBarAnimator = animatorSet2;
                    animatorSet2.playTogether(arrayList);
                    this.actionBarAnimator.setDuration((long) actionBarToggleParams.animationDuration);
                    this.actionBarAnimator.setInterpolator(actionBarToggleParams.animationInterpolator);
                    this.actionBarAnimator.addListener(new AnimatorListenerAdapter() {
                        public void onAnimationEnd(Animator animator) {
                            if (animator.equals(PhotoViewer.this.actionBarAnimator)) {
                                if (!z) {
                                    PhotoViewer.this.actionBar.setVisibility(4);
                                    if (PhotoViewer.this.bottomLayout.getTag() != null) {
                                        PhotoViewer.this.bottomLayout.setVisibility(4);
                                    }
                                    if (PhotoViewer.this.captionTextViewSwitcher.getTag() != null) {
                                        PhotoViewer.this.captionTextViewSwitcher.setVisibility(4);
                                    }
                                }
                                AnimatorSet unused = PhotoViewer.this.actionBarAnimator = null;
                            }
                        }

                        public void onAnimationCancel(Animator animator) {
                            if (animator.equals(PhotoViewer.this.actionBarAnimator)) {
                                AnimatorSet unused = PhotoViewer.this.actionBarAnimator = null;
                            }
                        }
                    });
                    this.actionBarAnimator.start();
                    return;
                }
                this.actionBar.setAlpha(z ? 1.0f : 0.0f);
                if (this.fullscreenButton[0].getTranslationX() != 0.0f && this.allowShowFullscreenButton) {
                    this.fullscreenButton[0].setAlpha(z ? 1.0f : 0.0f);
                }
                for (int i3 = 0; i3 < 3; i3++) {
                    this.fullscreenButton[i3].setTranslationY(z ? 0.0f : dpf2);
                }
                this.actionBar.setTranslationY(z ? 0.0f : -dpf2);
                this.bottomLayout.setAlpha(z ? 1.0f : 0.0f);
                this.bottomLayout.setTranslationY(z ? 0.0f : dpf2);
                this.navigationBar.setAlpha(z ? 1.0f : 0.0f);
                this.groupedPhotosListView.setAlpha(z ? 1.0f : 0.0f);
                this.groupedPhotosListView.setTranslationY(z ? 0.0f : dpf2);
                if (!this.needCaptionLayout && (captionScrollView2 = this.captionScrollView) != null) {
                    captionScrollView2.setAlpha(z ? 1.0f : 0.0f);
                    CaptionScrollView captionScrollView5 = this.captionScrollView;
                    if (z) {
                        dpf2 = 0.0f;
                    }
                    captionScrollView5.setTranslationY(dpf2);
                }
                this.videoPlayerControlFrameLayout.setProgress(z ? 1.0f : 0.0f);
                if (this.muteItem.getTag() != null) {
                    this.muteItem.setAlpha(z ? 1.0f : 0.0f);
                }
                if (this.videoPlayerControlVisible && this.isPlaying) {
                    PhotoProgressView photoProgressView = this.photoProgressViews[0];
                    if (!z) {
                        f = 0.0f;
                    }
                    photoProgressView.setIndexedAlpha(1, f, false);
                }
            }
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$toggleActionBar$66(ValueAnimator valueAnimator) {
        this.photoProgressViews[0].setIndexedAlpha(1, ((Float) valueAnimator.getAnimatedValue()).floatValue(), false);
    }

    private void togglePhotosListView(boolean z, boolean z2) {
        if (z != this.isPhotosListViewVisible) {
            if (z) {
                this.selectedPhotosListView.setVisibility(0);
            }
            this.isPhotosListViewVisible = z;
            this.selectedPhotosListView.setEnabled(z);
            float f = 1.0f;
            if (z2) {
                ArrayList arrayList = new ArrayList();
                SelectedPhotosListView selectedPhotosListView2 = this.selectedPhotosListView;
                Property property = View.ALPHA;
                float[] fArr = new float[1];
                fArr[0] = z ? 1.0f : 0.0f;
                arrayList.add(ObjectAnimator.ofFloat(selectedPhotosListView2, property, fArr));
                SelectedPhotosListView selectedPhotosListView3 = this.selectedPhotosListView;
                Property property2 = View.TRANSLATION_Y;
                float[] fArr2 = new float[1];
                fArr2[0] = z ? 0.0f : (float) (-AndroidUtilities.dp(10.0f));
                arrayList.add(ObjectAnimator.ofFloat(selectedPhotosListView3, property2, fArr2));
                CounterView counterView = this.photosCounterView;
                Property property3 = View.ROTATION_X;
                float[] fArr3 = new float[1];
                if (!z) {
                    f = 0.0f;
                }
                fArr3[0] = f;
                arrayList.add(ObjectAnimator.ofFloat(counterView, property3, fArr3));
                AnimatorSet animatorSet = new AnimatorSet();
                this.currentListViewAnimation = animatorSet;
                animatorSet.playTogether(arrayList);
                if (!z) {
                    this.currentListViewAnimation.addListener(new AnimatorListenerAdapter() {
                        public void onAnimationEnd(Animator animator) {
                            if (PhotoViewer.this.currentListViewAnimation != null && PhotoViewer.this.currentListViewAnimation.equals(animator)) {
                                PhotoViewer.this.selectedPhotosListView.setVisibility(8);
                                AnimatorSet unused = PhotoViewer.this.currentListViewAnimation = null;
                            }
                        }
                    });
                }
                this.currentListViewAnimation.setDuration(200);
                this.currentListViewAnimation.start();
                return;
            }
            this.selectedPhotosListView.setAlpha(z ? 1.0f : 0.0f);
            this.selectedPhotosListView.setTranslationY(z ? 0.0f : (float) (-AndroidUtilities.dp(10.0f)));
            CounterView counterView2 = this.photosCounterView;
            if (!z) {
                f = 0.0f;
            }
            counterView2.setRotationX(f);
            if (!z) {
                this.selectedPhotosListView.setVisibility(8);
            }
        }
    }

    /* access modifiers changed from: private */
    public void toggleVideoPlayer() {
        PhotoViewerWebView photoViewerWebView2;
        if (this.videoPlayer != null || ((photoViewerWebView2 = this.photoViewerWebView) != null && photoViewerWebView2.isControllable())) {
            boolean isPlaying2 = this.videoPlayer != null ? this.isPlaying : this.photoViewerWebView.isPlaying();
            cancelVideoPlayRunnable();
            AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
            if (isPlaying2) {
                pauseVideoOrWeb();
            } else {
                if (!this.isCurrentVideo) {
                    if (Math.abs(this.videoPlayerSeekbar.getProgress() - this.videoTimelineView.getRightProgress()) < 0.01f || this.videoPlayer.getCurrentPosition() == this.videoPlayer.getDuration()) {
                        seekVideoOrWebToProgress(0.0f);
                    }
                    scheduleActionBarHide();
                } else if (Math.abs(this.videoTimelineView.getProgress() - this.videoTimelineView.getRightProgress()) < 0.01f || this.videoPlayer.getCurrentPosition() == this.videoPlayer.getDuration()) {
                    seekVideoOrWebToProgress(this.videoTimelineView.getLeftProgress());
                }
                playVideoOrWeb();
            }
            this.containerView.invalidate();
        }
    }

    private String getFileName(int i) {
        if (i < 0) {
            return null;
        }
        if (!this.secureDocuments.isEmpty()) {
            if (i >= this.secureDocuments.size()) {
                return null;
            }
            SecureDocument secureDocument = this.secureDocuments.get(i);
            return secureDocument.secureFile.dc_id + "_" + secureDocument.secureFile.id + ".jpg";
        } else if (this.imagesArrLocations.isEmpty() && this.imagesArr.isEmpty()) {
            if (this.imagesArrLocals.isEmpty()) {
                PageBlocksAdapter pageBlocksAdapter2 = this.pageBlocksAdapter;
                if (pageBlocksAdapter2 != null) {
                    return pageBlocksAdapter2.getFileName(i);
                }
            } else if (i >= this.imagesArrLocals.size()) {
                return null;
            } else {
                Object obj = this.imagesArrLocals.get(i);
                if (obj instanceof MediaController.SearchImage) {
                    return ((MediaController.SearchImage) obj).getAttachName();
                }
                if (obj instanceof TLRPC$BotInlineResult) {
                    TLRPC$BotInlineResult tLRPC$BotInlineResult = (TLRPC$BotInlineResult) obj;
                    TLRPC$Document tLRPC$Document = tLRPC$BotInlineResult.document;
                    if (tLRPC$Document != null) {
                        return FileLoader.getAttachFileName(tLRPC$Document);
                    }
                    TLRPC$Photo tLRPC$Photo = tLRPC$BotInlineResult.photo;
                    if (tLRPC$Photo != null) {
                        return FileLoader.getAttachFileName(FileLoader.getClosestPhotoSizeWithSize(tLRPC$Photo.sizes, AndroidUtilities.getPhotoSize()));
                    }
                    if (tLRPC$BotInlineResult.content instanceof TLRPC$TL_webDocument) {
                        StringBuilder sb = new StringBuilder();
                        sb.append(Utilities.MD5(tLRPC$BotInlineResult.content.url));
                        sb.append(".");
                        TLRPC$WebDocument tLRPC$WebDocument = tLRPC$BotInlineResult.content;
                        sb.append(ImageLoader.getHttpUrlExtension(tLRPC$WebDocument.url, FileLoader.getMimeTypePart(tLRPC$WebDocument.mime_type)));
                        return sb.toString();
                    }
                }
            }
            return null;
        } else if (!this.imagesArrLocations.isEmpty()) {
            if (i >= this.imagesArrLocations.size()) {
                return null;
            }
            ImageLocation imageLocation = this.imagesArrLocations.get(i);
            ImageLocation imageLocation2 = this.imagesArrLocationsVideo.get(i);
            if (imageLocation == null) {
                return null;
            }
            if (imageLocation2 != imageLocation) {
                return imageLocation2.location.volume_id + "_" + imageLocation2.location.local_id + ".mp4";
            }
            return imageLocation.location.volume_id + "_" + imageLocation.location.local_id + ".jpg";
        } else if (i >= this.imagesArr.size()) {
            return null;
        } else {
            return FileLoader.getMessageFileName(this.imagesArr.get(i).messageOwner);
        }
    }

    private ImageLocation getImageLocation(int i, long[] jArr) {
        if (i < 0) {
            return null;
        }
        if (!this.secureDocuments.isEmpty()) {
            if (i >= this.secureDocuments.size()) {
                return null;
            }
            if (jArr != null) {
                jArr[0] = this.secureDocuments.get(i).secureFile.size;
            }
            return ImageLocation.getForSecureDocument(this.secureDocuments.get(i));
        } else if (!this.imagesArrLocations.isEmpty()) {
            if (i >= this.imagesArrLocations.size()) {
                return null;
            }
            if (jArr != null) {
                jArr[0] = this.imagesArrLocationsSizes.get(i).longValue();
            }
            return this.imagesArrLocationsVideo.get(i);
        } else if (this.imagesArr.isEmpty() || i >= this.imagesArr.size()) {
            return null;
        } else {
            MessageObject messageObject = this.imagesArr.get(i);
            TLRPC$Message tLRPC$Message = messageObject.messageOwner;
            if (tLRPC$Message instanceof TLRPC$TL_messageService) {
                if (tLRPC$Message.action instanceof TLRPC$TL_messageActionUserUpdatedPhoto) {
                    return null;
                }
                TLRPC$PhotoSize closestPhotoSizeWithSize = FileLoader.getClosestPhotoSizeWithSize(messageObject.photoThumbs, AndroidUtilities.getPhotoSize());
                if (closestPhotoSizeWithSize != null) {
                    if (jArr != null) {
                        jArr[0] = (long) closestPhotoSizeWithSize.size;
                        if (jArr[0] == 0) {
                            jArr[0] = -1;
                        }
                    }
                    return ImageLocation.getForObject(closestPhotoSizeWithSize, messageObject.photoThumbsObject);
                } else if (jArr != null) {
                    jArr[0] = -1;
                }
            } else if ((!(MessageObject.getMedia(tLRPC$Message) instanceof TLRPC$TL_messageMediaPhoto) || MessageObject.getMedia(messageObject.messageOwner).photo == null) && (!(MessageObject.getMedia(messageObject.messageOwner) instanceof TLRPC$TL_messageMediaWebPage) || MessageObject.getMedia(messageObject.messageOwner).webpage == null)) {
                if (MessageObject.getMedia(messageObject.messageOwner) instanceof TLRPC$TL_messageMediaInvoice) {
                    return ImageLocation.getForWebFile(WebFile.createWithWebDocument(((TLRPC$TL_messageMediaInvoice) MessageObject.getMedia(messageObject.messageOwner)).photo));
                }
                if (messageObject.getDocument() != null) {
                    TLRPC$Document document = messageObject.getDocument();
                    if (this.sharedMediaType == 5) {
                        return ImageLocation.getForDocument(document);
                    }
                    if (MessageObject.isDocumentHasThumb(messageObject.getDocument())) {
                        TLRPC$PhotoSize closestPhotoSizeWithSize2 = FileLoader.getClosestPhotoSizeWithSize(document.thumbs, 90);
                        if (jArr != null) {
                            jArr[0] = (long) closestPhotoSizeWithSize2.size;
                            if (jArr[0] == 0) {
                                jArr[0] = -1;
                            }
                        }
                        return ImageLocation.getForDocument(closestPhotoSizeWithSize2, document);
                    }
                }
            } else if (messageObject.isGif()) {
                return ImageLocation.getForDocument(messageObject.getDocument());
            } else {
                TLRPC$PhotoSize closestPhotoSizeWithSize3 = FileLoader.getClosestPhotoSizeWithSize(messageObject.photoThumbs, AndroidUtilities.getPhotoSize(), false, (TLRPC$PhotoSize) null, true);
                if (closestPhotoSizeWithSize3 != null) {
                    if (jArr != null) {
                        jArr[0] = (long) closestPhotoSizeWithSize3.size;
                        if (jArr[0] == 0) {
                            jArr[0] = -1;
                        }
                    }
                    return ImageLocation.getForObject(closestPhotoSizeWithSize3, messageObject.photoThumbsObject);
                } else if (jArr != null) {
                    jArr[0] = -1;
                }
            }
            return null;
        }
    }

    /* access modifiers changed from: private */
    public TLObject getFileLocation(int i, long[] jArr) {
        if (i < 0) {
            return null;
        }
        if (!this.secureDocuments.isEmpty()) {
            if (i >= this.secureDocuments.size()) {
                return null;
            }
            if (jArr != null) {
                jArr[0] = this.secureDocuments.get(i).secureFile.size;
            }
            return this.secureDocuments.get(i);
        } else if (!this.imagesArrLocations.isEmpty()) {
            if (i >= this.imagesArrLocations.size()) {
                return null;
            }
            if (jArr != null) {
                jArr[0] = this.imagesArrLocationsSizes.get(i).longValue();
            }
            return this.imagesArrLocationsVideo.get(i).location;
        } else if (this.imagesArr.isEmpty() || i >= this.imagesArr.size()) {
            return null;
        } else {
            MessageObject messageObject = this.imagesArr.get(i);
            TLRPC$Message tLRPC$Message = messageObject.messageOwner;
            if (tLRPC$Message instanceof TLRPC$TL_messageService) {
                TLRPC$MessageAction tLRPC$MessageAction = tLRPC$Message.action;
                if (tLRPC$MessageAction instanceof TLRPC$TL_messageActionUserUpdatedPhoto) {
                    return tLRPC$MessageAction.newUserPhoto.photo_big;
                }
                TLRPC$PhotoSize closestPhotoSizeWithSize = FileLoader.getClosestPhotoSizeWithSize(messageObject.photoThumbs, AndroidUtilities.getPhotoSize());
                if (closestPhotoSizeWithSize != null) {
                    if (jArr != null) {
                        jArr[0] = (long) closestPhotoSizeWithSize.size;
                        if (jArr[0] == 0) {
                            jArr[0] = -1;
                        }
                    }
                    return closestPhotoSizeWithSize;
                } else if (jArr != null) {
                    jArr[0] = -1;
                }
            } else if (((MessageObject.getMedia(tLRPC$Message) instanceof TLRPC$TL_messageMediaPhoto) && MessageObject.getMedia(messageObject.messageOwner).photo != null) || ((MessageObject.getMedia(messageObject.messageOwner) instanceof TLRPC$TL_messageMediaWebPage) && MessageObject.getMedia(messageObject.messageOwner).webpage != null)) {
                TLRPC$PhotoSize closestPhotoSizeWithSize2 = FileLoader.getClosestPhotoSizeWithSize(messageObject.photoThumbs, AndroidUtilities.getPhotoSize(), false, (TLRPC$PhotoSize) null, true);
                if (closestPhotoSizeWithSize2 != null) {
                    if (jArr != null) {
                        jArr[0] = (long) closestPhotoSizeWithSize2.size;
                        if (jArr[0] == 0) {
                            jArr[0] = -1;
                        }
                    }
                    return closestPhotoSizeWithSize2;
                } else if (jArr != null) {
                    jArr[0] = -1;
                }
            } else if (MessageObject.getMedia(messageObject.messageOwner) instanceof TLRPC$TL_messageMediaInvoice) {
                return ((TLRPC$TL_messageMediaInvoice) MessageObject.getMedia(messageObject.messageOwner)).photo;
            } else {
                if (messageObject.getDocument() != null && MessageObject.isDocumentHasThumb(messageObject.getDocument())) {
                    TLRPC$PhotoSize closestPhotoSizeWithSize3 = FileLoader.getClosestPhotoSizeWithSize(messageObject.getDocument().thumbs, 90);
                    if (jArr != null) {
                        jArr[0] = (long) closestPhotoSizeWithSize3.size;
                        if (jArr[0] == 0) {
                            jArr[0] = -1;
                        }
                    }
                    return closestPhotoSizeWithSize3;
                }
            }
            return null;
        }
    }

    /* access modifiers changed from: private */
    public void updateSelectedCount() {
        PhotoViewerProvider photoViewerProvider = this.placeProvider;
        if (photoViewerProvider != null) {
            int selectedCount = photoViewerProvider.getSelectedCount();
            this.photosCounterView.setCount(selectedCount);
            if (selectedCount == 0) {
                togglePhotosListView(false, true);
            }
        }
    }

    /* access modifiers changed from: private */
    public boolean isCurrentAvatarSet() {
        int i;
        if (this.currentAvatarLocation != null && (i = this.currentIndex) >= 0 && i < this.avatarsArr.size()) {
            TLRPC$Photo tLRPC$Photo = this.avatarsArr.get(this.currentIndex);
            ImageLocation imageLocation = this.imagesArrLocations.get(this.currentIndex);
            if (tLRPC$Photo instanceof TLRPC$TL_photoEmpty) {
                tLRPC$Photo = null;
            }
            if (tLRPC$Photo != null) {
                int size = tLRPC$Photo.sizes.size();
                for (int i2 = 0; i2 < size; i2++) {
                    TLRPC$FileLocation tLRPC$FileLocation = tLRPC$Photo.sizes.get(i2).location;
                    if (tLRPC$FileLocation != null) {
                        int i3 = tLRPC$FileLocation.local_id;
                        TLRPC$TL_fileLocationToBeDeprecated tLRPC$TL_fileLocationToBeDeprecated = this.currentAvatarLocation.location;
                        if (i3 == tLRPC$TL_fileLocationToBeDeprecated.local_id && tLRPC$FileLocation.volume_id == tLRPC$TL_fileLocationToBeDeprecated.volume_id) {
                            return true;
                        }
                    }
                }
            } else {
                TLRPC$TL_fileLocationToBeDeprecated tLRPC$TL_fileLocationToBeDeprecated2 = imageLocation.location;
                int i4 = tLRPC$TL_fileLocationToBeDeprecated2.local_id;
                TLRPC$TL_fileLocationToBeDeprecated tLRPC$TL_fileLocationToBeDeprecated3 = this.currentAvatarLocation.location;
                if (i4 == tLRPC$TL_fileLocationToBeDeprecated3.local_id && tLRPC$TL_fileLocationToBeDeprecated2.volume_id == tLRPC$TL_fileLocationToBeDeprecated3.volume_id) {
                    return true;
                }
                return false;
            }
        }
        return false;
    }

    private void setItemVisible(View view, boolean z, boolean z2) {
        setItemVisible(view, z, z2, 1.0f);
    }

    private void setItemVisible(View view, boolean z, boolean z2, float f) {
        Boolean bool = this.actionBarItemsVisibility.get(view);
        if (bool == null || bool.booleanValue() != z) {
            this.actionBarItemsVisibility.put(view, Boolean.valueOf(z));
            view.animate().cancel();
            float f2 = (z ? 1.0f : 0.0f) * f;
            int i = 0;
            if (!z2 || bool == null) {
                if (!z) {
                    i = 8;
                }
                view.setVisibility(i);
                view.setAlpha(f2);
                return;
            }
            if (z) {
                view.setVisibility(0);
            }
            view.animate().alpha(f2).setDuration(100).setInterpolator(new LinearInterpolator()).withEndAction(new PhotoViewer$$ExternalSyntheticLambda73(z, view)).start();
        }
    }

    /* access modifiers changed from: private */
    public static /* synthetic */ void lambda$setItemVisible$67(boolean z, View view) {
        if (!z) {
            view.setVisibility(8);
        }
    }

    /* JADX WARNING: type inference failed for: r11v1, types: [android.animation.AnimatorSet, java.lang.String] */
    /* JADX WARNING: type inference failed for: r11v22 */
    /* JADX WARNING: type inference failed for: r11v23 */
    /* access modifiers changed from: private */
    /* JADX WARNING: Removed duplicated region for block: B:330:0x07e3  */
    /* JADX WARNING: Removed duplicated region for block: B:335:0x082a  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public void onPhotoShow(org.telegram.messenger.MessageObject r19, org.telegram.tgnet.TLRPC$FileLocation r20, org.telegram.messenger.ImageLocation r21, org.telegram.messenger.ImageLocation r22, java.util.ArrayList<org.telegram.messenger.MessageObject> r23, java.util.ArrayList<org.telegram.messenger.SecureDocument> r24, java.util.List<java.lang.Object> r25, int r26, org.telegram.ui.PhotoViewer.PlaceProviderObject r27) {
        /*
            r18 = this;
            r0 = r18
            r1 = r19
            r2 = r23
            r3 = r24
            r4 = r25
            r5 = r26
            r6 = r27
            int r7 = org.telegram.tgnet.ConnectionsManager.generateClassGuid()
            r0.classGuid = r7
            r7 = 0
            r0.currentMessageObject = r7
            r0.currentFileLocation = r7
            r0.currentFileLocationVideo = r7
            r0.currentSecureDocument = r7
            r0.currentPathObject = r7
            r0.currentPageBlock = r7
            r8 = 0
            r0.fromCamera = r8
            r0.currentBotInlineResult = r7
            r9 = 0
            r0.avatarStartProgress = r9
            r10 = 0
            r0.avatarStartTime = r10
            r12 = -1
            r0.currentIndex = r12
            java.lang.String[] r13 = r0.currentFileNames
            r13[r8] = r7
            r14 = 1
            java.lang.Integer r15 = java.lang.Integer.valueOf(r14)
            r13[r14] = r7
            r12 = 2
            r13[r12] = r7
            r0.avatarsDialogId = r10
            r0.canEditAvatar = r8
            r0.totalImagesCount = r8
            r0.totalImagesCountMerge = r8
            r0.currentEditMode = r8
            r0.isFirstLoading = r14
            r0.needSearchImageInArr = r8
            r0.loadingMoreImages = r8
            boolean[] r13 = r0.endReached
            r13[r8] = r8
            long r7 = r0.mergeDialogId
            int r17 = (r7 > r10 ? 1 : (r7 == r10 ? 0 : -1))
            if (r17 != 0) goto L_0x005a
            r7 = 1
            goto L_0x005b
        L_0x005a:
            r7 = 0
        L_0x005b:
            r13[r14] = r7
            r7 = 0
            r0.opennedFromMedia = r7
            r0.needCaptionLayout = r7
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r8 = r0.containerView
            r8.setTag(r15)
            r0.playerAutoStarted = r7
            r0.isCurrentVideo = r7
            r0.shownControlsByEnd = r7
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            r7.clear()
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r7 = r0.imagesArrLocations
            r7.clear()
            java.util.ArrayList<java.lang.Long> r7 = r0.imagesArrLocationsSizes
            r7.clear()
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r7 = r0.imagesArrLocationsVideo
            r7.clear()
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Message> r7 = r0.imagesArrMessages
            r7.clear()
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Photo> r7 = r0.avatarsArr
            r7.clear()
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r7 = r0.secureDocuments
            r7.clear()
            java.util.ArrayList<java.lang.Object> r7 = r0.imagesArrLocals
            r7.clear()
            r7 = 0
        L_0x0096:
            if (r7 >= r12) goto L_0x00a9
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r8 = r0.imagesByIds
            r8 = r8[r7]
            r8.clear()
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r8 = r0.imagesByIdsTemp
            r8 = r8[r7]
            r8.clear()
            int r7 = r7 + 1
            goto L_0x0096
        L_0x00a9:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArrTemp
            r7.clear()
            r7 = 0
            r0.currentAvatarLocation = r7
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r7 = r0.containerView
            r8 = 0
            r7.setPadding(r8, r8, r8, r8)
            org.telegram.messenger.ImageReceiver$BitmapHolder r7 = r0.currentThumb
            if (r7 == 0) goto L_0x00be
            r7.release()
        L_0x00be:
            org.telegram.ui.Components.VideoTimelinePlayView r7 = r0.videoTimelineView
            if (r7 == 0) goto L_0x00d0
            int r8 = r0.sendPhotoType
            if (r8 != r14) goto L_0x00cb
            r8 = 0
            r7.setBackground(r8)
            goto L_0x00d0
        L_0x00cb:
            r8 = 2130706432(0x7var_, float:1.7014118E38)
            r7.setBackgroundColor(r8)
        L_0x00d0:
            if (r6 == 0) goto L_0x00d5
            org.telegram.messenger.ImageReceiver$BitmapHolder r7 = r6.thumb
            goto L_0x00d6
        L_0x00d5:
            r7 = 0
        L_0x00d6:
            r0.currentThumb = r7
            if (r6 == 0) goto L_0x00e0
            boolean r7 = r6.isEvent
            if (r7 == 0) goto L_0x00e0
            r7 = 1
            goto L_0x00e1
        L_0x00e0:
            r7 = 0
        L_0x00e1:
            r0.isEvent = r7
            r7 = 0
            r0.sharedMediaType = r7
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r8 = r0.allMediaItem
            int r13 = org.telegram.messenger.R.string.ShowAllMedia
            java.lang.String r10 = "ShowAllMedia"
            java.lang.String r10 = org.telegram.messenger.LocaleController.getString(r10, r13)
            r8.setText(r10)
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.sendItem
            r0.setItemVisible(r8, r7, r7)
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.pipItem
            r0.setItemVisible(r8, r7, r14)
            android.widget.ImageView r8 = r0.cameraItem
            r10 = 8
            r8.setVisibility(r10)
            android.widget.ImageView r8 = r0.cameraItem
            r11 = 0
            r8.setTag(r11)
            android.widget.FrameLayout r8 = r0.bottomLayout
            r8.setVisibility(r7)
            android.widget.FrameLayout r7 = r0.bottomLayout
            r7.setTag(r15)
            android.widget.FrameLayout r7 = r0.bottomLayout
            r7.setTranslationY(r9)
            org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r7 = r0.captionTextViewSwitcher
            r7.setTranslationY(r9)
            android.widget.LinearLayout r7 = r0.bottomButtonsLayout
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.paintButton
            r7.setVisibility(r10)
            org.telegram.ui.PhotoViewer$QualityChooseView r7 = r0.qualityChooseView
            r8 = 4
            if (r7 == 0) goto L_0x013c
            r7.setVisibility(r8)
            org.telegram.ui.Components.PickerBottomLayoutViewer r7 = r0.qualityPicker
            r7.setVisibility(r8)
            org.telegram.ui.PhotoViewer$QualityChooseView r7 = r0.qualityChooseView
            r11 = 0
            r7.setTag(r11)
            goto L_0x013d
        L_0x013c:
            r11 = 0
        L_0x013d:
            android.animation.AnimatorSet r7 = r0.qualityChooseViewAnimation
            if (r7 == 0) goto L_0x0146
            r7.cancel()
            r0.qualityChooseViewAnimation = r11
        L_0x0146:
            r0.setDoubleTapEnabled(r14)
            r7 = 0
            r0.allowShare = r7
            r0.slideshowMessageId = r7
            r0.nameOverride = r11
            r0.dateOverride = r7
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r7.hideSubItem(r12)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r7.hideSubItem(r8)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r11 = 10
            r7.hideSubItem(r11)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 11
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 14
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 15
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 17
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 16
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 6
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r7 = r0.speedItem
            r7.setVisibility(r10)
            org.telegram.ui.ActionBar.ActionBarPopupWindow$GapView r7 = r0.speedGap
            r7.setVisibility(r10)
            org.telegram.ui.ActionBar.ActionBar r7 = r0.actionBar
            r7.setTranslationY(r9)
            org.telegram.ui.Components.CheckBox r7 = r0.checkImageView
            r13 = 1065353216(0x3var_, float:1.0)
            r7.setAlpha(r13)
            org.telegram.ui.Components.CheckBox r7 = r0.checkImageView
            r7.setTranslationY(r9)
            org.telegram.ui.Components.CheckBox r7 = r0.checkImageView
            r7.setVisibility(r10)
            org.telegram.ui.ActionBar.ActionBar r7 = r0.actionBar
            r11 = 0
            r7.setTitleRightMargin(r11)
            org.telegram.ui.PhotoViewer$CounterView r7 = r0.photosCounterView
            r7.setAlpha(r13)
            org.telegram.ui.PhotoViewer$CounterView r7 = r0.photosCounterView
            r7.setTranslationY(r9)
            org.telegram.ui.PhotoViewer$CounterView r7 = r0.photosCounterView
            r7.setVisibility(r10)
            android.widget.FrameLayout r7 = r0.pickerView
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.pickerViewSendButton
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.pickerViewSendButton
            r7.setTranslationY(r9)
            android.widget.FrameLayout r7 = r0.pickerView
            r7.setAlpha(r13)
            android.widget.ImageView r7 = r0.pickerViewSendButton
            r7.setAlpha(r13)
            android.widget.FrameLayout r7 = r0.pickerView
            r7.setTranslationY(r9)
            android.widget.ImageView r7 = r0.paintItem
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.paintItem
            r11 = 0
            r7.setTag(r11)
            android.widget.ImageView r7 = r0.cropItem
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.tuneItem
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.tuneItem
            r7.setTag(r11)
            android.widget.ImageView r7 = r0.timeItem
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.rotateItem
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.mirrorItem
            r7.setVisibility(r10)
            android.widget.FrameLayout r7 = r0.pickerView
            android.view.ViewGroup$LayoutParams r7 = r7.getLayoutParams()
            r11 = -2
            r7.height = r11
            android.widget.TextView r7 = r0.docInfoTextView
            r7.setVisibility(r10)
            android.widget.TextView r7 = r0.docNameTextView
            r7.setVisibility(r10)
            r7 = 0
            r0.showVideoTimeline(r7, r7)
            android.widget.TextView r11 = r0.videoAvatarTooltip
            r11.setVisibility(r10)
            android.widget.ImageView r11 = r0.compressItem
            r11.setVisibility(r10)
            org.telegram.ui.Components.PhotoViewerCaptionEnterView r11 = r0.captionEditText
            r11.setVisibility(r10)
            org.telegram.ui.Components.RecyclerListView r11 = r0.mentionListView
            r11.setVisibility(r10)
            android.widget.ImageView r11 = r0.muteItem
            org.telegram.messenger.AndroidUtilities.updateViewVisibilityAnimated(r11, r7, r13, r7)
            org.telegram.ui.ActionBar.ActionBar r11 = r0.actionBar
            r9 = 0
            r11.setSubtitle(r9)
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.masksItem
            r0.setItemVisible(r9, r7, r14)
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.shareItem
            r9.setVisibility(r10)
            r0.muteVideo = r7
            android.widget.ImageView r7 = r0.muteItem
            int r9 = org.telegram.messenger.R.drawable.video_send_unmute
            r7.setImageResource(r9)
            org.telegram.ui.Components.PickerBottomLayoutViewer r7 = r0.editorDoneLayout
            r7.setVisibility(r10)
            org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r7 = r0.captionTextViewSwitcher
            r9 = 0
            r7.setTag(r9)
            org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r7 = r0.captionTextViewSwitcher
            r7.setVisibility(r8)
            org.telegram.ui.Components.PhotoCropView r7 = r0.photoCropView
            if (r7 == 0) goto L_0x0268
            r7.setVisibility(r10)
        L_0x0268:
            org.telegram.ui.Components.PhotoFilterView r7 = r0.photoFilterView
            if (r7 == 0) goto L_0x026f
            r7.setVisibility(r10)
        L_0x026f:
            r7 = 0
        L_0x0270:
            r9 = 3
            if (r7 >= r9) goto L_0x0286
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r9 = r0.photoProgressViews
            r11 = r9[r7]
            if (r11 == 0) goto L_0x0281
            r9 = r9[r7]
            r11 = -1
            r12 = 0
            r9.setBackgroundState(r11, r12, r14)
            goto L_0x0282
        L_0x0281:
            r11 = -1
        L_0x0282:
            int r7 = r7 + 1
            r12 = 2
            goto L_0x0270
        L_0x0286:
            org.telegram.ui.Components.GroupedPhotosListView r7 = r0.groupedPhotosListView
            if (r7 == 0) goto L_0x0297
            r7.reset()
            org.telegram.ui.Components.GroupedPhotosListView r7 = r0.groupedPhotosListView
            boolean r9 = org.telegram.messenger.ApplicationLoader.isNetworkOnline()
            r9 = r9 ^ r14
            r7.setAnimateBackground(r9)
        L_0x0297:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r7 = r0.placeProvider
            if (r7 == 0) goto L_0x02a9
            int r7 = r7.getTotalImageCount()
            if (r7 <= 0) goto L_0x02a9
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r7 = r0.placeProvider
            int r7 = r7.getTotalImageCount()
            r0.totalImagesCount = r7
        L_0x02a9:
            if (r1 == 0) goto L_0x02dc
            android.content.Context r7 = org.telegram.messenger.ApplicationLoader.applicationContext
            java.lang.String r9 = "playback_speed"
            r11 = 0
            android.content.SharedPreferences r7 = r7.getSharedPreferences(r9, r11)
            java.lang.StringBuilder r9 = new java.lang.StringBuilder
            r9.<init>()
            java.lang.String r11 = "speed"
            r9.append(r11)
            long r11 = r19.getDialogId()
            r9.append(r11)
            java.lang.String r11 = "_"
            r9.append(r11)
            int r11 = r19.getId()
            r9.append(r11)
            java.lang.String r9 = r9.toString()
            float r7 = r7.getFloat(r9, r13)
            r0.currentVideoSpeed = r7
            goto L_0x02de
        L_0x02dc:
            r0.currentVideoSpeed = r13
        L_0x02de:
            r18.setMenuItemIcon()
            if (r1 == 0) goto L_0x0303
            int r7 = r0.currentAccount
            org.telegram.messenger.MessagesController r7 = org.telegram.messenger.MessagesController.getInstance(r7)
            long r11 = r19.getChatId()
            boolean r7 = r7.isChatNoForwards((long) r11)
            if (r7 != 0) goto L_0x0301
            org.telegram.tgnet.TLRPC$Message r7 = r1.messageOwner
            if (r7 == 0) goto L_0x02fb
            boolean r7 = r7.noforwards
            if (r7 != 0) goto L_0x0301
        L_0x02fb:
            boolean r7 = r19.hasRevealedExtendedMedia()
            if (r7 == 0) goto L_0x0303
        L_0x0301:
            r7 = 1
            goto L_0x0304
        L_0x0303:
            r7 = 0
        L_0x0304:
            java.lang.String r9 = "ShowAllGIFs"
            java.lang.String r11 = "ShowAllFiles"
            r12 = 5
            if (r1 == 0) goto L_0x047f
            if (r2 != 0) goto L_0x047f
            org.telegram.tgnet.TLRPC$Message r2 = r1.messageOwner
            if (r2 == 0) goto L_0x03af
            org.telegram.tgnet.TLRPC$MessageMedia r2 = org.telegram.messenger.MessageObject.getMedia(r2)
            boolean r2 = r2 instanceof org.telegram.tgnet.TLRPC$TL_messageMediaWebPage
            if (r2 == 0) goto L_0x03af
            org.telegram.tgnet.TLRPC$Message r2 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r2 = org.telegram.messenger.MessageObject.getMedia(r2)
            org.telegram.tgnet.TLRPC$WebPage r2 = r2.webpage
            if (r2 == 0) goto L_0x03af
            org.telegram.tgnet.TLRPC$Message r2 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r2 = org.telegram.messenger.MessageObject.getMedia(r2)
            org.telegram.tgnet.TLRPC$WebPage r2 = r2.webpage
            java.lang.String r3 = r2.site_name
            if (r3 == 0) goto L_0x03af
            java.lang.String r3 = r3.toLowerCase()
            java.lang.String r4 = "instagram"
            boolean r4 = r3.equals(r4)
            if (r4 != 0) goto L_0x034d
            java.lang.String r4 = "twitter"
            boolean r3 = r3.equals(r4)
            if (r3 != 0) goto L_0x034d
            java.lang.String r3 = r2.type
            java.lang.String r4 = "telegram_album"
            boolean r3 = r4.equals(r3)
            if (r3 == 0) goto L_0x03af
        L_0x034d:
            java.lang.String r3 = r2.author
            boolean r3 = android.text.TextUtils.isEmpty(r3)
            if (r3 != 0) goto L_0x0359
            java.lang.String r3 = r2.author
            r0.nameOverride = r3
        L_0x0359:
            org.telegram.tgnet.TLRPC$Page r3 = r2.cached_page
            boolean r3 = r3 instanceof org.telegram.tgnet.TLRPC$TL_page
            if (r3 == 0) goto L_0x0382
            r3 = 0
        L_0x0360:
            org.telegram.tgnet.TLRPC$Page r4 = r2.cached_page
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PageBlock> r4 = r4.blocks
            int r4 = r4.size()
            if (r3 >= r4) goto L_0x0382
            org.telegram.tgnet.TLRPC$Page r4 = r2.cached_page
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PageBlock> r4 = r4.blocks
            java.lang.Object r4 = r4.get(r3)
            org.telegram.tgnet.TLRPC$PageBlock r4 = (org.telegram.tgnet.TLRPC$PageBlock) r4
            boolean r6 = r4 instanceof org.telegram.tgnet.TLRPC$TL_pageBlockAuthorDate
            if (r6 == 0) goto L_0x037f
            org.telegram.tgnet.TLRPC$TL_pageBlockAuthorDate r4 = (org.telegram.tgnet.TLRPC$TL_pageBlockAuthorDate) r4
            int r2 = r4.published_date
            r0.dateOverride = r2
            goto L_0x0382
        L_0x037f:
            int r3 = r3 + 1
            goto L_0x0360
        L_0x0382:
            r2 = 0
            java.util.ArrayList r3 = r1.getWebPagePhotos(r2, r2)
            boolean r2 = r3.isEmpty()
            if (r2 != 0) goto L_0x03af
            int r2 = r19.getId()
            r0.slideshowMessageId = r2
            r2 = 0
            r0.needSearchImageInArr = r2
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArr
            r2.addAll(r3)
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArr
            int r2 = r2.size()
            r0.totalImagesCount = r2
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArr
            int r2 = r2.indexOf(r1)
            if (r2 >= 0) goto L_0x03ac
            r2 = 0
        L_0x03ac:
            r0.setImageIndex(r2)
        L_0x03af:
            boolean r2 = r19.canPreviewDocument()
            if (r2 == 0) goto L_0x03c3
            r0.sharedMediaType = r14
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r2 = r0.allMediaItem
            int r3 = org.telegram.messenger.R.string.ShowAllFiles
            java.lang.String r3 = org.telegram.messenger.LocaleController.getString(r11, r3)
            r2.setText(r3)
            goto L_0x03d6
        L_0x03c3:
            boolean r2 = r19.isGif()
            if (r2 == 0) goto L_0x03d6
            r0.sharedMediaType = r12
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r2 = r0.allMediaItem
            int r3 = org.telegram.messenger.R.string.ShowAllGIFs
            java.lang.String r3 = org.telegram.messenger.LocaleController.getString(r9, r3)
            r2.setText(r3)
        L_0x03d6:
            boolean r2 = r0.isEmbedVideo
            if (r2 == 0) goto L_0x03ef
            org.telegram.ui.Components.PhotoViewerWebView r2 = r0.photoViewerWebView
            if (r2 == 0) goto L_0x03e4
            boolean r2 = r2.isControllable()
            if (r2 != 0) goto L_0x03ef
        L_0x03e4:
            android.widget.FrameLayout r2 = r0.bottomLayout
            r3 = 0
            r2.setTag(r3)
            android.widget.FrameLayout r2 = r0.bottomLayout
            r2.setVisibility(r10)
        L_0x03ef:
            int r2 = r0.slideshowMessageId
            if (r2 != 0) goto L_0x0489
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArr
            r2.add(r1)
            long r2 = r1.eventId
            r9 = 0
            int r4 = (r2 > r9 ? 1 : (r2 == r9 ? 0 : -1))
            if (r4 == 0) goto L_0x0406
            r2 = 0
            r0.needSearchImageInArr = r2
        L_0x0403:
            r3 = 0
            goto L_0x047b
        L_0x0406:
            r2 = 0
            org.telegram.ui.Components.AnimatedFileDrawable r3 = r0.currentAnimation
            if (r3 == 0) goto L_0x041b
            r0.needSearchImageInArr = r2
            boolean r1 = r19.canForwardMessage()
            if (r1 == 0) goto L_0x0403
            if (r7 != 0) goto L_0x0403
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.sendItem
            r0.setItemVisible(r1, r14, r2)
            goto L_0x0403
        L_0x041b:
            boolean r2 = r1.scheduled
            if (r2 != 0) goto L_0x0469
            org.telegram.tgnet.TLRPC$Message r2 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r2 = org.telegram.messenger.MessageObject.getMedia(r2)
            boolean r2 = r2 instanceof org.telegram.tgnet.TLRPC$TL_messageMediaInvoice
            if (r2 != 0) goto L_0x0469
            org.telegram.tgnet.TLRPC$Message r2 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r2 = org.telegram.messenger.MessageObject.getMedia(r2)
            boolean r2 = r2 instanceof org.telegram.tgnet.TLRPC$TL_messageMediaWebPage
            if (r2 != 0) goto L_0x0469
            org.telegram.tgnet.TLRPC$Message r2 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageAction r2 = r2.action
            if (r2 == 0) goto L_0x043d
            boolean r2 = r2 instanceof org.telegram.tgnet.TLRPC$TL_messageActionEmpty
            if (r2 == 0) goto L_0x0469
        L_0x043d:
            r0.needSearchImageInArr = r14
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r2 = r0.imagesByIds
            r3 = 0
            r2 = r2[r3]
            int r3 = r19.getId()
            r2.put(r3, r1)
            org.telegram.ui.ChatActivity r1 = r0.parentChatActivity
            if (r1 == 0) goto L_0x0455
            boolean r1 = r1.isThreadChat()
            if (r1 != 0) goto L_0x0460
        L_0x0455:
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.showSubItem(r8)
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r2 = 2
            r1.showSubItem(r2)
        L_0x0460:
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.sendItem
            r2 = r7 ^ 1
            r3 = 0
            r0.setItemVisible(r1, r2, r3)
            goto L_0x047b
        L_0x0469:
            r3 = 0
            boolean r2 = r0.isEmbedVideo
            if (r2 == 0) goto L_0x047b
            long r1 = r1.eventId
            r6 = 0
            int r4 = (r1 > r6 ? 1 : (r1 == r6 ? 0 : -1))
            if (r4 != 0) goto L_0x047b
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.sendItem
            r0.setItemVisible(r1, r14, r3)
        L_0x047b:
            r0.setImageIndex(r3)
            goto L_0x0489
        L_0x047f:
            if (r3 == 0) goto L_0x048c
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r1 = r0.secureDocuments
            r1.addAll(r3)
            r0.setImageIndex(r5)
        L_0x0489:
            r2 = 0
            goto L_0x07c7
        L_0x048c:
            if (r20 == 0) goto L_0x0541
            if (r6 == 0) goto L_0x0493
            long r1 = r6.dialogId
            goto L_0x0495
        L_0x0493:
            r1 = 0
        L_0x0495:
            r0.avatarsDialogId = r1
            if (r6 == 0) goto L_0x049f
            boolean r3 = r6.canEdit
            if (r3 == 0) goto L_0x049f
            r3 = 1
            goto L_0x04a0
        L_0x049f:
            r3 = 0
        L_0x04a0:
            r0.canEditAvatar = r3
            if (r21 != 0) goto L_0x04db
            r3 = 0
            int r7 = (r1 > r3 ? 1 : (r1 == r3 ? 0 : -1))
            if (r7 == 0) goto L_0x04db
            int r7 = (r1 > r3 ? 1 : (r1 == r3 ? 0 : -1))
            if (r7 <= 0) goto L_0x04c4
            int r1 = r0.currentAccount
            org.telegram.messenger.MessagesController r1 = org.telegram.messenger.MessagesController.getInstance(r1)
            long r2 = r0.avatarsDialogId
            java.lang.Long r2 = java.lang.Long.valueOf(r2)
            org.telegram.tgnet.TLRPC$User r1 = r1.getUser(r2)
            r2 = 0
            org.telegram.messenger.ImageLocation r1 = org.telegram.messenger.ImageLocation.getForUserOrChat(r1, r2)
            goto L_0x04dd
        L_0x04c4:
            r2 = 0
            int r1 = r0.currentAccount
            org.telegram.messenger.MessagesController r1 = org.telegram.messenger.MessagesController.getInstance(r1)
            long r3 = r0.avatarsDialogId
            long r3 = -r3
            java.lang.Long r3 = java.lang.Long.valueOf(r3)
            org.telegram.tgnet.TLRPC$Chat r1 = r1.getChat(r3)
            org.telegram.messenger.ImageLocation r1 = org.telegram.messenger.ImageLocation.getForUserOrChat(r1, r2)
            goto L_0x04dd
        L_0x04db:
            r1 = r21
        L_0x04dd:
            if (r1 != 0) goto L_0x04e0
            return
        L_0x04e0:
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r2 = r0.imagesArrLocations
            r2.add(r1)
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r2 = r0.imagesArrLocationsVideo
            if (r22 == 0) goto L_0x04ec
            r3 = r22
            goto L_0x04ed
        L_0x04ec:
            r3 = r1
        L_0x04ed:
            r2.add(r3)
            r0.currentAvatarLocation = r1
            java.util.ArrayList<java.lang.Long> r1 = r0.imagesArrLocationsSizes
            if (r6 == 0) goto L_0x04f9
            long r2 = r6.size
            goto L_0x04fb
        L_0x04f9:
            r2 = 0
        L_0x04fb:
            java.lang.Long r2 = java.lang.Long.valueOf(r2)
            r1.add(r2)
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Message> r1 = r0.imagesArrMessages
            r2 = 0
            r1.add(r2)
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Photo> r1 = r0.avatarsArr
            org.telegram.tgnet.TLRPC$TL_photoEmpty r2 = new org.telegram.tgnet.TLRPC$TL_photoEmpty
            r2.<init>()
            r1.add(r2)
            android.widget.LinearLayout r1 = r0.bottomButtonsLayout
            boolean r2 = r0.videoPlayerControlVisible
            if (r2 != 0) goto L_0x0519
            r10 = 0
        L_0x0519:
            r1.setVisibility(r10)
            r0.allowShare = r14
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r2 = 2
            r1.hideSubItem(r2)
            android.widget.LinearLayout r1 = r0.bottomButtonsLayout
            int r1 = r1.getVisibility()
            if (r1 != 0) goto L_0x0534
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r2 = 10
            r1.hideSubItem(r2)
            goto L_0x053b
        L_0x0534:
            r2 = 10
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.showSubItem(r2)
        L_0x053b:
            r1 = 0
            r0.setImageIndex(r1)
            goto L_0x0489
        L_0x0541:
            if (r2 == 0) goto L_0x05dc
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            r1.addAll(r2)
            r1 = 0
        L_0x0549:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArr
            int r2 = r2.size()
            if (r1 >= r2) goto L_0x0575
            java.util.ArrayList<org.telegram.messenger.MessageObject> r2 = r0.imagesArr
            java.lang.Object r2 = r2.get(r1)
            org.telegram.messenger.MessageObject r2 = (org.telegram.messenger.MessageObject) r2
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r3 = r0.imagesByIds
            long r15 = r2.getDialogId()
            long r12 = r0.currentDialogId
            int r4 = (r15 > r12 ? 1 : (r15 == r12 ? 0 : -1))
            if (r4 != 0) goto L_0x0567
            r4 = 0
            goto L_0x0568
        L_0x0567:
            r4 = 1
        L_0x0568:
            r3 = r3[r4]
            int r4 = r2.getId()
            r3.put(r4, r2)
            int r1 = r1 + 1
            r12 = 5
            goto L_0x0549
        L_0x0575:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            java.lang.Object r1 = r1.get(r5)
            org.telegram.messenger.MessageObject r1 = (org.telegram.messenger.MessageObject) r1
            boolean r2 = r1.scheduled
            if (r2 != 0) goto L_0x05cf
            org.telegram.ui.ChatActivity r2 = r0.parentChatActivity
            if (r2 == 0) goto L_0x058b
            boolean r2 = r2.isThreadChat()
            if (r2 != 0) goto L_0x05cf
        L_0x058b:
            r0.opennedFromMedia = r14
            if (r6 == 0) goto L_0x0593
            int r2 = r6.starOffset
            r0.startOffset = r2
        L_0x0593:
            org.telegram.ui.ActionBar.ActionBarMenuItem r2 = r0.menuItem
            r2.showSubItem(r8)
            boolean r2 = r1.canForwardMessage()
            if (r2 == 0) goto L_0x05a6
            if (r7 != 0) goto L_0x05a6
            org.telegram.ui.ActionBar.ActionBarMenuItem r2 = r0.sendItem
            r3 = 0
            r0.setItemVisible(r2, r14, r3)
        L_0x05a6:
            boolean r2 = r1.canPreviewDocument()
            if (r2 == 0) goto L_0x05ba
            r0.sharedMediaType = r14
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r1 = r0.allMediaItem
            int r2 = org.telegram.messenger.R.string.ShowAllFiles
            java.lang.String r2 = org.telegram.messenger.LocaleController.getString(r11, r2)
            r1.setText(r2)
            goto L_0x05d7
        L_0x05ba:
            boolean r1 = r1.isGif()
            if (r1 == 0) goto L_0x05d7
            r1 = 5
            r0.sharedMediaType = r1
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r1 = r0.allMediaItem
            int r2 = org.telegram.messenger.R.string.ShowAllGIFs
            java.lang.String r2 = org.telegram.messenger.LocaleController.getString(r9, r2)
            r1.setText(r2)
            goto L_0x05d7
        L_0x05cf:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            int r1 = r1.size()
            r0.totalImagesCount = r1
        L_0x05d7:
            r0.setImageIndex(r5)
            goto L_0x0489
        L_0x05dc:
            if (r4 == 0) goto L_0x07c3
            int r1 = r0.sendPhotoType
            if (r1 == 0) goto L_0x05f0
            if (r1 == r8) goto L_0x05f0
            r2 = 2
            if (r1 == r2) goto L_0x05ea
            r2 = 5
            if (r1 != r2) goto L_0x0606
        L_0x05ea:
            int r1 = r25.size()
            if (r1 <= r14) goto L_0x0606
        L_0x05f0:
            org.telegram.ui.Components.CheckBox r1 = r0.checkImageView
            r2 = 0
            r1.setVisibility(r2)
            org.telegram.ui.PhotoViewer$CounterView r1 = r0.photosCounterView
            r1.setVisibility(r2)
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            r2 = 1120403456(0x42CLASSNAME, float:100.0)
            int r2 = org.telegram.messenger.AndroidUtilities.dp(r2)
            r1.setTitleRightMargin(r2)
        L_0x0606:
            int r1 = r0.sendPhotoType
            r2 = 2
            if (r1 == r2) goto L_0x060e
            r2 = 5
            if (r1 != r2) goto L_0x0621
        L_0x060e:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r1 = r0.placeProvider
            boolean r1 = r1.canCaptureMorePhotos()
            if (r1 == 0) goto L_0x0621
            android.widget.ImageView r1 = r0.cameraItem
            r2 = 0
            r1.setVisibility(r2)
            android.widget.ImageView r1 = r0.cameraItem
            r1.setTag(r15)
        L_0x0621:
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.setVisibility(r10)
            java.util.ArrayList<java.lang.Object> r1 = r0.imagesArrLocals
            r1.addAll(r4)
            java.util.ArrayList<java.lang.Object> r1 = r0.imagesArrLocals
            java.lang.Object r1 = r1.get(r5)
            boolean r2 = r1 instanceof org.telegram.messenger.MediaController.PhotoEntry
            if (r2 == 0) goto L_0x06d0
            int r2 = r0.sendPhotoType
            r3 = 10
            if (r2 != r3) goto L_0x064c
            android.widget.ImageView r1 = r0.cropItem
            r1.setVisibility(r10)
            android.widget.ImageView r1 = r0.rotateItem
            r1.setVisibility(r10)
            android.widget.ImageView r1 = r0.mirrorItem
            r1.setVisibility(r10)
            goto L_0x06cc
        L_0x064c:
            boolean r3 = r0.isDocumentsPicker
            if (r3 == 0) goto L_0x0679
            android.widget.ImageView r1 = r0.cropItem
            r1.setVisibility(r10)
            android.widget.ImageView r1 = r0.rotateItem
            r1.setVisibility(r10)
            android.widget.ImageView r1 = r0.mirrorItem
            r1.setVisibility(r10)
            android.widget.TextView r1 = r0.docInfoTextView
            r2 = 0
            r1.setVisibility(r2)
            android.widget.TextView r1 = r0.docNameTextView
            r1.setVisibility(r2)
            android.widget.FrameLayout r1 = r0.pickerView
            android.view.ViewGroup$LayoutParams r1 = r1.getLayoutParams()
            r2 = 1118306304(0x42a80000, float:84.0)
            int r2 = org.telegram.messenger.AndroidUtilities.dp(r2)
            r1.height = r2
            goto L_0x06cc
        L_0x0679:
            org.telegram.messenger.MediaController$PhotoEntry r1 = (org.telegram.messenger.MediaController.PhotoEntry) r1
            boolean r1 = r1.isVideo
            if (r1 == 0) goto L_0x06a7
            android.widget.ImageView r1 = r0.cropItem
            r1.setVisibility(r10)
            android.widget.ImageView r1 = r0.rotateItem
            r1.setVisibility(r10)
            android.widget.ImageView r1 = r0.mirrorItem
            r1.setVisibility(r10)
            android.widget.FrameLayout r1 = r0.bottomLayout
            r2 = 0
            r1.setVisibility(r2)
            android.widget.FrameLayout r1 = r0.bottomLayout
            r1.setTag(r15)
            android.widget.FrameLayout r1 = r0.bottomLayout
            r2 = 1111490560(0x42400000, float:48.0)
            int r2 = org.telegram.messenger.AndroidUtilities.dp(r2)
            int r2 = -r2
            float r2 = (float) r2
            r1.setTranslationY(r2)
            goto L_0x06cc
        L_0x06a7:
            android.widget.ImageView r1 = r0.cropItem
            if (r2 == r14) goto L_0x06ad
            r2 = 0
            goto L_0x06af
        L_0x06ad:
            r2 = 8
        L_0x06af:
            r1.setVisibility(r2)
            android.widget.ImageView r1 = r0.rotateItem
            int r2 = r0.sendPhotoType
            if (r2 == r14) goto L_0x06bb
            r2 = 8
            goto L_0x06bc
        L_0x06bb:
            r2 = 0
        L_0x06bc:
            r1.setVisibility(r2)
            android.widget.ImageView r1 = r0.mirrorItem
            int r2 = r0.sendPhotoType
            if (r2 == r14) goto L_0x06c8
            r2 = 8
            goto L_0x06c9
        L_0x06c8:
            r2 = 0
        L_0x06c9:
            r1.setVisibility(r2)
        L_0x06cc:
            boolean r1 = r0.isDocumentsPicker
            r1 = r1 ^ r14
            goto L_0x070b
        L_0x06d0:
            boolean r2 = r1 instanceof org.telegram.tgnet.TLRPC$BotInlineResult
            if (r2 == 0) goto L_0x06e5
            android.widget.ImageView r1 = r0.cropItem
            r1.setVisibility(r10)
            android.widget.ImageView r1 = r0.rotateItem
            r1.setVisibility(r10)
            android.widget.ImageView r1 = r0.mirrorItem
            r1.setVisibility(r10)
        L_0x06e3:
            r1 = 0
            goto L_0x070b
        L_0x06e5:
            android.widget.ImageView r2 = r0.cropItem
            boolean r3 = r1 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r3 == 0) goto L_0x06f3
            org.telegram.messenger.MediaController$SearchImage r1 = (org.telegram.messenger.MediaController.SearchImage) r1
            int r1 = r1.type
            if (r1 != 0) goto L_0x06f3
            r1 = 0
            goto L_0x06f5
        L_0x06f3:
            r1 = 8
        L_0x06f5:
            r2.setVisibility(r1)
            android.widget.ImageView r1 = r0.rotateItem
            r1.setVisibility(r10)
            android.widget.ImageView r1 = r0.mirrorItem
            r1.setVisibility(r10)
            android.widget.ImageView r1 = r0.cropItem
            int r1 = r1.getVisibility()
            if (r1 != 0) goto L_0x06e3
            r1 = 1
        L_0x070b:
            org.telegram.ui.ChatActivity r2 = r0.parentChatActivity
            if (r2 == 0) goto L_0x074f
            org.telegram.ui.Adapters.MentionsAdapter r3 = r0.mentionsAdapter
            org.telegram.tgnet.TLRPC$ChatFull r2 = r2.chatInfo
            r3.setChatInfo(r2)
            org.telegram.ui.Adapters.MentionsAdapter r2 = r0.mentionsAdapter
            org.telegram.ui.ChatActivity r3 = r0.parentChatActivity
            org.telegram.tgnet.TLRPC$Chat r3 = r3.currentChat
            if (r3 == 0) goto L_0x0720
            r3 = 1
            goto L_0x0721
        L_0x0720:
            r3 = 0
        L_0x0721:
            r2.setNeedUsernames(r3)
            org.telegram.ui.Adapters.MentionsAdapter r2 = r0.mentionsAdapter
            r3 = 0
            r2.setNeedBotContext(r3)
            if (r1 == 0) goto L_0x0738
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r1 = r0.placeProvider
            if (r1 == 0) goto L_0x0736
            boolean r1 = r1.allowCaption()
            if (r1 == 0) goto L_0x0738
        L_0x0736:
            r1 = 1
            goto L_0x0739
        L_0x0738:
            r1 = 0
        L_0x0739:
            r0.needCaptionLayout = r1
            org.telegram.ui.Components.PhotoViewerCaptionEnterView r2 = r0.captionEditText
            if (r1 == 0) goto L_0x0741
            r1 = 0
            goto L_0x0743
        L_0x0741:
            r1 = 8
        L_0x0743:
            r2.setVisibility(r1)
            boolean r1 = r0.needCaptionLayout
            if (r1 == 0) goto L_0x074f
            org.telegram.ui.Components.PhotoViewerCaptionEnterView r1 = r0.captionEditText
            r1.onCreate()
        L_0x074f:
            android.widget.FrameLayout r1 = r0.pickerView
            r2 = 0
            r1.setVisibility(r2)
            android.widget.ImageView r1 = r0.pickerViewSendButton
            r1.setVisibility(r2)
            android.widget.ImageView r1 = r0.pickerViewSendButton
            r3 = 0
            r1.setTranslationY(r3)
            android.widget.ImageView r1 = r0.pickerViewSendButton
            r1.setAlpha(r13)
            android.view.View r1 = r0.navigationBar
            if (r1 == 0) goto L_0x0771
            r1.setVisibility(r2)
            android.view.View r1 = r0.navigationBar
            r1.setAlpha(r13)
        L_0x0771:
            android.widget.FrameLayout r1 = r0.bottomLayout
            r1.setVisibility(r10)
            android.widget.FrameLayout r1 = r0.bottomLayout
            r2 = 0
            r1.setTag(r2)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r0.containerView
            r1.setTag(r2)
            r0.setImageIndex(r5)
            int r1 = r0.sendPhotoType
            if (r1 != r14) goto L_0x0794
            android.widget.ImageView r1 = r0.paintItem
            r3 = 0
            r1.setVisibility(r3)
            android.widget.ImageView r1 = r0.tuneItem
            r1.setVisibility(r3)
            goto L_0x07bf
        L_0x0794:
            if (r1 == r8) goto L_0x07b5
            r3 = 5
            if (r1 == r3) goto L_0x07b5
            android.widget.ImageView r1 = r0.paintItem
            java.lang.Object r3 = r1.getTag()
            if (r3 == 0) goto L_0x07a3
            r3 = 0
            goto L_0x07a5
        L_0x07a3:
            r3 = 8
        L_0x07a5:
            r1.setVisibility(r3)
            android.widget.ImageView r1 = r0.tuneItem
            java.lang.Object r3 = r1.getTag()
            if (r3 == 0) goto L_0x07b1
            r10 = 0
        L_0x07b1:
            r1.setVisibility(r10)
            goto L_0x07bf
        L_0x07b5:
            android.widget.ImageView r1 = r0.paintItem
            r1.setVisibility(r10)
            android.widget.ImageView r1 = r0.tuneItem
            r1.setVisibility(r10)
        L_0x07bf:
            r18.updateSelectedCount()
            goto L_0x07c7
        L_0x07c3:
            r2 = 0
            r0.setImageIndex(r5)
        L_0x07c7:
            org.telegram.ui.Components.AnimatedFileDrawable r1 = r0.currentAnimation
            if (r1 != 0) goto L_0x084f
            boolean r1 = r0.isEvent
            if (r1 != 0) goto L_0x084f
            long r3 = r0.currentDialogId
            r6 = 0
            int r1 = (r3 > r6 ? 1 : (r3 == r6 ? 0 : -1))
            if (r1 == 0) goto L_0x082a
            int r1 = r0.totalImagesCount
            if (r1 != 0) goto L_0x082a
            org.telegram.messenger.MessageObject r1 = r0.currentMessageObject
            if (r1 == 0) goto L_0x082a
            boolean r3 = r1.scheduled
            if (r3 != 0) goto L_0x082a
            org.telegram.tgnet.TLRPC$Message r1 = r1.messageOwner
            int r1 = org.telegram.messenger.MediaDataController.getMediaType(r1)
            int r3 = r0.sharedMediaType
            if (r1 != r3) goto L_0x084f
            int r1 = r0.currentAccount
            org.telegram.messenger.MediaDataController r1 = org.telegram.messenger.MediaDataController.getInstance(r1)
            long r3 = r0.currentDialogId
            int r6 = r0.sharedMediaType
            int r7 = r0.classGuid
            r8 = 1
            r19 = r1
            r20 = r3
            r22 = r6
            r23 = r7
            r24 = r8
            r19.getMediaCount(r20, r22, r23, r24)
            long r3 = r0.mergeDialogId
            r6 = 0
            int r1 = (r3 > r6 ? 1 : (r3 == r6 ? 0 : -1))
            if (r1 == 0) goto L_0x084f
            int r1 = r0.currentAccount
            org.telegram.messenger.MediaDataController r1 = org.telegram.messenger.MediaDataController.getInstance(r1)
            long r3 = r0.mergeDialogId
            int r6 = r0.sharedMediaType
            int r7 = r0.classGuid
            r8 = 1
            r19 = r1
            r20 = r3
            r22 = r6
            r23 = r7
            r24 = r8
            r19.getMediaCount(r20, r22, r23, r24)
            goto L_0x084f
        L_0x082a:
            long r3 = r0.avatarsDialogId
            r6 = 0
            int r1 = (r3 > r6 ? 1 : (r3 == r6 ? 0 : -1))
            if (r1 == 0) goto L_0x084f
            int r1 = r0.currentAccount
            org.telegram.messenger.MessagesController r1 = org.telegram.messenger.MessagesController.getInstance(r1)
            long r3 = r0.avatarsDialogId
            r6 = 80
            r7 = 0
            r8 = 1
            int r9 = r0.classGuid
            r19 = r1
            r20 = r3
            r22 = r6
            r23 = r7
            r24 = r8
            r25 = r9
            r19.loadDialogPhotos(r20, r22, r23, r24, r25)
        L_0x084f:
            org.telegram.messenger.MessageObject r1 = r0.currentMessageObject
            if (r1 == 0) goto L_0x0859
            boolean r1 = r1.isVideo()
            if (r1 != 0) goto L_0x087b
        L_0x0859:
            org.telegram.tgnet.TLRPC$BotInlineResult r1 = r0.currentBotInlineResult
            if (r1 == 0) goto L_0x0871
            java.lang.String r1 = r1.type
            java.lang.String r3 = "video"
            boolean r1 = r1.equals(r3)
            if (r1 != 0) goto L_0x087b
            org.telegram.tgnet.TLRPC$BotInlineResult r1 = r0.currentBotInlineResult
            org.telegram.tgnet.TLRPC$Document r1 = r1.document
            boolean r1 = org.telegram.messenger.MessageObject.isVideoDocument(r1)
            if (r1 != 0) goto L_0x087b
        L_0x0871:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r0.pageBlocksAdapter
            if (r1 == 0) goto L_0x0883
            boolean r1 = r1.isVideo(r5)
            if (r1 == 0) goto L_0x0883
        L_0x087b:
            r0.playerAutoStarted = r14
            r1 = 0
            r0.onActionClick(r1)
            goto L_0x08f5
        L_0x0883:
            java.util.ArrayList<java.lang.Object> r1 = r0.imagesArrLocals
            boolean r1 = r1.isEmpty()
            if (r1 != 0) goto L_0x08f5
            java.util.ArrayList<java.lang.Object> r1 = r0.imagesArrLocals
            java.lang.Object r1 = r1.get(r5)
            org.telegram.ui.ChatActivity r3 = r0.parentChatActivity
            if (r3 == 0) goto L_0x089a
            org.telegram.tgnet.TLRPC$User r7 = r3.getCurrentUser()
            goto L_0x089b
        L_0x089a:
            r7 = r2
        L_0x089b:
            boolean r2 = r0.isDocumentsPicker
            if (r2 != 0) goto L_0x08c7
            org.telegram.ui.ChatActivity r2 = r0.parentChatActivity
            if (r2 == 0) goto L_0x08c7
            boolean r2 = r2.isSecretChat()
            if (r2 != 0) goto L_0x08c7
            org.telegram.ui.ChatActivity r2 = r0.parentChatActivity
            boolean r2 = r2.isInScheduleMode()
            if (r2 != 0) goto L_0x08c7
            if (r7 == 0) goto L_0x08c7
            boolean r2 = r7.bot
            if (r2 != 0) goto L_0x08c7
            boolean r2 = org.telegram.messenger.UserObject.isUserSelf(r7)
            if (r2 != 0) goto L_0x08c7
            org.telegram.ui.ChatActivity r2 = r0.parentChatActivity
            boolean r2 = r2.isEditingMessageMedia()
            if (r2 != 0) goto L_0x08c7
            r7 = 1
            goto L_0x08c8
        L_0x08c7:
            r7 = 0
        L_0x08c8:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r2 = r0.placeProvider
            if (r2 == 0) goto L_0x08d3
            org.telegram.messenger.MessageObject r2 = r2.getEditingMessageObject()
            if (r2 == 0) goto L_0x08d3
            r7 = 0
        L_0x08d3:
            boolean r2 = r1 instanceof org.telegram.tgnet.TLRPC$BotInlineResult
            if (r2 == 0) goto L_0x08d9
            r7 = 0
            goto L_0x08ed
        L_0x08d9:
            boolean r2 = r1 instanceof org.telegram.messenger.MediaController.PhotoEntry
            if (r2 == 0) goto L_0x08de
            goto L_0x08ed
        L_0x08de:
            if (r7 == 0) goto L_0x08ed
            boolean r2 = r1 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r2 == 0) goto L_0x08ed
            org.telegram.messenger.MediaController$SearchImage r1 = (org.telegram.messenger.MediaController.SearchImage) r1
            int r1 = r1.type
            if (r1 != 0) goto L_0x08eb
            goto L_0x08ec
        L_0x08eb:
            r14 = 0
        L_0x08ec:
            r7 = r14
        L_0x08ed:
            if (r7 == 0) goto L_0x08f5
            android.widget.ImageView r1 = r0.timeItem
            r2 = 0
            r1.setVisibility(r2)
        L_0x08f5:
            r18.checkFullscreenButton()
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.onPhotoShow(org.telegram.messenger.MessageObject, org.telegram.tgnet.TLRPC$FileLocation, org.telegram.messenger.ImageLocation, org.telegram.messenger.ImageLocation, java.util.ArrayList, java.util.ArrayList, java.util.List, int, org.telegram.ui.PhotoViewer$PlaceProviderObject):void");
    }

    /* JADX WARNING: Code restructure failed: missing block: B:4:0x0008, code lost:
        r0 = r0.currentChat;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private boolean canSendMediaToParentChatActivity() {
        /*
            r2 = this;
            org.telegram.ui.ChatActivity r0 = r2.parentChatActivity
            if (r0 == 0) goto L_0x001e
            org.telegram.tgnet.TLRPC$User r1 = r0.currentUser
            if (r1 != 0) goto L_0x001c
            org.telegram.tgnet.TLRPC$Chat r0 = r0.currentChat
            if (r0 == 0) goto L_0x001e
            boolean r0 = org.telegram.messenger.ChatObject.isNotInChat(r0)
            if (r0 != 0) goto L_0x001e
            org.telegram.ui.ChatActivity r0 = r2.parentChatActivity
            org.telegram.tgnet.TLRPC$Chat r0 = r0.currentChat
            boolean r0 = org.telegram.messenger.ChatObject.canSendMedia(r0)
            if (r0 == 0) goto L_0x001e
        L_0x001c:
            r0 = 1
            goto L_0x001f
        L_0x001e:
            r0 = 0
        L_0x001f:
            return r0
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.canSendMediaToParentChatActivity():boolean");
    }

    private void setDoubleTapEnabled(boolean z) {
        this.doubleTapEnabled = z;
        this.gestureDetector.setOnDoubleTapListener(z ? this : null);
    }

    /* access modifiers changed from: private */
    public void setImages() {
        if (this.animationInProgress == 0) {
            setIndexToImage(this.centerImage, this.currentIndex, (CropTransform) null);
            setIndexToPaintingOverlay(this.currentIndex, this.paintingOverlay);
            setIndexToImage(this.rightImage, this.currentIndex + 1, this.rightCropTransform);
            setIndexToPaintingOverlay(this.currentIndex + 1, this.rightPaintingOverlay);
            setIndexToImage(this.leftImage, this.currentIndex - 1, this.leftCropTransform);
            setIndexToPaintingOverlay(this.currentIndex - 1, this.leftPaintingOverlay);
        }
    }

    /* JADX WARNING: Code restructure failed: missing block: B:18:0x008a, code lost:
        r6 = r1.messageOwner;
     */
    /* JADX WARNING: Removed duplicated region for block: B:313:0x077b  */
    /* JADX WARNING: Removed duplicated region for block: B:314:0x0782  */
    /* JADX WARNING: Removed duplicated region for block: B:373:0x08b4  */
    /* JADX WARNING: Removed duplicated region for block: B:393:0x09c5  */
    /* JADX WARNING: Removed duplicated region for block: B:427:0x0a8a  */
    /* JADX WARNING: Removed duplicated region for block: B:440:0x0ab9  */
    /* JADX WARNING: Removed duplicated region for block: B:447:0x0adf  */
    /* JADX WARNING: Removed duplicated region for block: B:450:0x0aee  */
    /* JADX WARNING: Removed duplicated region for block: B:453:0x0b08  */
    /* JADX WARNING: Removed duplicated region for block: B:456:0x0b30  */
    /* JADX WARNING: Removed duplicated region for block: B:478:0x0b9c  */
    /* JADX WARNING: Removed duplicated region for block: B:479:0x0b9e  */
    /* JADX WARNING: Removed duplicated region for block: B:482:0x0ba6  */
    /* JADX WARNING: Removed duplicated region for block: B:483:0x0ba8  */
    /* JADX WARNING: Removed duplicated region for block: B:486:0x0bb0  */
    /* JADX WARNING: Removed duplicated region for block: B:487:0x0bb2  */
    /* JADX WARNING: Removed duplicated region for block: B:490:0x0bba  */
    /* JADX WARNING: Removed duplicated region for block: B:491:0x0bbc  */
    /* JADX WARNING: Removed duplicated region for block: B:494:0x0bc4  */
    /* JADX WARNING: Removed duplicated region for block: B:506:0x0bdd  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private void setIsAboutToSwitchToIndex(int r34, boolean r35, boolean r36) {
        /*
            r33 = this;
            r0 = r33
            r1 = r34
            r2 = r36
            if (r35 != 0) goto L_0x000d
            int r3 = r0.switchingToIndex
            if (r3 != r1) goto L_0x000d
            return
        L_0x000d:
            r0.switchingToIndex = r1
            java.lang.String r3 = r33.getFileName(r34)
            r4 = 0
            if (r2 == 0) goto L_0x0043
            int r5 = android.os.Build.VERSION.SDK_INT
            r6 = 19
            if (r5 < r6) goto L_0x0043
            android.transition.TransitionSet r5 = new android.transition.TransitionSet
            r5.<init>()
            android.transition.Fade r6 = new android.transition.Fade
            r6.<init>()
            r5.addTransition(r6)
            android.transition.ChangeBounds r6 = new android.transition.ChangeBounds
            r6.<init>()
            r5.addTransition(r6)
            r5.setOrdering(r4)
            r6 = 220(0xdc, double:1.087E-321)
            r5.setDuration(r6)
            org.telegram.ui.Components.CubicBezierInterpolator r6 = org.telegram.ui.Components.CubicBezierInterpolator.DEFAULT
            r5.setInterpolator(r6)
            android.widget.LinearLayout r6 = r0.itemsLayout
            android.transition.TransitionManager.beginDelayedTransition(r6, r5)
        L_0x0043:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r5 = r0.imagesArr
            boolean r5 = r5.isEmpty()
            java.lang.String r7 = "AttachVideo"
            java.lang.String r9 = "AttachPhoto"
            java.lang.String r13 = "Of"
            r15 = 11
            r11 = 6
            java.lang.String r10 = ""
            r14 = 0
            r12 = 1
            if (r5 != 0) goto L_0x06bb
            int r1 = r0.switchingToIndex
            if (r1 < 0) goto L_0x06ba
            java.util.ArrayList<org.telegram.messenger.MessageObject> r5 = r0.imagesArr
            int r5 = r5.size()
            if (r1 < r5) goto L_0x0066
            goto L_0x06ba
        L_0x0066:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            int r5 = r0.switchingToIndex
            java.lang.Object r1 = r1.get(r5)
            org.telegram.messenger.MessageObject r1 = (org.telegram.messenger.MessageObject) r1
            boolean r5 = r1.isVideo()
            boolean r18 = r1.isInvoice()
            int r6 = r0.currentAccount
            org.telegram.messenger.MessagesController r6 = org.telegram.messenger.MessagesController.getInstance(r6)
            r21 = r9
            long r8 = r1.getChatId()
            boolean r6 = r6.isChatNoForwards((long) r8)
            if (r6 != 0) goto L_0x009b
            org.telegram.tgnet.TLRPC$Message r6 = r1.messageOwner
            if (r6 == 0) goto L_0x0092
            boolean r6 = r6.noforwards
            if (r6 != 0) goto L_0x009b
        L_0x0092:
            boolean r6 = r1.hasRevealedExtendedMedia()
            if (r6 == 0) goto L_0x0099
            goto L_0x009b
        L_0x0099:
            r6 = 0
            goto L_0x009c
        L_0x009b:
            r6 = 1
        L_0x009c:
            if (r18 == 0) goto L_0x00d9
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.masksItem
            r0.setItemVisible(r3, r4, r12)
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r3.hideSubItem(r11)
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r3.hideSubItem(r15)
            org.telegram.tgnet.TLRPC$Message r3 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r3 = org.telegram.messenger.MessageObject.getMedia(r3)
            java.lang.String r3 = r3.description
            r0.allowShare = r4
            android.widget.FrameLayout r5 = r0.bottomLayout
            r8 = 1111490560(0x42400000, float:48.0)
            int r9 = org.telegram.messenger.AndroidUtilities.dp(r8)
            float r9 = (float) r9
            r5.setTranslationY(r9)
            org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r5 = r0.captionTextViewSwitcher
            int r8 = org.telegram.messenger.AndroidUtilities.dp(r8)
            float r8 = (float) r8
            r5.setTranslationY(r8)
            org.telegram.ui.Components.FadingTextViewLayout r5 = r0.nameTextView
            r5.setText(r10)
            org.telegram.ui.Components.FadingTextViewLayout r5 = r0.dateTextView
            r5.setText(r10)
            goto L_0x033b
        L_0x00d9:
            r8 = r6 ^ 1
            r0.allowShare = r8
            boolean r8 = r1.isNewGif()
            if (r8 == 0) goto L_0x00ee
            boolean r8 = r0.allowShare
            if (r8 == 0) goto L_0x00ee
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r9 = 14
            r8.showSubItem(r9)
        L_0x00ee:
            org.telegram.ui.ChatActivity r8 = r0.parentChatActivity
            if (r8 == 0) goto L_0x00fa
            boolean r8 = r8.isInScheduleMode()
            if (r8 == 0) goto L_0x00fa
            r8 = 1
            goto L_0x00fb
        L_0x00fa:
            r8 = 0
        L_0x00fb:
            boolean r8 = r1.canDeleteMessage(r8, r14)
            if (r8 == 0) goto L_0x010b
            int r8 = r0.slideshowMessageId
            if (r8 != 0) goto L_0x010b
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.showSubItem(r11)
            goto L_0x0110
        L_0x010b:
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.hideSubItem(r11)
        L_0x0110:
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.checkHideMenuItem()
            boolean r8 = r0.isEmbedVideo
            if (r8 == 0) goto L_0x0125
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.showSubItem(r15)
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.pipItem
            r0.setItemVisible(r8, r12, r4)
            goto L_0x0208
        L_0x0125:
            if (r5 == 0) goto L_0x01c5
            if (r6 == 0) goto L_0x0171
            int r8 = r0.slideshowMessageId
            if (r8 != 0) goto L_0x0144
            org.telegram.tgnet.TLRPC$Message r8 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r8 = org.telegram.messenger.MessageObject.getMedia(r8)
            org.telegram.tgnet.TLRPC$WebPage r8 = r8.webpage
            if (r8 == 0) goto L_0x016b
            org.telegram.tgnet.TLRPC$Message r8 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r8 = org.telegram.messenger.MessageObject.getMedia(r8)
            org.telegram.tgnet.TLRPC$WebPage r8 = r8.webpage
            java.lang.String r8 = r8.url
            if (r8 == 0) goto L_0x016b
            goto L_0x0171
        L_0x0144:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r8 = r0.imagesArr
            java.lang.Object r8 = r8.get(r4)
            org.telegram.messenger.MessageObject r8 = (org.telegram.messenger.MessageObject) r8
            org.telegram.tgnet.TLRPC$Message r8 = r8.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r8 = org.telegram.messenger.MessageObject.getMedia(r8)
            org.telegram.tgnet.TLRPC$WebPage r8 = r8.webpage
            if (r8 == 0) goto L_0x016b
            java.util.ArrayList<org.telegram.messenger.MessageObject> r8 = r0.imagesArr
            java.lang.Object r8 = r8.get(r4)
            org.telegram.messenger.MessageObject r8 = (org.telegram.messenger.MessageObject) r8
            org.telegram.tgnet.TLRPC$Message r8 = r8.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r8 = org.telegram.messenger.MessageObject.getMedia(r8)
            org.telegram.tgnet.TLRPC$WebPage r8 = r8.webpage
            java.lang.String r8 = r8.url
            if (r8 == 0) goto L_0x016b
            goto L_0x0171
        L_0x016b:
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.hideSubItem(r15)
            goto L_0x0176
        L_0x0171:
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.showSubItem(r15)
        L_0x0176:
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.masksItem
            int r8 = r8.getVisibility()
            if (r8 != 0) goto L_0x0180
            r8 = 1
            goto L_0x0181
        L_0x0180:
            r8 = 0
        L_0x0181:
            if (r8 == 0) goto L_0x0188
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.masksItem
            r0.setItemVisible(r9, r4, r4)
        L_0x0188:
            boolean r9 = r0.pipAvailable
            if (r9 != 0) goto L_0x019a
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.pipItem
            r9.setEnabled(r4)
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.pipItem
            r8 = r8 ^ r12
            r15 = 1056964608(0x3var_, float:0.5)
            r0.setItemVisible(r9, r12, r8, r15)
            goto L_0x01a0
        L_0x019a:
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.pipItem
            r8 = r8 ^ r12
            r0.setItemVisible(r9, r12, r8)
        L_0x01a0:
            boolean r8 = r1.hasAttachedStickers()
            if (r8 == 0) goto L_0x01b8
            long r8 = r1.getDialogId()
            boolean r8 = org.telegram.messenger.DialogObject.isEncryptedDialog(r8)
            if (r8 != 0) goto L_0x01b8
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r9 = 15
            r8.showSubItem(r9)
            goto L_0x01bf
        L_0x01b8:
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r9 = 15
            r8.hideSubItem(r9)
        L_0x01bf:
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.checkHideMenuItem()
            goto L_0x0208
        L_0x01c5:
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r8 = r0.speedItem
            r9 = 8
            r8.setVisibility(r9)
            org.telegram.ui.ActionBar.ActionBarPopupWindow$GapView r8 = r0.speedGap
            r8.setVisibility(r9)
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.hideSubItem(r15)
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.checkHideMenuItem()
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.pipItem
            int r8 = r8.getVisibility()
            if (r8 != 0) goto L_0x01e5
            r8 = 1
            goto L_0x01e6
        L_0x01e5:
            r8 = 0
        L_0x01e6:
            boolean r9 = r1.hasAttachedStickers()
            if (r9 == 0) goto L_0x01f8
            long r19 = r1.getDialogId()
            boolean r9 = org.telegram.messenger.DialogObject.isEncryptedDialog(r19)
            if (r9 != 0) goto L_0x01f8
            r9 = 1
            goto L_0x01f9
        L_0x01f8:
            r9 = 0
        L_0x01f9:
            if (r8 == 0) goto L_0x0202
            org.telegram.ui.ActionBar.ActionBarMenuItem r15 = r0.pipItem
            r11 = r9 ^ 1
            r0.setItemVisible(r15, r4, r11)
        L_0x0202:
            org.telegram.ui.ActionBar.ActionBarMenuItem r11 = r0.masksItem
            r8 = r8 ^ r12
            r0.setItemVisible(r11, r9, r8)
        L_0x0208:
            boolean r8 = r0.shouldMessageObjectAutoPlayed(r1)
            if (r8 != 0) goto L_0x0312
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r8 = r0.placeProvider
            int r9 = r0.switchingToIndex
            java.lang.CharSequence r8 = r8.getTitleFor(r9)
            boolean r8 = android.text.TextUtils.isEmpty(r8)
            if (r8 == 0) goto L_0x0312
            boolean r8 = r0.playerWasPlaying
            r8 = r8 ^ r12
            java.lang.String r9 = r0.nameOverride
            if (r9 == 0) goto L_0x022a
            org.telegram.ui.Components.FadingTextViewLayout r10 = r0.nameTextView
            r10.setText(r9)
            goto L_0x02af
        L_0x022a:
            org.telegram.tgnet.TLRPC$Message r9 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageFwdHeader r9 = r9.fwd_from
            if (r9 == 0) goto L_0x023b
            java.lang.String r9 = r9.from_name
            if (r9 == 0) goto L_0x023b
            org.telegram.ui.Components.FadingTextViewLayout r10 = r0.nameTextView
            r10.setText(r9, r8)
            goto L_0x02af
        L_0x023b:
            boolean r9 = r1.isFromUser()
            if (r9 == 0) goto L_0x0267
            int r9 = r0.currentAccount
            org.telegram.messenger.MessagesController r9 = org.telegram.messenger.MessagesController.getInstance(r9)
            org.telegram.tgnet.TLRPC$Message r11 = r1.messageOwner
            org.telegram.tgnet.TLRPC$Peer r11 = r11.from_id
            long r14 = r11.user_id
            java.lang.Long r11 = java.lang.Long.valueOf(r14)
            org.telegram.tgnet.TLRPC$User r9 = r9.getUser(r11)
            if (r9 == 0) goto L_0x0261
            org.telegram.ui.Components.FadingTextViewLayout r10 = r0.nameTextView
            java.lang.String r9 = org.telegram.messenger.UserObject.getUserName(r9)
            r10.setText(r9, r8)
            goto L_0x02af
        L_0x0261:
            org.telegram.ui.Components.FadingTextViewLayout r9 = r0.nameTextView
            r9.setText(r10, r8)
            goto L_0x02af
        L_0x0267:
            int r9 = r0.currentAccount
            org.telegram.messenger.MessagesController r9 = org.telegram.messenger.MessagesController.getInstance(r9)
            long r14 = r1.getSenderId()
            long r14 = -r14
            java.lang.Long r11 = java.lang.Long.valueOf(r14)
            org.telegram.tgnet.TLRPC$Chat r9 = r9.getChat(r11)
            boolean r11 = org.telegram.messenger.ChatObject.isChannel(r9)
            if (r11 == 0) goto L_0x02a0
            boolean r11 = r9.megagroup
            if (r11 == 0) goto L_0x02a0
            boolean r11 = r1.isForwardedChannelPost()
            if (r11 == 0) goto L_0x02a0
            int r9 = r0.currentAccount
            org.telegram.messenger.MessagesController r9 = org.telegram.messenger.MessagesController.getInstance(r9)
            org.telegram.tgnet.TLRPC$Message r11 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageFwdHeader r11 = r11.fwd_from
            org.telegram.tgnet.TLRPC$Peer r11 = r11.from_id
            long r14 = r11.channel_id
            java.lang.Long r11 = java.lang.Long.valueOf(r14)
            org.telegram.tgnet.TLRPC$Chat r9 = r9.getChat(r11)
        L_0x02a0:
            if (r9 == 0) goto L_0x02aa
            org.telegram.ui.Components.FadingTextViewLayout r10 = r0.nameTextView
            java.lang.String r9 = r9.title
            r10.setText(r9, r8)
            goto L_0x02af
        L_0x02aa:
            org.telegram.ui.Components.FadingTextViewLayout r9 = r0.nameTextView
            r9.setText(r10, r8)
        L_0x02af:
            int r9 = r0.dateOverride
            if (r9 == 0) goto L_0x02b4
            goto L_0x02b8
        L_0x02b4:
            org.telegram.tgnet.TLRPC$Message r9 = r1.messageOwner
            int r9 = r9.date
        L_0x02b8:
            long r9 = (long) r9
            r14 = 1000(0x3e8, double:4.94E-321)
            long r9 = r9 * r14
            int r11 = org.telegram.messenger.R.string.formatDateAtTime
            r14 = 2
            java.lang.Object[] r15 = new java.lang.Object[r14]
            org.telegram.messenger.LocaleController r14 = org.telegram.messenger.LocaleController.getInstance()
            org.telegram.messenger.time.FastDateFormat r14 = r14.formatterYear
            java.util.Date r12 = new java.util.Date
            r12.<init>(r9)
            java.lang.String r12 = r14.format((java.util.Date) r12)
            r15[r4] = r12
            org.telegram.messenger.LocaleController r12 = org.telegram.messenger.LocaleController.getInstance()
            org.telegram.messenger.time.FastDateFormat r12 = r12.formatterDay
            java.util.Date r14 = new java.util.Date
            r14.<init>(r9)
            java.lang.String r9 = r12.format((java.util.Date) r14)
            r10 = 1
            r15[r10] = r9
            java.lang.String r9 = "formatDateAtTime"
            java.lang.String r9 = org.telegram.messenger.LocaleController.formatString(r9, r11, r15)
            if (r3 == 0) goto L_0x030c
            if (r5 == 0) goto L_0x030c
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.dateTextView
            r5 = 2
            java.lang.Object[] r8 = new java.lang.Object[r5]
            r8[r4] = r9
            org.telegram.tgnet.TLRPC$Document r5 = r1.getDocument()
            long r11 = r5.size
            java.lang.String r5 = org.telegram.messenger.AndroidUtilities.formatFileSize(r11)
            r8[r10] = r5
            java.lang.String r5 = "%s (%s)"
            java.lang.String r5 = java.lang.String.format(r5, r8)
            r3.setText(r5, r2)
            goto L_0x032a
        L_0x030c:
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.dateTextView
            r3.setText(r9, r8)
            goto L_0x032a
        L_0x0312:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r3 = r0.placeProvider
            int r5 = r0.switchingToIndex
            java.lang.CharSequence r3 = r3.getTitleFor(r5)
            boolean r3 = android.text.TextUtils.isEmpty(r3)
            if (r3 != 0) goto L_0x032a
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.nameTextView
            r3.setText(r10)
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.dateTextView
            r3.setText(r10)
        L_0x032a:
            org.telegram.tgnet.TLRPC$Message r3 = r1.messageOwner
            java.util.ArrayList<org.telegram.tgnet.TLRPC$TL_restrictionReason> r3 = r3.restriction_reason
            java.lang.String r3 = org.telegram.messenger.MessagesController.getRestrictionReason(r3)
            boolean r5 = android.text.TextUtils.isEmpty(r3)
            if (r5 != 0) goto L_0x0339
            goto L_0x033b
        L_0x0339:
            java.lang.CharSequence r3 = r1.caption
        L_0x033b:
            org.telegram.ui.Components.AnimatedFileDrawable r5 = r0.currentAnimation
            if (r5 == 0) goto L_0x03a6
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.menuItem
            r7 = 1
            r5.hideSubItem(r7)
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.menuItem
            r7 = 10
            r5.hideSubItem(r7)
            org.telegram.ui.ChatActivity r5 = r0.parentChatActivity
            if (r5 == 0) goto L_0x0358
            boolean r5 = r5.isInScheduleMode()
            if (r5 == 0) goto L_0x0358
            r5 = 1
            goto L_0x0359
        L_0x0358:
            r5 = 0
        L_0x0359:
            r7 = 0
            boolean r5 = r1.canDeleteMessage(r5, r7)
            if (r5 != 0) goto L_0x0366
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.menuItem
            r7 = 6
            r5.hideSubItem(r7)
        L_0x0366:
            r5 = 1
            r5 = r5 ^ r6
            r0.allowShare = r5
            android.widget.LinearLayout r5 = r0.bottomButtonsLayout
            r5.setVisibility(r4)
            android.widget.ImageView r5 = r0.paintButton
            r6 = 8
            r5.setVisibility(r6)
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.shareItem
            boolean r6 = r0.allowShare
            if (r6 == 0) goto L_0x037e
            r6 = 0
            goto L_0x0380
        L_0x037e:
            r6 = 8
        L_0x0380:
            r5.setVisibility(r6)
            android.widget.ImageView r5 = r0.shareButton
            boolean r6 = r0.allowShare
            if (r6 == 0) goto L_0x0392
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.shareItem
            int r6 = r6.getVisibility()
            if (r6 == 0) goto L_0x0392
            goto L_0x0394
        L_0x0392:
            r4 = 8
        L_0x0394:
            r5.setVisibility(r4)
            org.telegram.ui.ActionBar.ActionBar r4 = r0.actionBar
            int r5 = org.telegram.messenger.R.string.AttachGif
            java.lang.String r6 = "AttachGif"
            java.lang.String r5 = org.telegram.messenger.LocaleController.getString(r6, r5)
            r4.setTitle(r5)
            goto L_0x06b2
        L_0x03a6:
            int r5 = r0.totalImagesCount
            int r8 = r0.totalImagesCountMerge
            int r5 = r5 + r8
            if (r5 == 0) goto L_0x059e
            boolean r5 = r0.needSearchImageInArr
            if (r5 != 0) goto L_0x059e
            boolean r5 = r0.opennedFromMedia
            if (r5 == 0) goto L_0x04e8
            int r5 = r0.startOffset
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            int r7 = r7.size()
            int r5 = r5 + r7
            int r7 = r0.totalImagesCount
            int r8 = r0.totalImagesCountMerge
            int r7 = r7 + r8
            if (r5 >= r7) goto L_0x0457
            boolean r5 = r0.loadingMoreImages
            if (r5 != 0) goto L_0x0457
            int r5 = r0.switchingToIndex
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            int r7 = r7.size()
            r8 = 5
            int r7 = r7 - r8
            if (r5 <= r7) goto L_0x0457
            java.util.ArrayList<org.telegram.messenger.MessageObject> r5 = r0.imagesArr
            boolean r5 = r5.isEmpty()
            if (r5 == 0) goto L_0x03df
            r5 = 0
            goto L_0x03f1
        L_0x03df:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r5 = r0.imagesArr
            int r7 = r5.size()
            r8 = 1
            int r7 = r7 - r8
            java.lang.Object r5 = r5.get(r7)
            org.telegram.messenger.MessageObject r5 = (org.telegram.messenger.MessageObject) r5
            int r5 = r5.getId()
        L_0x03f1:
            boolean[] r7 = r0.endReached
            boolean r7 = r7[r4]
            if (r7 == 0) goto L_0x0427
            long r7 = r0.mergeDialogId
            r9 = 0
            int r11 = (r7 > r9 ? 1 : (r7 == r9 ? 0 : -1))
            if (r11 == 0) goto L_0x0427
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            boolean r7 = r7.isEmpty()
            if (r7 != 0) goto L_0x0423
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            int r8 = r7.size()
            r9 = 1
            int r8 = r8 - r9
            java.lang.Object r7 = r7.get(r8)
            org.telegram.messenger.MessageObject r7 = (org.telegram.messenger.MessageObject) r7
            long r7 = r7.getDialogId()
            long r9 = r0.mergeDialogId
            int r11 = (r7 > r9 ? 1 : (r7 == r9 ? 0 : -1))
            if (r11 == 0) goto L_0x0423
            r5 = 1
            r26 = 0
            goto L_0x042a
        L_0x0423:
            r26 = r5
            r5 = 1
            goto L_0x042a
        L_0x0427:
            r26 = r5
            r5 = 0
        L_0x042a:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r7 = r0.placeProvider
            boolean r7 = r7.loadMore()
            if (r7 != 0) goto L_0x0457
            int r7 = r0.currentAccount
            org.telegram.messenger.MediaDataController r22 = org.telegram.messenger.MediaDataController.getInstance(r7)
            if (r5 != 0) goto L_0x043d
            long r7 = r0.currentDialogId
            goto L_0x043f
        L_0x043d:
            long r7 = r0.mergeDialogId
        L_0x043f:
            r23 = r7
            r25 = 40
            r27 = 0
            int r5 = r0.sharedMediaType
            r29 = 1
            int r7 = r0.classGuid
            r31 = 0
            r28 = r5
            r30 = r7
            r22.loadMedia(r23, r25, r26, r27, r28, r29, r30, r31)
            r5 = 1
            r0.loadingMoreImages = r5
        L_0x0457:
            int r5 = r0.startOffset
            if (r5 <= 0) goto L_0x049c
            int r5 = r0.switchingToIndex
            r7 = 5
            if (r5 >= r7) goto L_0x049c
            java.util.ArrayList<org.telegram.messenger.MessageObject> r5 = r0.imagesArr
            boolean r5 = r5.isEmpty()
            if (r5 != 0) goto L_0x049c
            java.util.ArrayList<org.telegram.messenger.MessageObject> r5 = r0.imagesArr
            java.lang.Object r5 = r5.get(r4)
            org.telegram.messenger.MessageObject r5 = (org.telegram.messenger.MessageObject) r5
            int r27 = r5.getId()
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r5 = r0.placeProvider
            boolean r5 = r5.loadMore()
            if (r5 != 0) goto L_0x049c
            int r5 = r0.currentAccount
            org.telegram.messenger.MediaDataController r22 = org.telegram.messenger.MediaDataController.getInstance(r5)
            long r7 = r0.currentDialogId
            r25 = 40
            r26 = 0
            int r5 = r0.sharedMediaType
            r29 = 1
            int r9 = r0.classGuid
            r31 = 0
            r23 = r7
            r28 = r5
            r30 = r9
            r22.loadMedia(r23, r25, r26, r27, r28, r29, r30, r31)
            r5 = 1
            r0.loadingMoreImages = r5
        L_0x049c:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r5 = r0.placeProvider
            int r7 = r0.switchingToIndex
            java.lang.CharSequence r5 = r5.getTitleFor(r7)
            if (r5 == 0) goto L_0x04c0
            org.telegram.ui.ActionBar.ActionBar r7 = r0.actionBar
            r7.setTitle(r5)
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r5 = r0.placeProvider
            int r7 = r0.switchingToIndex
            java.lang.CharSequence r5 = r5.getSubtitleFor(r7)
            org.telegram.ui.ActionBar.ActionBar r7 = r0.actionBar
            r7.setSubtitle(r5)
            org.telegram.ui.ActionBar.ActionBar r5 = r0.actionBar
            r7 = 1
            r5.setTitleScrollNonFitText(r7)
            goto L_0x061f
        L_0x04c0:
            r7 = 1
            org.telegram.ui.ActionBar.ActionBar r5 = r0.actionBar
            int r8 = org.telegram.messenger.R.string.Of
            r9 = 2
            java.lang.Object[] r9 = new java.lang.Object[r9]
            int r10 = r0.startOffset
            int r11 = r0.switchingToIndex
            int r10 = r10 + r11
            int r10 = r10 + r7
            java.lang.Integer r10 = java.lang.Integer.valueOf(r10)
            r9[r4] = r10
            int r10 = r0.totalImagesCount
            int r11 = r0.totalImagesCountMerge
            int r10 = r10 + r11
            java.lang.Integer r10 = java.lang.Integer.valueOf(r10)
            r9[r7] = r10
            java.lang.String r7 = org.telegram.messenger.LocaleController.formatString(r13, r8, r9)
            r5.setTitle(r7)
            goto L_0x061f
        L_0x04e8:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r5 = r0.imagesArr
            int r5 = r5.size()
            int r7 = r0.totalImagesCount
            int r8 = r0.totalImagesCountMerge
            int r7 = r7 + r8
            if (r5 >= r7) goto L_0x056c
            boolean r5 = r0.loadingMoreImages
            if (r5 != 0) goto L_0x056c
            int r5 = r0.switchingToIndex
            r7 = 5
            if (r5 >= r7) goto L_0x056c
            java.util.ArrayList<org.telegram.messenger.MessageObject> r5 = r0.imagesArr
            boolean r5 = r5.isEmpty()
            if (r5 == 0) goto L_0x0508
            r5 = 0
            goto L_0x0514
        L_0x0508:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r5 = r0.imagesArr
            java.lang.Object r5 = r5.get(r4)
            org.telegram.messenger.MessageObject r5 = (org.telegram.messenger.MessageObject) r5
            int r5 = r5.getId()
        L_0x0514:
            boolean[] r7 = r0.endReached
            boolean r7 = r7[r4]
            if (r7 == 0) goto L_0x0544
            long r7 = r0.mergeDialogId
            r9 = 0
            int r11 = (r7 > r9 ? 1 : (r7 == r9 ? 0 : -1))
            if (r11 == 0) goto L_0x0544
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            boolean r7 = r7.isEmpty()
            if (r7 != 0) goto L_0x0540
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            java.lang.Object r7 = r7.get(r4)
            org.telegram.messenger.MessageObject r7 = (org.telegram.messenger.MessageObject) r7
            long r7 = r7.getDialogId()
            long r9 = r0.mergeDialogId
            int r11 = (r7 > r9 ? 1 : (r7 == r9 ? 0 : -1))
            if (r11 == 0) goto L_0x0540
            r5 = 1
            r26 = 0
            goto L_0x0547
        L_0x0540:
            r26 = r5
            r5 = 1
            goto L_0x0547
        L_0x0544:
            r26 = r5
            r5 = 0
        L_0x0547:
            int r7 = r0.currentAccount
            org.telegram.messenger.MediaDataController r22 = org.telegram.messenger.MediaDataController.getInstance(r7)
            if (r5 != 0) goto L_0x0552
            long r7 = r0.currentDialogId
            goto L_0x0554
        L_0x0552:
            long r7 = r0.mergeDialogId
        L_0x0554:
            r23 = r7
            r25 = 80
            r27 = 0
            int r5 = r0.sharedMediaType
            r29 = 1
            int r7 = r0.classGuid
            r31 = 0
            r28 = r5
            r30 = r7
            r22.loadMedia(r23, r25, r26, r27, r28, r29, r30, r31)
            r5 = 1
            r0.loadingMoreImages = r5
        L_0x056c:
            org.telegram.ui.ActionBar.ActionBar r5 = r0.actionBar
            int r7 = org.telegram.messenger.R.string.Of
            r8 = 2
            java.lang.Object[] r8 = new java.lang.Object[r8]
            int r9 = r0.totalImagesCount
            int r10 = r0.totalImagesCountMerge
            int r9 = r9 + r10
            java.util.ArrayList<org.telegram.messenger.MessageObject> r10 = r0.imagesArr
            int r10 = r10.size()
            int r9 = r9 - r10
            int r10 = r0.switchingToIndex
            int r9 = r9 + r10
            r10 = 1
            int r9 = r9 + r10
            java.lang.Integer r9 = java.lang.Integer.valueOf(r9)
            r8[r4] = r9
            int r9 = r0.totalImagesCount
            int r11 = r0.totalImagesCountMerge
            int r9 = r9 + r11
            java.lang.Integer r9 = java.lang.Integer.valueOf(r9)
            r8[r10] = r9
            java.lang.String r7 = org.telegram.messenger.LocaleController.formatString(r13, r7, r8)
            r5.setTitle(r7)
            goto L_0x061f
        L_0x059e:
            int r5 = r0.slideshowMessageId
            java.lang.String r8 = "AttachDocument"
            if (r5 != 0) goto L_0x05ec
            org.telegram.tgnet.TLRPC$Message r5 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r5 = org.telegram.messenger.MessageObject.getMedia(r5)
            boolean r5 = r5 instanceof org.telegram.tgnet.TLRPC$TL_messageMediaWebPage
            if (r5 == 0) goto L_0x05ec
            boolean r5 = r0.isEmbedVideo
            if (r5 == 0) goto L_0x05ba
            org.telegram.ui.ActionBar.ActionBar r5 = r0.actionBar
            java.lang.String r7 = "YouTube"
            r5.setTitle(r7)
            goto L_0x061f
        L_0x05ba:
            boolean r5 = r1.canPreviewDocument()
            if (r5 == 0) goto L_0x05cc
            org.telegram.ui.ActionBar.ActionBar r5 = r0.actionBar
            int r7 = org.telegram.messenger.R.string.AttachDocument
            java.lang.String r7 = org.telegram.messenger.LocaleController.getString(r8, r7)
            r5.setTitle(r7)
            goto L_0x061f
        L_0x05cc:
            boolean r5 = r1.isVideo()
            if (r5 == 0) goto L_0x05de
            org.telegram.ui.ActionBar.ActionBar r5 = r0.actionBar
            int r8 = org.telegram.messenger.R.string.AttachVideo
            java.lang.String r7 = org.telegram.messenger.LocaleController.getString(r7, r8)
            r5.setTitle(r7)
            goto L_0x061f
        L_0x05de:
            org.telegram.ui.ActionBar.ActionBar r5 = r0.actionBar
            int r7 = org.telegram.messenger.R.string.AttachPhoto
            r8 = r21
            java.lang.String r7 = org.telegram.messenger.LocaleController.getString(r8, r7)
            r5.setTitle(r7)
            goto L_0x061f
        L_0x05ec:
            if (r18 == 0) goto L_0x05fc
            org.telegram.ui.ActionBar.ActionBar r5 = r0.actionBar
            org.telegram.tgnet.TLRPC$Message r7 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r7 = org.telegram.messenger.MessageObject.getMedia(r7)
            java.lang.String r7 = r7.title
            r5.setTitle(r7)
            goto L_0x061f
        L_0x05fc:
            boolean r5 = r1.isVideo()
            if (r5 == 0) goto L_0x060e
            org.telegram.ui.ActionBar.ActionBar r5 = r0.actionBar
            int r8 = org.telegram.messenger.R.string.AttachVideo
            java.lang.String r7 = org.telegram.messenger.LocaleController.getString(r7, r8)
            r5.setTitle(r7)
            goto L_0x061f
        L_0x060e:
            org.telegram.tgnet.TLRPC$Document r5 = r1.getDocument()
            if (r5 == 0) goto L_0x061f
            org.telegram.ui.ActionBar.ActionBar r5 = r0.actionBar
            int r7 = org.telegram.messenger.R.string.AttachDocument
            java.lang.String r7 = org.telegram.messenger.LocaleController.getString(r8, r7)
            r5.setTitle(r7)
        L_0x061f:
            long r7 = r0.currentDialogId
            boolean r5 = org.telegram.messenger.DialogObject.isEncryptedDialog(r7)
            if (r5 == 0) goto L_0x062b
            boolean r5 = r0.isEmbedVideo
            if (r5 == 0) goto L_0x062d
        L_0x062b:
            if (r6 == 0) goto L_0x0632
        L_0x062d:
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.sendItem
            r0.setItemVisible(r5, r4, r4)
        L_0x0632:
            boolean r5 = r0.isEmbedVideo
            if (r5 != 0) goto L_0x069c
            org.telegram.tgnet.TLRPC$Message r5 = r1.messageOwner
            int r5 = r5.ttl
            if (r5 == 0) goto L_0x0640
            r7 = 3600(0xe10, float:5.045E-42)
            if (r5 < r7) goto L_0x069c
        L_0x0640:
            if (r6 == 0) goto L_0x0643
            goto L_0x069c
        L_0x0643:
            r5 = 1
            r0.allowShare = r5
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.menuItem
            r6.showSubItem(r5)
            org.telegram.tgnet.TLRPC$Document r5 = r1.getDocument()
            if (r5 == 0) goto L_0x0666
            boolean r5 = r1.canPreviewDocument()
            if (r5 != 0) goto L_0x0666
            java.lang.String r5 = r1.getMimeType()
            java.lang.String r6 = "video/"
            boolean r5 = r5.startsWith(r6)
            if (r5 == 0) goto L_0x0664
            goto L_0x0666
        L_0x0664:
            r12 = 0
            goto L_0x0667
        L_0x0666:
            r12 = 1
        L_0x0667:
            android.widget.ImageView r5 = r0.paintButton
            if (r12 == 0) goto L_0x0673
            boolean r6 = r33.canSendMediaToParentChatActivity()
            if (r6 == 0) goto L_0x0673
            r6 = 0
            goto L_0x0675
        L_0x0673:
            r6 = 8
        L_0x0675:
            r5.setVisibility(r6)
            android.widget.LinearLayout r5 = r0.bottomButtonsLayout
            boolean r6 = r0.videoPlayerControlVisible
            if (r6 != 0) goto L_0x067f
            goto L_0x0681
        L_0x067f:
            r4 = 8
        L_0x0681:
            r5.setVisibility(r4)
            android.widget.LinearLayout r4 = r0.bottomButtonsLayout
            int r4 = r4.getVisibility()
            if (r4 != 0) goto L_0x0694
            org.telegram.ui.ActionBar.ActionBarMenuItem r4 = r0.menuItem
            r5 = 10
            r4.hideSubItem(r5)
            goto L_0x06b2
        L_0x0694:
            r5 = 10
            org.telegram.ui.ActionBar.ActionBarMenuItem r4 = r0.menuItem
            r4.showSubItem(r5)
            goto L_0x06b2
        L_0x069c:
            r5 = 10
            r0.allowShare = r4
            org.telegram.ui.ActionBar.ActionBarMenuItem r4 = r0.menuItem
            r6 = 1
            r4.hideSubItem(r6)
            android.widget.LinearLayout r4 = r0.bottomButtonsLayout
            r6 = 8
            r4.setVisibility(r6)
            org.telegram.ui.ActionBar.ActionBarMenuItem r4 = r0.menuItem
            r4.hideSubItem(r5)
        L_0x06b2:
            org.telegram.ui.Components.GroupedPhotosListView r4 = r0.groupedPhotosListView
            r4.fillList()
            r14 = r1
            goto L_0x0d2d
        L_0x06ba:
            return
        L_0x06bb:
            r8 = r9
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r3 = r0.secureDocuments
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x0702
            r0.allowShare = r4
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r3 = 6
            r1.showSubItem(r3)
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r3 = 1
            r1.hideSubItem(r3)
            org.telegram.ui.Components.FadingTextViewLayout r1 = r0.nameTextView
            r1.setText(r10)
            org.telegram.ui.Components.FadingTextViewLayout r1 = r0.dateTextView
            r1.setText(r10)
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            int r5 = org.telegram.messenger.R.string.Of
            r6 = 2
            java.lang.Object[] r6 = new java.lang.Object[r6]
            int r7 = r0.switchingToIndex
            int r7 = r7 + r3
            java.lang.Integer r7 = java.lang.Integer.valueOf(r7)
            r6[r4] = r7
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r4 = r0.secureDocuments
            int r4 = r4.size()
            java.lang.Integer r4 = java.lang.Integer.valueOf(r4)
            r6[r3] = r4
            java.lang.String r3 = org.telegram.messenger.LocaleController.formatString(r13, r5, r6)
            r1.setTitle(r3)
        L_0x06ff:
            r11 = 0
            goto L_0x0d2b
        L_0x0702:
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r3 = r0.imagesArrLocations
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x083c
            if (r1 < 0) goto L_0x083b
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r3 = r0.imagesArrLocations
            int r3 = r3.size()
            if (r1 < r3) goto L_0x0716
            goto L_0x083b
        L_0x0716:
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.nameTextView
            r3.setText(r10)
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.dateTextView
            r3.setText(r10)
            boolean r3 = r0.canEditAvatar
            r5 = 17
            r6 = 16
            if (r3 == 0) goto L_0x0789
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Photo> r3 = r0.avatarsArr
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x0789
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r3.showSubItem(r5)
            boolean r3 = r33.isCurrentAvatarSet()
            if (r3 == 0) goto L_0x0741
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r3.hideSubItem(r6)
            goto L_0x0746
        L_0x0741:
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r3.showSubItem(r6)
        L_0x0746:
            long r5 = r0.avatarsDialogId
            r9 = 0
            int r3 = (r5 > r9 ? 1 : (r5 == r9 ? 0 : -1))
            if (r3 <= 0) goto L_0x0750
        L_0x074e:
            r1 = 1
            goto L_0x0779
        L_0x0750:
            int r3 = r0.currentAccount
            org.telegram.messenger.MessagesController r3 = org.telegram.messenger.MessagesController.getInstance(r3)
            long r5 = r0.avatarsDialogId
            long r5 = -r5
            java.lang.Long r5 = java.lang.Long.valueOf(r5)
            org.telegram.tgnet.TLRPC$Chat r3 = r3.getChat(r5)
            boolean r5 = r33.isCurrentAvatarSet()
            if (r5 != 0) goto L_0x074e
            int r5 = r0.currentAccount
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Message> r6 = r0.imagesArrMessages
            java.lang.Object r1 = r6.get(r1)
            org.telegram.tgnet.TLRPC$Message r1 = (org.telegram.tgnet.TLRPC$Message) r1
            boolean r1 = org.telegram.messenger.MessageObject.canDeleteMessage(r5, r4, r1, r3)
            if (r1 == 0) goto L_0x0778
            goto L_0x074e
        L_0x0778:
            r1 = 0
        L_0x0779:
            if (r1 == 0) goto L_0x0782
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r3 = 6
            r1.showSubItem(r3)
            goto L_0x0799
        L_0x0782:
            r3 = 6
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.hideSubItem(r3)
            goto L_0x0799
        L_0x0789:
            r3 = 6
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.hideSubItem(r5)
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.hideSubItem(r6)
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.hideSubItem(r3)
        L_0x0799:
            boolean r1 = r0.isEvent
            if (r1 == 0) goto L_0x07a9
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            int r3 = org.telegram.messenger.R.string.AttachPhoto
            java.lang.String r3 = org.telegram.messenger.LocaleController.getString(r8, r3)
            r1.setTitle(r3)
            goto L_0x07cd
        L_0x07a9:
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            int r3 = org.telegram.messenger.R.string.Of
            r5 = 2
            java.lang.Object[] r5 = new java.lang.Object[r5]
            int r6 = r0.switchingToIndex
            r7 = 1
            int r6 = r6 + r7
            java.lang.Integer r6 = java.lang.Integer.valueOf(r6)
            r5[r4] = r6
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r6 = r0.imagesArrLocations
            int r6 = r6.size()
            java.lang.Integer r6 = java.lang.Integer.valueOf(r6)
            r5[r7] = r6
            java.lang.String r3 = org.telegram.messenger.LocaleController.formatString(r13, r3, r5)
            r1.setTitle(r3)
        L_0x07cd:
            long r5 = r0.avatarsDialogId
            r7 = 0
            int r1 = (r5 > r7 ? 1 : (r5 == r7 ? 0 : -1))
            if (r1 == 0) goto L_0x07e6
            int r1 = r0.currentAccount
            org.telegram.messenger.MessagesController r1 = org.telegram.messenger.MessagesController.getInstance(r1)
            long r5 = r0.avatarsDialogId
            long r5 = -r5
            boolean r1 = r1.isChatNoForwards((long) r5)
            if (r1 == 0) goto L_0x07e6
            r1 = 1
            goto L_0x07e7
        L_0x07e6:
            r1 = 0
        L_0x07e7:
            if (r1 == 0) goto L_0x07f0
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r5 = 1
            r3.hideSubItem(r5)
            goto L_0x07f6
        L_0x07f0:
            r5 = 1
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r3.showSubItem(r5)
        L_0x07f6:
            r1 = r1 ^ r5
            r0.allowShare = r1
            android.widget.ImageView r3 = r0.shareButton
            if (r1 == 0) goto L_0x0807
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.shareItem
            int r1 = r1.getVisibility()
            if (r1 == 0) goto L_0x0807
            r1 = 0
            goto L_0x0809
        L_0x0807:
            r1 = 8
        L_0x0809:
            r3.setVisibility(r1)
            android.widget.LinearLayout r1 = r0.bottomButtonsLayout
            boolean r3 = r0.videoPlayerControlVisible
            if (r3 != 0) goto L_0x0813
            goto L_0x0815
        L_0x0813:
            r4 = 8
        L_0x0815:
            r1.setVisibility(r4)
            android.widget.LinearLayout r1 = r0.bottomButtonsLayout
            int r1 = r1.getVisibility()
            if (r1 != 0) goto L_0x0828
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r3 = 10
            r1.hideSubItem(r3)
            goto L_0x082f
        L_0x0828:
            r3 = 10
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.showSubItem(r3)
        L_0x082f:
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.checkHideMenuItem()
            org.telegram.ui.Components.GroupedPhotosListView r1 = r0.groupedPhotosListView
            r1.fillList()
            goto L_0x06ff
        L_0x083b:
            return
        L_0x083c:
            java.util.ArrayList<java.lang.Object> r3 = r0.imagesArrLocals
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x0bfe
            if (r1 < 0) goto L_0x0bfd
            java.util.ArrayList<java.lang.Object> r3 = r0.imagesArrLocals
            int r3 = r3.size()
            if (r1 < r3) goto L_0x0850
            goto L_0x0bfd
        L_0x0850:
            java.util.ArrayList<java.lang.Object> r3 = r0.imagesArrLocals
            java.lang.Object r1 = r3.get(r1)
            boolean r3 = r1 instanceof org.telegram.tgnet.TLRPC$BotInlineResult
            if (r3 == 0) goto L_0x0881
            r3 = r1
            org.telegram.tgnet.TLRPC$BotInlineResult r3 = (org.telegram.tgnet.TLRPC$BotInlineResult) r3
            r0.currentBotInlineResult = r3
            org.telegram.tgnet.TLRPC$Document r6 = r3.document
            if (r6 == 0) goto L_0x0868
            boolean r3 = org.telegram.messenger.MessageObject.isVideoDocument(r6)
            goto L_0x0878
        L_0x0868:
            org.telegram.tgnet.TLRPC$WebDocument r6 = r3.content
            boolean r6 = r6 instanceof org.telegram.tgnet.TLRPC$TL_webDocument
            if (r6 == 0) goto L_0x0877
            java.lang.String r3 = r3.type
            java.lang.String r6 = "video"
            boolean r3 = r3.equals(r6)
            goto L_0x0878
        L_0x0877:
            r3 = 0
        L_0x0878:
            r11 = r2
            r2 = 0
            r5 = 0
            r6 = 0
        L_0x087c:
            r9 = 0
            r10 = 0
            r12 = 0
            goto L_0x0ad5
        L_0x0881:
            boolean r3 = r1 instanceof org.telegram.messenger.MediaController.PhotoEntry
            if (r3 == 0) goto L_0x0892
            r6 = r1
            org.telegram.messenger.MediaController$PhotoEntry r6 = (org.telegram.messenger.MediaController.PhotoEntry) r6
            java.lang.String r9 = r6.path
            r0.currentPathObject = r9
            boolean r9 = r6.isVideo
            org.telegram.messenger.MediaController$CropState r6 = r6.cropState
            r10 = 1
            goto L_0x08af
        L_0x0892:
            boolean r6 = r1 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r6 == 0) goto L_0x08ac
            r6 = r1
            org.telegram.messenger.MediaController$SearchImage r6 = (org.telegram.messenger.MediaController.SearchImage) r6
            java.lang.String r9 = r6.getPathToAttach()
            r0.currentPathObject = r9
            org.telegram.messenger.MediaController$CropState r9 = r6.cropState
            int r6 = r6.type
            r10 = 1
            if (r6 != r10) goto L_0x08aa
            r6 = r9
            r9 = 0
            r11 = 1
            goto L_0x08b0
        L_0x08aa:
            r6 = r9
            goto L_0x08ae
        L_0x08ac:
            r10 = 1
            r6 = 0
        L_0x08ae:
            r9 = 0
        L_0x08af:
            r11 = 0
        L_0x08b0:
            r12 = 1065353216(0x3var_, float:1.0)
            if (r9 == 0) goto L_0x09c5
            boolean r11 = r0.isCurrentVideo
            if (r11 != 0) goto L_0x08ba
            r11 = 0
            goto L_0x08bb
        L_0x08ba:
            r11 = r2
        L_0x08bb:
            r0.isCurrentVideo = r10
            r10 = 0
            if (r3 == 0) goto L_0x08ce
            r14 = r1
            org.telegram.messenger.MediaController$PhotoEntry r14 = (org.telegram.messenger.MediaController.PhotoEntry) r14
            org.telegram.messenger.VideoEditedInfo r14 = r14.editedInfo
            if (r14 == 0) goto L_0x08ce
            boolean r10 = r14.muted
            float r15 = r14.start
            float r14 = r14.end
            goto L_0x08d2
        L_0x08ce:
            r10 = 0
            r14 = 1065353216(0x3var_, float:1.0)
            r15 = 0
        L_0x08d2:
            java.lang.String r5 = r0.currentPathObject
            r0.processOpenVideo(r5, r10, r15, r14)
            boolean r5 = r0.isDocumentsPicker
            if (r5 != 0) goto L_0x097c
            int r5 = android.os.Build.VERSION.SDK_INT
            r10 = 18
            if (r5 >= r10) goto L_0x08e3
            goto L_0x097c
        L_0x08e3:
            r5 = 1
            r0.showVideoTimeline(r5, r2)
            int r10 = r0.sendPhotoType
            if (r10 == r5) goto L_0x0921
            android.widget.TextView r10 = r0.videoAvatarTooltip
            r14 = 8
            r10.setVisibility(r14)
            android.widget.ImageView r10 = r0.cropItem
            r10.setVisibility(r4)
            android.widget.ImageView r10 = r0.cropItem
            java.lang.Integer r15 = java.lang.Integer.valueOf(r5)
            r10.setTag(r15)
            android.widget.ImageView r10 = r0.rotateItem
            r10.setVisibility(r14)
            android.widget.ImageView r10 = r0.rotateItem
            r15 = 0
            r10.setTag(r15)
            android.widget.ImageView r10 = r0.mirrorItem
            r10.setVisibility(r14)
            android.widget.ImageView r10 = r0.mirrorItem
            r10.setTag(r15)
            android.widget.ImageView r10 = r0.muteItem
            org.telegram.messenger.AndroidUtilities.updateViewVisibilityAnimated(r10, r5, r12, r2)
            android.widget.ImageView r2 = r0.compressItem
            r2.setVisibility(r4)
            r10 = 1
            goto L_0x095c
        L_0x0921:
            r14 = 8
            r15 = 0
            android.widget.TextView r5 = r0.videoAvatarTooltip
            r5.setVisibility(r4)
            android.widget.ImageView r5 = r0.cropItem
            r5.setVisibility(r14)
            android.widget.ImageView r5 = r0.cropItem
            r5.setTag(r15)
            android.widget.ImageView r5 = r0.rotateItem
            r5.setVisibility(r4)
            android.widget.ImageView r5 = r0.rotateItem
            r10 = 1
            java.lang.Integer r14 = java.lang.Integer.valueOf(r10)
            r5.setTag(r14)
            android.widget.ImageView r5 = r0.mirrorItem
            r5.setVisibility(r4)
            android.widget.ImageView r5 = r0.mirrorItem
            java.lang.Integer r14 = java.lang.Integer.valueOf(r10)
            r5.setTag(r14)
            android.widget.ImageView r5 = r0.muteItem
            org.telegram.messenger.AndroidUtilities.updateViewVisibilityAnimated(r5, r4, r12, r2)
            android.widget.ImageView r2 = r0.compressItem
            r5 = 8
            r2.setVisibility(r5)
        L_0x095c:
            android.widget.ImageView r2 = r0.tuneItem
            r2.setVisibility(r4)
            android.widget.ImageView r2 = r0.tuneItem
            java.lang.Integer r5 = java.lang.Integer.valueOf(r10)
            r2.setTag(r5)
            android.widget.ImageView r2 = r0.paintItem
            r2.setVisibility(r4)
            android.widget.ImageView r2 = r0.paintItem
            java.lang.Integer r5 = java.lang.Integer.valueOf(r10)
            r2.setTag(r5)
            r10 = 8
            goto L_0x0a88
        L_0x097c:
            r0.showVideoTimeline(r4, r2)
            android.widget.TextView r5 = r0.videoAvatarTooltip
            r10 = 8
            r5.setVisibility(r10)
            android.widget.ImageView r5 = r0.cropItem
            r5.setVisibility(r10)
            android.widget.ImageView r5 = r0.cropItem
            r14 = 0
            r5.setTag(r14)
            android.widget.ImageView r5 = r0.tuneItem
            r5.setVisibility(r10)
            android.widget.ImageView r5 = r0.tuneItem
            r5.setTag(r14)
            android.widget.ImageView r5 = r0.paintItem
            r5.setVisibility(r10)
            android.widget.ImageView r5 = r0.paintItem
            r5.setTag(r14)
            android.widget.ImageView r5 = r0.rotateItem
            r5.setVisibility(r10)
            android.widget.ImageView r5 = r0.rotateItem
            r5.setTag(r14)
            android.widget.ImageView r5 = r0.mirrorItem
            r5.setVisibility(r10)
            android.widget.ImageView r5 = r0.mirrorItem
            r5.setTag(r14)
            android.widget.ImageView r5 = r0.muteItem
            org.telegram.messenger.AndroidUtilities.updateViewVisibilityAnimated(r5, r4, r12, r2)
            android.widget.ImageView r2 = r0.compressItem
            r2.setVisibility(r10)
            goto L_0x0a88
        L_0x09c5:
            r10 = 8
            r0.showVideoTimeline(r4, r2)
            android.widget.TextView r5 = r0.videoAvatarTooltip
            r5.setVisibility(r10)
            android.widget.ImageView r5 = r0.muteItem
            org.telegram.messenger.AndroidUtilities.updateViewVisibilityAnimated(r5, r4, r12, r2)
            boolean r5 = r0.isCurrentVideo
            if (r5 == 0) goto L_0x09da
            r5 = 0
            goto L_0x09db
        L_0x09da:
            r5 = r2
        L_0x09db:
            r0.isCurrentVideo = r4
            android.widget.ImageView r12 = r0.compressItem
            r12.setVisibility(r10)
            if (r11 != 0) goto L_0x0a55
            int r10 = r0.sendPhotoType
            r11 = 10
            if (r10 == r11) goto L_0x0a55
            boolean r11 = r0.isDocumentsPicker
            if (r11 == 0) goto L_0x09ef
            goto L_0x0a55
        L_0x09ef:
            r11 = 4
            if (r10 == r11) goto L_0x0a14
            r11 = 5
            if (r10 != r11) goto L_0x09f6
            goto L_0x0a14
        L_0x09f6:
            android.widget.ImageView r10 = r0.paintItem
            r10.setVisibility(r4)
            android.widget.ImageView r10 = r0.paintItem
            r11 = 1
            java.lang.Integer r12 = java.lang.Integer.valueOf(r11)
            r10.setTag(r12)
            android.widget.ImageView r10 = r0.tuneItem
            r10.setVisibility(r4)
            android.widget.ImageView r10 = r0.tuneItem
            java.lang.Integer r12 = java.lang.Integer.valueOf(r11)
            r10.setTag(r12)
            goto L_0x0a2b
        L_0x0a14:
            android.widget.ImageView r10 = r0.paintItem
            r11 = 8
            r10.setVisibility(r11)
            android.widget.ImageView r10 = r0.paintItem
            r12 = 0
            r10.setTag(r12)
            android.widget.ImageView r10 = r0.tuneItem
            r10.setVisibility(r11)
            android.widget.ImageView r10 = r0.tuneItem
            r10.setTag(r12)
        L_0x0a2b:
            android.widget.ImageView r10 = r0.cropItem
            int r11 = r0.sendPhotoType
            r12 = 1
            if (r11 == r12) goto L_0x0a34
            r11 = 0
            goto L_0x0a36
        L_0x0a34:
            r11 = 8
        L_0x0a36:
            r10.setVisibility(r11)
            android.widget.ImageView r10 = r0.rotateItem
            int r11 = r0.sendPhotoType
            if (r11 == r12) goto L_0x0a42
            r11 = 8
            goto L_0x0a43
        L_0x0a42:
            r11 = 0
        L_0x0a43:
            r10.setVisibility(r11)
            android.widget.ImageView r10 = r0.mirrorItem
            int r11 = r0.sendPhotoType
            if (r11 == r12) goto L_0x0a4f
            r11 = 8
            goto L_0x0a50
        L_0x0a4f:
            r11 = 0
        L_0x0a50:
            r10.setVisibility(r11)
            r12 = 0
            goto L_0x0a7b
        L_0x0a55:
            android.widget.ImageView r10 = r0.paintItem
            r11 = 8
            r10.setVisibility(r11)
            android.widget.ImageView r10 = r0.paintItem
            r12 = 0
            r10.setTag(r12)
            android.widget.ImageView r10 = r0.cropItem
            r10.setVisibility(r11)
            android.widget.ImageView r10 = r0.rotateItem
            r10.setVisibility(r11)
            android.widget.ImageView r10 = r0.mirrorItem
            r10.setVisibility(r11)
            android.widget.ImageView r10 = r0.tuneItem
            r10.setVisibility(r11)
            android.widget.ImageView r10 = r0.tuneItem
            r10.setTag(r12)
        L_0x0a7b:
            if (r2 == 0) goto L_0x0a82
            org.telegram.ui.ActionBar.ActionBar r2 = r0.actionBar
            r2.beginDelayedTransition()
        L_0x0a82:
            org.telegram.ui.ActionBar.ActionBar r2 = r0.actionBar
            r2.setSubtitle(r12)
            r11 = r5
        L_0x0a88:
            if (r3 == 0) goto L_0x0ab9
            r2 = r1
            org.telegram.messenger.MediaController$PhotoEntry r2 = (org.telegram.messenger.MediaController.PhotoEntry) r2
            int r3 = r2.bucketId
            if (r3 != 0) goto L_0x0aa4
            long r14 = r2.dateTaken
            r16 = 0
            int r3 = (r14 > r16 ? 1 : (r14 == r16 ? 0 : -1))
            if (r3 != 0) goto L_0x0aa4
            java.util.ArrayList<java.lang.Object> r3 = r0.imagesArrLocals
            int r3 = r3.size()
            r5 = 1
            if (r3 != r5) goto L_0x0aa4
            r3 = 1
            goto L_0x0aa5
        L_0x0aa4:
            r3 = 0
        L_0x0aa5:
            r0.fromCamera = r3
            boolean r3 = r0.hasCaptionForAllMedia
            if (r3 == 0) goto L_0x0aae
            java.lang.CharSequence r3 = r0.captionForAllMedia
            goto L_0x0ab0
        L_0x0aae:
            java.lang.CharSequence r3 = r2.caption
        L_0x0ab0:
            int r5 = r2.ttl
            boolean r10 = r2.isFiltered
            boolean r12 = r2.isPainted
            boolean r2 = r2.isCropped
            goto L_0x0aca
        L_0x0ab9:
            boolean r2 = r1 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r2 == 0) goto L_0x0ad0
            r2 = r1
            org.telegram.messenger.MediaController$SearchImage r2 = (org.telegram.messenger.MediaController.SearchImage) r2
            java.lang.CharSequence r3 = r2.caption
            int r5 = r2.ttl
            boolean r10 = r2.isFiltered
            boolean r12 = r2.isPainted
            boolean r2 = r2.isCropped
        L_0x0aca:
            r32 = r9
            r9 = r3
            r3 = r32
            goto L_0x0ad5
        L_0x0ad0:
            r3 = r9
            r2 = 0
            r5 = 0
            goto L_0x087c
        L_0x0ad5:
            android.widget.FrameLayout r14 = r0.bottomLayout
            int r14 = r14.getVisibility()
            r15 = 8
            if (r14 == r15) goto L_0x0ae4
            android.widget.FrameLayout r14 = r0.bottomLayout
            r14.setVisibility(r15)
        L_0x0ae4:
            android.widget.FrameLayout r14 = r0.bottomLayout
            r15 = 0
            r14.setTag(r15)
            boolean r14 = r0.fromCamera
            if (r14 == 0) goto L_0x0b08
            if (r3 == 0) goto L_0x0afc
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            int r8 = org.telegram.messenger.R.string.AttachVideo
            java.lang.String r7 = org.telegram.messenger.LocaleController.getString(r7, r8)
            r3.setTitle(r7)
            goto L_0x0b2c
        L_0x0afc:
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            int r7 = org.telegram.messenger.R.string.AttachPhoto
            java.lang.String r7 = org.telegram.messenger.LocaleController.getString(r8, r7)
            r3.setTitle(r7)
            goto L_0x0b2c
        L_0x0b08:
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            int r7 = org.telegram.messenger.R.string.Of
            r8 = 2
            java.lang.Object[] r14 = new java.lang.Object[r8]
            int r8 = r0.switchingToIndex
            r15 = 1
            int r8 = r8 + r15
            java.lang.Integer r8 = java.lang.Integer.valueOf(r8)
            r14[r4] = r8
            java.util.ArrayList<java.lang.Object> r8 = r0.imagesArrLocals
            int r8 = r8.size()
            java.lang.Integer r8 = java.lang.Integer.valueOf(r8)
            r14[r15] = r8
            java.lang.String r7 = org.telegram.messenger.LocaleController.formatString(r13, r7, r14)
            r3.setTitle(r7)
        L_0x0b2c:
            org.telegram.ui.ChatActivity r3 = r0.parentChatActivity
            if (r3 == 0) goto L_0x0b65
            org.telegram.tgnet.TLRPC$Chat r3 = r3.getCurrentChat()
            if (r3 == 0) goto L_0x0b3e
            org.telegram.ui.ActionBar.ActionBar r7 = r0.actionBar
            java.lang.String r3 = r3.title
            r7.setTitle(r3)
            goto L_0x0b65
        L_0x0b3e:
            org.telegram.ui.ChatActivity r3 = r0.parentChatActivity
            org.telegram.tgnet.TLRPC$User r3 = r3.getCurrentUser()
            if (r3 == 0) goto L_0x0b65
            boolean r7 = r3.self
            if (r7 == 0) goto L_0x0b58
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            int r7 = org.telegram.messenger.R.string.SavedMessages
            java.lang.String r8 = "SavedMessages"
            java.lang.String r7 = org.telegram.messenger.LocaleController.getString(r8, r7)
            r3.setTitle(r7)
            goto L_0x0b65
        L_0x0b58:
            org.telegram.ui.ActionBar.ActionBar r7 = r0.actionBar
            java.lang.String r8 = r3.first_name
            java.lang.String r3 = r3.last_name
            java.lang.String r3 = org.telegram.messenger.ContactsController.formatName(r8, r3)
            r7.setTitle(r3)
        L_0x0b65:
            int r3 = r0.sendPhotoType
            if (r3 == 0) goto L_0x0b7b
            r7 = 4
            if (r3 == r7) goto L_0x0b7b
            r7 = 2
            if (r3 == r7) goto L_0x0b72
            r7 = 5
            if (r3 != r7) goto L_0x0b88
        L_0x0b72:
            java.util.ArrayList<java.lang.Object> r3 = r0.imagesArrLocals
            int r3 = r3.size()
            r7 = 1
            if (r3 <= r7) goto L_0x0b88
        L_0x0b7b:
            org.telegram.ui.Components.CheckBox r3 = r0.checkImageView
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r7 = r0.placeProvider
            int r8 = r0.switchingToIndex
            boolean r7 = r7.isPhotoChecked(r8)
            r3.setChecked(r7, r4)
        L_0x0b88:
            r0.updateCaptionTextForCurrentPhoto(r1)
            android.graphics.PorterDuffColorFilter r7 = new android.graphics.PorterDuffColorFilter
            java.lang.String r1 = "dialogFloatingButton"
            int r1 = r0.getThemedColor(r1)
            android.graphics.PorterDuff$Mode r3 = android.graphics.PorterDuff.Mode.MULTIPLY
            r7.<init>(r1, r3)
            android.widget.ImageView r1 = r0.timeItem
            if (r5 == 0) goto L_0x0b9e
            r3 = r7
            goto L_0x0b9f
        L_0x0b9e:
            r3 = 0
        L_0x0b9f:
            r1.setColorFilter(r3)
            android.widget.ImageView r1 = r0.paintItem
            if (r12 == 0) goto L_0x0ba8
            r3 = r7
            goto L_0x0ba9
        L_0x0ba8:
            r3 = 0
        L_0x0ba9:
            r1.setColorFilter(r3)
            android.widget.ImageView r1 = r0.cropItem
            if (r2 == 0) goto L_0x0bb2
            r2 = r7
            goto L_0x0bb3
        L_0x0bb2:
            r2 = 0
        L_0x0bb3:
            r1.setColorFilter(r2)
            android.widget.ImageView r1 = r0.tuneItem
            if (r10 == 0) goto L_0x0bbc
            r2 = r7
            goto L_0x0bbd
        L_0x0bbc:
            r2 = 0
        L_0x0bbd:
            r1.setColorFilter(r2)
            boolean r1 = r0.fromCamera
            if (r1 == 0) goto L_0x0bdd
            android.widget.ImageView r1 = r0.mirrorItem
            if (r6 == 0) goto L_0x0bd8
            boolean r2 = r0.isCurrentVideo
            if (r2 == 0) goto L_0x0bd0
            boolean r3 = r6.mirrored
            if (r3 == 0) goto L_0x0bd6
        L_0x0bd0:
            if (r2 != 0) goto L_0x0bd8
            boolean r2 = r6.mirrored
            if (r2 == 0) goto L_0x0bd8
        L_0x0bd6:
            r2 = r7
            goto L_0x0bd9
        L_0x0bd8:
            r2 = 0
        L_0x0bd9:
            r1.setColorFilter(r2)
            goto L_0x0beb
        L_0x0bdd:
            android.widget.ImageView r1 = r0.mirrorItem
            if (r6 == 0) goto L_0x0be7
            boolean r2 = r6.mirrored
            if (r2 == 0) goto L_0x0be7
            r2 = r7
            goto L_0x0be8
        L_0x0be7:
            r2 = 0
        L_0x0be8:
            r1.setColorFilter(r2)
        L_0x0beb:
            android.widget.ImageView r1 = r0.rotateItem
            if (r6 == 0) goto L_0x0bf4
            int r2 = r6.transformRotation
            if (r2 == 0) goto L_0x0bf4
            goto L_0x0bf5
        L_0x0bf4:
            r7 = 0
        L_0x0bf5:
            r1.setColorFilter(r7)
            r3 = r9
            r2 = r11
            r14 = 0
            goto L_0x0d2d
        L_0x0bfd:
            return
        L_0x0bfe:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r0.pageBlocksAdapter
            if (r1 == 0) goto L_0x06ff
            int r1 = r1.getItemsCount()
            int r3 = r0.switchingToIndex
            if (r3 < 0) goto L_0x0d2a
            if (r3 < r1) goto L_0x0c0e
            goto L_0x0d2a
        L_0x0c0e:
            int r3 = r0.currentAccount
            org.telegram.messenger.MessagesController r3 = org.telegram.messenger.MessagesController.getInstance(r3)
            long r5 = r0.currentDialogId
            long r5 = -r5
            boolean r3 = r3.isChatNoForwards((long) r5)
            if (r3 != 0) goto L_0x0CLASSNAME
            org.telegram.messenger.MessageObject r3 = r0.currentMessageObject
            if (r3 == 0) goto L_0x0CLASSNAME
            boolean r3 = r3.hasRevealedExtendedMedia()
            if (r3 != 0) goto L_0x0CLASSNAME
        L_0x0CLASSNAME:
            r3 = 1
            goto L_0x0c2a
        L_0x0CLASSNAME:
            r3 = 0
        L_0x0c2a:
            r0.allowShare = r3
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r3 = r0.pageBlocksAdapter
            int r5 = r0.switchingToIndex
            org.telegram.tgnet.TLRPC$PageBlock r3 = r3.get(r5)
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r5 = r0.pageBlocksAdapter
            int r6 = r0.switchingToIndex
            java.lang.CharSequence r5 = r5.getCaption(r6)
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r6 = r0.pageBlocksAdapter
            int r9 = r0.switchingToIndex
            boolean r6 = r6.isVideo(r9)
            if (r6 == 0) goto L_0x0CLASSNAME
            boolean r9 = r0.allowShare
            if (r9 == 0) goto L_0x0CLASSNAME
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.menuItem
            r9.showSubItem(r15)
            goto L_0x0CLASSNAME
        L_0x0CLASSNAME:
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.menuItem
            r9.hideSubItem(r15)
        L_0x0CLASSNAME:
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.menuItem
            r9.checkHideMenuItem()
            boolean r9 = r0.pipAvailable
            if (r9 != 0) goto L_0x0c6c
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.pipItem
            r9.setEnabled(r4)
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.pipItem
            r10 = 1056964608(0x3var_, float:0.5)
            r11 = 1
            r0.setItemVisible(r9, r11, r11, r10)
            goto L_0x0c7e
        L_0x0c6c:
            r11 = 1
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.pipItem
            r0.setItemVisible(r9, r11, r11)
            goto L_0x0c7e
        L_0x0CLASSNAME:
            r11 = 1
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.menuItem
            r9.hideSubItem(r15)
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.pipItem
            r0.setItemVisible(r9, r4, r11)
        L_0x0c7e:
            android.widget.FrameLayout r9 = r0.bottomLayout
            int r9 = r9.getVisibility()
            r10 = 8
            if (r9 == r10) goto L_0x0c8d
            android.widget.FrameLayout r9 = r0.bottomLayout
            r9.setVisibility(r10)
        L_0x0c8d:
            android.widget.FrameLayout r9 = r0.bottomLayout
            r11 = 0
            r9.setTag(r11)
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.shareItem
            boolean r12 = r0.allowShare
            if (r12 == 0) goto L_0x0c9b
            r12 = 0
            goto L_0x0c9d
        L_0x0c9b:
            r12 = 8
        L_0x0c9d:
            r9.setVisibility(r12)
            org.telegram.ui.Components.AnimatedFileDrawable r9 = r0.currentAnimation
            if (r9 == 0) goto L_0x0cd0
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r4 = 1
            r1.hideSubItem(r4)
            boolean r1 = r0.allowShare
            if (r1 == 0) goto L_0x0cb6
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r4 = 14
            r1.showSubItem(r4)
            goto L_0x0cbd
        L_0x0cb6:
            r4 = 14
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.hideSubItem(r4)
        L_0x0cbd:
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.checkHideMenuItem()
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            int r4 = org.telegram.messenger.R.string.AttachGif
            java.lang.String r6 = "AttachGif"
            java.lang.String r4 = org.telegram.messenger.LocaleController.getString(r6, r4)
            r1.setTitle(r4)
            goto L_0x0d1d
        L_0x0cd0:
            r9 = 1
            if (r1 != r9) goto L_0x0cee
            if (r6 == 0) goto L_0x0ce1
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            int r4 = org.telegram.messenger.R.string.AttachVideo
            java.lang.String r4 = org.telegram.messenger.LocaleController.getString(r7, r4)
            r1.setTitle(r4)
            goto L_0x0cec
        L_0x0ce1:
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            int r4 = org.telegram.messenger.R.string.AttachPhoto
            java.lang.String r4 = org.telegram.messenger.LocaleController.getString(r8, r4)
            r1.setTitle(r4)
        L_0x0cec:
            r10 = 1
            goto L_0x0d0c
        L_0x0cee:
            org.telegram.ui.ActionBar.ActionBar r6 = r0.actionBar
            int r7 = org.telegram.messenger.R.string.Of
            r8 = 2
            java.lang.Object[] r8 = new java.lang.Object[r8]
            int r9 = r0.switchingToIndex
            r10 = 1
            int r9 = r9 + r10
            java.lang.Integer r9 = java.lang.Integer.valueOf(r9)
            r8[r4] = r9
            java.lang.Integer r1 = java.lang.Integer.valueOf(r1)
            r8[r10] = r1
            java.lang.String r1 = org.telegram.messenger.LocaleController.formatString(r13, r7, r8)
            r6.setTitle(r1)
        L_0x0d0c:
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.showSubItem(r10)
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r4 = 14
            r1.hideSubItem(r4)
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.checkHideMenuItem()
        L_0x0d1d:
            org.telegram.ui.Components.GroupedPhotosListView r1 = r0.groupedPhotosListView
            r1.fillList()
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r0.pageBlocksAdapter
            r1.updateSlideshowCell(r3)
            r3 = r5
            r14 = r11
            goto L_0x0d2d
        L_0x0d2a:
            return
        L_0x0d2b:
            r3 = r11
            r14 = r3
        L_0x0d2d:
            r0.setCurrentCaption(r14, r3, r2)
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.setIsAboutToSwitchToIndex(int, boolean, boolean):void");
    }

    private void showVideoTimeline(boolean z, boolean z2) {
        int i = null;
        int i2 = 0;
        if (!z2) {
            this.videoTimelineView.animate().setListener((Animator.AnimatorListener) null).cancel();
            VideoTimelinePlayView videoTimelinePlayView = this.videoTimelineView;
            if (!z) {
                i2 = 8;
            }
            videoTimelinePlayView.setVisibility(i2);
            this.videoTimelineView.setTranslationY(0.0f);
            this.videoTimelineView.setAlpha(this.pickerView.getAlpha());
        } else if (z && this.videoTimelineView.getTag() == null) {
            if (this.videoTimelineView.getVisibility() != 0) {
                this.videoTimelineView.setVisibility(0);
                this.videoTimelineView.setAlpha(this.pickerView.getAlpha());
                this.videoTimelineView.setTranslationY((float) AndroidUtilities.dp(58.0f));
            }
            ObjectAnimator objectAnimator = this.videoTimelineAnimator;
            if (objectAnimator != null) {
                objectAnimator.removeAllListeners();
                this.videoTimelineAnimator.cancel();
            }
            VideoTimelinePlayView videoTimelinePlayView2 = this.videoTimelineView;
            ObjectAnimator ofFloat = ObjectAnimator.ofFloat(videoTimelinePlayView2, View.TRANSLATION_Y, new float[]{videoTimelinePlayView2.getTranslationY(), 0.0f});
            this.videoTimelineAnimator = ofFloat;
            ofFloat.setDuration(220);
            this.videoTimelineAnimator.setInterpolator(CubicBezierInterpolator.DEFAULT);
            this.videoTimelineAnimator.start();
        } else if (!z && this.videoTimelineView.getTag() != null) {
            ObjectAnimator objectAnimator2 = this.videoTimelineAnimator;
            if (objectAnimator2 != null) {
                objectAnimator2.removeAllListeners();
                this.videoTimelineAnimator.cancel();
            }
            VideoTimelinePlayView videoTimelinePlayView3 = this.videoTimelineView;
            ObjectAnimator ofFloat2 = ObjectAnimator.ofFloat(videoTimelinePlayView3, View.TRANSLATION_Y, new float[]{videoTimelinePlayView3.getTranslationY(), (float) AndroidUtilities.dp(58.0f)});
            this.videoTimelineAnimator = ofFloat2;
            ofFloat2.addListener(new HideViewAfterAnimation(this.videoTimelineView));
            this.videoTimelineAnimator.setDuration(220);
            this.videoTimelineAnimator.setInterpolator(CubicBezierInterpolator.DEFAULT);
            this.videoTimelineAnimator.start();
        }
        VideoTimelinePlayView videoTimelinePlayView4 = this.videoTimelineView;
        if (z) {
            i = 1;
        }
        videoTimelinePlayView4.setTag(i);
    }

    public static TLRPC$FileLocation getFileLocation(ImageLocation imageLocation) {
        if (imageLocation == null) {
            return null;
        }
        return imageLocation.location;
    }

    public static String getFileLocationExt(ImageLocation imageLocation) {
        if (imageLocation == null || imageLocation.imageType != 2) {
            return null;
        }
        return "mp4";
    }

    /* access modifiers changed from: private */
    public void setImageIndex(int i) {
        setImageIndex(i, true, false);
    }

    /* JADX WARNING: Code restructure failed: missing block: B:11:0x005f, code lost:
        r8 = r8.cropState;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private void setImageIndex(int r34, boolean r35, boolean r36) {
        /*
            r33 = this;
            r0 = r33
            r1 = r34
            int r2 = r0.currentIndex
            if (r2 == r1) goto L_0x0582
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r2 = r0.placeProvider
            if (r2 != 0) goto L_0x000e
            goto L_0x0582
        L_0x000e:
            r2 = 0
            if (r35 != 0) goto L_0x001a
            org.telegram.messenger.ImageReceiver$BitmapHolder r3 = r0.currentThumb
            if (r3 == 0) goto L_0x001a
            r3.release()
            r0.currentThumb = r2
        L_0x001a:
            java.lang.String[] r3 = r0.currentFileNames
            java.lang.String r4 = r33.getFileName(r34)
            r5 = 0
            r3[r5] = r4
            java.lang.String[] r3 = r0.currentFileNames
            int r4 = r1 + 1
            java.lang.String r4 = r0.getFileName(r4)
            r6 = 1
            r3[r6] = r4
            java.lang.String[] r3 = r0.currentFileNames
            int r4 = r1 + -1
            java.lang.String r4 = r0.getFileName(r4)
            r7 = 2
            r3[r7] = r4
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r3 = r0.placeProvider
            org.telegram.messenger.MessageObject r4 = r0.currentMessageObject
            org.telegram.messenger.ImageLocation r8 = r0.currentFileLocation
            org.telegram.tgnet.TLRPC$FileLocation r8 = getFileLocation(r8)
            int r9 = r0.currentIndex
            r3.willSwitchFromPhoto(r4, r8, r9)
            long r3 = android.os.SystemClock.elapsedRealtime()
            r0.lastPhotoSetTime = r3
            int r3 = r0.currentIndex
            r0.currentIndex = r1
            r33.setIsAboutToSwitchToIndex(r34, r35, r36)
            org.telegram.ui.Components.Crop.CropTransform r4 = r0.cropTransform
            org.telegram.ui.Components.Crop.CropTransform r4 = r4.clone()
            org.telegram.ui.PhotoViewer$EditState r8 = r0.editState
            if (r8 == 0) goto L_0x0069
            org.telegram.messenger.MediaController$CropState r8 = r8.cropState
            if (r8 != 0) goto L_0x0064
            goto L_0x0069
        L_0x0064:
            org.telegram.messenger.MediaController$CropState r8 = r8.clone()
            goto L_0x006a
        L_0x0069:
            r8 = r2
        L_0x006a:
            boolean r9 = r0.centerImageIsVideo
            org.telegram.ui.PhotoViewer$EditState r10 = r0.editState
            r10.reset()
            java.util.ArrayList<org.telegram.messenger.MessageObject> r10 = r0.imagesArr
            boolean r10 = r10.isEmpty()
            if (r10 != 0) goto L_0x0104
            int r1 = r0.currentIndex
            if (r1 < 0) goto L_0x0100
            java.util.ArrayList<org.telegram.messenger.MessageObject> r10 = r0.imagesArr
            int r10 = r10.size()
            if (r1 < r10) goto L_0x0087
            goto L_0x0100
        L_0x0087:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            int r10 = r0.currentIndex
            java.lang.Object r1 = r1.get(r10)
            org.telegram.messenger.MessageObject r1 = (org.telegram.messenger.MessageObject) r1
            if (r35 == 0) goto L_0x00a3
            org.telegram.messenger.MessageObject r10 = r0.currentMessageObject
            if (r10 == 0) goto L_0x00a3
            int r10 = r10.getId()
            int r13 = r1.getId()
            if (r10 != r13) goto L_0x00a3
            r10 = 1
            goto L_0x00a4
        L_0x00a3:
            r10 = 0
        L_0x00a4:
            r0.currentMessageObject = r1
            boolean r13 = r1.isVideo()
            int r14 = r0.sharedMediaType
            if (r14 != r6) goto L_0x00d1
            boolean r1 = r1.canPreviewDocument()
            r0.canZoom = r1
            if (r1 == 0) goto L_0x00c9
            boolean r1 = r0.allowShare
            if (r1 == 0) goto L_0x00c0
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.showSubItem(r6)
            goto L_0x00c5
        L_0x00c0:
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.hideSubItem(r6)
        L_0x00c5:
            r0.setDoubleTapEnabled(r6)
            goto L_0x00d1
        L_0x00c9:
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.hideSubItem(r6)
            r0.setDoubleTapEnabled(r5)
        L_0x00d1:
            if (r13 != 0) goto L_0x00ea
            boolean r1 = r0.isEmbedVideo
            if (r1 == 0) goto L_0x00d8
            goto L_0x00ea
        L_0x00d8:
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r1 = r0.speedItem
            r14 = 8
            r1.setVisibility(r14)
            org.telegram.ui.ActionBar.ActionBarPopupWindow$GapView r1 = r0.speedGap
            r1.setVisibility(r14)
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r1.checkHideMenuItem()
            goto L_0x00fb
        L_0x00ea:
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r1 = r0.speedItem
            r1.setVisibility(r5)
            org.telegram.ui.ActionBar.ActionBarPopupWindow$GapView r1 = r0.speedGap
            r1.setVisibility(r5)
            org.telegram.ui.ActionBar.ActionBarMenuItem r1 = r0.menuItem
            r14 = 19
            r1.showSubItem(r14)
        L_0x00fb:
            r1 = r2
            r16 = r3
            goto L_0x03c0
        L_0x0100:
            r0.closePhoto(r5, r5)
            return
        L_0x0104:
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r10 = r0.secureDocuments
            boolean r10 = r10.isEmpty()
            if (r10 != 0) goto L_0x0129
            if (r1 < 0) goto L_0x0125
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r10 = r0.secureDocuments
            int r10 = r10.size()
            if (r1 < r10) goto L_0x0117
            goto L_0x0125
        L_0x0117:
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r10 = r0.secureDocuments
            java.lang.Object r1 = r10.get(r1)
            org.telegram.messenger.SecureDocument r1 = (org.telegram.messenger.SecureDocument) r1
            r0.currentSecureDocument = r1
            r16 = r3
            goto L_0x03bd
        L_0x0125:
            r0.closePhoto(r5, r5)
            return
        L_0x0129:
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r10 = r0.imagesArrLocations
            boolean r10 = r10.isEmpty()
            if (r10 != 0) goto L_0x0181
            if (r1 < 0) goto L_0x017d
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r10 = r0.imagesArrLocations
            int r10 = r10.size()
            if (r1 < r10) goto L_0x013c
            goto L_0x017d
        L_0x013c:
            org.telegram.messenger.ImageLocation r10 = r0.currentFileLocation
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r13 = r0.imagesArrLocations
            java.lang.Object r13 = r13.get(r1)
            org.telegram.messenger.ImageLocation r13 = (org.telegram.messenger.ImageLocation) r13
            if (r35 == 0) goto L_0x0162
            if (r10 == 0) goto L_0x0162
            if (r13 == 0) goto L_0x0162
            org.telegram.tgnet.TLRPC$TL_fileLocationToBeDeprecated r10 = r10.location
            int r14 = r10.local_id
            org.telegram.tgnet.TLRPC$TL_fileLocationToBeDeprecated r13 = r13.location
            int r15 = r13.local_id
            if (r14 != r15) goto L_0x0162
            long r14 = r10.volume_id
            r16 = r3
            long r2 = r13.volume_id
            int r13 = (r14 > r2 ? 1 : (r14 == r2 ? 0 : -1))
            if (r13 != 0) goto L_0x0164
            r2 = 1
            goto L_0x0165
        L_0x0162:
            r16 = r3
        L_0x0164:
            r2 = 0
        L_0x0165:
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r3 = r0.imagesArrLocations
            java.lang.Object r3 = r3.get(r1)
            org.telegram.messenger.ImageLocation r3 = (org.telegram.messenger.ImageLocation) r3
            r0.currentFileLocation = r3
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r3 = r0.imagesArrLocationsVideo
            java.lang.Object r1 = r3.get(r1)
            org.telegram.messenger.ImageLocation r1 = (org.telegram.messenger.ImageLocation) r1
            r0.currentFileLocationVideo = r1
            r10 = r2
            r1 = 0
            goto L_0x03bf
        L_0x017d:
            r0.closePhoto(r5, r5)
            return
        L_0x0181:
            r16 = r3
            java.util.ArrayList<java.lang.Object> r2 = r0.imagesArrLocals
            boolean r2 = r2.isEmpty()
            if (r2 != 0) goto L_0x038c
            if (r1 < 0) goto L_0x0387
            java.util.ArrayList<java.lang.Object> r2 = r0.imagesArrLocals
            int r2 = r2.size()
            if (r1 < r2) goto L_0x0197
            goto L_0x0387
        L_0x0197:
            java.util.ArrayList<java.lang.Object> r2 = r0.imagesArrLocals
            java.lang.Object r1 = r2.get(r1)
            boolean r2 = r1 instanceof org.telegram.tgnet.TLRPC$BotInlineResult
            if (r2 == 0) goto L_0x01fc
            org.telegram.tgnet.TLRPC$BotInlineResult r1 = (org.telegram.tgnet.TLRPC$BotInlineResult) r1
            r0.currentBotInlineResult = r1
            org.telegram.tgnet.TLRPC$Document r2 = r1.document
            if (r2 == 0) goto L_0x01c2
            int r2 = r0.currentAccount
            org.telegram.messenger.FileLoader r2 = org.telegram.messenger.FileLoader.getInstance(r2)
            org.telegram.tgnet.TLRPC$Document r3 = r1.document
            java.io.File r2 = r2.getPathToAttach(r3)
            java.lang.String r2 = r2.getAbsolutePath()
            r0.currentPathObject = r2
            org.telegram.tgnet.TLRPC$Document r1 = r1.document
            boolean r1 = org.telegram.messenger.MessageObject.isVideoDocument(r1)
            goto L_0x01f7
        L_0x01c2:
            org.telegram.tgnet.TLRPC$Photo r2 = r1.photo
            if (r2 == 0) goto L_0x01e3
            int r2 = r0.currentAccount
            org.telegram.messenger.FileLoader r2 = org.telegram.messenger.FileLoader.getInstance(r2)
            org.telegram.tgnet.TLRPC$Photo r1 = r1.photo
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r1 = r1.sizes
            int r3 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            org.telegram.tgnet.TLRPC$PhotoSize r1 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r1, r3)
            java.io.File r1 = r2.getPathToAttach(r1)
            java.lang.String r1 = r1.getAbsolutePath()
            r0.currentPathObject = r1
            goto L_0x01f6
        L_0x01e3:
            org.telegram.tgnet.TLRPC$WebDocument r2 = r1.content
            boolean r3 = r2 instanceof org.telegram.tgnet.TLRPC$TL_webDocument
            if (r3 == 0) goto L_0x01f6
            java.lang.String r2 = r2.url
            r0.currentPathObject = r2
            java.lang.String r1 = r1.type
            java.lang.String r2 = "video"
            boolean r1 = r1.equals(r2)
            goto L_0x01f7
        L_0x01f6:
            r1 = 0
        L_0x01f7:
            r13 = r1
            r1 = 0
            r10 = 0
            goto L_0x0305
        L_0x01fc:
            boolean r2 = r1 instanceof org.telegram.messenger.MediaController.PhotoEntry
            if (r2 == 0) goto L_0x02b8
            r2 = r1
            org.telegram.messenger.MediaController$PhotoEntry r2 = (org.telegram.messenger.MediaController.PhotoEntry) r2
            java.lang.String r3 = r2.path
            r0.currentPathObject = r3
            if (r3 != 0) goto L_0x020d
            r0.closePhoto(r5, r5)
            return
        L_0x020d:
            boolean r3 = r2.isVideo
            org.telegram.ui.PhotoViewer$EditState r13 = r0.editState
            org.telegram.messenger.MediaController$SavedFilterState r14 = r2.savedFilterState
            r13.savedFilterState = r14
            java.lang.String r14 = r2.paintPath
            r13.paintPath = r14
            java.lang.String r14 = r2.croppedPaintPath
            r13.croppedPaintPath = r14
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r14 = r2.croppedMediaEntities
            r13.croppedMediaEntities = r14
            long r14 = r2.averageDuration
            r13.averageDuration = r14
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r14 = r2.mediaEntities
            r13.mediaEntities = r14
            org.telegram.messenger.MediaController$CropState r14 = r2.cropState
            r13.cropState = r14
            java.io.File r13 = new java.io.File
            java.lang.String r14 = r2.path
            r13.<init>(r14)
            android.net.Uri r14 = android.net.Uri.fromFile(r13)
            boolean r15 = r0.isDocumentsPicker
            if (r15 == 0) goto L_0x02af
            java.lang.StringBuilder r15 = new java.lang.StringBuilder
            r15.<init>()
            int r10 = r2.width
            java.lang.String r11 = ", "
            if (r10 == 0) goto L_0x0271
            int r10 = r2.height
            if (r10 == 0) goto L_0x0271
            int r10 = r15.length()
            if (r10 <= 0) goto L_0x0254
            r15.append(r11)
        L_0x0254:
            java.util.Locale r10 = java.util.Locale.US
            java.lang.Object[] r12 = new java.lang.Object[r7]
            int r7 = r2.width
            java.lang.Integer r7 = java.lang.Integer.valueOf(r7)
            r12[r5] = r7
            int r7 = r2.height
            java.lang.Integer r7 = java.lang.Integer.valueOf(r7)
            r12[r6] = r7
            java.lang.String r7 = "%dx%d"
            java.lang.String r7 = java.lang.String.format(r10, r7, r12)
            r15.append(r7)
        L_0x0271:
            boolean r7 = r2.isVideo
            if (r7 == 0) goto L_0x0287
            int r7 = r15.length()
            if (r7 <= 0) goto L_0x027e
            r15.append(r11)
        L_0x027e:
            int r7 = r2.duration
            java.lang.String r7 = org.telegram.messenger.AndroidUtilities.formatShortDuration(r7)
            r15.append(r7)
        L_0x0287:
            long r6 = r2.size
            r17 = 0
            int r10 = (r6 > r17 ? 1 : (r6 == r17 ? 0 : -1))
            if (r10 == 0) goto L_0x02a1
            int r6 = r15.length()
            if (r6 <= 0) goto L_0x0298
            r15.append(r11)
        L_0x0298:
            long r6 = r2.size
            java.lang.String r2 = org.telegram.messenger.AndroidUtilities.formatFileSize(r6)
            r15.append(r2)
        L_0x02a1:
            android.widget.TextView r2 = r0.docNameTextView
            java.lang.String r6 = r13.getName()
            r2.setText(r6)
            android.widget.TextView r2 = r0.docInfoTextView
            r2.setText(r15)
        L_0x02af:
            org.telegram.ui.PhotoViewer$SavedState r2 = r0.savedState
            if (r2 == 0) goto L_0x02b5
            r2 = 1
            goto L_0x02b6
        L_0x02b5:
            r2 = 0
        L_0x02b6:
            r10 = r14
            goto L_0x02e6
        L_0x02b8:
            boolean r2 = r1 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r2 == 0) goto L_0x02e3
            r2 = r1
            org.telegram.messenger.MediaController$SearchImage r2 = (org.telegram.messenger.MediaController.SearchImage) r2
            java.lang.String r3 = r2.getPathToAttach()
            r0.currentPathObject = r3
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$SavedFilterState r6 = r2.savedFilterState
            r3.savedFilterState = r6
            java.lang.String r6 = r2.paintPath
            r3.paintPath = r6
            java.lang.String r6 = r2.croppedPaintPath
            r3.croppedPaintPath = r6
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r6 = r2.croppedMediaEntities
            r3.croppedMediaEntities = r6
            long r6 = r2.averageDuration
            r3.averageDuration = r6
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r6 = r2.mediaEntities
            r3.mediaEntities = r6
            org.telegram.messenger.MediaController$CropState r2 = r2.cropState
            r3.cropState = r2
        L_0x02e3:
            r2 = 0
            r3 = 0
            r10 = 0
        L_0x02e6:
            boolean r6 = r1 instanceof org.telegram.messenger.MediaController.MediaEditState
            if (r6 == 0) goto L_0x0302
            org.telegram.messenger.MediaController$MediaEditState r1 = (org.telegram.messenger.MediaController.MediaEditState) r1
            boolean r6 = r33.hasAnimatedMediaEntities()
            if (r6 == 0) goto L_0x02f7
            java.lang.String r1 = r1.imagePath
            r0.currentImagePath = r1
            goto L_0x0302
        L_0x02f7:
            java.lang.String r1 = r1.filterPath
            if (r1 == 0) goto L_0x02fe
            r0.currentImagePath = r1
            goto L_0x0302
        L_0x02fe:
            java.lang.String r1 = r0.currentPathObject
            r0.currentImagePath = r1
        L_0x0302:
            r13 = r3
            r1 = r10
            r10 = r2
        L_0x0305:
            org.telegram.ui.PhotoViewer$EditState r2 = r0.editState
            org.telegram.messenger.MediaController$CropState r2 = r2.cropState
            if (r2 == 0) goto L_0x0352
            r3 = 1
            r0.previousHasTransform = r3
            float r6 = r2.cropPx
            r0.previousCropPx = r6
            float r7 = r2.cropPy
            r0.previousCropPy = r7
            float r11 = r2.cropScale
            r0.previousCropScale = r11
            float r14 = r2.cropRotate
            r0.previousCropRotation = r14
            int r15 = r2.transformRotation
            r0.previousCropOrientation = r15
            float r12 = r2.cropPw
            r0.previousCropPw = r12
            float r5 = r2.cropPh
            r0.previousCropPh = r5
            boolean r2 = r2.mirrored
            r0.previousCropMirrored = r2
            org.telegram.ui.Components.Crop.CropTransform r3 = r0.cropTransform
            r26 = 1065353216(0x3var_, float:1.0)
            r27 = 1065353216(0x3var_, float:1.0)
            r30 = 0
            r31 = 0
            r19 = r3
            r3 = 1
            r20 = r3
            r21 = r6
            r22 = r7
            r23 = r14
            r24 = r15
            r25 = r11
            r28 = r12
            r29 = r5
            r32 = r2
            r19.setViewTransform(r20, r21, r22, r23, r24, r25, r26, r27, r28, r29, r30, r31, r32)
            goto L_0x03c0
        L_0x0352:
            r2 = 0
            r0.previousHasTransform = r2
            org.telegram.ui.Components.Crop.CropTransform r2 = r0.cropTransform
            r20 = 0
            float r3 = r0.previousCropPx
            float r5 = r0.previousCropPy
            float r6 = r0.previousCropRotation
            int r7 = r0.previousCropOrientation
            float r11 = r0.previousCropScale
            r26 = 1065353216(0x3var_, float:1.0)
            r27 = 1065353216(0x3var_, float:1.0)
            float r12 = r0.previousCropPw
            float r14 = r0.previousCropPh
            r30 = 0
            r31 = 0
            boolean r15 = r0.previousCropMirrored
            r19 = r2
            r21 = r3
            r22 = r5
            r23 = r6
            r24 = r7
            r25 = r11
            r28 = r12
            r29 = r14
            r32 = r15
            r19.setViewTransform(r20, r21, r22, r23, r24, r25, r26, r27, r28, r29, r30, r31, r32)
            goto L_0x03c0
        L_0x0387:
            r1 = 0
            r0.closePhoto(r1, r1)
            return
        L_0x038c:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r0.pageBlocksAdapter
            if (r1 == 0) goto L_0x03bd
            int r2 = r0.currentIndex
            if (r2 < 0) goto L_0x03b8
            int r1 = r1.getItemsCount()
            if (r2 < r1) goto L_0x039b
            goto L_0x03b8
        L_0x039b:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r0.pageBlocksAdapter
            int r2 = r0.currentIndex
            org.telegram.tgnet.TLRPC$PageBlock r1 = r1.get(r2)
            org.telegram.tgnet.TLRPC$PageBlock r2 = r0.currentPageBlock
            if (r2 == 0) goto L_0x03ab
            if (r2 != r1) goto L_0x03ab
            r10 = 1
            goto L_0x03ac
        L_0x03ab:
            r10 = 0
        L_0x03ac:
            r0.currentPageBlock = r1
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r0.pageBlocksAdapter
            int r2 = r0.currentIndex
            boolean r13 = r1.isVideo(r2)
            r1 = 0
            goto L_0x03c0
        L_0x03b8:
            r1 = 0
            r0.closePhoto(r1, r1)
            return
        L_0x03bd:
            r1 = 0
            r10 = 0
        L_0x03bf:
            r13 = 0
        L_0x03c0:
            r33.setMenuItemIcon()
            org.telegram.ui.PhotoViewer$PlaceProviderObject r2 = r0.currentPlaceObject
            if (r2 == 0) goto L_0x03d4
            int r3 = r0.animationInProgress
            if (r3 != 0) goto L_0x03d2
            org.telegram.messenger.ImageReceiver r2 = r2.imageReceiver
            r3 = 1
            r2.setVisible(r3, r3)
            goto L_0x03d4
        L_0x03d2:
            r0.showAfterAnimation = r2
        L_0x03d4:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r2 = r0.placeProvider
            org.telegram.messenger.MessageObject r3 = r0.currentMessageObject
            org.telegram.messenger.ImageLocation r5 = r0.currentFileLocation
            org.telegram.tgnet.TLRPC$FileLocation r5 = getFileLocation(r5)
            int r6 = r0.currentIndex
            r7 = 0
            org.telegram.ui.PhotoViewer$PlaceProviderObject r2 = r2.getPlaceForPhoto(r3, r5, r6, r7)
            r0.currentPlaceObject = r2
            if (r2 == 0) goto L_0x03f6
            int r3 = r0.animationInProgress
            if (r3 != 0) goto L_0x03f4
            org.telegram.messenger.ImageReceiver r2 = r2.imageReceiver
            r3 = 1
            r2.setVisible(r7, r3)
            goto L_0x03f6
        L_0x03f4:
            r0.hideAfterAnimation = r2
        L_0x03f6:
            if (r10 != 0) goto L_0x046f
            r0.draggingDown = r7
            r2 = 0
            r0.translationX = r2
            r0.translationY = r2
            r3 = 1065353216(0x3var_, float:1.0)
            r0.scale = r3
            r0.animateToX = r2
            r0.animateToY = r2
            r0.animateToScale = r3
            r0.animateToRotate = r2
            r5 = 0
            r0.animationStartTime = r5
            r0.zoomAnimation = r7
            r5 = 0
            r0.imageMoveAnimation = r5
            r0.changeModeAnimation = r5
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r5 = r0.aspectRatioFrameLayout
            if (r5 == 0) goto L_0x041e
            r6 = 4
            r5.setVisibility(r6)
        L_0x041e:
            r0.pinchStartDistance = r2
            r0.pinchStartScale = r3
            r0.pinchCenterX = r2
            r0.pinchCenterY = r2
            r0.pinchStartX = r2
            r0.pinchStartY = r2
            r0.moveStartX = r2
            r0.moveStartY = r2
            r2 = 0
            r0.zooming = r2
            r0.moving = r2
            r0.paintViewTouched = r2
            r0.doubleTap = r2
            r0.invalidCoords = r2
            r3 = 1
            r0.canDragDown = r3
            r0.changingPage = r2
            r0.switchImageAfterAnimation = r2
            int r5 = r0.sharedMediaType
            if (r5 == r3) goto L_0x0465
            boolean r3 = r0.isEmbedVideo
            if (r3 != 0) goto L_0x0462
            java.util.ArrayList<java.lang.Object> r3 = r0.imagesArrLocals
            boolean r3 = r3.isEmpty()
            if (r3 == 0) goto L_0x0460
            java.lang.String[] r3 = r0.currentFileNames
            r3 = r3[r2]
            if (r3 == 0) goto L_0x0462
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r3 = r0.photoProgressViews
            r3 = r3[r2]
            int r2 = r3.backgroundState
            if (r2 == 0) goto L_0x0462
        L_0x0460:
            r2 = 1
            goto L_0x0463
        L_0x0462:
            r2 = 0
        L_0x0463:
            r0.canZoom = r2
        L_0x0465:
            float r2 = r0.scale
            r0.updateMinMax(r2)
            r2 = 0
            r0.releasePlayer(r2)
            goto L_0x0470
        L_0x046f:
            r2 = 0
        L_0x0470:
            if (r13 == 0) goto L_0x0485
            if (r1 == 0) goto L_0x0485
            r0.isStreaming = r2
            int r3 = r0.sendPhotoType
            r5 = 1
            if (r3 != r5) goto L_0x047d
            r3 = 1
            goto L_0x047e
        L_0x047d:
            r3 = 0
        L_0x047e:
            org.telegram.ui.PhotoViewer$EditState r5 = r0.editState
            org.telegram.messenger.MediaController$SavedFilterState r5 = r5.savedFilterState
            r0.preparePlayer(r1, r3, r2, r5)
        L_0x0485:
            java.util.ArrayList<java.lang.Object> r1 = r0.imagesArrLocals
            boolean r1 = r1.isEmpty()
            if (r1 != 0) goto L_0x048e
            goto L_0x0493
        L_0x048e:
            org.telegram.ui.PhotoViewer$EditState r1 = r0.editState
            r1.reset()
        L_0x0493:
            r0.centerImageIsVideo = r13
            r1 = -1
            r2 = r16
            if (r2 != r1) goto L_0x04a8
            r33.setImages()
            r1 = 0
        L_0x049e:
            r2 = 3
            if (r1 >= r2) goto L_0x057f
            r3 = 0
            r0.checkProgress(r1, r3, r3)
            int r1 = r1 + 1
            goto L_0x049e
        L_0x04a8:
            r1 = 1
            r3 = 0
            r0.checkProgress(r3, r1, r3)
            int r1 = r0.currentIndex
            if (r2 <= r1) goto L_0x0513
            org.telegram.messenger.ImageReceiver r1 = r0.rightImage
            org.telegram.messenger.ImageReceiver r2 = r0.centerImage
            r0.rightImage = r2
            org.telegram.messenger.ImageReceiver r2 = r0.leftImage
            r0.centerImage = r2
            r0.leftImage = r1
            r0.rightImageIsVideo = r9
            r0.rightCropTransform = r4
            r0.rightCropState = r8
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r1 = r0.photoProgressViews
            r2 = 0
            r3 = r1[r2]
            r4 = 2
            r5 = r1[r4]
            r1[r2] = r5
            r1[r4] = r3
            android.widget.ImageView[] r1 = r0.fullscreenButton
            r3 = r1[r2]
            r5 = r1[r4]
            r1[r2] = r5
            r1[r4] = r3
            r1 = r1[r2]
            float r2 = r3.getTranslationY()
            r1.setTranslationY(r2)
            r1 = 0
            r0.leftCropState = r1
            int r1 = r0.currentIndex
            r2 = 1
            int r1 = r1 - r2
            org.telegram.ui.Components.PaintingOverlay r3 = r0.leftPaintingOverlay
            r0.setIndexToPaintingOverlay(r1, r3)
            int r1 = r0.currentIndex
            org.telegram.ui.Components.PaintingOverlay r3 = r0.paintingOverlay
            r0.setIndexToPaintingOverlay(r1, r3)
            int r1 = r0.currentIndex
            int r1 = r1 + r2
            org.telegram.ui.Components.PaintingOverlay r3 = r0.rightPaintingOverlay
            r0.setIndexToPaintingOverlay(r1, r3)
            org.telegram.messenger.ImageReceiver r1 = r0.leftImage
            int r3 = r0.currentIndex
            int r3 = r3 - r2
            org.telegram.ui.Components.Crop.CropTransform r4 = r0.leftCropTransform
            r0.setIndexToImage(r1, r3, r4)
            r33.updateAccessibilityOverlayVisibility()
            r1 = 0
            r0.checkProgress(r2, r2, r1)
            r3 = 2
            r0.checkProgress(r3, r2, r1)
            goto L_0x0575
        L_0x0513:
            if (r2 >= r1) goto L_0x0575
            org.telegram.messenger.ImageReceiver r1 = r0.leftImage
            org.telegram.messenger.ImageReceiver r2 = r0.centerImage
            r0.leftImage = r2
            org.telegram.messenger.ImageReceiver r2 = r0.rightImage
            r0.centerImage = r2
            r0.rightImage = r1
            r0.leftImageIsVideo = r9
            r0.leftCropTransform = r4
            r0.leftCropState = r8
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r1 = r0.photoProgressViews
            r2 = 0
            r3 = r1[r2]
            r4 = 1
            r5 = r1[r4]
            r1[r2] = r5
            r1[r4] = r3
            android.widget.ImageView[] r1 = r0.fullscreenButton
            r3 = r1[r2]
            r5 = r1[r4]
            r1[r2] = r5
            r1[r4] = r3
            r1 = r1[r2]
            float r2 = r3.getTranslationY()
            r1.setTranslationY(r2)
            r1 = 0
            r0.rightCropState = r1
            int r1 = r0.currentIndex
            int r1 = r1 - r4
            org.telegram.ui.Components.PaintingOverlay r2 = r0.leftPaintingOverlay
            r0.setIndexToPaintingOverlay(r1, r2)
            int r1 = r0.currentIndex
            org.telegram.ui.Components.PaintingOverlay r2 = r0.paintingOverlay
            r0.setIndexToPaintingOverlay(r1, r2)
            int r1 = r0.currentIndex
            int r1 = r1 + r4
            org.telegram.ui.Components.PaintingOverlay r2 = r0.rightPaintingOverlay
            r0.setIndexToPaintingOverlay(r1, r2)
            org.telegram.messenger.ImageReceiver r1 = r0.rightImage
            int r2 = r0.currentIndex
            int r2 = r2 + r4
            org.telegram.ui.Components.Crop.CropTransform r3 = r0.rightCropTransform
            r0.setIndexToImage(r1, r2, r3)
            r33.updateAccessibilityOverlayVisibility()
            r1 = 0
            r0.checkProgress(r4, r4, r1)
            r2 = 2
            r0.checkProgress(r2, r4, r1)
        L_0x0575:
            android.graphics.Bitmap r1 = r0.videoFrameBitmap
            if (r1 == 0) goto L_0x057f
            r1.recycle()
            r1 = 0
            r0.videoFrameBitmap = r1
        L_0x057f:
            r33.detectFaces()
        L_0x0582:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.setImageIndex(int, boolean, boolean):void");
    }

    private void setCurrentCaption(MessageObject messageObject, CharSequence charSequence, boolean z) {
        boolean z2;
        CharSequence charSequence2;
        int i;
        int i2;
        MessageObject messageObject2 = messageObject;
        boolean z3 = z;
        CharSequence cloneSpans = AnimatedEmojiSpan.cloneSpans(charSequence);
        boolean z4 = true;
        int i3 = 0;
        if (!this.needCaptionLayout) {
            if (this.captionScrollView == null) {
                this.captionScrollView = new CaptionScrollView(this.containerView.getContext());
                FrameLayout frameLayout = new FrameLayout(this.containerView.getContext());
                this.captionContainer = frameLayout;
                frameLayout.setClipChildren(false);
                this.captionScrollView.addView((View) this.captionContainer, new ViewGroup.LayoutParams(-1, -2));
                this.containerView.addView(this.captionScrollView, LayoutHelper.createFrame(-1, -1, 80));
            }
            if (this.captionTextViewSwitcher.getParent() != this.captionContainer) {
                this.pickerView.removeView(this.captionTextViewSwitcher);
                this.captionTextViewSwitcher.setMeasureAllChildren(true);
                this.captionContainer.addView(this.captionTextViewSwitcher, -1, -2);
                this.videoPreviewFrame.bringToFront();
            }
        } else if (this.captionTextViewSwitcher.getParent() != this.pickerView) {
            FrameLayout frameLayout2 = this.captionContainer;
            if (frameLayout2 != null) {
                frameLayout2.removeView(this.captionTextViewSwitcher);
            }
            this.captionTextViewSwitcher.setMeasureAllChildren(false);
            this.pickerView.addView(this.captionTextViewSwitcher, LayoutHelper.createFrame(-1, -2.0f, 83, 0.0f, 0.0f, 76.0f, 48.0f));
        }
        final boolean isEmpty = TextUtils.isEmpty(cloneSpans);
        final boolean isEmpty2 = TextUtils.isEmpty(this.captionTextViewSwitcher.getCurrentView().getText());
        CaptionTextViewSwitcher captionTextViewSwitcher2 = this.captionTextViewSwitcher;
        TextView nextView = z3 ? captionTextViewSwitcher2.getNextView() : captionTextViewSwitcher2.getCurrentView();
        if (!this.isCurrentVideo) {
            int maxLines = nextView.getMaxLines();
            if (maxLines == 1) {
                this.captionTextViewSwitcher.getCurrentView().setSingleLine(false);
                this.captionTextViewSwitcher.getNextView().setSingleLine(false);
            }
            if (this.needCaptionLayout) {
                Point point = AndroidUtilities.displaySize;
                i2 = point.x > point.y ? 5 : 10;
            } else {
                i2 = Integer.MAX_VALUE;
            }
            if (maxLines != i2) {
                this.captionTextViewSwitcher.getCurrentView().setMaxLines(i2);
                this.captionTextViewSwitcher.getNextView().setMaxLines(i2);
                this.captionTextViewSwitcher.getCurrentView().setEllipsize((TextUtils.TruncateAt) null);
                this.captionTextViewSwitcher.getNextView().setEllipsize((TextUtils.TruncateAt) null);
            }
        } else if (nextView.getMaxLines() != 1) {
            this.captionTextViewSwitcher.getCurrentView().setMaxLines(1);
            this.captionTextViewSwitcher.getNextView().setMaxLines(1);
            this.captionTextViewSwitcher.getCurrentView().setSingleLine(true);
            this.captionTextViewSwitcher.getNextView().setSingleLine(true);
            this.captionTextViewSwitcher.getCurrentView().setEllipsize(TextUtils.TruncateAt.END);
            this.captionTextViewSwitcher.getNextView().setEllipsize(TextUtils.TruncateAt.END);
        }
        nextView.setScrollX(0);
        boolean z5 = this.needCaptionLayout;
        this.dontChangeCaptionPosition = !z5 && z3 && isEmpty;
        if (!z5) {
            boolean unused = this.captionScrollView.dontChangeTopMargin = false;
        }
        if (!z3 || (i = Build.VERSION.SDK_INT) < 19) {
            this.captionTextViewSwitcher.getCurrentView().setText((CharSequence) null);
            CaptionScrollView captionScrollView2 = this.captionScrollView;
            if (captionScrollView2 != null) {
                captionScrollView2.scrollTo(0, 0);
            }
            z2 = false;
        } else {
            if (i >= 23) {
                TransitionManager.endTransitions(this.needCaptionLayout ? this.pickerView : this.captionScrollView);
            }
            if (this.needCaptionLayout) {
                TransitionSet transitionSet = new TransitionSet();
                transitionSet.setOrdering(0);
                transitionSet.addTransition(new ChangeBounds());
                transitionSet.addTransition(new Fade(2));
                transitionSet.addTransition(new Fade(1));
                transitionSet.setDuration(200);
                TransitionManager.beginDelayedTransition(this.pickerView, transitionSet);
            } else {
                TransitionSet duration = new TransitionSet().addTransition(new Fade(2) {
                    public Animator onDisappear(ViewGroup viewGroup, View view, TransitionValues transitionValues, TransitionValues transitionValues2) {
                        Animator onDisappear = super.onDisappear(viewGroup, view, transitionValues, transitionValues2);
                        if (!isEmpty2 && isEmpty && view == PhotoViewer.this.captionTextViewSwitcher) {
                            onDisappear.addListener(new AnimatorListenerAdapter() {
                                public void onAnimationEnd(Animator animator) {
                                    PhotoViewer.this.captionScrollView.setVisibility(4);
                                    float unused = PhotoViewer.this.captionScrollView.backgroundAlpha = 1.0f;
                                }
                            });
                            ((ObjectAnimator) onDisappear).addUpdateListener(new PhotoViewer$66$$ExternalSyntheticLambda0(this));
                        }
                        return onDisappear;
                    }

                    /* access modifiers changed from: private */
                    public /* synthetic */ void lambda$onDisappear$0(ValueAnimator valueAnimator) {
                        float unused = PhotoViewer.this.captionScrollView.backgroundAlpha = ((Float) valueAnimator.getAnimatedValue()).floatValue();
                        PhotoViewer.this.captionScrollView.invalidate();
                    }
                }).addTransition(new Fade(1) {
                    public Animator onAppear(ViewGroup viewGroup, View view, TransitionValues transitionValues, TransitionValues transitionValues2) {
                        Animator onAppear = super.onAppear(viewGroup, view, transitionValues, transitionValues2);
                        if (isEmpty2 && !isEmpty && view == PhotoViewer.this.captionTextViewSwitcher) {
                            onAppear.addListener(new AnimatorListenerAdapter() {
                                public void onAnimationEnd(Animator animator) {
                                    float unused = PhotoViewer.this.captionScrollView.backgroundAlpha = 1.0f;
                                }
                            });
                            ((ObjectAnimator) onAppear).addUpdateListener(new PhotoViewer$65$$ExternalSyntheticLambda0(this));
                        }
                        return onAppear;
                    }

                    /* access modifiers changed from: private */
                    public /* synthetic */ void lambda$onAppear$0(ValueAnimator valueAnimator) {
                        float unused = PhotoViewer.this.captionScrollView.backgroundAlpha = ((Float) valueAnimator.getAnimatedValue()).floatValue();
                        PhotoViewer.this.captionScrollView.invalidate();
                    }
                }).setDuration(200);
                if (!isEmpty2) {
                    boolean unused2 = this.captionScrollView.dontChangeTopMargin = true;
                    duration.addTransition(new Transition() {
                        public void captureStartValues(TransitionValues transitionValues) {
                            if (transitionValues.view == PhotoViewer.this.captionScrollView) {
                                transitionValues.values.put("scrollY", Integer.valueOf(PhotoViewer.this.captionScrollView.getScrollY()));
                            }
                        }

                        public void captureEndValues(TransitionValues transitionValues) {
                            if (transitionValues.view == PhotoViewer.this.captionTextViewSwitcher) {
                                transitionValues.values.put("translationY", Integer.valueOf(PhotoViewer.this.captionScrollView.getPendingMarginTopDiff()));
                            }
                        }

                        public Animator createAnimator(ViewGroup viewGroup, TransitionValues transitionValues, TransitionValues transitionValues2) {
                            int intValue;
                            if (transitionValues.view == PhotoViewer.this.captionScrollView) {
                                ValueAnimator ofInt = ValueAnimator.ofInt(new int[]{((Integer) transitionValues.values.get("scrollY")).intValue(), 0});
                                ofInt.addListener(new AnimatorListenerAdapter() {
                                    public void onAnimationEnd(Animator animator) {
                                        PhotoViewer.this.captionTextViewSwitcher.getNextView().setText((CharSequence) null);
                                        PhotoViewer.this.captionScrollView.applyPendingTopMargin();
                                    }

                                    public void onAnimationStart(Animator animator) {
                                        PhotoViewer.this.captionScrollView.stopScrolling();
                                    }
                                });
                                ofInt.addUpdateListener(new PhotoViewer$67$$ExternalSyntheticLambda0(this));
                                return ofInt;
                            } else if (transitionValues2.view != PhotoViewer.this.captionTextViewSwitcher || (intValue = ((Integer) transitionValues2.values.get("translationY")).intValue()) == 0) {
                                return null;
                            } else {
                                ObjectAnimator ofFloat = ObjectAnimator.ofFloat(PhotoViewer.this.captionTextViewSwitcher, View.TRANSLATION_Y, new float[]{0.0f, (float) intValue});
                                ofFloat.addListener(new AnimatorListenerAdapter() {
                                    public void onAnimationEnd(Animator animator) {
                                        PhotoViewer.this.captionTextViewSwitcher.setTranslationY(0.0f);
                                    }
                                });
                                return ofFloat;
                            }
                        }

                        /* access modifiers changed from: private */
                        public /* synthetic */ void lambda$createAnimator$0(ValueAnimator valueAnimator) {
                            PhotoViewer.this.captionScrollView.scrollTo(0, ((Integer) valueAnimator.getAnimatedValue()).intValue());
                        }
                    });
                }
                if (isEmpty2 && !isEmpty) {
                    duration.addTarget(this.captionTextViewSwitcher);
                }
                TransitionManager.beginDelayedTransition(this.captionScrollView, duration);
            }
            z2 = true;
        }
        if (!isEmpty) {
            Theme.createChatResources((Context) null, true);
            if (messageObject2 == null || messageObject2.messageOwner.entities.isEmpty()) {
                charSequence2 = Emoji.replaceEmoji(new SpannableStringBuilder(cloneSpans), nextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(20.0f), false);
            } else {
                SpannableString spannableString = new SpannableString(cloneSpans);
                messageObject2.addEntitiesToText(spannableString, true, false);
                if (messageObject.isVideo()) {
                    MessageObject.addUrlsByPattern(messageObject.isOutOwner(), spannableString, false, 3, messageObject.getDuration(), false);
                }
                charSequence2 = Emoji.replaceEmoji(spannableString, nextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(20.0f), false);
            }
            this.captionTextViewSwitcher.setTag(charSequence2);
            try {
                this.captionTextViewSwitcher.setText(charSequence2, z3);
                CaptionScrollView captionScrollView3 = this.captionScrollView;
                if (captionScrollView3 != null) {
                    captionScrollView3.updateTopMargin();
                }
            } catch (Exception e) {
                FileLog.e((Throwable) e);
            }
            nextView.setScrollY(0);
            nextView.setTextColor(-1);
            if (!this.isActionBarVisible || !(this.bottomLayout.getVisibility() == 0 || this.pickerView.getVisibility() == 0 || this.pageBlocksAdapter != null)) {
                z4 = false;
            }
            CaptionTextViewSwitcher captionTextViewSwitcher3 = this.captionTextViewSwitcher;
            if (!z4) {
                i3 = 4;
            }
            captionTextViewSwitcher3.setVisibility(i3);
        } else if (this.needCaptionLayout) {
            this.captionTextViewSwitcher.setText(LocaleController.getString("AddCaption", R.string.AddCaption), z3);
            this.captionTextViewSwitcher.getCurrentView().setTextColor(-NUM);
            this.captionTextViewSwitcher.setTag("empty");
            this.captionTextViewSwitcher.setVisibility(0);
        } else {
            this.captionTextViewSwitcher.setText((CharSequence) null, z3);
            this.captionTextViewSwitcher.getCurrentView().setTextColor(-1);
            CaptionTextViewSwitcher captionTextViewSwitcher4 = this.captionTextViewSwitcher;
            if (z2 && !isEmpty2) {
                z4 = false;
            }
            captionTextViewSwitcher4.setVisibility(4, z4);
            this.captionTextViewSwitcher.setTag((Object) null);
        }
    }

    /* access modifiers changed from: private */
    public void setCaptionHwLayerEnabled(boolean z) {
        if (this.captionHwLayerEnabled != z) {
            this.captionHwLayerEnabled = z;
            this.captionTextViewSwitcher.setLayerType(2, (Paint) null);
            this.captionTextViewSwitcher.getCurrentView().setLayerType(2, (Paint) null);
            this.captionTextViewSwitcher.getNextView().setLayerType(2, (Paint) null);
        }
    }

    /* access modifiers changed from: private */
    public void checkProgress(int i, boolean z, boolean z2) {
        boolean z3;
        boolean z4;
        MessageObject messageObject;
        File file;
        File file2;
        boolean z5;
        File file3;
        File file4;
        File file5;
        MessageObject messageObject2;
        boolean shouldIndexAutoPlayed;
        File file6;
        boolean z6;
        File file7;
        boolean z7;
        File file8;
        File file9;
        FileLoader.FileResolver fileResolver;
        AnimatedFileDrawable animatedFileDrawable;
        int i2 = i;
        boolean z8 = z2;
        int i3 = this.currentIndex;
        int i4 = i2 == 1 ? i3 + 1 : i2 == 2 ? i3 - 1 : i3;
        boolean z9 = false;
        if (this.currentFileNames[i2] != null) {
            boolean hasBitmap = (i2 == 0 && i3 == 0 && (animatedFileDrawable = this.currentAnimation) != null) ? animatedFileDrawable.hasBitmap() : false;
            FileLoader.FileResolver fileResolver2 = null;
            if (this.currentMessageObject == null) {
                if (this.currentBotInlineResult == null) {
                    if (this.currentFileLocation != null) {
                        if (i4 < 0 || i4 >= this.imagesArrLocationsVideo.size()) {
                            this.photoProgressViews[i2].setBackgroundState(-1, z8, true);
                            return;
                        } else {
                            ImageLocation imageLocation = this.imagesArrLocationsVideo.get(i4);
                            file3 = FileLoader.getInstance(this.currentAccount).getPathToAttach(imageLocation.location, getFileLocationExt(imageLocation), this.avatarsDialogId != 0 || this.isEvent);
                        }
                    } else if (this.currentSecureDocument == null) {
                        if (this.currentPathObject != null) {
                            file4 = new File(FileLoader.getDirectory(3), this.currentFileNames[i2]);
                            file5 = new File(FileLoader.getDirectory(4), this.currentFileNames[i2]);
                            messageObject2 = null;
                        } else {
                            PageBlocksAdapter pageBlocksAdapter2 = this.pageBlocksAdapter;
                            if (pageBlocksAdapter2 != null) {
                                File file10 = pageBlocksAdapter2.getFile(i4);
                                boolean isVideo = this.pageBlocksAdapter.isVideo(i4);
                                shouldIndexAutoPlayed = shouldIndexAutoPlayed(i4);
                                file6 = file10;
                                z6 = isVideo;
                                file7 = null;
                                messageObject = null;
                            } else {
                                file5 = null;
                                file4 = null;
                                messageObject2 = null;
                            }
                        }
                        z5 = false;
                        z4 = false;
                        z3 = false;
                    } else if (i4 < 0 || i4 >= this.secureDocuments.size()) {
                        this.photoProgressViews[i2].setBackgroundState(-1, z8, true);
                        return;
                    } else {
                        file3 = FileLoader.getInstance(this.currentAccount).getPathToAttach(this.secureDocuments.get(i4), true);
                    }
                    file4 = file3;
                    file5 = null;
                    messageObject2 = null;
                    z5 = false;
                    z4 = false;
                    z3 = false;
                } else if (i4 < 0 || i4 >= this.imagesArrLocals.size()) {
                    this.photoProgressViews[i2].setBackgroundState(-1, z8, true);
                    return;
                } else {
                    TLRPC$BotInlineResult tLRPC$BotInlineResult = (TLRPC$BotInlineResult) this.imagesArrLocals.get(i4);
                    if (tLRPC$BotInlineResult.type.equals("video") || MessageObject.isVideoDocument(tLRPC$BotInlineResult.document)) {
                        if (tLRPC$BotInlineResult.document != null) {
                            file9 = FileLoader.getInstance(this.currentAccount).getPathToAttach(tLRPC$BotInlineResult.document);
                        } else if (tLRPC$BotInlineResult.content instanceof TLRPC$TL_webDocument) {
                            file9 = new File(FileLoader.getDirectory(4), Utilities.MD5(tLRPC$BotInlineResult.content.url) + "." + ImageLoader.getHttpUrlExtension(tLRPC$BotInlineResult.content.url, "mp4"));
                        } else {
                            file9 = null;
                        }
                        z7 = true;
                    } else {
                        if (tLRPC$BotInlineResult.document != null) {
                            file8 = new File(FileLoader.getDirectory(3), this.currentFileNames[i2]);
                        } else {
                            file8 = tLRPC$BotInlineResult.photo != null ? new File(FileLoader.getDirectory(0), this.currentFileNames[i2]) : null;
                        }
                        z7 = false;
                    }
                    file7 = new File(FileLoader.getDirectory(4), this.currentFileNames[i2]);
                    file6 = file8;
                    z6 = z7;
                    messageObject = null;
                    shouldIndexAutoPlayed = false;
                }
                z4 = false;
            } else if (i4 < 0 || i4 >= this.imagesArr.size()) {
                this.photoProgressViews[i2].setBackgroundState(-1, z8, true);
                return;
            } else {
                MessageObject messageObject3 = this.imagesArr.get(i4);
                boolean shouldMessageObjectAutoPlayed = shouldMessageObjectAutoPlayed(messageObject3);
                if (this.sharedMediaType != 1 || messageObject3.canPreviewDocument()) {
                    file = !TextUtils.isEmpty(messageObject3.messageOwner.attachPath) ? new File(messageObject3.messageOwner.attachPath) : null;
                    if (!(MessageObject.getMedia(messageObject3.messageOwner) instanceof TLRPC$TL_messageMediaWebPage) || MessageObject.getMedia(messageObject3.messageOwner).webpage == null || MessageObject.getMedia(messageObject3.messageOwner).webpage.document != null) {
                        fileResolver = new PhotoViewer$$ExternalSyntheticLambda75(this, messageObject3.messageOwner);
                    } else {
                        fileResolver = new PhotoViewer$$ExternalSyntheticLambda74(this, getFileLocation(i4, (long[]) null));
                    }
                    if (messageObject3.isVideo()) {
                        z4 = SharedConfig.streamMedia && messageObject3.canStreamVideo() && !DialogObject.isEncryptedDialog(messageObject3.getDialogId());
                        z5 = shouldMessageObjectAutoPlayed;
                        file2 = null;
                        fileResolver2 = fileResolver;
                        z3 = true;
                    } else {
                        z5 = shouldMessageObjectAutoPlayed;
                        file2 = null;
                        fileResolver2 = fileResolver;
                        z4 = false;
                        z3 = false;
                    }
                    messageObject = messageObject3;
                } else {
                    this.photoProgressViews[i2].setBackgroundState(-1, z8, true);
                    return;
                }
            }
            boolean z10 = z4;
            PhotoViewer$$ExternalSyntheticLambda72 photoViewer$$ExternalSyntheticLambda72 = r0;
            PhotoViewer$$ExternalSyntheticLambda72 photoViewer$$ExternalSyntheticLambda722 = new PhotoViewer$$ExternalSyntheticLambda72(this, hasBitmap, file, file2, fileResolver2, i, messageObject, z10, z3, (i2 != 0 || !this.dontAutoPlay) && z5, z2);
            Utilities.globalQueue.postRunnable(photoViewer$$ExternalSyntheticLambda72);
            return;
        }
        if (!this.imagesArrLocals.isEmpty() && i4 >= 0 && i4 < this.imagesArrLocals.size()) {
            Object obj = this.imagesArrLocals.get(i4);
            if (obj instanceof MediaController.PhotoEntry) {
                z9 = ((MediaController.PhotoEntry) obj).isVideo;
            }
        }
        if (z9) {
            this.photoProgressViews[i2].setBackgroundState(3, z8, true);
        } else {
            this.photoProgressViews[i2].setBackgroundState(-1, z8, true);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ File lambda$checkProgress$68(TLObject tLObject) {
        return FileLoader.getInstance(this.currentAccount).getPathToAttach(tLObject, true);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ File lambda$checkProgress$69(TLRPC$Message tLRPC$Message) {
        return FileLoader.getInstance(this.currentAccount).getPathToMessage(tLRPC$Message);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$checkProgress$71(boolean z, File file, File file2, FileLoader.FileResolver fileResolver, int i, MessageObject messageObject, boolean z2, boolean z3, boolean z4, boolean z5) {
        File file3;
        ChatActivity chatActivity;
        TLRPC$Document document;
        MessageObject messageObject2 = messageObject;
        boolean exists = (z || file == null) ? z : file.exists();
        File file4 = null;
        if (file2 != null || fileResolver == null) {
            if (fileResolver != null) {
                file4 = fileResolver.getFile();
            }
            file3 = file2;
        } else {
            file3 = fileResolver.getFile();
        }
        if (!exists && file3 != null) {
            exists = file3.exists();
        }
        if (!exists && file4 != null) {
            exists = file4.exists();
        }
        boolean z6 = exists;
        if (!z6 && i != 0 && messageObject2 != null && z2 && DownloadController.getInstance(this.currentAccount).canDownloadMedia(messageObject2.messageOwner) != 0 && (((chatActivity = this.parentChatActivity) == null || chatActivity.getCurrentEncryptedChat() == null) && !messageObject.shouldEncryptPhotoOrVideo() && (document = messageObject.getDocument()) != null)) {
            FileLoader.getInstance(this.currentAccount).loadFile(document, messageObject2, 0, 10);
        }
        AndroidUtilities.runOnUIThread(new PhotoViewer$$ExternalSyntheticLambda62(this, i, file, file3, z6, z2, z3, z4, z5));
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$checkProgress$70(int i, File file, File file2, boolean z, boolean z2, boolean z3, boolean z4, boolean z5) {
        boolean z6 = false;
        if (!this.shownControlsByEnd || this.actionBarWasShownBeforeByEnd || !this.isPlaying) {
            if (!(file == null && file2 == null) && (z || z2)) {
                if (i != 0 || !this.isPlaying) {
                    if (!z3 || (z4 && (i != 0 || !this.playerWasPlaying))) {
                        this.photoProgressViews[i].setBackgroundState(-1, z5, true);
                    } else {
                        this.photoProgressViews[i].setBackgroundState(3, z5, true);
                    }
                }
                if (i == 0) {
                    if (z) {
                        this.menuItem.hideSubItem(7);
                    } else if (!FileLoader.getInstance(this.currentAccount).isLoadingFile(this.currentFileNames[i])) {
                        this.menuItem.hideSubItem(7);
                    } else {
                        this.menuItem.showSubItem(7);
                    }
                }
            } else {
                if (!z3) {
                    this.photoProgressViews[i].setBackgroundState(0, z5, true);
                } else if (!FileLoader.getInstance(this.currentAccount).isLoadingFile(this.currentFileNames[i])) {
                    this.photoProgressViews[i].setBackgroundState(2, false, true);
                } else {
                    this.photoProgressViews[i].setBackgroundState(1, false, true);
                }
                Float fileProgress = ImageLoader.getInstance().getFileProgress(this.currentFileNames[i]);
                if (fileProgress == null) {
                    fileProgress = Float.valueOf(0.0f);
                }
                this.photoProgressViews[i].setProgress(fileProgress.floatValue(), false);
            }
            if (i == 0) {
                if (!this.isEmbedVideo && (!this.imagesArrLocals.isEmpty() || !(this.currentFileNames[0] == null || this.photoProgressViews[0].backgroundState == 0))) {
                    z6 = true;
                }
                this.canZoom = z6;
                return;
            }
            return;
        }
        this.photoProgressViews[i].setBackgroundState(3, false, false);
    }

    public int getSelectiongLength() {
        PhotoViewerCaptionEnterView photoViewerCaptionEnterView = this.captionEditText;
        if (photoViewerCaptionEnterView != null) {
            return photoViewerCaptionEnterView.getSelectionLength();
        }
        return 0;
    }

    private void setIndexToPaintingOverlay(int i, PaintingOverlay paintingOverlay2) {
        ArrayList<VideoEditedInfo.MediaEntity> arrayList;
        boolean z;
        if (paintingOverlay2 != null) {
            paintingOverlay2.reset();
            paintingOverlay2.setVisibility(8);
            if (!this.imagesArrLocals.isEmpty() && i >= 0 && i < this.imagesArrLocals.size()) {
                Object obj = this.imagesArrLocals.get(i);
                String str = null;
                if (obj instanceof MediaController.PhotoEntry) {
                    MediaController.PhotoEntry photoEntry = (MediaController.PhotoEntry) obj;
                    z = photoEntry.isVideo;
                    str = photoEntry.paintPath;
                    arrayList = photoEntry.mediaEntities;
                } else {
                    if (obj instanceof MediaController.SearchImage) {
                        MediaController.SearchImage searchImage = (MediaController.SearchImage) obj;
                        str = searchImage.paintPath;
                        arrayList = searchImage.mediaEntities;
                    } else {
                        arrayList = null;
                    }
                    z = false;
                }
                paintingOverlay2.setVisibility(0);
                paintingOverlay2.setData(str, arrayList, z, false);
            }
        }
    }

    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r18v0, resolved type: org.telegram.messenger.MessageObject} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r10v3, resolved type: org.telegram.messenger.MessageObject} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r18v1, resolved type: org.telegram.messenger.MessageObject} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r18v3, resolved type: org.telegram.tgnet.TLObject} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r18v4, resolved type: org.telegram.tgnet.TLObject} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r18v5, resolved type: org.telegram.messenger.MessageObject} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r18v6, resolved type: org.telegram.messenger.MessageObject} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r18v7, resolved type: org.telegram.messenger.MessageObject} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r18v8, resolved type: org.telegram.messenger.MessageObject} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r4v31, resolved type: android.graphics.drawable.BitmapDrawable} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r4v32, resolved type: android.graphics.drawable.BitmapDrawable} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r4v36, resolved type: android.graphics.drawable.BitmapDrawable} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r7v40, resolved type: org.telegram.tgnet.TLRPC$Photo} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r7v42, resolved type: org.telegram.tgnet.TLRPC$Photo} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r7v43, resolved type: org.telegram.tgnet.TLRPC$Photo} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r7v44, resolved type: org.telegram.tgnet.TLRPC$Photo} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r7v45, resolved type: org.telegram.tgnet.TLRPC$Document} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r7v47, resolved type: org.telegram.tgnet.TLRPC$Photo} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r7v49, resolved type: org.telegram.tgnet.TLRPC$Photo} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r7v50, resolved type: org.telegram.tgnet.TLRPC$Photo} */
    /* JADX WARNING: Multi-variable type inference failed */
    /* JADX WARNING: Removed duplicated region for block: B:160:0x03a1  */
    /* JADX WARNING: Removed duplicated region for block: B:165:0x03dc  */
    /* JADX WARNING: Removed duplicated region for block: B:166:0x03e2  */
    /* JADX WARNING: Removed duplicated region for block: B:342:0x070c  */
    /* JADX WARNING: Removed duplicated region for block: B:353:0x0748  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private void setIndexToImage(org.telegram.messenger.ImageReceiver r33, int r34, org.telegram.ui.Components.Crop.CropTransform r35) {
        /*
            r32 = this;
            r0 = r32
            r14 = r33
            r1 = r34
            r15 = r35
            r13 = 0
            r14.setOrientation(r13, r13)
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r2 = r0.secureDocuments
            boolean r2 = r2.isEmpty()
            r3 = 0
            if (r2 != 0) goto L_0x006c
            if (r1 < 0) goto L_0x079e
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r2 = r0.secureDocuments
            int r2 = r2.size()
            if (r1 >= r2) goto L_0x079e
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r2 = r0.secureDocuments
            r2.get(r1)
            org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r2 = org.telegram.messenger.AndroidUtilities.density
            org.telegram.messenger.ImageReceiver$BitmapHolder r2 = r0.currentThumb
            if (r2 == 0) goto L_0x0032
            org.telegram.messenger.ImageReceiver r4 = r0.centerImage
            if (r14 != r4) goto L_0x0032
            goto L_0x0033
        L_0x0032:
            r2 = r3
        L_0x0033:
            if (r2 != 0) goto L_0x003b
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r2 = r0.placeProvider
            org.telegram.messenger.ImageReceiver$BitmapHolder r2 = r2.getThumbForPhoto(r3, r3, r1)
        L_0x003b:
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r4 = r0.secureDocuments
            java.lang.Object r1 = r4.get(r1)
            org.telegram.messenger.SecureDocument r1 = (org.telegram.messenger.SecureDocument) r1
            org.telegram.tgnet.TLRPC$TL_secureFile r4 = r1.secureFile
            long r7 = r4.size
            org.telegram.messenger.ImageLocation r4 = org.telegram.messenger.ImageLocation.getForSecureDocument(r1)
            r5 = 0
            r6 = 0
            if (r2 == 0) goto L_0x0058
            android.graphics.drawable.BitmapDrawable r1 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r2 = r2.bitmap
            r1.<init>(r2)
            r9 = r1
            goto L_0x0059
        L_0x0058:
            r9 = r3
        L_0x0059:
            r10 = 0
            r11 = 0
            r12 = 0
            java.lang.String r3 = "d"
            r1 = r33
            r2 = r4
            r4 = r5
            r5 = r6
            r6 = r9
            r9 = r10
            r10 = r11
            r11 = r12
            r1.setImage(r2, r3, r4, r5, r6, r7, r9, r10, r11)
            goto L_0x079e
        L_0x006c:
            java.util.ArrayList<java.lang.Object> r2 = r0.imagesArrLocals
            boolean r2 = r2.isEmpty()
            java.lang.String r4 = "%d_%d"
            r5 = 2
            r12 = 1
            if (r2 != 0) goto L_0x03f2
            if (r1 < 0) goto L_0x03ec
            java.util.ArrayList<java.lang.Object> r2 = r0.imagesArrLocals
            int r2 = r2.size()
            if (r1 >= r2) goto L_0x03ec
            java.util.ArrayList<java.lang.Object> r2 = r0.imagesArrLocals
            java.lang.Object r11 = r2.get(r1)
            int r2 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r2 = (float) r2
            float r8 = org.telegram.messenger.AndroidUtilities.density
            float r2 = r2 / r8
            int r2 = (int) r2
            org.telegram.messenger.ImageReceiver$BitmapHolder r8 = r0.currentThumb
            if (r8 == 0) goto L_0x009a
            org.telegram.messenger.ImageReceiver r9 = r0.centerImage
            if (r14 != r9) goto L_0x009a
            goto L_0x009b
        L_0x009a:
            r8 = r3
        L_0x009b:
            if (r8 != 0) goto L_0x00a3
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r8 = r0.placeProvider
            org.telegram.messenger.ImageReceiver$BitmapHolder r8 = r8.getThumbForPhoto(r3, r3, r1)
        L_0x00a3:
            boolean r1 = r11 instanceof org.telegram.messenger.MediaController.PhotoEntry
            java.lang.String r10 = "d"
            if (r1 == 0) goto L_0x011e
            r1 = r11
            org.telegram.messenger.MediaController$PhotoEntry r1 = (org.telegram.messenger.MediaController.PhotoEntry) r1
            org.telegram.messenger.MediaController$CropState r10 = r1.cropState
            boolean r6 = r1.isVideo
            if (r6 == 0) goto L_0x00e9
            java.lang.String r7 = r1.thumbPath
            if (r7 == 0) goto L_0x00ca
            boolean r9 = r0.fromCamera
            if (r9 == 0) goto L_0x00e7
            android.graphics.Bitmap r7 = android.graphics.BitmapFactory.decodeFile(r7)
            if (r7 == 0) goto L_0x00c7
            org.telegram.messenger.ImageReceiver$BitmapHolder r8 = new org.telegram.messenger.ImageReceiver$BitmapHolder
            r8.<init>(r7)
            r1.thumbPath = r3
        L_0x00c7:
            r1 = r3
            r7 = r1
            goto L_0x010a
        L_0x00ca:
            java.lang.StringBuilder r7 = new java.lang.StringBuilder
            r7.<init>()
            java.lang.String r9 = "vthumb://"
            r7.append(r9)
            int r9 = r1.imageId
            r7.append(r9)
            java.lang.String r9 = ":"
            r7.append(r9)
            java.lang.String r1 = r1.path
            r7.append(r1)
            java.lang.String r7 = r7.toString()
        L_0x00e7:
            r1 = r3
            goto L_0x010a
        L_0x00e9:
            java.lang.String r7 = r1.filterPath
            if (r7 == 0) goto L_0x00ee
            goto L_0x00f6
        L_0x00ee:
            int r7 = r1.orientation
            r14.setOrientation(r7, r13)
            java.lang.String r1 = r1.path
            r7 = r1
        L_0x00f6:
            java.util.Locale r1 = java.util.Locale.US
            java.lang.Object[] r9 = new java.lang.Object[r5]
            java.lang.Integer r18 = java.lang.Integer.valueOf(r2)
            r9[r13] = r18
            java.lang.Integer r18 = java.lang.Integer.valueOf(r2)
            r9[r12] = r18
            java.lang.String r1 = java.lang.String.format(r1, r4, r9)
        L_0x010a:
            r29 = r3
            r9 = r4
            r17 = r7
            r30 = r10
            r16 = 0
            r20 = 0
            r3 = r1
            r1 = r29
            r4 = r1
            r7 = r4
            r10 = r6
            r6 = r7
            goto L_0x0270
        L_0x011e:
            boolean r1 = r11 instanceof org.telegram.tgnet.TLRPC$BotInlineResult
            if (r1 == 0) goto L_0x0214
            r1 = r11
            org.telegram.tgnet.TLRPC$BotInlineResult r1 = (org.telegram.tgnet.TLRPC$BotInlineResult) r1
            java.lang.String r6 = r1.type
            java.lang.String r7 = "video"
            boolean r6 = r6.equals(r7)
            if (r6 != 0) goto L_0x01de
            org.telegram.tgnet.TLRPC$Document r6 = r1.document
            boolean r6 = org.telegram.messenger.MessageObject.isVideoDocument(r6)
            if (r6 == 0) goto L_0x0139
            goto L_0x01de
        L_0x0139:
            java.lang.String r6 = r1.type
            java.lang.String r7 = "gif"
            boolean r6 = r6.equals(r7)
            if (r6 == 0) goto L_0x015f
            org.telegram.tgnet.TLRPC$Document r6 = r1.document
            if (r6 == 0) goto L_0x015f
            r18 = r4
            long r3 = r6.size
            org.telegram.tgnet.TLRPC$VideoSize r1 = org.telegram.messenger.MessageObject.getDocumentVideoThumb(r6)
            if (r1 == 0) goto L_0x0156
            org.telegram.messenger.ImageLocation r1 = org.telegram.messenger.ImageLocation.getForDocument((org.telegram.tgnet.TLRPC$VideoSize) r1, (org.telegram.tgnet.TLRPC$Document) r6)
            goto L_0x0157
        L_0x0156:
            r1 = 0
        L_0x0157:
            r16 = r3
            r9 = r18
            r4 = 0
            r7 = 0
            r3 = r1
            goto L_0x0190
        L_0x015f:
            r18 = r4
            org.telegram.tgnet.TLRPC$Photo r3 = r1.photo
            if (r3 == 0) goto L_0x0193
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r3 = r3.sizes
            int r4 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            org.telegram.tgnet.TLRPC$PhotoSize r3 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r3, r4)
            org.telegram.tgnet.TLRPC$Photo r1 = r1.photo
            int r4 = r3.size
            long r6 = (long) r4
            java.util.Locale r4 = java.util.Locale.US
            java.lang.Object[] r10 = new java.lang.Object[r5]
            java.lang.Integer r16 = java.lang.Integer.valueOf(r2)
            r10[r13] = r16
            java.lang.Integer r16 = java.lang.Integer.valueOf(r2)
            r10[r12] = r16
            r9 = r18
            java.lang.String r10 = java.lang.String.format(r4, r9, r10)
            r4 = r3
            r16 = r6
            r3 = 0
            r6 = 0
            r7 = r1
        L_0x0190:
            r1 = 0
            goto L_0x0206
        L_0x0193:
            r9 = r18
            org.telegram.tgnet.TLRPC$WebDocument r3 = r1.content
            boolean r3 = r3 instanceof org.telegram.tgnet.TLRPC$TL_webDocument
            if (r3 == 0) goto L_0x01fe
            java.lang.String r3 = r1.type
            boolean r3 = r3.equals(r7)
            if (r3 == 0) goto L_0x01be
            org.telegram.tgnet.TLRPC$WebDocument r3 = r1.thumb
            boolean r4 = r3 instanceof org.telegram.tgnet.TLRPC$TL_webDocument
            if (r4 == 0) goto L_0x01d3
            java.lang.String r3 = r3.mime_type
            java.lang.String r4 = "video/mp4"
            boolean r3 = r4.equals(r3)
            if (r3 == 0) goto L_0x01d3
            org.telegram.tgnet.TLRPC$WebDocument r3 = r1.thumb
            org.telegram.messenger.WebFile r3 = org.telegram.messenger.WebFile.createWithWebDocument(r3)
            org.telegram.messenger.ImageLocation r3 = org.telegram.messenger.ImageLocation.getForWebFile(r3)
            goto L_0x01d4
        L_0x01be:
            java.util.Locale r3 = java.util.Locale.US
            java.lang.Object[] r4 = new java.lang.Object[r5]
            java.lang.Integer r6 = java.lang.Integer.valueOf(r2)
            r4[r13] = r6
            java.lang.Integer r6 = java.lang.Integer.valueOf(r2)
            r4[r12] = r6
            java.lang.String r3 = java.lang.String.format(r3, r9, r4)
            r10 = r3
        L_0x01d3:
            r3 = 0
        L_0x01d4:
            org.telegram.tgnet.TLRPC$WebDocument r1 = r1.content
            org.telegram.messenger.WebFile r1 = org.telegram.messenger.WebFile.createWithWebDocument(r1)
            r4 = 0
            r6 = 0
            r7 = 0
            goto L_0x0204
        L_0x01de:
            r9 = r4
            org.telegram.tgnet.TLRPC$Document r3 = r1.document
            if (r3 == 0) goto L_0x01f3
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r3 = r3.thumbs
            r4 = 90
            org.telegram.tgnet.TLRPC$PhotoSize r3 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r3, r4)
            org.telegram.tgnet.TLRPC$Document r1 = r1.document
            r7 = r1
            r4 = r3
            r1 = 0
            r3 = 0
            r6 = 0
            goto L_0x0203
        L_0x01f3:
            org.telegram.tgnet.TLRPC$WebDocument r1 = r1.thumb
            boolean r3 = r1 instanceof org.telegram.tgnet.TLRPC$TL_webDocument
            if (r3 == 0) goto L_0x01fe
            org.telegram.messenger.WebFile r1 = org.telegram.messenger.WebFile.createWithWebDocument(r1)
            goto L_0x01ff
        L_0x01fe:
            r1 = 0
        L_0x01ff:
            r3 = 0
            r4 = 0
            r6 = 0
            r7 = 0
        L_0x0203:
            r10 = 0
        L_0x0204:
            r16 = 0
        L_0x0206:
            r29 = r7
            r20 = r16
            r16 = 1
            r17 = 0
            r30 = 0
            r7 = r1
            r1 = r4
            r4 = r3
            goto L_0x025d
        L_0x0214:
            r9 = r4
            boolean r1 = r11 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r1 == 0) goto L_0x0260
            r1 = r11
            org.telegram.messenger.MediaController$SearchImage r1 = (org.telegram.messenger.MediaController.SearchImage) r1
            org.telegram.tgnet.TLRPC$PhotoSize r3 = r1.photoSize
            if (r3 == 0) goto L_0x022c
            org.telegram.tgnet.TLRPC$Photo r4 = r1.photo
            int r6 = r3.size
            long r6 = (long) r6
            r16 = r4
            r17 = 0
            r4 = r3
            r3 = 0
            goto L_0x024f
        L_0x022c:
            java.lang.String r3 = r1.filterPath
            if (r3 == 0) goto L_0x0239
            r17 = r3
            r3 = 0
            r4 = 0
            r6 = 0
        L_0x0236:
            r16 = 0
            goto L_0x024f
        L_0x0239:
            org.telegram.tgnet.TLRPC$Document r3 = r1.document
            if (r3 == 0) goto L_0x0245
            long r6 = r3.size
            r4 = 0
            r16 = 0
            r17 = 0
            goto L_0x024f
        L_0x0245:
            java.lang.String r3 = r1.imageUrl
            int r4 = r1.size
            long r6 = (long) r4
            r17 = r3
            r3 = 0
            r4 = 0
            goto L_0x0236
        L_0x024f:
            org.telegram.messenger.MediaController$CropState r1 = r1.cropState
            r30 = r1
            r1 = r4
            r20 = r6
            r29 = r16
            r4 = 0
            r7 = 0
            r16 = 1
            r6 = r3
        L_0x025d:
            r3 = r10
            r10 = 0
            goto L_0x0270
        L_0x0260:
            r1 = 0
            r3 = 0
            r4 = 0
            r6 = 0
            r7 = 0
            r10 = 0
            r16 = 0
            r17 = 0
            r20 = 0
            r29 = 0
            r30 = 0
        L_0x0270:
            if (r6 == 0) goto L_0x0307
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r1 = r6.thumbs
            r3 = 90
            org.telegram.tgnet.TLRPC$PhotoSize r1 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r1, r3)
            if (r4 == 0) goto L_0x02c4
            org.telegram.messenger.ImageLocation r3 = org.telegram.messenger.ImageLocation.getForDocument(r6)
            r7 = 0
            if (r8 != 0) goto L_0x0289
            org.telegram.messenger.ImageLocation r1 = org.telegram.messenger.ImageLocation.getForDocument((org.telegram.tgnet.TLRPC$PhotoSize) r1, (org.telegram.tgnet.TLRPC$Document) r6)
            r6 = r1
            goto L_0x028a
        L_0x0289:
            r6 = 0
        L_0x028a:
            java.util.Locale r1 = java.util.Locale.US
            java.lang.Object[] r5 = new java.lang.Object[r5]
            java.lang.Integer r17 = java.lang.Integer.valueOf(r2)
            r5[r13] = r17
            java.lang.Integer r2 = java.lang.Integer.valueOf(r2)
            r5[r12] = r2
            java.lang.String r9 = java.lang.String.format(r1, r9, r5)
            if (r8 == 0) goto L_0x02a9
            android.graphics.drawable.BitmapDrawable r1 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r2 = r8.bitmap
            r1.<init>(r2)
            r8 = r1
            goto L_0x02aa
        L_0x02a9:
            r8 = 0
        L_0x02aa:
            r12 = 0
            java.lang.String r5 = "d"
            r1 = r33
            r2 = r3
            r3 = r5
            r5 = r7
            r7 = r9
            r31 = r10
            r9 = r20
            r18 = r11
            r11 = r12
            r12 = r18
            r14 = 0
            r13 = r16
            r1.setImage(r2, r3, r4, r5, r6, r7, r8, r9, r11, r12, r13)
            goto L_0x0340
        L_0x02c4:
            r31 = r10
            r18 = r11
            r14 = 0
            org.telegram.messenger.ImageLocation r3 = org.telegram.messenger.ImageLocation.getForDocument(r6)
            if (r8 != 0) goto L_0x02d5
            org.telegram.messenger.ImageLocation r1 = org.telegram.messenger.ImageLocation.getForDocument((org.telegram.tgnet.TLRPC$PhotoSize) r1, (org.telegram.tgnet.TLRPC$Document) r6)
            r4 = r1
            goto L_0x02d6
        L_0x02d5:
            r4 = 0
        L_0x02d6:
            java.util.Locale r1 = java.util.Locale.US
            java.lang.Object[] r5 = new java.lang.Object[r5]
            java.lang.Integer r6 = java.lang.Integer.valueOf(r2)
            r5[r14] = r6
            java.lang.Integer r2 = java.lang.Integer.valueOf(r2)
            r5[r12] = r2
            java.lang.String r5 = java.lang.String.format(r1, r9, r5)
            if (r8 == 0) goto L_0x02f5
            android.graphics.drawable.BitmapDrawable r1 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r2 = r8.bitmap
            r1.<init>(r2)
            r6 = r1
            goto L_0x02f6
        L_0x02f5:
            r6 = 0
        L_0x02f6:
            r9 = 0
            java.lang.String r7 = "d"
            r1 = r33
            r2 = r3
            r3 = r7
            r7 = r20
            r10 = r18
            r11 = r16
            r1.setImage(r2, r3, r4, r5, r6, r7, r9, r10, r11)
            goto L_0x0340
        L_0x0307:
            r31 = r10
            r18 = r11
            r14 = 0
            if (r1 == 0) goto L_0x032d
            r2 = r29
            org.telegram.messenger.ImageLocation r2 = org.telegram.messenger.ImageLocation.getForObject(r1, r2)
            if (r8 == 0) goto L_0x031f
            android.graphics.drawable.BitmapDrawable r1 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r4 = r8.bitmap
            r1.<init>(r4)
            r4 = r1
            goto L_0x0320
        L_0x031f:
            r4 = 0
        L_0x0320:
            r7 = 0
            r1 = r33
            r5 = r20
            r8 = r18
            r9 = r16
            r1.setImage((org.telegram.messenger.ImageLocation) r2, (java.lang.String) r3, (android.graphics.drawable.Drawable) r4, (long) r5, (java.lang.String) r7, (java.lang.Object) r8, (int) r9)
            goto L_0x0340
        L_0x032d:
            if (r7 == 0) goto L_0x0374
            if (r4 == 0) goto L_0x0343
            org.telegram.messenger.ImageLocation r2 = org.telegram.messenger.ImageLocation.getForWebFile(r7)
            r5 = 0
            r6 = 0
            r1 = r33
            r7 = r18
            r8 = r16
            r1.setImage((org.telegram.messenger.ImageLocation) r2, (java.lang.String) r3, (org.telegram.messenger.ImageLocation) r4, (java.lang.String) r5, (android.graphics.drawable.Drawable) r6, (java.lang.Object) r7, (int) r8)
        L_0x0340:
            r13 = r31
            goto L_0x039d
        L_0x0343:
            org.telegram.messenger.ImageLocation r2 = org.telegram.messenger.ImageLocation.getForWebFile(r7)
            if (r8 == 0) goto L_0x0354
            android.graphics.drawable.BitmapDrawable r1 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r4 = r8.bitmap
            r1.<init>(r4)
            r4 = r1
            r13 = r31
            goto L_0x0369
        L_0x0354:
            r13 = r31
            if (r13 == 0) goto L_0x0368
            android.app.Activity r1 = r0.parentActivity
            if (r1 == 0) goto L_0x0368
            android.content.res.Resources r1 = r1.getResources()
            int r4 = org.telegram.messenger.R.drawable.nophotos
            android.graphics.drawable.Drawable r1 = r1.getDrawable(r4)
            r4 = r1
            goto L_0x0369
        L_0x0368:
            r4 = 0
        L_0x0369:
            r5 = 0
            r1 = r33
            r6 = r18
            r7 = r16
            r1.setImage(r2, r3, r4, r5, r6, r7)
            goto L_0x039d
        L_0x0374:
            r13 = r31
            if (r8 == 0) goto L_0x0381
            android.graphics.drawable.BitmapDrawable r1 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r2 = r8.bitmap
            r1.<init>(r2)
        L_0x037f:
            r4 = r1
            goto L_0x0393
        L_0x0381:
            if (r13 == 0) goto L_0x0392
            android.app.Activity r1 = r0.parentActivity
            if (r1 == 0) goto L_0x0392
            android.content.res.Resources r1 = r1.getResources()
            int r2 = org.telegram.messenger.R.drawable.nophotos
            android.graphics.drawable.Drawable r1 = r1.getDrawable(r2)
            goto L_0x037f
        L_0x0392:
            r4 = 0
        L_0x0393:
            r5 = 0
            r1 = r33
            r2 = r17
            r6 = r20
            r1.setImage(r2, r3, r4, r5, r6)
        L_0x039d:
            r1 = r30
            if (r15 == 0) goto L_0x03d6
            if (r1 == 0) goto L_0x03d3
            r16 = 1
            float r2 = r1.cropPx
            float r3 = r1.cropPy
            float r4 = r1.cropRotate
            int r5 = r1.transformRotation
            float r6 = r1.cropScale
            r22 = 1065353216(0x3var_, float:1.0)
            r23 = 1065353216(0x3var_, float:1.0)
            float r7 = r1.cropPw
            float r8 = r1.cropPh
            r26 = 0
            r27 = 0
            boolean r9 = r1.mirrored
            r15 = r35
            r17 = r2
            r18 = r3
            r19 = r4
            r20 = r5
            r21 = r6
            r24 = r7
            r25 = r8
            r28 = r9
            r15.setViewTransform(r16, r17, r18, r19, r20, r21, r22, r23, r24, r25, r26, r27, r28)
            goto L_0x03d6
        L_0x03d3:
            r15.setViewTransform(r14)
        L_0x03d6:
            org.telegram.messenger.ImageReceiver r2 = r0.leftImage
            r14 = r33
            if (r14 != r2) goto L_0x03e2
            r0.leftCropState = r1
            r0.leftImageIsVideo = r13
            goto L_0x079e
        L_0x03e2:
            org.telegram.messenger.ImageReceiver r2 = r0.rightImage
            if (r14 != r2) goto L_0x079e
            r0.rightCropState = r1
            r0.rightImageIsVideo = r13
            goto L_0x079e
        L_0x03ec:
            r1 = r3
            r14.setImageBitmap((android.graphics.Bitmap) r1)
            goto L_0x079e
        L_0x03f2:
            r9 = r4
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r3 = r0.pageBlocksAdapter
            if (r3 == 0) goto L_0x04df
            int[] r4 = new int[r12]
            org.telegram.tgnet.TLObject r3 = r3.getMedia(r1)
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r5 = r0.pageBlocksAdapter
            org.telegram.tgnet.TLRPC$PhotoSize r5 = r5.getFileLocation(r3, r4)
            if (r5 == 0) goto L_0x04c4
            boolean r6 = r3 instanceof org.telegram.tgnet.TLRPC$Photo
            if (r6 == 0) goto L_0x0456
            org.telegram.tgnet.TLRPC$Photo r3 = (org.telegram.tgnet.TLRPC$Photo) r3
            org.telegram.messenger.ImageReceiver$BitmapHolder r9 = r0.currentThumb
            if (r9 == 0) goto L_0x0414
            org.telegram.messenger.ImageReceiver r1 = r0.centerImage
            if (r14 != r1) goto L_0x0414
            goto L_0x0415
        L_0x0414:
            r9 = 0
        L_0x0415:
            r1 = r4[r13]
            if (r1 != 0) goto L_0x041c
            r1 = -1
            r4[r13] = r1
        L_0x041c:
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r1 = r3.sizes
            r6 = 80
            org.telegram.tgnet.TLRPC$PhotoSize r1 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r1, r6)
            org.telegram.messenger.ImageLocation r5 = org.telegram.messenger.ImageLocation.getForPhoto((org.telegram.tgnet.TLRPC$PhotoSize) r5, (org.telegram.tgnet.TLRPC$Photo) r3)
            r6 = 0
            org.telegram.messenger.ImageLocation r7 = org.telegram.messenger.ImageLocation.getForPhoto((org.telegram.tgnet.TLRPC$PhotoSize) r1, (org.telegram.tgnet.TLRPC$Photo) r3)
            if (r9 == 0) goto L_0x0438
            android.graphics.drawable.BitmapDrawable r1 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r2 = r9.bitmap
            r1.<init>(r2)
            r8 = r1
            goto L_0x0439
        L_0x0438:
            r8 = 0
        L_0x0439:
            r1 = r4[r13]
            long r9 = (long) r1
            r11 = 0
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r0.pageBlocksAdapter
            java.lang.Object r12 = r1.getParentObject()
            r13 = 1
            java.lang.String r15 = "b"
            r1 = r33
            r2 = r5
            r3 = r6
            r4 = r7
            r5 = r15
            r6 = r8
            r7 = r9
            r9 = r11
            r10 = r12
            r11 = r13
            r1.setImage(r2, r3, r4, r5, r6, r7, r9, r10, r11)
            goto L_0x079e
        L_0x0456:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r4 = r0.pageBlocksAdapter
            boolean r1 = r4.isVideo(r1)
            if (r1 == 0) goto L_0x04b4
            org.telegram.tgnet.TLRPC$FileLocation r1 = r5.location
            boolean r1 = r1 instanceof org.telegram.tgnet.TLRPC$TL_fileLocationUnavailable
            if (r1 != 0) goto L_0x04a3
            org.telegram.messenger.ImageReceiver$BitmapHolder r9 = r0.currentThumb
            if (r9 == 0) goto L_0x046d
            org.telegram.messenger.ImageReceiver r1 = r0.centerImage
            if (r14 != r1) goto L_0x046d
            goto L_0x046e
        L_0x046d:
            r9 = 0
        L_0x046e:
            r4 = 0
            r6 = 0
            if (r9 != 0) goto L_0x047a
            org.telegram.tgnet.TLRPC$Document r3 = (org.telegram.tgnet.TLRPC$Document) r3
            org.telegram.messenger.ImageLocation r1 = org.telegram.messenger.ImageLocation.getForDocument((org.telegram.tgnet.TLRPC$PhotoSize) r5, (org.telegram.tgnet.TLRPC$Document) r3)
            r5 = r1
            goto L_0x047b
        L_0x047a:
            r5 = 0
        L_0x047b:
            if (r9 == 0) goto L_0x0486
            android.graphics.drawable.BitmapDrawable r1 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r2 = r9.bitmap
            r1.<init>(r2)
            r7 = r1
            goto L_0x0487
        L_0x0486:
            r7 = 0
        L_0x0487:
            r8 = 0
            r10 = 0
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r0.pageBlocksAdapter
            java.lang.Object r11 = r1.getParentObject()
            r12 = 1
            java.lang.String r13 = "b"
            r1 = r33
            r2 = r4
            r3 = r6
            r4 = r5
            r5 = r13
            r6 = r7
            r7 = r8
            r9 = r10
            r10 = r11
            r11 = r12
            r1.setImage(r2, r3, r4, r5, r6, r7, r9, r10, r11)
            goto L_0x079e
        L_0x04a3:
            android.app.Activity r1 = r0.parentActivity
            android.content.res.Resources r1 = r1.getResources()
            int r2 = org.telegram.messenger.R.drawable.photoview_placeholder
            android.graphics.drawable.Drawable r1 = r1.getDrawable(r2)
            r14.setImageBitmap((android.graphics.drawable.Drawable) r1)
            goto L_0x079e
        L_0x04b4:
            org.telegram.ui.Components.AnimatedFileDrawable r1 = r0.currentAnimation
            if (r1 == 0) goto L_0x079e
            r14.setImageBitmap((android.graphics.drawable.Drawable) r1)
            org.telegram.ui.Components.AnimatedFileDrawable r1 = r0.currentAnimation
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r2 = r0.containerView
            r1.addSecondParentView(r2)
            goto L_0x079e
        L_0x04c4:
            r1 = r4[r13]
            if (r1 != 0) goto L_0x04ce
            r1 = 0
            r14.setImageBitmap((android.graphics.Bitmap) r1)
            goto L_0x079e
        L_0x04ce:
            android.app.Activity r1 = r0.parentActivity
            android.content.res.Resources r1 = r1.getResources()
            int r2 = org.telegram.messenger.R.drawable.photoview_placeholder
            android.graphics.drawable.Drawable r1 = r1.getDrawable(r2)
            r14.setImageBitmap((android.graphics.drawable.Drawable) r1)
            goto L_0x079e
        L_0x04df:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x04fe
            if (r1 < 0) goto L_0x04fe
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            int r3 = r3.size()
            if (r1 >= r3) goto L_0x04fe
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            java.lang.Object r3 = r3.get(r1)
            org.telegram.messenger.MessageObject r3 = (org.telegram.messenger.MessageObject) r3
            r14.setShouldGenerateQualityThumb(r12)
            r10 = r3
            goto L_0x04ff
        L_0x04fe:
            r10 = 0
        L_0x04ff:
            r3 = 100
            if (r10 == 0) goto L_0x0613
            org.telegram.tgnet.TLRPC$Message r4 = r10.messageOwner
            java.util.ArrayList<org.telegram.tgnet.TLRPC$TL_restrictionReason> r4 = r4.restriction_reason
            java.lang.String r4 = org.telegram.messenger.MessagesController.getRestrictionReason(r4)
            boolean r4 = android.text.TextUtils.isEmpty(r4)
            if (r4 != 0) goto L_0x0521
            android.app.Activity r1 = r0.parentActivity
            android.content.res.Resources r1 = r1.getResources()
            int r2 = org.telegram.messenger.R.drawable.photoview_placeholder
            android.graphics.drawable.Drawable r1 = r1.getDrawable(r2)
            r14.setImageBitmap((android.graphics.drawable.Drawable) r1)
            return
        L_0x0521:
            boolean r4 = r10.isVideo()
            if (r4 == 0) goto L_0x0590
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r1 = r10.photoThumbs
            if (r1 == 0) goto L_0x0580
            boolean r1 = r1.isEmpty()
            if (r1 != 0) goto L_0x0580
            org.telegram.messenger.ImageReceiver$BitmapHolder r1 = r0.currentThumb
            if (r1 == 0) goto L_0x053a
            org.telegram.messenger.ImageReceiver r4 = r0.centerImage
            if (r14 != r4) goto L_0x053a
            goto L_0x053b
        L_0x053a:
            r1 = 0
        L_0x053b:
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r4 = r10.photoThumbs
            r5 = 320(0x140, float:4.48E-43)
            org.telegram.tgnet.TLRPC$PhotoSize r4 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r4, r5)
            int r5 = r4.w
            if (r5 >= r3) goto L_0x054c
            int r5 = r4.h
            if (r5 >= r3) goto L_0x054c
            goto L_0x054d
        L_0x054c:
            r12 = 0
        L_0x054d:
            r14.setNeedsQualityThumb(r12)
            r3 = 0
            r5 = 0
            if (r1 != 0) goto L_0x055b
            org.telegram.tgnet.TLObject r6 = r10.photoThumbsObject
            org.telegram.messenger.ImageLocation r4 = org.telegram.messenger.ImageLocation.getForObject(r4, r6)
            goto L_0x055c
        L_0x055b:
            r4 = 0
        L_0x055c:
            if (r1 == 0) goto L_0x0567
            android.graphics.drawable.BitmapDrawable r2 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r1 = r1.bitmap
            r2.<init>(r1)
            r6 = r2
            goto L_0x0568
        L_0x0567:
            r6 = 0
        L_0x0568:
            r7 = 0
            r9 = 0
            r11 = 1
            java.lang.String r12 = "b"
            r1 = r33
            r2 = r3
            r3 = r5
            r5 = r12
            r1.setImage(r2, r3, r4, r5, r6, r7, r9, r10, r11)
            org.telegram.messenger.ImageReceiver$BitmapHolder r1 = r0.currentThumb
            if (r1 == 0) goto L_0x058f
            int r1 = r1.orientation
            r14.setOrientation(r1, r13)
            goto L_0x058f
        L_0x0580:
            android.app.Activity r1 = r0.parentActivity
            android.content.res.Resources r1 = r1.getResources()
            int r2 = org.telegram.messenger.R.drawable.photoview_placeholder
            android.graphics.drawable.Drawable r1 = r1.getDrawable(r2)
            r14.setImageBitmap((android.graphics.drawable.Drawable) r1)
        L_0x058f:
            return
        L_0x0590:
            org.telegram.ui.Components.AnimatedFileDrawable r4 = r0.currentAnimation
            if (r4 == 0) goto L_0x059f
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r0.containerView
            r4.addSecondParentView(r1)
            org.telegram.ui.Components.AnimatedFileDrawable r1 = r0.currentAnimation
            r14.setImageBitmap((android.graphics.drawable.Drawable) r1)
            return
        L_0x059f:
            int r4 = r0.sharedMediaType
            if (r4 != r12) goto L_0x0613
            boolean r1 = r10.canPreviewDocument()
            if (r1 == 0) goto L_0x0606
            org.telegram.tgnet.TLRPC$Document r1 = r10.getDocument()
            r14.setNeedsQualityThumb(r12)
            org.telegram.messenger.ImageReceiver$BitmapHolder r4 = r0.currentThumb
            if (r4 == 0) goto L_0x05b9
            org.telegram.messenger.ImageReceiver r6 = r0.centerImage
            if (r14 != r6) goto L_0x05b9
            goto L_0x05ba
        L_0x05b9:
            r4 = 0
        L_0x05ba:
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r6 = r10.photoThumbs
            org.telegram.tgnet.TLRPC$PhotoSize r3 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r6, r3)
            r6 = 1157627904(0x45000000, float:2048.0)
            float r7 = org.telegram.messenger.AndroidUtilities.density
            float r6 = r6 / r7
            int r6 = (int) r6
            org.telegram.messenger.ImageLocation r7 = org.telegram.messenger.ImageLocation.getForDocument(r1)
            java.util.Locale r8 = java.util.Locale.US
            java.lang.Object[] r5 = new java.lang.Object[r5]
            java.lang.Integer r11 = java.lang.Integer.valueOf(r6)
            r5[r13] = r11
            java.lang.Integer r6 = java.lang.Integer.valueOf(r6)
            r5[r12] = r6
            java.lang.String r5 = java.lang.String.format(r8, r9, r5)
            if (r4 != 0) goto L_0x05e6
            org.telegram.messenger.ImageLocation r3 = org.telegram.messenger.ImageLocation.getForDocument((org.telegram.tgnet.TLRPC$PhotoSize) r3, (org.telegram.tgnet.TLRPC$Document) r1)
            r6 = r3
            goto L_0x05e7
        L_0x05e6:
            r6 = 0
        L_0x05e7:
            if (r4 == 0) goto L_0x05f2
            android.graphics.drawable.BitmapDrawable r2 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r3 = r4.bitmap
            r2.<init>(r3)
            r8 = r2
            goto L_0x05f3
        L_0x05f2:
            r8 = 0
        L_0x05f3:
            long r11 = r1.size
            r9 = 0
            r13 = 0
            java.lang.String r15 = "b"
            r1 = r33
            r2 = r7
            r3 = r5
            r4 = r6
            r5 = r15
            r6 = r8
            r7 = r11
            r11 = r13
            r1.setImage(r2, r3, r4, r5, r6, r7, r9, r10, r11)
            goto L_0x0612
        L_0x0606:
            org.telegram.ui.Components.OtherDocumentPlaceholderDrawable r1 = new org.telegram.ui.Components.OtherDocumentPlaceholderDrawable
            android.app.Activity r2 = r0.parentActivity
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r0.containerView
            r1.<init>(r2, r3, r10)
            r14.setImageBitmap((android.graphics.drawable.Drawable) r1)
        L_0x0612:
            return
        L_0x0613:
            long[] r4 = new long[r12]
            org.telegram.messenger.ImageLocation r6 = r0.getImageLocation(r1, r4)
            org.telegram.tgnet.TLObject r1 = r0.getFileLocation(r1, r4)
            r14.setNeedsQualityThumb(r12)
            if (r6 == 0) goto L_0x0782
            org.telegram.messenger.ImageReceiver$BitmapHolder r7 = r0.currentThumb
            if (r7 == 0) goto L_0x062d
            org.telegram.messenger.ImageReceiver r8 = r0.centerImage
            if (r14 != r8) goto L_0x062d
            r19 = r7
            goto L_0x062f
        L_0x062d:
            r19 = 0
        L_0x062f:
            r7 = r4[r13]
            r15 = 0
            int r9 = (r7 > r15 ? 1 : (r7 == r15 ? 0 : -1))
            if (r9 != 0) goto L_0x063b
            r7 = -1
            r4[r13] = r7
        L_0x063b:
            if (r10 == 0) goto L_0x0646
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r7 = r10.photoThumbs
            org.telegram.tgnet.TLRPC$PhotoSize r3 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r7, r3)
            org.telegram.tgnet.TLObject r7 = r10.photoThumbsObject
            goto L_0x0648
        L_0x0646:
            r3 = 0
            r7 = 0
        L_0x0648:
            if (r3 == 0) goto L_0x064d
            if (r3 != r1) goto L_0x064d
            r3 = 0
        L_0x064d:
            if (r3 != 0) goto L_0x067f
            org.telegram.tgnet.TLRPC$Photo r1 = r6.photo
            if (r1 == 0) goto L_0x067f
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r1 = r1.sizes
            if (r1 == 0) goto L_0x067f
            r1 = 0
        L_0x0658:
            org.telegram.tgnet.TLRPC$Photo r8 = r6.photo
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r8 = r8.sizes
            int r8 = r8.size()
            if (r1 >= r8) goto L_0x067f
            org.telegram.tgnet.TLRPC$Photo r8 = r6.photo
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r8 = r8.sizes
            java.lang.Object r8 = r8.get(r1)
            boolean r8 = r8 instanceof org.telegram.tgnet.TLRPC$TL_photoStrippedSize
            if (r8 == 0) goto L_0x067c
            org.telegram.tgnet.TLRPC$Photo r3 = r6.photo
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r3 = r3.sizes
            java.lang.Object r1 = r3.get(r1)
            r3 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r3 = (org.telegram.tgnet.TLRPC$PhotoSize) r3
            org.telegram.tgnet.TLRPC$Photo r7 = r6.photo
            goto L_0x067f
        L_0x067c:
            int r1 = r1 + 1
            goto L_0x0658
        L_0x067f:
            if (r10 == 0) goto L_0x0687
            boolean r1 = r10.isWebpage()
            if (r1 != 0) goto L_0x0696
        L_0x0687:
            long r8 = r0.avatarsDialogId
            r15 = 0
            int r1 = (r8 > r15 ? 1 : (r8 == r15 ? 0 : -1))
            if (r1 != 0) goto L_0x0696
            boolean r1 = r0.isEvent
            if (r1 == 0) goto L_0x0694
            goto L_0x0696
        L_0x0694:
            r15 = 0
            goto L_0x0697
        L_0x0696:
            r15 = 1
        L_0x0697:
            r1 = 5
            if (r10 == 0) goto L_0x06b9
            int r8 = r0.sharedMediaType
            if (r8 != r1) goto L_0x06b3
            org.telegram.tgnet.TLRPC$Document r8 = r10.getDocument()
            org.telegram.tgnet.TLRPC$VideoSize r9 = org.telegram.messenger.MessageObject.getDocumentVideoThumb(r8)
            if (r9 == 0) goto L_0x06ad
            org.telegram.messenger.ImageLocation r8 = org.telegram.messenger.ImageLocation.getForDocument((org.telegram.tgnet.TLRPC$VideoSize) r9, (org.telegram.tgnet.TLRPC$Document) r8)
            goto L_0x06ae
        L_0x06ad:
            r8 = 0
        L_0x06ae:
            r18 = r10
            r9 = r19
            goto L_0x0708
        L_0x06b3:
            r18 = r10
        L_0x06b5:
            r9 = r19
        L_0x06b7:
            r8 = 0
            goto L_0x0708
        L_0x06b9:
            long r8 = r0.avatarsDialogId
            r10 = 0
            int r16 = (r8 > r10 ? 1 : (r8 == r10 ? 0 : -1))
            if (r16 == 0) goto L_0x0703
            int r18 = (r8 > r10 ? 1 : (r8 == r10 ? 0 : -1))
            if (r18 <= 0) goto L_0x06d6
            int r8 = r0.currentAccount
            org.telegram.messenger.MessagesController r8 = org.telegram.messenger.MessagesController.getInstance(r8)
            long r9 = r0.avatarsDialogId
            java.lang.Long r9 = java.lang.Long.valueOf(r9)
            org.telegram.tgnet.TLRPC$User r8 = r8.getUser(r9)
            goto L_0x06e7
        L_0x06d6:
            int r8 = r0.currentAccount
            org.telegram.messenger.MessagesController r8 = org.telegram.messenger.MessagesController.getInstance(r8)
            long r9 = r0.avatarsDialogId
            long r9 = -r9
            java.lang.Long r9 = java.lang.Long.valueOf(r9)
            org.telegram.tgnet.TLRPC$Chat r8 = r8.getChat(r9)
        L_0x06e7:
            if (r7 == 0) goto L_0x06ea
            r8 = r7
        L_0x06ea:
            if (r19 != 0) goto L_0x0700
            boolean r9 = r3 instanceof org.telegram.tgnet.TLRPC$TL_photoStrippedSize
            if (r9 == 0) goto L_0x0700
            org.telegram.messenger.ImageReceiver$BitmapHolder r9 = new org.telegram.messenger.ImageReceiver$BitmapHolder
            byte[] r10 = r3.bytes
            java.lang.String r11 = "b"
            android.graphics.Bitmap r10 = org.telegram.messenger.ImageLoader.getStrippedPhotoBitmap(r10, r11)
            r9.<init>(r10)
            r18 = r8
            goto L_0x06b7
        L_0x0700:
            r18 = r8
            goto L_0x06b5
        L_0x0703:
            r9 = r19
            r8 = 0
            r18 = 0
        L_0x0708:
            java.lang.String r19 = "g"
            if (r8 == 0) goto L_0x0748
            int r5 = r0.sharedMediaType
            if (r5 != r1) goto L_0x0711
            goto L_0x0713
        L_0x0711:
            r19 = 0
        L_0x0713:
            r5 = 0
            if (r9 != 0) goto L_0x071c
            org.telegram.messenger.ImageLocation r1 = org.telegram.messenger.ImageLocation.getForObject(r3, r7)
            r7 = r1
            goto L_0x071d
        L_0x071c:
            r7 = 0
        L_0x071d:
            if (r9 == 0) goto L_0x0728
            android.graphics.drawable.BitmapDrawable r1 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r2 = r9.bitmap
            r1.<init>(r2)
            r9 = r1
            goto L_0x0729
        L_0x0728:
            r9 = 0
        L_0x0729:
            r10 = r4[r13]
            r13 = 0
            java.lang.String r16 = "b"
            r1 = r33
            r2 = r6
            r3 = r19
            r4 = r8
            r6 = r7
            r7 = r16
            r8 = r9
            r9 = r10
            r11 = r13
            r13 = 1
            r12 = r18
            r0 = 1
            r13 = r15
            r1.setImage(r2, r3, r4, r5, r6, r7, r8, r9, r11, r12, r13)
            r14.setAllowStartAnimation(r0)
            r0 = r32
            goto L_0x079e
        L_0x0748:
            long r10 = r0.avatarsDialogId
            r16 = 0
            int r1 = (r10 > r16 ? 1 : (r10 == r16 ? 0 : -1))
            if (r1 == 0) goto L_0x0755
            int r1 = r6.imageType
            if (r1 != r5) goto L_0x0755
            goto L_0x0757
        L_0x0755:
            r19 = 0
        L_0x0757:
            if (r9 != 0) goto L_0x075f
            org.telegram.messenger.ImageLocation r1 = org.telegram.messenger.ImageLocation.getForObject(r3, r7)
            r5 = r1
            goto L_0x0760
        L_0x075f:
            r5 = 0
        L_0x0760:
            if (r9 == 0) goto L_0x076b
            android.graphics.drawable.BitmapDrawable r1 = new android.graphics.drawable.BitmapDrawable
            android.graphics.Bitmap r2 = r9.bitmap
            r1.<init>(r2)
            r7 = r1
            goto L_0x076c
        L_0x076b:
            r7 = 0
        L_0x076c:
            r8 = r4[r13]
            r10 = 0
            java.lang.String r11 = "b"
            r1 = r33
            r2 = r6
            r3 = r19
            r4 = r5
            r5 = r11
            r6 = r7
            r7 = r8
            r9 = r10
            r10 = r18
            r11 = r15
            r1.setImage(r2, r3, r4, r5, r6, r7, r9, r10, r11)
            goto L_0x079e
        L_0x0782:
            r3 = r4[r13]
            r5 = 0
            int r1 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r1 != 0) goto L_0x078f
            r1 = 0
            r14.setImageBitmap((android.graphics.Bitmap) r1)
            goto L_0x079e
        L_0x078f:
            android.app.Activity r1 = r0.parentActivity
            android.content.res.Resources r1 = r1.getResources()
            int r2 = org.telegram.messenger.R.drawable.photoview_placeholder
            android.graphics.drawable.Drawable r1 = r1.getDrawable(r2)
            r14.setImageBitmap((android.graphics.drawable.Drawable) r1)
        L_0x079e:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.setIndexToImage(org.telegram.messenger.ImageReceiver, int, org.telegram.ui.Components.Crop.CropTransform):void");
    }

    /* JADX WARNING: Removed duplicated region for block: B:24:0x004f  */
    /* JADX WARNING: Removed duplicated region for block: B:39:? A[RETURN, SYNTHETIC] */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public static boolean isShowingImage(org.telegram.messenger.MessageObject r7) {
        /*
            org.telegram.ui.PhotoViewer r0 = Instance
            r1 = 1
            r2 = 0
            if (r0 == 0) goto L_0x0048
            org.telegram.ui.PhotoViewer r0 = Instance
            boolean r0 = r0.pipAnimationInProgress
            if (r0 != 0) goto L_0x0048
            org.telegram.ui.PhotoViewer r0 = Instance
            boolean r0 = r0.isVisible
            if (r0 == 0) goto L_0x0048
            org.telegram.ui.PhotoViewer r0 = Instance
            boolean r0 = r0.disableShowCheck
            if (r0 != 0) goto L_0x0048
            if (r7 == 0) goto L_0x0048
            org.telegram.ui.PhotoViewer r0 = Instance
            org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
            if (r0 != 0) goto L_0x002e
            org.telegram.ui.PhotoViewer r3 = Instance
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r3 = r3.placeProvider
            if (r3 == 0) goto L_0x002e
            org.telegram.ui.PhotoViewer r0 = Instance
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r0 = r0.placeProvider
            org.telegram.messenger.MessageObject r0 = r0.getEditingMessageObject()
        L_0x002e:
            if (r0 == 0) goto L_0x0048
            int r3 = r0.getId()
            int r4 = r7.getId()
            if (r3 != r4) goto L_0x0048
            long r3 = r0.getDialogId()
            long r5 = r7.getDialogId()
            int r0 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r0 != 0) goto L_0x0048
            r0 = 1
            goto L_0x0049
        L_0x0048:
            r0 = 0
        L_0x0049:
            if (r0 != 0) goto L_0x0084
            org.telegram.ui.PhotoViewer r3 = PipInstance
            if (r3 == 0) goto L_0x0084
            org.telegram.ui.PhotoViewer r0 = PipInstance
            boolean r0 = r0.isVisible
            if (r0 == 0) goto L_0x0082
            org.telegram.ui.PhotoViewer r0 = PipInstance
            boolean r0 = r0.disableShowCheck
            if (r0 != 0) goto L_0x0082
            if (r7 == 0) goto L_0x0082
            org.telegram.ui.PhotoViewer r0 = PipInstance
            org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
            if (r0 == 0) goto L_0x0082
            org.telegram.ui.PhotoViewer r0 = PipInstance
            org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
            int r0 = r0.getId()
            int r3 = r7.getId()
            if (r0 != r3) goto L_0x0082
            org.telegram.ui.PhotoViewer r0 = PipInstance
            org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
            long r3 = r0.getDialogId()
            long r5 = r7.getDialogId()
            int r7 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r7 != 0) goto L_0x0082
            goto L_0x0083
        L_0x0082:
            r1 = 0
        L_0x0083:
            r0 = r1
        L_0x0084:
            return r0
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.isShowingImage(org.telegram.messenger.MessageObject):boolean");
    }

    public static boolean isPlayingMessageInPip(MessageObject messageObject) {
        return (PipInstance == null || messageObject == null || PipInstance.currentMessageObject == null || PipInstance.currentMessageObject.getId() != messageObject.getId() || PipInstance.currentMessageObject.getDialogId() != messageObject.getDialogId()) ? false : true;
    }

    public static boolean isPlayingMessage(MessageObject messageObject) {
        return Instance != null && !Instance.pipAnimationInProgress && Instance.isVisible && messageObject != null && Instance.currentMessageObject != null && Instance.currentMessageObject.getId() == messageObject.getId() && Instance.currentMessageObject.getDialogId() == messageObject.getDialogId();
    }

    public static boolean isShowingImage(TLRPC$FileLocation tLRPC$FileLocation) {
        if (Instance == null || !Instance.isVisible || Instance.disableShowCheck || tLRPC$FileLocation == null) {
            return false;
        }
        if ((Instance.currentFileLocation != null && tLRPC$FileLocation.local_id == Instance.currentFileLocation.location.local_id && tLRPC$FileLocation.volume_id == Instance.currentFileLocation.location.volume_id && tLRPC$FileLocation.dc_id == Instance.currentFileLocation.dc_id) || (Instance.currentFileLocationVideo != null && tLRPC$FileLocation.local_id == Instance.currentFileLocationVideo.location.local_id && tLRPC$FileLocation.volume_id == Instance.currentFileLocationVideo.location.volume_id && tLRPC$FileLocation.dc_id == Instance.currentFileLocationVideo.dc_id)) {
            return true;
        }
        return false;
    }

    public static boolean isShowingImage(TLRPC$BotInlineResult tLRPC$BotInlineResult) {
        if (Instance == null || !Instance.isVisible || Instance.disableShowCheck || tLRPC$BotInlineResult == null || Instance.currentBotInlineResult == null || tLRPC$BotInlineResult.id != Instance.currentBotInlineResult.id) {
            return false;
        }
        return true;
    }

    public static boolean isShowingImage(String str) {
        if (Instance == null || !Instance.isVisible || Instance.disableShowCheck || str == null || !str.equals(Instance.currentPathObject)) {
            return false;
        }
        return true;
    }

    public void setParentChatActivity(ChatActivity chatActivity) {
        this.parentChatActivity = chatActivity;
    }

    public void setMaxSelectedPhotos(int i, boolean z) {
        this.maxSelectedPhotos = i;
        this.allowOrder = z;
    }

    public void checkCurrentImageVisibility() {
        PlaceProviderObject placeProviderObject = this.currentPlaceObject;
        if (placeProviderObject != null) {
            placeProviderObject.imageReceiver.setVisible(true, true);
        }
        PhotoViewerProvider photoViewerProvider = this.placeProvider;
        PlaceProviderObject placeForPhoto = photoViewerProvider == null ? null : photoViewerProvider.getPlaceForPhoto(this.currentMessageObject, getFileLocation(this.currentFileLocation), this.currentIndex, false);
        this.currentPlaceObject = placeForPhoto;
        if (placeForPhoto != null) {
            placeForPhoto.imageReceiver.setVisible(false, true);
        }
    }

    public boolean openPhoto(MessageObject messageObject, ChatActivity chatActivity, long j, long j2, PhotoViewerProvider photoViewerProvider) {
        return openPhoto(messageObject, (TLRPC$FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, photoViewerProvider, chatActivity, j, j2, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(MessageObject messageObject, int i, ChatActivity chatActivity, long j, long j2, PhotoViewerProvider photoViewerProvider) {
        return openPhoto(messageObject, (TLRPC$FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, photoViewerProvider, chatActivity, j, j2, true, (PageBlocksAdapter) null, Integer.valueOf(i));
    }

    public boolean openPhoto(MessageObject messageObject, long j, long j2, PhotoViewerProvider photoViewerProvider, boolean z) {
        return openPhoto(messageObject, (TLRPC$FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, photoViewerProvider, (ChatActivity) null, j, j2, z, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(TLRPC$FileLocation tLRPC$FileLocation, PhotoViewerProvider photoViewerProvider) {
        return openPhoto((MessageObject) null, tLRPC$FileLocation, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, photoViewerProvider, (ChatActivity) null, 0, 0, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhotoWithVideo(TLRPC$FileLocation tLRPC$FileLocation, ImageLocation imageLocation, PhotoViewerProvider photoViewerProvider) {
        return openPhoto((MessageObject) null, tLRPC$FileLocation, (ImageLocation) null, imageLocation, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, photoViewerProvider, (ChatActivity) null, 0, 0, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(TLRPC$FileLocation tLRPC$FileLocation, ImageLocation imageLocation, PhotoViewerProvider photoViewerProvider) {
        return openPhoto((MessageObject) null, tLRPC$FileLocation, imageLocation, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, photoViewerProvider, (ChatActivity) null, 0, 0, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(ArrayList<MessageObject> arrayList, int i, long j, long j2, PhotoViewerProvider photoViewerProvider) {
        PhotoViewerProvider photoViewerProvider2 = photoViewerProvider;
        return openPhoto(arrayList.get(i), (TLRPC$FileLocation) null, (ImageLocation) null, (ImageLocation) null, arrayList, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, i, photoViewerProvider2, (ChatActivity) null, j, j2, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(ArrayList<SecureDocument> arrayList, int i, PhotoViewerProvider photoViewerProvider) {
        return openPhoto((MessageObject) null, (TLRPC$FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, arrayList, (ArrayList<Object>) null, i, photoViewerProvider, (ChatActivity) null, 0, 0, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(int i, PageBlocksAdapter pageBlocksAdapter2, PhotoViewerProvider photoViewerProvider) {
        return openPhoto((MessageObject) null, (TLRPC$FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, i, photoViewerProvider, (ChatActivity) null, 0, 0, true, pageBlocksAdapter2, (Integer) null);
    }

    public boolean openPhotoForSelect(ArrayList<Object> arrayList, int i, int i2, boolean z, PhotoViewerProvider photoViewerProvider, ChatActivity chatActivity) {
        int i3 = i2;
        this.isDocumentsPicker = z;
        ImageView imageView = this.pickerViewSendButton;
        if (imageView != null) {
            FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) imageView.getLayoutParams();
            if (i3 == 4 || i3 == 5) {
                this.pickerViewSendButton.setImageResource(R.drawable.attach_send);
                layoutParams.bottomMargin = AndroidUtilities.dp(19.0f);
            } else if (i3 == 1 || i3 == 3 || i3 == 10) {
                this.pickerViewSendButton.setImageResource(R.drawable.floating_check);
                this.pickerViewSendButton.setPadding(0, AndroidUtilities.dp(1.0f), 0, 0);
                layoutParams.bottomMargin = AndroidUtilities.dp(19.0f);
            } else {
                this.pickerViewSendButton.setImageResource(R.drawable.attach_send);
                layoutParams.bottomMargin = AndroidUtilities.dp(14.0f);
            }
            this.pickerViewSendButton.setLayoutParams(layoutParams);
        }
        if (this.sendPhotoType == 1 || i3 != 1 || !this.isVisible) {
            PhotoViewerProvider photoViewerProvider2 = photoViewerProvider;
            this.sendPhotoType = i3;
            return openPhoto((MessageObject) null, (TLRPC$FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, arrayList, i, photoViewerProvider, chatActivity, 0, 0, true, (PageBlocksAdapter) null, (Integer) null);
        }
        this.sendPhotoType = i3;
        this.doneButtonPressed = false;
        this.actionBar.setTitle(LocaleController.formatString("Of", R.string.Of, 1, 1));
        this.placeProvider = photoViewerProvider;
        this.mergeDialogId = 0;
        this.currentDialogId = 0;
        this.selectedPhotosAdapter.notifyDataSetChanged();
        this.pageBlocksAdapter = null;
        if (this.velocityTracker == null) {
            this.velocityTracker = VelocityTracker.obtain();
        }
        this.isVisible = true;
        togglePhotosListView(false, false);
        this.openedFullScreenVideo = false;
        createCropView();
        toggleActionBar(false, false);
        this.seekToProgressPending2 = 0.0f;
        this.skipFirstBufferingProgress = false;
        this.playerInjected = false;
        makeFocusable();
        this.backgroundDrawable.setAlpha(255);
        this.containerView.setAlpha(1.0f);
        onPhotoShow((MessageObject) null, (TLRPC$FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, arrayList, i, (PlaceProviderObject) null);
        initCropView();
        setCropBitmap();
        return true;
    }

    private void openCurrentPhotoInPaintModeForSelect() {
        boolean z;
        MessageObject messageObject;
        boolean z2;
        File file;
        if (canSendMediaToParentChatActivity()) {
            MessageObject messageObject2 = this.currentMessageObject;
            File file2 = null;
            if (messageObject2 != null) {
                boolean z3 = messageObject2.canEditMedia() && !this.currentMessageObject.isDocument();
                boolean isVideo = this.currentMessageObject.isVideo();
                if (!TextUtils.isEmpty(this.currentMessageObject.messageOwner.attachPath)) {
                    File file3 = new File(this.currentMessageObject.messageOwner.attachPath);
                    if (file3.exists()) {
                        file2 = file3;
                    }
                }
                if (file2 == null) {
                    file2 = FileLoader.getInstance(this.currentAccount).getPathToMessage(this.currentMessageObject.messageOwner);
                }
                messageObject = messageObject2;
                file = file2;
                z = z3;
                z2 = isVideo;
            } else {
                file = null;
                messageObject = null;
                z2 = false;
                z = false;
            }
            if (file == null || !file.exists()) {
                showDownloadAlert();
                return;
            }
            this.savedState = new SavedState(this.currentIndex, new ArrayList(this.imagesArr), this.placeProvider);
            ActionBarToggleParams enableStatusBarAnimation = new ActionBarToggleParams().enableStatusBarAnimation(false);
            toggleActionBar(false, true, enableStatusBarAnimation);
            AndroidUtilities.runOnUIThread(new PhotoViewer$$ExternalSyntheticLambda63(this, file, z2, messageObject, z), (long) enableStatusBarAnimation.animationDuration);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$openCurrentPhotoInPaintModeForSelect$72(File file, boolean z, MessageObject messageObject, boolean z2) {
        int i;
        try {
            int attributeInt = new ExifInterface(file.getAbsolutePath()).getAttributeInt("Orientation", 1);
            i = attributeInt != 3 ? attributeInt != 6 ? attributeInt != 8 ? 0 : 270 : 90 : 180;
        } catch (Exception e) {
            FileLog.e((Throwable) e);
            i = 0;
        }
        int i2 = this.lastImageId;
        this.lastImageId = i2 - 1;
        MediaController.PhotoEntry photoEntry = new MediaController.PhotoEntry(0, i2, 0, file.getAbsolutePath(), i, z, 0, 0, 0);
        this.sendPhotoType = 2;
        this.doneButtonPressed = false;
        final PhotoViewerProvider photoViewerProvider = this.placeProvider;
        final MessageObject messageObject2 = messageObject;
        final MediaController.PhotoEntry photoEntry2 = photoEntry;
        final boolean z3 = z2;
        this.placeProvider = new EmptyPhotoViewerProvider() {
            private final ImageReceiver.BitmapHolder thumbHolder;

            public boolean canCaptureMorePhotos() {
                return false;
            }

            {
                this.thumbHolder = PhotoViewer.this.centerImage.getBitmapSafe();
            }

            public PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, TLRPC$FileLocation tLRPC$FileLocation, int i, boolean z) {
                PhotoViewerProvider photoViewerProvider = photoViewerProvider;
                if (photoViewerProvider != null) {
                    return photoViewerProvider.getPlaceForPhoto(messageObject2, (TLRPC$FileLocation) null, 0, z);
                }
                return null;
            }

            public ImageReceiver.BitmapHolder getThumbForPhoto(MessageObject messageObject, TLRPC$FileLocation tLRPC$FileLocation, int i) {
                return this.thumbHolder;
            }

            public void sendButtonPressed(int i, VideoEditedInfo videoEditedInfo, boolean z, int i2, boolean z2) {
                sendMedia(videoEditedInfo, z, i2, false, z2);
            }

            public void replaceButtonPressed(int i, VideoEditedInfo videoEditedInfo) {
                MediaController.PhotoEntry photoEntry = photoEntry2;
                if (photoEntry.isCropped || photoEntry.isPainted || photoEntry.isFiltered || videoEditedInfo != null || !TextUtils.isEmpty(photoEntry.caption)) {
                    sendMedia(videoEditedInfo, false, 0, true, false);
                }
            }

            public boolean canReplace(int i) {
                return photoViewerProvider != null && z3;
            }

            public MessageObject getEditingMessageObject() {
                return messageObject2;
            }

            private void sendMedia(VideoEditedInfo videoEditedInfo, boolean z, int i, boolean z2, boolean z3) {
                if (PhotoViewer.this.parentChatActivity != null) {
                    MessageObject messageObject = z2 ? messageObject2 : null;
                    if (messageObject != null && !TextUtils.isEmpty(photoEntry2.caption)) {
                        MediaController.PhotoEntry photoEntry = photoEntry2;
                        messageObject.editingMessage = photoEntry.caption;
                        messageObject.editingMessageEntities = photoEntry.entities;
                    }
                    MediaController.PhotoEntry photoEntry2 = photoEntry2;
                    if (photoEntry2.isVideo) {
                        if (videoEditedInfo != null) {
                            AccountInstance accountInstance = PhotoViewer.this.parentChatActivity.getAccountInstance();
                            String str = photoEntry2.path;
                            long dialogId = PhotoViewer.this.parentChatActivity.getDialogId();
                            MessageObject replyMessage = PhotoViewer.this.parentChatActivity.getReplyMessage();
                            MessageObject threadMessage = PhotoViewer.this.parentChatActivity.getThreadMessage();
                            MediaController.PhotoEntry photoEntry3 = photoEntry2;
                            SendMessagesHelper.prepareSendingVideo(accountInstance, str, videoEditedInfo, dialogId, replyMessage, threadMessage, photoEntry3.caption, photoEntry3.entities, photoEntry3.ttl, messageObject, z, i, z3);
                            return;
                        }
                        AccountInstance accountInstance2 = PhotoViewer.this.parentChatActivity.getAccountInstance();
                        String str2 = photoEntry2.path;
                        long dialogId2 = PhotoViewer.this.parentChatActivity.getDialogId();
                        MessageObject replyMessage2 = PhotoViewer.this.parentChatActivity.getReplyMessage();
                        MessageObject threadMessage2 = PhotoViewer.this.parentChatActivity.getThreadMessage();
                        MediaController.PhotoEntry photoEntry4 = photoEntry2;
                        SendMessagesHelper.prepareSendingVideo(accountInstance2, str2, (VideoEditedInfo) null, dialogId2, replyMessage2, threadMessage2, photoEntry4.caption, photoEntry4.entities, photoEntry4.ttl, messageObject, z, i, z3);
                    } else if (photoEntry2.imagePath != null) {
                        AccountInstance accountInstance3 = PhotoViewer.this.parentChatActivity.getAccountInstance();
                        MediaController.PhotoEntry photoEntry5 = photoEntry2;
                        String str3 = photoEntry5.imagePath;
                        String str4 = photoEntry5.thumbPath;
                        long dialogId3 = PhotoViewer.this.parentChatActivity.getDialogId();
                        MessageObject replyMessage3 = PhotoViewer.this.parentChatActivity.getReplyMessage();
                        MessageObject threadMessage3 = PhotoViewer.this.parentChatActivity.getThreadMessage();
                        MediaController.PhotoEntry photoEntry6 = photoEntry2;
                        SendMessagesHelper.prepareSendingPhoto(accountInstance3, str3, str4, (Uri) null, dialogId3, replyMessage3, threadMessage3, photoEntry6.caption, photoEntry6.entities, photoEntry6.stickers, (InputContentInfoCompat) null, photoEntry6.ttl, messageObject, videoEditedInfo, z, i, z3);
                    } else if (photoEntry2.path != null) {
                        AccountInstance accountInstance4 = PhotoViewer.this.parentChatActivity.getAccountInstance();
                        MediaController.PhotoEntry photoEntry7 = photoEntry2;
                        String str5 = photoEntry7.path;
                        String str6 = photoEntry7.thumbPath;
                        long dialogId4 = PhotoViewer.this.parentChatActivity.getDialogId();
                        MessageObject replyMessage4 = PhotoViewer.this.parentChatActivity.getReplyMessage();
                        MessageObject threadMessage4 = PhotoViewer.this.parentChatActivity.getThreadMessage();
                        MediaController.PhotoEntry photoEntry8 = photoEntry2;
                        SendMessagesHelper.prepareSendingPhoto(accountInstance4, str5, str6, (Uri) null, dialogId4, replyMessage4, threadMessage4, photoEntry8.caption, photoEntry8.entities, photoEntry8.stickers, (InputContentInfoCompat) null, photoEntry8.ttl, messageObject, videoEditedInfo, z, i, z3);
                    }
                }
            }
        };
        this.selectedPhotosAdapter.notifyDataSetChanged();
        if (this.velocityTracker == null) {
            this.velocityTracker = VelocityTracker.obtain();
        }
        togglePhotosListView(false, false);
        toggleActionBar(true, false);
        ChatActivity chatActivity = this.parentChatActivity;
        if (chatActivity == null || chatActivity.getChatActivityEnterView() == null || !this.parentChatActivity.isKeyboardVisible()) {
            makeFocusable();
        } else {
            this.parentChatActivity.getChatActivityEnterView().closeKeyboard();
        }
        this.backgroundDrawable.setAlpha(255);
        this.containerView.setAlpha(1.0f);
        onPhotoShow((MessageObject) null, (TLRPC$FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, Collections.singletonList(photoEntry), 0, (PlaceProviderObject) null);
        float f = 154.0f;
        this.pickerView.setTranslationY((float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f));
        this.pickerViewSendButton.setTranslationY((float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f));
        ActionBar actionBar2 = this.actionBar;
        actionBar2.setTranslationY((float) (-actionBar2.getHeight()));
        CaptionTextViewSwitcher captionTextViewSwitcher2 = this.captionTextViewSwitcher;
        if (!this.isCurrentVideo) {
            f = 96.0f;
        }
        captionTextViewSwitcher2.setTranslationY((float) AndroidUtilities.dp(f));
        createPaintView();
        switchToPaintMode();
    }

    private boolean checkAnimation() {
        if (this.animationInProgress != 0 && Math.abs(this.transitionAnimationStartTime - System.currentTimeMillis()) >= 500) {
            Runnable runnable = this.animationEndRunnable;
            if (runnable != null) {
                runnable.run();
                this.animationEndRunnable = null;
            }
            this.animationInProgress = 0;
        }
        if (this.animationInProgress != 0) {
            return true;
        }
        return false;
    }

    /* access modifiers changed from: private */
    public void setCropBitmap() {
        VideoEditTextureView videoEditTextureView;
        if (!this.cropInitied && this.sendPhotoType == 1) {
            if (!this.isCurrentVideo || ((videoEditTextureView = (VideoEditTextureView) this.videoTextureView) != null && videoEditTextureView.getVideoWidth() > 0 && videoEditTextureView.getVideoHeight() > 0)) {
                this.cropInitied = true;
                Bitmap bitmap = this.centerImage.getBitmap();
                int orientation = this.centerImage.getOrientation();
                if (bitmap == null) {
                    bitmap = this.animatingImageView.getBitmap();
                    orientation = this.animatingImageView.getOrientation();
                }
                Bitmap bitmap2 = bitmap;
                int i = orientation;
                if (bitmap2 != null || this.videoTextureView != null) {
                    this.photoCropView.setBitmap(bitmap2, i, false, false, this.paintingOverlay, this.cropTransform, this.isCurrentVideo ? (VideoEditTextureView) this.videoTextureView : null, this.editState.cropState);
                }
            }
        }
    }

    private void initCropView() {
        PhotoCropView photoCropView2 = this.photoCropView;
        if (photoCropView2 != null) {
            photoCropView2.setBitmap((Bitmap) null, 0, false, false, (PaintingOverlay) null, (CropTransform) null, (VideoEditTextureView) null, (MediaController.CropState) null);
            if (this.sendPhotoType == 1) {
                this.photoCropView.onAppear();
                this.photoCropView.setVisibility(0);
                this.photoCropView.setAlpha(1.0f);
                this.photoCropView.onAppeared();
                this.padImageForHorizontalInsets = true;
            }
        }
    }

    /* JADX WARNING: Failed to process nested try/catch */
    /* JADX WARNING: Missing exception handler attribute for start block: B:18:0x004f */
    /* JADX WARNING: Removed duplicated region for block: B:118:0x035d  */
    /* JADX WARNING: Removed duplicated region for block: B:133:0x03c7  */
    /* JADX WARNING: Removed duplicated region for block: B:21:0x005b A[Catch:{ Exception -> 0x03e3 }] */
    /* JADX WARNING: Removed duplicated region for block: B:22:0x0061 A[Catch:{ Exception -> 0x03e3 }] */
    /* JADX WARNING: Removed duplicated region for block: B:44:0x00bd A[Catch:{ Exception -> 0x03e3 }] */
    /* JADX WARNING: Removed duplicated region for block: B:45:0x00c0 A[Catch:{ Exception -> 0x03e3 }] */
    /* JADX WARNING: Removed duplicated region for block: B:49:0x00e6  */
    /* JADX WARNING: Removed duplicated region for block: B:50:0x00e8  */
    /* JADX WARNING: Removed duplicated region for block: B:53:0x018d  */
    /* JADX WARNING: Removed duplicated region for block: B:56:0x019e  */
    /* JADX WARNING: Removed duplicated region for block: B:57:0x01a2  */
    /* JADX WARNING: Removed duplicated region for block: B:63:0x01c5  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public boolean openPhoto(org.telegram.messenger.MessageObject r19, org.telegram.tgnet.TLRPC$FileLocation r20, org.telegram.messenger.ImageLocation r21, org.telegram.messenger.ImageLocation r22, java.util.ArrayList<org.telegram.messenger.MessageObject> r23, java.util.ArrayList<org.telegram.messenger.SecureDocument> r24, java.util.ArrayList<java.lang.Object> r25, int r26, org.telegram.ui.PhotoViewer.PhotoViewerProvider r27, org.telegram.ui.ChatActivity r28, long r29, long r31, boolean r33, org.telegram.ui.PhotoViewer.PageBlocksAdapter r34, java.lang.Integer r35) {
        /*
            r18 = this;
            r12 = r18
            r0 = r19
            r3 = r20
            r11 = r27
            r1 = r28
            r13 = r34
            r14 = r35
            android.app.Activity r2 = r12.parentActivity
            r15 = 0
            if (r2 == 0) goto L_0x03e7
            boolean r2 = r12.isVisible
            if (r2 != 0) goto L_0x03e7
            if (r11 != 0) goto L_0x001f
            boolean r2 = r18.checkAnimation()
            if (r2 != 0) goto L_0x03e7
        L_0x001f:
            if (r0 != 0) goto L_0x002f
            if (r3 != 0) goto L_0x002f
            if (r23 != 0) goto L_0x002f
            if (r25 != 0) goto L_0x002f
            if (r24 != 0) goto L_0x002f
            if (r21 != 0) goto L_0x002f
            if (r13 != 0) goto L_0x002f
            goto L_0x03e7
        L_0x002f:
            r10 = 1
            r9 = r26
            org.telegram.ui.PhotoViewer$PlaceProviderObject r8 = r11.getPlaceForPhoto(r0, r3, r9, r10)
            r2 = 0
            r12.lastInsets = r2
            android.app.Activity r4 = r12.parentActivity
            java.lang.String r5 = "window"
            java.lang.Object r4 = r4.getSystemService(r5)
            android.view.WindowManager r4 = (android.view.WindowManager) r4
            boolean r5 = r12.attachedToWindow
            if (r5 == 0) goto L_0x004f
            android.widget.FrameLayout r5 = r12.windowView     // Catch:{ Exception -> 0x004f }
            r4.removeView(r5)     // Catch:{ Exception -> 0x004f }
            r18.onHideView()     // Catch:{ Exception -> 0x004f }
        L_0x004f:
            android.view.WindowManager$LayoutParams r5 = r12.windowLayoutParams     // Catch:{ Exception -> 0x03e3 }
            r6 = 99
            r5.type = r6     // Catch:{ Exception -> 0x03e3 }
            int r6 = android.os.Build.VERSION.SDK_INT     // Catch:{ Exception -> 0x03e3 }
            r7 = 21
            if (r6 < r7) goto L_0x0061
            r6 = -2147286784(0xfffffffvar_, float:-2.75865E-40)
            r5.flags = r6     // Catch:{ Exception -> 0x03e3 }
            goto L_0x0065
        L_0x0061:
            r6 = 131072(0x20000, float:1.83671E-40)
            r5.flags = r6     // Catch:{ Exception -> 0x03e3 }
        L_0x0065:
            if (r1 == 0) goto L_0x006d
            org.telegram.tgnet.TLRPC$EncryptedChat r5 = r28.getCurrentEncryptedChat()     // Catch:{ Exception -> 0x03e3 }
            if (r5 != 0) goto L_0x00a6
        L_0x006d:
            long r5 = r12.avatarsDialogId     // Catch:{ Exception -> 0x03e3 }
            r16 = 0
            int r7 = (r5 > r16 ? 1 : (r5 == r16 ? 0 : -1))
            if (r7 == 0) goto L_0x0084
            int r5 = r12.currentAccount     // Catch:{ Exception -> 0x03e3 }
            org.telegram.messenger.MessagesController r5 = org.telegram.messenger.MessagesController.getInstance(r5)     // Catch:{ Exception -> 0x03e3 }
            long r6 = r12.avatarsDialogId     // Catch:{ Exception -> 0x03e3 }
            long r6 = -r6
            boolean r5 = r5.isChatNoForwards((long) r6)     // Catch:{ Exception -> 0x03e3 }
            if (r5 != 0) goto L_0x00a6
        L_0x0084:
            if (r0 == 0) goto L_0x009e
            int r5 = r12.currentAccount     // Catch:{ Exception -> 0x03e3 }
            org.telegram.messenger.MessagesController r5 = org.telegram.messenger.MessagesController.getInstance(r5)     // Catch:{ Exception -> 0x03e3 }
            long r6 = r19.getChatId()     // Catch:{ Exception -> 0x03e3 }
            boolean r5 = r5.isChatNoForwards((long) r6)     // Catch:{ Exception -> 0x03e3 }
            if (r5 != 0) goto L_0x00a6
            org.telegram.tgnet.TLRPC$Message r5 = r0.messageOwner     // Catch:{ Exception -> 0x03e3 }
            if (r5 == 0) goto L_0x009e
            boolean r5 = r5.noforwards     // Catch:{ Exception -> 0x03e3 }
            if (r5 != 0) goto L_0x00a6
        L_0x009e:
            if (r0 == 0) goto L_0x00af
            boolean r5 = r19.hasRevealedExtendedMedia()     // Catch:{ Exception -> 0x03e3 }
            if (r5 == 0) goto L_0x00af
        L_0x00a6:
            android.view.WindowManager$LayoutParams r5 = r12.windowLayoutParams     // Catch:{ Exception -> 0x03e3 }
            int r6 = r5.flags     // Catch:{ Exception -> 0x03e3 }
            r6 = r6 | 8192(0x2000, float:1.14794E-41)
            r5.flags = r6     // Catch:{ Exception -> 0x03e3 }
            goto L_0x00b7
        L_0x00af:
            android.view.WindowManager$LayoutParams r5 = r12.windowLayoutParams     // Catch:{ Exception -> 0x03e3 }
            int r6 = r5.flags     // Catch:{ Exception -> 0x03e3 }
            r6 = r6 & -8193(0xffffffffffffdfff, float:NaN)
            r5.flags = r6     // Catch:{ Exception -> 0x03e3 }
        L_0x00b7:
            android.view.WindowManager$LayoutParams r5 = r12.windowLayoutParams     // Catch:{ Exception -> 0x03e3 }
            boolean r6 = r12.useSmoothKeyboard     // Catch:{ Exception -> 0x03e3 }
            if (r6 == 0) goto L_0x00c0
            r6 = 32
            goto L_0x00c2
        L_0x00c0:
            r6 = 16
        L_0x00c2:
            r6 = r6 | 256(0x100, float:3.59E-43)
            r5.softInputMode = r6     // Catch:{ Exception -> 0x03e3 }
            android.widget.FrameLayout r5 = r12.windowView     // Catch:{ Exception -> 0x03e3 }
            r5.setFocusable(r15)     // Catch:{ Exception -> 0x03e3 }
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r5 = r12.containerView     // Catch:{ Exception -> 0x03e3 }
            r5.setFocusable(r15)     // Catch:{ Exception -> 0x03e3 }
            android.widget.FrameLayout r5 = r12.windowView     // Catch:{ Exception -> 0x03e3 }
            android.view.WindowManager$LayoutParams r6 = r12.windowLayoutParams     // Catch:{ Exception -> 0x03e3 }
            r4.addView(r5, r6)     // Catch:{ Exception -> 0x03e3 }
            r18.onShowView()     // Catch:{ Exception -> 0x03e3 }
            r12.hasCaptionForAllMedia = r15
            r12.doneButtonPressed = r15
            r12.allowShowFullscreenButton = r10
            r12.parentChatActivity = r1
            r12.lastTitle = r2
            if (r14 == 0) goto L_0x00e8
            r1 = 1
            goto L_0x00e9
        L_0x00e8:
            r1 = 0
        L_0x00e9:
            r12.isEmbedVideo = r1
            org.telegram.ui.ActionBar.ActionBar r1 = r12.actionBar
            int r4 = org.telegram.messenger.R.string.Of
            r5 = 2
            java.lang.Object[] r5 = new java.lang.Object[r5]
            java.lang.Integer r6 = java.lang.Integer.valueOf(r10)
            r5[r15] = r6
            java.lang.Integer r6 = java.lang.Integer.valueOf(r10)
            r5[r10] = r6
            java.lang.String r6 = "Of"
            java.lang.String r4 = org.telegram.messenger.LocaleController.formatString(r6, r4, r5)
            r1.setTitle(r4)
            org.telegram.ui.ActionBar.ActionBar r1 = r12.actionBar
            r1.setTitleScrollNonFitText(r15)
            int r1 = r12.currentAccount
            org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getInstance(r1)
            int r4 = org.telegram.messenger.NotificationCenter.fileLoadFailed
            r1.addObserver(r12, r4)
            int r1 = r12.currentAccount
            org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getInstance(r1)
            int r4 = org.telegram.messenger.NotificationCenter.fileLoaded
            r1.addObserver(r12, r4)
            int r1 = r12.currentAccount
            org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getInstance(r1)
            int r4 = org.telegram.messenger.NotificationCenter.fileLoadProgressChanged
            r1.addObserver(r12, r4)
            int r1 = r12.currentAccount
            org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getInstance(r1)
            int r4 = org.telegram.messenger.NotificationCenter.mediaCountDidLoad
            r1.addObserver(r12, r4)
            int r1 = r12.currentAccount
            org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getInstance(r1)
            int r4 = org.telegram.messenger.NotificationCenter.mediaDidLoad
            r1.addObserver(r12, r4)
            int r1 = r12.currentAccount
            org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getInstance(r1)
            int r4 = org.telegram.messenger.NotificationCenter.dialogPhotosLoaded
            r1.addObserver(r12, r4)
            int r1 = r12.currentAccount
            org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getInstance(r1)
            int r4 = org.telegram.messenger.NotificationCenter.messagesDeleted
            r1.addObserver(r12, r4)
            org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getGlobalInstance()
            int r4 = org.telegram.messenger.NotificationCenter.emojiLoaded
            r1.addObserver(r12, r4)
            int r1 = r12.currentAccount
            org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getInstance(r1)
            int r4 = org.telegram.messenger.NotificationCenter.filePreparingFailed
            r1.addObserver(r12, r4)
            int r1 = r12.currentAccount
            org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getInstance(r1)
            int r4 = org.telegram.messenger.NotificationCenter.fileNewChunkAvailable
            r1.addObserver(r12, r4)
            r12.placeProvider = r11
            r4 = r31
            r12.mergeDialogId = r4
            r4 = r29
            r12.currentDialogId = r4
            org.telegram.ui.PhotoViewer$ListAdapter r1 = r12.selectedPhotosAdapter
            r1.notifyDataSetChanged()
            r12.pageBlocksAdapter = r13
            android.view.VelocityTracker r1 = r12.velocityTracker
            if (r1 != 0) goto L_0x0193
            android.view.VelocityTracker r1 = android.view.VelocityTracker.obtain()
            r12.velocityTracker = r1
        L_0x0193:
            r12.isVisible = r10
            r12.togglePhotosListView(r15, r15)
            r1 = r33 ^ 1
            r12.openedFullScreenVideo = r1
            if (r1 == 0) goto L_0x01a2
            r12.toggleActionBar(r15, r15)
            goto L_0x01b0
        L_0x01a2:
            int r1 = r12.sendPhotoType
            if (r1 != r10) goto L_0x01ad
            r18.createCropView()
            r12.toggleActionBar(r15, r15)
            goto L_0x01b0
        L_0x01ad:
            r12.toggleActionBar(r10, r15)
        L_0x01b0:
            android.widget.FrameLayout r1 = r12.windowView
            r1.setClipChildren(r15)
            android.view.View r1 = r12.navigationBar
            r1.setVisibility(r15)
            r7 = 0
            r12.seekToProgressPending2 = r7
            r12.skipFirstBufferingProgress = r15
            r12.playerInjected = r15
            r6 = 1065353216(0x3var_, float:1.0)
            if (r8 == 0) goto L_0x035d
            r12.disableShowCheck = r10
            r12.animationInProgress = r10
            if (r0 == 0) goto L_0x023a
            boolean r1 = r8.allowTakeAnimation
            if (r1 == 0) goto L_0x01d6
            org.telegram.messenger.ImageReceiver r1 = r8.imageReceiver
            org.telegram.ui.Components.AnimatedFileDrawable r1 = r1.getAnimation()
            goto L_0x01d7
        L_0x01d6:
            r1 = r2
        L_0x01d7:
            r12.currentAnimation = r1
            if (r1 == 0) goto L_0x0244
            boolean r1 = r19.isVideo()
            if (r1 == 0) goto L_0x022d
            org.telegram.messenger.ImageReceiver r1 = r8.imageReceiver
            r1.setAllowStartAnimation(r15)
            org.telegram.messenger.ImageReceiver r1 = r8.imageReceiver
            r1.stopAnimation()
            org.telegram.messenger.MediaController r1 = org.telegram.messenger.MediaController.getInstance()
            boolean r1 = r1.isPlayingMessage(r0)
            if (r1 == 0) goto L_0x01f9
            float r1 = r0.audioProgress
            r12.seekToProgressPending2 = r1
        L_0x01f9:
            org.telegram.ui.Components.VideoPlayer r1 = r12.injectingVideoPlayer
            if (r1 != 0) goto L_0x0227
            int r1 = r0.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            org.telegram.tgnet.TLRPC$Document r4 = r19.getDocument()
            boolean r1 = r1.isLoadingVideo(r4, r10)
            if (r1 != 0) goto L_0x0227
            org.telegram.ui.Components.AnimatedFileDrawable r1 = r12.currentAnimation
            boolean r1 = r1.hasBitmap()
            if (r1 != 0) goto L_0x0225
            int r1 = r0.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            org.telegram.tgnet.TLRPC$Document r4 = r19.getDocument()
            boolean r1 = r1.isLoadingVideo(r4, r15)
            if (r1 != 0) goto L_0x0227
        L_0x0225:
            r1 = 1
            goto L_0x0228
        L_0x0227:
            r1 = 0
        L_0x0228:
            r12.skipFirstBufferingProgress = r1
            r12.currentAnimation = r2
            goto L_0x0244
        L_0x022d:
            java.util.ArrayList r1 = r0.getWebPagePhotos(r2, r2)
            int r1 = r1.size()
            if (r1 <= r10) goto L_0x0244
            r12.currentAnimation = r2
            goto L_0x0244
        L_0x023a:
            if (r13 == 0) goto L_0x0244
            org.telegram.messenger.ImageReceiver r1 = r8.imageReceiver
            org.telegram.ui.Components.AnimatedFileDrawable r1 = r1.getAnimation()
            r12.currentAnimation = r1
        L_0x0244:
            r1 = r18
            r2 = r19
            r3 = r20
            r4 = r21
            r5 = r22
            r0 = 1065353216(0x3var_, float:1.0)
            r6 = r23
            r0 = 0
            r7 = r24
            r28 = r8
            r8 = r25
            r9 = r26
            r0 = 1
            r10 = r28
            r1.onPhotoShow(r2, r3, r4, r5, r6, r7, r8, r9, r10)
            int r1 = r12.sendPhotoType
            if (r1 != r0) goto L_0x0275
            org.telegram.ui.Components.PhotoCropView r1 = r12.photoCropView
            r1.setVisibility(r15)
            org.telegram.ui.Components.PhotoCropView r1 = r12.photoCropView
            r2 = 0
            r1.setAlpha(r2)
            org.telegram.ui.Components.PhotoCropView r1 = r12.photoCropView
            r1.setFreeform(r15)
        L_0x0275:
            r10 = r28
            org.telegram.messenger.ImageReceiver r1 = r10.imageReceiver
            android.graphics.RectF r1 = r1.getDrawRegion()
            float r5 = r1.left
            float r7 = r1.top
            org.telegram.messenger.ImageReceiver r2 = r10.imageReceiver
            int r2 = r2.getOrientation()
            org.telegram.messenger.ImageReceiver r3 = r10.imageReceiver
            int r3 = r3.getAnimatedOrientation()
            if (r3 == 0) goto L_0x0290
            r2 = r3
        L_0x0290:
            org.telegram.ui.Components.ClippingImageView[] r3 = r12.getAnimatingImageViews(r10)
            r4 = 1065353216(0x3var_, float:1.0)
            r12.clippingImageProgress = r4
            r4 = 0
        L_0x0299:
            int r6 = r3.length
            if (r4 >= r6) goto L_0x02be
            r6 = r3[r4]
            float[][] r8 = r12.animationValues
            r6.setAnimationValues(r8)
            r6 = r3[r4]
            r6.setVisibility(r15)
            r6 = r3[r4]
            int[] r8 = r10.radius
            r6.setRadius(r8)
            r6 = r3[r4]
            r6.setOrientation(r2)
            r6 = r3[r4]
            org.telegram.messenger.ImageReceiver$BitmapHolder r8 = r10.thumb
            r6.setImageBitmap(r8)
            int r4 = r4 + 1
            goto L_0x0299
        L_0x02be:
            r18.initCropView()
            int r2 = r12.sendPhotoType
            if (r2 != r0) goto L_0x02cc
            org.telegram.ui.Components.PhotoCropView r2 = r12.photoCropView
            r4 = 1065353216(0x3var_, float:1.0)
            r2.setAspectRatio(r4)
        L_0x02cc:
            org.telegram.ui.Components.ClippingImageView r2 = r12.animatingImageView
            android.view.ViewGroup$LayoutParams r4 = r2.getLayoutParams()
            float r2 = r1.width()
            int r2 = (int) r2
            r4.width = r2
            float r2 = r1.height()
            int r2 = (int) r2
            r4.height = r2
            int r6 = r4.width
            r8 = 100
            if (r6 > 0) goto L_0x02e8
            r4.width = r8
        L_0x02e8:
            if (r2 > 0) goto L_0x02ec
            r4.height = r8
        L_0x02ec:
            int r2 = r3.length
            if (r15 >= r2) goto L_0x0341
            int r2 = r3.length
            if (r2 <= r0) goto L_0x02fb
            r2 = r3[r15]
            r6 = 0
            r2.setAlpha(r6)
            r8 = 1065353216(0x3var_, float:1.0)
            goto L_0x0303
        L_0x02fb:
            r6 = 0
            r2 = r3[r15]
            r8 = 1065353216(0x3var_, float:1.0)
            r2.setAlpha(r8)
        L_0x0303:
            r2 = r3[r15]
            r2.setPivotX(r6)
            r2 = r3[r15]
            r2.setPivotY(r6)
            r2 = r3[r15]
            float r9 = r10.scale
            r2.setScaleX(r9)
            r2 = r3[r15]
            float r9 = r10.scale
            r2.setScaleY(r9)
            r2 = r3[r15]
            int r9 = r10.viewX
            float r9 = (float) r9
            float r6 = r1.left
            float r8 = r10.scale
            float r6 = r6 * r8
            float r9 = r9 + r6
            r2.setTranslationX(r9)
            r2 = r3[r15]
            int r6 = r10.viewY
            float r6 = (float) r6
            float r8 = r1.top
            float r9 = r10.scale
            float r8 = r8 * r9
            float r6 = r6 + r8
            r2.setTranslationY(r6)
            r2 = r3[r15]
            r2.setLayoutParams(r4)
            int r15 = r15 + 1
            goto L_0x02ec
        L_0x0341:
            android.widget.FrameLayout r1 = r12.windowView
            android.view.ViewTreeObserver r15 = r1.getViewTreeObserver()
            org.telegram.ui.PhotoViewer$69 r9 = new org.telegram.ui.PhotoViewer$69
            r1 = r9
            r2 = r18
            r6 = r10
            r8 = r34
            r13 = r9
            r9 = r25
            r10 = r35
            r11 = r27
            r1.<init>(r3, r4, r5, r6, r7, r8, r9, r10, r11)
            r15.addOnPreDrawListener(r13)
            goto L_0x03b7
        L_0x035d:
            r10 = r8
            r0 = 1
            r1 = 1065353216(0x3var_, float:1.0)
            if (r25 == 0) goto L_0x0375
            int r2 = r12.sendPhotoType
            r4 = 3
            if (r2 == r4) goto L_0x0375
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r2 = r12.placeProvider
            if (r2 == 0) goto L_0x0372
            boolean r2 = r2.closeKeyboard()
            if (r2 != 0) goto L_0x0375
        L_0x0372:
            r18.makeFocusable()
        L_0x0375:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r2 = r12.containerView
            r2.setAlpha(r1)
            r1 = r18
            r2 = r19
            r3 = r20
            r4 = r21
            r5 = r22
            r6 = r23
            r7 = r24
            r8 = r25
            r9 = r26
            r1.onPhotoShow(r2, r3, r4, r5, r6, r7, r8, r9, r10)
            r18.initCropView()
            r18.setCropBitmap()
            org.telegram.ui.ChatActivity r1 = r12.parentChatActivity
            if (r1 == 0) goto L_0x03a9
            org.telegram.ui.Components.UndoView r1 = r1.getUndoView()
            r1.hide(r15, r0)
            org.telegram.ui.ChatActivity r1 = r12.parentChatActivity
            android.view.View r1 = r1.getFragmentView()
            r1.invalidate()
        L_0x03a9:
            android.widget.FrameLayout r1 = r12.windowView
            android.view.ViewTreeObserver r1 = r1.getViewTreeObserver()
            org.telegram.ui.PhotoViewer$70 r2 = new org.telegram.ui.PhotoViewer$70
            r2.<init>(r14, r11)
            r1.addOnPreDrawListener(r2)
        L_0x03b7:
            android.app.Activity r1 = r12.parentActivity
            java.lang.String r2 = "accessibility"
            java.lang.Object r1 = r1.getSystemService(r2)
            android.view.accessibility.AccessibilityManager r1 = (android.view.accessibility.AccessibilityManager) r1
            boolean r2 = r1.isTouchExplorationEnabled()
            if (r2 == 0) goto L_0x03e2
            android.view.accessibility.AccessibilityEvent r2 = android.view.accessibility.AccessibilityEvent.obtain()
            r3 = 16384(0x4000, float:2.2959E-41)
            r2.setEventType(r3)
            java.util.List r3 = r2.getText()
            int r4 = org.telegram.messenger.R.string.AccDescrPhotoViewer
            java.lang.String r5 = "AccDescrPhotoViewer"
            java.lang.String r4 = org.telegram.messenger.LocaleController.getString(r5, r4)
            r3.add(r4)
            r1.sendAccessibilityEvent(r2)
        L_0x03e2:
            return r0
        L_0x03e3:
            r0 = move-exception
            org.telegram.messenger.FileLog.e((java.lang.Throwable) r0)
        L_0x03e7:
            return r15
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.openPhoto(org.telegram.messenger.MessageObject, org.telegram.tgnet.TLRPC$FileLocation, org.telegram.messenger.ImageLocation, org.telegram.messenger.ImageLocation, java.util.ArrayList, java.util.ArrayList, java.util.ArrayList, int, org.telegram.ui.PhotoViewer$PhotoViewerProvider, org.telegram.ui.ChatActivity, long, long, boolean, org.telegram.ui.PhotoViewer$PageBlocksAdapter, java.lang.Integer):boolean");
    }

    /* access modifiers changed from: private */
    public void initEmbedVideo(int i) {
        if (this.isEmbedVideo) {
            AnonymousClass71 r0 = new PhotoViewerWebView(this, this.parentActivity, this.pipItem) {
                Rect rect = new Rect();

                /* access modifiers changed from: protected */
                public void drawBlackBackground(Canvas canvas, int i, int i2) {
                    Bitmap bitmap = PhotoViewer.this.centerImage.getBitmap();
                    if (bitmap != null) {
                        float min = Math.min(((float) i) / ((float) bitmap.getWidth()), ((float) i2) / ((float) bitmap.getHeight()));
                        int width = (int) (((float) bitmap.getWidth()) * min);
                        int height = (int) (((float) bitmap.getHeight()) * min);
                        int i3 = (i2 - height) / 2;
                        int i4 = (i - width) / 2;
                        this.rect.set(i4, i3, width + i4, height + i3);
                        canvas.drawBitmap(bitmap, (Rect) null, this.rect, (Paint) null);
                    }
                }

                /* access modifiers changed from: protected */
                public void processTouch(MotionEvent motionEvent) {
                    PhotoViewer.this.gestureDetector.onTouchEvent(motionEvent);
                }
            };
            this.photoViewerWebView = r0;
            r0.init(i, MessageObject.getMedia(this.currentMessageObject.messageOwner).webpage);
            this.photoViewerWebView.setPlaybackSpeed(this.currentVideoSpeed);
            this.containerView.addView(this.photoViewerWebView, 0, LayoutHelper.createFrame(-1, -1.0f));
            if (this.photoViewerWebView.isControllable()) {
                setVideoPlayerControlVisible(true, true);
            }
            updateVideoPlayerTime();
        }
    }

    /* access modifiers changed from: private */
    public void makeFocusable() {
        if (Build.VERSION.SDK_INT >= 21) {
            this.windowLayoutParams.flags = -NUM;
        } else {
            this.windowLayoutParams.flags = 0;
        }
        this.windowLayoutParams.softInputMode = (this.useSmoothKeyboard ? 32 : 16) | 256;
        try {
            ((WindowManager) this.parentActivity.getSystemService("window")).updateViewLayout(this.windowView, this.windowLayoutParams);
        } catch (Exception e) {
            FileLog.e((Throwable) e);
        }
        this.windowView.setFocusable(true);
        this.containerView.setFocusable(true);
    }

    private void requestAdjustToNothing() {
        this.windowLayoutParams.softInputMode = 48;
        try {
            ((WindowManager) this.parentActivity.getSystemService("window")).updateViewLayout(this.windowView, this.windowLayoutParams);
        } catch (Exception e) {
            FileLog.e((Throwable) e);
        }
    }

    /* access modifiers changed from: private */
    public void requestAdjust() {
        this.windowLayoutParams.softInputMode = (this.useSmoothKeyboard ? 32 : 16) | 256;
        try {
            ((WindowManager) this.parentActivity.getSystemService("window")).updateViewLayout(this.windowView, this.windowLayoutParams);
        } catch (Exception e) {
            FileLog.e((Throwable) e);
        }
    }

    public void injectVideoPlayerToMediaController() {
        if (this.videoPlayer.isPlaying()) {
            if (this.playerLooping) {
                this.videoPlayer.setLooping(false);
            }
            MediaController.getInstance().injectVideoPlayer(this.videoPlayer, this.currentMessageObject);
            this.videoPlayer = null;
        }
    }

    /* JADX WARNING: Removed duplicated region for block: B:109:0x01e0  */
    /* JADX WARNING: Removed duplicated region for block: B:112:0x01e7  */
    /* JADX WARNING: Removed duplicated region for block: B:120:0x0216  */
    /* JADX WARNING: Removed duplicated region for block: B:123:0x021f  */
    /* JADX WARNING: Removed duplicated region for block: B:124:0x0238  */
    /* JADX WARNING: Removed duplicated region for block: B:255:0x072f  */
    /* JADX WARNING: Removed duplicated region for block: B:273:? A[RETURN, SYNTHETIC] */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public void closePhoto(boolean r28, boolean r29) {
        /*
            r27 = this;
            r1 = r27
            r2 = 3
            r3 = 1
            r4 = 0
            if (r29 != 0) goto L_0x003c
            int r0 = r1.currentEditMode
            if (r0 == 0) goto L_0x003c
            if (r0 != r2) goto L_0x0015
            org.telegram.ui.Components.PhotoPaintView r2 = r1.photoPaintView
            if (r2 == 0) goto L_0x0015
            r27.closePaintMode()
            return
        L_0x0015:
            if (r0 != r3) goto L_0x0038
            org.telegram.ui.Components.Crop.CropTransform r5 = r1.cropTransform
            boolean r6 = r1.previousHasTransform
            float r7 = r1.previousCropPx
            float r8 = r1.previousCropPy
            float r9 = r1.previousCropRotation
            int r10 = r1.previousCropOrientation
            float r11 = r1.previousCropScale
            r12 = 1065353216(0x3var_, float:1.0)
            r13 = 1065353216(0x3var_, float:1.0)
            float r14 = r1.previousCropPw
            float r15 = r1.previousCropPh
            r16 = 0
            r17 = 0
            boolean r0 = r1.previousCropMirrored
            r18 = r0
            r5.setViewTransform(r6, r7, r8, r9, r10, r11, r12, r13, r14, r15, r16, r17, r18)
        L_0x0038:
            r1.switchToEditMode(r4)
            return
        L_0x003c:
            org.telegram.ui.PhotoViewer$QualityChooseView r0 = r1.qualityChooseView
            if (r0 == 0) goto L_0x004e
            java.lang.Object r0 = r0.getTag()
            if (r0 == 0) goto L_0x004e
            org.telegram.ui.Components.PickerBottomLayoutViewer r0 = r1.qualityPicker
            android.widget.TextView r0 = r0.cancelButton
            r0.callOnClick()
            return
        L_0x004e:
            r1.openedFullScreenVideo = r4
            r5 = 0
            org.telegram.ui.ActionBar.AlertDialog r0 = r1.visibleDialog     // Catch:{ Exception -> 0x005b }
            if (r0 == 0) goto L_0x005f
            r0.dismiss()     // Catch:{ Exception -> 0x005b }
            r1.visibleDialog = r5     // Catch:{ Exception -> 0x005b }
            goto L_0x005f
        L_0x005b:
            r0 = move-exception
            org.telegram.messenger.FileLog.e((java.lang.Throwable) r0)
        L_0x005f:
            int r0 = android.os.Build.VERSION.SDK_INT
            r6 = 21
            if (r0 < r6) goto L_0x0071
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r1.containerView
            if (r0 == 0) goto L_0x0071
            java.lang.Runnable r0 = r1.updateContainerFlagsRunnable
            org.telegram.messenger.AndroidUtilities.cancelRunOnUIThread(r0)
            r1.updateContainerFlags(r3)
        L_0x0071:
            int r0 = r1.currentEditMode
            r7 = 8
            r8 = 2
            if (r0 == 0) goto L_0x00aa
            if (r0 != r8) goto L_0x0089
            org.telegram.ui.Components.PhotoFilterView r0 = r1.photoFilterView
            r0.shutdown()
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r1.containerView
            org.telegram.ui.Components.PhotoFilterView r9 = r1.photoFilterView
            r0.removeView(r9)
            r1.photoFilterView = r5
            goto L_0x00a8
        L_0x0089:
            if (r0 != r3) goto L_0x0096
            org.telegram.ui.Components.PickerBottomLayoutViewer r0 = r1.editorDoneLayout
            r0.setVisibility(r7)
            org.telegram.ui.Components.PhotoCropView r0 = r1.photoCropView
            r0.setVisibility(r7)
            goto L_0x00a8
        L_0x0096:
            if (r0 != r2) goto L_0x00a8
            org.telegram.ui.Components.PhotoPaintView r0 = r1.photoPaintView
            r0.shutdown()
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r1.containerView
            org.telegram.ui.Components.PhotoPaintView r9 = r1.photoPaintView
            r0.removeView(r9)
            r1.photoPaintView = r5
            r1.savedState = r5
        L_0x00a8:
            r1.currentEditMode = r4
        L_0x00aa:
            android.view.View r0 = r1.navigationBar
            if (r0 == 0) goto L_0x00b1
            r0.setVisibility(r4)
        L_0x00b1:
            android.widget.FrameLayout r0 = r1.windowView
            if (r0 == 0) goto L_0x00b8
            r0.setClipChildren(r4)
        L_0x00b8:
            android.app.Activity r0 = r1.parentActivity
            if (r0 == 0) goto L_0x074d
            boolean r0 = r1.isInline
            if (r0 != 0) goto L_0x00c4
            boolean r0 = r1.isVisible
            if (r0 == 0) goto L_0x074d
        L_0x00c4:
            boolean r0 = r27.checkAnimation()
            if (r0 != 0) goto L_0x074d
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r0 = r1.placeProvider
            if (r0 != 0) goto L_0x00d0
            goto L_0x074d
        L_0x00d0:
            org.telegram.ui.Components.PhotoViewerCaptionEnterView r0 = r1.captionEditText
            boolean r0 = r0.hideActionMode()
            if (r0 == 0) goto L_0x00db
            if (r29 != 0) goto L_0x00db
            return
        L_0x00db:
            android.app.Activity r0 = r1.parentActivity
            if (r0 == 0) goto L_0x00ec
            int r9 = r1.fullscreenedByButton
            if (r9 == 0) goto L_0x00ec
            int r9 = r1.prevOrientation
            r0.setRequestedOrientation(r9)
            r1.fullscreenedByButton = r4
            r1.wasRotated = r4
        L_0x00ec:
            boolean r0 = r1.doneButtonPressed
            if (r0 != 0) goto L_0x0118
            java.util.ArrayList<java.lang.Object> r0 = r1.imagesArrLocals
            boolean r0 = r0.isEmpty()
            if (r0 != 0) goto L_0x0118
            int r0 = r1.currentIndex
            if (r0 < 0) goto L_0x0118
            java.util.ArrayList<java.lang.Object> r9 = r1.imagesArrLocals
            int r9 = r9.size()
            if (r0 >= r9) goto L_0x0118
            java.util.ArrayList<java.lang.Object> r0 = r1.imagesArrLocals
            int r9 = r1.currentIndex
            java.lang.Object r0 = r0.get(r9)
            boolean r9 = r0 instanceof org.telegram.messenger.MediaController.MediaEditState
            if (r9 == 0) goto L_0x0118
            org.telegram.messenger.MediaController$MediaEditState r0 = (org.telegram.messenger.MediaController.MediaEditState) r0
            org.telegram.messenger.VideoEditedInfo r9 = r27.getCurrentVideoEditedInfo()
            r0.editedInfo = r9
        L_0x0118:
            org.telegram.ui.ActionBar.BaseFragment r0 = r1.parentFragment
            r9 = 1065353216(0x3var_, float:1.0)
            if (r0 == 0) goto L_0x014f
            android.view.View r0 = r0.getFragmentView()
            if (r0 == 0) goto L_0x014f
            org.telegram.ui.ActionBar.BaseFragment r0 = r1.parentFragment
            android.view.View r0 = r0.getFragmentView()
            float r10 = r0.getScaleX()
            float r11 = r0.getScaleY()
            r0.setScaleX(r9)
            r0.setScaleY(r9)
            org.telegram.ui.Components.ChatAttachAlert r0 = r1.parentAlert
            if (r0 == 0) goto L_0x0153
            android.widget.FrameLayout r0 = r0.getContainer()
            float r12 = r0.getScaleX()
            float r13 = r0.getScaleY()
            r0.setScaleX(r9)
            r0.setScaleY(r9)
            goto L_0x0157
        L_0x014f:
            r10 = 1065353216(0x3var_, float:1.0)
            r11 = 1065353216(0x3var_, float:1.0)
        L_0x0153:
            r12 = 1065353216(0x3var_, float:1.0)
            r13 = 1065353216(0x3var_, float:1.0)
        L_0x0157:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r0 = r1.placeProvider
            org.telegram.messenger.MessageObject r14 = r1.currentMessageObject
            org.telegram.messenger.ImageLocation r15 = r1.currentFileLocation
            org.telegram.tgnet.TLRPC$FileLocation r15 = getFileLocation(r15)
            int r7 = r1.currentIndex
            org.telegram.ui.PhotoViewer$PlaceProviderObject r7 = r0.getPlaceForPhoto(r14, r15, r7, r3)
            org.telegram.ui.Components.VideoPlayer r0 = r1.videoPlayer
            r14 = 0
            if (r0 == 0) goto L_0x01db
            if (r7 == 0) goto L_0x01db
            org.telegram.messenger.ImageReceiver r0 = r7.imageReceiver
            org.telegram.ui.Components.AnimatedFileDrawable r15 = r0.getAnimation()
            if (r15 == 0) goto L_0x01db
            boolean r0 = r1.textureUploaded
            if (r0 == 0) goto L_0x019e
            android.graphics.Bitmap r0 = r15.getAnimatedBitmap()
            if (r0 == 0) goto L_0x019e
            android.view.TextureView r6 = r1.videoTextureView     // Catch:{ all -> 0x019a }
            int r8 = r0.getWidth()     // Catch:{ all -> 0x019a }
            int r2 = r0.getHeight()     // Catch:{ all -> 0x019a }
            android.graphics.Bitmap r2 = r6.getBitmap(r8, r2)     // Catch:{ all -> 0x019a }
            android.graphics.Canvas r6 = new android.graphics.Canvas     // Catch:{ all -> 0x019a }
            r6.<init>(r0)     // Catch:{ all -> 0x019a }
            r6.drawBitmap(r2, r14, r14, r5)     // Catch:{ all -> 0x019a }
            r2.recycle()     // Catch:{ all -> 0x019a }
            goto L_0x019e
        L_0x019a:
            r0 = move-exception
            org.telegram.messenger.FileLog.e((java.lang.Throwable) r0)
        L_0x019e:
            org.telegram.messenger.MessageObject r0 = r1.currentMessageObject
            if (r0 == 0) goto L_0x01cf
            long r20 = r15.getStartTime()
            org.telegram.ui.Components.VideoPlayer r0 = r1.videoPlayer
            long r22 = r0.getCurrentPosition()
            r24 = 0
            int r0 = (r20 > r24 ? 1 : (r20 == r24 ? 0 : -1))
            r2 = r10
            if (r0 <= 0) goto L_0x01b4
            goto L_0x01b6
        L_0x01b4:
            r20 = r24
        L_0x01b6:
            long r9 = r22 + r20
            org.telegram.messenger.MessageObject r0 = r1.currentMessageObject
            int r0 = r0.currentAccount
            org.telegram.messenger.FileLoader r0 = org.telegram.messenger.FileLoader.getInstance(r0)
            org.telegram.messenger.MessageObject r6 = r1.currentMessageObject
            org.telegram.tgnet.TLRPC$Document r6 = r6.getDocument()
            boolean r0 = r0.isLoadingVideo(r6, r3)
            r0 = r0 ^ r3
            r15.seekTo(r9, r0)
            goto L_0x01d0
        L_0x01cf:
            r2 = r10
        L_0x01d0:
            org.telegram.messenger.ImageReceiver r0 = r7.imageReceiver
            r0.setAllowStartAnimation(r3)
            org.telegram.messenger.ImageReceiver r0 = r7.imageReceiver
            r0.startAnimation()
            goto L_0x01dc
        L_0x01db:
            r2 = r10
        L_0x01dc:
            boolean r0 = r1.doneButtonPressed
            if (r0 != 0) goto L_0x01e3
            r1.releasePlayer(r3)
        L_0x01e3:
            org.telegram.ui.Components.PhotoViewerWebView r0 = r1.photoViewerWebView
            if (r0 == 0) goto L_0x01f3
            r0.release()
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r1.containerView
            org.telegram.ui.Components.PhotoViewerWebView r6 = r1.photoViewerWebView
            r0.removeView(r6)
            r1.photoViewerWebView = r5
        L_0x01f3:
            org.telegram.ui.Components.PhotoViewerCaptionEnterView r0 = r1.captionEditText
            r0.onDestroy()
            org.telegram.ui.ChatActivity r0 = r1.parentChatActivity
            if (r0 == 0) goto L_0x020b
            android.view.View r0 = r0.getFragmentView()
            if (r0 == 0) goto L_0x020b
            org.telegram.ui.ChatActivity r0 = r1.parentChatActivity
            android.view.View r0 = r0.getFragmentView()
            r0.invalidate()
        L_0x020b:
            r1.parentChatActivity = r5
            r27.removeObservers()
            r1.isActionBarVisible = r4
            android.view.VelocityTracker r0 = r1.velocityTracker
            if (r0 == 0) goto L_0x021b
            r0.recycle()
            r1.velocityTracker = r5
        L_0x021b:
            boolean r0 = r1.isInline
            if (r0 == 0) goto L_0x0238
            r1.isInline = r4
            r1.animationInProgress = r4
            r1.onPhotoClosed(r7)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r1.containerView
            r3 = 1065353216(0x3var_, float:1.0)
            r0.setScaleX(r3)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r1.containerView
            r0.setScaleY(r3)
            r17 = r12
            r26 = r13
            goto L_0x0725
        L_0x0238:
            if (r28 == 0) goto L_0x0664
            org.telegram.ui.Components.ClippingImageView[] r5 = r1.getAnimatingImageViews(r7)
            r0 = 0
        L_0x023f:
            int r8 = r5.length
            if (r0 >= r8) goto L_0x0251
            r8 = r5[r0]
            float[][] r9 = r1.animationValues
            r8.setAnimationValues(r9)
            r8 = r5[r0]
            r8.setVisibility(r4)
            int r0 = r0 + 1
            goto L_0x023f
        L_0x0251:
            r8 = 3
            r1.animationInProgress = r8
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r1.containerView
            r0.invalidate()
            android.animation.AnimatorSet r0 = new android.animation.AnimatorSet
            r0.<init>()
            org.telegram.ui.Components.ClippingImageView r8 = r1.animatingImageView
            android.view.ViewGroup$LayoutParams r8 = r8.getLayoutParams()
            if (r7 == 0) goto L_0x029c
            org.telegram.messenger.ImageReceiver r9 = r7.imageReceiver
            android.graphics.RectF r9 = r9.getDrawRegion()
            float r10 = r9.width()
            int r10 = (int) r10
            r8.width = r10
            float r10 = r9.height()
            int r10 = (int) r10
            r8.height = r10
            org.telegram.messenger.ImageReceiver r10 = r7.imageReceiver
            int r10 = r10.getOrientation()
            org.telegram.messenger.ImageReceiver r6 = r7.imageReceiver
            int r6 = r6.getAnimatedOrientation()
            if (r6 == 0) goto L_0x0289
            r10 = r6
        L_0x0289:
            r6 = 0
        L_0x028a:
            int r14 = r5.length
            if (r6 >= r14) goto L_0x02cc
            r14 = r5[r6]
            r14.setOrientation(r10)
            r14 = r5[r6]
            org.telegram.messenger.ImageReceiver$BitmapHolder r15 = r7.thumb
            r14.setImageBitmap(r15)
            int r6 = r6 + 1
            goto L_0x028a
        L_0x029c:
            org.telegram.messenger.ImageReceiver r6 = r1.centerImage
            float r6 = r6.getImageWidth()
            int r6 = (int) r6
            r8.width = r6
            org.telegram.messenger.ImageReceiver r6 = r1.centerImage
            float r6 = r6.getImageHeight()
            int r6 = (int) r6
            r8.height = r6
            r6 = 0
        L_0x02af:
            int r9 = r5.length
            if (r6 >= r9) goto L_0x02cb
            r9 = r5[r6]
            org.telegram.messenger.ImageReceiver r10 = r1.centerImage
            int r10 = r10.getOrientation()
            r9.setOrientation(r10)
            r9 = r5[r6]
            org.telegram.messenger.ImageReceiver r10 = r1.centerImage
            org.telegram.messenger.ImageReceiver$BitmapHolder r10 = r10.getBitmapSafe()
            r9.setImageBitmap(r10)
            int r6 = r6 + 1
            goto L_0x02af
        L_0x02cb:
            r9 = 0
        L_0x02cc:
            int r6 = r8.width
            r10 = 100
            if (r6 > 0) goto L_0x02d4
            r8.width = r10
        L_0x02d4:
            int r6 = r8.height
            if (r6 > 0) goto L_0x02da
            r8.height = r10
        L_0x02da:
            int r6 = r1.sendPhotoType
            if (r6 != r3) goto L_0x031d
            boolean r6 = r27.isStatusBarVisible()
            if (r6 == 0) goto L_0x02e7
            int r6 = org.telegram.messenger.AndroidUtilities.statusBarHeight
            goto L_0x02e8
        L_0x02e7:
            r6 = 0
        L_0x02e8:
            float r6 = (float) r6
            org.telegram.ui.Components.PhotoCropView r10 = r1.photoCropView
            int r10 = r10.getMeasuredHeight()
            float r10 = (float) r10
            r14 = 1115684864(0x42800000, float:64.0)
            int r14 = org.telegram.messenger.AndroidUtilities.dp(r14)
            float r14 = (float) r14
            float r10 = r10 - r14
            float r10 = r10 - r6
            org.telegram.ui.Components.PhotoCropView r6 = r1.photoCropView
            int r6 = r6.getMeasuredWidth()
            float r6 = (float) r6
            float r6 = java.lang.Math.min(r6, r10)
            r10 = 1098907648(0x41800000, float:16.0)
            int r10 = org.telegram.messenger.AndroidUtilities.dp(r10)
            r14 = 2
            int r10 = r10 * 2
            float r10 = (float) r10
            float r6 = r6 - r10
            int r10 = r8.width
            float r10 = (float) r10
            float r10 = r6 / r10
            int r14 = r8.height
            float r14 = (float) r14
            float r6 = r6 / r14
            float r6 = java.lang.Math.max(r10, r6)
            goto L_0x0340
        L_0x031d:
            android.widget.FrameLayout r6 = r1.windowView
            int r6 = r6.getMeasuredWidth()
            float r6 = (float) r6
            int r10 = r8.width
            float r10 = (float) r10
            float r6 = r6 / r10
            android.graphics.Point r10 = org.telegram.messenger.AndroidUtilities.displaySize
            int r10 = r10.y
            boolean r14 = r27.isStatusBarVisible()
            if (r14 == 0) goto L_0x0335
            int r14 = org.telegram.messenger.AndroidUtilities.statusBarHeight
            goto L_0x0336
        L_0x0335:
            r14 = 0
        L_0x0336:
            int r10 = r10 + r14
            float r10 = (float) r10
            int r14 = r8.height
            float r14 = (float) r14
            float r10 = r10 / r14
            float r6 = java.lang.Math.min(r6, r10)
        L_0x0340:
            int r10 = r8.width
            float r10 = (float) r10
            float r14 = r1.scale
            float r10 = r10 * r14
            float r10 = r10 * r6
            int r15 = r8.height
            float r15 = (float) r15
            float r15 = r15 * r14
            float r15 = r15 * r6
            android.widget.FrameLayout r14 = r1.windowView
            int r14 = r14.getMeasuredWidth()
            float r14 = (float) r14
            float r14 = r14 - r10
            r10 = 1073741824(0x40000000, float:2.0)
            float r14 = r14 / r10
            int r4 = r1.sendPhotoType
            if (r4 != r3) goto L_0x0373
            boolean r4 = r27.isStatusBarVisible()
            if (r4 == 0) goto L_0x0368
            int r4 = org.telegram.messenger.AndroidUtilities.statusBarHeight
            goto L_0x0369
        L_0x0368:
            r4 = 0
        L_0x0369:
            float r4 = (float) r4
            org.telegram.ui.Components.PhotoCropView r3 = r1.photoCropView
            int r3 = r3.getMeasuredHeight()
            float r3 = (float) r3
            float r3 = r3 - r4
            goto L_0x0383
        L_0x0373:
            android.graphics.Point r3 = org.telegram.messenger.AndroidUtilities.displaySize
            int r3 = r3.y
            boolean r4 = r27.isStatusBarVisible()
            if (r4 == 0) goto L_0x0380
            int r4 = org.telegram.messenger.AndroidUtilities.statusBarHeight
            goto L_0x0381
        L_0x0380:
            r4 = 0
        L_0x0381:
            int r3 = r3 + r4
            float r3 = (float) r3
        L_0x0383:
            float r3 = r3 - r15
            float r3 = r3 / r10
            r4 = 0
        L_0x0386:
            int r10 = r5.length
            if (r4 >= r10) goto L_0x03b3
            r10 = r5[r4]
            r10.setLayoutParams(r8)
            r10 = r5[r4]
            float r15 = r1.translationX
            float r15 = r15 + r14
            r10.setTranslationX(r15)
            r10 = r5[r4]
            float r15 = r1.translationY
            float r15 = r15 + r3
            r10.setTranslationY(r15)
            r10 = r5[r4]
            float r15 = r1.scale
            float r15 = r15 * r6
            r10.setScaleX(r15)
            r10 = r5[r4]
            float r15 = r1.scale
            float r15 = r15 * r6
            r10.setScaleY(r15)
            int r4 = r4 + 1
            goto L_0x0386
        L_0x03b3:
            if (r7 == 0) goto L_0x05b1
            org.telegram.messenger.ImageReceiver r3 = r7.imageReceiver
            r4 = 1
            r6 = 0
            r3.setVisible(r6, r4)
            float r3 = r9.left
            org.telegram.messenger.ImageReceiver r4 = r7.imageReceiver
            float r4 = r4.getImageX()
            float r3 = r3 - r4
            float r3 = java.lang.Math.abs(r3)
            int r3 = (int) r3
            float r4 = r9.top
            org.telegram.messenger.ImageReceiver r6 = r7.imageReceiver
            float r6 = r6.getImageY()
            float r4 = r4 - r6
            float r4 = java.lang.Math.abs(r4)
            int r4 = (int) r4
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r6 = r1.pageBlocksAdapter
            if (r6 == 0) goto L_0x03e5
            org.telegram.messenger.ImageReceiver r6 = r7.imageReceiver
            boolean r6 = r6.isAspectFit()
            if (r6 == 0) goto L_0x03e5
            r3 = 0
        L_0x03e5:
            r6 = 2
            int[] r8 = new int[r6]
            android.view.View r6 = r7.parentView
            r6.getLocationInWindow(r8)
            r6 = 1
            r10 = r8[r6]
            int r6 = android.os.Build.VERSION.SDK_INT
            r14 = 21
            if (r6 < r14) goto L_0x03f8
            r14 = 0
            goto L_0x03fa
        L_0x03f8:
            int r14 = org.telegram.messenger.AndroidUtilities.statusBarHeight
        L_0x03fa:
            int r10 = r10 - r14
            float r10 = (float) r10
            int r14 = r7.viewY
            float r15 = (float) r14
            r26 = r13
            float r13 = r9.top
            float r15 = r15 + r13
            float r10 = r10 - r15
            int r15 = r7.clipTopAddition
            float r15 = (float) r15
            float r10 = r10 + r15
            int r10 = (int) r10
            if (r10 >= 0) goto L_0x040d
            r10 = 0
        L_0x040d:
            float r14 = (float) r14
            float r14 = r14 + r13
            float r15 = r9.bottom
            float r15 = r15 - r13
            float r14 = r14 + r15
            r13 = 1
            r8 = r8[r13]
            android.view.View r13 = r7.parentView
            int r13 = r13.getHeight()
            int r8 = r8 + r13
            r13 = 21
            if (r6 < r13) goto L_0x0423
            r6 = 0
            goto L_0x0425
        L_0x0423:
            int r6 = org.telegram.messenger.AndroidUtilities.statusBarHeight
        L_0x0425:
            int r8 = r8 - r6
            float r6 = (float) r8
            float r14 = r14 - r6
            int r6 = r7.clipBottomAddition
            float r6 = (float) r6
            float r14 = r14 + r6
            int r6 = (int) r14
            if (r6 >= 0) goto L_0x0430
            r6 = 0
        L_0x0430:
            int r8 = java.lang.Math.max(r10, r4)
            int r6 = java.lang.Math.max(r6, r4)
            float[][] r10 = r1.animationValues
            r13 = 0
            r10 = r10[r13]
            org.telegram.ui.Components.ClippingImageView r14 = r1.animatingImageView
            float r14 = r14.getScaleX()
            r10[r13] = r14
            float[][] r10 = r1.animationValues
            r10 = r10[r13]
            org.telegram.ui.Components.ClippingImageView r14 = r1.animatingImageView
            float r14 = r14.getScaleY()
            r15 = 1
            r10[r15] = r14
            float[][] r10 = r1.animationValues
            r10 = r10[r13]
            org.telegram.ui.Components.ClippingImageView r14 = r1.animatingImageView
            float r14 = r14.getTranslationX()
            r15 = 2
            r10[r15] = r14
            float[][] r10 = r1.animationValues
            r10 = r10[r13]
            org.telegram.ui.Components.ClippingImageView r14 = r1.animatingImageView
            float r14 = r14.getTranslationY()
            r15 = 3
            r10[r15] = r14
            float[][] r10 = r1.animationValues
            r14 = r10[r13]
            r15 = 4
            r17 = 0
            r14[r15] = r17
            r14 = r10[r13]
            r15 = 5
            r14[r15] = r17
            r14 = r10[r13]
            r15 = 6
            r14[r15] = r17
            r14 = r10[r13]
            r15 = 7
            r14[r15] = r17
            r14 = r10[r13]
            r15 = 8
            r14[r15] = r17
            r14 = r10[r13]
            r15 = 9
            r14[r15] = r17
            r14 = r10[r13]
            r15 = 10
            r14[r15] = r17
            r14 = r10[r13]
            r15 = 11
            r14[r15] = r17
            r14 = r10[r13]
            r16 = 12
            r14[r16] = r17
            r14 = 1
            r17 = r10[r14]
            float r15 = r7.scale
            r17[r13] = r15
            r13 = r10[r14]
            r13[r14] = r15
            r13 = r10[r14]
            int r14 = r7.viewX
            float r14 = (float) r14
            r17 = r12
            float r12 = r9.left
            float r12 = r12 * r15
            float r14 = r14 + r12
            r12 = 2
            r13[r12] = r14
            r12 = 1
            r13 = r10[r12]
            int r14 = r7.viewY
            float r14 = (float) r14
            float r9 = r9.top
            float r9 = r9 * r15
            float r14 = r14 + r9
            r9 = 3
            r13[r9] = r14
            r9 = r10[r12]
            float r3 = (float) r3
            float r13 = r3 * r15
            r14 = 4
            r9[r14] = r13
            r9 = r10[r12]
            float r8 = (float) r8
            float r8 = r8 * r15
            r13 = 5
            r9[r13] = r8
            r8 = r10[r12]
            float r6 = (float) r6
            float r6 = r6 * r15
            r9 = 6
            r8[r9] = r6
            r6 = 0
        L_0x04e3:
            if (r6 >= r14) goto L_0x04fb
            float[][] r8 = r1.animationValues
            r8 = r8[r12]
            int r9 = r6 + 7
            int[] r10 = r7.radius
            if (r10 == 0) goto L_0x04f3
            r10 = r10[r6]
            float r10 = (float) r10
            goto L_0x04f4
        L_0x04f3:
            r10 = 0
        L_0x04f4:
            r8[r9] = r10
            int r6 = r6 + 1
            r12 = 1
            r14 = 4
            goto L_0x04e3
        L_0x04fb:
            float[][] r6 = r1.animationValues
            r8 = 1
            r9 = r6[r8]
            float r4 = (float) r4
            float r10 = r7.scale
            float r4 = r4 * r10
            r12 = 11
            r9[r12] = r4
            r4 = r6[r8]
            float r3 = r3 * r10
            r4[r16] = r3
            java.util.ArrayList r3 = new java.util.ArrayList
            int r4 = r1.sendPhotoType
            if (r4 != r8) goto L_0x0518
            r19 = 3
            goto L_0x051a
        L_0x0518:
            r19 = 2
        L_0x051a:
            int r4 = r5.length
            int r19 = r19 + r4
            int r4 = r5.length
            if (r4 <= r8) goto L_0x0522
            r4 = 1
            goto L_0x0523
        L_0x0522:
            r4 = 0
        L_0x0523:
            int r4 = r19 + r4
            r3.<init>(r4)
            r4 = 0
        L_0x0529:
            int r6 = r5.length
            if (r4 >= r6) goto L_0x054a
            r6 = r5[r4]
            android.util.Property<org.telegram.ui.Components.ClippingImageView, java.lang.Float> r8 = org.telegram.ui.Components.AnimationProperties.CLIPPING_IMAGE_VIEW_PROGRESS
            r9 = 2
            float[] r10 = new float[r9]
            r10 = {0, NUM} // fill-array
            android.animation.ObjectAnimator r6 = android.animation.ObjectAnimator.ofFloat(r6, r8, r10)
            if (r4 != 0) goto L_0x0544
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda1 r8 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda1
            r8.<init>(r1)
            r6.addUpdateListener(r8)
        L_0x0544:
            r3.add(r6)
            int r4 = r4 + 1
            goto L_0x0529
        L_0x054a:
            int r4 = r5.length
            r6 = 1
            if (r4 <= r6) goto L_0x056a
            org.telegram.ui.Components.ClippingImageView r4 = r1.animatingImageView
            android.util.Property r8 = android.view.View.ALPHA
            float[] r9 = new float[r6]
            r10 = 0
            r12 = 0
            r9[r12] = r10
            android.animation.ObjectAnimator r4 = android.animation.ObjectAnimator.ofFloat(r4, r8, r9)
            r3.add(r4)
            r4 = r5[r6]
            int r5 = r27.getLeftInset()
            int r5 = -r5
            float r5 = (float) r5
            r4.setAdditionalTranslationX(r5)
        L_0x056a:
            org.telegram.ui.PhotoViewer$BackgroundDrawable r4 = r1.backgroundDrawable
            android.util.Property<android.graphics.drawable.ColorDrawable, java.lang.Integer> r5 = org.telegram.ui.Components.AnimationProperties.COLOR_DRAWABLE_ALPHA
            int[] r8 = new int[r6]
            r9 = 0
            r8[r9] = r9
            android.animation.ObjectAnimator r4 = android.animation.ObjectAnimator.ofInt(r4, r5, r8)
            r3.add(r4)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r4 = r1.containerView
            android.util.Property r5 = android.view.View.ALPHA
            float[] r8 = new float[r6]
            r10 = 0
            r8[r9] = r10
            android.animation.ObjectAnimator r4 = android.animation.ObjectAnimator.ofFloat(r4, r5, r8)
            r3.add(r4)
            android.view.View r4 = r1.navigationBar
            android.util.Property r5 = android.view.View.ALPHA
            float[] r8 = new float[r6]
            r8[r9] = r10
            android.animation.ObjectAnimator r4 = android.animation.ObjectAnimator.ofFloat(r4, r5, r8)
            r3.add(r4)
            int r4 = r1.sendPhotoType
            if (r4 != r6) goto L_0x05ac
            org.telegram.ui.Components.PhotoCropView r4 = r1.photoCropView
            android.util.Property r5 = android.view.View.ALPHA
            float[] r6 = new float[r6]
            r6[r9] = r10
            android.animation.ObjectAnimator r4 = android.animation.ObjectAnimator.ofFloat(r4, r5, r6)
            r3.add(r4)
        L_0x05ac:
            r0.playTogether(r3)
            goto L_0x0637
        L_0x05b1:
            r17 = r12
            r26 = r13
            android.graphics.Point r3 = org.telegram.messenger.AndroidUtilities.displaySize
            int r3 = r3.y
            boolean r4 = r27.isStatusBarVisible()
            if (r4 == 0) goto L_0x05c2
            int r4 = org.telegram.messenger.AndroidUtilities.statusBarHeight
            goto L_0x05c3
        L_0x05c2:
            r4 = 0
        L_0x05c3:
            int r3 = r3 + r4
            r4 = 2
            float[] r5 = new float[r4]
            r5 = {0, NUM} // fill-array
            android.animation.ValueAnimator r4 = android.animation.ValueAnimator.ofFloat(r5)
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda6 r5 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda6
            r5.<init>(r1)
            r4.addUpdateListener(r5)
            r5 = 6
            android.animation.Animator[] r5 = new android.animation.Animator[r5]
            r6 = 0
            r5[r6] = r4
            org.telegram.ui.PhotoViewer$BackgroundDrawable r4 = r1.backgroundDrawable
            android.util.Property<android.graphics.drawable.ColorDrawable, java.lang.Integer> r8 = org.telegram.ui.Components.AnimationProperties.COLOR_DRAWABLE_ALPHA
            r9 = 1
            int[] r10 = new int[r9]
            r10[r6] = r6
            android.animation.ObjectAnimator r4 = android.animation.ObjectAnimator.ofInt(r4, r8, r10)
            r5[r9] = r4
            org.telegram.ui.Components.ClippingImageView r4 = r1.animatingImageView
            android.util.Property r8 = android.view.View.ALPHA
            float[] r10 = new float[r9]
            r12 = 0
            r10[r6] = r12
            android.animation.ObjectAnimator r4 = android.animation.ObjectAnimator.ofFloat(r4, r8, r10)
            r6 = 2
            r5[r6] = r4
            org.telegram.ui.Components.ClippingImageView r4 = r1.animatingImageView
            android.util.Property r6 = android.view.View.TRANSLATION_Y
            float[] r8 = new float[r9]
            float r9 = r1.translationY
            int r9 = (r9 > r12 ? 1 : (r9 == r12 ? 0 : -1))
            if (r9 < 0) goto L_0x0608
            goto L_0x0609
        L_0x0608:
            int r3 = -r3
        L_0x0609:
            float r3 = (float) r3
            r9 = 0
            r8[r9] = r3
            android.animation.ObjectAnimator r3 = android.animation.ObjectAnimator.ofFloat(r4, r6, r8)
            r4 = 3
            r5[r4] = r3
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r1.containerView
            android.util.Property r4 = android.view.View.ALPHA
            r6 = 1
            float[] r8 = new float[r6]
            r10 = 0
            r8[r9] = r10
            android.animation.ObjectAnimator r3 = android.animation.ObjectAnimator.ofFloat(r3, r4, r8)
            r4 = 4
            r5[r4] = r3
            android.view.View r3 = r1.navigationBar
            android.util.Property r4 = android.view.View.ALPHA
            float[] r6 = new float[r6]
            r6[r9] = r10
            android.animation.ObjectAnimator r3 = android.animation.ObjectAnimator.ofFloat(r3, r4, r6)
            r4 = 5
            r5[r4] = r3
            r0.playTogether(r5)
        L_0x0637:
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda70 r3 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda70
            r3.<init>(r1, r7)
            r1.animationEndRunnable = r3
            r3 = 200(0xc8, double:9.9E-322)
            r0.setDuration(r3)
            org.telegram.ui.PhotoViewer$72 r3 = new org.telegram.ui.PhotoViewer$72
            r3.<init>()
            r0.addListener(r3)
            long r3 = java.lang.System.currentTimeMillis()
            r1.transitionAnimationStartTime = r3
            int r3 = android.os.Build.VERSION.SDK_INT
            r4 = 18
            if (r3 < r4) goto L_0x065e
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r1.containerView
            r4 = 0
            r5 = 2
            r3.setLayerType(r5, r4)
        L_0x065e:
            r0.start()
            r4 = 0
            goto L_0x0706
        L_0x0664:
            r17 = r12
            r26 = r13
            r5 = 2
            android.animation.AnimatorSet r0 = new android.animation.AnimatorSet
            r0.<init>()
            float[] r3 = new float[r5]
            r3 = {0, NUM} // fill-array
            android.animation.ValueAnimator r3 = android.animation.ValueAnimator.ofFloat(r3)
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda3 r4 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda3
            r4.<init>(r1)
            r3.addUpdateListener(r4)
            r4 = 6
            android.animation.Animator[] r4 = new android.animation.Animator[r4]
            r5 = 0
            r4[r5] = r3
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r1.containerView
            android.util.Property r6 = android.view.View.SCALE_X
            r8 = 1
            float[] r9 = new float[r8]
            r10 = 1063675494(0x3var_, float:0.9)
            r9[r5] = r10
            android.animation.ObjectAnimator r3 = android.animation.ObjectAnimator.ofFloat(r3, r6, r9)
            r4[r8] = r3
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r1.containerView
            android.util.Property r6 = android.view.View.SCALE_Y
            float[] r9 = new float[r8]
            r9[r5] = r10
            android.animation.ObjectAnimator r3 = android.animation.ObjectAnimator.ofFloat(r3, r6, r9)
            r6 = 2
            r4[r6] = r3
            org.telegram.ui.PhotoViewer$BackgroundDrawable r3 = r1.backgroundDrawable
            android.util.Property<android.graphics.drawable.ColorDrawable, java.lang.Integer> r6 = org.telegram.ui.Components.AnimationProperties.COLOR_DRAWABLE_ALPHA
            int[] r9 = new int[r8]
            r9[r5] = r5
            android.animation.ObjectAnimator r3 = android.animation.ObjectAnimator.ofInt(r3, r6, r9)
            r6 = 3
            r4[r6] = r3
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r1.containerView
            android.util.Property r6 = android.view.View.ALPHA
            float[] r9 = new float[r8]
            r10 = 0
            r9[r5] = r10
            android.animation.ObjectAnimator r3 = android.animation.ObjectAnimator.ofFloat(r3, r6, r9)
            r6 = 4
            r4[r6] = r3
            android.view.View r3 = r1.navigationBar
            android.util.Property r6 = android.view.View.ALPHA
            float[] r8 = new float[r8]
            r8[r5] = r10
            android.animation.ObjectAnimator r3 = android.animation.ObjectAnimator.ofFloat(r3, r6, r8)
            r5 = 5
            r4[r5] = r3
            r0.playTogether(r4)
            r3 = 2
            r1.animationInProgress = r3
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda69 r3 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda69
            r3.<init>(r1, r7)
            r1.animationEndRunnable = r3
            r3 = 200(0xc8, double:9.9E-322)
            r0.setDuration(r3)
            org.telegram.ui.PhotoViewer$73 r3 = new org.telegram.ui.PhotoViewer$73
            r3.<init>()
            r0.addListener(r3)
            long r3 = java.lang.System.currentTimeMillis()
            r1.transitionAnimationStartTime = r3
            int r3 = android.os.Build.VERSION.SDK_INT
            r4 = 18
            if (r3 < r4) goto L_0x0702
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r1.containerView
            r4 = 0
            r5 = 2
            r3.setLayerType(r5, r4)
            goto L_0x0703
        L_0x0702:
            r4 = 0
        L_0x0703:
            r0.start()
        L_0x0706:
            org.telegram.ui.Components.AnimatedFileDrawable r0 = r1.currentAnimation
            if (r0 == 0) goto L_0x0716
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r1.containerView
            r0.removeSecondParentView(r3)
            r1.currentAnimation = r4
            org.telegram.messenger.ImageReceiver r0 = r1.centerImage
            r0.setImageBitmap((android.graphics.drawable.Drawable) r4)
        L_0x0716:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r0 = r1.placeProvider
            if (r0 == 0) goto L_0x0725
            boolean r0 = r0.canScrollAway()
            if (r0 != 0) goto L_0x0725
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r0 = r1.placeProvider
            r0.cancelButtonPressed()
        L_0x0725:
            org.telegram.ui.ActionBar.BaseFragment r0 = r1.parentFragment
            if (r0 == 0) goto L_0x074d
            android.view.View r0 = r0.getFragmentView()
            if (r0 == 0) goto L_0x074d
            org.telegram.ui.ActionBar.BaseFragment r0 = r1.parentFragment
            android.view.View r0 = r0.getFragmentView()
            r0.setScaleX(r2)
            r0.setScaleY(r11)
            org.telegram.ui.Components.ChatAttachAlert r0 = r1.parentAlert
            if (r0 == 0) goto L_0x074d
            android.widget.FrameLayout r0 = r0.getContainer()
            r9 = r17
            r0.setScaleX(r9)
            r9 = r26
            r0.setScaleY(r9)
        L_0x074d:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.closePhoto(boolean, boolean):void");
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$closePhoto$73(ValueAnimator valueAnimator) {
        this.clippingImageProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$closePhoto$74(ValueAnimator valueAnimator) {
        this.clippingImageProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$closePhoto$75(PlaceProviderObject placeProviderObject) {
        this.animationEndRunnable = null;
        if (Build.VERSION.SDK_INT >= 18) {
            this.containerView.setLayerType(0, (Paint) null);
        }
        this.animationInProgress = 0;
        onPhotoClosed(placeProviderObject);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$closePhoto$76(ValueAnimator valueAnimator) {
        this.clippingImageProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$closePhoto$77(PlaceProviderObject placeProviderObject) {
        this.animationEndRunnable = null;
        FrameLayoutDrawer frameLayoutDrawer = this.containerView;
        if (frameLayoutDrawer != null) {
            if (Build.VERSION.SDK_INT >= 18) {
                frameLayoutDrawer.setLayerType(0, (Paint) null);
            }
            this.animationInProgress = 0;
            onPhotoClosed(placeProviderObject);
            this.containerView.setScaleX(1.0f);
            this.containerView.setScaleY(1.0f);
        }
    }

    private ClippingImageView[] getAnimatingImageViews(PlaceProviderObject placeProviderObject) {
        int i = (AndroidUtilities.isTablet() || placeProviderObject == null || placeProviderObject.animatingImageView == null) ? 0 : 1;
        ClippingImageView[] clippingImageViewArr = new ClippingImageView[(i + 1)];
        clippingImageViewArr[0] = this.animatingImageView;
        if (i != 0) {
            ClippingImageView clippingImageView = placeProviderObject.animatingImageView;
            clippingImageViewArr[1] = clippingImageView;
            clippingImageView.setAdditionalTranslationY((float) placeProviderObject.animatingImageViewYOffset);
        }
        return clippingImageViewArr;
    }

    private void removeObservers() {
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.fileLoadFailed);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.fileLoaded);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.fileLoadProgressChanged);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.mediaCountDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.mediaDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.dialogPhotosLoaded);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagesDeleted);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.emojiLoaded);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.filePreparingFailed);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.fileNewChunkAvailable);
        ConnectionsManager.getInstance(this.currentAccount).cancelRequestsForGuid(this.classGuid);
    }

    public void destroyPhotoViewer() {
        if (this.parentActivity != null && this.windowView != null) {
            if (PipVideoOverlay.isVisible()) {
                PipVideoOverlay.dismiss();
            }
            removeObservers();
            releasePlayer(false);
            try {
                if (this.windowView.getParent() != null) {
                    ((WindowManager) this.parentActivity.getSystemService("window")).removeViewImmediate(this.windowView);
                    onHideView();
                }
                this.windowView = null;
            } catch (Exception e) {
                FileLog.e((Throwable) e);
            }
            ImageReceiver.BitmapHolder bitmapHolder = this.currentThumb;
            if (bitmapHolder != null) {
                bitmapHolder.release();
                this.currentThumb = null;
            }
            this.animatingImageView.setImageBitmap((ImageReceiver.BitmapHolder) null);
            PhotoViewerCaptionEnterView photoViewerCaptionEnterView = this.captionEditText;
            if (photoViewerCaptionEnterView != null) {
                photoViewerCaptionEnterView.onDestroy();
            }
            if (this == PipInstance) {
                PipInstance = null;
            } else {
                Instance = null;
            }
            onHideView();
        }
    }

    private void onPhotoClosed(PlaceProviderObject placeProviderObject) {
        if (this.doneButtonPressed) {
            releasePlayer(true);
        }
        this.isVisible = false;
        this.cropInitied = false;
        this.disableShowCheck = true;
        this.currentMessageObject = null;
        this.currentBotInlineResult = null;
        this.currentFileLocation = null;
        this.currentFileLocationVideo = null;
        this.currentSecureDocument = null;
        this.currentPageBlock = null;
        this.currentPathObject = null;
        if (this.videoPlayerControlFrameLayout != null) {
            setVideoPlayerControlVisible(false, false);
        }
        CaptionScrollView captionScrollView2 = this.captionScrollView;
        if (captionScrollView2 != null) {
            captionScrollView2.reset();
        }
        this.sendPhotoType = 0;
        this.isDocumentsPicker = false;
        ImageReceiver.BitmapHolder bitmapHolder = this.currentThumb;
        if (bitmapHolder != null) {
            bitmapHolder.release();
            this.currentThumb = null;
        }
        this.parentAlert = null;
        AnimatedFileDrawable animatedFileDrawable = this.currentAnimation;
        if (animatedFileDrawable != null) {
            animatedFileDrawable.removeSecondParentView(this.containerView);
            this.currentAnimation = null;
        }
        for (int i = 0; i < 3; i++) {
            PhotoProgressView[] photoProgressViewArr = this.photoProgressViews;
            if (photoProgressViewArr[i] != null) {
                photoProgressViewArr[i].setBackgroundState(-1, false, true);
            }
        }
        requestVideoPreview(0);
        VideoTimelinePlayView videoTimelinePlayView = this.videoTimelineView;
        if (videoTimelinePlayView != null) {
            videoTimelinePlayView.setBackgroundColor(NUM);
            this.videoTimelineView.destroy();
        }
        this.hintView.hide(false, 0);
        this.centerImage.setImageBitmap((Bitmap) null);
        this.leftImage.setImageBitmap((Bitmap) null);
        this.rightImage.setImageBitmap((Bitmap) null);
        this.containerView.post(new PhotoViewer$$ExternalSyntheticLambda68(this, placeProviderObject));
        PhotoViewerProvider photoViewerProvider = this.placeProvider;
        if (photoViewerProvider != null) {
            photoViewerProvider.willHidePhotoViewer();
        }
        this.groupedPhotosListView.clear();
        PhotoViewerProvider photoViewerProvider2 = this.placeProvider;
        if (photoViewerProvider2 != null) {
            photoViewerProvider2.onClose();
        }
        this.placeProvider = null;
        this.selectedPhotosAdapter.notifyDataSetChanged();
        this.pageBlocksAdapter = null;
        this.disableShowCheck = false;
        this.shownControlsByEnd = false;
        this.videoCutStart = 0.0f;
        this.videoCutEnd = 1.0f;
        if (placeProviderObject != null) {
            placeProviderObject.imageReceiver.setVisible(true, true);
        }
        ChatActivity chatActivity = this.parentChatActivity;
        if (chatActivity != null) {
            chatActivity.getFragmentView().invalidate();
        }
        Bitmap bitmap = this.videoFrameBitmap;
        if (bitmap != null) {
            bitmap.recycle();
            this.videoFrameBitmap = null;
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$onPhotoClosed$78(PlaceProviderObject placeProviderObject) {
        ClippingImageView clippingImageView;
        this.animatingImageView.setImageBitmap((ImageReceiver.BitmapHolder) null);
        if (!(placeProviderObject == null || AndroidUtilities.isTablet() || (clippingImageView = placeProviderObject.animatingImageView) == null)) {
            clippingImageView.setImageBitmap((ImageReceiver.BitmapHolder) null);
        }
        try {
            if (this.windowView.getParent() != null) {
                ((WindowManager) this.parentActivity.getSystemService("window")).removeView(this.windowView);
                onHideView();
            }
        } catch (Exception e) {
            FileLog.e((Throwable) e);
        }
    }

    private void redraw(int i) {
        FrameLayoutDrawer frameLayoutDrawer;
        if (i < 6 && (frameLayoutDrawer = this.containerView) != null) {
            frameLayoutDrawer.invalidate();
            AndroidUtilities.runOnUIThread(new PhotoViewer$$ExternalSyntheticLambda61(this, i), 100);
        }
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$redraw$79(int i) {
        redraw(i + 1);
    }

    public void onResume() {
        redraw(0);
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null) {
            videoPlayer2.seekTo(videoPlayer2.getCurrentPosition() + 1);
            if (this.playerLooping) {
                this.videoPlayer.setLooping(true);
            }
        }
        PhotoPaintView photoPaintView2 = this.photoPaintView;
        if (photoPaintView2 != null) {
            photoPaintView2.onResume();
        }
    }

    public void onPause() {
        if (this.currentAnimation != null) {
            closePhoto(false, false);
            return;
        }
        if (this.lastTitle != null) {
            closeCaptionEnter(true);
        }
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null && this.playerLooping) {
            videoPlayer2.setLooping(false);
        }
    }

    public boolean isVisible() {
        return this.isVisible && this.placeProvider != null;
    }

    /* access modifiers changed from: private */
    public void updateMinMax(float f) {
        AspectRatioFrameLayout aspectRatioFrameLayout2 = this.aspectRatioFrameLayout;
        if (aspectRatioFrameLayout2 != null && aspectRatioFrameLayout2.getVisibility() == 0 && this.textureUploaded) {
            f *= Math.min(((float) getContainerViewWidth()) / ((float) this.videoTextureView.getMeasuredWidth()), ((float) getContainerViewHeight()) / ((float) this.videoTextureView.getMeasuredHeight()));
        }
        float imageWidth = this.centerImage.getImageWidth();
        float imageHeight = this.centerImage.getImageHeight();
        MediaController.CropState cropState = this.editState.cropState;
        if (cropState != null) {
            imageWidth *= cropState.cropPw;
            imageHeight *= cropState.cropPh;
        }
        int containerViewWidth = ((int) ((imageWidth * f) - ((float) getContainerViewWidth()))) / 2;
        int containerViewHeight = ((int) ((imageHeight * f) - ((float) getContainerViewHeight()))) / 2;
        if (containerViewWidth > 0) {
            this.minX = (float) (-containerViewWidth);
            this.maxX = (float) containerViewWidth;
        } else {
            this.maxX = 0.0f;
            this.minX = 0.0f;
        }
        if (containerViewHeight > 0) {
            this.minY = (float) (-containerViewHeight);
            this.maxY = (float) containerViewHeight;
            return;
        }
        this.maxY = 0.0f;
        this.minY = 0.0f;
    }

    private int getAdditionX() {
        int i = this.currentEditMode;
        if (i == 1 || (i == 0 && this.sendPhotoType == 1)) {
            return AndroidUtilities.dp(16.0f);
        }
        if (i == 0 || i == 3) {
            return 0;
        }
        return AndroidUtilities.dp(14.0f);
    }

    private int getAdditionY() {
        int i = this.currentEditMode;
        int i2 = 0;
        if (i == 1 || (i == 0 && this.sendPhotoType == 1)) {
            int dp = AndroidUtilities.dp(16.0f);
            if (isStatusBarVisible()) {
                i2 = AndroidUtilities.statusBarHeight;
            }
            return dp + i2;
        } else if (i == 3) {
            int dp2 = AndroidUtilities.dp(8.0f);
            if (isStatusBarVisible()) {
                i2 = AndroidUtilities.statusBarHeight;
            }
            return dp2 + i2;
        } else if (i == 0) {
            return 0;
        } else {
            int dp3 = AndroidUtilities.dp(14.0f);
            if (isStatusBarVisible()) {
                i2 = AndroidUtilities.statusBarHeight;
            }
            return dp3 + i2;
        }
    }

    /* access modifiers changed from: private */
    public int getContainerViewWidth() {
        return getContainerViewWidth(this.currentEditMode);
    }

    /* access modifiers changed from: private */
    public int getContainerViewWidth(int i) {
        int i2;
        int width = this.containerView.getWidth();
        if (i == 1 || (i == 0 && this.sendPhotoType == 1)) {
            i2 = AndroidUtilities.dp(32.0f);
        } else if (i == 0 || i == 3) {
            return width;
        } else {
            i2 = AndroidUtilities.dp(28.0f);
        }
        return width - i2;
    }

    /* access modifiers changed from: private */
    public int getContainerViewHeight() {
        return getContainerViewHeight(this.currentEditMode);
    }

    /* access modifiers changed from: private */
    public int getContainerViewHeight(int i) {
        return getContainerViewHeight(false, i);
    }

    private int getContainerViewHeight(boolean z, int i) {
        int i2;
        int i3;
        if (z || this.inBubbleMode) {
            i2 = this.containerView.getMeasuredHeight();
        } else {
            i2 = AndroidUtilities.displaySize.y;
            if (i == 0 && this.sendPhotoType != 1 && isStatusBarVisible()) {
                i2 += AndroidUtilities.statusBarHeight;
            }
        }
        if ((i == 0 && this.sendPhotoType == 1) || i == 1) {
            i3 = AndroidUtilities.dp(144.0f);
        } else if (i == 2) {
            i3 = AndroidUtilities.dp(214.0f);
        } else if (i != 3) {
            return i2;
        } else {
            i3 = AndroidUtilities.dp(48.0f) + ActionBar.getCurrentActionBarHeight();
        }
        return i2 - i3;
    }

    /* access modifiers changed from: private */
    /* JADX WARNING: Code restructure failed: missing block: B:209:0x0428, code lost:
        if (r1 > r4) goto L_0x0422;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:214:0x0437, code lost:
        if (r2 > r4) goto L_0x0431;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:222:0x045c, code lost:
        if (r3 > r4) goto L_0x0456;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:227:0x046d, code lost:
        if (r3 > r4) goto L_0x0467;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:276:0x054c, code lost:
        if (r3 > r4) goto L_0x0546;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:281:0x055d, code lost:
        if (r3 > r4) goto L_0x0557;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public boolean onTouchEvent(android.view.MotionEvent r20) {
        /*
            r19 = this;
            r0 = r19
            r1 = r20
            int r2 = r0.currentEditMode
            r3 = 5
            r4 = 0
            r6 = 3
            r7 = 2
            r8 = 1
            if (r2 != r6) goto L_0x002b
            long r9 = r0.animationStartTime
            int r2 = (r9 > r4 ? 1 : (r9 == r4 ? 0 : -1))
            if (r2 == 0) goto L_0x002b
            int r2 = r20.getActionMasked()
            if (r2 == 0) goto L_0x0020
            int r2 = r20.getActionMasked()
            if (r2 != r3) goto L_0x002b
        L_0x0020:
            int r2 = r20.getPointerCount()
            if (r2 < r7) goto L_0x002a
            r19.cancelMoveZoomAnimation()
            goto L_0x002b
        L_0x002a:
            return r8
        L_0x002b:
            int r2 = r0.animationInProgress
            r9 = 0
            if (r2 != 0) goto L_0x0685
            long r10 = r0.animationStartTime
            int r2 = (r10 > r4 ? 1 : (r10 == r4 ? 0 : -1))
            if (r2 == 0) goto L_0x0038
            goto L_0x0685
        L_0x0038:
            org.telegram.messenger.video.VideoPlayerRewinder r2 = r0.videoPlayerRewinder
            int r2 = r2.rewindCount
            if (r2 <= 0) goto L_0x0052
            int r2 = r20.getAction()
            if (r2 == r8) goto L_0x004c
            int r1 = r20.getAction()
            if (r1 != r6) goto L_0x004b
            goto L_0x004c
        L_0x004b:
            return r8
        L_0x004c:
            org.telegram.messenger.video.VideoPlayerRewinder r1 = r0.videoPlayerRewinder
            r1.cancelRewind()
            return r9
        L_0x0052:
            int r2 = r0.currentEditMode
            if (r2 != r7) goto L_0x005c
            org.telegram.ui.Components.PhotoFilterView r2 = r0.photoFilterView
            r2.onTouch(r1)
            return r8
        L_0x005c:
            if (r2 == r8) goto L_0x0684
            if (r2 == r6) goto L_0x0066
            int r2 = r0.sendPhotoType
            if (r2 != r8) goto L_0x0066
            goto L_0x0684
        L_0x0066:
            org.telegram.ui.Components.PhotoViewerCaptionEnterView r2 = r0.captionEditText
            boolean r2 = r2.isPopupShowing()
            if (r2 != 0) goto L_0x067b
            org.telegram.ui.Components.PhotoViewerCaptionEnterView r2 = r0.captionEditText
            boolean r2 = r2.isKeyboardVisible()
            if (r2 == 0) goto L_0x0078
            goto L_0x067b
        L_0x0078:
            int r2 = r0.currentEditMode
            if (r2 != 0) goto L_0x009c
            int r2 = r0.sendPhotoType
            if (r2 == r8) goto L_0x009c
            int r2 = r20.getPointerCount()
            if (r2 != r8) goto L_0x009c
            org.telegram.ui.Components.GestureDetector2 r2 = r0.gestureDetector
            boolean r2 = r2.onTouchEvent(r1)
            if (r2 == 0) goto L_0x009c
            boolean r2 = r0.doubleTap
            if (r2 == 0) goto L_0x009c
            r0.doubleTap = r9
            r0.moving = r9
            r0.zooming = r9
            r0.checkMinMax(r9)
            return r8
        L_0x009c:
            org.telegram.ui.Components.Tooltip r2 = r0.tooltip
            if (r2 == 0) goto L_0x00a3
            r2.hide()
        L_0x00a3:
            int r2 = r20.getActionMasked()
            r10 = 1073741824(0x40000000, float:2.0)
            if (r2 == 0) goto L_0x0567
            int r2 = r20.getActionMasked()
            if (r2 != r3) goto L_0x00b3
            goto L_0x0567
        L_0x00b3:
            int r2 = r20.getActionMasked()
            r3 = 1077936128(0x40400000, float:3.0)
            r11 = 1065353216(0x3var_, float:1.0)
            r12 = 0
            if (r2 != r7) goto L_0x0384
            boolean r2 = r0.canZoom
            if (r2 == 0) goto L_0x01c3
            int r2 = r20.getPointerCount()
            if (r2 != r7) goto L_0x01c3
            boolean r2 = r0.draggingDown
            if (r2 != 0) goto L_0x01c3
            boolean r2 = r0.zooming
            if (r2 == 0) goto L_0x01c3
            boolean r2 = r0.changingPage
            if (r2 != 0) goto L_0x01c3
            r0.discardTap = r8
            int r2 = r0.currentEditMode
            if (r2 != r6) goto L_0x0158
            float r2 = r1.getX(r9)
            float r4 = r1.getX(r8)
            float r2 = r2 + r4
            float r2 = r2 / r10
            float r4 = r1.getY(r9)
            float r5 = r1.getY(r8)
            float r4 = r4 + r5
            float r4 = r4 / r10
            float r5 = r0.moveStartX
            float r5 = r5 - r2
            float r6 = r0.moveStartY
            float r6 = r6 - r4
            r0.moveStartX = r2
            r0.moveStartY = r4
            float r10 = r0.translationX
            float r11 = r0.minX
            int r11 = (r10 > r11 ? 1 : (r10 == r11 ? 0 : -1))
            if (r11 < 0) goto L_0x0106
            float r11 = r0.maxX
            int r10 = (r10 > r11 ? 1 : (r10 == r11 ? 0 : -1))
            if (r10 <= 0) goto L_0x0107
        L_0x0106:
            float r5 = r5 / r3
        L_0x0107:
            float r10 = r0.translationY
            float r11 = r0.minY
            int r11 = (r10 > r11 ? 1 : (r10 == r11 ? 0 : -1))
            if (r11 < 0) goto L_0x0115
            float r11 = r0.maxY
            int r10 = (r10 > r11 ? 1 : (r10 == r11 ? 0 : -1))
            if (r10 <= 0) goto L_0x0116
        L_0x0115:
            float r6 = r6 / r3
        L_0x0116:
            float r3 = r0.pinchCenterX
            int r10 = r19.getContainerViewWidth()
            int r10 = r10 / r7
            float r10 = (float) r10
            float r3 = r3 - r10
            float r10 = r0.pinchCenterX
            int r11 = r19.getContainerViewWidth()
            int r11 = r11 / r7
            float r11 = (float) r11
            float r10 = r10 - r11
            float r11 = r0.translationX
            float r10 = r10 - r11
            float r11 = r0.scale
            float r12 = r0.pinchStartScale
            float r11 = r11 / r12
            float r10 = r10 / r11
            float r3 = r3 - r10
            float r3 = r3 - r5
            r0.pinchStartX = r3
            float r3 = r0.pinchCenterY
            int r5 = r19.getContainerViewHeight()
            int r5 = r5 / r7
            float r5 = (float) r5
            float r3 = r3 - r5
            float r5 = r0.pinchCenterY
            int r10 = r19.getContainerViewHeight()
            int r10 = r10 / r7
            float r10 = (float) r10
            float r5 = r5 - r10
            float r10 = r0.translationY
            float r5 = r5 - r10
            float r10 = r0.scale
            float r11 = r0.pinchStartScale
            float r10 = r10 / r11
            float r5 = r5 / r10
            float r3 = r3 - r5
            float r3 = r3 - r6
            r0.pinchStartY = r3
            r0.pinchCenterX = r2
            r0.pinchCenterY = r4
        L_0x0158:
            float r2 = r1.getX(r8)
            float r3 = r1.getX(r9)
            float r2 = r2 - r3
            double r2 = (double) r2
            float r4 = r1.getY(r8)
            float r1 = r1.getY(r9)
            float r4 = r4 - r1
            double r4 = (double) r4
            double r1 = java.lang.Math.hypot(r2, r4)
            float r1 = (float) r1
            float r2 = r0.pinchStartDistance
            float r1 = r1 / r2
            float r2 = r0.pinchStartScale
            float r1 = r1 * r2
            r0.scale = r1
            float r1 = r0.pinchCenterX
            int r2 = r19.getContainerViewWidth()
            int r2 = r2 / r7
            float r2 = (float) r2
            float r1 = r1 - r2
            float r2 = r0.pinchCenterX
            int r3 = r19.getContainerViewWidth()
            int r3 = r3 / r7
            float r3 = (float) r3
            float r2 = r2 - r3
            float r3 = r0.pinchStartX
            float r2 = r2 - r3
            float r3 = r0.scale
            float r4 = r0.pinchStartScale
            float r3 = r3 / r4
            float r2 = r2 * r3
            float r1 = r1 - r2
            r0.translationX = r1
            float r1 = r0.pinchCenterY
            int r2 = r19.getContainerViewHeight()
            int r2 = r2 / r7
            float r2 = (float) r2
            float r1 = r1 - r2
            float r2 = r0.pinchCenterY
            int r3 = r19.getContainerViewHeight()
            int r3 = r3 / r7
            float r3 = (float) r3
            float r2 = r2 - r3
            float r3 = r0.pinchStartY
            float r2 = r2 - r3
            float r3 = r0.scale
            float r4 = r0.pinchStartScale
            float r4 = r3 / r4
            float r2 = r2 * r4
            float r1 = r1 - r2
            r0.translationY = r1
            r0.updateMinMax(r3)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r0.containerView
            r1.invalidate()
            goto L_0x067a
        L_0x01c3:
            int r2 = r20.getPointerCount()
            if (r2 != r8) goto L_0x067a
            int r2 = r0.paintViewTouched
            if (r2 != r8) goto L_0x01eb
            android.view.MotionEvent r1 = android.view.MotionEvent.obtain(r20)
            org.telegram.ui.Components.PhotoPaintView r2 = r0.photoPaintView
            float r2 = r2.getX()
            float r2 = -r2
            org.telegram.ui.Components.PhotoPaintView r3 = r0.photoPaintView
            float r3 = r3.getY()
            float r3 = -r3
            r1.offsetLocation(r2, r3)
            org.telegram.ui.Components.PhotoPaintView r2 = r0.photoPaintView
            r2.onTouch(r1)
            r1.recycle()
            return r8
        L_0x01eb:
            android.view.VelocityTracker r2 = r0.velocityTracker
            if (r2 == 0) goto L_0x01f2
            r2.addMovement(r1)
        L_0x01f2:
            float r2 = r20.getX()
            float r6 = r0.moveStartX
            float r2 = r2 - r6
            float r2 = java.lang.Math.abs(r2)
            float r6 = r20.getY()
            float r7 = r0.dragY
            float r6 = r6 - r7
            float r6 = java.lang.Math.abs(r6)
            int r7 = r0.touchSlop
            float r13 = (float) r7
            int r13 = (r2 > r13 ? 1 : (r2 == r13 ? 0 : -1))
            if (r13 > 0) goto L_0x0214
            float r7 = (float) r7
            int r7 = (r6 > r7 ? 1 : (r6 == r7 ? 0 : -1))
            if (r7 <= 0) goto L_0x0229
        L_0x0214:
            r0.discardTap = r8
            r19.hidePressedDrawables()
            java.lang.Runnable r7 = r0.longPressRunnable
            org.telegram.messenger.AndroidUtilities.cancelRunOnUIThread(r7)
            org.telegram.ui.PhotoViewer$QualityChooseView r7 = r0.qualityChooseView
            if (r7 == 0) goto L_0x0229
            int r7 = r7.getVisibility()
            if (r7 != 0) goto L_0x0229
            return r8
        L_0x0229:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r7 = r0.placeProvider
            boolean r7 = r7.canScrollAway()
            if (r7 == 0) goto L_0x0286
            int r7 = r0.currentEditMode
            if (r7 != 0) goto L_0x0286
            int r7 = r0.sendPhotoType
            if (r7 == r8) goto L_0x0286
            boolean r7 = r0.canDragDown
            if (r7 == 0) goto L_0x0286
            boolean r7 = r0.draggingDown
            if (r7 != 0) goto L_0x0286
            float r7 = r0.scale
            int r7 = (r7 > r11 ? 1 : (r7 == r11 ? 0 : -1))
            if (r7 != 0) goto L_0x0286
            r7 = 1106247680(0x41var_, float:30.0)
            int r7 = org.telegram.messenger.AndroidUtilities.dp(r7)
            float r7 = (float) r7
            int r7 = (r6 > r7 ? 1 : (r6 == r7 ? 0 : -1))
            if (r7 < 0) goto L_0x0286
            float r6 = r6 / r10
            int r2 = (r6 > r2 ? 1 : (r6 == r2 ? 0 : -1))
            if (r2 <= 0) goto L_0x0286
            r0.draggingDown = r8
            r19.hidePressedDrawables()
            r0.moving = r9
            float r1 = r20.getY()
            r0.dragY = r1
            boolean r1 = r0.isActionBarVisible
            if (r1 == 0) goto L_0x0274
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r0.containerView
            java.lang.Object r1 = r1.getTag()
            if (r1 == 0) goto L_0x0274
            r0.toggleActionBar(r9, r8)
            goto L_0x0285
        L_0x0274:
            android.widget.FrameLayout r1 = r0.pickerView
            int r1 = r1.getVisibility()
            if (r1 != 0) goto L_0x0285
            r0.toggleActionBar(r9, r8)
            r0.togglePhotosListView(r9, r8)
            r0.toggleCheckImageView(r9)
        L_0x0285:
            return r8
        L_0x0286:
            boolean r2 = r0.draggingDown
            if (r2 == 0) goto L_0x029a
            float r1 = r20.getY()
            float r2 = r0.dragY
            float r1 = r1 - r2
            r0.translationY = r1
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r0.containerView
            r1.invalidate()
            goto L_0x067a
        L_0x029a:
            boolean r2 = r0.invalidCoords
            if (r2 != 0) goto L_0x0374
            long r6 = r0.animationStartTime
            int r2 = (r6 > r4 ? 1 : (r6 == r4 ? 0 : -1))
            if (r2 != 0) goto L_0x0374
            float r2 = r0.moveStartX
            float r4 = r20.getX()
            float r2 = r2 - r4
            float r4 = r0.moveStartY
            float r5 = r20.getY()
            float r4 = r4 - r5
            boolean r5 = r0.moving
            if (r5 != 0) goto L_0x02da
            int r5 = r0.currentEditMode
            if (r5 != 0) goto L_0x02da
            float r5 = r0.scale
            int r5 = (r5 > r11 ? 1 : (r5 == r11 ? 0 : -1))
            if (r5 != 0) goto L_0x02d4
            float r5 = java.lang.Math.abs(r4)
            r6 = 1094713344(0x41400000, float:12.0)
            int r6 = org.telegram.messenger.AndroidUtilities.dp(r6)
            float r6 = (float) r6
            float r5 = r5 + r6
            float r6 = java.lang.Math.abs(r2)
            int r5 = (r5 > r6 ? 1 : (r5 == r6 ? 0 : -1))
            if (r5 < 0) goto L_0x02da
        L_0x02d4:
            float r5 = r0.scale
            int r5 = (r5 > r11 ? 1 : (r5 == r11 ? 0 : -1))
            if (r5 == 0) goto L_0x067a
        L_0x02da:
            boolean r5 = r0.moving
            if (r5 != 0) goto L_0x02e7
            r0.moving = r8
            r0.canDragDown = r9
            r19.hidePressedDrawables()
            r2 = 0
            r4 = 0
        L_0x02e7:
            float r5 = r20.getX()
            r0.moveStartX = r5
            float r1 = r20.getY()
            r0.moveStartY = r1
            float r1 = r0.scale
            r0.updateMinMax(r1)
            float r1 = r0.translationX
            float r5 = r0.minX
            int r1 = (r1 > r5 ? 1 : (r1 == r5 ? 0 : -1))
            if (r1 >= 0) goto L_0x030c
            int r1 = r0.currentEditMode
            if (r1 != 0) goto L_0x0320
            org.telegram.messenger.ImageReceiver r1 = r0.rightImage
            boolean r1 = r1.hasImageSet()
            if (r1 == 0) goto L_0x0320
        L_0x030c:
            float r1 = r0.translationX
            float r5 = r0.maxX
            int r1 = (r1 > r5 ? 1 : (r1 == r5 ? 0 : -1))
            if (r1 <= 0) goto L_0x0321
            int r1 = r0.currentEditMode
            if (r1 != 0) goto L_0x0320
            org.telegram.messenger.ImageReceiver r1 = r0.leftImage
            boolean r1 = r1.hasImageSet()
            if (r1 != 0) goto L_0x0321
        L_0x0320:
            float r2 = r2 / r3
        L_0x0321:
            float r1 = r0.maxY
            int r5 = (r1 > r12 ? 1 : (r1 == r12 ? 0 : -1))
            if (r5 != 0) goto L_0x0348
            float r5 = r0.minY
            int r6 = (r5 > r12 ? 1 : (r5 == r12 ? 0 : -1))
            if (r6 != 0) goto L_0x0348
            int r6 = r0.currentEditMode
            if (r6 != 0) goto L_0x0348
            int r6 = r0.sendPhotoType
            if (r6 == r8) goto L_0x0348
            float r3 = r0.translationY
            float r6 = r3 - r4
            int r6 = (r6 > r5 ? 1 : (r6 == r5 ? 0 : -1))
            if (r6 >= 0) goto L_0x0340
            r0.translationY = r5
            goto L_0x0359
        L_0x0340:
            float r3 = r3 - r4
            int r3 = (r3 > r1 ? 1 : (r3 == r1 ? 0 : -1))
            if (r3 <= 0) goto L_0x0355
            r0.translationY = r1
            goto L_0x0359
        L_0x0348:
            float r5 = r0.translationY
            float r6 = r0.minY
            int r6 = (r5 > r6 ? 1 : (r5 == r6 ? 0 : -1))
            if (r6 < 0) goto L_0x0357
            int r1 = (r5 > r1 ? 1 : (r5 == r1 ? 0 : -1))
            if (r1 <= 0) goto L_0x0355
            goto L_0x0357
        L_0x0355:
            r12 = r4
            goto L_0x0359
        L_0x0357:
            float r12 = r4 / r3
        L_0x0359:
            float r1 = r0.translationX
            float r1 = r1 - r2
            r0.translationX = r1
            float r1 = r0.scale
            int r1 = (r1 > r11 ? 1 : (r1 == r11 ? 0 : -1))
            if (r1 != 0) goto L_0x0368
            int r1 = r0.currentEditMode
            if (r1 == 0) goto L_0x036d
        L_0x0368:
            float r1 = r0.translationY
            float r1 = r1 - r12
            r0.translationY = r1
        L_0x036d:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r0.containerView
            r1.invalidate()
            goto L_0x067a
        L_0x0374:
            r0.invalidCoords = r9
            float r2 = r20.getX()
            r0.moveStartX = r2
            float r1 = r20.getY()
            r0.moveStartY = r1
            goto L_0x067a
        L_0x0384:
            int r2 = r20.getActionMasked()
            if (r2 == r6) goto L_0x0397
            int r2 = r20.getActionMasked()
            if (r2 == r8) goto L_0x0397
            int r2 = r20.getActionMasked()
            r4 = 6
            if (r2 != r4) goto L_0x067a
        L_0x0397:
            r19.hidePressedDrawables()
            java.lang.Runnable r2 = r0.longPressRunnable
            org.telegram.messenger.AndroidUtilities.cancelRunOnUIThread(r2)
            int r2 = r0.paintViewTouched
            if (r2 != r8) goto L_0x03c7
            org.telegram.ui.Components.PhotoPaintView r2 = r0.photoPaintView
            if (r2 == 0) goto L_0x03c4
            android.view.MotionEvent r1 = android.view.MotionEvent.obtain(r20)
            org.telegram.ui.Components.PhotoPaintView r2 = r0.photoPaintView
            float r2 = r2.getX()
            float r2 = -r2
            org.telegram.ui.Components.PhotoPaintView r3 = r0.photoPaintView
            float r3 = r3.getY()
            float r3 = -r3
            r1.offsetLocation(r2, r3)
            org.telegram.ui.Components.PhotoPaintView r2 = r0.photoPaintView
            r2.onTouch(r1)
            r1.recycle()
        L_0x03c4:
            r0.paintViewTouched = r9
            return r8
        L_0x03c7:
            r0.paintViewTouched = r9
            boolean r2 = r0.zooming
            if (r2 == 0) goto L_0x047b
            r0.invalidCoords = r8
            float r1 = r0.scale
            int r2 = (r1 > r11 ? 1 : (r1 == r11 ? 0 : -1))
            if (r2 >= 0) goto L_0x03dd
            r0.updateMinMax(r11)
            r0.animateTo(r11, r12, r12, r8)
            goto L_0x0475
        L_0x03dd:
            int r1 = (r1 > r3 ? 1 : (r1 == r3 ? 0 : -1))
            if (r1 <= 0) goto L_0x043e
            float r1 = r0.pinchCenterX
            int r2 = r19.getContainerViewWidth()
            int r2 = r2 / r7
            float r2 = (float) r2
            float r1 = r1 - r2
            float r2 = r0.pinchCenterX
            int r4 = r19.getContainerViewWidth()
            int r4 = r4 / r7
            float r4 = (float) r4
            float r2 = r2 - r4
            float r4 = r0.pinchStartX
            float r2 = r2 - r4
            float r4 = r0.pinchStartScale
            float r4 = r3 / r4
            float r2 = r2 * r4
            float r1 = r1 - r2
            float r2 = r0.pinchCenterY
            int r4 = r19.getContainerViewHeight()
            int r4 = r4 / r7
            float r4 = (float) r4
            float r2 = r2 - r4
            float r4 = r0.pinchCenterY
            int r5 = r19.getContainerViewHeight()
            int r5 = r5 / r7
            float r5 = (float) r5
            float r4 = r4 - r5
            float r5 = r0.pinchStartY
            float r4 = r4 - r5
            float r5 = r0.pinchStartScale
            float r5 = r3 / r5
            float r4 = r4 * r5
            float r2 = r2 - r4
            r0.updateMinMax(r3)
            float r4 = r0.minX
            int r5 = (r1 > r4 ? 1 : (r1 == r4 ? 0 : -1))
            if (r5 >= 0) goto L_0x0424
        L_0x0422:
            r1 = r4
            goto L_0x042b
        L_0x0424:
            float r4 = r0.maxX
            int r5 = (r1 > r4 ? 1 : (r1 == r4 ? 0 : -1))
            if (r5 <= 0) goto L_0x042b
            goto L_0x0422
        L_0x042b:
            float r4 = r0.minY
            int r5 = (r2 > r4 ? 1 : (r2 == r4 ? 0 : -1))
            if (r5 >= 0) goto L_0x0433
        L_0x0431:
            r2 = r4
            goto L_0x043a
        L_0x0433:
            float r4 = r0.maxY
            int r5 = (r2 > r4 ? 1 : (r2 == r4 ? 0 : -1))
            if (r5 <= 0) goto L_0x043a
            goto L_0x0431
        L_0x043a:
            r0.animateTo(r3, r1, r2, r8)
            goto L_0x0475
        L_0x043e:
            r0.checkMinMax(r8)
            int r1 = r0.currentEditMode
            if (r1 != r6) goto L_0x0475
            float r1 = r0.translationX
            float r2 = r0.translationY
            float r3 = r0.scale
            r0.updateMinMax(r3)
            float r3 = r0.translationX
            float r4 = r0.minX
            int r5 = (r3 > r4 ? 1 : (r3 == r4 ? 0 : -1))
            if (r5 >= 0) goto L_0x0458
        L_0x0456:
            r1 = r4
            goto L_0x045f
        L_0x0458:
            float r4 = r0.maxX
            int r3 = (r3 > r4 ? 1 : (r3 == r4 ? 0 : -1))
            if (r3 <= 0) goto L_0x045f
            goto L_0x0456
        L_0x045f:
            float r3 = r0.translationY
            float r4 = r0.minY
            int r5 = (r3 > r4 ? 1 : (r3 == r4 ? 0 : -1))
            if (r5 >= 0) goto L_0x0469
        L_0x0467:
            r2 = r4
            goto L_0x0470
        L_0x0469:
            float r4 = r0.maxY
            int r3 = (r3 > r4 ? 1 : (r3 == r4 ? 0 : -1))
            if (r3 <= 0) goto L_0x0470
            goto L_0x0467
        L_0x0470:
            float r3 = r0.scale
            r0.animateTo(r3, r1, r2, r9)
        L_0x0475:
            r0.zooming = r9
            r0.moving = r9
            goto L_0x067a
        L_0x047b:
            boolean r2 = r0.draggingDown
            if (r2 == 0) goto L_0x04c4
            float r2 = r0.dragY
            float r3 = r20.getY()
            float r2 = r2 - r3
            float r2 = java.lang.Math.abs(r2)
            int r3 = r19.getContainerViewHeight()
            float r3 = (float) r3
            r4 = 1086324736(0x40CLASSNAME, float:6.0)
            float r3 = r3 / r4
            int r2 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r2 <= 0) goto L_0x04af
            boolean r2 = r19.enableSwipeToPiP()
            if (r2 == 0) goto L_0x04ab
            float r2 = r0.dragY
            float r1 = r20.getY()
            float r2 = r2 - r1
            int r1 = (r2 > r12 ? 1 : (r2 == r12 ? 0 : -1))
            if (r1 <= 0) goto L_0x04ab
            r0.switchToPip(r8)
            goto L_0x04c0
        L_0x04ab:
            r0.closePhoto(r8, r9)
            goto L_0x04c0
        L_0x04af:
            android.widget.FrameLayout r1 = r0.pickerView
            int r1 = r1.getVisibility()
            if (r1 != 0) goto L_0x04bd
            r0.toggleActionBar(r8, r8)
            r0.toggleCheckImageView(r8)
        L_0x04bd:
            r0.animateTo(r11, r12, r12, r9)
        L_0x04c0:
            r0.draggingDown = r9
            goto L_0x067a
        L_0x04c4:
            boolean r1 = r0.moving
            if (r1 == 0) goto L_0x067a
            float r1 = r0.translationX
            float r2 = r0.translationY
            float r3 = r0.scale
            r0.updateMinMax(r3)
            r0.moving = r9
            r0.canDragDown = r8
            android.view.VelocityTracker r3 = r0.velocityTracker
            if (r3 == 0) goto L_0x04ea
            float r4 = r0.scale
            int r4 = (r4 > r11 ? 1 : (r4 == r11 ? 0 : -1))
            if (r4 != 0) goto L_0x04ea
            r4 = 1000(0x3e8, float:1.401E-42)
            r3.computeCurrentVelocity(r4)
            android.view.VelocityTracker r3 = r0.velocityTracker
            float r12 = r3.getXVelocity()
        L_0x04ea:
            int r3 = r0.currentEditMode
            if (r3 != 0) goto L_0x053e
            int r3 = r0.sendPhotoType
            if (r3 == r8) goto L_0x053e
            float r3 = r0.translationX
            float r4 = r0.minX
            int r5 = r19.getContainerViewWidth()
            int r5 = r5 / r6
            float r5 = (float) r5
            float r4 = r4 - r5
            r5 = 1143111680(0x44228000, float:650.0)
            int r3 = (r3 > r4 ? 1 : (r3 == r4 ? 0 : -1))
            if (r3 < 0) goto L_0x050e
            int r3 = org.telegram.messenger.AndroidUtilities.dp(r5)
            int r3 = -r3
            float r3 = (float) r3
            int r3 = (r12 > r3 ? 1 : (r12 == r3 ? 0 : -1))
            if (r3 >= 0) goto L_0x051a
        L_0x050e:
            org.telegram.messenger.ImageReceiver r3 = r0.rightImage
            boolean r3 = r3.hasImageSet()
            if (r3 == 0) goto L_0x051a
            r19.goToNext()
            return r8
        L_0x051a:
            float r3 = r0.translationX
            float r4 = r0.maxX
            int r7 = r19.getContainerViewWidth()
            int r7 = r7 / r6
            float r6 = (float) r7
            float r4 = r4 + r6
            int r3 = (r3 > r4 ? 1 : (r3 == r4 ? 0 : -1))
            if (r3 > 0) goto L_0x0532
            int r3 = org.telegram.messenger.AndroidUtilities.dp(r5)
            float r3 = (float) r3
            int r3 = (r12 > r3 ? 1 : (r12 == r3 ? 0 : -1))
            if (r3 <= 0) goto L_0x053e
        L_0x0532:
            org.telegram.messenger.ImageReceiver r3 = r0.leftImage
            boolean r3 = r3.hasImageSet()
            if (r3 == 0) goto L_0x053e
            r19.goToPrev()
            return r8
        L_0x053e:
            float r3 = r0.translationX
            float r4 = r0.minX
            int r5 = (r3 > r4 ? 1 : (r3 == r4 ? 0 : -1))
            if (r5 >= 0) goto L_0x0548
        L_0x0546:
            r1 = r4
            goto L_0x054f
        L_0x0548:
            float r4 = r0.maxX
            int r3 = (r3 > r4 ? 1 : (r3 == r4 ? 0 : -1))
            if (r3 <= 0) goto L_0x054f
            goto L_0x0546
        L_0x054f:
            float r3 = r0.translationY
            float r4 = r0.minY
            int r5 = (r3 > r4 ? 1 : (r3 == r4 ? 0 : -1))
            if (r5 >= 0) goto L_0x0559
        L_0x0557:
            r2 = r4
            goto L_0x0560
        L_0x0559:
            float r4 = r0.maxY
            int r3 = (r3 > r4 ? 1 : (r3 == r4 ? 0 : -1))
            if (r3 <= 0) goto L_0x0560
            goto L_0x0557
        L_0x0560:
            float r3 = r0.scale
            r0.animateTo(r3, r1, r2, r9)
            goto L_0x067a
        L_0x0567:
            r0.discardTap = r9
            android.widget.Scroller r2 = r0.scroller
            boolean r2 = r2.isFinished()
            if (r2 != 0) goto L_0x0576
            android.widget.Scroller r2 = r0.scroller
            r2.abortAnimation()
        L_0x0576:
            boolean r2 = r0.draggingDown
            if (r2 != 0) goto L_0x0661
            boolean r2 = r0.changingPage
            if (r2 != 0) goto L_0x0661
            boolean r2 = r0.canZoom
            if (r2 == 0) goto L_0x0601
            int r2 = r20.getPointerCount()
            if (r2 != r7) goto L_0x0601
            int r2 = r0.paintViewTouched
            if (r2 != r8) goto L_0x05a5
            r11 = 0
            r13 = 0
            r15 = 3
            r16 = 0
            r17 = 0
            r18 = 0
            android.view.MotionEvent r2 = android.view.MotionEvent.obtain(r11, r13, r15, r16, r17, r18)
            org.telegram.ui.Components.PhotoPaintView r3 = r0.photoPaintView
            r3.onTouch(r2)
            r2.recycle()
            r0.paintViewTouched = r7
        L_0x05a5:
            float r2 = r1.getX(r8)
            float r3 = r1.getX(r9)
            float r2 = r2 - r3
            double r2 = (double) r2
            float r4 = r1.getY(r8)
            float r5 = r1.getY(r9)
            float r4 = r4 - r5
            double r4 = (double) r4
            double r2 = java.lang.Math.hypot(r2, r4)
            float r2 = (float) r2
            r0.pinchStartDistance = r2
            float r2 = r0.scale
            r0.pinchStartScale = r2
            float r2 = r1.getX(r9)
            float r3 = r1.getX(r8)
            float r2 = r2 + r3
            float r2 = r2 / r10
            r0.pinchCenterX = r2
            float r2 = r1.getY(r9)
            float r3 = r1.getY(r8)
            float r2 = r2 + r3
            float r2 = r2 / r10
            r0.pinchCenterY = r2
            float r3 = r0.translationX
            r0.pinchStartX = r3
            float r3 = r0.translationY
            r0.pinchStartY = r3
            r0.zooming = r8
            r0.moving = r9
            int r3 = r0.currentEditMode
            if (r3 != r6) goto L_0x05f6
            float r3 = r0.pinchCenterX
            r0.moveStartX = r3
            r0.moveStartY = r2
            r0.draggingDown = r9
            r0.canDragDown = r9
        L_0x05f6:
            r19.hidePressedDrawables()
            android.view.VelocityTracker r2 = r0.velocityTracker
            if (r2 == 0) goto L_0x0661
            r2.clear()
            goto L_0x0661
        L_0x0601:
            int r2 = r20.getPointerCount()
            if (r2 != r8) goto L_0x0661
            int r2 = r0.currentEditMode
            if (r2 != r6) goto L_0x0648
            int r2 = r0.paintViewTouched
            if (r2 != 0) goto L_0x0661
            org.telegram.ui.Components.PhotoPaintView r2 = r0.photoPaintView
            android.graphics.Rect r3 = r0.hitRect
            r2.getHitRect(r3)
            android.graphics.Rect r2 = r0.hitRect
            float r3 = r20.getX()
            int r3 = (int) r3
            float r4 = r20.getY()
            int r4 = (int) r4
            boolean r2 = r2.contains(r3, r4)
            if (r2 == 0) goto L_0x0661
            android.view.MotionEvent r2 = android.view.MotionEvent.obtain(r20)
            org.telegram.ui.Components.PhotoPaintView r3 = r0.photoPaintView
            float r3 = r3.getX()
            float r3 = -r3
            org.telegram.ui.Components.PhotoPaintView r4 = r0.photoPaintView
            float r4 = r4.getY()
            float r4 = -r4
            r2.offsetLocation(r3, r4)
            org.telegram.ui.Components.PhotoPaintView r3 = r0.photoPaintView
            r3.onTouch(r2)
            r2.recycle()
            r0.paintViewTouched = r8
            goto L_0x0661
        L_0x0648:
            float r2 = r20.getX()
            r0.moveStartX = r2
            float r2 = r20.getY()
            r0.moveStartY = r2
            r0.dragY = r2
            r0.draggingDown = r9
            r0.canDragDown = r8
            android.view.VelocityTracker r2 = r0.velocityTracker
            if (r2 == 0) goto L_0x0661
            r2.clear()
        L_0x0661:
            int r2 = r20.getActionMasked()
            if (r2 != 0) goto L_0x0675
            float r1 = r20.getX()
            r0.longPressX = r1
            java.lang.Runnable r1 = r0.longPressRunnable
            r2 = 300(0x12c, double:1.48E-321)
            org.telegram.messenger.AndroidUtilities.runOnUIThread(r1, r2)
            goto L_0x067a
        L_0x0675:
            java.lang.Runnable r1 = r0.longPressRunnable
            org.telegram.messenger.AndroidUtilities.cancelRunOnUIThread(r1)
        L_0x067a:
            return r9
        L_0x067b:
            int r1 = r20.getAction()
            if (r1 != r8) goto L_0x0684
            r0.closeCaptionEnter(r8)
        L_0x0684:
            return r8
        L_0x0685:
            return r9
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.onTouchEvent(android.view.MotionEvent):boolean");
    }

    /* JADX WARNING: Code restructure failed: missing block: B:4:0x0017, code lost:
        if (r2 > r3) goto L_0x0011;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:9:0x0028, code lost:
        if (r2 > r3) goto L_0x0022;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private void checkMinMax(boolean r6) {
        /*
            r5 = this;
            float r0 = r5.translationX
            float r1 = r5.translationY
            float r2 = r5.scale
            r5.updateMinMax(r2)
            float r2 = r5.translationX
            float r3 = r5.minX
            int r4 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r4 >= 0) goto L_0x0013
        L_0x0011:
            r0 = r3
            goto L_0x001a
        L_0x0013:
            float r3 = r5.maxX
            int r2 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r2 <= 0) goto L_0x001a
            goto L_0x0011
        L_0x001a:
            float r2 = r5.translationY
            float r3 = r5.minY
            int r4 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r4 >= 0) goto L_0x0024
        L_0x0022:
            r1 = r3
            goto L_0x002b
        L_0x0024:
            float r3 = r5.maxY
            int r2 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r2 <= 0) goto L_0x002b
            goto L_0x0022
        L_0x002b:
            float r2 = r5.scale
            r5.animateTo(r2, r0, r1, r6)
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.checkMinMax(boolean):void");
    }

    private void goToNext() {
        float containerViewWidth = this.scale != 1.0f ? ((((float) getContainerViewWidth()) - this.centerImage.getImageWidth()) / 2.0f) * this.scale : 0.0f;
        this.switchImageAfterAnimation = 1;
        animateTo(this.scale, ((this.minX - ((float) getContainerViewWidth())) - containerViewWidth) - ((float) (AndroidUtilities.dp(30.0f) / 2)), this.translationY, false);
    }

    private void goToPrev() {
        float containerViewWidth = this.scale != 1.0f ? ((((float) getContainerViewWidth()) - this.centerImage.getImageWidth()) / 2.0f) * this.scale : 0.0f;
        this.switchImageAfterAnimation = 2;
        animateTo(this.scale, this.maxX + ((float) getContainerViewWidth()) + containerViewWidth + ((float) (AndroidUtilities.dp(30.0f) / 2)), this.translationY, false);
    }

    private void cancelMoveZoomAnimation() {
        AnimatorSet animatorSet = this.imageMoveAnimation;
        if (animatorSet != null) {
            float f = this.scale;
            float f2 = this.animationValue;
            float f3 = f + ((this.animateToScale - f) * f2);
            float f4 = this.translationX;
            float f5 = f4 + ((this.animateToX - f4) * f2);
            float f6 = this.translationY;
            float f7 = f6 + ((this.animateToY - f6) * f2);
            float f8 = this.rotate;
            animatorSet.cancel();
            this.scale = f3;
            this.translationX = f5;
            this.translationY = f7;
            this.animationStartTime = 0;
            this.rotate = f8 + ((this.animateToRotate - f8) * f2);
            updateMinMax(f3);
            this.zoomAnimation = false;
            this.containerView.invalidate();
        }
    }

    private void animateTo(float f, float f2, float f3, boolean z) {
        animateTo(f, f2, f3, z, 250);
    }

    private void animateTo(float f, float f2, float f3, boolean z, int i) {
        if (this.scale != f || this.translationX != f2 || this.translationY != f3) {
            this.zoomAnimation = z;
            this.animateToScale = f;
            this.animateToX = f2;
            this.animateToY = f3;
            this.animationStartTime = System.currentTimeMillis();
            AnimatorSet animatorSet = new AnimatorSet();
            this.imageMoveAnimation = animatorSet;
            animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f})});
            this.imageMoveAnimation.setInterpolator(this.interpolator);
            this.imageMoveAnimation.setDuration((long) i);
            this.imageMoveAnimation.addListener(new AnimatorListenerAdapter() {
                public void onAnimationEnd(Animator animator) {
                    AnimatorSet unused = PhotoViewer.this.imageMoveAnimation = null;
                    PhotoViewer.this.containerView.invalidate();
                }
            });
            this.imageMoveAnimation.start();
        }
    }

    @Keep
    public void setAnimationValue(float f) {
        this.animationValue = f;
        this.containerView.invalidate();
    }

    @Keep
    public float getAnimationValue() {
        return this.animationValue;
    }

    private void switchToNextIndex(int i, boolean z) {
        if (this.currentMessageObject != null) {
            releasePlayer(false);
            FileLoader.getInstance(this.currentAccount).cancelLoadFile(this.currentMessageObject.getDocument());
        } else if (this.currentPageBlock != null) {
            TLObject media = this.pageBlocksAdapter.getMedia(this.currentIndex);
            if (media instanceof TLRPC$Document) {
                releasePlayer(false);
                FileLoader.getInstance(this.currentAccount).cancelLoadFile((TLRPC$Document) media);
            }
        }
        GroupedPhotosListView groupedPhotosListView2 = this.groupedPhotosListView;
        if (groupedPhotosListView2 != null) {
            groupedPhotosListView2.setAnimateBackground(true);
        }
        this.playerAutoStarted = false;
        setImageIndex(this.currentIndex + i, z, true);
        if (shouldMessageObjectAutoPlayed(this.currentMessageObject) || shouldIndexAutoPlayed(this.currentIndex)) {
            this.playerAutoStarted = true;
            onActionClick(true);
            checkProgress(0, false, true);
        }
        checkFullscreenButton();
    }

    /* access modifiers changed from: private */
    public boolean shouldMessageObjectAutoPlayed(MessageObject messageObject) {
        return messageObject != null && messageObject.isVideo() && (messageObject.mediaExists || messageObject.attachPathExists || (messageObject.canStreamVideo() && SharedConfig.streamMedia)) && SharedConfig.autoplayVideo;
    }

    /* JADX WARNING: Code restructure failed: missing block: B:6:0x000e, code lost:
        r2 = r1.pageBlocksAdapter.getFile(r2);
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private boolean shouldIndexAutoPlayed(int r2) {
        /*
            r1 = this;
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r1.pageBlocksAdapter
            if (r0 == 0) goto L_0x001e
            boolean r0 = r0.isVideo(r2)
            if (r0 == 0) goto L_0x001e
            boolean r0 = org.telegram.messenger.SharedConfig.autoplayVideo
            if (r0 == 0) goto L_0x001e
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r1.pageBlocksAdapter
            java.io.File r2 = r0.getFile(r2)
            if (r2 == 0) goto L_0x001e
            boolean r2 = r2.exists()
            if (r2 == 0) goto L_0x001e
            r2 = 1
            return r2
        L_0x001e:
            r2 = 0
            return r2
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.shouldIndexAutoPlayed(int):boolean");
    }

    /* access modifiers changed from: private */
    public float getCropFillScale(boolean z) {
        ImageReceiver imageReceiver = this.centerImage;
        int bitmapHeight = z ? imageReceiver.getBitmapHeight() : imageReceiver.getBitmapWidth();
        int bitmapWidth = z ? this.centerImage.getBitmapWidth() : this.centerImage.getBitmapHeight();
        float min = Math.min((float) this.photoCropView.getMeasuredWidth(), (((float) this.photoCropView.getMeasuredHeight()) - ((float) AndroidUtilities.dp(64.0f))) - ((float) (isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0))) - ((float) (AndroidUtilities.dp(16.0f) * 2));
        return Math.max(min / ((float) bitmapHeight), min / ((float) bitmapWidth));
    }

    /* access modifiers changed from: private */
    public boolean isStatusBarVisible() {
        return Build.VERSION.SDK_INT >= 21 && !this.inBubbleMode;
    }

    /* access modifiers changed from: private */
    /* JADX WARNING: Code restructure failed: missing block: B:338:0x0816, code lost:
        if (r8 == 2) goto L_0x0832;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:342:0x081e, code lost:
        if (r9 == -1) goto L_0x0822;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:347:0x0827, code lost:
        if (r9 == r0) goto L_0x0832;
     */
    /* JADX WARNING: Removed duplicated region for block: B:120:0x02ae  */
    /* JADX WARNING: Removed duplicated region for block: B:123:0x02b5  */
    /* JADX WARNING: Removed duplicated region for block: B:136:0x0333 A[ADDED_TO_REGION] */
    /* JADX WARNING: Removed duplicated region for block: B:156:0x0385  */
    /* JADX WARNING: Removed duplicated region for block: B:169:0x03b4  */
    /* JADX WARNING: Removed duplicated region for block: B:170:0x03b9  */
    /* JADX WARNING: Removed duplicated region for block: B:176:0x03d4  */
    /* JADX WARNING: Removed duplicated region for block: B:177:0x03d6  */
    /* JADX WARNING: Removed duplicated region for block: B:181:0x03dd  */
    /* JADX WARNING: Removed duplicated region for block: B:193:0x0429  */
    /* JADX WARNING: Removed duplicated region for block: B:201:0x045d  */
    /* JADX WARNING: Removed duplicated region for block: B:223:0x0517  */
    /* JADX WARNING: Removed duplicated region for block: B:224:0x051f  */
    /* JADX WARNING: Removed duplicated region for block: B:229:0x0552  */
    /* JADX WARNING: Removed duplicated region for block: B:236:0x059d  */
    /* JADX WARNING: Removed duplicated region for block: B:238:0x05a4  */
    /* JADX WARNING: Removed duplicated region for block: B:241:0x05fd  */
    /* JADX WARNING: Removed duplicated region for block: B:243:0x0608  */
    /* JADX WARNING: Removed duplicated region for block: B:248:0x0629  */
    /* JADX WARNING: Removed duplicated region for block: B:255:0x064d  */
    /* JADX WARNING: Removed duplicated region for block: B:263:0x0661  */
    /* JADX WARNING: Removed duplicated region for block: B:264:0x0664  */
    /* JADX WARNING: Removed duplicated region for block: B:267:0x066e A[ADDED_TO_REGION] */
    /* JADX WARNING: Removed duplicated region for block: B:273:0x069d  */
    /* JADX WARNING: Removed duplicated region for block: B:274:0x06a0  */
    /* JADX WARNING: Removed duplicated region for block: B:284:0x06d9 A[ADDED_TO_REGION] */
    /* JADX WARNING: Removed duplicated region for block: B:324:0x07c0  */
    /* JADX WARNING: Removed duplicated region for block: B:325:0x07cd  */
    /* JADX WARNING: Removed duplicated region for block: B:328:0x07fd  */
    /* JADX WARNING: Removed duplicated region for block: B:350:0x082e  */
    /* JADX WARNING: Removed duplicated region for block: B:353:0x0835  */
    /* JADX WARNING: Removed duplicated region for block: B:390:0x08c7  */
    /* JADX WARNING: Removed duplicated region for block: B:401:0x08ea  */
    /* JADX WARNING: Removed duplicated region for block: B:407:0x0913  */
    /* JADX WARNING: Removed duplicated region for block: B:412:0x092f  */
    /* JADX WARNING: Removed duplicated region for block: B:467:0x0a3e  */
    /* JADX WARNING: Removed duplicated region for block: B:470:0x0a4f  */
    /* JADX WARNING: Removed duplicated region for block: B:477:0x0a7c  */
    /* JADX WARNING: Removed duplicated region for block: B:508:0x0af1  */
    /* JADX WARNING: Removed duplicated region for block: B:511:0x0af8  */
    /* JADX WARNING: Removed duplicated region for block: B:512:0x0b15  */
    /* JADX WARNING: Removed duplicated region for block: B:519:0x0b33  */
    /* JADX WARNING: Removed duplicated region for block: B:542:0x0bbb  */
    /* JADX WARNING: Removed duplicated region for block: B:544:0x0bc1  */
    /* JADX WARNING: Removed duplicated region for block: B:561:0x0CLASSNAME  */
    /* JADX WARNING: Removed duplicated region for block: B:588:0x0cc7  */
    /* JADX WARNING: Removed duplicated region for block: B:633:0x0e34  */
    /* JADX WARNING: Removed duplicated region for block: B:638:0x0e47  */
    /* JADX WARNING: Removed duplicated region for block: B:659:0x0ea1  */
    /* JADX WARNING: Removed duplicated region for block: B:664:0x0eb0  */
    /* JADX WARNING: Removed duplicated region for block: B:669:0x0cb3 A[EDGE_INSN: B:669:0x0cb3->B:586:0x0cb3 ?: BREAK  , SYNTHETIC] */
    /* JADX WARNING: Removed duplicated region for block: B:677:? A[RETURN, SYNTHETIC] */
    @android.annotation.SuppressLint({"NewApi", "DrawAllocation"})
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public void onDraw(android.graphics.Canvas r45) {
        /*
            r44 = this;
            r10 = r44
            r11 = r45
            org.telegram.ui.ActionBar.BaseFragment r0 = r10.parentFragment
            r12 = 1073741824(0x40000000, float:2.0)
            r13 = 3
            r14 = 0
            r15 = 2
            r9 = 1
            java.lang.Integer r1 = java.lang.Integer.valueOf(r9)
            r8 = 1065353216(0x3var_, float:1.0)
            if (r0 == 0) goto L_0x00c4
            android.view.View r0 = r0.getFragmentView()
            if (r0 == 0) goto L_0x00c4
            android.widget.Scroller r0 = r10.scroller
            boolean r0 = r0.isFinished()
            if (r0 != 0) goto L_0x0075
            android.widget.Scroller r0 = r10.scroller
            boolean r0 = r0.computeScrollOffset()
            if (r0 == 0) goto L_0x0075
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getStartX()
            float r0 = (float) r0
            float r2 = r10.maxX
            int r0 = (r0 > r2 ? 1 : (r0 == r2 ? 0 : -1))
            if (r0 >= 0) goto L_0x004d
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getStartX()
            float r0 = (float) r0
            float r2 = r10.minX
            int r0 = (r0 > r2 ? 1 : (r0 == r2 ? 0 : -1))
            if (r0 <= 0) goto L_0x004d
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getCurrX()
            float r0 = (float) r0
            r10.translationX = r0
        L_0x004d:
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getStartY()
            float r0 = (float) r0
            float r2 = r10.maxY
            int r0 = (r0 > r2 ? 1 : (r0 == r2 ? 0 : -1))
            if (r0 >= 0) goto L_0x0070
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getStartY()
            float r0 = (float) r0
            float r2 = r10.minY
            int r0 = (r0 > r2 ? 1 : (r0 == r2 ? 0 : -1))
            if (r0 <= 0) goto L_0x0070
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getCurrY()
            float r0 = (float) r0
            r10.translationY = r0
        L_0x0070:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r10.containerView
            r0.invalidate()
        L_0x0075:
            float r0 = r10.translationY
            float r0 = java.lang.Math.abs(r0)
            int r2 = r44.getContainerViewHeight()
            float r2 = (float) r2
            float r2 = r2 / r12
            float r0 = r0 / r2
            float r2 = r10.clippingImageProgress
            int r3 = (r2 > r14 ? 1 : (r2 == r14 ? 0 : -1))
            if (r3 == 0) goto L_0x008d
            float r3 = r8 - r0
            float r3 = r3 * r2
            float r0 = r0 + r3
        L_0x008d:
            float r0 = androidx.core.math.MathUtils.clamp((float) r0, (float) r14, (float) r8)
            float r0 = r8 - r0
            r2 = 1036831949(0x3dcccccd, float:0.1)
            float r0 = r0 * r2
            float r0 = r0 + r8
            org.telegram.ui.ActionBar.BaseFragment r2 = r10.parentFragment
            android.view.View r2 = r2.getFragmentView()
            r2.setScaleX(r0)
            r2.setScaleY(r0)
            org.telegram.ui.Components.ChatAttachAlert r2 = r10.parentAlert
            if (r2 == 0) goto L_0x00b3
            android.widget.FrameLayout r2 = r2.getContainer()
            r2.setScaleX(r0)
            r2.setScaleY(r0)
        L_0x00b3:
            int r0 = r10.animationInProgress
            if (r0 == r9) goto L_0x00bf
            if (r0 == r15) goto L_0x00bf
            if (r0 == r13) goto L_0x00bf
            boolean r0 = r10.pipAnimationInProgress
            if (r0 == 0) goto L_0x00c4
        L_0x00bf:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r10.containerView
            r0.invalidate()
        L_0x00c4:
            int r0 = r10.animationInProgress
            if (r0 != r9) goto L_0x013c
            boolean r0 = r10.padImageForHorizontalInsets
            if (r0 == 0) goto L_0x00de
            r45.save()
            int r0 = r44.getLeftInset()
            int r0 = r0 / r15
            int r1 = r44.getRightInset()
            int r1 = r1 / r15
            int r0 = r0 - r1
            float r0 = (float) r0
            r11.translate(r0, r14)
        L_0x00de:
            org.telegram.ui.Components.ClippingImageView r0 = r10.animatingImageView
            if (r0 == 0) goto L_0x0120
            r45.save()
            org.telegram.ui.Components.ClippingImageView r0 = r10.animatingImageView
            float r0 = r0.getCenterX()
            int r1 = r45.getWidth()
            int r1 = r1 / r15
            float r1 = (float) r1
            float r0 = r0 - r1
            org.telegram.ui.Components.ClippingImageView r1 = r10.animatingImageView
            float r1 = r1.getCenterY()
            int r2 = r45.getHeight()
            int r2 = r2 / r15
            float r2 = (float) r2
            float r1 = r1 - r2
            r11.translate(r0, r1)
            org.telegram.ui.Components.ClippingImageView r0 = r10.animatingImageView
            float r0 = r0.getAnimationProgress()
            int r1 = r10.animationInProgress
            if (r1 != r9) goto L_0x010d
            goto L_0x010f
        L_0x010d:
            float r0 = r8 - r0
        L_0x010f:
            int r1 = r45.getWidth()
            int r1 = r1 / r15
            float r1 = (float) r1
            int r2 = r45.getHeight()
            int r2 = r2 / r15
            float r2 = (float) r2
            r11.scale(r0, r0, r1, r2)
            r6 = r0
            goto L_0x0122
        L_0x0120:
            r6 = 1065353216(0x3var_, float:1.0)
        L_0x0122:
            r3 = 0
            r4 = 1065353216(0x3var_, float:1.0)
            r5 = 0
            r1 = r44
            r2 = r45
            r1.drawProgress(r2, r3, r4, r5, r6)
            org.telegram.ui.Components.ClippingImageView r0 = r10.animatingImageView
            if (r0 == 0) goto L_0x0134
            r45.restore()
        L_0x0134:
            boolean r0 = r10.padImageForHorizontalInsets
            if (r0 == 0) goto L_0x013b
            r45.restore()
        L_0x013b:
            return
        L_0x013c:
            if (r0 == r13) goto L_0x0eea
            boolean r2 = r10.isVisible
            if (r2 != 0) goto L_0x014a
            if (r0 == r15) goto L_0x014a
            boolean r0 = r10.pipAnimationInProgress
            if (r0 != 0) goto L_0x014a
            goto L_0x0eea
        L_0x014a:
            boolean r0 = r10.padImageForHorizontalInsets
            if (r0 == 0) goto L_0x0160
            r45.save()
            int r0 = r44.getLeftInset()
            int r0 = r0 / r15
            int r2 = r44.getRightInset()
            int r2 = r2 / r15
            int r0 = r0 - r2
            float r0 = (float) r0
            r11.translate(r0, r14)
        L_0x0160:
            long r2 = java.lang.System.currentTimeMillis()
            long r4 = r10.videoCrossfadeAlphaLastTime
            long r4 = r2 - r4
            r6 = 20
            int r0 = (r4 > r6 ? 1 : (r4 == r6 ? 0 : -1))
            if (r0 <= 0) goto L_0x0170
            r4 = 17
        L_0x0170:
            r6 = r4
            r10.videoCrossfadeAlphaLastTime = r2
            android.animation.AnimatorSet r0 = r10.imageMoveAnimation
            if (r0 == 0) goto L_0x01cf
            android.widget.Scroller r0 = r10.scroller
            boolean r0 = r0.isFinished()
            if (r0 != 0) goto L_0x0184
            android.widget.Scroller r0 = r10.scroller
            r0.abortAnimation()
        L_0x0184:
            float r0 = r10.scale
            float r2 = r10.animateToScale
            float r3 = r2 - r0
            float r12 = r10.animationValue
            float r3 = r3 * r12
            float r3 = r3 + r0
            float r13 = r10.rotate
            float r5 = r10.animateToRotate
            float r5 = r5 - r13
            float r5 = r5 * r12
            float r13 = r13 + r5
            float r5 = r10.translationX
            float r15 = r10.animateToX
            float r15 = r15 - r5
            float r15 = r15 * r12
            float r15 = r15 + r5
            float r9 = r10.translationY
            float r4 = r10.animateToY
            float r4 = r4 - r9
            float r4 = r4 * r12
            float r9 = r9 + r4
            float r4 = r10.mirror
            float r14 = r10.animateToMirror
            float r14 = r14 - r4
            float r14 = r14 * r12
            float r4 = r4 + r14
            int r2 = (r2 > r8 ? 1 : (r2 == r8 ? 0 : -1))
            if (r2 != 0) goto L_0x01be
            int r0 = (r0 > r8 ? 1 : (r0 == r8 ? 0 : -1))
            if (r0 != 0) goto L_0x01be
            r0 = 0
            int r2 = (r5 > r0 ? 1 : (r5 == r0 ? 0 : -1))
            if (r2 != 0) goto L_0x01be
            r0 = r9
            goto L_0x01c0
        L_0x01be:
            r0 = -1082130432(0xffffffffbvar_, float:-1.0)
        L_0x01c0:
            r10.updateMinMax(r3)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r2 = r10.containerView
            r2.invalidate()
            r12 = r3
            r14 = r9
        L_0x01ca:
            r9 = r15
        L_0x01cb:
            r15 = r13
            r13 = r4
            goto L_0x02aa
        L_0x01cf:
            long r2 = r10.animationStartTime
            r4 = 0
            int r0 = (r2 > r4 ? 1 : (r2 == r4 ? 0 : -1))
            if (r0 == 0) goto L_0x01eb
            float r0 = r10.animateToX
            r10.translationX = r0
            float r0 = r10.animateToY
            r10.translationY = r0
            float r0 = r10.animateToScale
            r10.scale = r0
            r10.animationStartTime = r4
            r10.updateMinMax(r0)
            r2 = 0
            r10.zoomAnimation = r2
        L_0x01eb:
            android.widget.Scroller r0 = r10.scroller
            boolean r0 = r0.isFinished()
            if (r0 != 0) goto L_0x0246
            android.widget.Scroller r0 = r10.scroller
            boolean r0 = r0.computeScrollOffset()
            if (r0 == 0) goto L_0x0246
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getStartX()
            float r0 = (float) r0
            float r2 = r10.maxX
            int r0 = (r0 > r2 ? 1 : (r0 == r2 ? 0 : -1))
            if (r0 >= 0) goto L_0x021e
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getStartX()
            float r0 = (float) r0
            float r2 = r10.minX
            int r0 = (r0 > r2 ? 1 : (r0 == r2 ? 0 : -1))
            if (r0 <= 0) goto L_0x021e
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getCurrX()
            float r0 = (float) r0
            r10.translationX = r0
        L_0x021e:
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getStartY()
            float r0 = (float) r0
            float r2 = r10.maxY
            int r0 = (r0 > r2 ? 1 : (r0 == r2 ? 0 : -1))
            if (r0 >= 0) goto L_0x0241
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getStartY()
            float r0 = (float) r0
            float r2 = r10.minY
            int r0 = (r0 > r2 ? 1 : (r0 == r2 ? 0 : -1))
            if (r0 <= 0) goto L_0x0241
            android.widget.Scroller r0 = r10.scroller
            int r0 = r0.getCurrY()
            float r0 = (float) r0
            r10.translationY = r0
        L_0x0241:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r10.containerView
            r0.invalidate()
        L_0x0246:
            int r0 = r10.switchImageAfterAnimation
            if (r0 == 0) goto L_0x0291
            r2 = 0
            r10.openedFullScreenVideo = r2
            java.util.ArrayList<java.lang.Object> r0 = r10.imagesArrLocals
            boolean r0 = r0.isEmpty()
            if (r0 != 0) goto L_0x0275
            int r0 = r10.currentIndex
            if (r0 < 0) goto L_0x0275
            java.util.ArrayList<java.lang.Object> r2 = r10.imagesArrLocals
            int r2 = r2.size()
            if (r0 >= r2) goto L_0x0275
            java.util.ArrayList<java.lang.Object> r0 = r10.imagesArrLocals
            int r2 = r10.currentIndex
            java.lang.Object r0 = r0.get(r2)
            boolean r2 = r0 instanceof org.telegram.messenger.MediaController.MediaEditState
            if (r2 == 0) goto L_0x0275
            org.telegram.messenger.MediaController$MediaEditState r0 = (org.telegram.messenger.MediaController.MediaEditState) r0
            org.telegram.messenger.VideoEditedInfo r2 = r44.getCurrentVideoEditedInfo()
            r0.editedInfo = r2
        L_0x0275:
            int r0 = r10.switchImageAfterAnimation
            r2 = 1
            if (r0 != r2) goto L_0x0283
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda58 r0 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda58
            r0.<init>(r10)
            org.telegram.messenger.AndroidUtilities.runOnUIThread(r0)
            goto L_0x028e
        L_0x0283:
            r2 = 2
            if (r0 != r2) goto L_0x028e
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda53 r0 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda53
            r0.<init>(r10)
            org.telegram.messenger.AndroidUtilities.runOnUIThread(r0)
        L_0x028e:
            r2 = 0
            r10.switchImageAfterAnimation = r2
        L_0x0291:
            float r3 = r10.scale
            float r4 = r10.mirror
            float r13 = r10.rotate
            float r9 = r10.translationY
            float r15 = r10.translationX
            boolean r0 = r10.moving
            r12 = r3
            if (r0 != 0) goto L_0x02a4
            r0 = r9
            r14 = r0
            goto L_0x01ca
        L_0x02a4:
            r14 = r9
            r9 = r15
            r0 = -1082130432(0xffffffffbvar_, float:-1.0)
            goto L_0x01cb
        L_0x02aa:
            org.telegram.ui.Components.PhotoViewerWebView r2 = r10.photoViewerWebView
            if (r2 == 0) goto L_0x02b1
            r2.setTranslationY(r14)
        L_0x02b1:
            boolean r2 = r10.isActionBarVisible
            if (r2 == 0) goto L_0x0320
            r2 = 1065354055(0x3var_, float:1.0001)
            r3 = 120(0x78, double:5.93E-322)
            int r2 = (r12 > r2 ? 1 : (r12 == r2 ? 0 : -1))
            if (r2 > 0) goto L_0x02f4
            boolean r2 = r10.allowShowFullscreenButton
            if (r2 != 0) goto L_0x0320
            android.widget.ImageView[] r2 = r10.fullscreenButton
            r5 = 0
            r2 = r2[r5]
            java.lang.Object r2 = r2.getTag()
            if (r2 != 0) goto L_0x0321
            android.widget.ImageView[] r2 = r10.fullscreenButton
            r2 = r2[r5]
            android.view.ViewPropertyAnimator r2 = r2.animate()
            android.view.ViewPropertyAnimator r2 = r2.alpha(r8)
            android.view.ViewPropertyAnimator r2 = r2.setDuration(r3)
            org.telegram.ui.PhotoViewer$75 r3 = new org.telegram.ui.PhotoViewer$75
            r3.<init>()
            android.view.ViewPropertyAnimator r2 = r2.setListener(r3)
            r2.start()
            android.widget.ImageView[] r2 = r10.fullscreenButton
            r2 = r2[r5]
            r2.setTag(r1)
            r1 = 1
            r10.allowShowFullscreenButton = r1
            goto L_0x0321
        L_0x02f4:
            r5 = 0
            boolean r2 = r10.allowShowFullscreenButton
            if (r2 == 0) goto L_0x0321
            android.widget.ImageView[] r2 = r10.fullscreenButton
            r2 = r2[r5]
            android.view.ViewPropertyAnimator r2 = r2.animate()
            r8 = 0
            android.view.ViewPropertyAnimator r2 = r2.alpha(r8)
            android.view.ViewPropertyAnimator r2 = r2.setDuration(r3)
            org.telegram.ui.PhotoViewer$76 r3 = new org.telegram.ui.PhotoViewer$76
            r3.<init>()
            android.view.ViewPropertyAnimator r2 = r2.setListener(r3)
            r2.start()
            android.widget.ImageView[] r2 = r10.fullscreenButton
            r2 = r2[r5]
            r2.setTag(r1)
            r10.allowShowFullscreenButton = r5
            goto L_0x0321
        L_0x0320:
            r5 = 0
        L_0x0321:
            int r8 = r44.getContainerViewWidth()
            int r4 = r44.getContainerViewHeight()
            int r1 = r10.animationInProgress
            r2 = 4
            r27 = 1132396544(0x437var_, float:255.0)
            r28 = 1082130432(0x40800000, float:4.0)
            r3 = 2
            if (r1 == r3) goto L_0x0381
            if (r1 == r2) goto L_0x0381
            boolean r3 = r10.pipAnimationInProgress
            if (r3 != 0) goto L_0x0381
            boolean r3 = r10.isInline
            if (r3 != 0) goto L_0x0381
            int r1 = r10.currentEditMode
            if (r1 != 0) goto L_0x0377
            int r1 = r10.sendPhotoType
            r2 = 1
            if (r1 == r2) goto L_0x0377
            float r1 = r10.scale
            r2 = 1065353216(0x3var_, float:1.0)
            int r1 = (r1 > r2 ? 1 : (r1 == r2 ? 0 : -1))
            if (r1 != 0) goto L_0x0377
            r17 = -1082130432(0xffffffffbvar_, float:-1.0)
            int r1 = (r0 > r17 ? 1 : (r0 == r17 ? 0 : -1))
            if (r1 == 0) goto L_0x0379
            boolean r1 = r10.zoomAnimation
            if (r1 != 0) goto L_0x0379
            float r1 = (float) r8
            float r1 = r1 / r28
            org.telegram.ui.PhotoViewer$BackgroundDrawable r2 = r10.backgroundDrawable
            r3 = 1123942400(0x42fe0000, float:127.0)
            float r0 = java.lang.Math.abs(r0)
            float r0 = java.lang.Math.min(r0, r1)
            float r0 = r0 / r1
            r1 = 1065353216(0x3var_, float:1.0)
            float r0 = r1 - r0
            float r0 = r0 * r27
            float r0 = java.lang.Math.max(r3, r0)
            int r0 = (int) r0
            r2.setAlpha(r0)
            goto L_0x038a
        L_0x0377:
            r17 = -1082130432(0xffffffffbvar_, float:-1.0)
        L_0x0379:
            org.telegram.ui.PhotoViewer$BackgroundDrawable r0 = r10.backgroundDrawable
            r1 = 255(0xff, float:3.57E-43)
            r0.setAlpha(r1)
            goto L_0x038a
        L_0x0381:
            r17 = -1082130432(0xffffffffbvar_, float:-1.0)
            if (r1 != r2) goto L_0x038a
            r0 = -16777216(0xfffffffffvar_, float:-1.7014118E38)
            r11.drawColor(r0)
        L_0x038a:
            r3 = 0
            r10.sideImage = r3
            int r0 = r10.currentEditMode
            if (r0 != 0) goto L_0x03d9
            int r0 = r10.sendPhotoType
            r1 = 1
            if (r0 == r1) goto L_0x03d9
            float r0 = r10.scale
            r1 = 1065353216(0x3var_, float:1.0)
            int r0 = (r0 > r1 ? 1 : (r0 == r1 ? 0 : -1))
            if (r0 < 0) goto L_0x03d0
            boolean r0 = r10.zoomAnimation
            if (r0 != 0) goto L_0x03d0
            boolean r0 = r10.zooming
            if (r0 != 0) goto L_0x03d0
            float r0 = r10.maxX
            r1 = 1084227584(0x40a00000, float:5.0)
            int r2 = org.telegram.messenger.AndroidUtilities.dp(r1)
            float r2 = (float) r2
            float r0 = r0 + r2
            int r0 = (r9 > r0 ? 1 : (r9 == r0 ? 0 : -1))
            if (r0 <= 0) goto L_0x03b9
            org.telegram.messenger.ImageReceiver r0 = r10.leftImage
            r10.sideImage = r0
            goto L_0x03d0
        L_0x03b9:
            float r0 = r10.minX
            int r1 = org.telegram.messenger.AndroidUtilities.dp(r1)
            float r1 = (float) r1
            float r0 = r0 - r1
            int r0 = (r9 > r0 ? 1 : (r9 == r0 ? 0 : -1))
            if (r0 >= 0) goto L_0x03ca
            org.telegram.messenger.ImageReceiver r0 = r10.rightImage
            r10.sideImage = r0
            goto L_0x03d0
        L_0x03ca:
            org.telegram.ui.Components.GroupedPhotosListView r0 = r10.groupedPhotosListView
            r1 = 0
            r0.setMoveProgress(r1)
        L_0x03d0:
            org.telegram.messenger.ImageReceiver r0 = r10.sideImage
            if (r0 == 0) goto L_0x03d6
            r2 = 1
            goto L_0x03d7
        L_0x03d6:
            r2 = 0
        L_0x03d7:
            r10.changingPage = r2
        L_0x03d9:
            r0 = 3
            r2 = 0
        L_0x03db:
            if (r2 >= r0) goto L_0x041e
            r1 = 1
            if (r2 != r1) goto L_0x03e2
        L_0x03e0:
            r0 = 0
            goto L_0x0402
        L_0x03e2:
            r1 = 2
            if (r2 != r1) goto L_0x03fa
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r10.containerView
            int r0 = r0.getMeasuredWidth()
            int r0 = -r0
            r1 = 1097859072(0x41700000, float:15.0)
            int r1 = org.telegram.messenger.AndroidUtilities.dp(r1)
            int r0 = r0 - r1
            float r0 = (float) r0
            float r1 = r10.maxX
            float r1 = r9 - r1
            float r0 = r0 + r1
            goto L_0x0402
        L_0x03fa:
            float r0 = r10.minX
            int r1 = (r9 > r0 ? 1 : (r9 == r0 ? 0 : -1))
            if (r1 >= 0) goto L_0x03e0
            float r0 = r9 - r0
        L_0x0402:
            android.widget.ImageView[] r1 = r10.fullscreenButton
            r1 = r1[r2]
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r10.containerView
            int r3 = r3.getMeasuredWidth()
            float r3 = (float) r3
            float r0 = r0 + r3
            r3 = 1111490560(0x42400000, float:48.0)
            int r3 = org.telegram.messenger.AndroidUtilities.dp(r3)
            float r3 = (float) r3
            float r0 = r0 - r3
            r1.setTranslationX(r0)
            int r2 = r2 + 1
            r0 = 3
            r3 = 0
            goto L_0x03db
        L_0x041e:
            org.telegram.messenger.ImageReceiver r0 = r10.sideImage
            org.telegram.messenger.ImageReceiver r1 = r10.rightImage
            r22 = 1050253722(0x3e99999a, float:0.3)
            r29 = 1106247680(0x41var_, float:30.0)
            if (r0 != r1) goto L_0x0608
            boolean r0 = r10.zoomAnimation
            if (r0 != 0) goto L_0x0450
            float r0 = r10.minX
            int r1 = (r9 > r0 ? 1 : (r9 == r0 ? 0 : -1))
            if (r1 >= 0) goto L_0x0450
            float r0 = r0 - r9
            float r1 = (float) r8
            float r0 = r0 / r1
            r1 = 1065353216(0x3var_, float:1.0)
            float r2 = java.lang.Math.min(r1, r0)
            float r0 = r1 - r2
            float r0 = r0 * r22
            int r1 = -r8
            int r23 = org.telegram.messenger.AndroidUtilities.dp(r29)
            r18 = 2
            int r23 = r23 / 2
            int r1 = r1 - r23
            float r1 = (float) r1
            r23 = r0
            r0 = r1
            goto L_0x0455
        L_0x0450:
            r0 = r9
            r2 = 1065353216(0x3var_, float:1.0)
            r23 = 0
        L_0x0455:
            org.telegram.messenger.ImageReceiver r1 = r10.sideImage
            boolean r1 = r1.hasBitmapImage()
            if (r1 == 0) goto L_0x05a4
            r45.save()
            int r1 = r8 / 2
            float r1 = (float) r1
            int r3 = r4 / 2
            float r3 = (float) r3
            r11.translate(r1, r3)
            int r1 = org.telegram.messenger.AndroidUtilities.dp(r29)
            r3 = 2
            int r1 = r1 / r3
            int r1 = r1 + r8
            float r1 = (float) r1
            float r1 = r1 + r0
            r3 = 0
            r11.translate(r1, r3)
            r20 = 1065353216(0x3var_, float:1.0)
            float r1 = r20 - r23
            r11.scale(r1, r1)
            org.telegram.messenger.ImageReceiver r1 = r10.sideImage
            int r3 = r1.getBitmapWidth()
            org.telegram.messenger.ImageReceiver r1 = r10.sideImage
            int r1 = r1.getBitmapHeight()
            boolean r5 = r10.rightImageIsVideo
            if (r5 != 0) goto L_0x04cc
            org.telegram.messenger.MediaController$CropState r5 = r10.rightCropState
            if (r5 == 0) goto L_0x04cc
            org.telegram.ui.Components.Crop.CropTransform r5 = r10.rightCropTransform
            boolean r5 = r5.hasViewTransform()
            if (r5 == 0) goto L_0x04cc
            r26 = 1065353216(0x3var_, float:1.0)
            org.telegram.ui.Components.Crop.CropTransform r5 = r10.rightCropTransform
            r30 = r6
            org.telegram.messenger.MediaController$CropState r7 = r10.rightCropState
            r6 = r1
            r19 = 1
            r1 = r44
            r32 = r2
            r2 = r45
            r33 = r3
            r3 = r8
            r34 = r4
            r17 = r5
            r5 = r33
            r21 = r6
            r36 = r30
            r24 = r7
            r7 = r26
            r38 = r8
            r8 = r17
            r39 = r9
            r17 = r13
            r13 = 1
            r9 = r24
            r1.applyCrop(r2, r3, r4, r5, r6, r7, r8, r9)
            r9 = r38
            goto L_0x04dc
        L_0x04cc:
            r21 = r1
            r32 = r2
            r33 = r3
            r34 = r4
            r36 = r6
            r39 = r9
            r17 = r13
            r13 = 1
            r9 = r8
        L_0x04dc:
            float r1 = (float) r9
            r2 = r33
            float r3 = (float) r2
            float r1 = r1 / r3
            r8 = r34
            float r4 = (float) r8
            r5 = r21
            float r6 = (float) r5
            float r4 = r4 / r6
            float r1 = java.lang.Math.min(r1, r4)
            float r3 = r3 * r1
            int r3 = (int) r3
            float r6 = r6 * r1
            int r4 = (int) r6
            java.util.ArrayList<java.lang.Object> r6 = r10.imagesArrLocals
            boolean r6 = r6.isEmpty()
            if (r6 != 0) goto L_0x0514
            int r6 = r10.currentEditMode
            if (r6 == r13) goto L_0x050d
            int r6 = r10.sendPhotoType
            if (r6 != r13) goto L_0x0503
            goto L_0x050d
        L_0x0503:
            org.telegram.messenger.MediaController$CropState r6 = r10.rightCropState
            if (r6 == 0) goto L_0x0514
            boolean r6 = r6.mirrored
            if (r6 == 0) goto L_0x0514
            r6 = 1
            goto L_0x0515
        L_0x050d:
            org.telegram.ui.Components.Crop.CropTransform r6 = r10.rightCropTransform
            boolean r6 = r6.isMirrored()
            goto L_0x0515
        L_0x0514:
            r6 = 0
        L_0x0515:
            if (r6 == 0) goto L_0x051f
            r6 = 1065353216(0x3var_, float:1.0)
            r7 = -1082130432(0xffffffffbvar_, float:-1.0)
            r11.scale(r7, r6)
            goto L_0x0521
        L_0x051f:
            r6 = 1065353216(0x3var_, float:1.0)
        L_0x0521:
            org.telegram.messenger.ImageReceiver r7 = r10.sideImage
            r13 = r32
            r7.setAlpha(r13)
            org.telegram.messenger.ImageReceiver r7 = r10.sideImage
            int r6 = -r3
            r18 = 2
            int r6 = r6 / 2
            r20 = r15
            float r15 = (float) r6
            r34 = r8
            int r8 = -r4
            int r8 = r8 / 2
            r38 = r9
            float r9 = (float) r8
            r21 = r0
            float r0 = (float) r3
            r30 = r12
            float r12 = (float) r4
            r7.setImageCoords(r15, r9, r0, r12)
            org.telegram.messenger.ImageReceiver r0 = r10.sideImage
            r0.draw(r11)
            org.telegram.ui.Components.PaintingOverlay r0 = r10.rightPaintingOverlay
            if (r0 == 0) goto L_0x059d
            int r0 = r0.getVisibility()
            if (r0 != 0) goto L_0x059d
            int r3 = r3 / 2
            int r4 = r4 / 2
            r11.clipRect(r6, r8, r3, r4)
            org.telegram.ui.Components.PaintingOverlay r0 = r10.rightPaintingOverlay
            int r0 = r0.getMeasuredWidth()
            if (r0 != r2) goto L_0x056e
            org.telegram.ui.Components.PaintingOverlay r0 = r10.rightPaintingOverlay
            int r0 = r0.getMeasuredHeight()
            if (r0 == r5) goto L_0x056a
            goto L_0x056e
        L_0x056a:
            r12 = 1073741824(0x40000000, float:2.0)
            r15 = 0
            goto L_0x0583
        L_0x056e:
            org.telegram.ui.Components.PaintingOverlay r0 = r10.rightPaintingOverlay
            r12 = 1073741824(0x40000000, float:2.0)
            int r3 = android.view.View.MeasureSpec.makeMeasureSpec(r2, r12)
            int r4 = android.view.View.MeasureSpec.makeMeasureSpec(r5, r12)
            r0.measure(r3, r4)
            org.telegram.ui.Components.PaintingOverlay r0 = r10.rightPaintingOverlay
            r15 = 0
            r0.layout(r15, r15, r2, r5)
        L_0x0583:
            r11.scale(r1, r1)
            int r0 = -r2
            r1 = 2
            int r0 = r0 / r1
            float r0 = (float) r0
            int r2 = -r5
            int r2 = r2 / r1
            float r1 = (float) r2
            r11.translate(r0, r1)
            org.telegram.ui.Components.PaintingOverlay r0 = r10.rightPaintingOverlay
            r1 = 1065353216(0x3var_, float:1.0)
            r0.setAlpha(r1)
            org.telegram.ui.Components.PaintingOverlay r0 = r10.rightPaintingOverlay
            r0.draw(r11)
            goto L_0x05a0
        L_0x059d:
            r12 = 1073741824(0x40000000, float:2.0)
            r15 = 0
        L_0x05a0:
            r45.restore()
            goto L_0x05b8
        L_0x05a4:
            r21 = r0
            r34 = r4
            r36 = r6
            r38 = r8
            r39 = r9
            r30 = r12
            r17 = r13
            r20 = r15
            r12 = 1073741824(0x40000000, float:2.0)
            r15 = 0
            r13 = r2
        L_0x05b8:
            org.telegram.ui.Components.GroupedPhotosListView r0 = r10.groupedPhotosListView
            float r1 = -r13
            r0.setMoveProgress(r1)
            r45.save()
            float r0 = r14 / r30
            r1 = r21
            r11.translate(r1, r0)
            r0 = r38
            float r1 = (float) r0
            float r2 = r10.scale
            r3 = 1065353216(0x3var_, float:1.0)
            float r2 = r2 + r3
            float r1 = r1 * r2
            int r2 = org.telegram.messenger.AndroidUtilities.dp(r29)
            float r2 = (float) r2
            float r1 = r1 + r2
            r2 = 1073741824(0x40000000, float:2.0)
            float r1 = r1 / r2
            float r2 = -r14
            float r2 = r2 / r30
            r11.translate(r1, r2)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r1 = r10.photoProgressViews
            r2 = 1
            r1 = r1[r2]
            float r8 = r3 - r23
            r1.setScale(r8)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r1 = r10.photoProgressViews
            r1 = r1[r2]
            r1.setAlpha(r13)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r1 = r10.photoProgressViews
            r1 = r1[r2]
            r1.onDraw(r11)
            boolean r1 = r10.isActionBarVisible
            if (r1 == 0) goto L_0x0604
            android.widget.ImageView[] r1 = r10.fullscreenButton
            r1 = r1[r2]
            r1.setAlpha(r13)
        L_0x0604:
            r45.restore()
            goto L_0x0625
        L_0x0608:
            r34 = r4
            r36 = r6
            r0 = r8
            r39 = r9
            r30 = r12
            r17 = r13
            r20 = r15
            r2 = 1
            r12 = 1073741824(0x40000000, float:2.0)
            r15 = 0
            boolean r1 = r10.isActionBarVisible
            if (r1 == 0) goto L_0x0625
            android.widget.ImageView[] r1 = r10.fullscreenButton
            r1 = r1[r2]
            r2 = 0
            r1.setAlpha(r2)
        L_0x0625:
            boolean r1 = r10.zoomAnimation
            if (r1 != 0) goto L_0x064d
            float r1 = r10.maxX
            r13 = r39
            int r2 = (r13 > r1 ? 1 : (r13 == r1 ? 0 : -1))
            if (r2 <= 0) goto L_0x064f
            int r2 = r10.currentEditMode
            if (r2 != 0) goto L_0x064f
            int r2 = r10.sendPhotoType
            r3 = 1
            if (r2 == r3) goto L_0x064f
            float r9 = r13 - r1
            float r1 = (float) r0
            float r9 = r9 / r1
            r1 = 1065353216(0x3var_, float:1.0)
            float r2 = java.lang.Math.min(r1, r9)
            float r3 = r2 * r22
            float r8 = r1 - r2
            float r1 = r10.maxX
            r9 = r8
            r8 = r1
            goto L_0x0653
        L_0x064d:
            r13 = r39
        L_0x064f:
            r8 = r13
            r3 = 0
            r9 = 1065353216(0x3var_, float:1.0)
        L_0x0653:
            boolean r1 = r10.videoSizeSet
            if (r1 == 0) goto L_0x0664
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r1 = r10.aspectRatioFrameLayout
            if (r1 == 0) goto L_0x0664
            int r1 = r1.getVisibility()
            if (r1 != 0) goto L_0x0664
            r31 = 1
            goto L_0x0666
        L_0x0664:
            r31 = 0
        L_0x0666:
            org.telegram.messenger.ImageReceiver r1 = r10.centerImage
            boolean r1 = r1.hasBitmapImage()
            if (r1 != 0) goto L_0x0682
            if (r31 == 0) goto L_0x0675
            boolean r1 = r10.textureUploaded
            if (r1 == 0) goto L_0x0675
            goto L_0x0682
        L_0x0675:
            r38 = r0
            r32 = r8
            r39 = r13
            r43 = r14
            r12 = -1082130432(0xffffffffbvar_, float:-1.0)
            r13 = r9
            goto L_0x0cb3
        L_0x0682:
            r45.save()
            int r1 = r0 / 2
            int r2 = r44.getAdditionX()
            int r1 = r1 + r2
            float r1 = (float) r1
            int r4 = r34 / 2
            int r2 = r44.getAdditionY()
            int r4 = r4 + r2
            float r2 = (float) r4
            r11.translate(r1, r2)
            int r1 = r10.currentEditMode
            r2 = 3
            if (r1 == r2) goto L_0x06a0
            float r1 = r10.currentPanTranslationY
            goto L_0x06a5
        L_0x06a0:
            float r1 = r10.currentPanTranslationY
            r2 = 1073741824(0x40000000, float:2.0)
            float r1 = r1 / r2
        L_0x06a5:
            float r1 = r1 + r14
            r11.translate(r8, r1)
            float r7 = r30 - r3
            r11.scale(r7, r7)
            r1 = r20
            r11.rotate(r1)
            int r1 = r10.currentEditMode
            r2 = 3
            if (r1 != r2) goto L_0x06d5
            int r1 = r10.keyboardSize
            r2 = 1101004800(0x41a00000, float:20.0)
            int r2 = org.telegram.messenger.AndroidUtilities.dp(r2)
            if (r1 <= r2) goto L_0x06d5
            r1 = 1
            int r2 = r10.getContainerViewHeight(r1, r15)
            int r1 = r10.getContainerViewHeight(r15, r15)
            if (r2 == r1) goto L_0x06d5
            int r2 = r2 - r1
            r1 = 2
            int r2 = r2 / r1
            float r1 = (float) r2
            r2 = 0
            r11.translate(r2, r1)
        L_0x06d5:
            boolean r1 = r10.pipAnimationInProgress
            if (r1 != 0) goto L_0x07ac
            if (r31 == 0) goto L_0x06ef
            boolean r1 = r10.textureUploaded
            if (r1 != 0) goto L_0x06e3
            boolean r1 = r10.videoSizeSet
            if (r1 == 0) goto L_0x06ef
        L_0x06e3:
            boolean r1 = r10.videoCrossfadeStarted
            if (r1 == 0) goto L_0x06ef
            float r1 = r10.videoCrossfadeAlpha
            r2 = 1065353216(0x3var_, float:1.0)
            int r1 = (r1 > r2 ? 1 : (r1 == r2 ? 0 : -1))
            if (r1 == 0) goto L_0x07ac
        L_0x06ef:
            android.graphics.Bitmap r1 = r10.videoFrameBitmap
            if (r1 == 0) goto L_0x0751
            boolean r2 = r10.isCurrentVideo
            if (r2 == 0) goto L_0x0751
            int r1 = r1.getWidth()
            android.graphics.Bitmap r2 = r10.videoFrameBitmap
            int r2 = r2.getHeight()
            int r3 = -r1
            r4 = 2
            int r6 = r3 / 2
            int r3 = -r2
            int r5 = r3 / 2
            r20 = 1065353216(0x3var_, float:1.0)
            int r3 = (r9 > r20 ? 1 : (r9 == r20 ? 0 : -1))
            if (r3 >= 0) goto L_0x0735
            float r3 = (float) r6
            float r4 = (float) r5
            int r1 = r1 + r6
            float r1 = (float) r1
            int r2 = r2 + r5
            float r2 = (float) r2
            float r12 = r9 * r27
            int r12 = (int) r12
            r21 = 31
            r22 = r1
            r1 = r45
            r23 = r2
            r2 = r3
            r3 = r4
            r4 = r22
            r15 = r5
            r5 = r23
            r32 = r8
            r39 = r13
            r13 = 1065353216(0x3var_, float:1.0)
            r8 = r6
            r6 = r12
            r12 = r7
            r7 = r21
            r1.saveLayerAlpha(r2, r3, r4, r5, r6, r7)
            goto L_0x073e
        L_0x0735:
            r15 = r5
            r12 = r7
            r32 = r8
            r39 = r13
            r13 = 1065353216(0x3var_, float:1.0)
            r8 = r6
        L_0x073e:
            android.graphics.Bitmap r1 = r10.videoFrameBitmap
            float r2 = (float) r8
            float r3 = (float) r15
            android.graphics.Paint r4 = r10.videoFrameBitmapPaint
            r11.drawBitmap(r1, r2, r3, r4)
            int r1 = (r9 > r13 ? 1 : (r9 == r13 ? 0 : -1))
            if (r1 >= 0) goto L_0x074e
            r45.restore()
        L_0x074e:
            r8 = r34
            goto L_0x07b5
        L_0x0751:
            r12 = r7
            r32 = r8
            r39 = r13
            r13 = 1065353216(0x3var_, float:1.0)
            org.telegram.messenger.ImageReceiver r1 = r10.centerImage
            r1.setAlpha(r9)
            org.telegram.messenger.ImageReceiver r1 = r10.centerImage
            int r1 = r1.getBitmapWidth()
            org.telegram.messenger.ImageReceiver r2 = r10.centerImage
            int r2 = r2.getBitmapHeight()
            boolean r3 = r10.isCurrentVideo
            if (r3 == 0) goto L_0x077e
            int r3 = r10.currentEditMode
            if (r3 != 0) goto L_0x077e
            int r3 = r10.sendPhotoType
            r4 = 1
            if (r3 != r4) goto L_0x077e
            r3 = 0
            float r4 = r10.getCropFillScale(r3)
            r8 = r34
            goto L_0x078a
        L_0x077e:
            float r3 = (float) r0
            float r4 = (float) r1
            float r3 = r3 / r4
            r8 = r34
            float r4 = (float) r8
            float r5 = (float) r2
            float r4 = r4 / r5
            float r4 = java.lang.Math.min(r3, r4)
        L_0x078a:
            float r1 = (float) r1
            float r1 = r1 * r4
            int r1 = (int) r1
            float r2 = (float) r2
            float r2 = r2 * r4
            int r2 = (int) r2
            org.telegram.messenger.ImageReceiver r3 = r10.centerImage
            int r4 = -r1
            r5 = 2
            int r4 = r4 / r5
            float r4 = (float) r4
            int r6 = -r2
            int r6 = r6 / r5
            float r5 = (float) r6
            float r1 = (float) r1
            float r2 = (float) r2
            r3.setImageCoords(r4, r5, r1, r2)
            boolean r1 = r10.isCurrentVideo
            if (r1 == 0) goto L_0x07aa
            org.telegram.messenger.ImageReceiver r1 = r10.centerImage
            r1.draw(r11)
            goto L_0x07b5
        L_0x07aa:
            r1 = 1
            goto L_0x07b6
        L_0x07ac:
            r12 = r7
            r32 = r8
            r39 = r13
            r8 = r34
            r13 = 1065353216(0x3var_, float:1.0)
        L_0x07b5:
            r1 = 0
        L_0x07b6:
            if (r31 == 0) goto L_0x07cd
            boolean r2 = r10.textureUploaded
            if (r2 == 0) goto L_0x07cd
            boolean r2 = r10.videoSizeSet
            if (r2 == 0) goto L_0x07cd
            android.view.TextureView r2 = r10.videoTextureView
            int r2 = r2.getMeasuredWidth()
            android.view.TextureView r3 = r10.videoTextureView
            int r3 = r3.getMeasuredHeight()
            goto L_0x07d9
        L_0x07cd:
            org.telegram.messenger.ImageReceiver r2 = r10.centerImage
            int r2 = r2.getBitmapWidth()
            org.telegram.messenger.ImageReceiver r3 = r10.centerImage
            int r3 = r3.getBitmapHeight()
        L_0x07d9:
            float r4 = (float) r0
            float r5 = (float) r2
            float r6 = r4 / r5
            float r7 = (float) r8
            float r15 = (float) r3
            float r13 = r7 / r15
            r20 = r2
            float r2 = java.lang.Math.min(r6, r13)
            r21 = r3
            float r3 = r5 * r2
            int r3 = (int) r3
            r22 = r13
            float r13 = r15 * r2
            int r13 = (int) r13
            r34 = r8
            java.util.ArrayList<java.lang.Object> r8 = r10.imagesArrLocals
            boolean r8 = r8.isEmpty()
            r38 = r0
            if (r8 != 0) goto L_0x082e
            int r8 = r10.currentEditMode
            r0 = 3
            r35 = r9
            if (r8 == r0) goto L_0x082a
            int r9 = r10.switchingToMode
            if (r9 != r0) goto L_0x0809
            goto L_0x082a
        L_0x0809:
            int r0 = r10.sendPhotoType
            r40 = r13
            r13 = 1
            if (r0 != r13) goto L_0x0819
            if (r9 == 0) goto L_0x082c
            r0 = 3
            if (r8 == r0) goto L_0x0832
            r9 = 2
            if (r8 == r9) goto L_0x0832
            goto L_0x082c
        L_0x0819:
            android.animation.AnimatorSet r0 = r10.imageMoveAnimation
            if (r0 == 0) goto L_0x0821
            r0 = -1
            if (r9 != r0) goto L_0x082c
            goto L_0x0822
        L_0x0821:
            r0 = -1
        L_0x0822:
            if (r8 == 0) goto L_0x082c
            r13 = 1
            if (r8 == r13) goto L_0x082c
            if (r9 == r0) goto L_0x0832
            goto L_0x082c
        L_0x082a:
            r40 = r13
        L_0x082c:
            r9 = 1
            goto L_0x0833
        L_0x082e:
            r35 = r9
            r40 = r13
        L_0x0832:
            r9 = 0
        L_0x0833:
            if (r9 == 0) goto L_0x0a3e
            org.telegram.ui.Components.Crop.CropTransform r8 = r10.cropTransform
            int r8 = r8.getOrientation()
            r9 = 90
            if (r8 == r9) goto L_0x0849
            r9 = 270(0x10e, float:3.78E-43)
            if (r8 != r9) goto L_0x0844
            goto L_0x0849
        L_0x0844:
            r9 = r20
            r13 = r21
            goto L_0x084d
        L_0x0849:
            r13 = r20
            r9 = r21
        L_0x084d:
            int r0 = r10.sendPhotoType
            r41 = r3
            r3 = 1
            if (r0 == r3) goto L_0x0862
            int r0 = r10.currentEditMode
            r3 = 3
            if (r0 == r3) goto L_0x085d
            int r0 = r10.switchingToMode
            if (r0 != r3) goto L_0x0862
        L_0x085d:
            r42 = r1
        L_0x085f:
            r0 = 1065353216(0x3var_, float:1.0)
            goto L_0x0895
        L_0x0862:
            android.animation.AnimatorSet r0 = r10.imageMoveAnimation
            if (r0 == 0) goto L_0x088a
            int r0 = r10.switchingToMode
            r3 = -1
            if (r0 == r3) goto L_0x088a
            int r3 = r10.currentEditMode
            r42 = r1
            r1 = 1
            if (r3 == r1) goto L_0x085f
            if (r0 == r1) goto L_0x085f
            r1 = 2
            if (r3 == r1) goto L_0x087a
            r1 = 3
            if (r3 != r1) goto L_0x087e
        L_0x087a:
            r1 = -1
            if (r0 != r1) goto L_0x087e
            goto L_0x085f
        L_0x087e:
            if (r0 != 0) goto L_0x0883
            float r0 = r10.animationValue
            goto L_0x0895
        L_0x0883:
            float r0 = r10.animationValue
            r1 = 1065353216(0x3var_, float:1.0)
            float r0 = r1 - r0
            goto L_0x0895
        L_0x088a:
            r42 = r1
            int r0 = r10.currentEditMode
            r1 = 2
            if (r0 == r1) goto L_0x0894
            r1 = 3
            if (r0 != r1) goto L_0x085f
        L_0x0894:
            r0 = 0
        L_0x0895:
            org.telegram.ui.Components.Crop.CropTransform r1 = r10.cropTransform
            float r1 = r1.getCropPw()
            org.telegram.ui.Components.Crop.CropTransform r3 = r10.cropTransform
            float r3 = r3.getCropPh()
            float r9 = (float) r9
            r20 = 1065353216(0x3var_, float:1.0)
            float r21 = r20 - r1
            float r23 = r20 - r0
            float r21 = r21 * r23
            float r1 = r1 + r21
            float r1 = r1 * r9
            int r1 = (int) r1
            float r13 = (float) r13
            float r21 = r20 - r3
            float r21 = r21 * r23
            float r3 = r3 + r21
            float r3 = r3 * r13
            int r3 = (int) r3
            r43 = r14
            float r14 = (float) r1
            float r20 = r4 / r14
            r21 = r1
            float r1 = (float) r3
            float r24 = r20 * r1
            int r24 = (r24 > r7 ? 1 : (r24 == r7 ? 0 : -1))
            if (r24 <= 0) goto L_0x08c9
            float r20 = r7 / r1
        L_0x08c9:
            r24 = r3
            int r3 = r10.sendPhotoType
            r25 = r8
            r8 = 1
            if (r3 == r8) goto L_0x0905
            int r3 = r10.currentEditMode
            if (r3 != r8) goto L_0x08da
            int r3 = r10.switchingToMode
            if (r3 != 0) goto L_0x0905
        L_0x08da:
            org.telegram.ui.PhotoViewer$EditState r3 = r10.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            if (r3 == 0) goto L_0x0905
            float r14 = r14 * r20
            float r1 = r1 * r20
            float r3 = r6 * r15
            int r3 = (r3 > r7 ? 1 : (r3 == r7 ? 0 : -1))
            if (r3 <= 0) goto L_0x08ec
            r6 = r22
        L_0x08ec:
            float r5 = r5 * r6
            float r5 = r5 / r12
            float r15 = r15 * r6
            float r15 = r15 / r12
            float r5 = r5 - r14
            float r5 = r5 * r23
            float r14 = r14 + r5
            float r15 = r15 - r1
            float r15 = r15 * r23
            float r1 = r1 + r15
            float r3 = -r14
            r5 = 1073741824(0x40000000, float:2.0)
            float r3 = r3 / r5
            float r6 = -r1
            float r6 = r6 / r5
            float r14 = r14 / r5
            float r1 = r1 / r5
            r11.clipRect(r3, r6, r14, r1)
        L_0x0905:
            int r1 = r10.sendPhotoType
            r3 = 1
            if (r1 == r3) goto L_0x092f
            org.telegram.ui.Components.Crop.CropTransform r1 = r10.cropTransform
            boolean r1 = r1.hasViewTransform()
            if (r1 == 0) goto L_0x0913
            goto L_0x092f
        L_0x0913:
            android.view.TextureView r0 = r10.videoTextureView
            if (r0 == 0) goto L_0x0a37
            r1 = 1065353216(0x3var_, float:1.0)
            r0.setScaleX(r1)
            android.view.TextureView r0 = r10.videoTextureView
            r0.setScaleY(r1)
            org.telegram.ui.PhotoViewer$FirstFrameView r0 = r10.firstFrameView
            if (r0 == 0) goto L_0x0a37
            r0.setScaleX(r1)
            org.telegram.ui.PhotoViewer$FirstFrameView r0 = r10.firstFrameView
            r0.setScaleY(r1)
            goto L_0x0a37
        L_0x092f:
            int r1 = r10.currentEditMode
            r3 = 1
            if (r1 == r3) goto L_0x0976
            int r1 = r10.sendPhotoType
            if (r1 != r3) goto L_0x0939
            goto L_0x0976
        L_0x0939:
            android.view.TextureView r1 = r10.videoTextureView
            if (r1 == 0) goto L_0x095c
            org.telegram.ui.PhotoViewer$EditState r3 = r10.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            if (r3 == 0) goto L_0x094a
            boolean r3 = r3.mirrored
            if (r3 == 0) goto L_0x094a
            r8 = -1082130432(0xffffffffbvar_, float:-1.0)
            goto L_0x094c
        L_0x094a:
            r8 = 1065353216(0x3var_, float:1.0)
        L_0x094c:
            r1.setScaleX(r8)
            org.telegram.ui.PhotoViewer$FirstFrameView r1 = r10.firstFrameView
            if (r1 == 0) goto L_0x095c
            android.view.TextureView r3 = r10.videoTextureView
            float r3 = r3.getScaleX()
            r1.setScaleX(r3)
        L_0x095c:
            org.telegram.ui.PhotoViewer$EditState r1 = r10.editState
            org.telegram.messenger.MediaController$CropState r1 = r1.cropState
            if (r1 == 0) goto L_0x0967
            float r8 = r1.cropScale
            r1 = 1065353216(0x3var_, float:1.0)
            goto L_0x096b
        L_0x0967:
            r1 = 1065353216(0x3var_, float:1.0)
            r8 = 1065353216(0x3var_, float:1.0)
        L_0x096b:
            float r3 = r8 - r1
            float r3 = r3 * r23
            float r3 = r3 + r1
            float r1 = r20 / r2
            float r1 = r1 / r3
            float r8 = r8 * r1
            goto L_0x09dc
        L_0x0976:
            android.view.TextureView r1 = r10.videoTextureView
            if (r1 == 0) goto L_0x0997
            org.telegram.ui.Components.Crop.CropTransform r3 = r10.cropTransform
            boolean r3 = r3.isMirrored()
            if (r3 == 0) goto L_0x0985
            r8 = -1082130432(0xffffffffbvar_, float:-1.0)
            goto L_0x0987
        L_0x0985:
            r8 = 1065353216(0x3var_, float:1.0)
        L_0x0987:
            r1.setScaleX(r8)
            org.telegram.ui.PhotoViewer$FirstFrameView r1 = r10.firstFrameView
            if (r1 == 0) goto L_0x0997
            android.view.TextureView r3 = r10.videoTextureView
            float r3 = r3.getScaleX()
            r1.setScaleX(r3)
        L_0x0997:
            org.telegram.ui.Components.Crop.CropTransform r1 = r10.cropTransform
            float r1 = r1.getTrueCropScale()
            r3 = 1065353216(0x3var_, float:1.0)
            float r1 = r1 - r3
            float r1 = r1 * r23
            float r1 = r1 + r3
            org.telegram.ui.Components.Crop.CropTransform r3 = r10.cropTransform
            float r3 = r3.getScale()
            float r3 = r3 / r1
            float r4 = r4 / r9
            float r1 = r4 * r13
            int r1 = (r1 > r7 ? 1 : (r1 == r7 ? 0 : -1))
            if (r1 <= 0) goto L_0x09b3
            float r4 = r7 / r13
        L_0x09b3:
            float r4 = r4 / r2
            float r3 = r3 * r4
            int r1 = r10.sendPhotoType
            r4 = 1
            if (r1 != r4) goto L_0x09db
            int r1 = r10.currentEditMode
            r4 = 3
            if (r1 == r4) goto L_0x09ce
            int r1 = r10.switchingToMode
            if (r1 != r4) goto L_0x09c5
            goto L_0x09ce
        L_0x09c5:
            if (r1 != 0) goto L_0x09db
            org.telegram.ui.Components.Crop.CropTransform r1 = r10.cropTransform
            float r1 = r1.getMinScale()
            goto L_0x09da
        L_0x09ce:
            org.telegram.ui.Components.Crop.CropTransform r1 = r10.cropTransform
            float r1 = r1.getMinScale()
            r4 = 1065353216(0x3var_, float:1.0)
            float r1 = r1 - r4
            float r1 = r1 * r23
            float r1 = r1 + r4
        L_0x09da:
            float r3 = r3 / r1
        L_0x09db:
            r8 = r3
        L_0x09dc:
            org.telegram.ui.Components.Crop.CropTransform r1 = r10.cropTransform
            float r1 = r1.getCropAreaX()
            float r1 = r1 * r0
            org.telegram.ui.Components.Crop.CropTransform r3 = r10.cropTransform
            float r3 = r3.getCropAreaY()
            float r3 = r3 * r0
            r11.translate(r1, r3)
            r11.scale(r8, r8)
            org.telegram.ui.Components.Crop.CropTransform r1 = r10.cropTransform
            float r1 = r1.getCropPx()
            float r1 = r1 * r9
            float r1 = r1 * r2
            float r1 = r1 * r0
            org.telegram.ui.Components.Crop.CropTransform r3 = r10.cropTransform
            float r3 = r3.getCropPy()
            float r3 = r3 * r13
            float r3 = r3 * r2
            float r3 = r3 * r0
            r11.translate(r1, r3)
            org.telegram.ui.Components.Crop.CropTransform r1 = r10.cropTransform
            float r1 = r1.getRotation()
            r3 = r25
            float r3 = (float) r3
            float r1 = r1 + r3
            r3 = 1127481344(0x43340000, float:180.0)
            int r4 = (r1 > r3 ? 1 : (r1 == r3 ? 0 : -1))
            if (r4 <= 0) goto L_0x0a20
            r3 = 1135869952(0x43b40000, float:360.0)
            float r1 = r1 - r3
        L_0x0a20:
            int r3 = r10.sendPhotoType
            r4 = 1
            if (r3 != r4) goto L_0x0a32
            int r3 = r10.currentEditMode
            r4 = 3
            if (r3 == r4) goto L_0x0a2e
            int r3 = r10.switchingToMode
            if (r3 != r4) goto L_0x0a32
        L_0x0a2e:
            r11.rotate(r1)
            goto L_0x0a37
        L_0x0a32:
            float r1 = r1 * r0
            r11.rotate(r1)
        L_0x0a37:
            r8 = r20
            r0 = r21
            r3 = r24
            goto L_0x0a4a
        L_0x0a3e:
            r42 = r1
            r41 = r3
            r43 = r14
            r0 = r20
            r3 = r21
            r8 = 1065353216(0x3var_, float:1.0)
        L_0x0a4a:
            int r1 = r10.currentEditMode
            r4 = 3
            if (r1 != r4) goto L_0x0a78
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r10.containerView
            org.telegram.ui.ActionBar.AdjustPanLayoutHelper r1 = r1.adjustPanLayoutHelper
            boolean r1 = r1.animationInProgress()
            if (r1 == 0) goto L_0x0a64
            int r1 = r10.keyboardSize
            float r1 = (float) r1
            r4 = 1073741824(0x40000000, float:2.0)
            float r1 = r1 / r4
            float r5 = r10.currentPanTranslationY
            float r5 = r5 / r4
            float r1 = r1 + r5
            goto L_0x0a65
        L_0x0a64:
            r1 = 0
        L_0x0a65:
            org.telegram.ui.Components.PhotoPaintView r4 = r10.photoPaintView
            float r24 = r43 + r1
            float r0 = (float) r0
            float r25 = r0 * r8
            float r0 = (float) r3
            float r26 = r0 * r8
            r21 = r4
            r22 = r30
            r23 = r39
            r21.setTransform(r22, r23, r24, r25, r26)
        L_0x0a78:
            r0 = 1048576000(0x3e800000, float:0.25)
            if (r42 == 0) goto L_0x0af1
            java.util.ArrayList<java.lang.Object> r1 = r10.imagesArrLocals
            boolean r1 = r1.isEmpty()
            if (r1 != 0) goto L_0x0aa4
            int r1 = r10.currentEditMode
            r3 = 1
            if (r1 == r3) goto L_0x0a9d
            int r1 = r10.sendPhotoType
            if (r1 != r3) goto L_0x0a8e
            goto L_0x0a9d
        L_0x0a8e:
            org.telegram.ui.PhotoViewer$EditState r1 = r10.editState
            org.telegram.messenger.MediaController$CropState r1 = r1.cropState
            if (r1 == 0) goto L_0x0a9a
            boolean r1 = r1.mirrored
            if (r1 == 0) goto L_0x0a9a
            r9 = 1
            goto L_0x0a9b
        L_0x0a9a:
            r9 = 0
        L_0x0a9b:
            r4 = r9
            goto L_0x0aa5
        L_0x0a9d:
            org.telegram.ui.Components.Crop.CropTransform r1 = r10.cropTransform
            boolean r4 = r1.isMirrored()
            goto L_0x0aa5
        L_0x0aa4:
            r4 = 0
        L_0x0aa5:
            if (r4 == 0) goto L_0x0ab4
            r45.save()
            r1 = 1065353216(0x3var_, float:1.0)
            r12 = -1082130432(0xffffffffbvar_, float:-1.0)
            r11.scale(r12, r1)
            r3 = 0
            r9 = 1
            goto L_0x0aba
        L_0x0ab4:
            r1 = 1065353216(0x3var_, float:1.0)
            r12 = -1082130432(0xffffffffbvar_, float:-1.0)
            r3 = 0
            r9 = 0
        L_0x0aba:
            int r4 = (r17 > r3 ? 1 : (r17 == r3 ? 0 : -1))
            if (r4 <= 0) goto L_0x0adc
            if (r9 != 0) goto L_0x0ac7
            r45.save()
            r3 = 1073741824(0x40000000, float:2.0)
            r9 = 1
            goto L_0x0ac9
        L_0x0ac7:
            r3 = 1073741824(0x40000000, float:2.0)
        L_0x0ac9:
            float r13 = r17 * r3
            float r8 = r1 - r13
            r11.scale(r8, r1)
            float r13 = r17 * r28
            float r8 = r1 - r17
            float r13 = r13 * r8
            float r13 = r13 * r0
            r1 = 0
            r11.skew(r1, r13)
        L_0x0adc:
            org.telegram.ui.Components.PhotoViewerWebView r1 = r10.photoViewerWebView
            if (r1 == 0) goto L_0x0ae6
            boolean r1 = r1.isLoaded()
            if (r1 != 0) goto L_0x0aeb
        L_0x0ae6:
            org.telegram.messenger.ImageReceiver r1 = r10.centerImage
            r1.draw(r11)
        L_0x0aeb:
            if (r9 == 0) goto L_0x0af3
            r45.restore()
            goto L_0x0af3
        L_0x0af1:
            r12 = -1082130432(0xffffffffbvar_, float:-1.0)
        L_0x0af3:
            r1 = 0
            int r3 = (r17 > r1 ? 1 : (r17 == r1 ? 0 : -1))
            if (r3 <= 0) goto L_0x0b15
            r45.save()
            r3 = 1073741824(0x40000000, float:2.0)
            float r13 = r17 * r3
            r3 = 1065353216(0x3var_, float:1.0)
            float r8 = r3 - r13
            r11.scale(r8, r3)
            float r13 = r17 * r28
            float r8 = r3 - r17
            float r13 = r13 * r8
            float r13 = r13 * r0
            r11.skew(r1, r13)
            r0 = r41
            r9 = 1
            goto L_0x0b18
        L_0x0b15:
            r0 = r41
            r9 = 0
        L_0x0b18:
            int r1 = -r0
            r3 = 2
            int r1 = r1 / r3
            float r1 = (float) r1
            r4 = r40
            int r5 = -r4
            int r5 = r5 / r3
            float r3 = (float) r5
            r11.translate(r1, r3)
            if (r31 != 0) goto L_0x0b2e
            org.telegram.ui.Components.PaintingOverlay r5 = r10.paintingOverlay
            int r5 = r5.getVisibility()
            if (r5 != 0) goto L_0x0b31
        L_0x0b2e:
            r11.scale(r2, r2)
        L_0x0b31:
            if (r31 == 0) goto L_0x0bbb
            boolean r5 = r10.videoCrossfadeStarted
            if (r5 != 0) goto L_0x0b50
            boolean r5 = r10.textureUploaded
            if (r5 == 0) goto L_0x0b50
            boolean r5 = r10.videoSizeSet
            if (r5 == 0) goto L_0x0b50
            r5 = 1
            r10.videoCrossfadeStarted = r5
            r5 = 0
            r10.videoCrossfadeAlpha = r5
            long r5 = java.lang.System.currentTimeMillis()
            r10.videoCrossfadeAlphaLastTime = r5
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r5 = r10.containerView
            r5.getMeasuredHeight()
        L_0x0b50:
            android.view.TextureView r5 = r10.videoTextureView
            float r6 = r10.videoCrossfadeAlpha
            float r6 = r6 * r35
            r5.setAlpha(r6)
            android.view.TextureView r5 = r10.videoTextureView
            boolean r6 = r5 instanceof org.telegram.ui.Components.VideoEditTextureView
            if (r6 == 0) goto L_0x0b80
            org.telegram.ui.Components.VideoEditTextureView r5 = (org.telegram.ui.Components.VideoEditTextureView) r5
            int r8 = r38 - r0
            r6 = 2
            int r8 = r8 / r6
            int r7 = r44.getAdditionX()
            int r8 = r8 + r7
            float r7 = (float) r8
            float r7 = r7 + r32
            int r8 = r34 - r4
            int r8 = r8 / r6
            int r6 = r44.getAdditionY()
            int r8 = r8 + r6
            float r6 = (float) r8
            float r6 = r6 + r43
            float r8 = r10.currentPanTranslationY
            float r6 = r6 + r8
            float r0 = (float) r0
            float r4 = (float) r4
            r5.setViewRect(r7, r6, r0, r4)
        L_0x0b80:
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r0 = r10.aspectRatioFrameLayout
            r0.draw(r11)
            boolean r0 = r10.videoCrossfadeStarted
            if (r0 == 0) goto L_0x0bb1
            float r0 = r10.videoCrossfadeAlpha
            r4 = 1065353216(0x3var_, float:1.0)
            int r5 = (r0 > r4 ? 1 : (r0 == r4 ? 0 : -1))
            if (r5 >= 0) goto L_0x0bb1
            r4 = r36
            float r6 = (float) r4
            boolean r7 = r10.playerInjected
            if (r7 == 0) goto L_0x0b9b
            r7 = 1120403456(0x42CLASSNAME, float:100.0)
            goto L_0x0b9d
        L_0x0b9b:
            r7 = 1128792064(0x43480000, float:200.0)
        L_0x0b9d:
            float r6 = r6 / r7
            float r0 = r0 + r6
            r10.videoCrossfadeAlpha = r0
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r10.containerView
            r0.invalidate()
            float r0 = r10.videoCrossfadeAlpha
            r6 = 1065353216(0x3var_, float:1.0)
            int r0 = (r0 > r6 ? 1 : (r0 == r6 ? 0 : -1))
            if (r0 <= 0) goto L_0x0bb3
            r10.videoCrossfadeAlpha = r6
            goto L_0x0bb3
        L_0x0bb1:
            r4 = r36
        L_0x0bb3:
            org.telegram.ui.Components.PaintingOverlay r0 = r10.paintingOverlay
            r13 = r35
            r0.setAlpha(r13)
            goto L_0x0bbf
        L_0x0bbb:
            r13 = r35
            r4 = r36
        L_0x0bbf:
            if (r9 == 0) goto L_0x0bd4
            r45.restore()
            r11.translate(r1, r3)
            if (r31 != 0) goto L_0x0bd1
            org.telegram.ui.Components.PaintingOverlay r0 = r10.paintingOverlay
            int r0 = r0.getVisibility()
            if (r0 != 0) goto L_0x0bd4
        L_0x0bd1:
            r11.scale(r2, r2)
        L_0x0bd4:
            org.telegram.ui.Components.PaintingOverlay r0 = r10.paintingOverlay
            int r0 = r0.getVisibility()
            if (r0 != 0) goto L_0x0bff
            boolean r0 = r10.isCurrentVideo
            if (r0 != 0) goto L_0x0bea
            int r0 = r10.currentEditMode
            r1 = 2
            if (r0 != r1) goto L_0x0bea
            int r0 = r10.switchingToMode
            r1 = -1
            if (r0 == r1) goto L_0x0bff
        L_0x0bea:
            org.telegram.ui.Components.PaintingOverlay r0 = r10.paintingOverlay
            int r0 = r0.getMeasuredWidth()
            org.telegram.ui.Components.PaintingOverlay r1 = r10.paintingOverlay
            int r1 = r1.getMeasuredHeight()
            r2 = 0
            r11.clipRect(r2, r2, r0, r1)
            org.telegram.ui.Components.PaintingOverlay r0 = r10.paintingOverlay
            r0.draw(r11)
        L_0x0bff:
            r45.restore()
            r0 = 0
        L_0x0CLASSNAME:
            android.graphics.drawable.GradientDrawable[] r1 = r10.pressedDrawable
            int r2 = r1.length
            if (r0 >= r2) goto L_0x0cb3
            boolean[] r2 = r10.drawPressedDrawable
            boolean r2 = r2[r0]
            if (r2 != 0) goto L_0x0CLASSNAME
            float[] r2 = r10.pressedDrawableAlpha
            r2 = r2[r0]
            r3 = 0
            int r2 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r2 == 0) goto L_0x0CLASSNAME
        L_0x0CLASSNAME:
            r1 = r1[r0]
            float[] r2 = r10.pressedDrawableAlpha
            r2 = r2[r0]
            float r2 = r2 * r27
            int r2 = (int) r2
            r1.setAlpha(r2)
            if (r0 != 0) goto L_0x0c3c
            android.graphics.drawable.GradientDrawable[] r1 = r10.pressedDrawable
            r1 = r1[r0]
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r2 = r10.containerView
            int r2 = r2.getMeasuredWidth()
            int r2 = r2 / 5
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r10.containerView
            int r3 = r3.getMeasuredHeight()
            r6 = 0
            r1.setBounds(r6, r6, r2, r3)
            goto L_0x0c5f
        L_0x0c3c:
            android.graphics.drawable.GradientDrawable[] r1 = r10.pressedDrawable
            r1 = r1[r0]
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r2 = r10.containerView
            int r2 = r2.getMeasuredWidth()
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r10.containerView
            int r3 = r3.getMeasuredWidth()
            int r3 = r3 / 5
            int r2 = r2 - r3
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r10.containerView
            int r3 = r3.getMeasuredWidth()
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r6 = r10.containerView
            int r6 = r6.getMeasuredHeight()
            r7 = 0
            r1.setBounds(r2, r7, r3, r6)
        L_0x0c5f:
            android.graphics.drawable.GradientDrawable[] r1 = r10.pressedDrawable
            r1 = r1[r0]
            r1.draw(r11)
        L_0x0CLASSNAME:
            boolean[] r1 = r10.drawPressedDrawable
            boolean r1 = r1[r0]
            if (r1 == 0) goto L_0x0c8d
            float[] r1 = r10.pressedDrawableAlpha
            r2 = r1[r0]
            r3 = 1065353216(0x3var_, float:1.0)
            int r2 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r2 >= 0) goto L_0x0cad
            r2 = r1[r0]
            float r6 = (float) r4
            r7 = 1127481344(0x43340000, float:180.0)
            float r6 = r6 / r7
            float r2 = r2 + r6
            r1[r0] = r2
            r2 = r1[r0]
            int r2 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r2 <= 0) goto L_0x0CLASSNAME
            r1[r0] = r3
        L_0x0CLASSNAME:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r10.containerView
            r1.invalidate()
            goto L_0x0cad
        L_0x0c8d:
            float[] r1 = r10.pressedDrawableAlpha
            r2 = r1[r0]
            r3 = 0
            int r2 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r2 <= 0) goto L_0x0cad
            r2 = r1[r0]
            float r6 = (float) r4
            r7 = 1127481344(0x43340000, float:180.0)
            float r6 = r6 / r7
            float r2 = r2 - r6
            r1[r0] = r2
            r2 = r1[r0]
            int r2 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r2 >= 0) goto L_0x0ca7
            r1[r0] = r3
        L_0x0ca7:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r10.containerView
            r1.invalidate()
            goto L_0x0caf
        L_0x0cad:
            r7 = 1127481344(0x43340000, float:180.0)
        L_0x0caf:
            int r0 = r0 + 1
            goto L_0x0CLASSNAME
        L_0x0cb3:
            r1 = r44
            r2 = r45
            r3 = r32
            r4 = r30
            r5 = r43
            r6 = r13
            r1.drawProgress(r2, r3, r4, r5, r6)
            org.telegram.messenger.ImageReceiver r0 = r10.sideImage
            org.telegram.messenger.ImageReceiver r1 = r10.leftImage
            if (r0 != r1) goto L_0x0e34
            boolean r0 = r0.hasBitmapImage()
            if (r0 == 0) goto L_0x0dde
            r45.save()
            int r8 = r38 / 2
            float r0 = (float) r8
            int r4 = r34 / 2
            float r1 = (float) r4
            r11.translate(r0, r1)
            r0 = r38
            float r14 = (float) r0
            float r1 = r10.scale
            r2 = 1065353216(0x3var_, float:1.0)
            float r1 = r1 + r2
            float r1 = r1 * r14
            int r2 = org.telegram.messenger.AndroidUtilities.dp(r29)
            float r2 = (float) r2
            float r1 = r1 + r2
            float r1 = -r1
            r2 = 1073741824(0x40000000, float:2.0)
            float r1 = r1 / r2
            float r1 = r1 + r39
            r2 = 0
            r11.translate(r1, r2)
            org.telegram.messenger.ImageReceiver r1 = r10.sideImage
            int r15 = r1.getBitmapWidth()
            org.telegram.messenger.ImageReceiver r1 = r10.sideImage
            int r9 = r1.getBitmapHeight()
            boolean r1 = r10.leftImageIsVideo
            if (r1 != 0) goto L_0x0d2b
            org.telegram.messenger.MediaController$CropState r1 = r10.leftCropState
            if (r1 == 0) goto L_0x0d2b
            org.telegram.ui.Components.Crop.CropTransform r1 = r10.leftCropTransform
            boolean r1 = r1.hasViewTransform()
            if (r1 == 0) goto L_0x0d2b
            org.telegram.ui.Components.Crop.CropTransform r8 = r10.leftCropTransform
            org.telegram.messenger.MediaController$CropState r7 = r10.leftCropState
            r1 = r44
            r2 = r45
            r3 = r0
            r4 = r34
            r5 = r15
            r6 = r9
            r16 = r7
            r7 = r30
            r12 = r34
            r17 = r13
            r13 = r9
            r9 = r16
            r1.applyCrop(r2, r3, r4, r5, r6, r7, r8, r9)
            goto L_0x0d30
        L_0x0d2b:
            r17 = r13
            r12 = r34
            r13 = r9
        L_0x0d30:
            float r1 = (float) r15
            float r14 = r14 / r1
            float r2 = (float) r12
            float r3 = (float) r13
            float r2 = r2 / r3
            float r2 = java.lang.Math.min(r14, r2)
            float r1 = r1 * r2
            int r1 = (int) r1
            float r3 = r3 * r2
            int r3 = (int) r3
            java.util.ArrayList<java.lang.Object> r4 = r10.imagesArrLocals
            boolean r4 = r4.isEmpty()
            if (r4 != 0) goto L_0x0d65
            int r4 = r10.currentEditMode
            r5 = 1
            if (r4 == r5) goto L_0x0d5e
            int r4 = r10.sendPhotoType
            if (r4 != r5) goto L_0x0d51
            goto L_0x0d5e
        L_0x0d51:
            org.telegram.messenger.MediaController$CropState r4 = r10.leftCropState
            if (r4 == 0) goto L_0x0d5b
            boolean r4 = r4.mirrored
            if (r4 == 0) goto L_0x0d5b
            r9 = 1
            goto L_0x0d5c
        L_0x0d5b:
            r9 = 0
        L_0x0d5c:
            r4 = r9
            goto L_0x0d66
        L_0x0d5e:
            org.telegram.ui.Components.Crop.CropTransform r4 = r10.leftCropTransform
            boolean r4 = r4.isMirrored()
            goto L_0x0d66
        L_0x0d65:
            r4 = 0
        L_0x0d66:
            if (r4 == 0) goto L_0x0d70
            r4 = -1082130432(0xffffffffbvar_, float:-1.0)
            r5 = 1065353216(0x3var_, float:1.0)
            r11.scale(r4, r5)
            goto L_0x0d72
        L_0x0d70:
            r5 = 1065353216(0x3var_, float:1.0)
        L_0x0d72:
            org.telegram.messenger.ImageReceiver r4 = r10.sideImage
            r4.setAlpha(r5)
            org.telegram.messenger.ImageReceiver r4 = r10.sideImage
            int r5 = -r1
            r6 = 2
            int r5 = r5 / r6
            float r7 = (float) r5
            int r8 = -r3
            int r8 = r8 / r6
            float r9 = (float) r8
            float r12 = (float) r1
            float r14 = (float) r3
            r4.setImageCoords(r7, r9, r12, r14)
            org.telegram.messenger.ImageReceiver r4 = r10.sideImage
            r4.draw(r11)
            org.telegram.ui.Components.PaintingOverlay r4 = r10.leftPaintingOverlay
            if (r4 == 0) goto L_0x0dd8
            int r4 = r4.getVisibility()
            if (r4 != 0) goto L_0x0dd8
            int r1 = r1 / r6
            int r3 = r3 / r6
            r11.clipRect(r5, r8, r1, r3)
            org.telegram.ui.Components.PaintingOverlay r1 = r10.leftPaintingOverlay
            int r1 = r1.getMeasuredWidth()
            if (r1 != r15) goto L_0x0da9
            org.telegram.ui.Components.PaintingOverlay r1 = r10.leftPaintingOverlay
            int r1 = r1.getMeasuredHeight()
            if (r1 == r13) goto L_0x0dbe
        L_0x0da9:
            org.telegram.ui.Components.PaintingOverlay r1 = r10.leftPaintingOverlay
            r3 = 1073741824(0x40000000, float:2.0)
            int r4 = android.view.View.MeasureSpec.makeMeasureSpec(r15, r3)
            int r3 = android.view.View.MeasureSpec.makeMeasureSpec(r13, r3)
            r1.measure(r4, r3)
            org.telegram.ui.Components.PaintingOverlay r1 = r10.leftPaintingOverlay
            r3 = 0
            r1.layout(r3, r3, r15, r13)
        L_0x0dbe:
            r11.scale(r2, r2)
            int r1 = -r15
            r2 = 2
            int r1 = r1 / r2
            float r1 = (float) r1
            int r3 = -r13
            int r3 = r3 / r2
            float r2 = (float) r3
            r11.translate(r1, r2)
            org.telegram.ui.Components.PaintingOverlay r1 = r10.leftPaintingOverlay
            r2 = 1065353216(0x3var_, float:1.0)
            r1.setAlpha(r2)
            org.telegram.ui.Components.PaintingOverlay r1 = r10.leftPaintingOverlay
            r1.draw(r11)
            goto L_0x0dda
        L_0x0dd8:
            r2 = 1065353216(0x3var_, float:1.0)
        L_0x0dda:
            r45.restore()
            goto L_0x0de4
        L_0x0dde:
            r17 = r13
            r0 = r38
            r2 = 1065353216(0x3var_, float:1.0)
        L_0x0de4:
            org.telegram.ui.Components.GroupedPhotosListView r1 = r10.groupedPhotosListView
            float r8 = r2 - r17
            r1.setMoveProgress(r8)
            r45.save()
            float r14 = r43 / r30
            r15 = r39
            r11.translate(r15, r14)
            float r0 = (float) r0
            float r1 = r10.scale
            float r1 = r1 + r2
            float r0 = r0 * r1
            int r1 = org.telegram.messenger.AndroidUtilities.dp(r29)
            float r1 = (float) r1
            float r0 = r0 + r1
            float r0 = -r0
            r1 = 1073741824(0x40000000, float:2.0)
            float r0 = r0 / r1
            r9 = r43
            float r1 = -r9
            float r1 = r1 / r30
            r11.translate(r0, r1)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r0 = r10.photoProgressViews
            r1 = 2
            r0 = r0[r1]
            r2 = 1065353216(0x3var_, float:1.0)
            r0.setScale(r2)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r0 = r10.photoProgressViews
            r0 = r0[r1]
            r0.setAlpha(r2)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r0 = r10.photoProgressViews
            r0 = r0[r1]
            r0.onDraw(r11)
            boolean r0 = r10.isActionBarVisible
            if (r0 == 0) goto L_0x0e30
            android.widget.ImageView[] r0 = r10.fullscreenButton
            r0 = r0[r1]
            r0.setAlpha(r2)
        L_0x0e30:
            r45.restore()
            goto L_0x0e43
        L_0x0e34:
            r9 = r43
            r1 = 2
            boolean r0 = r10.isActionBarVisible
            if (r0 == 0) goto L_0x0e43
            android.widget.ImageView[] r0 = r10.fullscreenButton
            r0 = r0[r1]
            r1 = 0
            r0.setAlpha(r1)
        L_0x0e43:
            int r0 = r10.waitingForDraw
            if (r0 == 0) goto L_0x0e9d
            r1 = 1
            int r0 = r0 - r1
            r10.waitingForDraw = r0
            if (r0 != 0) goto L_0x0e98
            android.widget.ImageView r0 = r10.textureImageView
            if (r0 == 0) goto L_0x0e93
            android.view.TextureView r0 = r10.videoTextureView     // Catch:{ all -> 0x0e6c }
            int r0 = r0.getWidth()     // Catch:{ all -> 0x0e6c }
            android.view.TextureView r1 = r10.videoTextureView     // Catch:{ all -> 0x0e6c }
            int r1 = r1.getHeight()     // Catch:{ all -> 0x0e6c }
            android.graphics.Bitmap$Config r2 = android.graphics.Bitmap.Config.ARGB_8888     // Catch:{ all -> 0x0e6c }
            android.graphics.Bitmap r0 = org.telegram.messenger.Bitmaps.createBitmap(r0, r1, r2)     // Catch:{ all -> 0x0e6c }
            r10.currentBitmap = r0     // Catch:{ all -> 0x0e6c }
            android.view.TextureView r1 = r10.changedTextureView     // Catch:{ all -> 0x0e6c }
            r1.getBitmap(r0)     // Catch:{ all -> 0x0e6c }
            r1 = 0
            goto L_0x0e7c
        L_0x0e6c:
            r0 = move-exception
            android.graphics.Bitmap r1 = r10.currentBitmap
            if (r1 == 0) goto L_0x0e78
            r1.recycle()
            r1 = 0
            r10.currentBitmap = r1
            goto L_0x0e79
        L_0x0e78:
            r1 = 0
        L_0x0e79:
            org.telegram.messenger.FileLog.e((java.lang.Throwable) r0)
        L_0x0e7c:
            android.graphics.Bitmap r0 = r10.currentBitmap
            if (r0 == 0) goto L_0x0e8e
            android.widget.ImageView r0 = r10.textureImageView
            r1 = 0
            r0.setVisibility(r1)
            android.widget.ImageView r0 = r10.textureImageView
            android.graphics.Bitmap r1 = r10.currentBitmap
            r0.setImageBitmap(r1)
            goto L_0x0e93
        L_0x0e8e:
            android.widget.ImageView r0 = r10.textureImageView
            r0.setImageDrawable(r1)
        L_0x0e93:
            r1 = 1
            org.telegram.ui.Components.PipVideoOverlay.dismiss(r1)
            goto L_0x0e9d
        L_0x0e98:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r10.containerView
            r0.invalidate()
        L_0x0e9d:
            boolean r0 = r10.padImageForHorizontalInsets
            if (r0 == 0) goto L_0x0ea4
            r45.restore()
        L_0x0ea4:
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r0 = r10.aspectRatioFrameLayout
            if (r0 == 0) goto L_0x0eea
            org.telegram.ui.Components.VideoForwardDrawable r0 = r10.videoForwardDrawable
            boolean r0 = r0.isAnimating()
            if (r0 == 0) goto L_0x0eea
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r0 = r10.aspectRatioFrameLayout
            int r0 = r0.getMeasuredHeight()
            float r0 = (float) r0
            float r1 = r10.scale
            r2 = 1065353216(0x3var_, float:1.0)
            float r1 = r1 - r2
            float r0 = r0 * r1
            int r0 = (int) r0
            r1 = 2
            int r0 = r0 / r1
            org.telegram.ui.Components.VideoForwardDrawable r1 = r10.videoForwardDrawable
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r2 = r10.aspectRatioFrameLayout
            int r2 = r2.getLeft()
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r3 = r10.aspectRatioFrameLayout
            int r3 = r3.getTop()
            int r3 = r3 - r0
            float r14 = r9 / r30
            int r4 = (int) r14
            int r3 = r3 + r4
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r5 = r10.aspectRatioFrameLayout
            int r5 = r5.getRight()
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r6 = r10.aspectRatioFrameLayout
            int r6 = r6.getBottom()
            int r6 = r6 + r0
            int r6 = r6 + r4
            r1.setBounds(r2, r3, r5, r6)
            org.telegram.ui.Components.VideoForwardDrawable r0 = r10.videoForwardDrawable
            r0.draw(r11)
        L_0x0eea:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.onDraw(android.graphics.Canvas):void");
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$onDraw$80() {
        switchToNextIndex(1, false);
    }

    /* access modifiers changed from: private */
    public /* synthetic */ void lambda$onDraw$81() {
        switchToNextIndex(-1, false);
    }

    /* JADX WARNING: Code restructure failed: missing block: B:10:0x0018, code lost:
        r0 = r8.videoPlayer;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:2:0x0006, code lost:
        r0 = r8.videoTimelineView;
     */
    /* JADX WARNING: Removed duplicated region for block: B:30:0x004b  */
    /* JADX WARNING: Removed duplicated region for block: B:32:0x004e  */
    /* JADX WARNING: Removed duplicated region for block: B:33:0x0059  */
    /* JADX WARNING: Removed duplicated region for block: B:36:0x005e  */
    /* JADX WARNING: Removed duplicated region for block: B:37:0x0067  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private void drawProgress(android.graphics.Canvas r9, float r10, float r11, float r12, float r13) {
        /*
            r8 = this;
            boolean r0 = r8.isCurrentVideo
            r1 = 1
            r2 = 0
            if (r0 == 0) goto L_0x0025
            org.telegram.ui.Components.VideoTimelinePlayView r0 = r8.videoTimelineView
            if (r0 == 0) goto L_0x0010
            boolean r0 = r0.isDragging()
            if (r0 != 0) goto L_0x0023
        L_0x0010:
            int r0 = r8.sendPhotoType
            if (r0 != r1) goto L_0x0018
            boolean r0 = r8.manuallyPaused
            if (r0 == 0) goto L_0x0023
        L_0x0018:
            org.telegram.ui.Components.VideoPlayer r0 = r8.videoPlayer
            if (r0 == 0) goto L_0x0025
            boolean r0 = r0.isPlaying()
            if (r0 != 0) goto L_0x0023
            goto L_0x0025
        L_0x0023:
            r0 = 0
            goto L_0x0026
        L_0x0025:
            r0 = 1
        L_0x0026:
            org.telegram.ui.Components.RadialProgressView r3 = r8.miniProgressView
            int r3 = r3.getVisibility()
            if (r3 == 0) goto L_0x0034
            android.animation.AnimatorSet r3 = r8.miniProgressAnimator
            if (r3 == 0) goto L_0x0033
            goto L_0x0034
        L_0x0033:
            r1 = 0
        L_0x0034:
            if (r0 == 0) goto L_0x00c4
            boolean r0 = r8.zoomAnimation
            r3 = 0
            if (r0 != 0) goto L_0x0044
            float r0 = -r10
            float r4 = r8.maxX
            int r0 = (r0 > r4 ? 1 : (r0 == r4 ? 0 : -1))
            if (r0 <= 0) goto L_0x0044
            float r4 = r4 + r10
            goto L_0x0045
        L_0x0044:
            r4 = 0
        L_0x0045:
            r0 = 1065353216(0x3var_, float:1.0)
            int r5 = (r11 > r0 ? 1 : (r11 == r0 ? 0 : -1))
            if (r5 != 0) goto L_0x004c
            r3 = r12
        L_0x004c:
            if (r1 == 0) goto L_0x0059
            org.telegram.ui.Components.RadialProgressView r5 = r8.miniProgressView
            float r5 = r5.getAlpha()
            float r5 = r0 - r5
            float r5 = r5 * r13
            goto L_0x005a
        L_0x0059:
            r5 = r13
        L_0x005a:
            boolean r6 = r8.pipAnimationInProgress
            if (r6 == 0) goto L_0x0067
            org.telegram.ui.ActionBar.ActionBar r6 = r8.actionBar
            float r6 = r6.getAlpha()
            float r5 = r5 * r6
            goto L_0x0083
        L_0x0067:
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r6 = r8.photoProgressViews
            r6 = r6[r2]
            int r6 = r6.backgroundState
            r7 = 4
            if (r6 != r7) goto L_0x0083
            r6 = 1090519040(0x41000000, float:8.0)
            float r6 = org.telegram.messenger.AndroidUtilities.dpf2(r6)
            org.telegram.ui.ActionBar.ActionBar r7 = r8.actionBar
            float r7 = r7.getAlpha()
            float r7 = r0 - r7
            float r6 = r6 * r7
            float r3 = r3 + r6
        L_0x0083:
            r9.save()
            r9.translate(r4, r3)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r3 = r8.photoProgressViews
            r3 = r3[r2]
            r3.setScale(r0)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r0 = r8.photoProgressViews
            r0 = r0[r2]
            r0.setAlpha(r5)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r0 = r8.photoProgressViews
            r0 = r0[r2]
            r0.onDraw(r9)
            boolean r0 = r8.isActionBarVisible
            if (r0 == 0) goto L_0x00c1
            boolean r0 = r8.allowShowFullscreenButton
            if (r0 == 0) goto L_0x00c1
            android.widget.ImageView[] r0 = r8.fullscreenButton
            r0 = r0[r2]
            java.lang.Object r0 = r0.getTag()
            if (r0 != 0) goto L_0x00c1
            android.widget.ImageView[] r0 = r8.fullscreenButton
            r3 = r0[r2]
            r0 = r0[r2]
            float r0 = r0.getAlpha()
            float r13 = java.lang.Math.min(r0, r13)
            r3.setAlpha(r13)
        L_0x00c1:
            r9.restore()
        L_0x00c4:
            if (r1 == 0) goto L_0x00e9
            boolean r13 = r8.pipAnimationInProgress
            if (r13 != 0) goto L_0x00e9
            r9.save()
            org.telegram.ui.Components.RadialProgressView r13 = r8.miniProgressView
            int r13 = r13.getLeft()
            float r13 = (float) r13
            float r13 = r13 + r10
            org.telegram.ui.Components.RadialProgressView r10 = r8.miniProgressView
            int r10 = r10.getTop()
            float r10 = (float) r10
            float r12 = r12 / r11
            float r10 = r10 + r12
            r9.translate(r13, r10)
            org.telegram.ui.Components.RadialProgressView r10 = r8.miniProgressView
            r10.draw(r9)
            r9.restore()
        L_0x00e9:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.drawProgress(android.graphics.Canvas, float, float, float, float):void");
    }

    /* JADX WARNING: Removed duplicated region for block: B:35:0x0097  */
    /* JADX WARNING: Removed duplicated region for block: B:45:0x00b6  */
    /* JADX WARNING: Removed duplicated region for block: B:55:0x00e7  */
    /* JADX WARNING: Removed duplicated region for block: B:59:0x00fb  */
    /* JADX WARNING: Removed duplicated region for block: B:75:0x016f  */
    /* JADX WARNING: Removed duplicated region for block: B:82:0x0180  */
    /* JADX WARNING: Removed duplicated region for block: B:83:0x0184  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private int[] applyCrop(android.graphics.Canvas r23, int r24, int r25, int r26, int r27, float r28, org.telegram.ui.Components.Crop.CropTransform r29, org.telegram.messenger.MediaController.CropState r30) {
        /*
            r22 = this;
            r0 = r22
            r1 = r23
            r2 = r24
            r3 = r30
            float r2 = (float) r2
            r4 = r26
            float r5 = (float) r4
            float r6 = r2 / r5
            r7 = r25
            float r7 = (float) r7
            r8 = r27
            float r9 = (float) r8
            float r10 = r7 / r9
            float r11 = java.lang.Math.min(r6, r10)
            int r12 = r29.getOrientation()
            r13 = 90
            if (r12 == r13) goto L_0x002c
            r13 = 270(0x10e, float:3.78E-43)
            if (r12 != r13) goto L_0x0027
            goto L_0x002c
        L_0x0027:
            r21 = r8
            r8 = r4
            r4 = r21
        L_0x002c:
            int r13 = r0.sendPhotoType
            r14 = 3
            r15 = 1
            r16 = 1065353216(0x3var_, float:1.0)
            if (r13 == r15) goto L_0x003f
            int r13 = r0.currentEditMode
            if (r13 == r14) goto L_0x003c
            int r13 = r0.switchingToMode
            if (r13 != r14) goto L_0x003f
        L_0x003c:
            r13 = 1065353216(0x3var_, float:1.0)
            goto L_0x006b
        L_0x003f:
            android.animation.AnimatorSet r13 = r0.imageMoveAnimation
            if (r13 == 0) goto L_0x0062
            int r13 = r0.switchingToMode
            r14 = -1
            if (r13 == r14) goto L_0x0062
            int r14 = r0.currentEditMode
            if (r14 == r15) goto L_0x003c
            if (r13 == r15) goto L_0x003c
            r15 = 2
            if (r14 == r15) goto L_0x0054
            r15 = 3
            if (r14 != r15) goto L_0x0058
        L_0x0054:
            r14 = -1
            if (r13 != r14) goto L_0x0058
            goto L_0x003c
        L_0x0058:
            if (r13 != 0) goto L_0x005d
            float r13 = r0.animationValue
            goto L_0x006b
        L_0x005d:
            float r13 = r0.animationValue
            float r13 = r16 - r13
            goto L_0x006b
        L_0x0062:
            int r13 = r0.currentEditMode
            r14 = 2
            if (r13 == r14) goto L_0x006a
            r14 = 3
            if (r13 != r14) goto L_0x003c
        L_0x006a:
            r13 = 0
        L_0x006b:
            float r14 = r29.getCropPw()
            float r15 = r29.getCropPh()
            float r8 = (float) r8
            float r17 = r16 - r14
            float r18 = r16 - r13
            float r17 = r17 * r18
            float r14 = r14 + r17
            float r14 = r14 * r8
            int r14 = (int) r14
            float r4 = (float) r4
            float r17 = r16 - r15
            float r17 = r17 * r18
            float r15 = r15 + r17
            float r15 = r15 * r4
            int r15 = (int) r15
            r25 = r10
            float r10 = (float) r14
            float r17 = r2 / r10
            r26 = r14
            float r14 = (float) r15
            float r19 = r17 * r14
            int r19 = (r19 > r7 ? 1 : (r19 == r7 ? 0 : -1))
            if (r19 <= 0) goto L_0x0099
            float r17 = r7 / r14
        L_0x0099:
            r19 = r15
            int r15 = r0.sendPhotoType
            r20 = r12
            r12 = 1
            if (r15 == r12) goto L_0x00d3
            int r15 = r0.currentEditMode
            if (r15 != r12) goto L_0x00aa
            int r12 = r0.switchingToMode
            if (r12 != 0) goto L_0x00d3
        L_0x00aa:
            if (r3 == 0) goto L_0x00d3
            float r10 = r10 * r17
            float r14 = r14 * r17
            float r12 = r6 * r9
            int r12 = (r12 > r7 ? 1 : (r12 == r7 ? 0 : -1))
            if (r12 <= 0) goto L_0x00b8
            r6 = r25
        L_0x00b8:
            float r5 = r5 * r6
            float r5 = r5 / r28
            float r9 = r9 * r6
            float r9 = r9 / r28
            float r5 = r5 - r10
            float r5 = r5 * r18
            float r10 = r10 + r5
            float r9 = r9 - r14
            float r9 = r9 * r18
            float r14 = r14 + r9
            float r5 = -r10
            r6 = 1073741824(0x40000000, float:2.0)
            float r5 = r5 / r6
            float r9 = -r14
            float r9 = r9 / r6
            float r10 = r10 / r6
            float r14 = r14 / r6
            r1.clipRect(r5, r9, r10, r14)
        L_0x00d3:
            int r5 = r0.sendPhotoType
            r6 = 1
            if (r5 == r6) goto L_0x00de
            boolean r5 = r29.hasViewTransform()
            if (r5 == 0) goto L_0x0189
        L_0x00de:
            int r5 = r0.currentEditMode
            if (r5 == r6) goto L_0x00fb
            int r5 = r0.sendPhotoType
            if (r5 != r6) goto L_0x00e7
            goto L_0x00fb
        L_0x00e7:
            if (r3 == 0) goto L_0x00ec
            float r2 = r3.cropScale
            goto L_0x00ee
        L_0x00ec:
            r2 = 1065353216(0x3var_, float:1.0)
        L_0x00ee:
            float r3 = r2 - r16
            float r3 = r3 * r18
            float r3 = r3 + r16
            float r17 = r17 / r11
            float r17 = r17 / r3
            float r2 = r2 * r17
            goto L_0x0138
        L_0x00fb:
            float r3 = r29.getTrueCropScale()
            float r3 = r3 - r16
            float r3 = r3 * r18
            float r3 = r3 + r16
            float r5 = r29.getScale()
            float r5 = r5 / r3
            float r2 = r2 / r8
            float r3 = r2 * r4
            int r3 = (r3 > r7 ? 1 : (r3 == r7 ? 0 : -1))
            if (r3 <= 0) goto L_0x0113
            float r2 = r7 / r4
        L_0x0113:
            float r2 = r2 / r11
            float r5 = r5 * r2
            int r2 = r0.sendPhotoType
            r3 = 1
            if (r2 != r3) goto L_0x0137
            int r2 = r0.currentEditMode
            r3 = 3
            if (r2 == r3) goto L_0x012c
            int r2 = r0.switchingToMode
            if (r2 != r3) goto L_0x0125
            goto L_0x012c
        L_0x0125:
            if (r2 != 0) goto L_0x0137
            float r2 = r29.getMinScale()
            goto L_0x0136
        L_0x012c:
            float r2 = r29.getMinScale()
            float r2 = r2 - r16
            float r2 = r2 * r18
            float r2 = r2 + r16
        L_0x0136:
            float r5 = r5 / r2
        L_0x0137:
            r2 = r5
        L_0x0138:
            float r3 = r29.getCropAreaX()
            float r3 = r3 * r13
            float r5 = r29.getCropAreaY()
            float r5 = r5 * r13
            r1.translate(r3, r5)
            r1.scale(r2, r2)
            float r2 = r29.getCropPx()
            float r2 = r2 * r8
            float r2 = r2 * r11
            float r2 = r2 * r13
            float r3 = r29.getCropPy()
            float r3 = r3 * r4
            float r3 = r3 * r11
            float r3 = r3 * r13
            r1.translate(r2, r3)
            float r2 = r29.getRotation()
            r3 = r20
            float r3 = (float) r3
            float r2 = r2 + r3
            r3 = 1127481344(0x43340000, float:180.0)
            int r3 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r3 <= 0) goto L_0x0172
            r3 = 1135869952(0x43b40000, float:360.0)
            float r2 = r2 - r3
        L_0x0172:
            int r3 = r0.sendPhotoType
            r4 = 1
            if (r3 != r4) goto L_0x0184
            int r3 = r0.currentEditMode
            r4 = 3
            if (r3 == r4) goto L_0x0180
            int r3 = r0.switchingToMode
            if (r3 != r4) goto L_0x0184
        L_0x0180:
            r1.rotate(r2)
            goto L_0x0189
        L_0x0184:
            float r2 = r2 * r13
            r1.rotate(r2)
        L_0x0189:
            int[] r1 = r0.tempInt
            r2 = 0
            r1[r2] = r26
            r2 = 1
            r1[r2] = r19
            return r1
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.applyCrop(android.graphics.Canvas, int, int, int, int, float, org.telegram.ui.Components.Crop.CropTransform, org.telegram.messenger.MediaController$CropState):int[]");
    }

    /* access modifiers changed from: private */
    /* JADX WARNING: Code restructure failed: missing block: B:15:0x0039, code lost:
        if (r1.exists() == false) goto L_0x003b;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:46:0x0152, code lost:
        if (r1.exists() == false) goto L_0x01b3;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:50:0x0191, code lost:
        if (r1.exists() == false) goto L_0x01b3;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:59:0x01b1, code lost:
        if (r1.exists() == false) goto L_0x01b3;
     */
    /* JADX WARNING: Removed duplicated region for block: B:65:0x01bf  */
    /* JADX WARNING: Removed duplicated region for block: B:95:0x02b6  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public void onActionClick(boolean r11) {
        /*
            r10 = this;
            java.lang.String r0 = "UTF-8"
            org.telegram.messenger.MessageObject r1 = r10.currentMessageObject
            if (r1 != 0) goto L_0x000e
            org.telegram.tgnet.TLRPC$BotInlineResult r2 = r10.currentBotInlineResult
            if (r2 != 0) goto L_0x000e
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r2 = r10.pageBlocksAdapter
            if (r2 == 0) goto L_0x0015
        L_0x000e:
            java.lang.String[] r2 = r10.currentFileNames
            r3 = 0
            r2 = r2[r3]
            if (r2 != 0) goto L_0x0016
        L_0x0015:
            return
        L_0x0016:
            r10.isStreaming = r3
            java.lang.String r2 = "mp4"
            r4 = 1
            r5 = 0
            if (r1 == 0) goto L_0x0138
            org.telegram.tgnet.TLRPC$Message r1 = r1.messageOwner
            java.lang.String r1 = r1.attachPath
            if (r1 == 0) goto L_0x003b
            int r1 = r1.length()
            if (r1 == 0) goto L_0x003b
            java.io.File r1 = new java.io.File
            org.telegram.messenger.MessageObject r6 = r10.currentMessageObject
            org.telegram.tgnet.TLRPC$Message r6 = r6.messageOwner
            java.lang.String r6 = r6.attachPath
            r1.<init>(r6)
            boolean r6 = r1.exists()
            if (r6 != 0) goto L_0x003c
        L_0x003b:
            r1 = r5
        L_0x003c:
            if (r1 != 0) goto L_0x0135
            int r1 = r10.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            org.telegram.messenger.MessageObject r6 = r10.currentMessageObject
            org.telegram.tgnet.TLRPC$Message r6 = r6.messageOwner
            java.io.File r1 = r1.getPathToMessage(r6)
            boolean r6 = r1.exists()
            if (r6 != 0) goto L_0x0135
            boolean r1 = org.telegram.messenger.SharedConfig.streamMedia
            if (r1 == 0) goto L_0x01b3
            org.telegram.messenger.MessageObject r1 = r10.currentMessageObject
            long r6 = r1.getDialogId()
            boolean r1 = org.telegram.messenger.DialogObject.isEncryptedDialog(r6)
            if (r1 != 0) goto L_0x01b3
            org.telegram.messenger.MessageObject r1 = r10.currentMessageObject
            boolean r1 = r1.isVideo()
            if (r1 == 0) goto L_0x01b3
            org.telegram.messenger.MessageObject r1 = r10.currentMessageObject
            boolean r1 = r1.canStreamVideo()
            if (r1 == 0) goto L_0x01b3
            org.telegram.messenger.MessageObject r1 = r10.currentMessageObject     // Catch:{ Exception -> 0x0131 }
            int r1 = r1.currentAccount     // Catch:{ Exception -> 0x0131 }
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)     // Catch:{ Exception -> 0x0131 }
            org.telegram.messenger.MessageObject r6 = r10.currentMessageObject     // Catch:{ Exception -> 0x0131 }
            int r1 = r1.getFileReference(r6)     // Catch:{ Exception -> 0x0131 }
            int r6 = r10.currentAccount     // Catch:{ Exception -> 0x0131 }
            org.telegram.messenger.FileLoader r6 = org.telegram.messenger.FileLoader.getInstance(r6)     // Catch:{ Exception -> 0x0131 }
            org.telegram.messenger.MessageObject r7 = r10.currentMessageObject     // Catch:{ Exception -> 0x0131 }
            org.telegram.tgnet.TLRPC$Document r7 = r7.getDocument()     // Catch:{ Exception -> 0x0131 }
            org.telegram.messenger.MessageObject r8 = r10.currentMessageObject     // Catch:{ Exception -> 0x0131 }
            r6.loadFile(r7, r8, r4, r3)     // Catch:{ Exception -> 0x0131 }
            org.telegram.messenger.MessageObject r6 = r10.currentMessageObject     // Catch:{ Exception -> 0x0131 }
            org.telegram.tgnet.TLRPC$Document r6 = r6.getDocument()     // Catch:{ Exception -> 0x0131 }
            java.lang.StringBuilder r7 = new java.lang.StringBuilder     // Catch:{ Exception -> 0x0131 }
            r7.<init>()     // Catch:{ Exception -> 0x0131 }
            java.lang.String r8 = "?account="
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            org.telegram.messenger.MessageObject r8 = r10.currentMessageObject     // Catch:{ Exception -> 0x0131 }
            int r8 = r8.currentAccount     // Catch:{ Exception -> 0x0131 }
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r8 = "&id="
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            long r8 = r6.id     // Catch:{ Exception -> 0x0131 }
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r8 = "&hash="
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            long r8 = r6.access_hash     // Catch:{ Exception -> 0x0131 }
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r8 = "&dc="
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            int r8 = r6.dc_id     // Catch:{ Exception -> 0x0131 }
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r8 = "&size="
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            long r8 = r6.size     // Catch:{ Exception -> 0x0131 }
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r8 = "&mime="
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r8 = r6.mime_type     // Catch:{ Exception -> 0x0131 }
            java.lang.String r8 = java.net.URLEncoder.encode(r8, r0)     // Catch:{ Exception -> 0x0131 }
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r8 = "&rid="
            r7.append(r8)     // Catch:{ Exception -> 0x0131 }
            r7.append(r1)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r1 = "&name="
            r7.append(r1)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r1 = org.telegram.messenger.FileLoader.getDocumentFileName(r6)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r0 = java.net.URLEncoder.encode(r1, r0)     // Catch:{ Exception -> 0x0131 }
            r7.append(r0)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r0 = "&reference="
            r7.append(r0)     // Catch:{ Exception -> 0x0131 }
            byte[] r0 = r6.file_reference     // Catch:{ Exception -> 0x0131 }
            if (r0 == 0) goto L_0x0100
            goto L_0x0102
        L_0x0100:
            byte[] r0 = new byte[r3]     // Catch:{ Exception -> 0x0131 }
        L_0x0102:
            java.lang.String r0 = org.telegram.messenger.Utilities.bytesToHex(r0)     // Catch:{ Exception -> 0x0131 }
            r7.append(r0)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r0 = r7.toString()     // Catch:{ Exception -> 0x0131 }
            java.lang.StringBuilder r1 = new java.lang.StringBuilder     // Catch:{ Exception -> 0x0131 }
            r1.<init>()     // Catch:{ Exception -> 0x0131 }
            java.lang.String r6 = "tg://"
            r1.append(r6)     // Catch:{ Exception -> 0x0131 }
            org.telegram.messenger.MessageObject r6 = r10.currentMessageObject     // Catch:{ Exception -> 0x0131 }
            java.lang.String r6 = r6.getFileName()     // Catch:{ Exception -> 0x0131 }
            r1.append(r6)     // Catch:{ Exception -> 0x0131 }
            r1.append(r0)     // Catch:{ Exception -> 0x0131 }
            java.lang.String r0 = r1.toString()     // Catch:{ Exception -> 0x0131 }
            android.net.Uri r0 = android.net.Uri.parse(r0)     // Catch:{ Exception -> 0x0131 }
            r10.isStreaming = r4     // Catch:{ Exception -> 0x0132 }
            r10.checkProgress(r3, r3, r3)     // Catch:{ Exception -> 0x0132 }
            goto L_0x0132
        L_0x0131:
            r0 = r5
        L_0x0132:
            r1 = r5
            goto L_0x01b5
        L_0x0135:
            r0 = r5
            goto L_0x01b5
        L_0x0138:
            org.telegram.tgnet.TLRPC$BotInlineResult r0 = r10.currentBotInlineResult
            if (r0 == 0) goto L_0x0194
            org.telegram.tgnet.TLRPC$Document r1 = r0.document
            if (r1 == 0) goto L_0x0155
            int r0 = r10.currentAccount
            org.telegram.messenger.FileLoader r0 = org.telegram.messenger.FileLoader.getInstance(r0)
            org.telegram.tgnet.TLRPC$BotInlineResult r1 = r10.currentBotInlineResult
            org.telegram.tgnet.TLRPC$Document r1 = r1.document
            java.io.File r1 = r0.getPathToAttach(r1)
            boolean r0 = r1.exists()
            if (r0 != 0) goto L_0x0135
            goto L_0x01b3
        L_0x0155:
            org.telegram.tgnet.TLRPC$WebDocument r0 = r0.content
            boolean r0 = r0 instanceof org.telegram.tgnet.TLRPC$TL_webDocument
            if (r0 == 0) goto L_0x01b3
            java.io.File r1 = new java.io.File
            r0 = 4
            java.io.File r0 = org.telegram.messenger.FileLoader.getDirectory(r0)
            java.lang.StringBuilder r6 = new java.lang.StringBuilder
            r6.<init>()
            org.telegram.tgnet.TLRPC$BotInlineResult r7 = r10.currentBotInlineResult
            org.telegram.tgnet.TLRPC$WebDocument r7 = r7.content
            java.lang.String r7 = r7.url
            java.lang.String r7 = org.telegram.messenger.Utilities.MD5(r7)
            r6.append(r7)
            java.lang.String r7 = "."
            r6.append(r7)
            org.telegram.tgnet.TLRPC$BotInlineResult r7 = r10.currentBotInlineResult
            org.telegram.tgnet.TLRPC$WebDocument r7 = r7.content
            java.lang.String r7 = r7.url
            java.lang.String r7 = org.telegram.messenger.ImageLoader.getHttpUrlExtension(r7, r2)
            r6.append(r7)
            java.lang.String r6 = r6.toString()
            r1.<init>(r0, r6)
            boolean r0 = r1.exists()
            if (r0 != 0) goto L_0x0135
            goto L_0x01b3
        L_0x0194:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r10.pageBlocksAdapter
            if (r0 == 0) goto L_0x01b3
            int r1 = r10.currentIndex
            org.telegram.tgnet.TLObject r0 = r0.getMedia(r1)
            boolean r0 = r0 instanceof org.telegram.tgnet.TLRPC$Document
            if (r0 != 0) goto L_0x01a3
            return
        L_0x01a3:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r10.pageBlocksAdapter
            int r1 = r10.currentIndex
            java.io.File r1 = r0.getFile(r1)
            if (r1 == 0) goto L_0x0135
            boolean r0 = r1.exists()
            if (r0 != 0) goto L_0x0135
        L_0x01b3:
            r0 = r5
            r1 = r0
        L_0x01b5:
            if (r1 == 0) goto L_0x01bd
            if (r0 != 0) goto L_0x01bd
            android.net.Uri r0 = android.net.Uri.fromFile(r1)
        L_0x01bd:
            if (r0 != 0) goto L_0x02b6
            if (r11 == 0) goto L_0x02cd
            org.telegram.messenger.MessageObject r11 = r10.currentMessageObject
            if (r11 == 0) goto L_0x01f9
            int r11 = r10.currentAccount
            org.telegram.messenger.FileLoader r11 = org.telegram.messenger.FileLoader.getInstance(r11)
            java.lang.String[] r0 = r10.currentFileNames
            r0 = r0[r3]
            boolean r11 = r11.isLoadingFile(r0)
            if (r11 != 0) goto L_0x01e8
            int r11 = r10.currentAccount
            org.telegram.messenger.FileLoader r11 = org.telegram.messenger.FileLoader.getInstance(r11)
            org.telegram.messenger.MessageObject r0 = r10.currentMessageObject
            org.telegram.tgnet.TLRPC$Document r0 = r0.getDocument()
            org.telegram.messenger.MessageObject r1 = r10.currentMessageObject
            r11.loadFile(r0, r1, r4, r3)
            goto L_0x02a6
        L_0x01e8:
            int r11 = r10.currentAccount
            org.telegram.messenger.FileLoader r11 = org.telegram.messenger.FileLoader.getInstance(r11)
            org.telegram.messenger.MessageObject r0 = r10.currentMessageObject
            org.telegram.tgnet.TLRPC$Document r0 = r0.getDocument()
            r11.cancelLoadFile((org.telegram.tgnet.TLRPC$Document) r0)
            goto L_0x02a6
        L_0x01f9:
            org.telegram.tgnet.TLRPC$BotInlineResult r11 = r10.currentBotInlineResult
            if (r11 == 0) goto L_0x0265
            org.telegram.tgnet.TLRPC$Document r0 = r11.document
            if (r0 == 0) goto L_0x0231
            int r11 = r10.currentAccount
            org.telegram.messenger.FileLoader r11 = org.telegram.messenger.FileLoader.getInstance(r11)
            java.lang.String[] r0 = r10.currentFileNames
            r0 = r0[r3]
            boolean r11 = r11.isLoadingFile(r0)
            if (r11 != 0) goto L_0x0222
            int r11 = r10.currentAccount
            org.telegram.messenger.FileLoader r11 = org.telegram.messenger.FileLoader.getInstance(r11)
            org.telegram.tgnet.TLRPC$BotInlineResult r0 = r10.currentBotInlineResult
            org.telegram.tgnet.TLRPC$Document r0 = r0.document
            org.telegram.messenger.MessageObject r1 = r10.currentMessageObject
            r11.loadFile(r0, r1, r4, r3)
            goto L_0x02a6
        L_0x0222:
            int r11 = r10.currentAccount
            org.telegram.messenger.FileLoader r11 = org.telegram.messenger.FileLoader.getInstance(r11)
            org.telegram.tgnet.TLRPC$BotInlineResult r0 = r10.currentBotInlineResult
            org.telegram.tgnet.TLRPC$Document r0 = r0.document
            r11.cancelLoadFile((org.telegram.tgnet.TLRPC$Document) r0)
            goto L_0x02a6
        L_0x0231:
            org.telegram.tgnet.TLRPC$WebDocument r11 = r11.content
            boolean r11 = r11 instanceof org.telegram.tgnet.TLRPC$TL_webDocument
            if (r11 == 0) goto L_0x02a6
            org.telegram.messenger.ImageLoader r11 = org.telegram.messenger.ImageLoader.getInstance()
            org.telegram.tgnet.TLRPC$BotInlineResult r0 = r10.currentBotInlineResult
            org.telegram.tgnet.TLRPC$WebDocument r0 = r0.content
            java.lang.String r0 = r0.url
            boolean r11 = r11.isLoadingHttpFile(r0)
            if (r11 != 0) goto L_0x0257
            org.telegram.messenger.ImageLoader r11 = org.telegram.messenger.ImageLoader.getInstance()
            org.telegram.tgnet.TLRPC$BotInlineResult r0 = r10.currentBotInlineResult
            org.telegram.tgnet.TLRPC$WebDocument r0 = r0.content
            java.lang.String r0 = r0.url
            int r1 = r10.currentAccount
            r11.loadHttpFile(r0, r2, r1)
            goto L_0x02a6
        L_0x0257:
            org.telegram.messenger.ImageLoader r11 = org.telegram.messenger.ImageLoader.getInstance()
            org.telegram.tgnet.TLRPC$BotInlineResult r0 = r10.currentBotInlineResult
            org.telegram.tgnet.TLRPC$WebDocument r0 = r0.content
            java.lang.String r0 = r0.url
            r11.cancelLoadHttpFile(r0)
            goto L_0x02a6
        L_0x0265:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r11 = r10.pageBlocksAdapter
            if (r11 == 0) goto L_0x02a6
            int r11 = r10.currentAccount
            org.telegram.messenger.FileLoader r11 = org.telegram.messenger.FileLoader.getInstance(r11)
            java.lang.String[] r0 = r10.currentFileNames
            r0 = r0[r3]
            boolean r11 = r11.isLoadingFile(r0)
            if (r11 != 0) goto L_0x0293
            int r11 = r10.currentAccount
            org.telegram.messenger.FileLoader r11 = org.telegram.messenger.FileLoader.getInstance(r11)
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r10.pageBlocksAdapter
            int r1 = r10.currentIndex
            org.telegram.tgnet.TLObject r0 = r0.getMedia(r1)
            org.telegram.tgnet.TLRPC$Document r0 = (org.telegram.tgnet.TLRPC$Document) r0
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r10.pageBlocksAdapter
            java.lang.Object r1 = r1.getParentObject()
            r11.loadFile(r0, r1, r4, r4)
            goto L_0x02a6
        L_0x0293:
            int r11 = r10.currentAccount
            org.telegram.messenger.FileLoader r11 = org.telegram.messenger.FileLoader.getInstance(r11)
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r10.pageBlocksAdapter
            int r1 = r10.currentIndex
            org.telegram.tgnet.TLObject r0 = r0.getMedia(r1)
            org.telegram.tgnet.TLRPC$Document r0 = (org.telegram.tgnet.TLRPC$Document) r0
            r11.cancelLoadFile((org.telegram.tgnet.TLRPC$Document) r0)
        L_0x02a6:
            org.telegram.messenger.ImageReceiver r11 = r10.centerImage
            android.graphics.drawable.Drawable r11 = r11.getStaticThumb()
            boolean r0 = r11 instanceof org.telegram.ui.Components.OtherDocumentPlaceholderDrawable
            if (r0 == 0) goto L_0x02cd
            org.telegram.ui.Components.OtherDocumentPlaceholderDrawable r11 = (org.telegram.ui.Components.OtherDocumentPlaceholderDrawable) r11
            r11.checkFileExist()
            goto L_0x02cd
        L_0x02b6:
            int r11 = r10.sharedMediaType
            if (r11 != r4) goto L_0x02ca
            org.telegram.messenger.MessageObject r11 = r10.currentMessageObject
            boolean r11 = r11.canPreviewDocument()
            if (r11 != 0) goto L_0x02ca
            org.telegram.messenger.MessageObject r11 = r10.currentMessageObject
            android.app.Activity r0 = r10.parentActivity
            org.telegram.messenger.AndroidUtilities.openDocument(r11, r0, r5)
            return
        L_0x02ca:
            r10.preparePlayer(r0, r4, r3)
        L_0x02cd:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.onActionClick(boolean):void");
    }

    public boolean onDown(MotionEvent motionEvent) {
        if (!this.doubleTap && this.checkImageView.getVisibility() != 0) {
            boolean[] zArr = this.drawPressedDrawable;
            if (!zArr[0] && !zArr[1]) {
                float x = motionEvent.getX();
                int min = Math.min(135, this.containerView.getMeasuredWidth() / 8);
                if (x < ((float) min)) {
                    if (this.leftImage.hasImageSet()) {
                        this.drawPressedDrawable[0] = true;
                        this.containerView.invalidate();
                    }
                } else if (x > ((float) (this.containerView.getMeasuredWidth() - min)) && this.rightImage.hasImageSet()) {
                    this.drawPressedDrawable[1] = true;
                    this.containerView.invalidate();
                }
            }
        }
        return false;
    }

    public boolean canDoubleTap(MotionEvent motionEvent) {
        MessageObject messageObject;
        PhotoViewerWebView photoViewerWebView2;
        if (this.checkImageView.getVisibility() == 0) {
            return true;
        }
        boolean[] zArr = this.drawPressedDrawable;
        if (zArr[0] || zArr[1]) {
            return true;
        }
        float x = motionEvent.getX();
        int min = Math.min(135, this.containerView.getMeasuredWidth() / 8);
        if ((x >= ((float) min) && x <= ((float) (this.containerView.getMeasuredWidth() - min))) || (messageObject = this.currentMessageObject) == null) {
            return true;
        }
        if ((messageObject.isVideo() || ((photoViewerWebView2 = this.photoViewerWebView) != null && photoViewerWebView2.isControllable())) && SystemClock.elapsedRealtime() - this.lastPhotoSetTime >= 500 && canDoubleTapSeekVideo(motionEvent)) {
            return true;
        }
        return false;
    }

    private void hidePressedDrawables() {
        boolean[] zArr = this.drawPressedDrawable;
        zArr[1] = false;
        zArr[0] = false;
        this.containerView.invalidate();
    }

    public void onUp(MotionEvent motionEvent) {
        hidePressedDrawables();
    }

    public boolean onSingleTapUp(MotionEvent motionEvent) {
        if (!this.canZoom && !this.doubleTapEnabled) {
            return onSingleTapConfirmed(motionEvent);
        }
        if (!(this.containerView.getTag() == null || this.photoProgressViews[0] == null || this.containerView == null)) {
            float x = motionEvent.getX();
            float y = motionEvent.getY();
            if ((x < ((float) (getContainerViewWidth() - AndroidUtilities.dp(100.0f))) / 2.0f || x > ((float) (getContainerViewWidth() + AndroidUtilities.dp(100.0f))) / 2.0f || y < ((float) (getContainerViewHeight() - AndroidUtilities.dp(100.0f))) / 2.0f || y > ((float) (getContainerViewHeight() + AndroidUtilities.dp(100.0f))) / 2.0f) ? false : onSingleTapConfirmed(motionEvent)) {
                this.discardTap = true;
                return true;
            }
        }
        return false;
    }

    public void onLongPress() {
        boolean z;
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null && this.videoPlayerControlVisible && this.scale <= 1.1f) {
            long currentPosition = videoPlayer2.getCurrentPosition();
            long duration = this.videoPlayer.getDuration();
            if (currentPosition != -9223372036854775807L && duration >= 15000) {
                float f = this.longPressX;
                int containerViewWidth = getContainerViewWidth() / 3;
                if (f >= ((float) (containerViewWidth * 2))) {
                    z = true;
                } else if (f < ((float) containerViewWidth)) {
                    z = false;
                } else {
                    return;
                }
                this.videoPlayerRewinder.startRewind(this.videoPlayer, z, this.currentVideoSpeed);
            }
        }
    }

    public VideoPlayerRewinder getVideoPlayerRewinder() {
        return this.videoPlayerRewinder;
    }

    public boolean onFling(MotionEvent motionEvent, MotionEvent motionEvent2, float f, float f2) {
        if (this.scale == 1.0f) {
            return false;
        }
        this.scroller.abortAnimation();
        this.scroller.fling(Math.round(this.translationX), Math.round(this.translationY), Math.round(f), Math.round(f2), (int) this.minX, (int) this.maxX, (int) this.minY, (int) this.maxY);
        this.containerView.postInvalidate();
        return false;
    }

    /* JADX WARNING: Code restructure failed: missing block: B:41:0x00de, code lost:
        r12 = r11.photoViewerWebView;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public boolean onSingleTapConfirmed(android.view.MotionEvent r12) {
        /*
            r11 = this;
            boolean r0 = r11.discardTap
            r1 = 0
            if (r0 == 0) goto L_0x0006
            return r1
        L_0x0006:
            float r0 = r12.getX()
            float r2 = r12.getY()
            org.telegram.ui.Components.CheckBox r3 = r11.checkImageView
            int r3 = r3.getVisibility()
            r4 = 1
            if (r3 == 0) goto L_0x0062
            int r3 = org.telegram.ui.ActionBar.ActionBar.getCurrentActionBarHeight()
            int r5 = org.telegram.messenger.AndroidUtilities.statusBarHeight
            int r3 = r3 + r5
            r5 = 1109393408(0x42200000, float:40.0)
            int r5 = org.telegram.messenger.AndroidUtilities.dp(r5)
            int r3 = r3 + r5
            float r3 = (float) r3
            int r3 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r3 <= 0) goto L_0x0062
            r3 = 135(0x87, float:1.89E-43)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r5 = r11.containerView
            int r5 = r5.getMeasuredWidth()
            int r5 = r5 / 8
            int r3 = java.lang.Math.min(r3, r5)
            float r5 = (float) r3
            int r5 = (r0 > r5 ? 1 : (r0 == r5 ? 0 : -1))
            if (r5 >= 0) goto L_0x004a
            org.telegram.messenger.ImageReceiver r3 = r11.leftImage
            boolean r3 = r3.hasImageSet()
            if (r3 == 0) goto L_0x0062
            r12 = -1
            r11.switchToNextIndex(r12, r4)
            return r4
        L_0x004a:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r5 = r11.containerView
            int r5 = r5.getMeasuredWidth()
            int r5 = r5 - r3
            float r3 = (float) r5
            int r3 = (r0 > r3 ? 1 : (r0 == r3 ? 0 : -1))
            if (r3 <= 0) goto L_0x0062
            org.telegram.messenger.ImageReceiver r3 = r11.rightImage
            boolean r3 = r3.hasImageSet()
            if (r3 == 0) goto L_0x0062
            r11.switchToNextIndex(r4, r4)
            return r4
        L_0x0062:
            org.telegram.ui.Components.PhotoViewerWebView r3 = r11.photoViewerWebView
            if (r3 == 0) goto L_0x00c6
            boolean r3 = r3.isControllable()
            if (r3 == 0) goto L_0x00c6
            boolean r3 = r11.isActionBarVisible
            if (r3 == 0) goto L_0x00c6
            org.telegram.ui.Components.PhotoViewerWebView r3 = r11.photoViewerWebView
            android.webkit.WebView r3 = r3.getWebView()
            float r5 = r3.getX()
            int r5 = (r0 > r5 ? 1 : (r0 == r5 ? 0 : -1))
            if (r5 < 0) goto L_0x00c6
            float r5 = r3.getX()
            int r6 = r3.getWidth()
            float r6 = (float) r6
            float r5 = r5 + r6
            int r5 = (r0 > r5 ? 1 : (r0 == r5 ? 0 : -1))
            if (r5 > 0) goto L_0x00c6
            float r5 = r3.getY()
            int r5 = (r2 > r5 ? 1 : (r2 == r5 ? 0 : -1))
            if (r5 < 0) goto L_0x00c6
            float r5 = r3.getY()
            int r6 = r3.getHeight()
            float r6 = (float) r6
            float r5 = r5 + r6
            int r5 = (r2 > r5 ? 1 : (r2 == r5 ? 0 : -1))
            if (r5 > 0) goto L_0x00c6
            android.view.MotionEvent r12 = android.view.MotionEvent.obtain(r12)
            r12.setAction(r1)
            float r0 = r3.getX()
            float r0 = -r0
            float r1 = r3.getY()
            float r1 = -r1
            r12.offsetLocation(r0, r1)
            r3.dispatchTouchEvent(r12)
            r12.setAction(r4)
            r3.dispatchTouchEvent(r12)
            r12.recycle()
            r11.scheduleActionBarHide()
            return r4
        L_0x00c6:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r12 = r11.containerView
            java.lang.Object r12 = r12.getTag()
            r3 = 4
            r5 = 3
            r6 = 1120403456(0x42CLASSNAME, float:100.0)
            r7 = 1073741824(0x40000000, float:2.0)
            if (r12 == 0) goto L_0x01a3
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r12 = r11.aspectRatioFrameLayout
            if (r12 == 0) goto L_0x00de
            int r12 = r12.getVisibility()
            if (r12 == 0) goto L_0x00e8
        L_0x00de:
            org.telegram.ui.Components.PhotoViewerWebView r12 = r11.photoViewerWebView
            if (r12 == 0) goto L_0x00ea
            boolean r12 = r12.isControllable()
            if (r12 == 0) goto L_0x00ea
        L_0x00e8:
            r12 = 1
            goto L_0x00eb
        L_0x00ea:
            r12 = 0
        L_0x00eb:
            int r8 = r11.sharedMediaType
            if (r8 != r4) goto L_0x0118
            org.telegram.messenger.MessageObject r8 = r11.currentMessageObject
            if (r8 == 0) goto L_0x0118
            boolean r12 = r8.canPreviewDocument()
            if (r12 != 0) goto L_0x0185
            int r12 = r11.getContainerViewHeight()
            r0 = 1135869952(0x43b40000, float:360.0)
            int r1 = org.telegram.messenger.AndroidUtilities.dp(r0)
            int r12 = r12 - r1
            float r12 = (float) r12
            float r12 = r12 / r7
            int r1 = (r2 > r12 ? 1 : (r2 == r12 ? 0 : -1))
            if (r1 < 0) goto L_0x0185
            int r0 = org.telegram.messenger.AndroidUtilities.dp(r0)
            float r0 = (float) r0
            float r12 = r12 + r0
            int r12 = (r2 > r12 ? 1 : (r2 == r12 ? 0 : -1))
            if (r12 > 0) goto L_0x0185
            r11.onActionClick(r4)
            return r4
        L_0x0118:
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r8 = r11.photoProgressViews
            r9 = r8[r1]
            if (r9 == 0) goto L_0x0185
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r9 = r11.containerView
            if (r9 == 0) goto L_0x0185
            r8 = r8[r1]
            int r8 = r8.backgroundState
            int r9 = r11.getContainerViewWidth()
            int r10 = org.telegram.messenger.AndroidUtilities.dp(r6)
            int r9 = r9 - r10
            float r9 = (float) r9
            float r9 = r9 / r7
            int r9 = (r0 > r9 ? 1 : (r0 == r9 ? 0 : -1))
            if (r9 < 0) goto L_0x0185
            int r9 = r11.getContainerViewWidth()
            int r10 = org.telegram.messenger.AndroidUtilities.dp(r6)
            int r9 = r9 + r10
            float r9 = (float) r9
            float r9 = r9 / r7
            int r0 = (r0 > r9 ? 1 : (r0 == r9 ? 0 : -1))
            if (r0 > 0) goto L_0x0185
            int r0 = r11.getContainerViewHeight()
            int r9 = org.telegram.messenger.AndroidUtilities.dp(r6)
            int r0 = r0 - r9
            float r0 = (float) r0
            float r0 = r0 / r7
            int r0 = (r2 > r0 ? 1 : (r2 == r0 ? 0 : -1))
            if (r0 < 0) goto L_0x0185
            int r0 = r11.getContainerViewHeight()
            int r6 = org.telegram.messenger.AndroidUtilities.dp(r6)
            int r0 = r0 + r6
            float r0 = (float) r0
            float r0 = r0 / r7
            int r0 = (r2 > r0 ? 1 : (r2 == r0 ? 0 : -1))
            if (r0 > 0) goto L_0x0185
            if (r12 != 0) goto L_0x0171
            if (r8 <= 0) goto L_0x0185
            if (r8 > r5) goto L_0x0185
            r11.onActionClick(r4)
            r11.checkProgress(r1, r1, r4)
            return r4
        L_0x0171:
            if (r8 == r5) goto L_0x0175
            if (r8 != r3) goto L_0x0185
        L_0x0175:
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r12 = r11.photoProgressViews
            r12 = r12[r1]
            boolean r12 = r12.isVisible()
            if (r12 == 0) goto L_0x0185
            r11.manuallyPaused = r4
            r11.toggleVideoPlayer()
            return r4
        L_0x0185:
            org.telegram.ui.Components.PhotoViewerWebView r12 = r11.photoViewerWebView
            if (r12 == 0) goto L_0x019b
            boolean r12 = r12.isControllable()
            if (r12 == 0) goto L_0x019b
            org.telegram.ui.Components.PhotoViewerWebView r12 = r11.photoViewerWebView
            boolean r12 = r12.isPlaying()
            if (r12 != 0) goto L_0x019b
            boolean r12 = r11.isActionBarVisible
            if (r12 != 0) goto L_0x023f
        L_0x019b:
            boolean r12 = r11.isActionBarVisible
            r12 = r12 ^ r4
            r11.toggleActionBar(r12, r4)
            goto L_0x023f
        L_0x01a3:
            int r12 = r11.sendPhotoType
            if (r12 == 0) goto L_0x0221
            if (r12 != r3) goto L_0x01ab
            goto L_0x0221
        L_0x01ab:
            org.telegram.tgnet.TLRPC$BotInlineResult r12 = r11.currentBotInlineResult
            if (r12 == 0) goto L_0x0212
            java.lang.String r12 = r12.type
            java.lang.String r3 = "video"
            boolean r12 = r12.equals(r3)
            if (r12 != 0) goto L_0x01c3
            org.telegram.tgnet.TLRPC$BotInlineResult r12 = r11.currentBotInlineResult
            org.telegram.tgnet.TLRPC$Document r12 = r12.document
            boolean r12 = org.telegram.messenger.MessageObject.isVideoDocument(r12)
            if (r12 == 0) goto L_0x0212
        L_0x01c3:
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r12 = r11.photoProgressViews
            r12 = r12[r1]
            int r12 = r12.backgroundState
            if (r12 <= 0) goto L_0x023f
            if (r12 > r5) goto L_0x023f
            int r12 = r11.getContainerViewWidth()
            int r3 = org.telegram.messenger.AndroidUtilities.dp(r6)
            int r12 = r12 - r3
            float r12 = (float) r12
            float r12 = r12 / r7
            int r12 = (r0 > r12 ? 1 : (r0 == r12 ? 0 : -1))
            if (r12 < 0) goto L_0x023f
            int r12 = r11.getContainerViewWidth()
            int r3 = org.telegram.messenger.AndroidUtilities.dp(r6)
            int r12 = r12 + r3
            float r12 = (float) r12
            float r12 = r12 / r7
            int r12 = (r0 > r12 ? 1 : (r0 == r12 ? 0 : -1))
            if (r12 > 0) goto L_0x023f
            int r12 = r11.getContainerViewHeight()
            int r0 = org.telegram.messenger.AndroidUtilities.dp(r6)
            int r12 = r12 - r0
            float r12 = (float) r12
            float r12 = r12 / r7
            int r12 = (r2 > r12 ? 1 : (r2 == r12 ? 0 : -1))
            if (r12 < 0) goto L_0x023f
            int r12 = r11.getContainerViewHeight()
            int r0 = org.telegram.messenger.AndroidUtilities.dp(r6)
            int r12 = r12 + r0
            float r12 = (float) r12
            float r12 = r12 / r7
            int r12 = (r2 > r12 ? 1 : (r2 == r12 ? 0 : -1))
            if (r12 > 0) goto L_0x023f
            r11.onActionClick(r4)
            r11.checkProgress(r1, r1, r4)
            return r4
        L_0x0212:
            int r12 = r11.sendPhotoType
            r0 = 2
            if (r12 != r0) goto L_0x023f
            boolean r12 = r11.isCurrentVideo
            if (r12 == 0) goto L_0x023f
            r11.manuallyPaused = r4
            r11.toggleVideoPlayer()
            goto L_0x023f
        L_0x0221:
            boolean r0 = r11.isCurrentVideo
            if (r0 == 0) goto L_0x023a
            org.telegram.ui.Components.VideoPlayer r0 = r11.videoPlayer
            if (r0 == 0) goto L_0x0234
            boolean r1 = r11.muteVideo
            if (r1 != 0) goto L_0x0234
            if (r12 == r4) goto L_0x0234
            r12 = 1065353216(0x3var_, float:1.0)
            r0.setVolume(r12)
        L_0x0234:
            r11.manuallyPaused = r4
            r11.toggleVideoPlayer()
            goto L_0x023f
        L_0x023a:
            org.telegram.ui.Components.CheckBox r12 = r11.checkImageView
            r12.performClick()
        L_0x023f:
            return r4
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.onSingleTapConfirmed(android.view.MotionEvent):boolean");
    }

    private boolean canDoubleTapSeekVideo(MotionEvent motionEvent) {
        PhotoViewerWebView photoViewerWebView2;
        if (this.videoPlayer == null && ((photoViewerWebView2 = this.photoViewerWebView) == null || !photoViewerWebView2.isControllable())) {
            return false;
        }
        boolean z = motionEvent.getX() >= ((float) ((getContainerViewWidth() / 3) * 2));
        long currentVideoPosition = getCurrentVideoPosition();
        long videoDuration2 = getVideoDuration();
        if (currentVideoPosition == -9223372036854775807L || videoDuration2 <= 15000) {
            return false;
        }
        if (!z || videoDuration2 - currentVideoPosition > 10000) {
            return true;
        }
        return false;
    }

    /* JADX WARNING: Code restructure failed: missing block: B:53:0x010a, code lost:
        if (r1 > r3) goto L_0x0104;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:58:0x0119, code lost:
        if (r2 > r3) goto L_0x0113;
     */
    /* JADX WARNING: Removed duplicated region for block: B:30:0x005f  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public boolean onDoubleTap(android.view.MotionEvent r17) {
        /*
            r16 = this;
            r0 = r16
            org.telegram.ui.Components.VideoPlayer r1 = r0.videoPlayer
            r2 = 0
            r4 = 0
            r5 = 1
            if (r1 != 0) goto L_0x0014
            org.telegram.ui.Components.PhotoViewerWebView r1 = r0.photoViewerWebView
            if (r1 == 0) goto L_0x008a
            boolean r1 = r1.isControllable()
            if (r1 == 0) goto L_0x008a
        L_0x0014:
            boolean r1 = r0.videoPlayerControlVisible
            if (r1 == 0) goto L_0x008a
            long r6 = r16.getCurrentVideoPosition()
            long r8 = r16.getVideoDuration()
            float r1 = r17.getX()
            int r10 = r16.getContainerViewWidth()
            int r10 = r10 / 3
            int r11 = r10 * 2
            float r11 = (float) r11
            boolean r12 = r16.canDoubleTapSeekVideo(r17)
            if (r12 == 0) goto L_0x008a
            r12 = 10000(0x2710, double:4.9407E-320)
            int r11 = (r1 > r11 ? 1 : (r1 == r11 ? 0 : -1))
            if (r11 < 0) goto L_0x003c
            long r14 = r6 + r12
            goto L_0x0045
        L_0x003c:
            float r11 = (float) r10
            int r11 = (r1 > r11 ? 1 : (r1 == r11 ? 0 : -1))
            if (r11 >= 0) goto L_0x0044
            long r14 = r6 - r12
            goto L_0x0045
        L_0x0044:
            r14 = r6
        L_0x0045:
            int r11 = (r6 > r14 ? 1 : (r6 == r14 ? 0 : -1))
            if (r11 == 0) goto L_0x008a
            int r6 = (r14 > r8 ? 1 : (r14 == r8 ? 0 : -1))
            if (r6 <= 0) goto L_0x004f
            r2 = r8
            goto L_0x005c
        L_0x004f:
            int r6 = (r14 > r2 ? 1 : (r14 == r2 ? 0 : -1))
            if (r6 >= 0) goto L_0x005b
            r6 = -9000(0xffffffffffffdcd8, double:NaN)
            int r11 = (r14 > r6 ? 1 : (r14 == r6 ? 0 : -1))
            if (r11 >= 0) goto L_0x005c
            r6 = 0
            goto L_0x005d
        L_0x005b:
            r2 = r14
        L_0x005c:
            r6 = 1
        L_0x005d:
            if (r6 == 0) goto L_0x0089
            org.telegram.ui.Components.VideoForwardDrawable r6 = r0.videoForwardDrawable
            r6.setOneShootAnimation(r5)
            org.telegram.ui.Components.VideoForwardDrawable r6 = r0.videoForwardDrawable
            float r7 = (float) r10
            int r1 = (r1 > r7 ? 1 : (r1 == r7 ? 0 : -1))
            if (r1 >= 0) goto L_0x006c
            r4 = 1
        L_0x006c:
            r6.setLeftSide(r4)
            org.telegram.ui.Components.VideoForwardDrawable r1 = r0.videoForwardDrawable
            r1.addTime(r12)
            r0.seekVideoOrWebTo(r2)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r0.containerView
            r1.invalidate()
            org.telegram.ui.Components.VideoPlayerSeekBar r1 = r0.videoPlayerSeekbar
            float r2 = (float) r2
            float r3 = (float) r8
            float r2 = r2 / r3
            r1.setProgress(r2, r5)
            android.view.View r1 = r0.videoPlayerSeekbarView
            r1.invalidate()
        L_0x0089:
            return r5
        L_0x008a:
            boolean r1 = r0.canZoom
            if (r1 == 0) goto L_0x0129
            float r1 = r0.scale
            r6 = 1065353216(0x3var_, float:1.0)
            r7 = 0
            int r8 = (r1 > r6 ? 1 : (r1 == r6 ? 0 : -1))
            if (r8 != 0) goto L_0x00a5
            float r8 = r0.translationY
            int r8 = (r8 > r7 ? 1 : (r8 == r7 ? 0 : -1))
            if (r8 != 0) goto L_0x0129
            float r8 = r0.translationX
            int r8 = (r8 > r7 ? 1 : (r8 == r7 ? 0 : -1))
            if (r8 == 0) goto L_0x00a5
            goto L_0x0129
        L_0x00a5:
            long r8 = r0.animationStartTime
            int r10 = (r8 > r2 ? 1 : (r8 == r2 ? 0 : -1))
            if (r10 != 0) goto L_0x0129
            int r2 = r0.animationInProgress
            if (r2 == 0) goto L_0x00b1
            goto L_0x0129
        L_0x00b1:
            int r1 = (r1 > r6 ? 1 : (r1 == r6 ? 0 : -1))
            if (r1 != 0) goto L_0x0120
            float r1 = r17.getX()
            int r2 = r16.getContainerViewWidth()
            int r2 = r2 / 2
            float r2 = (float) r2
            float r1 = r1 - r2
            float r2 = r17.getX()
            int r3 = r16.getContainerViewWidth()
            int r3 = r3 / 2
            float r3 = (float) r3
            float r2 = r2 - r3
            float r3 = r0.translationX
            float r2 = r2 - r3
            float r3 = r0.scale
            r4 = 1077936128(0x40400000, float:3.0)
            float r3 = r4 / r3
            float r2 = r2 * r3
            float r1 = r1 - r2
            float r2 = r17.getY()
            int r3 = r16.getContainerViewHeight()
            int r3 = r3 / 2
            float r3 = (float) r3
            float r2 = r2 - r3
            float r3 = r17.getY()
            int r6 = r16.getContainerViewHeight()
            int r6 = r6 / 2
            float r6 = (float) r6
            float r3 = r3 - r6
            float r6 = r0.translationY
            float r3 = r3 - r6
            float r6 = r0.scale
            float r6 = r4 / r6
            float r3 = r3 * r6
            float r2 = r2 - r3
            r0.updateMinMax(r4)
            float r3 = r0.minX
            int r6 = (r1 > r3 ? 1 : (r1 == r3 ? 0 : -1))
            if (r6 >= 0) goto L_0x0106
        L_0x0104:
            r1 = r3
            goto L_0x010d
        L_0x0106:
            float r3 = r0.maxX
            int r6 = (r1 > r3 ? 1 : (r1 == r3 ? 0 : -1))
            if (r6 <= 0) goto L_0x010d
            goto L_0x0104
        L_0x010d:
            float r3 = r0.minY
            int r6 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r6 >= 0) goto L_0x0115
        L_0x0113:
            r2 = r3
            goto L_0x011c
        L_0x0115:
            float r3 = r0.maxY
            int r6 = (r2 > r3 ? 1 : (r2 == r3 ? 0 : -1))
            if (r6 <= 0) goto L_0x011c
            goto L_0x0113
        L_0x011c:
            r0.animateTo(r4, r1, r2, r5)
            goto L_0x0123
        L_0x0120:
            r0.animateTo(r6, r7, r7, r5)
        L_0x0123:
            r0.doubleTap = r5
            r16.hidePressedDrawables()
            return r5
        L_0x0129:
            return r4
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.onDoubleTap(android.view.MotionEvent):boolean");
    }

    private class QualityChooseView extends View {
        private int circleSize;
        private int gapSize;
        private String hightQualityDescription;
        private int lineSize;
        private String lowQualityDescription;
        private Paint paint = new Paint(1);
        private int sideSide;
        private int startMovingQuality;
        private TextPaint textPaint;

        public QualityChooseView(Context context) {
            super(context);
            TextPaint textPaint2 = new TextPaint(1);
            this.textPaint = textPaint2;
            textPaint2.setTextSize((float) AndroidUtilities.dp(14.0f));
            this.textPaint.setColor(-3289651);
            this.lowQualityDescription = LocaleController.getString("AccDescrVideoCompressLow", R.string.AccDescrVideoCompressLow);
            this.hightQualityDescription = LocaleController.getString("AccDescrVideoCompressHigh", R.string.AccDescrVideoCompressHigh);
        }

        public boolean onTouchEvent(MotionEvent motionEvent) {
            float x = motionEvent.getX();
            if (motionEvent.getAction() == 0) {
                this.startMovingQuality = PhotoViewer.this.selectedCompression;
                getParent().requestDisallowInterceptTouchEvent(true);
            }
            if (motionEvent.getAction() == 0 || motionEvent.getAction() == 2) {
                int i = 0;
                while (true) {
                    if (i >= PhotoViewer.this.compressionsCount) {
                        break;
                    }
                    int i2 = this.sideSide;
                    int i3 = this.lineSize;
                    int i4 = this.gapSize;
                    int i5 = this.circleSize;
                    int i6 = i2 + (((i4 * 2) + i3 + i5) * i) + (i5 / 2);
                    int i7 = (i3 / 2) + (i5 / 2) + i4;
                    if (x <= ((float) (i6 - i7)) || x >= ((float) (i6 + i7))) {
                        i++;
                    } else if (PhotoViewer.this.selectedCompression != i) {
                        int unused = PhotoViewer.this.selectedCompression = i;
                        PhotoViewer.this.didChangedCompressionLevel(false);
                        invalidate();
                    }
                }
            } else if (motionEvent.getAction() == 1 || motionEvent.getAction() == 3) {
                if (PhotoViewer.this.selectedCompression != this.startMovingQuality) {
                    PhotoViewer.this.requestVideoPreview(1);
                }
                boolean unused2 = PhotoViewer.this.moving = false;
            }
            return true;
        }

        /* access modifiers changed from: protected */
        public void onMeasure(int i, int i2) {
            super.onMeasure(i, i2);
            this.circleSize = AndroidUtilities.dp(8.0f);
            this.gapSize = AndroidUtilities.dp(2.0f);
            this.sideSide = AndroidUtilities.dp(18.0f);
        }

        /* access modifiers changed from: protected */
        public void onDraw(Canvas canvas) {
            if (PhotoViewer.this.compressionsCount != 1) {
                this.lineSize = (((getMeasuredWidth() - (this.circleSize * PhotoViewer.this.compressionsCount)) - (this.gapSize * ((PhotoViewer.this.compressionsCount * 2) - 2))) - (this.sideSide * 2)) / (PhotoViewer.this.compressionsCount - 1);
            } else {
                this.lineSize = ((getMeasuredWidth() - (this.circleSize * PhotoViewer.this.compressionsCount)) - (this.gapSize * 2)) - (this.sideSide * 2);
            }
            int measuredHeight = (getMeasuredHeight() / 2) + AndroidUtilities.dp(6.0f);
            int i = 0;
            while (i < PhotoViewer.this.compressionsCount) {
                int i2 = this.sideSide;
                int i3 = this.lineSize + (this.gapSize * 2);
                int i4 = this.circleSize;
                int i5 = i2 + ((i3 + i4) * i) + (i4 / 2);
                if (i <= PhotoViewer.this.selectedCompression) {
                    this.paint.setColor(-11292945);
                } else {
                    this.paint.setColor(NUM);
                }
                canvas.drawCircle((float) i5, (float) measuredHeight, (float) (i == PhotoViewer.this.selectedCompression ? AndroidUtilities.dp(6.0f) : this.circleSize / 2), this.paint);
                if (i != 0) {
                    int i6 = ((i5 - (this.circleSize / 2)) - this.gapSize) - this.lineSize;
                    float f = 0.0f;
                    float dpf2 = i == PhotoViewer.this.selectedCompression + 1 ? AndroidUtilities.dpf2(2.0f) : 0.0f;
                    if (i == PhotoViewer.this.selectedCompression) {
                        f = AndroidUtilities.dpf2(2.0f);
                    }
                    canvas.drawRect(dpf2 + ((float) i6), (float) (measuredHeight - AndroidUtilities.dp(1.0f)), ((float) (i6 + this.lineSize)) - f, (float) (AndroidUtilities.dp(2.0f) + measuredHeight), this.paint);
                }
                i++;
            }
            canvas.drawText(this.lowQualityDescription, (float) this.sideSide, (float) (measuredHeight - AndroidUtilities.dp(16.0f)), this.textPaint);
            canvas.drawText(this.hightQualityDescription, ((float) (getMeasuredWidth() - this.sideSide)) - this.textPaint.measureText(this.hightQualityDescription), (float) (measuredHeight - AndroidUtilities.dp(16.0f)), this.textPaint);
        }
    }

    public void updateMuteButton() {
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null) {
            videoPlayer2.setMute(this.muteVideo);
        }
        if (!this.videoConvertSupported) {
            this.muteItem.setEnabled(false);
            this.muteItem.setClickable(false);
            this.muteItem.animate().alpha(0.5f).setDuration(180).start();
            this.videoTimelineView.setMode(0);
            return;
        }
        this.muteItem.setEnabled(true);
        this.muteItem.setClickable(true);
        this.muteItem.animate().alpha(1.0f).setDuration(180).start();
        if (this.muteVideo) {
            this.actionBar.setSubtitle(LocaleController.getString("SoundMuted", R.string.SoundMuted));
            this.muteItem.setImageResource(R.drawable.video_send_mute);
            if (this.compressItem.getTag() != null) {
                this.compressItem.setAlpha(0.5f);
                this.compressItem.setEnabled(false);
            }
            if (this.sendPhotoType == 1) {
                this.videoTimelineView.setMaxProgressDiff(9600.0f / this.videoDuration);
                this.videoTimelineView.setMode(1);
                updateVideoInfo();
            } else {
                this.videoTimelineView.setMaxProgressDiff(1.0f);
                this.videoTimelineView.setMode(0);
            }
            this.muteItem.setContentDescription(LocaleController.getString("NoSound", R.string.NoSound));
            return;
        }
        this.actionBar.setSubtitle(this.currentSubtitle);
        this.muteItem.setImageResource(R.drawable.video_send_unmute);
        this.muteItem.setContentDescription(LocaleController.getString("Sound", R.string.Sound));
        if (this.compressItem.getTag() != null) {
            this.compressItem.setAlpha(1.0f);
            this.compressItem.setEnabled(true);
        }
        this.videoTimelineView.setMaxProgressDiff(1.0f);
        this.videoTimelineView.setMode(0);
    }

    /* access modifiers changed from: private */
    public void didChangedCompressionLevel(boolean z) {
        SharedPreferences.Editor edit = MessagesController.getGlobalMainSettings().edit();
        edit.putInt(String.format("compress_video_%d", new Object[]{Integer.valueOf(this.compressionsCount)}), this.selectedCompression);
        edit.commit();
        updateWidthHeightBitrateForCompression();
        updateVideoInfo();
        if (z) {
            requestVideoPreview(1);
        }
    }

    /* access modifiers changed from: private */
    public void updateVideoInfo() {
        int i;
        int i2;
        ActionBar actionBar2 = this.actionBar;
        if (actionBar2 != null) {
            if (this.compressionsCount == 0) {
                actionBar2.setSubtitle((CharSequence) null);
                return;
            }
            int i3 = this.selectedCompression;
            if (i3 < 2) {
                this.compressItem.setImageResource(R.drawable.video_quality1);
            } else if (i3 == 2) {
                this.compressItem.setImageResource(R.drawable.video_quality2);
            } else if (i3 == 3) {
                this.compressItem.setImageResource(R.drawable.video_quality3);
            }
            this.itemsLayout.requestLayout();
            long ceil = (long) Math.ceil((double) ((this.videoTimelineView.getRightProgress() - this.videoTimelineView.getLeftProgress()) * this.videoDuration));
            this.estimatedDuration = ceil;
            if (this.muteVideo) {
                int i4 = this.rotationValue;
                i = (i4 == 90 || i4 == 270) ? this.resultHeight : this.resultWidth;
                i2 = (i4 == 90 || i4 == 270) ? this.resultWidth : this.resultHeight;
                long j = (long) (((float) ((this.sendPhotoType == 1 ? ceil <= 2000 ? 2600000 : ceil <= 5000 ? 2200000 : 1560000 : 921600) / 8)) * (((float) ceil) / 1000.0f));
                this.estimatedSize = j;
                this.estimatedSize = j + ((j / 32768) * 16);
            } else if (this.compressItem.getTag() == null) {
                int i5 = this.rotationValue;
                i = (i5 == 90 || i5 == 270) ? this.originalHeight : this.originalWidth;
                i2 = (i5 == 90 || i5 == 270) ? this.originalWidth : this.originalHeight;
                this.estimatedSize = (long) (((float) this.originalSize) * (((float) this.estimatedDuration) / this.videoDuration));
            } else {
                int i6 = this.rotationValue;
                i = (i6 == 90 || i6 == 270) ? this.resultHeight : this.resultWidth;
                i2 = (i6 == 90 || i6 == 270) ? this.resultWidth : this.resultHeight;
                long j2 = (long) (((float) ((this.sendPhotoType == 1 ? 0 : this.audioFramesSize) + this.videoFramesSize)) * (((float) this.estimatedDuration) / this.videoDuration));
                this.estimatedSize = j2;
                this.estimatedSize = j2 + ((j2 / 32768) * 16);
            }
            this.videoCutStart = this.videoTimelineView.getLeftProgress();
            float rightProgress = this.videoTimelineView.getRightProgress();
            this.videoCutEnd = rightProgress;
            float f = this.videoCutStart;
            if (f == 0.0f) {
                this.startTime = -1;
            } else {
                this.startTime = ((long) (f * this.videoDuration)) * 1000;
            }
            if (rightProgress == 1.0f) {
                this.endTime = -1;
            } else {
                this.endTime = ((long) (rightProgress * this.videoDuration)) * 1000;
            }
            this.currentSubtitle = String.format("%s, %s", new Object[]{String.format("%dx%d", new Object[]{Integer.valueOf(i), Integer.valueOf(i2)}), String.format("%s, ~%s", new Object[]{AndroidUtilities.formatShortDuration((int) (this.estimatedDuration / 1000)), AndroidUtilities.formatFileSize(this.estimatedSize)})});
            this.actionBar.beginDelayedTransition();
            this.actionBar.setSubtitle(this.muteVideo ? LocaleController.getString("SoundMuted", R.string.SoundMuted) : this.currentSubtitle);
        }
    }

    /* access modifiers changed from: private */
    public void requestVideoPreview(int i) {
        if (this.videoPreviewMessageObject != null) {
            MediaController.getInstance().cancelVideoConvert(this.videoPreviewMessageObject);
        }
        boolean z = this.requestingPreview && !this.tryStartRequestPreviewOnFinish;
        this.requestingPreview = false;
        this.loadInitialVideo = false;
        this.progressView.setVisibility(4);
        if (i != 1) {
            this.tryStartRequestPreviewOnFinish = false;
            this.photoProgressViews[0].setBackgroundState(3, false, true);
            if (i == 2) {
                preparePlayer(this.currentPlayingVideoFile, false, false, this.editState.savedFilterState);
                this.videoPlayer.seekTo((long) (this.videoTimelineView.getLeftProgress() * this.videoDuration));
            }
        } else if (this.resultHeight == this.originalHeight && this.resultWidth == this.originalWidth) {
            this.tryStartRequestPreviewOnFinish = false;
            PhotoProgressView[] photoProgressViewArr = this.photoProgressViews;
            photoProgressViewArr[0].setProgress(0.0f, photoProgressViewArr[0].backgroundState == 0 || this.photoProgressViews[0].previousBackgroundState == 0);
            this.photoProgressViews[0].setBackgroundState(3, false, true);
            if (!z) {
                preparePlayer(this.currentPlayingVideoFile, false, false, this.editState.savedFilterState);
                this.videoPlayer.seekTo((long) (this.videoTimelineView.getLeftProgress() * this.videoDuration));
            } else {
                this.loadInitialVideo = true;
            }
        } else {
            releasePlayer(false);
            if (this.videoPreviewMessageObject == null) {
                TLRPC$TL_message tLRPC$TL_message = new TLRPC$TL_message();
                tLRPC$TL_message.id = 0;
                tLRPC$TL_message.message = "";
                tLRPC$TL_message.media = new TLRPC$TL_messageMediaEmpty();
                tLRPC$TL_message.action = new TLRPC$TL_messageActionEmpty();
                tLRPC$TL_message.dialog_id = this.currentDialogId;
                MessageObject messageObject = new MessageObject(UserConfig.selectedAccount, tLRPC$TL_message, false, false);
                this.videoPreviewMessageObject = messageObject;
                messageObject.messageOwner.attachPath = new File(FileLoader.getDirectory(4), "video_preview.mp4").getAbsolutePath();
                this.videoPreviewMessageObject.videoEditedInfo = new VideoEditedInfo();
                VideoEditedInfo videoEditedInfo = this.videoPreviewMessageObject.videoEditedInfo;
                videoEditedInfo.rotationValue = this.rotationValue;
                videoEditedInfo.originalWidth = this.originalWidth;
                videoEditedInfo.originalHeight = this.originalHeight;
                videoEditedInfo.framerate = this.videoFramerate;
                videoEditedInfo.originalPath = this.currentPlayingVideoFile.getPath();
            }
            VideoEditedInfo videoEditedInfo2 = this.videoPreviewMessageObject.videoEditedInfo;
            long j = this.startTime;
            videoEditedInfo2.startTime = j;
            long j2 = this.endTime;
            videoEditedInfo2.endTime = j2;
            if (j == -1) {
                j = 0;
            }
            if (j2 == -1) {
                j2 = (long) (this.videoDuration * 1000.0f);
            }
            if (j2 - j > 5000000) {
                videoEditedInfo2.endTime = j + 5000000;
            }
            videoEditedInfo2.bitrate = this.bitrate;
            videoEditedInfo2.resultWidth = this.resultWidth;
            videoEditedInfo2.resultHeight = this.resultHeight;
            videoEditedInfo2.needUpdateProgress = true;
            videoEditedInfo2.originalDuration = (long) (this.videoDuration * 1000.0f);
            if (!MediaController.getInstance().scheduleVideoConvert(this.videoPreviewMessageObject, true)) {
                this.tryStartRequestPreviewOnFinish = true;
            }
            this.requestingPreview = true;
            PhotoProgressView[] photoProgressViewArr2 = this.photoProgressViews;
            photoProgressViewArr2[0].setProgress(0.0f, photoProgressViewArr2[0].backgroundState == 0 || this.photoProgressViews[0].previousBackgroundState == 0);
            this.photoProgressViews[0].setBackgroundState(0, false, true);
        }
        this.containerView.invalidate();
    }

    /* access modifiers changed from: private */
    public void updateWidthHeightBitrateForCompression() {
        int i = this.compressionsCount;
        if (i > 0) {
            if (this.selectedCompression >= i) {
                this.selectedCompression = i - 1;
            }
            if (this.sendPhotoType == 1) {
                float max = Math.max(800.0f / ((float) this.originalWidth), 800.0f / ((float) this.originalHeight));
                this.resultWidth = Math.round((((float) this.originalWidth) * max) / 2.0f) * 2;
                this.resultHeight = Math.round((((float) this.originalHeight) * max) / 2.0f) * 2;
            } else {
                int i2 = this.selectedCompression;
                float f = i2 != 0 ? i2 != 1 ? i2 != 2 ? 1920.0f : 1280.0f : 854.0f : 480.0f;
                int i3 = this.originalWidth;
                int i4 = this.originalHeight;
                float f2 = f / (i3 > i4 ? (float) i3 : (float) i4);
                if (i2 != i - 1 || f2 < 1.0f) {
                    this.resultWidth = Math.round((((float) i3) * f2) / 2.0f) * 2;
                    this.resultHeight = Math.round((((float) this.originalHeight) * f2) / 2.0f) * 2;
                } else {
                    this.resultWidth = i3;
                    this.resultHeight = i4;
                }
            }
            if (this.bitrate != 0) {
                if (this.sendPhotoType == 1) {
                    this.bitrate = 1560000;
                } else {
                    int i5 = this.resultWidth;
                    int i6 = this.originalWidth;
                    if (i5 == i6 && this.resultHeight == this.originalHeight) {
                        this.bitrate = this.originalBitrate;
                    } else {
                        this.bitrate = MediaController.makeVideoBitrate(this.originalHeight, i6, this.originalBitrate, this.resultHeight, i5);
                    }
                }
                this.videoFramesSize = (long) ((((float) (this.bitrate / 8)) * this.videoDuration) / 1000.0f);
            }
        }
    }

    private void showQualityView(final boolean z) {
        TextureView textureView;
        if (z && this.textureUploaded && this.videoSizeSet && !this.changingTextureView && (textureView = this.videoTextureView) != null) {
            this.videoFrameBitmap = textureView.getBitmap();
        }
        if (z) {
            this.previousCompression = this.selectedCompression;
        }
        AnimatorSet animatorSet = this.qualityChooseViewAnimation;
        if (animatorSet != null) {
            animatorSet.cancel();
        }
        this.qualityChooseViewAnimation = new AnimatorSet();
        float f = 0.0f;
        if (z) {
            this.qualityChooseView.setTag(1);
            this.qualityChooseViewAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(this.pickerView, View.TRANSLATION_Y, new float[]{0.0f, (float) AndroidUtilities.dp(152.0f)}), ObjectAnimator.ofFloat(this.pickerViewSendButton, View.TRANSLATION_Y, new float[]{0.0f, (float) AndroidUtilities.dp(152.0f)}), ObjectAnimator.ofFloat(this.bottomLayout, View.TRANSLATION_Y, new float[]{(float) (-AndroidUtilities.dp(48.0f)), (float) AndroidUtilities.dp(104.0f)})});
        } else {
            this.qualityChooseView.setTag((Object) null);
            this.qualityChooseViewAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(this.qualityChooseView, View.TRANSLATION_Y, new float[]{0.0f, (float) AndroidUtilities.dp(166.0f)}), ObjectAnimator.ofFloat(this.qualityPicker, View.TRANSLATION_Y, new float[]{0.0f, (float) AndroidUtilities.dp(166.0f)}), ObjectAnimator.ofFloat(this.bottomLayout, View.TRANSLATION_Y, new float[]{(float) (-AndroidUtilities.dp(48.0f)), (float) AndroidUtilities.dp(118.0f)})});
        }
        this.qualityChooseViewAnimation.addListener(new AnimatorListenerAdapter() {
            public void onAnimationEnd(Animator animator) {
                if (animator.equals(PhotoViewer.this.qualityChooseViewAnimation)) {
                    AnimatorSet unused = PhotoViewer.this.qualityChooseViewAnimation = new AnimatorSet();
                    if (z) {
                        PhotoViewer.this.qualityChooseView.setVisibility(0);
                        PhotoViewer.this.qualityPicker.setVisibility(0);
                        PhotoViewer.this.qualityChooseViewAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.qualityChooseView, View.TRANSLATION_Y, new float[]{0.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.qualityPicker, View.TRANSLATION_Y, new float[]{0.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.bottomLayout, View.TRANSLATION_Y, new float[]{(float) (-AndroidUtilities.dp(48.0f))})});
                    } else {
                        PhotoViewer.this.qualityChooseView.setVisibility(4);
                        PhotoViewer.this.qualityPicker.setVisibility(4);
                        PhotoViewer.this.qualityChooseViewAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.pickerView, View.TRANSLATION_Y, new float[]{0.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.pickerViewSendButton, View.TRANSLATION_Y, new float[]{0.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.bottomLayout, View.TRANSLATION_Y, new float[]{(float) (-AndroidUtilities.dp(48.0f))})});
                    }
                    PhotoViewer.this.qualityChooseViewAnimation.addListener(new AnimatorListenerAdapter() {
                        public void onAnimationEnd(Animator animator) {
                            if (animator.equals(PhotoViewer.this.qualityChooseViewAnimation)) {
                                AnimatorSet unused = PhotoViewer.this.qualityChooseViewAnimation = null;
                            }
                        }
                    });
                    PhotoViewer.this.qualityChooseViewAnimation.setDuration(200);
                    PhotoViewer.this.qualityChooseViewAnimation.setInterpolator(AndroidUtilities.decelerateInterpolator);
                    PhotoViewer.this.qualityChooseViewAnimation.start();
                }
            }

            public void onAnimationCancel(Animator animator) {
                AnimatorSet unused = PhotoViewer.this.qualityChooseViewAnimation = null;
            }
        });
        this.qualityChooseViewAnimation.setDuration(200);
        this.qualityChooseViewAnimation.setInterpolator(AndroidUtilities.accelerateInterpolator);
        this.qualityChooseViewAnimation.start();
        float f2 = 0.25f;
        if (this.cameraItem.getVisibility() == 0) {
            this.cameraItem.animate().scaleX(z ? 0.25f : 1.0f).scaleY(z ? 0.25f : 1.0f).alpha(z ? 0.0f : 1.0f).setDuration(200);
        }
        if (this.muteItem.getVisibility() == 0) {
            ViewPropertyAnimator scaleX = this.muteItem.animate().scaleX(z ? 0.25f : 1.0f);
            if (!z) {
                f2 = 1.0f;
            }
            ViewPropertyAnimator scaleY = scaleX.scaleY(f2);
            if (!z) {
                f = 1.0f;
            }
            scaleY.alpha(f).setDuration(200);
        }
    }

    private void processOpenVideo(final String str, boolean z, float f, float f2) {
        if (this.currentLoadingVideoRunnable != null) {
            Utilities.globalQueue.cancelRunnable(this.currentLoadingVideoRunnable);
            this.currentLoadingVideoRunnable = null;
        }
        this.videoTimelineView.setVideoPath(str, f, f2);
        this.videoPreviewMessageObject = null;
        boolean z2 = true;
        if (!z && this.sendPhotoType != 1) {
            z2 = false;
        }
        this.muteVideo = z2;
        this.compressionsCount = -1;
        this.rotationValue = 0;
        this.videoFramerate = 25;
        this.originalSize = new File(str).length();
        DispatchQueue dispatchQueue = Utilities.globalQueue;
        AnonymousClass78 r6 = new Runnable() {
            public void run() {
                if (PhotoViewer.this.currentLoadingVideoRunnable == this) {
                    int videoBitrate = MediaController.getVideoBitrate(str);
                    int[] iArr = new int[11];
                    AnimatedFileDrawable.getVideoInfo(str, iArr);
                    if (PhotoViewer.this.currentLoadingVideoRunnable == this) {
                        AndroidUtilities.runOnUIThread(new PhotoViewer$78$$ExternalSyntheticLambda0(this, this, iArr, videoBitrate));
                    }
                }
            }

            /* access modifiers changed from: private */
            public /* synthetic */ void lambda$run$0(Runnable runnable, int[] iArr, int i) {
                if (PhotoViewer.this.parentActivity != null && runnable == PhotoViewer.this.currentLoadingVideoRunnable) {
                    Runnable unused = PhotoViewer.this.currentLoadingVideoRunnable = null;
                    boolean unused2 = PhotoViewer.this.videoConvertSupported = iArr[0] != 0 && (!(iArr[10] != 0) || iArr[9] != 0);
                    long unused3 = PhotoViewer.this.audioFramesSize = (long) iArr[5];
                    float unused4 = PhotoViewer.this.videoDuration = (float) iArr[4];
                    if (i == -1) {
                        PhotoViewer photoViewer = PhotoViewer.this;
                        int unused5 = photoViewer.originalBitrate = photoViewer.bitrate = iArr[3];
                    } else {
                        PhotoViewer photoViewer2 = PhotoViewer.this;
                        int unused6 = photoViewer2.originalBitrate = photoViewer2.bitrate = i;
                    }
                    int unused7 = PhotoViewer.this.videoFramerate = iArr[7];
                    PhotoViewer photoViewer3 = PhotoViewer.this;
                    long unused8 = photoViewer3.videoFramesSize = (long) ((((float) (photoViewer3.bitrate / 8)) * PhotoViewer.this.videoDuration) / 1000.0f);
                    if (PhotoViewer.this.videoConvertSupported) {
                        int unused9 = PhotoViewer.this.rotationValue = iArr[8];
                        PhotoViewer photoViewer4 = PhotoViewer.this;
                        int unused10 = photoViewer4.resultWidth = photoViewer4.originalWidth = iArr[1];
                        PhotoViewer photoViewer5 = PhotoViewer.this;
                        int unused11 = photoViewer5.resultHeight = photoViewer5.originalHeight = iArr[2];
                        PhotoViewer photoViewer6 = PhotoViewer.this;
                        photoViewer6.updateCompressionsCount(photoViewer6.originalWidth, PhotoViewer.this.originalHeight);
                        PhotoViewer photoViewer7 = PhotoViewer.this;
                        int unused12 = photoViewer7.selectedCompression = photoViewer7.selectCompression();
                        PhotoViewer.this.updateWidthHeightBitrateForCompression();
                        if (PhotoViewer.this.selectedCompression > PhotoViewer.this.compressionsCount - 1) {
                            PhotoViewer photoViewer8 = PhotoViewer.this;
                            int unused13 = photoViewer8.selectedCompression = photoViewer8.compressionsCount - 1;
                        }
                        PhotoViewer photoViewer9 = PhotoViewer.this;
                        photoViewer9.setCompressItemEnabled(photoViewer9.compressionsCount > 1, true);
                        if (BuildVars.LOGS_ENABLED) {
                            FileLog.d("compressionsCount = " + PhotoViewer.this.compressionsCount + " w = " + PhotoViewer.this.originalWidth + " h = " + PhotoViewer.this.originalHeight + " r = " + PhotoViewer.this.rotationValue);
                        }
                        if (Build.VERSION.SDK_INT < 18 && PhotoViewer.this.compressItem.getTag() != null) {
                            boolean unused14 = PhotoViewer.this.videoConvertSupported = false;
                            PhotoViewer.this.setCompressItemEnabled(false, true);
                        }
                        PhotoViewer.this.qualityChooseView.invalidate();
                    } else {
                        PhotoViewer.this.setCompressItemEnabled(false, true);
                        int unused15 = PhotoViewer.this.compressionsCount = 0;
                    }
                    PhotoViewer.this.updateVideoInfo();
                    PhotoViewer.this.updateMuteButton();
                }
            }
        };
        this.currentLoadingVideoRunnable = r6;
        dispatchQueue.postRunnable(r6);
    }

    /* access modifiers changed from: private */
    public int selectCompression() {
        if (this.originalSize > NUM) {
            return this.compressionsCount - 1;
        }
        SharedPreferences globalMainSettings = MessagesController.getGlobalMainSettings();
        int i = this.compressionsCount;
        while (i < 5) {
            int i2 = globalMainSettings.getInt(String.format(Locale.US, "compress_video_%d", new Object[]{Integer.valueOf(i)}), -1);
            if (i2 >= 0) {
                return Math.min(i2, 2);
            }
            i++;
        }
        return Math.min(2, Math.round(((float) DownloadController.getInstance(this.currentAccount).getMaxVideoBitrate()) / (100.0f / ((float) i))) - 1);
    }

    /* access modifiers changed from: private */
    public void updateCompressionsCount(int i, int i2) {
        int max = Math.max(i, i2);
        if (max > 1280) {
            this.compressionsCount = 4;
        } else if (max > 854) {
            this.compressionsCount = 3;
        } else if (max > 640) {
            this.compressionsCount = 2;
        } else {
            this.compressionsCount = 1;
        }
    }

    /* access modifiers changed from: private */
    public void setCompressItemEnabled(boolean z, boolean z2) {
        ImageView imageView = this.compressItem;
        if (imageView != null) {
            if (z && imageView.getTag() != null) {
                return;
            }
            if (z || this.compressItem.getTag() != null) {
                this.compressItem.setTag(z ? 1 : null);
                AnimatorSet animatorSet = this.compressItemAnimation;
                if (animatorSet != null) {
                    animatorSet.cancel();
                    this.compressItemAnimation = null;
                }
                float f = 1.0f;
                if (z2) {
                    AnimatorSet animatorSet2 = new AnimatorSet();
                    this.compressItemAnimation = animatorSet2;
                    Animator[] animatorArr = new Animator[4];
                    ImageView imageView2 = this.compressItem;
                    Property property = View.ALPHA;
                    float[] fArr = new float[1];
                    fArr[0] = z ? 1.0f : 0.5f;
                    animatorArr[0] = ObjectAnimator.ofFloat(imageView2, property, fArr);
                    ImageView imageView3 = this.paintItem;
                    Property property2 = View.ALPHA;
                    float[] fArr2 = new float[1];
                    fArr2[0] = this.videoConvertSupported ? 1.0f : 0.5f;
                    animatorArr[1] = ObjectAnimator.ofFloat(imageView3, property2, fArr2);
                    ImageView imageView4 = this.tuneItem;
                    Property property3 = View.ALPHA;
                    float[] fArr3 = new float[1];
                    fArr3[0] = this.videoConvertSupported ? 1.0f : 0.5f;
                    animatorArr[2] = ObjectAnimator.ofFloat(imageView4, property3, fArr3);
                    ImageView imageView5 = this.cropItem;
                    Property property4 = View.ALPHA;
                    float[] fArr4 = new float[1];
                    if (!this.videoConvertSupported) {
                        f = 0.5f;
                    }
                    fArr4[0] = f;
                    animatorArr[3] = ObjectAnimator.ofFloat(imageView5, property4, fArr4);
                    animatorSet2.playTogether(animatorArr);
                    this.compressItemAnimation.setDuration(180);
                    this.compressItemAnimation.setInterpolator(decelerateInterpolator);
                    this.compressItemAnimation.start();
                    return;
                }
                ImageView imageView6 = this.compressItem;
                if (!z) {
                    f = 0.5f;
                }
                imageView6.setAlpha(f);
            }
        }
    }

    /* access modifiers changed from: private */
    public void updateAccessibilityOverlayVisibility() {
        if (this.playButtonAccessibilityOverlay != null) {
            int access$24300 = this.photoProgressViews[0].backgroundState;
            if (!this.photoProgressViews[0].isVisible() || !(access$24300 == 3 || access$24300 == 4 || access$24300 == 2 || access$24300 == 1)) {
                this.playButtonAccessibilityOverlay.setVisibility(4);
                return;
            }
            if (access$24300 == 3) {
                this.playButtonAccessibilityOverlay.setContentDescription(LocaleController.getString("AccActionPlay", R.string.AccActionPlay));
            } else if (access$24300 == 2) {
                this.playButtonAccessibilityOverlay.setContentDescription(LocaleController.getString("AccActionDownload", R.string.AccActionDownload));
            } else if (access$24300 == 1) {
                this.playButtonAccessibilityOverlay.setContentDescription(LocaleController.getString("AccActionCancelDownload", R.string.AccActionCancelDownload));
            } else {
                this.playButtonAccessibilityOverlay.setContentDescription(LocaleController.getString("AccActionPause", R.string.AccActionPause));
            }
            this.playButtonAccessibilityOverlay.setVisibility(0);
        }
    }

    private class ListAdapter extends RecyclerListView.SelectionAdapter {
        private Context mContext;

        public int getItemViewType(int i) {
            return 0;
        }

        public boolean isEnabled(RecyclerView.ViewHolder viewHolder) {
            return false;
        }

        public ListAdapter(Context context) {
            this.mContext = context;
        }

        public int getItemCount() {
            if (PhotoViewer.this.placeProvider == null || PhotoViewer.this.placeProvider.getSelectedPhotosOrder() == null) {
                return 0;
            }
            return PhotoViewer.this.placeProvider.getSelectedPhotosOrder().size();
        }

        public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup viewGroup, int i) {
            PhotoPickerPhotoCell photoPickerPhotoCell = new PhotoPickerPhotoCell(this.mContext);
            photoPickerPhotoCell.checkFrame.setOnClickListener(new PhotoViewer$ListAdapter$$ExternalSyntheticLambda0(this));
            return new RecyclerListView.Holder(photoPickerPhotoCell);
        }

        /* access modifiers changed from: private */
        public /* synthetic */ void lambda$onCreateViewHolder$0(View view) {
            Object tag = ((View) view.getParent()).getTag();
            int indexOf = PhotoViewer.this.imagesArrLocals.indexOf(tag);
            if (indexOf >= 0) {
                int photoChecked = PhotoViewer.this.placeProvider.setPhotoChecked(indexOf, PhotoViewer.this.getCurrentVideoEditedInfo());
                boolean isPhotoChecked = PhotoViewer.this.placeProvider.isPhotoChecked(indexOf);
                if (indexOf == PhotoViewer.this.currentIndex) {
                    PhotoViewer.this.checkImageView.setChecked(-1, isPhotoChecked, true);
                }
                if (photoChecked >= 0) {
                    PhotoViewer.this.selectedPhotosAdapter.notifyItemRemoved(photoChecked);
                    if (photoChecked == 0) {
                        PhotoViewer.this.selectedPhotosAdapter.notifyItemChanged(0);
                    }
                }
                PhotoViewer.this.updateSelectedCount();
                return;
            }
            int photoUnchecked = PhotoViewer.this.placeProvider.setPhotoUnchecked(tag);
            if (photoUnchecked >= 0) {
                PhotoViewer.this.selectedPhotosAdapter.notifyItemRemoved(photoUnchecked);
                if (photoUnchecked == 0) {
                    PhotoViewer.this.selectedPhotosAdapter.notifyItemChanged(0);
                }
                PhotoViewer.this.updateSelectedCount();
            }
        }

        public void onBindViewHolder(RecyclerView.ViewHolder viewHolder, int i) {
            PhotoPickerPhotoCell photoPickerPhotoCell = (PhotoPickerPhotoCell) viewHolder.itemView;
            photoPickerPhotoCell.setItemWidth(AndroidUtilities.dp(85.0f), i != 0 ? AndroidUtilities.dp(6.0f) : 0);
            BackupImageView backupImageView = photoPickerPhotoCell.imageView;
            backupImageView.setOrientation(0, true);
            Object obj = PhotoViewer.this.placeProvider.getSelectedPhotos().get(PhotoViewer.this.placeProvider.getSelectedPhotosOrder().get(i));
            if (obj instanceof MediaController.PhotoEntry) {
                MediaController.PhotoEntry photoEntry = (MediaController.PhotoEntry) obj;
                photoPickerPhotoCell.setTag(photoEntry);
                photoPickerPhotoCell.videoInfoContainer.setVisibility(4);
                String str = photoEntry.thumbPath;
                if (str != null) {
                    backupImageView.setImage(str, (String) null, this.mContext.getResources().getDrawable(R.drawable.nophotos));
                } else if (photoEntry.path != null) {
                    backupImageView.setOrientation(photoEntry.orientation, true);
                    if (photoEntry.isVideo) {
                        photoPickerPhotoCell.videoInfoContainer.setVisibility(0);
                        photoPickerPhotoCell.videoTextView.setText(AndroidUtilities.formatShortDuration(photoEntry.duration));
                        backupImageView.setImage("vthumb://" + photoEntry.imageId + ":" + photoEntry.path, (String) null, this.mContext.getResources().getDrawable(R.drawable.nophotos));
                    } else {
                        backupImageView.setImage("thumb://" + photoEntry.imageId + ":" + photoEntry.path, (String) null, this.mContext.getResources().getDrawable(R.drawable.nophotos));
                    }
                } else {
                    backupImageView.setImageResource(R.drawable.nophotos);
                }
                photoPickerPhotoCell.setChecked(-1, true, false);
                photoPickerPhotoCell.checkBox.setVisibility(0);
            } else if (obj instanceof MediaController.SearchImage) {
                MediaController.SearchImage searchImage = (MediaController.SearchImage) obj;
                photoPickerPhotoCell.setTag(searchImage);
                photoPickerPhotoCell.setImage(searchImage);
                photoPickerPhotoCell.videoInfoContainer.setVisibility(4);
                photoPickerPhotoCell.setChecked(-1, true, false);
                photoPickerPhotoCell.checkBox.setVisibility(0);
            }
        }
    }

    private class FirstFrameView extends ImageView {
        private VideoPlayer currentVideoPlayer;
        private ValueAnimator fadeAnimator;
        private final TimeInterpolator fadeInterpolator = CubicBezierInterpolator.EASE_IN;
        private boolean gettingFrame = false;
        private int gettingFrameIndex = 0;
        private boolean gotError = false;
        private boolean hasFrame = false;

        public FirstFrameView(Context context) {
            super(context);
            setAlpha(0.0f);
        }

        public void clear() {
            this.hasFrame = false;
            this.gotError = false;
            if (this.gettingFrame) {
                this.gettingFrameIndex++;
                this.gettingFrame = false;
            }
            setImageResource(17170445);
        }

        public void checkFromPlayer(VideoPlayer videoPlayer) {
            if (this.currentVideoPlayer != videoPlayer) {
                this.gotError = false;
                clear();
            }
            if (videoPlayer != null) {
                long duration = videoPlayer.getDuration() - videoPlayer.getCurrentPosition();
                if (!this.hasFrame && !this.gotError && !this.gettingFrame && ((float) duration) < 5250.0f) {
                    Uri currentUri = videoPlayer.getCurrentUri();
                    int i = this.gettingFrameIndex + 1;
                    this.gettingFrameIndex = i;
                    Utilities.globalQueue.postRunnable(new PhotoViewer$FirstFrameView$$ExternalSyntheticLambda3(this, currentUri, i));
                    this.gettingFrame = true;
                }
            }
            this.currentVideoPlayer = videoPlayer;
        }

        /* access modifiers changed from: private */
        public /* synthetic */ void lambda$checkFromPlayer$2(Uri uri, int i) {
            try {
                File file = new File(uri.getPath());
                int i2 = UserConfig.selectedAccount;
                Point point = AndroidUtilities.displaySize;
                AnimatedFileDrawable animatedFileDrawable = new AnimatedFileDrawable(file, true, 0, (TLRPC$Document) null, (ImageLocation) null, (Object) null, 0, i2, false, point.x, point.y, (BitmapsCache.CacheOptions) null);
                Bitmap frameAtTime = animatedFileDrawable.getFrameAtTime(0);
                animatedFileDrawable.recycle();
                AndroidUtilities.runOnUIThread(new PhotoViewer$FirstFrameView$$ExternalSyntheticLambda2(this, i, frameAtTime));
            } catch (Throwable th) {
                FileLog.e(th);
                AndroidUtilities.runOnUIThread(new PhotoViewer$FirstFrameView$$ExternalSyntheticLambda1(this));
            }
        }

        /* access modifiers changed from: private */
        public /* synthetic */ void lambda$checkFromPlayer$0(int i, Bitmap bitmap) {
            if (i == this.gettingFrameIndex) {
                setImageBitmap(bitmap);
                this.hasFrame = true;
                this.gettingFrame = false;
            }
        }

        /* access modifiers changed from: private */
        public /* synthetic */ void lambda$checkFromPlayer$1() {
            this.gotError = true;
        }

        /* access modifiers changed from: private */
        public void updateAlpha() {
            if (PhotoViewer.this.videoPlayer == null || PhotoViewer.this.videoPlayer.getDuration() == -9223372036854775807L) {
                ValueAnimator valueAnimator = this.fadeAnimator;
                if (valueAnimator != null) {
                    valueAnimator.cancel();
                    this.fadeAnimator = null;
                }
                setAlpha(0.0f);
                return;
            }
            long max = Math.max(0, PhotoViewer.this.videoPlayer.getDuration() - PhotoViewer.this.videoPlayer.getCurrentPosition());
            float max2 = 1.0f - Math.max(Math.min(((float) max) / 250.0f, 1.0f), 0.0f);
            if (max2 <= 0.0f) {
                ValueAnimator valueAnimator2 = this.fadeAnimator;
                if (valueAnimator2 != null) {
                    valueAnimator2.cancel();
                    this.fadeAnimator = null;
                }
                setAlpha(0.0f);
            } else if (!PhotoViewer.this.videoPlayer.isPlaying()) {
                ValueAnimator valueAnimator3 = this.fadeAnimator;
                if (valueAnimator3 != null) {
                    valueAnimator3.cancel();
                    this.fadeAnimator = null;
                }
                setAlpha(max2);
            } else if (this.fadeAnimator == null) {
                ValueAnimator ofFloat = ValueAnimator.ofFloat(new float[]{max2, 1.0f});
                this.fadeAnimator = ofFloat;
                ofFloat.addUpdateListener(new PhotoViewer$FirstFrameView$$ExternalSyntheticLambda0(this));
                this.fadeAnimator.setDuration(max);
                this.fadeAnimator.setInterpolator(this.fadeInterpolator);
                this.fadeAnimator.start();
                setAlpha(max2);
            }
        }

        /* access modifiers changed from: private */
        public /* synthetic */ void lambda$updateAlpha$3(ValueAnimator valueAnimator) {
            setAlpha(((Float) valueAnimator.getAnimatedValue()).floatValue());
        }
    }

    /* access modifiers changed from: private */
    public int getThemedColor(String str) {
        Theme.ResourcesProvider resourcesProvider2 = this.resourcesProvider;
        Integer color = resourcesProvider2 != null ? resourcesProvider2.getColor(str) : null;
        return color != null ? color.intValue() : Theme.getColor(str);
    }
}
