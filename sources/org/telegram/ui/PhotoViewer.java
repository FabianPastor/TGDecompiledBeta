package org.telegram.ui;

import android.animation.Animator;
import android.animation.AnimatorListenerAdapter;
import android.animation.AnimatorSet;
import android.animation.ObjectAnimator;
import android.animation.ValueAnimator;
import android.app.Activity;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Configuration;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.ColorFilter;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.PorterDuff;
import android.graphics.PorterDuffColorFilter;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.SurfaceTexture;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.ColorDrawable;
import android.graphics.drawable.Drawable;
import android.graphics.drawable.GradientDrawable;
import android.media.MediaCodec;
import android.media.MediaCodecInfo;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.os.SystemClock;
import android.os.Vibrator;
import android.provider.Settings;
import android.text.Layout;
import android.text.Spannable;
import android.text.SpannableString;
import android.text.SpannableStringBuilder;
import android.text.StaticLayout;
import android.text.TextPaint;
import android.text.TextUtils;
import android.text.method.LinkMovementMethod;
import android.text.style.ClickableSpan;
import android.text.style.URLSpan;
import android.transition.ChangeBounds;
import android.transition.Fade;
import android.transition.Transition;
import android.transition.TransitionManager;
import android.transition.TransitionSet;
import android.transition.TransitionValues;
import android.util.FloatProperty;
import android.util.Property;
import android.util.Range;
import android.util.SparseArray;
import android.view.ActionMode;
import android.view.ContextThemeWrapper;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.OrientationEventListener;
import android.view.TextureView;
import android.view.VelocityTracker;
import android.view.View;
import android.view.ViewConfiguration;
import android.view.ViewGroup;
import android.view.ViewPropertyAnimator;
import android.view.ViewTreeObserver;
import android.view.WindowInsets;
import android.view.WindowManager;
import android.view.accessibility.AccessibilityManager;
import android.view.animation.DecelerateInterpolator;
import android.view.animation.Interpolator;
import android.view.animation.LinearInterpolator;
import android.view.animation.OvershootInterpolator;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.OverScroller;
import android.widget.Scroller;
import android.widget.TextView;
import android.widget.Toast;
import androidx.collection.ArrayMap;
import androidx.core.content.ContextCompat;
import androidx.core.content.FileProvider;
import androidx.core.graphics.ColorUtils;
import androidx.core.view.inputmethod.InputContentInfoCompat;
import androidx.core.widget.NestedScrollView;
import androidx.dynamicanimation.animation.DynamicAnimation;
import androidx.dynamicanimation.animation.SpringAnimation;
import androidx.exifinterface.media.ExifInterface;
import androidx.recyclerview.widget.DefaultItemAnimator;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.LinearSmoothScrollerEnd;
import androidx.recyclerview.widget.RecyclerView;
import com.google.android.exoplayer2.analytics.AnalyticsListener;
import com.google.android.exoplayer2.ui.AspectRatioFrameLayout;
import com.google.android.gms.vision.Frame;
import com.google.android.gms.vision.face.Face;
import com.google.android.gms.vision.face.FaceDetector;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.lang.reflect.Array;
import java.lang.reflect.Field;
import java.lang.reflect.Method;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import org.telegram.messenger.AndroidUtilities;
import org.telegram.messenger.ApplicationLoader;
import org.telegram.messenger.Bitmaps;
import org.telegram.messenger.BringAppForegroundService;
import org.telegram.messenger.BuildVars;
import org.telegram.messenger.ChatObject;
import org.telegram.messenger.DialogObject;
import org.telegram.messenger.DispatchQueue;
import org.telegram.messenger.DownloadController;
import org.telegram.messenger.Emoji;
import org.telegram.messenger.FileLoader;
import org.telegram.messenger.FileLog;
import org.telegram.messenger.ImageLoader;
import org.telegram.messenger.ImageLocation;
import org.telegram.messenger.ImageReceiver;
import org.telegram.messenger.LocaleController;
import org.telegram.messenger.MediaController;
import org.telegram.messenger.MediaDataController;
import org.telegram.messenger.MessageObject;
import org.telegram.messenger.MessagesController;
import org.telegram.messenger.MessagesStorage;
import org.telegram.messenger.NotificationCenter;
import org.telegram.messenger.SecureDocument;
import org.telegram.messenger.SendMessagesHelper;
import org.telegram.messenger.SharedConfig;
import org.telegram.messenger.UserConfig;
import org.telegram.messenger.UserObject;
import org.telegram.messenger.Utilities;
import org.telegram.messenger.VideoEditedInfo;
import org.telegram.messenger.WebFile;
import org.telegram.messenger.video.VideoPlayerRewinder;
import org.telegram.tgnet.ConnectionsManager;
import org.telegram.tgnet.TLObject;
import org.telegram.tgnet.TLRPC;
import org.telegram.ui.ActionBar.ActionBar;
import org.telegram.ui.ActionBar.ActionBarMenu;
import org.telegram.ui.ActionBar.ActionBarMenuItem;
import org.telegram.ui.ActionBar.ActionBarMenuSubItem;
import org.telegram.ui.ActionBar.ActionBarPopupWindow;
import org.telegram.ui.ActionBar.AdjustPanLayoutHelper;
import org.telegram.ui.ActionBar.AlertDialog;
import org.telegram.ui.ActionBar.BaseFragment;
import org.telegram.ui.ActionBar.BottomSheet;
import org.telegram.ui.ActionBar.SimpleTextView;
import org.telegram.ui.ActionBar.Theme;
import org.telegram.ui.Adapters.MentionsAdapter;
import org.telegram.ui.Cells.CheckBoxCell;
import org.telegram.ui.Cells.PhotoPickerPhotoCell;
import org.telegram.ui.Components.AlertsCreator;
import org.telegram.ui.Components.AnimatedFileDrawable;
import org.telegram.ui.Components.AnimationProperties;
import org.telegram.ui.Components.BackupImageView;
import org.telegram.ui.Components.Bulletin;
import org.telegram.ui.Components.BulletinFactory;
import org.telegram.ui.Components.ChatAttachAlert;
import org.telegram.ui.Components.CheckBox;
import org.telegram.ui.Components.ClippingImageView;
import org.telegram.ui.Components.CombinedDrawable;
import org.telegram.ui.Components.Crop.CropTransform;
import org.telegram.ui.Components.CubicBezierInterpolator;
import org.telegram.ui.Components.FadingTextViewLayout;
import org.telegram.ui.Components.FloatSeekBarAccessibilityDelegate;
import org.telegram.ui.Components.GestureDetector2;
import org.telegram.ui.Components.GroupedPhotosListView;
import org.telegram.ui.Components.HideViewAfterAnimation;
import org.telegram.ui.Components.LayoutHelper;
import org.telegram.ui.Components.NumberPicker;
import org.telegram.ui.Components.OtherDocumentPlaceholderDrawable;
import org.telegram.ui.Components.PaintingOverlay;
import org.telegram.ui.Components.PhotoCropView;
import org.telegram.ui.Components.PhotoFilterView;
import org.telegram.ui.Components.PhotoPaintView;
import org.telegram.ui.Components.PhotoViewerCaptionEnterView;
import org.telegram.ui.Components.PhotoViewerWebView;
import org.telegram.ui.Components.PickerBottomLayoutViewer;
import org.telegram.ui.Components.PipVideoView;
import org.telegram.ui.Components.PlayPauseDrawable;
import org.telegram.ui.Components.RLottieDrawable;
import org.telegram.ui.Components.RadialProgressView;
import org.telegram.ui.Components.RecyclerListView;
import org.telegram.ui.Components.SizeNotifierFrameLayoutPhoto;
import org.telegram.ui.Components.StickersAlert;
import org.telegram.ui.Components.TextViewSwitcher;
import org.telegram.ui.Components.Tooltip;
import org.telegram.ui.Components.URLSpanReplacement;
import org.telegram.ui.Components.URLSpanUserMentionPhotoViewer;
import org.telegram.ui.Components.UndoView;
import org.telegram.ui.Components.VideoEditTextureView;
import org.telegram.ui.Components.VideoForwardDrawable;
import org.telegram.ui.Components.VideoPlayer;
import org.telegram.ui.Components.VideoPlayerSeekBar;
import org.telegram.ui.Components.VideoSeekPreviewImage;
import org.telegram.ui.Components.VideoTimelinePlayView;
import org.telegram.ui.Components.ViewHelper;

public class PhotoViewer implements NotificationCenter.NotificationCenterDelegate, GestureDetector2.OnGestureListener, GestureDetector2.OnDoubleTapListener {
    /* access modifiers changed from: private */
    public static volatile PhotoViewer Instance = null;
    private static final int PROGRESS_CANCEL = 1;
    private static final int PROGRESS_EMPTY = 0;
    private static final int PROGRESS_LOAD = 2;
    private static final int PROGRESS_NONE = -1;
    private static final int PROGRESS_PAUSE = 4;
    private static final int PROGRESS_PLAY = 3;
    /* access modifiers changed from: private */
    public static volatile PhotoViewer PipInstance = null;
    public static final int SELECT_TYPE_AVATAR = 1;
    public static final int SELECT_TYPE_QR = 10;
    public static final int SELECT_TYPE_WALLPAPER = 3;
    private static final Property<VideoPlayerControlFrameLayout, Float> VPC_PROGRESS;
    /* access modifiers changed from: private */
    public static DecelerateInterpolator decelerateInterpolator = null;
    private static final int gallery_menu_cancel_loading = 7;
    private static final int gallery_menu_delete = 6;
    private static final int gallery_menu_edit_avatar = 17;
    private static final int gallery_menu_gap = 20;
    private static final int gallery_menu_masks = 13;
    private static final int gallery_menu_masks2 = 15;
    private static final int gallery_menu_openin = 11;
    private static final int gallery_menu_pip = 5;
    private static final int gallery_menu_save = 1;
    private static final int gallery_menu_savegif = 14;
    private static final int gallery_menu_send = 3;
    private static final int gallery_menu_set_as_main = 16;
    private static final int gallery_menu_share = 10;
    private static final int gallery_menu_share2 = 18;
    private static final int gallery_menu_showall = 2;
    private static final int gallery_menu_showinchat = 4;
    private static final int gallery_menu_speed = 19;
    private static final int gallery_menu_speed_fast = 24;
    private static final int gallery_menu_speed_normal = 23;
    private static final int gallery_menu_speed_slow = 22;
    private static final int gallery_menu_speed_veryfast = 25;
    private static final int gallery_menu_speed_veryslow = 21;
    /* access modifiers changed from: private */
    public static Drawable[] progressDrawables = null;
    /* access modifiers changed from: private */
    public static Paint progressPaint = null;
    private static final int thumbSize = 512;
    public final Property<View, Float> FLASH_VIEW_VALUE = new AnimationProperties.FloatProperty<View>("flashViewAlpha") {
        public void setValue(View object, float value) {
            object.setAlpha(value);
            if (PhotoViewer.this.photoCropView != null) {
                PhotoViewer.this.photoCropView.setVideoThumbFlashAlpha(value);
            }
        }

        public Float get(View object) {
            return Float.valueOf(object.getAlpha());
        }
    };
    /* access modifiers changed from: private */
    public ActionBar actionBar;
    /* access modifiers changed from: private */
    public AnimatorSet actionBarAnimator;
    private Map<View, Boolean> actionBarItemsVisibility = new HashMap(3);
    private Context activityContext;
    private ActionBarMenuSubItem allMediaItem;
    /* access modifiers changed from: private */
    public boolean allowMentions;
    private boolean allowOrder = true;
    private boolean allowShare;
    /* access modifiers changed from: private */
    public boolean allowShowFullscreenButton;
    /* access modifiers changed from: private */
    public float animateToScale;
    /* access modifiers changed from: private */
    public float animateToX;
    /* access modifiers changed from: private */
    public float animateToY;
    /* access modifiers changed from: private */
    public ClippingImageView animatingImageView;
    /* access modifiers changed from: private */
    public Runnable animationEndRunnable;
    /* access modifiers changed from: private */
    public int animationInProgress;
    /* access modifiers changed from: private */
    public long animationStartTime;
    private float animationValue;
    /* access modifiers changed from: private */
    public float[][] animationValues = ((float[][]) Array.newInstance(float.class, new int[]{2, 13}));
    /* access modifiers changed from: private */
    public boolean applying;
    /* access modifiers changed from: private */
    public AspectRatioFrameLayout aspectRatioFrameLayout;
    /* access modifiers changed from: private */
    public boolean attachedToWindow;
    /* access modifiers changed from: private */
    public long audioFramesSize;
    /* access modifiers changed from: private */
    public float avatarStartProgress;
    /* access modifiers changed from: private */
    public long avatarStartTime;
    /* access modifiers changed from: private */
    public ArrayList<TLRPC.Photo> avatarsArr = new ArrayList<>();
    /* access modifiers changed from: private */
    public long avatarsDialogId;
    /* access modifiers changed from: private */
    public BackgroundDrawable backgroundDrawable = new BackgroundDrawable(-16777216);
    private Paint bitmapPaint = new Paint(2);
    /* access modifiers changed from: private */
    public int bitrate;
    /* access modifiers changed from: private */
    public Paint blackPaint = new Paint();
    /* access modifiers changed from: private */
    public LinearLayout bottomButtonsLayout;
    /* access modifiers changed from: private */
    public FrameLayout bottomLayout;
    /* access modifiers changed from: private */
    public boolean bottomTouchEnabled = true;
    /* access modifiers changed from: private */
    public ImageView cameraItem;
    private boolean canDragDown = true;
    private boolean canEditAvatar;
    private boolean canZoom = true;
    /* access modifiers changed from: private */
    public FrameLayout captionContainer;
    /* access modifiers changed from: private */
    public PhotoViewerCaptionEnterView captionEditText;
    public CharSequence captionForAllMedia;
    private boolean captionHwLayerEnabled;
    /* access modifiers changed from: private */
    public TextView captionLimitView;
    /* access modifiers changed from: private */
    public CaptionScrollView captionScrollView;
    /* access modifiers changed from: private */
    public CaptionTextViewSwitcher captionTextViewSwitcher;
    /* access modifiers changed from: private */
    public long captureFrameAtTime = -1;
    /* access modifiers changed from: private */
    public long captureFrameReadyAtTime = -1;
    /* access modifiers changed from: private */
    public ImageReceiver centerImage = new ImageReceiver();
    /* access modifiers changed from: private */
    public AnimatorSet changeModeAnimation;
    /* access modifiers changed from: private */
    public TextureView changedTextureView;
    private boolean changingPage;
    /* access modifiers changed from: private */
    public boolean changingTextureView;
    /* access modifiers changed from: private */
    public CheckBox checkImageView;
    private int classGuid;
    /* access modifiers changed from: private */
    public ImageView compressItem;
    private AnimatorSet compressItemAnimation;
    /* access modifiers changed from: private */
    public int compressionsCount = -1;
    /* access modifiers changed from: private */
    public FrameLayoutDrawer containerView;
    private boolean cropInitied;
    private ImageView cropItem;
    /* access modifiers changed from: private */
    public CropTransform cropTransform = new CropTransform();
    /* access modifiers changed from: private */
    public int currentAccount;
    private AnimatedFileDrawable currentAnimation;
    /* access modifiers changed from: private */
    public ImageLocation currentAvatarLocation = null;
    /* access modifiers changed from: private */
    public Bitmap currentBitmap;
    private TLRPC.BotInlineResult currentBotInlineResult;
    /* access modifiers changed from: private */
    public long currentDialogId;
    /* access modifiers changed from: private */
    public int currentEditMode;
    /* access modifiers changed from: private */
    public ImageLocation currentFileLocation;
    /* access modifiers changed from: private */
    public ImageLocation currentFileLocationVideo;
    /* access modifiers changed from: private */
    public String[] currentFileNames = new String[3];
    private String currentImageFaceKey;
    private int currentImageHasFace;
    private String currentImagePath;
    /* access modifiers changed from: private */
    public int currentIndex;
    /* access modifiers changed from: private */
    public AnimatorSet currentListViewAnimation;
    /* access modifiers changed from: private */
    public Runnable currentLoadingVideoRunnable;
    /* access modifiers changed from: private */
    public MessageObject currentMessageObject;
    private TLRPC.PageBlock currentPageBlock;
    /* access modifiers changed from: private */
    public float currentPanTranslationY;
    private String currentPathObject;
    /* access modifiers changed from: private */
    public PlaceProviderObject currentPlaceObject;
    private Uri currentPlayingVideoFile;
    /* access modifiers changed from: private */
    public SecureDocument currentSecureDocument;
    private String currentSubtitle;
    /* access modifiers changed from: private */
    public ImageReceiver.BitmapHolder currentThumb;
    /* access modifiers changed from: private */
    public boolean currentVideoFinishedLoading;
    /* access modifiers changed from: private */
    public float currentVideoSpeed;
    private int dateOverride;
    /* access modifiers changed from: private */
    public FadingTextViewLayout dateTextView;
    /* access modifiers changed from: private */
    public boolean disableShowCheck;
    private boolean discardTap;
    private TextView docInfoTextView;
    private TextView docNameTextView;
    private boolean doneButtonPressed;
    /* access modifiers changed from: private */
    public boolean dontAutoPlay;
    /* access modifiers changed from: private */
    public boolean dontChangeCaptionPosition;
    /* access modifiers changed from: private */
    public boolean dontResetZoomOnFirstLayout;
    private boolean doubleTap;
    private boolean doubleTapEnabled;
    private float dragY;
    private boolean draggingDown;
    private boolean[] drawPressedDrawable = new boolean[2];
    /* access modifiers changed from: private */
    public EditState editState = new EditState();
    /* access modifiers changed from: private */
    public PickerBottomLayoutViewer editorDoneLayout;
    private boolean[] endReached = {false, true};
    private long endTime;
    private long estimatedDuration;
    private long estimatedSize;
    /* access modifiers changed from: private */
    public ImageView exitFullscreenButton;
    private boolean firstAnimationDelay;
    /* access modifiers changed from: private */
    public AnimatorSet flashAnimator;
    /* access modifiers changed from: private */
    public View flashView;
    boolean fromCamera;
    /* access modifiers changed from: private */
    public ImageView[] fullscreenButton = new ImageView[3];
    /* access modifiers changed from: private */
    public int fullscreenedByButton;
    /* access modifiers changed from: private */
    public GestureDetector2 gestureDetector;
    /* access modifiers changed from: private */
    public GroupedPhotosListView groupedPhotosListView;
    public boolean hasCaptionForAllMedia;
    /* access modifiers changed from: private */
    public Runnable hideActionBarRunnable = new Runnable() {
        public void run() {
            PhotoViewer photoViewer;
            if (PhotoViewer.this.videoPlayerControlVisible && PhotoViewer.this.isPlaying && !ApplicationLoader.mainInterfacePaused) {
                if (PhotoViewer.this.menuItem != null && PhotoViewer.this.menuItem.isSubMenuShowing()) {
                    return;
                }
                if (PhotoViewer.this.menuItemSpeed != null && PhotoViewer.this.menuItemSpeed.isSubMenuShowing()) {
                    return;
                }
                if (PhotoViewer.this.captionScrollView != null && PhotoViewer.this.captionScrollView.getScrollY() != 0) {
                    return;
                }
                if ((PhotoViewer.this.miniProgressView == null || PhotoViewer.this.miniProgressView.getVisibility() != 0) && PhotoViewer.PipInstance != (photoViewer = PhotoViewer.this)) {
                    photoViewer.toggleActionBar(false, true);
                }
            }
        }
    };
    /* access modifiers changed from: private */
    public PlaceProviderObject hideAfterAnimation;
    /* access modifiers changed from: private */
    public UndoView hintView;
    private Rect hitRect = new Rect();
    private boolean ignoreDidSetImage;
    /* access modifiers changed from: private */
    public AnimatorSet imageMoveAnimation;
    /* access modifiers changed from: private */
    public ArrayList<MessageObject> imagesArr = new ArrayList<>();
    /* access modifiers changed from: private */
    public ArrayList<Object> imagesArrLocals = new ArrayList<>();
    /* access modifiers changed from: private */
    public ArrayList<ImageLocation> imagesArrLocations = new ArrayList<>();
    /* access modifiers changed from: private */
    public ArrayList<Integer> imagesArrLocationsSizes = new ArrayList<>();
    /* access modifiers changed from: private */
    public ArrayList<ImageLocation> imagesArrLocationsVideo = new ArrayList<>();
    /* access modifiers changed from: private */
    public ArrayList<TLRPC.Message> imagesArrMessages = new ArrayList<>();
    private ArrayList<MessageObject> imagesArrTemp = new ArrayList<>();
    private SparseArray<MessageObject>[] imagesByIds = {new SparseArray<>(), new SparseArray<>()};
    private SparseArray<MessageObject>[] imagesByIdsTemp = {new SparseArray<>(), new SparseArray<>()};
    /* access modifiers changed from: private */
    public boolean inBubbleMode;
    /* access modifiers changed from: private */
    public boolean inPreview;
    private VideoPlayer injectingVideoPlayer;
    private SurfaceTexture injectingVideoPlayerSurface;
    private DecelerateInterpolator interpolator = new DecelerateInterpolator(1.5f);
    private boolean invalidCoords;
    /* access modifiers changed from: private */
    public boolean isActionBarVisible = true;
    /* access modifiers changed from: private */
    public boolean isCurrentVideo;
    private boolean isDocumentsPicker;
    /* access modifiers changed from: private */
    public boolean isEmbedVideo;
    /* access modifiers changed from: private */
    public boolean isEvent;
    private boolean isFirstLoading;
    /* access modifiers changed from: private */
    public boolean isInline;
    /* access modifiers changed from: private */
    public boolean isPhotosListViewVisible;
    /* access modifiers changed from: private */
    public boolean isPlaying;
    /* access modifiers changed from: private */
    public boolean isStreaming;
    /* access modifiers changed from: private */
    public boolean isVisible;
    /* access modifiers changed from: private */
    public LinearLayout itemsLayout;
    private boolean keepScreenOnFlagSet;
    boolean keyboardAnimationEnabled;
    /* access modifiers changed from: private */
    public int keyboardSize;
    /* access modifiers changed from: private */
    public long lastBufferedPositionCheck;
    private int lastImageId = -1;
    /* access modifiers changed from: private */
    public Object lastInsets;
    private long lastPhotoSetTime;
    /* access modifiers changed from: private */
    public long lastSaveTime;
    /* access modifiers changed from: private */
    public String lastTitle;
    private ImageReceiver leftImage = new ImageReceiver();
    private boolean loadInitialVideo;
    private boolean loadingMoreImages;
    Runnable longPressRunnable = new PhotoViewer$$ExternalSyntheticLambda42(this);
    float longPressX;
    /* access modifiers changed from: private */
    public boolean manuallyPaused;
    /* access modifiers changed from: private */
    public StickersAlert masksAlert;
    private ActionBarMenuItem masksItem;
    private int maxSelectedPhotos = -1;
    private float maxX;
    private float maxY;
    /* access modifiers changed from: private */
    public LinearLayoutManager mentionLayoutManager;
    /* access modifiers changed from: private */
    public AnimatorSet mentionListAnimation;
    /* access modifiers changed from: private */
    public RecyclerListView mentionListView;
    /* access modifiers changed from: private */
    public MentionsAdapter mentionsAdapter;
    /* access modifiers changed from: private */
    public ActionBarMenuItem menuItem;
    /* access modifiers changed from: private */
    public ActionBarMenuItem menuItemSpeed;
    private long mergeDialogId;
    private float minX;
    private float minY;
    /* access modifiers changed from: private */
    public AnimatorSet miniProgressAnimator;
    private Runnable miniProgressShowRunnable = new PhotoViewer$$ExternalSyntheticLambda38(this);
    /* access modifiers changed from: private */
    public RadialProgressView miniProgressView;
    private ImageView mirrorItem;
    private float moveStartX;
    private float moveStartY;
    /* access modifiers changed from: private */
    public boolean moving;
    /* access modifiers changed from: private */
    public ImageView muteItem;
    /* access modifiers changed from: private */
    public boolean muteVideo;
    private String nameOverride;
    /* access modifiers changed from: private */
    public FadingTextViewLayout nameTextView;
    /* access modifiers changed from: private */
    public boolean needCaptionLayout;
    /* access modifiers changed from: private */
    public long needCaptureFrameReadyAtTime = -1;
    private boolean needSearchImageInArr;
    /* access modifiers changed from: private */
    public boolean needShowOnReady;
    private boolean openAnimationInProgress;
    /* access modifiers changed from: private */
    public boolean openedFullScreenVideo;
    private boolean opennedFromMedia;
    /* access modifiers changed from: private */
    public OrientationEventListener orientationEventListener;
    /* access modifiers changed from: private */
    public int originalBitrate;
    /* access modifiers changed from: private */
    public int originalHeight;
    private long originalSize;
    /* access modifiers changed from: private */
    public int originalWidth;
    /* access modifiers changed from: private */
    public boolean padImageForHorizontalInsets;
    /* access modifiers changed from: private */
    public PageBlocksAdapter pageBlocksAdapter;
    private ImageView paintButton;
    private ImageView paintItem;
    private int paintViewTouched;
    /* access modifiers changed from: private */
    public PaintingOverlay paintingOverlay;
    /* access modifiers changed from: private */
    public Activity parentActivity;
    /* access modifiers changed from: private */
    public ChatAttachAlert parentAlert;
    /* access modifiers changed from: private */
    public ChatActivity parentChatActivity;
    /* access modifiers changed from: private */
    public PhotoCropView photoCropView;
    /* access modifiers changed from: private */
    public PhotoFilterView photoFilterView;
    /* access modifiers changed from: private */
    public PhotoPaintView photoPaintView;
    /* access modifiers changed from: private */
    public PhotoProgressView[] photoProgressViews = new PhotoProgressView[3];
    /* access modifiers changed from: private */
    public PhotoViewerWebView photoViewerWebView;
    /* access modifiers changed from: private */
    public CounterView photosCounterView;
    /* access modifiers changed from: private */
    public FrameLayout pickerView;
    /* access modifiers changed from: private */
    public ImageView pickerViewSendButton;
    private Drawable pickerViewSendDrawable;
    private float pinchCenterX;
    private float pinchCenterY;
    private float pinchStartDistance;
    private float pinchStartScale = 1.0f;
    private float pinchStartX;
    private float pinchStartY;
    /* access modifiers changed from: private */
    public boolean pipAnimationInProgress;
    private boolean pipAvailable;
    /* access modifiers changed from: private */
    public ActionBarMenuItem pipItem;
    /* access modifiers changed from: private */
    public int[] pipPosition = new int[2];
    /* access modifiers changed from: private */
    public PipVideoView pipVideoView;
    /* access modifiers changed from: private */
    public PhotoViewerProvider placeProvider;
    private View playButtonAccessibilityOverlay;
    /* access modifiers changed from: private */
    public boolean playerAutoStarted;
    private boolean playerInjected;
    private boolean playerLooping;
    private boolean playerWasPlaying;
    /* access modifiers changed from: private */
    public boolean playerWasReady;
    private GradientDrawable[] pressedDrawable = new GradientDrawable[2];
    private float[] pressedDrawableAlpha = new float[2];
    /* access modifiers changed from: private */
    public int prevOrientation = -10;
    private int previewViewEnd;
    private int previousCompression;
    private boolean previousCropMirrored;
    private int previousCropOrientation;
    private float previousCropPh;
    private float previousCropPw;
    private float previousCropPx;
    private float previousCropPy;
    private float previousCropRotation;
    private float previousCropScale;
    private boolean previousHasTransform;
    /* access modifiers changed from: private */
    public RadialProgressView progressView;
    /* access modifiers changed from: private */
    public QualityChooseView qualityChooseView;
    /* access modifiers changed from: private */
    public AnimatorSet qualityChooseViewAnimation;
    /* access modifiers changed from: private */
    public PickerBottomLayoutViewer qualityPicker;
    private boolean requestingPreview;
    /* access modifiers changed from: private */
    public TextView resetButton;
    /* access modifiers changed from: private */
    public Theme.ResourcesProvider resourcesProvider;
    /* access modifiers changed from: private */
    public int resultHeight;
    /* access modifiers changed from: private */
    public int resultWidth;
    private ImageReceiver rightImage = new ImageReceiver();
    private ImageView rotateItem;
    /* access modifiers changed from: private */
    public int rotationValue;
    /* access modifiers changed from: private */
    public SavedState savedState = null;
    private ArrayMap<String, SavedVideoPosition> savedVideoPositions = new ArrayMap<>();
    /* access modifiers changed from: private */
    public float scale = 1.0f;
    private Scroller scroller;
    /* access modifiers changed from: private */
    public ArrayList<SecureDocument> secureDocuments = new ArrayList<>();
    /* access modifiers changed from: private */
    public float seekToProgressPending;
    private float seekToProgressPending2;
    /* access modifiers changed from: private */
    public int selectedCompression;
    /* access modifiers changed from: private */
    public ListAdapter selectedPhotosAdapter;
    /* access modifiers changed from: private */
    public SelectedPhotosListView selectedPhotosListView;
    private ActionBarMenuItem sendItem;
    /* access modifiers changed from: private */
    public int sendPhotoType;
    private ActionBarPopupWindow.ActionBarPopupWindowLayout sendPopupLayout;
    private ActionBarPopupWindow sendPopupWindow;
    private Runnable setLoadingRunnable = new Runnable() {
        public void run() {
            if (PhotoViewer.this.currentMessageObject != null) {
                FileLoader.getInstance(PhotoViewer.this.currentMessageObject.currentAccount).setLoadingVideo(PhotoViewer.this.currentMessageObject.getDocument(), true, false);
            }
        }
    };
    private ImageView shareButton;
    private ActionBarMenuItem shareItem;
    private int sharedMediaType;
    /* access modifiers changed from: private */
    public String shouldSavePositionForCurrentVideo;
    private String shouldSavePositionForCurrentVideoShortTerm;
    /* access modifiers changed from: private */
    public PlaceProviderObject showAfterAnimation;
    private ImageReceiver sideImage;
    private boolean skipFirstBufferingProgress;
    /* access modifiers changed from: private */
    public int slideshowMessageId;
    private View speedGap;
    private ActionBarMenuSubItem speedItem;
    /* access modifiers changed from: private */
    public ActionBarMenuSubItem[] speedItems = new ActionBarMenuSubItem[5];
    private int startOffset;
    private boolean startReached = false;
    /* access modifiers changed from: private */
    public long startTime;
    private long startedPlayTime;
    private boolean streamingAlertShown;
    /* access modifiers changed from: private */
    public TextureView.SurfaceTextureListener surfaceTextureListener = new TextureView.SurfaceTextureListener() {
        public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
        }

        public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width, int height) {
        }

        public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {
            if (PhotoViewer.this.videoTextureView == null || !PhotoViewer.this.changingTextureView) {
                return true;
            }
            if (PhotoViewer.this.switchingInlineMode) {
                int unused = PhotoViewer.this.waitingForFirstTextureUpload = 2;
            }
            PhotoViewer.this.videoTextureView.setSurfaceTexture(surface);
            PhotoViewer.this.videoTextureView.setVisibility(0);
            boolean unused2 = PhotoViewer.this.changingTextureView = false;
            PhotoViewer.this.containerView.invalidate();
            return false;
        }

        public void onSurfaceTextureUpdated(SurfaceTexture surface) {
            if (PhotoViewer.this.waitingForFirstTextureUpload == 1) {
                PhotoViewer.this.changedTextureView.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
                    public boolean onPreDraw() {
                        PhotoViewer.this.changedTextureView.getViewTreeObserver().removeOnPreDrawListener(this);
                        if (PhotoViewer.this.textureImageView != null) {
                            PhotoViewer.this.textureImageView.setVisibility(4);
                            PhotoViewer.this.textureImageView.setImageDrawable((Drawable) null);
                            if (PhotoViewer.this.currentBitmap != null) {
                                PhotoViewer.this.currentBitmap.recycle();
                                Bitmap unused = PhotoViewer.this.currentBitmap = null;
                            }
                        }
                        AndroidUtilities.runOnUIThread(new PhotoViewer$7$1$$ExternalSyntheticLambda0(this));
                        int unused2 = PhotoViewer.this.waitingForFirstTextureUpload = 0;
                        return true;
                    }

                    /* renamed from: lambda$onPreDraw$0$org-telegram-ui-PhotoViewer$7$1  reason: not valid java name */
                    public /* synthetic */ void m3635lambda$onPreDraw$0$orgtelegramuiPhotoViewer$7$1() {
                        if (PhotoViewer.this.isInline) {
                            PhotoViewer.this.dismissInternal();
                        }
                    }
                });
                PhotoViewer.this.changedTextureView.invalidate();
            }
        }
    };
    private int switchImageAfterAnimation;
    /* access modifiers changed from: private */
    public Runnable switchToInlineRunnable = new Runnable() {
        public void run() {
            boolean unused = PhotoViewer.this.switchingInlineMode = false;
            if (PhotoViewer.this.currentBitmap != null) {
                PhotoViewer.this.currentBitmap.recycle();
                Bitmap unused2 = PhotoViewer.this.currentBitmap = null;
            }
            boolean unused3 = PhotoViewer.this.changingTextureView = true;
            if (PhotoViewer.this.textureImageView != null) {
                try {
                    PhotoViewer photoViewer = PhotoViewer.this;
                    Bitmap unused4 = photoViewer.currentBitmap = Bitmaps.createBitmap(photoViewer.videoTextureView.getWidth(), PhotoViewer.this.videoTextureView.getHeight(), Bitmap.Config.ARGB_8888);
                    PhotoViewer.this.videoTextureView.getBitmap(PhotoViewer.this.currentBitmap);
                } catch (Throwable e) {
                    if (PhotoViewer.this.currentBitmap != null) {
                        PhotoViewer.this.currentBitmap.recycle();
                        Bitmap unused5 = PhotoViewer.this.currentBitmap = null;
                    }
                    FileLog.e(e);
                }
                if (PhotoViewer.this.currentBitmap != null) {
                    PhotoViewer.this.textureImageView.setVisibility(0);
                    PhotoViewer.this.textureImageView.setImageBitmap(PhotoViewer.this.currentBitmap);
                } else {
                    PhotoViewer.this.textureImageView.setImageDrawable((Drawable) null);
                }
            }
            boolean unused6 = PhotoViewer.this.isInline = true;
            PipVideoView unused7 = PhotoViewer.this.pipVideoView = new PipVideoView(false);
            PhotoViewer photoViewer2 = PhotoViewer.this;
            PipVideoView access$3700 = photoViewer2.pipVideoView;
            Activity access$1900 = PhotoViewer.this.parentActivity;
            PhotoViewer photoViewer3 = PhotoViewer.this;
            TextureView unused8 = photoViewer2.changedTextureView = access$3700.show(access$1900, photoViewer3, photoViewer3.aspectRatioFrameLayout.getAspectRatio(), PhotoViewer.this.aspectRatioFrameLayout.getVideoRotation());
            PhotoViewer.this.changedTextureView.setVisibility(4);
            PhotoViewer.this.aspectRatioFrameLayout.removeView(PhotoViewer.this.videoTextureView);
        }
    };
    /* access modifiers changed from: private */
    public boolean switchingInlineMode;
    private int switchingToIndex;
    /* access modifiers changed from: private */
    public int switchingToMode = -1;
    /* access modifiers changed from: private */
    public ImageView textureImageView;
    /* access modifiers changed from: private */
    public boolean textureUploaded;
    private ImageView timeItem;
    private Tooltip tooltip;
    private int totalImagesCount;
    private int totalImagesCountMerge;
    long totalRewinding;
    private int touchSlop;
    /* access modifiers changed from: private */
    public long transitionAnimationStartTime;
    /* access modifiers changed from: private */
    public int transitionIndex;
    /* access modifiers changed from: private */
    public float translationX;
    /* access modifiers changed from: private */
    public float translationY;
    private boolean tryStartRequestPreviewOnFinish;
    private ImageView tuneItem;
    private final Runnable updateContainerFlagsRunnable = new PhotoViewer$$ExternalSyntheticLambda39(this);
    /* access modifiers changed from: private */
    public Runnable updateProgressRunnable = new Runnable() {
        public void run() {
            float bufferedProgress;
            if (PhotoViewer.this.videoPlayer != null) {
                if (!PhotoViewer.this.isCurrentVideo) {
                    float progress = ((float) PhotoViewer.this.videoPlayer.getCurrentPosition()) / ((float) PhotoViewer.this.videoPlayer.getDuration());
                    if (PhotoViewer.this.currentVideoFinishedLoading) {
                        bufferedProgress = 1.0f;
                    } else {
                        long newTime = SystemClock.elapsedRealtime();
                        if (Math.abs(newTime - PhotoViewer.this.lastBufferedPositionCheck) >= 500) {
                            if (PhotoViewer.this.isStreaming) {
                                bufferedProgress = FileLoader.getInstance(PhotoViewer.this.currentAccount).getBufferedProgressFromPosition(PhotoViewer.this.seekToProgressPending != 0.0f ? PhotoViewer.this.seekToProgressPending : progress, PhotoViewer.this.currentFileNames[0]);
                            } else {
                                bufferedProgress = 1.0f;
                            }
                            long unused = PhotoViewer.this.lastBufferedPositionCheck = newTime;
                        } else {
                            bufferedProgress = -1.0f;
                        }
                    }
                    if (PhotoViewer.this.inPreview || PhotoViewer.this.videoTimelineView.getVisibility() != 0) {
                        if (PhotoViewer.this.seekToProgressPending == 0.0f && (PhotoViewer.this.videoPlayerRewinder.rewindCount == 0 || !PhotoViewer.this.videoPlayerRewinder.rewindByBackSeek)) {
                            PhotoViewer.this.videoPlayerSeekbar.setProgress(progress, false);
                        }
                        if (bufferedProgress != -1.0f) {
                            PhotoViewer.this.videoPlayerSeekbar.setBufferedProgress(bufferedProgress);
                            if (PhotoViewer.this.pipVideoView != null) {
                                PhotoViewer.this.pipVideoView.setBufferedProgress(bufferedProgress);
                            }
                        }
                    } else if (progress >= PhotoViewer.this.videoTimelineView.getRightProgress()) {
                        boolean unused2 = PhotoViewer.this.manuallyPaused = false;
                        PhotoViewer.this.videoPlayer.pause();
                        PhotoViewer.this.videoPlayerSeekbar.setProgress(0.0f);
                        PhotoViewer.this.videoPlayer.seekTo((long) ((int) (PhotoViewer.this.videoTimelineView.getLeftProgress() * ((float) PhotoViewer.this.videoPlayer.getDuration()))));
                        PhotoViewer.this.containerView.invalidate();
                    } else {
                        float progress2 = progress - PhotoViewer.this.videoTimelineView.getLeftProgress();
                        if (progress2 < 0.0f) {
                            progress2 = 0.0f;
                        }
                        progress = progress2 / (PhotoViewer.this.videoTimelineView.getRightProgress() - PhotoViewer.this.videoTimelineView.getLeftProgress());
                        if (progress > 1.0f) {
                            progress = 1.0f;
                        }
                        PhotoViewer.this.videoPlayerSeekbar.setProgress(progress);
                    }
                    PhotoViewer.this.videoPlayerSeekbarView.invalidate();
                    if (PhotoViewer.this.shouldSavePositionForCurrentVideo != null) {
                        float value = progress;
                        if (value >= 0.0f && SystemClock.elapsedRealtime() - PhotoViewer.this.lastSaveTime >= 1000) {
                            String access$3800 = PhotoViewer.this.shouldSavePositionForCurrentVideo;
                            long unused3 = PhotoViewer.this.lastSaveTime = SystemClock.elapsedRealtime();
                            Utilities.globalQueue.postRunnable(new PhotoViewer$5$$ExternalSyntheticLambda0(this, value));
                        }
                    }
                    PhotoViewer.this.updateVideoPlayerTime();
                } else if (!PhotoViewer.this.videoTimelineView.isDragging()) {
                    float progress3 = ((float) PhotoViewer.this.videoPlayer.getCurrentPosition()) / ((float) PhotoViewer.this.videoPlayer.getDuration());
                    if (PhotoViewer.this.inPreview || (PhotoViewer.this.currentEditMode == 0 && PhotoViewer.this.videoTimelineView.getVisibility() != 0)) {
                        if (PhotoViewer.this.sendPhotoType != 1) {
                            PhotoViewer.this.videoTimelineView.setProgress(progress3);
                        }
                    } else if (progress3 >= PhotoViewer.this.videoTimelineView.getRightProgress()) {
                        PhotoViewer.this.videoTimelineView.setProgress(PhotoViewer.this.videoTimelineView.getLeftProgress());
                        PhotoViewer.this.videoPlayer.seekTo((long) ((int) (PhotoViewer.this.videoTimelineView.getLeftProgress() * ((float) PhotoViewer.this.videoPlayer.getDuration()))));
                        boolean unused4 = PhotoViewer.this.manuallyPaused = false;
                        PhotoViewer.this.cancelVideoPlayRunnable();
                        if (PhotoViewer.this.muteVideo || PhotoViewer.this.sendPhotoType == 1 || PhotoViewer.this.currentEditMode != 0 || PhotoViewer.this.switchingToMode > 0) {
                            PhotoViewer.this.videoPlayer.play();
                        } else {
                            PhotoViewer.this.videoPlayer.pause();
                        }
                        PhotoViewer.this.containerView.invalidate();
                    } else {
                        PhotoViewer.this.videoTimelineView.setProgress(progress3);
                    }
                    PhotoViewer.this.updateVideoPlayerTime();
                }
            }
            if (PhotoViewer.this.isPlaying) {
                AndroidUtilities.runOnUIThread(PhotoViewer.this.updateProgressRunnable, 17);
            }
        }

        /* renamed from: lambda$run$0$org-telegram-ui-PhotoViewer$5  reason: not valid java name */
        public /* synthetic */ void m3626lambda$run$0$orgtelegramuiPhotoViewer$5(float value) {
            ApplicationLoader.applicationContext.getSharedPreferences("media_saved_pos", 0).edit().putFloat(PhotoViewer.this.shouldSavePositionForCurrentVideo, value).commit();
        }
    };
    /* access modifiers changed from: private */
    public boolean useSmoothKeyboard;
    private VelocityTracker velocityTracker;
    /* access modifiers changed from: private */
    public TextView videoAvatarTooltip;
    /* access modifiers changed from: private */
    public boolean videoConvertSupported;
    private float videoCrossfadeAlpha;
    private long videoCrossfadeAlphaLastTime;
    private boolean videoCrossfadeStarted;
    private float videoCutEnd;
    private float videoCutStart;
    /* access modifiers changed from: private */
    public float videoDuration;
    /* access modifiers changed from: private */
    public VideoForwardDrawable videoForwardDrawable;
    /* access modifiers changed from: private */
    public int videoFramerate;
    /* access modifiers changed from: private */
    public long videoFramesSize;
    /* access modifiers changed from: private */
    public Runnable videoPlayRunnable;
    /* access modifiers changed from: private */
    public VideoPlayer videoPlayer;
    private Animator videoPlayerControlAnimator;
    /* access modifiers changed from: private */
    public VideoPlayerControlFrameLayout videoPlayerControlFrameLayout;
    /* access modifiers changed from: private */
    public boolean videoPlayerControlVisible = true;
    /* access modifiers changed from: private */
    public int[] videoPlayerCurrentTime = new int[2];
    VideoPlayerRewinder videoPlayerRewinder = new VideoPlayerRewinder() {
        /* access modifiers changed from: protected */
        public void onRewindCanceled() {
            boolean unused = PhotoViewer.this.onTouchEvent(MotionEvent.obtain(0, 0, 3, 0.0f, 0.0f, 0));
            PhotoViewer.this.videoForwardDrawable.setShowing(false);
        }

        /* access modifiers changed from: protected */
        public void updateRewindProgressUi(long timeDiff, float progress, boolean rewindByBackSeek) {
            PhotoViewer.this.videoForwardDrawable.setTime(Math.abs(timeDiff));
            if (rewindByBackSeek) {
                PhotoViewer.this.videoPlayerSeekbar.setProgress(progress);
                PhotoViewer.this.videoPlayerSeekbarView.invalidate();
            }
        }

        /* access modifiers changed from: protected */
        public void onRewindStart(boolean rewindForward) {
            PhotoViewer.this.videoForwardDrawable.setOneShootAnimation(false);
            PhotoViewer.this.videoForwardDrawable.setLeftSide(!rewindForward);
            PhotoViewer.this.videoForwardDrawable.setShowing(true);
            PhotoViewer.this.containerView.invalidate();
        }
    };
    /* access modifiers changed from: private */
    public VideoPlayerSeekBar videoPlayerSeekbar;
    /* access modifiers changed from: private */
    public View videoPlayerSeekbarView;
    /* access modifiers changed from: private */
    public SimpleTextView videoPlayerTime;
    /* access modifiers changed from: private */
    public int[] videoPlayerTotalTime = new int[2];
    /* access modifiers changed from: private */
    public VideoSeekPreviewImage videoPreviewFrame;
    /* access modifiers changed from: private */
    public AnimatorSet videoPreviewFrameAnimation;
    private MessageObject videoPreviewMessageObject;
    /* access modifiers changed from: private */
    public boolean videoSizeSet;
    /* access modifiers changed from: private */
    public TextureView videoTextureView;
    private ObjectAnimator videoTimelineAnimator;
    /* access modifiers changed from: private */
    public VideoTimelinePlayView videoTimelineView;
    private AlertDialog visibleDialog;
    private int waitingForDraw;
    /* access modifiers changed from: private */
    public int waitingForFirstTextureUpload;
    /* access modifiers changed from: private */
    public boolean wasLayout;
    /* access modifiers changed from: private */
    public boolean wasRotated;
    /* access modifiers changed from: private */
    public WindowManager.LayoutParams windowLayoutParams;
    /* access modifiers changed from: private */
    public FrameLayout windowView;
    /* access modifiers changed from: private */
    public boolean zoomAnimation;
    private boolean zooming;

    public interface PageBlocksAdapter {
        TLRPC.PageBlock get(int i);

        List<TLRPC.PageBlock> getAll();

        CharSequence getCaption(int i);

        File getFile(int i);

        TLRPC.PhotoSize getFileLocation(TLObject tLObject, int[] iArr);

        String getFileName(int i);

        int getItemsCount();

        TLObject getMedia(int i);

        Object getParentObject();

        boolean isVideo(int i);

        void updateSlideshowCell(TLRPC.PageBlock pageBlock);
    }

    public interface PhotoViewerProvider {
        boolean allowCaption();

        boolean allowSendingSubmenu();

        boolean canCaptureMorePhotos();

        boolean canReplace(int i);

        boolean canScrollAway();

        boolean cancelButtonPressed();

        boolean closeKeyboard();

        void deleteImageAtIndex(int i);

        String getDeleteMessageString();

        MessageObject getEditingMessageObject();

        int getPhotoIndex(int i);

        PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int i, boolean z);

        int getSelectedCount();

        HashMap<Object, Object> getSelectedPhotos();

        ArrayList<Object> getSelectedPhotosOrder();

        CharSequence getSubtitleFor(int i);

        ImageReceiver.BitmapHolder getThumbForPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int i);

        CharSequence getTitleFor(int i);

        int getTotalImageCount();

        boolean isPhotoChecked(int i);

        boolean loadMore();

        void needAddMorePhotos();

        void onCaptionChanged(CharSequence charSequence);

        void openPhotoForEdit(String str, String str2, boolean z);

        void replaceButtonPressed(int i, VideoEditedInfo videoEditedInfo);

        boolean scaleToFill();

        void sendButtonPressed(int i, VideoEditedInfo videoEditedInfo, boolean z, int i2, boolean z2);

        int setPhotoChecked(int i, VideoEditedInfo videoEditedInfo);

        int setPhotoUnchecked(Object obj);

        void updatePhotoAtIndex(int i);

        boolean validateGroupId(long j);

        void willHidePhotoViewer();

        void willSwitchFromPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int i);
    }

    public static class PlaceProviderObject {
        public boolean allowTakeAnimation = true;
        public ClippingImageView animatingImageView;
        public int animatingImageViewYOffset;
        public boolean canEdit;
        public int clipBottomAddition;
        public int clipTopAddition;
        public long dialogId;
        public ImageReceiver imageReceiver;
        public int index;
        public boolean isEvent;
        public View parentView;
        public int[] radius;
        public float scale = 1.0f;
        public int size;
        public int starOffset;
        public ImageReceiver.BitmapHolder thumb;
        public int viewX;
        public int viewY;
        public int viewY2;
    }

    /* renamed from: lambda$new$0$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3568lambda$new$0$orgtelegramuiPhotoViewer() {
        toggleMiniProgressInternal(true);
    }

    public void addPhoto(MessageObject message, int classGuid2) {
        if (classGuid2 == this.classGuid) {
            if (this.imagesByIds[0].indexOfKey(message.getId()) < 0) {
                if (this.opennedFromMedia) {
                    this.imagesArr.add(message);
                } else {
                    this.imagesArr.add(0, message);
                }
                this.imagesByIds[0].put(message.getId(), message);
            }
            this.endReached[0] = this.imagesArr.size() == this.totalImagesCount;
            setImages();
        }
    }

    public int getClassGuid() {
        return this.classGuid;
    }

    public void setCaption(CharSequence caption) {
        this.hasCaptionForAllMedia = !TextUtils.isEmpty(caption);
        this.captionForAllMedia = caption;
    }

    private static class SavedVideoPosition {
        public final float position;
        public final long timestamp;

        public SavedVideoPosition(float position2, long timestamp2) {
            this.position = position2;
            this.timestamp = timestamp2;
        }
    }

    private class CaptionLinkMovementMethod extends LinkMovementMethod {
        Runnable longPressRunnable;
        ClickableSpan selectedLink;
        TextView selectedWidget;

        private CaptionLinkMovementMethod() {
            this.longPressRunnable = new Runnable() {
                public void run() {
                    if (CaptionLinkMovementMethod.this.selectedWidget != null && (CaptionLinkMovementMethod.this.selectedLink instanceof URLSpan)) {
                        CaptionLinkMovementMethod captionLinkMovementMethod = CaptionLinkMovementMethod.this;
                        captionLinkMovementMethod.onLongClick((URLSpan) captionLinkMovementMethod.selectedLink);
                        CaptionLinkMovementMethod.this.selectedLink = null;
                    }
                }
            };
        }

        /* JADX WARNING: Removed duplicated region for block: B:29:0x00b0 A[RETURN, SYNTHETIC] */
        /* JADX WARNING: Removed duplicated region for block: B:30:0x00b2 A[ORIG_RETURN, RETURN, SYNTHETIC] */
        /* Code decompiled incorrectly, please refer to instructions dump. */
        public boolean onTouchEvent(android.widget.TextView r18, android.text.Spannable r19, android.view.MotionEvent r20) {
            /*
                r17 = this;
                r1 = r17
                r2 = r18
                r3 = r19
                r4 = 0
                org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x00b4 }
                java.util.ArrayList r0 = r0.imagesArrLocals     // Catch:{ Exception -> 0x00b4 }
                boolean r0 = r0.isEmpty()     // Catch:{ Exception -> 0x00b4 }
                if (r0 != 0) goto L_0x0014
                return r4
            L_0x0014:
                int r0 = r20.getAction()     // Catch:{ Exception -> 0x00b4 }
                r5 = 0
                r6 = 3
                r7 = 0
                if (r0 != r6) goto L_0x0024
                java.lang.Runnable r6 = r1.longPressRunnable     // Catch:{ Exception -> 0x00b4 }
                org.telegram.messenger.AndroidUtilities.cancelRunOnUIThread(r6)     // Catch:{ Exception -> 0x00b4 }
                r1.selectedLink = r7     // Catch:{ Exception -> 0x00b4 }
            L_0x0024:
                r6 = 1
                if (r0 == r6) goto L_0x002e
                if (r0 != 0) goto L_0x002a
                goto L_0x002e
            L_0x002a:
                r16 = r5
                goto L_0x00a5
            L_0x002e:
                float r8 = r20.getX()     // Catch:{ Exception -> 0x00b4 }
                int r8 = (int) r8     // Catch:{ Exception -> 0x00b4 }
                float r9 = r20.getY()     // Catch:{ Exception -> 0x00b4 }
                int r9 = (int) r9     // Catch:{ Exception -> 0x00b4 }
                int r10 = r18.getTotalPaddingLeft()     // Catch:{ Exception -> 0x00b4 }
                int r8 = r8 - r10
                int r10 = r18.getTotalPaddingTop()     // Catch:{ Exception -> 0x00b4 }
                int r9 = r9 - r10
                int r10 = r18.getScrollX()     // Catch:{ Exception -> 0x00b4 }
                int r8 = r8 + r10
                int r10 = r18.getScrollY()     // Catch:{ Exception -> 0x00b4 }
                int r9 = r9 + r10
                android.text.Layout r10 = r18.getLayout()     // Catch:{ Exception -> 0x00b4 }
                int r11 = r10.getLineForVertical(r9)     // Catch:{ Exception -> 0x00b4 }
                float r12 = (float) r8     // Catch:{ Exception -> 0x00b4 }
                int r12 = r10.getOffsetForHorizontal(r11, r12)     // Catch:{ Exception -> 0x00b4 }
                java.lang.Class<android.text.style.ClickableSpan> r13 = android.text.style.ClickableSpan.class
                java.lang.Object[] r13 = r3.getSpans(r12, r12, r13)     // Catch:{ Exception -> 0x00b4 }
                android.text.style.ClickableSpan[] r13 = (android.text.style.ClickableSpan[]) r13     // Catch:{ Exception -> 0x00b4 }
                int r14 = r13.length     // Catch:{ Exception -> 0x00b4 }
                if (r14 == 0) goto L_0x0099
                r14 = r13[r4]     // Catch:{ Exception -> 0x00b4 }
                if (r0 != r6) goto L_0x007c
                android.text.style.ClickableSpan r15 = r1.selectedLink     // Catch:{ Exception -> 0x00b4 }
                if (r15 == r14) goto L_0x006f
                r1.selectedLink = r7     // Catch:{ Exception -> 0x00b4 }
                return r4
            L_0x006f:
                r1.onClick(r14, r2)     // Catch:{ Exception -> 0x00b4 }
                java.lang.Runnable r15 = r1.longPressRunnable     // Catch:{ Exception -> 0x00b4 }
                org.telegram.messenger.AndroidUtilities.cancelRunOnUIThread(r15)     // Catch:{ Exception -> 0x00b4 }
                r1.selectedLink = r7     // Catch:{ Exception -> 0x00b4 }
                r16 = r5
                goto L_0x0097
            L_0x007c:
                int r7 = r3.getSpanStart(r14)     // Catch:{ Exception -> 0x00b4 }
                int r15 = r3.getSpanEnd(r14)     // Catch:{ Exception -> 0x00b4 }
                android.text.Selection.setSelection(r3, r7, r15)     // Catch:{ Exception -> 0x00b4 }
                java.lang.Runnable r7 = r1.longPressRunnable     // Catch:{ Exception -> 0x00b4 }
                int r15 = android.view.ViewConfiguration.getLongPressTimeout()     // Catch:{ Exception -> 0x00b4 }
                r16 = r5
                long r4 = (long) r15     // Catch:{ Exception -> 0x00b4 }
                org.telegram.messenger.AndroidUtilities.runOnUIThread(r7, r4)     // Catch:{ Exception -> 0x00b4 }
                r1.selectedLink = r14     // Catch:{ Exception -> 0x00b4 }
                r1.selectedWidget = r2     // Catch:{ Exception -> 0x00b4 }
            L_0x0097:
                r5 = 1
                goto L_0x00a7
            L_0x0099:
                r16 = r5
                android.text.Selection.removeSelection(r19)     // Catch:{ Exception -> 0x00b4 }
                java.lang.Runnable r4 = r1.longPressRunnable     // Catch:{ Exception -> 0x00b4 }
                org.telegram.messenger.AndroidUtilities.cancelRunOnUIThread(r4)     // Catch:{ Exception -> 0x00b4 }
                r1.selectedLink = r7     // Catch:{ Exception -> 0x00b4 }
            L_0x00a5:
                r5 = r16
            L_0x00a7:
                if (r5 != 0) goto L_0x00b2
                boolean r4 = android.text.method.Touch.onTouchEvent(r18, r19, r20)     // Catch:{ Exception -> 0x00b4 }
                if (r4 == 0) goto L_0x00b0
                goto L_0x00b2
            L_0x00b0:
                r4 = 0
                goto L_0x00b3
            L_0x00b2:
                r4 = 1
            L_0x00b3:
                return r4
            L_0x00b4:
                r0 = move-exception
                org.telegram.messenger.FileLog.e((java.lang.Throwable) r0)
                r4 = 0
                return r4
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.CaptionLinkMovementMethod.onTouchEvent(android.widget.TextView, android.text.Spannable, android.view.MotionEvent):boolean");
        }

        private void onClick(ClickableSpan link, TextView widget) {
            if (widget == null || !(link instanceof URLSpan)) {
                link.onClick(widget);
                return;
            }
            String url = ((URLSpan) link).getURL();
            if (url.startsWith("video")) {
                if (PhotoViewer.this.videoPlayer != null && PhotoViewer.this.currentMessageObject != null) {
                    int seconds = Utilities.parseInt(url).intValue();
                    if (PhotoViewer.this.videoPlayer.getDuration() == -9223372036854775807L) {
                        PhotoViewer photoViewer = PhotoViewer.this;
                        float unused = photoViewer.seekToProgressPending = ((float) seconds) / ((float) photoViewer.currentMessageObject.getDuration());
                        return;
                    }
                    PhotoViewer.this.videoPlayer.seekTo(((long) seconds) * 1000);
                    PhotoViewer.this.videoPlayerSeekbar.setProgress(((float) (((long) seconds) * 1000)) / ((float) PhotoViewer.this.videoPlayer.getDuration()), true);
                    PhotoViewer.this.videoPlayerSeekbarView.invalidate();
                }
            } else if (url.startsWith("#")) {
                if (PhotoViewer.this.parentActivity instanceof LaunchActivity) {
                    DialogsActivity fragment = new DialogsActivity((Bundle) null);
                    fragment.setSearchString(url);
                    ((LaunchActivity) PhotoViewer.this.parentActivity).presentFragment(fragment, false, true);
                    PhotoViewer.this.closePhoto(false, false);
                }
            } else if (PhotoViewer.this.parentChatActivity == null || (!(link instanceof URLSpanReplacement) && !AndroidUtilities.shouldShowUrlInAlert(url))) {
                link.onClick(widget);
            } else {
                AlertsCreator.showOpenUrlAlert(PhotoViewer.this.parentChatActivity, url, true, true);
            }
        }

        /* access modifiers changed from: private */
        public void onLongClick(URLSpan link) {
            int timestamp = -1;
            BottomSheet.Builder builder = new BottomSheet.Builder(PhotoViewer.this.parentActivity, false, PhotoViewer.this.resourcesProvider);
            if (link.getURL().startsWith("video?")) {
                try {
                    timestamp = Integer.parseInt(link.getURL().substring(link.getURL().indexOf(63) + 1));
                } catch (Throwable th) {
                }
            }
            if (timestamp >= 0) {
                builder.setTitle(AndroidUtilities.formatDuration(timestamp, false));
            } else {
                builder.setTitle(link.getURL());
            }
            builder.setItems(new CharSequence[]{LocaleController.getString("Open", NUM), LocaleController.getString("Copy", NUM)}, new PhotoViewer$CaptionLinkMovementMethod$$ExternalSyntheticLambda0(this, link, timestamp));
            BottomSheet bottomSheet = builder.create();
            bottomSheet.show();
            bottomSheet.setItemColor(0, -1, -1);
            bottomSheet.setItemColor(1, -1, -1);
            bottomSheet.setBackgroundColor(-14933463);
            bottomSheet.setTitleColor(-7697782);
        }

        /* renamed from: lambda$onLongClick$0$org-telegram-ui-PhotoViewer$CaptionLinkMovementMethod  reason: not valid java name */
        public /* synthetic */ void m3638xfe258192(URLSpan link, int finalTimestamp, DialogInterface dialog, int which) {
            String bulletinMessage;
            int i = finalTimestamp;
            int i2 = which;
            if (i2 == 0) {
                onClick(link, this.selectedWidget);
                return;
            }
            URLSpan uRLSpan = link;
            boolean isMedia = true;
            if (i2 == 1) {
                String url1 = link.getURL();
                boolean tel = false;
                if (url1.startsWith("mailto:")) {
                    url1 = url1.substring(7);
                } else if (url1.startsWith("tel:")) {
                    url1 = url1.substring(4);
                    tel = true;
                } else if (i >= 0 && PhotoViewer.this.currentMessageObject != null && !PhotoViewer.this.currentMessageObject.scheduled) {
                    MessageObject messageObject1 = PhotoViewer.this.currentMessageObject;
                    if (!PhotoViewer.this.currentMessageObject.isVideo() && !PhotoViewer.this.currentMessageObject.isRoundVideo() && !PhotoViewer.this.currentMessageObject.isVoice() && !PhotoViewer.this.currentMessageObject.isMusic()) {
                        isMedia = false;
                    }
                    if (!isMedia && PhotoViewer.this.currentMessageObject.replyMessageObject != null) {
                        messageObject1 = PhotoViewer.this.currentMessageObject.replyMessageObject;
                    }
                    long dialogId = messageObject1.getDialogId();
                    int messageId = messageObject1.getId();
                    if (messageObject1.messageOwner.fwd_from != null) {
                        if (messageObject1.messageOwner.fwd_from.saved_from_peer != null) {
                            dialogId = MessageObject.getPeerId(messageObject1.messageOwner.fwd_from.saved_from_peer);
                            messageId = messageObject1.messageOwner.fwd_from.saved_from_msg_id;
                        } else if (messageObject1.messageOwner.fwd_from.from_id != null) {
                            dialogId = MessageObject.getPeerId(messageObject1.messageOwner.fwd_from.from_id);
                            messageId = messageObject1.messageOwner.fwd_from.channel_post;
                        }
                    }
                    if (DialogObject.isChatDialog(dialogId)) {
                        boolean z = isMedia;
                        TLRPC.Chat currentChat = MessagesController.getInstance(PhotoViewer.this.currentAccount).getChat(Long.valueOf(-dialogId));
                        if (!(currentChat == null || currentChat.username == null)) {
                            url1 = "https://t.me/" + currentChat.username + "/" + messageId + "?t=" + i;
                        }
                    } else {
                        TLRPC.User user = MessagesController.getInstance(PhotoViewer.this.currentAccount).getUser(Long.valueOf(dialogId));
                        if (!(user == null || user.username == null)) {
                            url1 = "https://t.me/" + user.username + "/" + messageId + "?t=" + i;
                        }
                    }
                }
                AndroidUtilities.addToClipboard(url1);
                if (tel) {
                    bulletinMessage = LocaleController.getString("PhoneCopied", NUM);
                } else if (url1.startsWith("#")) {
                    bulletinMessage = LocaleController.getString("HashtagCopied", NUM);
                } else if (url1.startsWith("@")) {
                    bulletinMessage = LocaleController.getString("UsernameCopied", NUM);
                } else {
                    bulletinMessage = LocaleController.getString("LinkCopied", NUM);
                }
                BulletinFactory.of(PhotoViewer.this.containerView, PhotoViewer.this.resourcesProvider).createSimpleBulletin(NUM, bulletinMessage).show();
            }
        }
    }

    /* access modifiers changed from: private */
    public void cancelFlashAnimations() {
        View view = this.flashView;
        if (view != null) {
            view.animate().setListener((Animator.AnimatorListener) null).cancel();
            this.flashView.setAlpha(0.0f);
        }
        AnimatorSet animatorSet = this.flashAnimator;
        if (animatorSet != null) {
            animatorSet.cancel();
            this.flashAnimator = null;
        }
        PhotoCropView photoCropView2 = this.photoCropView;
        if (photoCropView2 != null) {
            photoCropView2.cancelThumbAnimation();
        }
    }

    /* access modifiers changed from: private */
    public void cancelVideoPlayRunnable() {
        Runnable runnable = this.videoPlayRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
            this.videoPlayRunnable = null;
        }
    }

    /* renamed from: lambda$new$1$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3569lambda$new$1$orgtelegramuiPhotoViewer() {
        if (this.isVisible && this.animationInProgress == 0) {
            updateContainerFlags(this.isActionBarVisible);
        }
    }

    private static class EditState {
        public long averageDuration;
        public MediaController.CropState cropState;
        public ArrayList<VideoEditedInfo.MediaEntity> croppedMediaEntities;
        public String croppedPaintPath;
        public ArrayList<VideoEditedInfo.MediaEntity> mediaEntities;
        public String paintPath;
        public MediaController.SavedFilterState savedFilterState;

        private EditState() {
        }

        public void reset() {
            this.paintPath = null;
            this.cropState = null;
            this.savedFilterState = null;
            this.mediaEntities = null;
            this.croppedPaintPath = null;
            this.croppedMediaEntities = null;
            this.averageDuration = 0;
        }
    }

    private class SavedState {
        private int index;
        private ArrayList<MessageObject> messages;
        private PhotoViewerProvider provider;

        public SavedState(int index2, ArrayList<MessageObject> messages2, PhotoViewerProvider provider2) {
            this.messages = messages2;
            this.index = index2;
            this.provider = provider2;
        }

        public void restore() {
            PhotoViewerProvider unused = PhotoViewer.this.placeProvider = this.provider;
            if (Build.VERSION.SDK_INT >= 21) {
                PhotoViewer.this.windowLayoutParams.flags = -NUM;
            } else {
                PhotoViewer.this.windowLayoutParams.flags = 131072;
            }
            PhotoViewer.this.windowLayoutParams.softInputMode = (PhotoViewer.this.useSmoothKeyboard ? 32 : 16) | 256;
            PhotoViewer.this.windowView.setFocusable(false);
            PhotoViewer.this.containerView.setFocusable(false);
            PhotoViewer.this.backgroundDrawable.setAlpha(255);
            PhotoViewer.this.containerView.setAlpha(1.0f);
            PhotoViewer photoViewer = PhotoViewer.this;
            ArrayList<MessageObject> arrayList = this.messages;
            int i = this.index;
            photoViewer.onPhotoShow((MessageObject) null, (TLRPC.FileLocation) null, (ImageLocation) null, (ImageLocation) null, arrayList, (ArrayList<SecureDocument>) null, (List<Object>) null, i, this.provider.getPlaceForPhoto(arrayList.get(i), (TLRPC.FileLocation) null, this.index, true));
        }
    }

    private class BackgroundDrawable extends ColorDrawable {
        private boolean allowDrawContent;
        /* access modifiers changed from: private */
        public Runnable drawRunnable;
        private final Paint paint;
        private final RectF rect = new RectF();
        private final RectF visibleRect = new RectF();

        public BackgroundDrawable(int color) {
            super(color);
            Paint paint2 = new Paint(1);
            this.paint = paint2;
            paint2.setColor(color);
        }

        public void setAlpha(int alpha) {
            if (PhotoViewer.this.parentActivity instanceof LaunchActivity) {
                this.allowDrawContent = !PhotoViewer.this.isVisible || alpha != 255;
                ((LaunchActivity) PhotoViewer.this.parentActivity).drawerLayoutContainer.setAllowDrawContent(this.allowDrawContent);
                if (PhotoViewer.this.parentAlert != null) {
                    if (!this.allowDrawContent) {
                        AndroidUtilities.runOnUIThread(new PhotoViewer$BackgroundDrawable$$ExternalSyntheticLambda0(this), 50);
                    } else {
                        PhotoViewer.this.parentAlert.setAllowDrawContent(true);
                    }
                }
            }
            super.setAlpha(alpha);
            this.paint.setAlpha(alpha);
        }

        /* renamed from: lambda$setAlpha$0$org-telegram-ui-PhotoViewer$BackgroundDrawable  reason: not valid java name */
        public /* synthetic */ void m3637lambda$setAlpha$0$orgtelegramuiPhotoViewer$BackgroundDrawable() {
            if (PhotoViewer.this.parentAlert != null) {
                PhotoViewer.this.parentAlert.setAllowDrawContent(this.allowDrawContent);
            }
        }

        public void draw(Canvas canvas) {
            Runnable runnable;
            if (PhotoViewer.this.animationInProgress == 0 || AndroidUtilities.isTablet() || PhotoViewer.this.currentPlaceObject == null || PhotoViewer.this.currentPlaceObject.animatingImageView == null) {
                super.draw(canvas);
            } else {
                PhotoViewer.this.animatingImageView.getClippedVisibleRect(this.visibleRect);
                if (!this.visibleRect.isEmpty()) {
                    this.visibleRect.inset((float) AndroidUtilities.dp(1.0f), (float) AndroidUtilities.dp(1.0f));
                    Rect boundsRect = getBounds();
                    float width = (float) boundsRect.right;
                    float height = (float) boundsRect.bottom;
                    for (int i = 0; i < 4; i++) {
                        switch (i) {
                            case 0:
                                this.rect.set(0.0f, this.visibleRect.top, this.visibleRect.left, this.visibleRect.bottom);
                                break;
                            case 1:
                                this.rect.set(0.0f, 0.0f, width, this.visibleRect.top);
                                break;
                            case 2:
                                this.rect.set(this.visibleRect.right, this.visibleRect.top, width, this.visibleRect.bottom);
                                break;
                            case 3:
                                this.rect.set(0.0f, this.visibleRect.bottom, width, height);
                                break;
                        }
                        canvas.drawRect(this.rect, this.paint);
                    }
                }
            }
            if (getAlpha() != 0 && (runnable = this.drawRunnable) != null) {
                AndroidUtilities.runOnUIThread(runnable);
                this.drawRunnable = null;
            }
        }
    }

    private static class SelectedPhotosListView extends RecyclerListView {
        private Drawable arrowDrawable;
        private Paint paint = new Paint(1);
        private RectF rect = new RectF();

        public SelectedPhotosListView(Context context) {
            super(context);
            setWillNotDraw(false);
            setClipToPadding(false);
            setTranslationY((float) (-AndroidUtilities.dp(10.0f)));
            DefaultItemAnimator r1 = new DefaultItemAnimator() {
                /* access modifiers changed from: protected */
                public void onMoveAnimationUpdate(RecyclerView.ViewHolder holder) {
                    SelectedPhotosListView.this.invalidate();
                }
            };
            DefaultItemAnimator defaultItemAnimator = r1;
            setItemAnimator(r1);
            defaultItemAnimator.setDelayAnimations(false);
            defaultItemAnimator.setSupportsChangeAnimations(false);
            setPadding(AndroidUtilities.dp(12.0f), AndroidUtilities.dp(12.0f), AndroidUtilities.dp(12.0f), AndroidUtilities.dp(6.0f));
            this.paint.setColor(NUM);
            this.arrowDrawable = context.getResources().getDrawable(NUM).mutate();
        }

        public void onDraw(Canvas c) {
            super.onDraw(c);
            int count = getChildCount();
            if (count > 0) {
                int x = getMeasuredWidth() - AndroidUtilities.dp(87.0f);
                Drawable drawable = this.arrowDrawable;
                drawable.setBounds(x, 0, drawable.getIntrinsicWidth() + x, AndroidUtilities.dp(6.0f));
                this.arrowDrawable.draw(c);
                int minX = Integer.MAX_VALUE;
                int maxX = Integer.MIN_VALUE;
                for (int a = 0; a < count; a++) {
                    View v = getChildAt(a);
                    minX = (int) Math.min((double) minX, Math.floor((double) v.getX()));
                    maxX = (int) Math.max((double) maxX, Math.ceil((double) (v.getX() + ((float) v.getMeasuredWidth()))));
                }
                if (minX != Integer.MAX_VALUE && maxX != Integer.MIN_VALUE) {
                    this.rect.set((float) (minX - AndroidUtilities.dp(6.0f)), (float) AndroidUtilities.dp(6.0f), (float) (AndroidUtilities.dp(6.0f) + maxX), (float) AndroidUtilities.dp(103.0f));
                    c.drawRoundRect(this.rect, (float) AndroidUtilities.dp(8.0f), (float) AndroidUtilities.dp(8.0f), this.paint);
                }
            }
        }
    }

    private static class CounterView extends View {
        private int currentCount = 0;
        private int height;
        private Paint paint;
        private RectF rect;
        private float rotation;
        private StaticLayout staticLayout;
        private TextPaint textPaint;
        private int width;

        public CounterView(Context context) {
            super(context);
            TextPaint textPaint2 = new TextPaint(1);
            this.textPaint = textPaint2;
            textPaint2.setTextSize((float) AndroidUtilities.dp(15.0f));
            this.textPaint.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            this.textPaint.setColor(-1);
            Paint paint2 = new Paint(1);
            this.paint = paint2;
            paint2.setColor(-1);
            this.paint.setStrokeWidth((float) AndroidUtilities.dp(2.0f));
            this.paint.setStyle(Paint.Style.STROKE);
            this.paint.setStrokeJoin(Paint.Join.ROUND);
            this.rect = new RectF();
            setCount(0);
        }

        public void setScaleX(float scaleX) {
            super.setScaleX(scaleX);
            invalidate();
        }

        public void setRotationX(float rotationX) {
            this.rotation = rotationX;
            invalidate();
        }

        public float getRotationX() {
            return this.rotation;
        }

        public void setCount(int value) {
            StaticLayout staticLayout2 = new StaticLayout("" + Math.max(1, value), this.textPaint, AndroidUtilities.dp(100.0f), Layout.Alignment.ALIGN_NORMAL, 1.0f, 0.0f, false);
            this.staticLayout = staticLayout2;
            this.width = (int) Math.ceil((double) staticLayout2.getLineWidth(0));
            this.height = this.staticLayout.getLineBottom(0);
            AnimatorSet animatorSet = new AnimatorSet();
            if (value == 0) {
                animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, View.SCALE_X, new float[]{0.0f}), ObjectAnimator.ofFloat(this, View.SCALE_Y, new float[]{0.0f}), ObjectAnimator.ofInt(this.paint, AnimationProperties.PAINT_ALPHA, new int[]{0}), ObjectAnimator.ofInt(this.textPaint, AnimationProperties.PAINT_ALPHA, new int[]{0})});
                animatorSet.setInterpolator(new DecelerateInterpolator());
            } else {
                int i = this.currentCount;
                if (i == 0) {
                    animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, View.SCALE_X, new float[]{0.0f, 1.0f}), ObjectAnimator.ofFloat(this, View.SCALE_Y, new float[]{0.0f, 1.0f}), ObjectAnimator.ofInt(this.paint, AnimationProperties.PAINT_ALPHA, new int[]{0, 255}), ObjectAnimator.ofInt(this.textPaint, AnimationProperties.PAINT_ALPHA, new int[]{0, 255})});
                    animatorSet.setInterpolator(new DecelerateInterpolator());
                } else if (value < i) {
                    animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, View.SCALE_X, new float[]{1.1f, 1.0f}), ObjectAnimator.ofFloat(this, View.SCALE_Y, new float[]{1.1f, 1.0f})});
                    animatorSet.setInterpolator(new OvershootInterpolator());
                } else {
                    animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, View.SCALE_X, new float[]{0.9f, 1.0f}), ObjectAnimator.ofFloat(this, View.SCALE_Y, new float[]{0.9f, 1.0f})});
                    animatorSet.setInterpolator(new OvershootInterpolator());
                }
            }
            animatorSet.setDuration(180);
            animatorSet.start();
            requestLayout();
            this.currentCount = value;
        }

        /* access modifiers changed from: protected */
        public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            super.onMeasure(View.MeasureSpec.makeMeasureSpec(Math.max(this.width + AndroidUtilities.dp(20.0f), AndroidUtilities.dp(30.0f)), NUM), View.MeasureSpec.makeMeasureSpec(AndroidUtilities.dp(40.0f), NUM));
        }

        /* access modifiers changed from: protected */
        public void onDraw(Canvas canvas) {
            int cy = getMeasuredHeight() / 2;
            this.paint.setAlpha(255);
            this.rect.set((float) AndroidUtilities.dp(1.0f), (float) (cy - AndroidUtilities.dp(14.0f)), (float) (getMeasuredWidth() - AndroidUtilities.dp(1.0f)), (float) (AndroidUtilities.dp(14.0f) + cy));
            canvas.drawRoundRect(this.rect, (float) AndroidUtilities.dp(15.0f), (float) AndroidUtilities.dp(15.0f), this.paint);
            if (this.staticLayout != null) {
                this.textPaint.setAlpha((int) ((1.0f - this.rotation) * 255.0f));
                canvas.save();
                canvas.translate((float) ((getMeasuredWidth() - this.width) / 2), ((float) ((getMeasuredHeight() - this.height) / 2)) + AndroidUtilities.dpf2(0.2f) + (this.rotation * ((float) AndroidUtilities.dp(5.0f))));
                this.staticLayout.draw(canvas);
                canvas.restore();
                this.paint.setAlpha((int) (this.rotation * 255.0f));
                int cx = (int) this.rect.centerX();
                int cy2 = (int) (((float) ((int) this.rect.centerY())) - (((float) AndroidUtilities.dp(5.0f)) * (1.0f - this.rotation)));
                Canvas canvas2 = canvas;
                canvas2.drawLine((float) (AndroidUtilities.dp(5.0f) + cx), (float) (cy2 - AndroidUtilities.dp(5.0f)), (float) (cx - AndroidUtilities.dp(5.0f)), (float) (AndroidUtilities.dp(5.0f) + cy2), this.paint);
                canvas2.drawLine((float) (cx - AndroidUtilities.dp(5.0f)), (float) (cy2 - AndroidUtilities.dp(5.0f)), (float) (AndroidUtilities.dp(5.0f) + cx), (float) (AndroidUtilities.dp(5.0f) + cy2), this.paint);
            }
        }
    }

    private class PhotoProgressView {
        private float[] alphas = new float[3];
        /* access modifiers changed from: private */
        public float[] animAlphas = new float[3];
        private float animatedAlphaValue = 1.0f;
        private float animatedProgressValue = 0.0f;
        private float animationProgressStart = 0.0f;
        /* access modifiers changed from: private */
        public int backgroundState = -1;
        private float currentProgress = 0.0f;
        private long currentProgressTime = 0;
        private long lastUpdateTime = 0;
        private View parent;
        private final CombinedDrawable playDrawable;
        private final PlayPauseDrawable playPauseDrawable;
        /* access modifiers changed from: private */
        public int previousBackgroundState = -2;
        private RectF progressRect = new RectF();
        private float radOffset = 0.0f;
        private float scale = 1.0f;
        /* access modifiers changed from: private */
        public int size = AndroidUtilities.dp(64.0f);
        private boolean visible;

        public PhotoProgressView(View parentView) {
            if (PhotoViewer.decelerateInterpolator == null) {
                DecelerateInterpolator unused = PhotoViewer.decelerateInterpolator = new DecelerateInterpolator(1.5f);
                Paint unused2 = PhotoViewer.progressPaint = new Paint(1);
                PhotoViewer.progressPaint.setStyle(Paint.Style.STROKE);
                PhotoViewer.progressPaint.setStrokeCap(Paint.Cap.ROUND);
                PhotoViewer.progressPaint.setStrokeWidth((float) AndroidUtilities.dp(3.0f));
                PhotoViewer.progressPaint.setColor(-1);
            }
            this.parent = parentView;
            resetAlphas();
            PlayPauseDrawable playPauseDrawable2 = new PlayPauseDrawable(28);
            this.playPauseDrawable = playPauseDrawable2;
            playPauseDrawable2.setDuration(200);
            this.playDrawable = new CombinedDrawable(ContextCompat.getDrawable(PhotoViewer.this.parentActivity, NUM).mutate(), playPauseDrawable2);
        }

        private void updateAnimation(boolean withProgressAnimation) {
            long newTime = System.currentTimeMillis();
            long dt = newTime - this.lastUpdateTime;
            if (dt > 18) {
                dt = 18;
            }
            this.lastUpdateTime = newTime;
            boolean postInvalidate = false;
            if (withProgressAnimation) {
                if (!(this.animatedProgressValue == 1.0f && this.currentProgress == 1.0f)) {
                    this.radOffset += ((float) (360 * dt)) / 3000.0f;
                    float progressDiff = this.currentProgress - this.animationProgressStart;
                    if (Math.abs(progressDiff) > 0.0f) {
                        long j = this.currentProgressTime + dt;
                        this.currentProgressTime = j;
                        if (j >= 300) {
                            float f = this.currentProgress;
                            this.animatedProgressValue = f;
                            this.animationProgressStart = f;
                            this.currentProgressTime = 0;
                        } else {
                            this.animatedProgressValue = this.animationProgressStart + (PhotoViewer.decelerateInterpolator.getInterpolation(((float) this.currentProgressTime) / 300.0f) * progressDiff);
                        }
                    }
                    postInvalidate = true;
                }
                float progressDiff2 = this.animatedAlphaValue;
                if (progressDiff2 > 0.0f && this.previousBackgroundState != -2) {
                    float f2 = progressDiff2 - (((float) dt) / 200.0f);
                    this.animatedAlphaValue = f2;
                    if (f2 <= 0.0f) {
                        this.animatedAlphaValue = 0.0f;
                        this.previousBackgroundState = -2;
                    }
                    postInvalidate = true;
                }
            }
            int i = 0;
            while (true) {
                float[] fArr = this.alphas;
                if (i >= fArr.length) {
                    break;
                }
                float f3 = fArr[i];
                float[] fArr2 = this.animAlphas;
                if (f3 > fArr2[i]) {
                    fArr2[i] = Math.min(1.0f, fArr2[i] + (((float) dt) / 200.0f));
                    postInvalidate = true;
                } else if (fArr[i] < fArr2[i]) {
                    fArr2[i] = Math.max(0.0f, fArr2[i] - (((float) dt) / 200.0f));
                    postInvalidate = true;
                }
                i++;
            }
            if (postInvalidate) {
                this.parent.postInvalidateOnAnimation();
            }
        }

        public void setProgress(float value, boolean animated) {
            if (!animated) {
                this.animatedProgressValue = value;
                this.animationProgressStart = value;
            } else {
                this.animationProgressStart = this.animatedProgressValue;
            }
            this.currentProgress = value;
            this.currentProgressTime = 0;
            this.parent.invalidate();
        }

        public void setBackgroundState(int state, boolean animated, boolean animateIcon) {
            int i;
            int i2 = this.backgroundState;
            if (i2 != state) {
                PlayPauseDrawable playPauseDrawable2 = this.playPauseDrawable;
                if (playPauseDrawable2 != null) {
                    boolean animatePlayPause = animateIcon && (i2 == 3 || i2 == 4);
                    if (state == 3) {
                        playPauseDrawable2.setPause(false, animatePlayPause);
                    } else if (state == 4) {
                        playPauseDrawable2.setPause(true, animatePlayPause);
                    }
                    this.playPauseDrawable.setParent(this.parent);
                    this.playPauseDrawable.invalidateSelf();
                }
                this.lastUpdateTime = System.currentTimeMillis();
                if (!animated || (i = this.backgroundState) == state) {
                    this.previousBackgroundState = -2;
                } else {
                    this.previousBackgroundState = i;
                    this.animatedAlphaValue = 1.0f;
                }
                this.backgroundState = state;
                onBackgroundStateUpdated(state);
                this.parent.invalidate();
            }
        }

        /* access modifiers changed from: protected */
        public void onBackgroundStateUpdated(int state) {
        }

        public void setAlpha(float value) {
            setIndexedAlpha(0, value, false);
        }

        public void setScale(float value) {
            this.scale = value;
        }

        public void setIndexedAlpha(int index, float alpha, boolean animated) {
            float[] fArr = this.alphas;
            if (fArr[index] != alpha) {
                fArr[index] = alpha;
                if (!animated) {
                    this.animAlphas[index] = alpha;
                }
                checkVisibility();
                this.parent.invalidate();
            }
        }

        public void resetAlphas() {
            int i = 0;
            while (true) {
                float[] fArr = this.alphas;
                if (i < fArr.length) {
                    this.animAlphas[i] = 1.0f;
                    fArr[i] = 1.0f;
                    i++;
                } else {
                    checkVisibility();
                    return;
                }
            }
        }

        private float calculateAlpha() {
            float f;
            float alpha = 1.0f;
            int i = 0;
            while (true) {
                float[] fArr = this.animAlphas;
                if (i >= fArr.length) {
                    return alpha;
                }
                if (i == 2) {
                    f = AndroidUtilities.accelerateInterpolator.getInterpolation(this.animAlphas[i]);
                } else {
                    f = fArr[i];
                }
                alpha *= f;
                i++;
            }
        }

        private void checkVisibility() {
            boolean newVisible = true;
            int i = 0;
            while (true) {
                float[] fArr = this.alphas;
                if (i >= fArr.length) {
                    break;
                } else if (fArr[i] != 1.0f) {
                    newVisible = false;
                    break;
                } else {
                    i++;
                }
            }
            if (newVisible != this.visible) {
                this.visible = newVisible;
                onVisibilityChanged(newVisible);
            }
        }

        /* access modifiers changed from: protected */
        public void onVisibilityChanged(boolean visible2) {
        }

        public boolean isVisible() {
            return this.visible;
        }

        public int getX() {
            return (PhotoViewer.this.containerView.getWidth() - ((int) (((float) this.size) * this.scale))) / 2;
        }

        public int getY() {
            int y = (int) (((float) (((AndroidUtilities.displaySize.y + (PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0)) - ((int) (((float) this.size) * this.scale))) / 2)) + PhotoViewer.this.currentPanTranslationY);
            if (PhotoViewer.this.sendPhotoType == 1) {
                return y - AndroidUtilities.dp(38.0f);
            }
            return y;
        }

        public void onDraw(Canvas canvas) {
            int i;
            Drawable drawable;
            Drawable drawable2;
            int sizeScaled = (int) (((float) this.size) * this.scale);
            int x = getX();
            int y = getY();
            float alpha = calculateAlpha();
            int i2 = this.previousBackgroundState;
            if (i2 >= 0 && i2 < PhotoViewer.progressDrawables.length + 2) {
                if (this.previousBackgroundState < PhotoViewer.progressDrawables.length) {
                    drawable2 = PhotoViewer.progressDrawables[this.previousBackgroundState];
                } else {
                    drawable2 = this.playDrawable;
                }
                if (drawable2 != null) {
                    drawable2.setAlpha((int) (this.animatedAlphaValue * 255.0f * alpha));
                    drawable2.setBounds(x, y, x + sizeScaled, y + sizeScaled);
                    drawable2.draw(canvas);
                }
            }
            int i3 = this.backgroundState;
            if (i3 >= 0 && i3 < PhotoViewer.progressDrawables.length + 2) {
                if (this.backgroundState < PhotoViewer.progressDrawables.length) {
                    drawable = PhotoViewer.progressDrawables[this.backgroundState];
                } else {
                    drawable = this.playDrawable;
                }
                if (drawable != null) {
                    if (this.previousBackgroundState != -2) {
                        drawable.setAlpha((int) ((1.0f - this.animatedAlphaValue) * 255.0f * alpha));
                    } else {
                        drawable.setAlpha((int) (alpha * 255.0f));
                    }
                    drawable.setBounds(x, y, x + sizeScaled, y + sizeScaled);
                    drawable.draw(canvas);
                }
            }
            int i4 = this.backgroundState;
            if (i4 == 0 || i4 == 1 || (i = this.previousBackgroundState) == 0 || i == 1) {
                int diff = AndroidUtilities.dp(4.0f);
                if (this.previousBackgroundState != -2) {
                    PhotoViewer.progressPaint.setAlpha((int) (this.animatedAlphaValue * 255.0f * alpha));
                } else {
                    PhotoViewer.progressPaint.setAlpha((int) (255.0f * alpha));
                }
                this.progressRect.set((float) (x + diff), (float) (y + diff), (float) ((x + sizeScaled) - diff), (float) ((y + sizeScaled) - diff));
                canvas.drawArc(this.progressRect, -90.0f + this.radOffset, Math.max(4.0f, this.animatedProgressValue * 360.0f), false, PhotoViewer.progressPaint);
                updateAnimation(true);
                return;
            }
            updateAnimation(false);
        }
    }

    public static class EmptyPhotoViewerProvider implements PhotoViewerProvider {
        public PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int index, boolean needPreview) {
            return null;
        }

        public ImageReceiver.BitmapHolder getThumbForPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int index) {
            return null;
        }

        public void willSwitchFromPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int index) {
        }

        public void willHidePhotoViewer() {
        }

        public int setPhotoUnchecked(Object photoEntry) {
            return -1;
        }

        public boolean isPhotoChecked(int index) {
            return false;
        }

        public int setPhotoChecked(int index, VideoEditedInfo videoEditedInfo) {
            return -1;
        }

        public boolean cancelButtonPressed() {
            return true;
        }

        public void sendButtonPressed(int index, VideoEditedInfo videoEditedInfo, boolean notify, int scheduleDate, boolean forceDocument) {
        }

        public void replaceButtonPressed(int index, VideoEditedInfo videoEditedInfo) {
        }

        public boolean canReplace(int index) {
            return false;
        }

        public int getSelectedCount() {
            return 0;
        }

        public void updatePhotoAtIndex(int index) {
        }

        public boolean allowSendingSubmenu() {
            return true;
        }

        public boolean allowCaption() {
            return true;
        }

        public boolean scaleToFill() {
            return false;
        }

        public ArrayList<Object> getSelectedPhotosOrder() {
            return null;
        }

        public HashMap<Object, Object> getSelectedPhotos() {
            return null;
        }

        public boolean canScrollAway() {
            return true;
        }

        public void needAddMorePhotos() {
        }

        public int getPhotoIndex(int index) {
            return -1;
        }

        public void deleteImageAtIndex(int index) {
        }

        public String getDeleteMessageString() {
            return null;
        }

        public boolean canCaptureMorePhotos() {
            return true;
        }

        public void openPhotoForEdit(String file, String thumb, boolean isVideo) {
        }

        public int getTotalImageCount() {
            return -1;
        }

        public boolean loadMore() {
            return false;
        }

        public CharSequence getTitleFor(int i) {
            return null;
        }

        public CharSequence getSubtitleFor(int i) {
            return null;
        }

        public MessageObject getEditingMessageObject() {
            return null;
        }

        public void onCaptionChanged(CharSequence caption) {
        }

        public boolean closeKeyboard() {
            return false;
        }

        public boolean validateGroupId(long groupId) {
            return true;
        }
    }

    private class FrameLayoutDrawer extends SizeNotifierFrameLayoutPhoto {
        AdjustPanLayoutHelper adjustPanLayoutHelper = new AdjustPanLayoutHelper(this) {
            /* access modifiers changed from: protected */
            public void onPanTranslationUpdate(float y, float progress, boolean keyboardVisible) {
                float unused = PhotoViewer.this.currentPanTranslationY = y;
                if (PhotoViewer.this.currentEditMode != 3) {
                    PhotoViewer.this.actionBar.setTranslationY(y);
                }
                if (PhotoViewer.this.miniProgressView != null) {
                    PhotoViewer.this.miniProgressView.setTranslationY(y);
                }
                if (PhotoViewer.this.progressView != null) {
                    PhotoViewer.this.progressView.setTranslationY(y);
                }
                if (PhotoViewer.this.checkImageView != null) {
                    PhotoViewer.this.checkImageView.setTranslationY(y);
                }
                if (PhotoViewer.this.photosCounterView != null) {
                    PhotoViewer.this.photosCounterView.setTranslationY(y);
                }
                if (PhotoViewer.this.selectedPhotosListView != null) {
                    PhotoViewer.this.selectedPhotosListView.setTranslationY(y);
                }
                if (PhotoViewer.this.aspectRatioFrameLayout != null) {
                    PhotoViewer.this.aspectRatioFrameLayout.setTranslationY(y);
                }
                if (PhotoViewer.this.textureImageView != null) {
                    PhotoViewer.this.textureImageView.setTranslationY(y);
                }
                if (PhotoViewer.this.photoCropView != null) {
                    PhotoViewer.this.photoCropView.setTranslationY(y);
                }
                if (PhotoViewer.this.photoFilterView != null) {
                    PhotoViewer.this.photoFilterView.setTranslationY(y);
                }
                if (PhotoViewer.this.pickerView != null) {
                    PhotoViewer.this.pickerView.setTranslationY(y);
                }
                if (PhotoViewer.this.pickerViewSendButton != null) {
                    PhotoViewer.this.pickerViewSendButton.setTranslationY(y);
                }
                float p = 0.0f;
                if (PhotoViewer.this.currentEditMode == 3) {
                    if (PhotoViewer.this.captionEditText != null) {
                        PhotoViewer.this.captionEditText.setTranslationY(y);
                    }
                    if (PhotoViewer.this.photoPaintView != null) {
                        PhotoViewer.this.photoPaintView.setTranslationY(0.0f);
                        PhotoViewer.this.photoPaintView.getColorPicker().setTranslationY(y);
                        PhotoViewer.this.photoPaintView.getToolsView().setTranslationY(y);
                        PhotoViewer.this.photoPaintView.getCurtainView().setTranslationY(y);
                    }
                } else {
                    if (PhotoViewer.this.photoPaintView != null) {
                        PhotoViewer.this.photoPaintView.setTranslationY(y);
                    }
                    if (PhotoViewer.this.captionEditText != null) {
                        if (progress >= 0.5f) {
                            p = (progress - 0.5f) / 0.5f;
                        }
                        PhotoViewer.this.captionEditText.setAlpha(p);
                        PhotoViewer.this.captionEditText.setTranslationY((y - this.keyboardSize) + (((float) AndroidUtilities.dp(this.keyboardSize / 2.0f)) * (1.0f - progress)));
                    }
                }
                if (PhotoViewer.this.muteItem != null) {
                    PhotoViewer.this.muteItem.setTranslationY(y);
                }
                if (PhotoViewer.this.cameraItem != null) {
                    PhotoViewer.this.cameraItem.setTranslationY(y);
                }
                if (PhotoViewer.this.captionLimitView != null) {
                    PhotoViewer.this.captionLimitView.setTranslationY(y);
                }
                FrameLayoutDrawer.this.invalidate();
            }

            /* access modifiers changed from: protected */
            public void onTransitionStart(boolean keyboardVisible, int contentHeight) {
                String str;
                int i;
                PhotoViewer.this.windowView.setClipChildren(false);
                if (PhotoViewer.this.captionEditText.getTag() == null || !keyboardVisible) {
                    PhotoViewer.this.checkImageView.animate().alpha(1.0f).setDuration(220).start();
                    PhotoViewer.this.photosCounterView.animate().alpha(1.0f).setDuration(220).start();
                    if (PhotoViewer.this.lastTitle != null && !PhotoViewer.this.isCurrentVideo) {
                        PhotoViewer.this.actionBar.setTitleAnimated(PhotoViewer.this.lastTitle, false, 220);
                        String unused = PhotoViewer.this.lastTitle = null;
                        return;
                    }
                    return;
                }
                if (PhotoViewer.this.isCurrentVideo) {
                    if (PhotoViewer.this.muteVideo) {
                        i = NUM;
                        str = "GifCaption";
                    } else {
                        i = NUM;
                        str = "VideoCaption";
                    }
                    PhotoViewer.this.actionBar.setTitleAnimated(LocaleController.getString(str, i), true, 220);
                } else {
                    PhotoViewer.this.actionBar.setTitleAnimated(LocaleController.getString("PhotoCaption", NUM), true, 220);
                }
                PhotoViewer.this.captionEditText.setAlpha(0.0f);
                PhotoViewer.this.checkImageView.animate().alpha(0.0f).setDuration(220).start();
                PhotoViewer.this.photosCounterView.animate().alpha(0.0f).setDuration(220).start();
                PhotoViewer.this.selectedPhotosListView.animate().alpha(0.0f).translationY((float) (-AndroidUtilities.dp(10.0f))).setDuration(220).start();
            }

            /* access modifiers changed from: protected */
            public void onTransitionEnd() {
                super.onTransitionEnd();
                PhotoViewer.this.windowView.setClipChildren(true);
                if (PhotoViewer.this.captionEditText.getTag() == null) {
                    PhotoViewer.this.captionEditText.setVisibility(8);
                }
                PhotoViewer.this.captionEditText.setTranslationY(0.0f);
            }

            /* access modifiers changed from: protected */
            public boolean heightAnimationEnabled() {
                return !PhotoViewer.this.captionEditText.isPopupShowing() && PhotoViewer.this.keyboardAnimationEnabled;
            }
        };
        private boolean captionAbove;
        private boolean ignoreLayout;
        private Paint paint = new Paint();

        public FrameLayoutDrawer(Context context) {
            super(context, false);
            setWillNotDraw(false);
            setClipChildren(false);
            setClipToPadding(false);
            this.paint.setColor(NUM);
        }

        /* access modifiers changed from: protected */
        public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            int heightSize;
            int groupedPhotosHeight;
            int i;
            int height;
            int width;
            int widthSize = View.MeasureSpec.getSize(widthMeasureSpec);
            int heightSize2 = View.MeasureSpec.getSize(heightMeasureSpec);
            if (getLayoutParams().height > 0) {
                heightSize = getLayoutParams().height;
            } else {
                heightSize = heightSize2;
            }
            setMeasuredDimension(widthSize, heightSize);
            boolean z = true;
            if (!PhotoViewer.this.isCurrentVideo) {
                this.ignoreLayout = true;
                if (PhotoViewer.this.needCaptionLayout) {
                    int maxLines = AndroidUtilities.displaySize.x > AndroidUtilities.displaySize.y ? 5 : 10;
                    PhotoViewer.this.captionTextViewSwitcher.getCurrentView().setMaxLines(maxLines);
                    PhotoViewer.this.captionTextViewSwitcher.getNextView().setMaxLines(maxLines);
                } else {
                    PhotoViewer.this.captionTextViewSwitcher.getCurrentView().setMaxLines(Integer.MAX_VALUE);
                    PhotoViewer.this.captionTextViewSwitcher.getNextView().setMaxLines(Integer.MAX_VALUE);
                }
                this.ignoreLayout = false;
            }
            measureChildWithMargins(PhotoViewer.this.captionEditText, widthMeasureSpec, 0, heightMeasureSpec, 0);
            int inputFieldHeight = PhotoViewer.this.captionEditText.getMeasuredHeight();
            int i2 = 8;
            int bottomLayoutHeight = PhotoViewer.this.bottomLayout.getVisibility() != 8 ? AndroidUtilities.dp(48.0f) : 0;
            if (PhotoViewer.this.groupedPhotosListView == null || PhotoViewer.this.groupedPhotosListView.getVisibility() == 8) {
                groupedPhotosHeight = 0;
            } else {
                ((ViewGroup.MarginLayoutParams) PhotoViewer.this.groupedPhotosListView.getLayoutParams()).bottomMargin = bottomLayoutHeight;
                measureChildWithMargins(PhotoViewer.this.groupedPhotosListView, widthMeasureSpec, 0, heightMeasureSpec, 0);
                int groupedPhotosHeight2 = PhotoViewer.this.groupedPhotosListView.getMeasuredHeight();
                this.ignoreLayout = true;
                if (AndroidUtilities.isTablet() || heightSize >= widthSize) {
                    if (PhotoViewer.this.groupedPhotosListView.getVisibility() != 0) {
                        PhotoViewer.this.groupedPhotosListView.setVisibility(0);
                    }
                } else if (PhotoViewer.this.groupedPhotosListView.getVisibility() != 4) {
                    PhotoViewer.this.groupedPhotosListView.setVisibility(4);
                }
                this.ignoreLayout = false;
                groupedPhotosHeight = groupedPhotosHeight2;
            }
            if (PhotoViewer.this.videoPlayerControlFrameLayout != null) {
                int unused = PhotoViewer.this.videoPlayerControlFrameLayout.parentWidth = widthSize;
                int unused2 = PhotoViewer.this.videoPlayerControlFrameLayout.parentHeight = heightSize;
            }
            int widthSize2 = widthSize - (getPaddingRight() + getPaddingLeft());
            int heightSize3 = heightSize - getPaddingBottom();
            int childCount = getChildCount();
            int i3 = 0;
            while (i3 < childCount) {
                View child = getChildAt(i3);
                if (child.getVisibility() == i2 || child == PhotoViewer.this.captionEditText) {
                    i = i3;
                } else if (child == PhotoViewer.this.groupedPhotosListView) {
                    i = i3;
                } else if (child == PhotoViewer.this.aspectRatioFrameLayout) {
                    child.measure(widthMeasureSpec, View.MeasureSpec.makeMeasureSpec(AndroidUtilities.displaySize.y + (PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0), NUM));
                    i = i3;
                } else {
                    int i4 = widthMeasureSpec;
                    if (child == PhotoViewer.this.paintingOverlay) {
                        if (PhotoViewer.this.aspectRatioFrameLayout == null || PhotoViewer.this.aspectRatioFrameLayout.getVisibility() != 0) {
                            width = PhotoViewer.this.centerImage.getBitmapWidth();
                            height = PhotoViewer.this.centerImage.getBitmapHeight();
                        } else {
                            width = PhotoViewer.this.videoTextureView.getMeasuredWidth();
                            height = PhotoViewer.this.videoTextureView.getMeasuredHeight();
                        }
                        if (width == 0 || height == 0) {
                            width = widthSize2;
                            height = heightSize3;
                        }
                        PhotoViewer.this.paintingOverlay.measure(View.MeasureSpec.makeMeasureSpec(width, NUM), View.MeasureSpec.makeMeasureSpec(height, NUM));
                        i = i3;
                    } else if (PhotoViewer.this.captionEditText.isPopupView(child)) {
                        if (PhotoViewer.this.inBubbleMode) {
                            child.measure(View.MeasureSpec.makeMeasureSpec(widthSize2, NUM), View.MeasureSpec.makeMeasureSpec(heightSize3 - inputFieldHeight, NUM));
                            i = i3;
                        } else if (!AndroidUtilities.isInMultiwindow) {
                            child.measure(View.MeasureSpec.makeMeasureSpec(widthSize2, NUM), View.MeasureSpec.makeMeasureSpec(child.getLayoutParams().height, NUM));
                            i = i3;
                        } else if (AndroidUtilities.isTablet()) {
                            child.measure(View.MeasureSpec.makeMeasureSpec(widthSize2, NUM), View.MeasureSpec.makeMeasureSpec(Math.min(AndroidUtilities.dp(320.0f), (heightSize3 - inputFieldHeight) - AndroidUtilities.statusBarHeight), NUM));
                            i = i3;
                        } else {
                            child.measure(View.MeasureSpec.makeMeasureSpec(widthSize2, NUM), View.MeasureSpec.makeMeasureSpec((heightSize3 - inputFieldHeight) - AndroidUtilities.statusBarHeight, NUM));
                            i = i3;
                        }
                    } else if (child == PhotoViewer.this.captionScrollView) {
                        int bottomMargin = bottomLayoutHeight;
                        if (PhotoViewer.this.dontChangeCaptionPosition) {
                            if (this.captionAbove) {
                                bottomMargin += groupedPhotosHeight;
                            }
                        } else if (!PhotoViewer.this.groupedPhotosListView.hasPhotos() || (!AndroidUtilities.isTablet() && heightSize3 <= widthSize2)) {
                            this.captionAbove = false;
                        } else {
                            bottomMargin += groupedPhotosHeight;
                            this.captionAbove = z;
                        }
                        int i5 = PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0;
                        ((ViewGroup.MarginLayoutParams) PhotoViewer.this.captionScrollView.getLayoutParams()).bottomMargin = bottomMargin;
                        child.measure(View.MeasureSpec.makeMeasureSpec(widthSize2, NUM), View.MeasureSpec.makeMeasureSpec((heightSize3 - (i5 + ActionBar.getCurrentActionBarHeight())) - bottomMargin, NUM));
                        i = i3;
                    } else {
                        View view = child;
                        i = i3;
                        measureChildWithMargins(child, widthMeasureSpec, 0, heightMeasureSpec, 0);
                    }
                }
                i3 = i + 1;
                z = true;
                i2 = 8;
            }
        }

        /* access modifiers changed from: protected */
        public void onLayout(boolean changed, int _l, int t, int _r, int _b) {
            int paddingBottom;
            int keyboardHeight;
            int count;
            int b;
            int r;
            int l;
            int childLeft;
            int childTop;
            int top;
            FrameLayoutDrawer frameLayoutDrawer = this;
            int count2 = getChildCount();
            int keyboardHeight2 = getKeyboardHeight();
            int unused = PhotoViewer.this.keyboardSize = keyboardHeight2;
            int paddingBottom2 = (keyboardHeight2 > AndroidUtilities.dp(20.0f) || AndroidUtilities.isInMultiwindow) ? 0 : PhotoViewer.this.captionEditText.getEmojiPadding();
            int i = 0;
            while (i < count2) {
                View child = frameLayoutDrawer.getChildAt(i);
                if (child.getVisibility() == 8) {
                    count = count2;
                    keyboardHeight = keyboardHeight2;
                    paddingBottom = paddingBottom2;
                } else {
                    if (child == PhotoViewer.this.aspectRatioFrameLayout) {
                        l = _l;
                        r = _r;
                        b = _b;
                    } else {
                        l = _l + getPaddingLeft();
                        r = _r - getPaddingRight();
                        b = _b - getPaddingBottom();
                    }
                    FrameLayout.LayoutParams lp = (FrameLayout.LayoutParams) child.getLayoutParams();
                    int width = child.getMeasuredWidth();
                    int height = child.getMeasuredHeight();
                    int gravity = lp.gravity;
                    if (gravity == -1) {
                        gravity = 51;
                    }
                    int verticalGravity = gravity & 112;
                    switch (gravity & 7 & 7) {
                        case 1:
                            count = count2;
                            childLeft = ((((r - l) - width) / 2) + lp.leftMargin) - lp.rightMargin;
                            break;
                        case 5:
                            count = count2;
                            childLeft = ((r - l) - width) - lp.rightMargin;
                            break;
                        default:
                            count = count2;
                            childLeft = lp.leftMargin;
                            break;
                    }
                    switch (verticalGravity) {
                        case 16:
                            keyboardHeight = keyboardHeight2;
                            childTop = (((((b - paddingBottom2) - t) - height) / 2) + lp.topMargin) - lp.bottomMargin;
                            break;
                        case 80:
                            keyboardHeight = keyboardHeight2;
                            childTop = (((b - paddingBottom2) - t) - height) - lp.bottomMargin;
                            break;
                        default:
                            keyboardHeight = keyboardHeight2;
                            childTop = lp.topMargin;
                            break;
                    }
                    if (child == PhotoViewer.this.mentionListView) {
                        childTop -= PhotoViewer.this.captionEditText.getMeasuredHeight();
                        paddingBottom = paddingBottom2;
                    } else if (PhotoViewer.this.captionEditText.isPopupView(child)) {
                        if (AndroidUtilities.isInMultiwindow) {
                            childTop = (PhotoViewer.this.captionEditText.getTop() - child.getMeasuredHeight()) + AndroidUtilities.dp(1.0f);
                            paddingBottom = paddingBottom2;
                        } else {
                            childTop = PhotoViewer.this.captionEditText.getBottom();
                            paddingBottom = paddingBottom2;
                        }
                    } else if (child == PhotoViewer.this.selectedPhotosListView) {
                        childTop = PhotoViewer.this.actionBar.getMeasuredHeight() + AndroidUtilities.dp(5.0f);
                        paddingBottom = paddingBottom2;
                    } else {
                        if (child == PhotoViewer.this.cameraItem) {
                            paddingBottom = paddingBottom2;
                        } else if (child == PhotoViewer.this.muteItem) {
                            paddingBottom = paddingBottom2;
                        } else if (child == PhotoViewer.this.videoTimelineView) {
                            childTop -= PhotoViewer.this.pickerView.getHeight();
                            paddingBottom = paddingBottom2;
                            if (PhotoViewer.this.sendPhotoType == 1) {
                                childTop -= AndroidUtilities.dp(52.0f);
                            }
                        } else {
                            paddingBottom = paddingBottom2;
                            if (child == PhotoViewer.this.videoAvatarTooltip) {
                                childTop -= PhotoViewer.this.pickerView.getHeight() + AndroidUtilities.dp(31.0f);
                            }
                        }
                        if (PhotoViewer.this.videoTimelineView == null || PhotoViewer.this.videoTimelineView.getVisibility() != 0) {
                            top = PhotoViewer.this.pickerView.getTop();
                        } else {
                            top = PhotoViewer.this.videoTimelineView.getTop();
                        }
                        int i2 = childTop;
                        childTop = (top - AndroidUtilities.dp((PhotoViewer.this.sendPhotoType == 4 || PhotoViewer.this.sendPhotoType == 5) ? 40.0f : 15.0f)) - child.getMeasuredHeight();
                    }
                    child.layout(childLeft + l, childTop, childLeft + width + l, childTop + height);
                }
                i++;
                frameLayoutDrawer = this;
                count2 = count;
                keyboardHeight2 = keyboardHeight;
                paddingBottom2 = paddingBottom;
            }
            notifyHeightChanged();
        }

        /* access modifiers changed from: protected */
        public void onDraw(Canvas canvas) {
            PhotoViewer.this.onDraw(canvas);
            if (PhotoViewer.this.isStatusBarVisible() && AndroidUtilities.statusBarHeight != 0 && PhotoViewer.this.actionBar != null) {
                this.paint.setAlpha((int) (PhotoViewer.this.actionBar.getAlpha() * 255.0f * 0.2f));
                canvas.drawRect(0.0f, PhotoViewer.this.currentPanTranslationY, (float) getMeasuredWidth(), PhotoViewer.this.currentPanTranslationY + ((float) AndroidUtilities.statusBarHeight), this.paint);
                this.paint.setAlpha((int) (PhotoViewer.this.actionBar.getAlpha() * 255.0f * 0.498f));
                if (getPaddingRight() > 0) {
                    canvas.drawRect((float) (getMeasuredWidth() - getPaddingRight()), 0.0f, (float) getMeasuredWidth(), (float) getMeasuredHeight(), this.paint);
                }
                if (getPaddingLeft() > 0) {
                    canvas.drawRect(0.0f, 0.0f, (float) getPaddingLeft(), (float) getMeasuredHeight(), this.paint);
                }
            }
        }

        /* access modifiers changed from: protected */
        public boolean drawChild(Canvas canvas, View child, long drawingTime) {
            if (child == PhotoViewer.this.mentionListView || child == PhotoViewer.this.captionEditText) {
                if (PhotoViewer.this.currentEditMode != 0 && PhotoViewer.this.currentPanTranslationY == 0.0f) {
                    return false;
                }
                if (AndroidUtilities.isInMultiwindow || AndroidUtilities.usingHardwareInput) {
                    if (!PhotoViewer.this.captionEditText.isPopupShowing() && PhotoViewer.this.captionEditText.getEmojiPadding() == 0 && PhotoViewer.this.captionEditText.getTag() == null) {
                        return false;
                    }
                } else if (!PhotoViewer.this.captionEditText.isPopupShowing() && PhotoViewer.this.captionEditText.getEmojiPadding() == 0 && getKeyboardHeight() == 0 && PhotoViewer.this.currentPanTranslationY == 0.0f) {
                    return false;
                }
                if (child == PhotoViewer.this.mentionListView) {
                    canvas.save();
                    canvas.clipRect(child.getX(), child.getY(), child.getX() + ((float) child.getWidth()), child.getY() + ((float) child.getHeight()));
                    boolean r = super.drawChild(canvas, child, drawingTime);
                    canvas.restore();
                    return r;
                }
            } else if (child == PhotoViewer.this.cameraItem || child == PhotoViewer.this.muteItem || child == PhotoViewer.this.pickerView || child == PhotoViewer.this.videoTimelineView || child == PhotoViewer.this.pickerViewSendButton || child == PhotoViewer.this.captionLimitView || child == PhotoViewer.this.captionTextViewSwitcher || (PhotoViewer.this.muteItem.getVisibility() == 0 && child == PhotoViewer.this.bottomLayout)) {
                if (PhotoViewer.this.captionEditText.isPopupAnimatig()) {
                    child.setTranslationY((float) PhotoViewer.this.captionEditText.getEmojiPadding());
                    boolean unused = PhotoViewer.this.bottomTouchEnabled = false;
                } else {
                    int paddingBottom = (getKeyboardHeight() > AndroidUtilities.dp(20.0f) || AndroidUtilities.isInMultiwindow) ? 0 : PhotoViewer.this.captionEditText.getEmojiPadding();
                    if (PhotoViewer.this.captionEditText.isPopupShowing() || (((AndroidUtilities.isInMultiwindow || AndroidUtilities.usingHardwareInput) && PhotoViewer.this.captionEditText.getTag() != null) || getKeyboardHeight() > AndroidUtilities.dp(80.0f) || paddingBottom != 0)) {
                        boolean unused2 = PhotoViewer.this.bottomTouchEnabled = false;
                        return false;
                    }
                    boolean unused3 = PhotoViewer.this.bottomTouchEnabled = true;
                }
            } else if (child == PhotoViewer.this.checkImageView || child == PhotoViewer.this.photosCounterView) {
                if (PhotoViewer.this.captionEditText.getTag() != null) {
                    boolean unused4 = PhotoViewer.this.bottomTouchEnabled = false;
                    if (child.getAlpha() > 0.0f) {
                        return true;
                    }
                    return false;
                }
                boolean unused5 = PhotoViewer.this.bottomTouchEnabled = true;
            } else if (child == PhotoViewer.this.miniProgressView) {
                return false;
            }
            if (child == PhotoViewer.this.videoTimelineView && PhotoViewer.this.videoTimelineView.getTranslationY() > 0.0f && PhotoViewer.this.pickerView.getTranslationY() == 0.0f) {
                canvas.save();
                canvas.clipRect(PhotoViewer.this.videoTimelineView.getX(), PhotoViewer.this.videoTimelineView.getY(), PhotoViewer.this.videoTimelineView.getX() + ((float) PhotoViewer.this.videoTimelineView.getMeasuredWidth()), (float) PhotoViewer.this.videoTimelineView.getBottom());
                boolean b = super.drawChild(canvas, child, drawingTime);
                canvas.restore();
                return b;
            }
            try {
                if (child == PhotoViewer.this.aspectRatioFrameLayout || child == PhotoViewer.this.paintingOverlay || !super.drawChild(canvas, child, drawingTime)) {
                    return false;
                }
                return true;
            } catch (Throwable th) {
                return true;
            }
        }

        public void requestLayout() {
            if (!this.ignoreLayout) {
                super.requestLayout();
            }
        }

        /* access modifiers changed from: protected */
        public void onAttachedToWindow() {
            super.onAttachedToWindow();
            this.adjustPanLayoutHelper.setResizableView(PhotoViewer.this.windowView);
            this.adjustPanLayoutHelper.onAttach();
            Bulletin.addDelegate((FrameLayout) this, (Bulletin.Delegate) new Bulletin.Delegate() {
                public /* synthetic */ void onHide(Bulletin bulletin) {
                    Bulletin.Delegate.CC.$default$onHide(this, bulletin);
                }

                public /* synthetic */ void onOffsetChange(float f) {
                    Bulletin.Delegate.CC.$default$onOffsetChange(this, f);
                }

                public /* synthetic */ void onShow(Bulletin bulletin) {
                    Bulletin.Delegate.CC.$default$onShow(this, bulletin);
                }

                public int getBottomOffset(int tag) {
                    int offset = 0;
                    if (PhotoViewer.this.bottomLayout != null && PhotoViewer.this.bottomLayout.getVisibility() == 0) {
                        offset = 0 + PhotoViewer.this.bottomLayout.getHeight();
                    }
                    if (PhotoViewer.this.groupedPhotosListView == null || !PhotoViewer.this.groupedPhotosListView.hasPhotos()) {
                        return offset;
                    }
                    if (AndroidUtilities.isTablet() || PhotoViewer.this.containerView.getMeasuredHeight() > PhotoViewer.this.containerView.getMeasuredWidth()) {
                        return offset + PhotoViewer.this.groupedPhotosListView.getHeight();
                    }
                    return offset;
                }
            });
        }

        /* access modifiers changed from: protected */
        public void onDetachedFromWindow() {
            super.onDetachedFromWindow();
            this.adjustPanLayoutHelper.onDetach();
            Bulletin.removeDelegate((FrameLayout) this);
        }

        public void notifyHeightChanged() {
            super.notifyHeightChanged();
            if (PhotoViewer.this.isCurrentVideo) {
                PhotoViewer.this.photoProgressViews[0].setIndexedAlpha(2, getKeyboardHeight() <= AndroidUtilities.dp(20.0f) ? 1.0f : 0.0f, true);
            }
        }
    }

    static {
        if (Build.VERSION.SDK_INT >= 24) {
            VPC_PROGRESS = new FloatProperty<VideoPlayerControlFrameLayout>("progress") {
                public void setValue(VideoPlayerControlFrameLayout object, float value) {
                    object.setProgress(value);
                }

                public Float get(VideoPlayerControlFrameLayout object) {
                    return Float.valueOf(object.getProgress());
                }
            };
        } else {
            VPC_PROGRESS = new Property<VideoPlayerControlFrameLayout, Float>(Float.class, "progress") {
                public void set(VideoPlayerControlFrameLayout object, Float value) {
                    object.setProgress(value.floatValue());
                }

                public Float get(VideoPlayerControlFrameLayout object) {
                    return Float.valueOf(object.getProgress());
                }
            };
        }
    }

    private class VideoPlayerControlFrameLayout extends FrameLayout {
        private boolean ignoreLayout;
        /* access modifiers changed from: private */
        public int parentHeight;
        /* access modifiers changed from: private */
        public int parentWidth;
        private float progress = 1.0f;
        private boolean seekBarTransitionEnabled;
        private boolean translationYAnimationEnabled = true;

        public VideoPlayerControlFrameLayout(Context context) {
            super(context);
            setWillNotDraw(false);
        }

        public boolean onTouchEvent(MotionEvent event) {
            if (this.progress < 1.0f) {
                return false;
            }
            if (!PhotoViewer.this.videoPlayerSeekbar.onTouch(event.getAction(), event.getX() - ((float) AndroidUtilities.dp(2.0f)), event.getY())) {
                return true;
            }
            getParent().requestDisallowInterceptTouchEvent(true);
            PhotoViewer.this.videoPlayerSeekbarView.invalidate();
            return true;
        }

        public void requestLayout() {
            if (!this.ignoreLayout) {
                super.requestLayout();
            }
        }

        /* access modifiers changed from: protected */
        public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            int extraWidth;
            long duration;
            this.ignoreLayout = true;
            FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) PhotoViewer.this.videoPlayerTime.getLayoutParams();
            if (this.parentWidth > this.parentHeight) {
                if (PhotoViewer.this.exitFullscreenButton.getVisibility() != 0) {
                    PhotoViewer.this.exitFullscreenButton.setVisibility(0);
                }
                extraWidth = AndroidUtilities.dp(48.0f);
                layoutParams.rightMargin = AndroidUtilities.dp(47.0f);
            } else {
                if (PhotoViewer.this.exitFullscreenButton.getVisibility() != 4) {
                    PhotoViewer.this.exitFullscreenButton.setVisibility(4);
                }
                extraWidth = 0;
                layoutParams.rightMargin = AndroidUtilities.dp(12.0f);
            }
            this.ignoreLayout = false;
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
            if (PhotoViewer.this.videoPlayer != null) {
                duration = PhotoViewer.this.videoPlayer.getDuration();
                if (duration == -9223372036854775807L) {
                    duration = 0;
                }
            } else {
                duration = 0;
            }
            long duration2 = duration / 1000;
            PhotoViewer.this.videoPlayerSeekbar.setSize(((getMeasuredWidth() - AndroidUtilities.dp(16.0f)) - ((int) Math.ceil((double) PhotoViewer.this.videoPlayerTime.getPaint().measureText(String.format(Locale.ROOT, "%02d:%02d / %02d:%02d", new Object[]{Long.valueOf(duration2 / 60), Long.valueOf(duration2 % 60), Long.valueOf(duration2 / 60), Long.valueOf(duration2 % 60)}))))) - extraWidth, getMeasuredHeight());
        }

        /* access modifiers changed from: protected */
        public void onLayout(boolean changed, int left, int top, int right, int bottom) {
            super.onLayout(changed, left, top, right, bottom);
            float progress2 = 0.0f;
            if (PhotoViewer.this.videoPlayer != null) {
                progress2 = ((float) PhotoViewer.this.videoPlayer.getCurrentPosition()) / ((float) PhotoViewer.this.videoPlayer.getDuration());
            }
            if (PhotoViewer.this.playerWasReady) {
                PhotoViewer.this.videoPlayerSeekbar.setProgress(progress2);
            }
            PhotoViewer.this.videoTimelineView.setProgress(progress2);
        }

        public float getProgress() {
            return this.progress;
        }

        public void setProgress(float progress2) {
            if (this.progress != progress2) {
                this.progress = progress2;
                onProgressChanged(progress2);
            }
        }

        private void onProgressChanged(float progress2) {
            PhotoViewer.this.videoPlayerTime.setAlpha(progress2);
            PhotoViewer.this.exitFullscreenButton.setAlpha(progress2);
            if (this.seekBarTransitionEnabled) {
                PhotoViewer.this.videoPlayerTime.setPivotX((float) PhotoViewer.this.videoPlayerTime.getWidth());
                PhotoViewer.this.videoPlayerTime.setPivotY((float) PhotoViewer.this.videoPlayerTime.getHeight());
                PhotoViewer.this.videoPlayerTime.setScaleX(1.0f - ((1.0f - progress2) * 0.1f));
                PhotoViewer.this.videoPlayerTime.setScaleY(1.0f - ((1.0f - progress2) * 0.1f));
                PhotoViewer.this.videoPlayerSeekbar.setTransitionProgress(1.0f - progress2);
                return;
            }
            if (this.translationYAnimationEnabled) {
                setTranslationY(AndroidUtilities.dpf2(24.0f) * (1.0f - progress2));
            }
            PhotoViewer.this.videoPlayerSeekbarView.setAlpha(progress2);
        }

        public boolean isSeekBarTransitionEnabled() {
            return this.seekBarTransitionEnabled;
        }

        public void setSeekBarTransitionEnabled(boolean seekBarTransitionEnabled2) {
            if (this.seekBarTransitionEnabled != seekBarTransitionEnabled2) {
                this.seekBarTransitionEnabled = seekBarTransitionEnabled2;
                if (seekBarTransitionEnabled2) {
                    setTranslationY(0.0f);
                    PhotoViewer.this.videoPlayerSeekbarView.setAlpha(1.0f);
                } else {
                    PhotoViewer.this.videoPlayerTime.setScaleX(1.0f);
                    PhotoViewer.this.videoPlayerTime.setScaleY(1.0f);
                    PhotoViewer.this.videoPlayerSeekbar.setTransitionProgress(0.0f);
                }
                onProgressChanged(this.progress);
            }
        }

        public void setTranslationYAnimationEnabled(boolean translationYAnimationEnabled2) {
            if (this.translationYAnimationEnabled != translationYAnimationEnabled2) {
                this.translationYAnimationEnabled = translationYAnimationEnabled2;
                if (!translationYAnimationEnabled2) {
                    setTranslationY(0.0f);
                }
                onProgressChanged(this.progress);
            }
        }
    }

    private class CaptionTextViewSwitcher extends TextViewSwitcher {
        private float alpha = 1.0f;
        private boolean inScrollView = false;

        public CaptionTextViewSwitcher(Context context) {
            super(context);
        }

        public void setVisibility(int visibility) {
            setVisibility(visibility, true);
        }

        public void setVisibility(int visibility, boolean withScrollView) {
            super.setVisibility(visibility);
            if (this.inScrollView && withScrollView) {
                PhotoViewer.this.captionScrollView.setVisibility(visibility);
            }
        }

        public void setAlpha(float alpha2) {
            this.alpha = alpha2;
            if (this.inScrollView) {
                PhotoViewer.this.captionScrollView.setAlpha(alpha2);
            } else {
                super.setAlpha(alpha2);
            }
        }

        public float getAlpha() {
            if (this.inScrollView) {
                return this.alpha;
            }
            return super.getAlpha();
        }

        public void setTranslationY(float translationY) {
            super.setTranslationY(translationY);
            if (this.inScrollView) {
                PhotoViewer.this.captionScrollView.invalidate();
            }
        }

        /* access modifiers changed from: protected */
        public void onAttachedToWindow() {
            super.onAttachedToWindow();
            if (PhotoViewer.this.captionContainer != null && getParent() == PhotoViewer.this.captionContainer) {
                this.inScrollView = true;
                PhotoViewer.this.captionScrollView.setVisibility(getVisibility());
                PhotoViewer.this.captionScrollView.setAlpha(this.alpha);
                super.setAlpha(1.0f);
            }
        }

        /* access modifiers changed from: protected */
        public void onDetachedFromWindow() {
            super.onDetachedFromWindow();
            if (this.inScrollView) {
                this.inScrollView = false;
                PhotoViewer.this.captionScrollView.setVisibility(8);
                super.setAlpha(this.alpha);
            }
        }
    }

    private class CaptionScrollView extends NestedScrollView {
        private Method abortAnimatedScrollMethod;
        /* access modifiers changed from: private */
        public float backgroundAlpha = 1.0f;
        /* access modifiers changed from: private */
        public boolean dontChangeTopMargin;
        private boolean isLandscape;
        private boolean nestedScrollStarted;
        private float overScrollY;
        private final Paint paint;
        private int pendingTopMargin = -1;
        private int prevHeight;
        private OverScroller scroller;
        private final SpringAnimation springAnimation;
        private int textHash;
        private float velocitySign;
        private float velocityY;

        public CaptionScrollView(Context context) {
            super(context);
            Paint paint2 = new Paint(1);
            this.paint = paint2;
            setClipChildren(false);
            setOverScrollMode(2);
            paint2.setColor(-16777216);
            setFadingEdgeLength(AndroidUtilities.dp(12.0f));
            setVerticalFadingEdgeEnabled(true);
            setWillNotDraw(false);
            SpringAnimation springAnimation2 = new SpringAnimation(PhotoViewer.this.captionTextViewSwitcher, DynamicAnimation.TRANSLATION_Y, 0.0f);
            this.springAnimation = springAnimation2;
            springAnimation2.getSpring().setStiffness(100.0f);
            springAnimation2.setMinimumVisibleChange(1.0f);
            springAnimation2.addUpdateListener(new PhotoViewer$CaptionScrollView$$ExternalSyntheticLambda0(this));
            springAnimation2.getSpring().setDampingRatio(1.0f);
            try {
                Method declaredMethod = NestedScrollView.class.getDeclaredMethod("abortAnimatedScroll", new Class[0]);
                this.abortAnimatedScrollMethod = declaredMethod;
                declaredMethod.setAccessible(true);
            } catch (Exception e) {
                this.abortAnimatedScrollMethod = null;
                FileLog.e((Throwable) e);
            }
            try {
                Field scrollerField = NestedScrollView.class.getDeclaredField("mScroller");
                scrollerField.setAccessible(true);
                this.scroller = (OverScroller) scrollerField.get(this);
            } catch (Exception e2) {
                this.scroller = null;
                FileLog.e((Throwable) e2);
            }
        }

        /* renamed from: lambda$new$0$org-telegram-ui-PhotoViewer$CaptionScrollView  reason: not valid java name */
        public /* synthetic */ void m3639lambda$new$0$orgtelegramuiPhotoViewer$CaptionScrollView(DynamicAnimation animation, float value, float velocity) {
            this.overScrollY = value;
            this.velocityY = velocity;
        }

        public boolean onTouchEvent(MotionEvent ev) {
            if (ev.getAction() != 0 || ev.getY() >= ((float) (PhotoViewer.this.captionContainer.getTop() - getScrollY())) + PhotoViewer.this.captionTextViewSwitcher.getTranslationY()) {
                return super.onTouchEvent(ev);
            }
            return false;
        }

        /* access modifiers changed from: protected */
        public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            updateTopMargin(View.MeasureSpec.getSize(widthMeasureSpec), View.MeasureSpec.getSize(heightMeasureSpec));
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }

        public void applyPendingTopMargin() {
            this.dontChangeTopMargin = false;
            if (this.pendingTopMargin >= 0) {
                ((ViewGroup.MarginLayoutParams) PhotoViewer.this.captionContainer.getLayoutParams()).topMargin = this.pendingTopMargin;
                this.pendingTopMargin = -1;
                requestLayout();
            }
        }

        public int getPendingMarginTopDiff() {
            int i = this.pendingTopMargin;
            if (i >= 0) {
                return i - ((ViewGroup.MarginLayoutParams) PhotoViewer.this.captionContainer.getLayoutParams()).topMargin;
            }
            return 0;
        }

        public void updateTopMargin() {
            updateTopMargin(getWidth(), getHeight());
        }

        private void updateTopMargin(int width, int height) {
            int marginTop = calculateNewContainerMarginTop(width, height);
            if (marginTop < 0) {
                return;
            }
            if (this.dontChangeTopMargin) {
                this.pendingTopMargin = marginTop;
                return;
            }
            ((ViewGroup.MarginLayoutParams) PhotoViewer.this.captionContainer.getLayoutParams()).topMargin = marginTop;
            this.pendingTopMargin = -1;
        }

        public int calculateNewContainerMarginTop(int width, int height) {
            if (width == 0 || height == 0) {
                return -1;
            }
            TextView textView = PhotoViewer.this.captionTextViewSwitcher.getCurrentView();
            CharSequence text = textView.getText();
            int textHash2 = text.hashCode();
            boolean isLandscape2 = AndroidUtilities.displaySize.x > AndroidUtilities.displaySize.y;
            if (this.textHash == textHash2 && this.isLandscape == isLandscape2 && this.prevHeight == height) {
                return -1;
            }
            this.textHash = textHash2;
            this.isLandscape = isLandscape2;
            this.prevHeight = height;
            textView.measure(View.MeasureSpec.makeMeasureSpec(width, NUM), View.MeasureSpec.makeMeasureSpec(height, Integer.MIN_VALUE));
            Layout layout = textView.getLayout();
            int lineCount = layout.getLineCount();
            int i = 2;
            if ((isLandscape2 && lineCount <= 2) || (!isLandscape2 && lineCount <= 5)) {
                return height - textView.getMeasuredHeight();
            }
            if (!isLandscape2) {
                i = 5;
            }
            int i2 = Math.min(i, lineCount);
            loop0:
            while (i2 > 1) {
                for (int j = layout.getLineStart(i2 - 1); j < layout.getLineEnd(i2 - 1); j++) {
                    if (Character.isLetterOrDigit(text.charAt(j))) {
                        break loop0;
                    }
                }
                i2--;
            }
            return (height - (textView.getPaint().getFontMetricsInt((Paint.FontMetricsInt) null) * i2)) - AndroidUtilities.dp(8.0f);
        }

        public void reset() {
            scrollTo(0, 0);
        }

        public void stopScrolling() {
            Method method = this.abortAnimatedScrollMethod;
            if (method != null) {
                try {
                    method.invoke(this, new Object[0]);
                } catch (Exception e) {
                    FileLog.e((Throwable) e);
                }
            }
        }

        public void fling(int velocityY2) {
            super.fling(velocityY2);
            this.velocitySign = Math.signum((float) velocityY2);
            this.velocityY = 0.0f;
        }

        public boolean dispatchNestedPreScroll(int dx, int dy, int[] consumed, int[] offsetInWindow, int type) {
            consumed[1] = 0;
            if (this.nestedScrollStarted) {
                float f = this.overScrollY;
                if ((f > 0.0f && dy > 0) || (f < 0.0f && dy < 0)) {
                    float delta = f - ((float) dy);
                    if (f > 0.0f) {
                        if (delta < 0.0f) {
                            this.overScrollY = 0.0f;
                            consumed[1] = (int) (((float) consumed[1]) + ((float) dy) + delta);
                        } else {
                            this.overScrollY = delta;
                            consumed[1] = consumed[1] + dy;
                        }
                    } else if (delta > 0.0f) {
                        this.overScrollY = 0.0f;
                        consumed[1] = (int) (((float) consumed[1]) + ((float) dy) + delta);
                    } else {
                        this.overScrollY = delta;
                        consumed[1] = consumed[1] + dy;
                    }
                    PhotoViewer.this.captionTextViewSwitcher.setTranslationY(this.overScrollY);
                    return true;
                }
            }
            return false;
        }

        public void dispatchNestedScroll(int dxConsumed, int dyConsumed, int dxUnconsumed, int dyUnconsumed, int[] offsetInWindow, int type, int[] consumed) {
            int consumedY;
            float clampedVelocity;
            if (dyUnconsumed != 0) {
                int dy = Math.round(((float) dyUnconsumed) * (1.0f - Math.abs((-this.overScrollY) / ((float) (PhotoViewer.this.captionContainer.getTop() - ((PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0) + ActionBar.getCurrentActionBarHeight()))))));
                if (dy == 0) {
                    return;
                }
                if (this.nestedScrollStarted) {
                    this.overScrollY -= (float) dy;
                    PhotoViewer.this.captionTextViewSwitcher.setTranslationY(this.overScrollY);
                } else if (!this.springAnimation.isRunning()) {
                    OverScroller overScroller = this.scroller;
                    float velocity = overScroller != null ? overScroller.getCurrVelocity() : Float.NaN;
                    if (!Float.isNaN(velocity)) {
                        float clampedVelocity2 = Math.min(AndroidUtilities.displaySize.x > AndroidUtilities.displaySize.y ? 3000.0f : 5000.0f, velocity);
                        consumedY = (int) ((((float) dy) * clampedVelocity2) / velocity);
                        clampedVelocity = clampedVelocity2 * (-this.velocitySign);
                    } else {
                        consumedY = dy;
                        clampedVelocity = 0.0f;
                    }
                    if (consumedY != 0) {
                        this.overScrollY -= (float) consumedY;
                        PhotoViewer.this.captionTextViewSwitcher.setTranslationY(this.overScrollY);
                    }
                    startSpringAnimationIfNotRunning(clampedVelocity);
                }
            }
        }

        private void startSpringAnimationIfNotRunning(float velocityY2) {
            if (!this.springAnimation.isRunning()) {
                this.springAnimation.setStartVelocity(velocityY2);
                this.springAnimation.start();
            }
        }

        public boolean startNestedScroll(int axes, int type) {
            if (type == 0) {
                this.springAnimation.cancel();
                this.nestedScrollStarted = true;
                this.overScrollY = PhotoViewer.this.captionTextViewSwitcher.getTranslationY();
            }
            return true;
        }

        public void computeScroll() {
            OverScroller overScroller;
            super.computeScroll();
            if (!this.nestedScrollStarted && this.overScrollY != 0.0f && (overScroller = this.scroller) != null && overScroller.isFinished()) {
                startSpringAnimationIfNotRunning(0.0f);
            }
        }

        public void stopNestedScroll(int type) {
            OverScroller overScroller;
            if (this.nestedScrollStarted && type == 0) {
                this.nestedScrollStarted = false;
                if (this.overScrollY != 0.0f && (overScroller = this.scroller) != null && overScroller.isFinished()) {
                    startSpringAnimationIfNotRunning(this.velocityY);
                }
            }
        }

        /* access modifiers changed from: protected */
        public float getTopFadingEdgeStrength() {
            return 1.0f;
        }

        /* access modifiers changed from: protected */
        public float getBottomFadingEdgeStrength() {
            return 1.0f;
        }

        public void draw(Canvas canvas) {
            int width = getWidth();
            int height = getHeight();
            int scrollY = getScrollY();
            int saveCount = canvas.save();
            canvas.clipRect(0, scrollY, width, height + scrollY);
            this.paint.setAlpha((int) (this.backgroundAlpha * 127.0f));
            canvas.drawRect(0.0f, ((float) PhotoViewer.this.captionContainer.getTop()) + PhotoViewer.this.captionTextViewSwitcher.getTranslationY(), (float) width, (float) (height + scrollY), this.paint);
            super.draw(canvas);
            canvas.restoreToCount(saveCount);
        }

        public void invalidate() {
            super.invalidate();
            if (PhotoViewer.this.isActionBarVisible) {
                int scrollY = getScrollY();
                float translationY = PhotoViewer.this.captionTextViewSwitcher.getTranslationY();
                float f = 0.0f;
                boolean buttonVisible = scrollY == 0 && translationY == 0.0f;
                boolean enalrgeIconVisible = scrollY == 0 && translationY == 0.0f;
                if (!buttonVisible) {
                    int progressBottom = PhotoViewer.this.photoProgressViews[0].getY() + PhotoViewer.this.photoProgressViews[0].size;
                    int captionTop = (((PhotoViewer.this.captionContainer.getTop() + ((int) translationY)) - scrollY) + ((PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0) + ActionBar.getCurrentActionBarHeight())) - AndroidUtilities.dp(12.0f);
                    enalrgeIconVisible = captionTop > AndroidUtilities.dp(32.0f) + ((int) PhotoViewer.this.fullscreenButton[0].getY());
                    buttonVisible = captionTop > progressBottom;
                }
                if (PhotoViewer.this.allowShowFullscreenButton) {
                    if (PhotoViewer.this.fullscreenButton[0].getTag() != null && ((Integer) PhotoViewer.this.fullscreenButton[0].getTag()).intValue() == 3 && enalrgeIconVisible) {
                        PhotoViewer.this.fullscreenButton[0].setTag(2);
                        PhotoViewer.this.fullscreenButton[0].animate().alpha(1.0f).setDuration(150).setListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animation) {
                                PhotoViewer.this.fullscreenButton[0].setTag((Object) null);
                            }
                        }).start();
                    } else if (PhotoViewer.this.fullscreenButton[0].getTag() == null && !enalrgeIconVisible) {
                        PhotoViewer.this.fullscreenButton[0].setTag(3);
                        PhotoViewer.this.fullscreenButton[0].animate().alpha(0.0f).setListener((Animator.AnimatorListener) null).setDuration(150).start();
                    }
                }
                PhotoProgressView photoProgressView = PhotoViewer.this.photoProgressViews[0];
                if (buttonVisible) {
                    f = 1.0f;
                }
                photoProgressView.setIndexedAlpha(2, f, true);
            }
        }
    }

    public static PhotoViewer getPipInstance() {
        return PipInstance;
    }

    public static PhotoViewer getInstance() {
        PhotoViewer localInstance = Instance;
        if (localInstance == null) {
            synchronized (PhotoViewer.class) {
                localInstance = Instance;
                if (localInstance == null) {
                    PhotoViewer photoViewer = new PhotoViewer();
                    localInstance = photoViewer;
                    Instance = photoViewer;
                }
            }
        }
        return localInstance;
    }

    public boolean isOpenedFullScreenVideo() {
        return this.openedFullScreenVideo;
    }

    public static boolean hasInstance() {
        return Instance != null;
    }

    public PhotoViewer() {
        this.blackPaint.setColor(-16777216);
    }

    public void didReceivedNotification(int id, int account, Object... args) {
        boolean scheduled;
        int loadFromMaxId;
        int i;
        ImageLocation location;
        int i2;
        long did;
        int guid;
        float bufferedProgress;
        float progress;
        MessageObject messageObject;
        TLRPC.BotInlineResult botInlineResult;
        PageBlocksAdapter pageBlocksAdapter2;
        int i3 = id;
        float f = 1.0f;
        int i4 = 3;
        int i5 = 2;
        int i6 = 1;
        int i7 = 0;
        if (i3 == NotificationCenter.fileLoadFailed) {
            String location2 = args[0];
            int a = 0;
            while (true) {
                if (a >= 3) {
                    break;
                }
                String[] strArr = this.currentFileNames;
                if (strArr[a] == null || !strArr[a].equals(location2)) {
                    a++;
                } else {
                    this.photoProgressViews[a].setProgress(1.0f, a == 0 || (a == 1 && this.sideImage == this.rightImage) || (a == 2 && this.sideImage == this.leftImage));
                    checkProgress(a, false, true);
                }
            }
            int i8 = i3;
        } else if (i3 == NotificationCenter.fileLoaded) {
            String location3 = args[0];
            int a2 = 0;
            while (true) {
                if (a2 >= 3) {
                    break;
                }
                String[] strArr2 = this.currentFileNames;
                if (strArr2[a2] == null || !strArr2[a2].equals(location3)) {
                    a2++;
                } else {
                    boolean animated = a2 == 0 || (a2 == 1 && this.sideImage == this.rightImage) || (a2 == 2 && this.sideImage == this.leftImage);
                    this.photoProgressViews[a2].setProgress(1.0f, animated);
                    checkProgress(a2, false, animated);
                    if (this.videoPlayer == null && a2 == 0 && (((messageObject = this.currentMessageObject) != null && messageObject.isVideo()) || (((botInlineResult = this.currentBotInlineResult) != null && (botInlineResult.type.equals("video") || MessageObject.isVideoDocument(this.currentBotInlineResult.document))) || ((pageBlocksAdapter2 = this.pageBlocksAdapter) != null && pageBlocksAdapter2.isVideo(this.currentIndex))))) {
                        onActionClick(false);
                    }
                    if (a2 == 0 && this.videoPlayer != null) {
                        this.currentVideoFinishedLoading = true;
                    }
                }
            }
            int i9 = i3;
        } else {
            long j = 0;
            if (i3 == NotificationCenter.fileLoadProgressChanged) {
                String location4 = args[0];
                int a3 = 0;
                while (a3 < i4) {
                    String[] strArr3 = this.currentFileNames;
                    if (strArr3[a3] != null && strArr3[a3].equals(location4)) {
                        Long loadedSize = args[i6];
                        Long totalSize = args[i5];
                        float loadProgress = Math.min(f, ((float) loadedSize.longValue()) / ((float) totalSize.longValue()));
                        this.photoProgressViews[a3].setProgress(loadProgress, a3 == 0 || (a3 == i6 && this.sideImage == this.rightImage) || (a3 == i5 && this.sideImage == this.leftImage));
                        if (a3 != 0 || this.videoPlayer == null || this.videoPlayerSeekbar == null) {
                            Long l = totalSize;
                        } else {
                            if (this.currentVideoFinishedLoading) {
                                bufferedProgress = 1.0f;
                                Long l2 = loadedSize;
                                Long l3 = totalSize;
                            } else {
                                long newTime = SystemClock.elapsedRealtime();
                                if (Math.abs(newTime - this.lastBufferedPositionCheck) >= 500) {
                                    if (this.seekToProgressPending == 0.0f) {
                                        long duration = this.videoPlayer.getDuration();
                                        Long l4 = loadedSize;
                                        Long l5 = totalSize;
                                        long position = this.videoPlayer.getCurrentPosition();
                                        if (duration < j || duration == -9223372036854775807L || position < j) {
                                            progress = 0.0f;
                                        } else {
                                            progress = ((float) position) / ((float) duration);
                                        }
                                    } else {
                                        Long l6 = totalSize;
                                        progress = this.seekToProgressPending;
                                    }
                                    float bufferedProgress2 = this.isStreaming ? FileLoader.getInstance(this.currentAccount).getBufferedProgressFromPosition(progress, this.currentFileNames[0]) : 1.0f;
                                    this.lastBufferedPositionCheck = newTime;
                                    bufferedProgress = bufferedProgress2;
                                } else {
                                    Long l7 = totalSize;
                                    bufferedProgress = -1.0f;
                                }
                            }
                            if (bufferedProgress != -1.0f) {
                                this.videoPlayerSeekbar.setBufferedProgress(bufferedProgress);
                                PipVideoView pipVideoView2 = this.pipVideoView;
                                if (pipVideoView2 != null) {
                                    pipVideoView2.setBufferedProgress(bufferedProgress);
                                }
                                this.videoPlayerSeekbarView.invalidate();
                            }
                            checkBufferedProgress(loadProgress);
                        }
                    }
                    a3++;
                    f = 1.0f;
                    i4 = 3;
                    i5 = 2;
                    i6 = 1;
                    j = 0;
                }
                int i10 = i3;
                return;
            }
            int i11 = -1;
            if (i3 == NotificationCenter.dialogPhotosLoaded) {
                int guid2 = args[3].intValue();
                long did2 = args[0].longValue();
                if (this.avatarsDialogId == did2 && this.classGuid == guid2) {
                    boolean fromCache = args[2].booleanValue();
                    int setToImage = -1;
                    ArrayList<TLRPC.Photo> photos = args[4];
                    if (!photos.isEmpty()) {
                        ArrayList<TLRPC.Message> messages = args[5];
                        this.imagesArrLocations.clear();
                        this.imagesArrLocationsSizes.clear();
                        this.imagesArrLocationsVideo.clear();
                        this.imagesArrMessages.clear();
                        this.avatarsArr.clear();
                        int a4 = 0;
                        while (a4 < photos.size()) {
                            TLRPC.Photo photo = photos.get(a4);
                            if (photo == null || (photo instanceof TLRPC.TL_photoEmpty)) {
                                guid = guid2;
                                did = did2;
                            } else if (photo.sizes == null) {
                                guid = guid2;
                                did = did2;
                            } else {
                                TLRPC.PhotoSize sizeFull = FileLoader.getClosestPhotoSizeWithSize(photo.sizes, 640);
                                TLRPC.VideoSize videoSize = photo.video_sizes.isEmpty() ? null : photo.video_sizes.get(i7);
                                if (sizeFull != null) {
                                    if (setToImage == i11 && this.currentFileLocation != null) {
                                        int b = 0;
                                        while (true) {
                                            if (b >= photo.sizes.size()) {
                                                guid = guid2;
                                                did = did2;
                                                break;
                                            }
                                            TLRPC.PhotoSize size = photo.sizes.get(b);
                                            if (size.location != null) {
                                                guid = guid2;
                                                if (size.location.local_id == this.currentFileLocation.location.local_id) {
                                                    did = did2;
                                                    TLRPC.PhotoSize photoSize = size;
                                                    if (size.location.volume_id == this.currentFileLocation.location.volume_id) {
                                                        setToImage = this.imagesArrLocations.size();
                                                        break;
                                                    }
                                                } else {
                                                    did = did2;
                                                    TLRPC.PhotoSize photoSize2 = size;
                                                }
                                            } else {
                                                guid = guid2;
                                                did = did2;
                                                TLRPC.PhotoSize photoSize3 = size;
                                            }
                                            b++;
                                            int i12 = id;
                                            guid2 = guid;
                                            did2 = did;
                                        }
                                    } else {
                                        guid = guid2;
                                        did = did2;
                                    }
                                    if (photo.dc_id != 0) {
                                        sizeFull.location.dc_id = photo.dc_id;
                                        sizeFull.location.file_reference = photo.file_reference;
                                    }
                                    ImageLocation location5 = ImageLocation.getForPhoto(sizeFull, photo);
                                    ImageLocation videoLocation = videoSize != null ? ImageLocation.getForPhoto(videoSize, photo) : location5;
                                    if (location5 != null) {
                                        this.imagesArrLocations.add(location5);
                                        this.imagesArrLocationsSizes.add(Integer.valueOf(videoLocation.currentSize));
                                        this.imagesArrLocationsVideo.add(videoLocation);
                                        if (messages != null) {
                                            this.imagesArrMessages.add(messages.get(a4));
                                        } else {
                                            this.imagesArrMessages.add((Object) null);
                                        }
                                        this.avatarsArr.add(photo);
                                    }
                                } else {
                                    guid = guid2;
                                    did = did2;
                                }
                            }
                            a4++;
                            int i13 = id;
                            guid2 = guid;
                            did2 = did;
                            i11 = -1;
                            i7 = 0;
                        }
                        long j2 = did2;
                        if (!this.avatarsArr.isEmpty()) {
                            this.menuItem.showSubItem(6);
                        } else {
                            this.menuItem.hideSubItem(6);
                        }
                        this.needSearchImageInArr = false;
                        this.currentIndex = -1;
                        if (setToImage != -1) {
                            setImageIndex(setToImage);
                        } else {
                            TLRPC.User user = null;
                            TLRPC.Chat chat = null;
                            if (this.avatarsDialogId > 0) {
                                user = MessagesController.getInstance(this.currentAccount).getUser(Long.valueOf(this.avatarsDialogId));
                            } else {
                                chat = MessagesController.getInstance(this.currentAccount).getChat(Long.valueOf(-this.avatarsDialogId));
                            }
                            if (!(user == null && chat == null)) {
                                if (user != null) {
                                    i2 = 0;
                                    location = ImageLocation.getForUserOrChat(user, 0);
                                } else {
                                    i2 = 0;
                                    location = ImageLocation.getForUserOrChat(chat, 0);
                                }
                                if (location != null) {
                                    if (!this.imagesArrLocations.isEmpty() && this.imagesArrLocations.get(i2).photoId == location.photoId) {
                                        this.imagesArrLocations.remove(i2);
                                        this.avatarsArr.remove(i2);
                                        this.imagesArrLocationsSizes.remove(i2);
                                        this.imagesArrLocationsVideo.remove(i2);
                                        this.imagesArrMessages.remove(i2);
                                    }
                                    this.imagesArrLocations.add(i2, location);
                                    this.avatarsArr.add(i2, new TLRPC.TL_photoEmpty());
                                    this.imagesArrLocationsSizes.add(i2, Integer.valueOf(this.currentFileLocationVideo.currentSize));
                                    this.imagesArrLocationsVideo.add(i2, this.currentFileLocationVideo);
                                    this.imagesArrMessages.add(i2, (Object) null);
                                    setImageIndex(i2);
                                }
                            }
                        }
                        if (fromCache) {
                            MessagesController.getInstance(this.currentAccount).loadDialogPhotos(this.avatarsDialogId, 80, 0, false, this.classGuid);
                        }
                    } else {
                        return;
                    }
                } else {
                    long j3 = did2;
                }
                int guid3 = id;
                return;
            }
            int i14 = id;
            if (i14 == NotificationCenter.mediaCountDidLoad) {
                long uid = args[0].longValue();
                if (uid == this.currentDialogId || uid == this.mergeDialogId) {
                    MessageObject messageObject2 = this.currentMessageObject;
                    if (messageObject2 == null || MediaDataController.getMediaType(messageObject2.messageOwner) == this.sharedMediaType) {
                        if (uid == this.currentDialogId) {
                            this.totalImagesCount = args[1].intValue();
                        } else {
                            this.totalImagesCountMerge = args[1].intValue();
                        }
                        if (this.needSearchImageInArr && this.isFirstLoading) {
                            this.isFirstLoading = false;
                            this.loadingMoreImages = true;
                            MediaDataController.getInstance(this.currentAccount).loadMedia(this.currentDialogId, 20, 0, 0, this.sharedMediaType, 1, this.classGuid, 0);
                        } else if (this.imagesArr.isEmpty()) {
                        } else {
                            if (this.opennedFromMedia) {
                                this.actionBar.setTitle(LocaleController.formatString("Of", NUM, Integer.valueOf(this.startOffset + this.currentIndex + 1), Integer.valueOf(this.totalImagesCount + this.totalImagesCountMerge)));
                            } else {
                                this.actionBar.setTitle(LocaleController.formatString("Of", NUM, Integer.valueOf(((this.totalImagesCount + this.totalImagesCountMerge) - this.imagesArr.size()) + this.currentIndex + 1), Integer.valueOf(this.totalImagesCount + this.totalImagesCountMerge)));
                            }
                        }
                    }
                }
            } else if (i14 == NotificationCenter.mediaDidLoad) {
                long uid2 = args[0].longValue();
                int guid4 = args[3].intValue();
                long j4 = this.currentDialogId;
                if (uid2 != j4 && uid2 != this.mergeDialogId) {
                    return;
                }
                if (guid4 == this.classGuid) {
                    this.loadingMoreImages = false;
                    int loadIndex = uid2 == j4 ? 0 : 1;
                    ArrayList<MessageObject> arr = args[2];
                    this.endReached[loadIndex] = args[5].booleanValue();
                    boolean fromStart = args[6].booleanValue();
                    if (this.needSearchImageInArr) {
                        if (!arr.isEmpty() || (loadIndex == 0 && this.mergeDialogId != 0)) {
                            int i15 = this.currentIndex;
                            if (i15 < 0) {
                                this.needSearchImageInArr = false;
                                return;
                            } else if (i15 < this.imagesArr.size()) {
                                int foundIndex = -1;
                                MessageObject currentMessage = this.imagesArr.get(this.currentIndex);
                                int added = 0;
                                for (int a5 = 0; a5 < arr.size(); a5++) {
                                    MessageObject message = arr.get(a5);
                                    if (this.imagesByIdsTemp[loadIndex].indexOfKey(message.getId()) < 0) {
                                        this.imagesByIdsTemp[loadIndex].put(message.getId(), message);
                                        if (this.opennedFromMedia) {
                                            this.imagesArrTemp.add(message);
                                            if (message.getId() == currentMessage.getId()) {
                                                foundIndex = added;
                                            }
                                            added++;
                                        } else {
                                            added++;
                                            this.imagesArrTemp.add(0, message);
                                            if (message.getId() == currentMessage.getId()) {
                                                foundIndex = arr.size() - added;
                                            }
                                        }
                                    }
                                }
                                if (added == 0 && (loadIndex != 0 || this.mergeDialogId == 0)) {
                                    this.totalImagesCount = this.imagesArr.size();
                                    this.totalImagesCountMerge = 0;
                                }
                                if (foundIndex != -1) {
                                    this.imagesArr.clear();
                                    this.imagesArr.addAll(this.imagesArrTemp);
                                    for (int a6 = 0; a6 < 2; a6++) {
                                        this.imagesByIds[a6] = this.imagesByIdsTemp[a6].clone();
                                        this.imagesByIdsTemp[a6].clear();
                                    }
                                    this.imagesArrTemp.clear();
                                    this.needSearchImageInArr = false;
                                    this.currentIndex = -1;
                                    if (foundIndex >= this.imagesArr.size()) {
                                        foundIndex = this.imagesArr.size() - 1;
                                    }
                                    setImageIndex(foundIndex);
                                    long j5 = uid2;
                                    return;
                                }
                                if (this.opennedFromMedia) {
                                    if (this.imagesArrTemp.isEmpty()) {
                                        i = 0;
                                    } else {
                                        ArrayList<MessageObject> arrayList = this.imagesArrTemp;
                                        i = arrayList.get(arrayList.size() - 1).getId();
                                    }
                                    loadFromMaxId = i;
                                    if (loadIndex != 0 || !this.endReached[loadIndex] || this.mergeDialogId == 0) {
                                    } else {
                                        loadIndex = 1;
                                        if (!this.imagesArrTemp.isEmpty()) {
                                            ArrayList<MessageObject> arrayList2 = this.imagesArrTemp;
                                            long j6 = uid2;
                                            if (arrayList2.get(arrayList2.size() - 1).getDialogId() != this.mergeDialogId) {
                                                loadFromMaxId = 0;
                                            }
                                        }
                                    }
                                } else {
                                    loadFromMaxId = this.imagesArrTemp.isEmpty() ? 0 : this.imagesArrTemp.get(0).getId();
                                    if (loadIndex == 0 && this.endReached[loadIndex] && this.mergeDialogId != 0) {
                                        if (this.imagesArrTemp.isEmpty() || this.imagesArrTemp.get(0).getDialogId() == this.mergeDialogId) {
                                            loadIndex = 1;
                                        } else {
                                            loadFromMaxId = 0;
                                            loadIndex = 1;
                                        }
                                    }
                                }
                                if (!this.endReached[loadIndex]) {
                                    this.loadingMoreImages = true;
                                    MediaDataController.getInstance(this.currentAccount).loadMedia(loadIndex == 0 ? this.currentDialogId : this.mergeDialogId, 40, loadFromMaxId, 0, this.sharedMediaType, 1, this.classGuid, 0);
                                    return;
                                }
                                return;
                            }
                        }
                        long j7 = uid2;
                        this.needSearchImageInArr = false;
                        return;
                    }
                    int added2 = 0;
                    for (int i16 = 0; i16 < arr.size(); i16++) {
                        MessageObject message2 = arr.get(fromStart ? (arr.size() - 1) - i16 : i16);
                        if (this.imagesByIds[loadIndex].indexOfKey(message2.getId()) < 0) {
                            added2++;
                            if (!this.opennedFromMedia) {
                                this.imagesArr.add(0, message2);
                            } else if (fromStart) {
                                this.imagesArr.add(0, message2);
                                int i17 = this.startOffset - 1;
                                this.startOffset = i17;
                                this.currentIndex++;
                                if (i17 < 0) {
                                    this.startOffset = 0;
                                }
                            } else {
                                this.imagesArr.add(message2);
                            }
                            this.imagesByIds[loadIndex].put(message2.getId(), message2);
                        }
                    }
                    if (this.opennedFromMedia != 0) {
                        if (added2 == 0 && !fromStart) {
                            this.totalImagesCount = this.startOffset + this.imagesArr.size();
                            this.totalImagesCountMerge = 0;
                        }
                    } else if (added2 != 0) {
                        int index = this.currentIndex;
                        this.currentIndex = -1;
                        setImageIndex(index + added2);
                    } else {
                        this.totalImagesCount = this.imagesArr.size();
                        this.totalImagesCountMerge = 0;
                    }
                }
            } else if (i14 == NotificationCenter.emojiLoaded) {
                CaptionTextViewSwitcher captionTextViewSwitcher2 = this.captionTextViewSwitcher;
                if (captionTextViewSwitcher2 != null) {
                    captionTextViewSwitcher2.invalidateViews();
                }
            } else if (i14 == NotificationCenter.filePreparingFailed) {
                MessageObject messageObject3 = args[0];
                if (this.loadInitialVideo) {
                    this.loadInitialVideo = false;
                    this.progressView.setVisibility(4);
                    preparePlayer(this.currentPlayingVideoFile, false, false, this.editState.savedFilterState);
                } else if (this.tryStartRequestPreviewOnFinish) {
                    releasePlayer(false);
                    this.tryStartRequestPreviewOnFinish = !MediaController.getInstance().scheduleVideoConvert(this.videoPreviewMessageObject, true);
                } else if (messageObject3 == this.videoPreviewMessageObject) {
                    this.requestingPreview = false;
                    this.progressView.setVisibility(4);
                }
            } else if (i14 == NotificationCenter.fileNewChunkAvailable) {
                if (args[0] == this.videoPreviewMessageObject) {
                    String finalPath = args[1];
                    long finalSize = args[3].longValue();
                    this.photoProgressViews[0].setProgress(args[4].floatValue(), true);
                    if (finalSize != 0) {
                        this.requestingPreview = false;
                        this.photoProgressViews[0].setProgress(1.0f, true);
                        this.photoProgressViews[0].setBackgroundState(3, true, true);
                        preparePlayer(Uri.fromFile(new File(finalPath)), false, true, this.editState.savedFilterState);
                    }
                }
            } else if (i14 == NotificationCenter.messagesDeleted && !(scheduled = args[2].booleanValue())) {
                long channelId = args[1].longValue();
                ArrayList<Integer> markAsDeletedMessages = args[0];
                boolean reset = false;
                boolean resetCurrent = false;
                int x = 0;
                while (x < 2) {
                    ArrayList<MessageObject> arr2 = x == 0 ? this.imagesArr : this.imagesArrTemp;
                    SparseArray<MessageObject>[] ids = x == 0 ? this.imagesByIds : this.imagesByIdsTemp;
                    if (!arr2.isEmpty()) {
                        int b2 = 0;
                        while (b2 < 2) {
                            if (ids[b2].size() > 0) {
                                MessageObject messageObject4 = ids[b2].valueAt(0);
                                MessageObject messageObject5 = messageObject4;
                                if (messageObject4.messageOwner.peer_id.channel_id == channelId) {
                                    int a7 = 0;
                                    int N = markAsDeletedMessages.size();
                                    while (a7 < N) {
                                        int mid = markAsDeletedMessages.get(a7).intValue();
                                        boolean scheduled2 = scheduled;
                                        MessageObject message3 = ids[b2].get(markAsDeletedMessages.get(a7).intValue());
                                        if (message3 != null) {
                                            ids[b2].remove(mid);
                                            arr2.remove(message3);
                                            if (b2 == 0) {
                                                this.totalImagesCount--;
                                            } else {
                                                this.totalImagesCountMerge--;
                                            }
                                            if (message3 == this.currentMessageObject) {
                                                resetCurrent = true;
                                            }
                                            reset = true;
                                        }
                                        a7++;
                                        scheduled = scheduled2;
                                    }
                                }
                            }
                            b2++;
                            scheduled = scheduled;
                        }
                    }
                    x++;
                    scheduled = scheduled;
                }
                if (!reset) {
                    return;
                }
                if (resetCurrent && this == PipInstance) {
                    destroyPhotoViewer();
                } else if (!this.imagesArr.isEmpty()) {
                    int index2 = this.currentIndex;
                    this.currentIndex = -1;
                    if (index2 >= this.imagesArr.size()) {
                        index2 = this.imagesArr.size() - 1;
                    }
                    setImageIndex(index2);
                } else {
                    closePhoto(false, true);
                }
            }
        }
    }

    /* access modifiers changed from: private */
    public void showDownloadAlert() {
        AlertDialog.Builder builder = new AlertDialog.Builder(this.parentActivity, this.resourcesProvider);
        builder.setTitle(LocaleController.getString("AppName", NUM));
        builder.setPositiveButton(LocaleController.getString("OK", NUM), (DialogInterface.OnClickListener) null);
        MessageObject messageObject = this.currentMessageObject;
        boolean alreadyDownloading = false;
        if (messageObject != null && messageObject.isVideo() && FileLoader.getInstance(this.currentMessageObject.currentAccount).isLoadingFile(this.currentFileNames[0])) {
            alreadyDownloading = true;
        }
        if (alreadyDownloading) {
            builder.setMessage(LocaleController.getString("PleaseStreamDownload", NUM));
        } else {
            builder.setMessage(LocaleController.getString("PleaseDownload", NUM));
        }
        showAlertDialog(builder);
    }

    /* access modifiers changed from: private */
    public void onSharePressed() {
        boolean z;
        if (this.parentActivity != null && this.allowShare) {
            File f = null;
            boolean isVideo = false;
            try {
                MessageObject messageObject = this.currentMessageObject;
                if (messageObject != null) {
                    isVideo = messageObject.isVideo();
                    if (!TextUtils.isEmpty(this.currentMessageObject.messageOwner.attachPath)) {
                        f = new File(this.currentMessageObject.messageOwner.attachPath);
                        if (!f.exists()) {
                            f = null;
                        }
                    }
                    if (f == null) {
                        f = FileLoader.getPathToMessage(this.currentMessageObject.messageOwner);
                    }
                } else {
                    ImageLocation imageLocation = this.currentFileLocationVideo;
                    if (imageLocation != null) {
                        TLRPC.FileLocation fileLocation = getFileLocation(imageLocation);
                        String fileLocationExt = getFileLocationExt(this.currentFileLocationVideo);
                        if (this.avatarsDialogId == 0) {
                            if (!this.isEvent) {
                                z = false;
                                f = FileLoader.getPathToAttach(fileLocation, fileLocationExt, z);
                            }
                        }
                        z = true;
                        f = FileLoader.getPathToAttach(fileLocation, fileLocationExt, z);
                    } else {
                        PageBlocksAdapter pageBlocksAdapter2 = this.pageBlocksAdapter;
                        if (pageBlocksAdapter2 != null) {
                            f = pageBlocksAdapter2.getFile(this.currentIndex);
                        }
                    }
                }
                if (f == null || !f.exists()) {
                    showDownloadAlert();
                    return;
                }
                Intent intent = new Intent("android.intent.action.SEND");
                if (isVideo) {
                    intent.setType("video/mp4");
                } else {
                    MessageObject messageObject2 = this.currentMessageObject;
                    if (messageObject2 != null) {
                        intent.setType(messageObject2.getMimeType());
                    } else {
                        intent.setType("image/jpeg");
                    }
                }
                if (Build.VERSION.SDK_INT >= 24) {
                    try {
                        intent.putExtra("android.intent.extra.STREAM", FileProvider.getUriForFile(this.parentActivity, "org.telegram.messenger.beta.provider", f));
                        intent.setFlags(1);
                    } catch (Exception e) {
                        intent.putExtra("android.intent.extra.STREAM", Uri.fromFile(f));
                    }
                } else {
                    intent.putExtra("android.intent.extra.STREAM", Uri.fromFile(f));
                }
                this.parentActivity.startActivityForResult(Intent.createChooser(intent, LocaleController.getString("ShareFile", NUM)), 500);
            } catch (Exception e2) {
                FileLog.e((Throwable) e2);
            }
        }
    }

    /* access modifiers changed from: private */
    public void setScaleToFill() {
        float bitmapWidth = (float) this.centerImage.getBitmapWidth();
        float bitmapHeight = (float) this.centerImage.getBitmapHeight();
        if (bitmapWidth != 0.0f && bitmapHeight != 0.0f) {
            float containerWidth = (float) getContainerViewWidth();
            float containerHeight = (float) getContainerViewHeight();
            float scaleFit = Math.min(containerHeight / bitmapHeight, containerWidth / bitmapWidth);
            float max = Math.max(containerWidth / ((float) ((int) (bitmapWidth * scaleFit))), containerHeight / ((float) ((int) (bitmapHeight * scaleFit))));
            this.scale = max;
            updateMinMax(max);
        }
    }

    public void setParentAlert(ChatAttachAlert alert) {
        this.parentAlert = alert;
    }

    public void setParentActivity(Activity activity) {
        setParentActivity(activity, (Theme.ResourcesProvider) null);
    }

    public void setParentActivity(Activity activity, Theme.ResourcesProvider resourcesProvider2) {
        String str;
        Activity activity2 = activity;
        final Theme.ResourcesProvider resourcesProvider3 = resourcesProvider2;
        Theme.createChatResources(activity2, false);
        this.resourcesProvider = resourcesProvider3;
        int i = UserConfig.selectedAccount;
        this.currentAccount = i;
        this.centerImage.setCurrentAccount(i);
        this.leftImage.setCurrentAccount(this.currentAccount);
        this.rightImage.setCurrentAccount(this.currentAccount);
        if (this.parentActivity == activity2) {
            Theme.ResourcesProvider resourcesProvider4 = resourcesProvider3;
        } else if (activity2 == null) {
            Theme.ResourcesProvider resourcesProvider5 = resourcesProvider3;
        } else {
            this.inBubbleMode = activity2 instanceof BubbleActivity;
            this.parentActivity = activity2;
            this.activityContext = new ContextThemeWrapper(this.parentActivity, NUM);
            this.touchSlop = ViewConfiguration.get(this.parentActivity).getScaledTouchSlop();
            if (progressDrawables == null) {
                progressDrawables = new Drawable[]{ContextCompat.getDrawable(this.parentActivity, NUM), ContextCompat.getDrawable(this.parentActivity, NUM), ContextCompat.getDrawable(this.parentActivity, NUM)};
            }
            this.scroller = new Scroller(activity2);
            AnonymousClass10 r0 = new FrameLayout(activity2) {
                private Runnable attachRunnable;

                public boolean onInterceptTouchEvent(MotionEvent ev) {
                    return PhotoViewer.this.isVisible && super.onInterceptTouchEvent(ev);
                }

                public boolean onTouchEvent(MotionEvent event) {
                    return PhotoViewer.this.isVisible && PhotoViewer.this.onTouchEvent(event);
                }

                public boolean dispatchKeyEvent(KeyEvent event) {
                    int keyCode = event.getKeyCode();
                    if (!PhotoViewer.this.muteVideo && PhotoViewer.this.sendPhotoType != 1 && PhotoViewer.this.isCurrentVideo && PhotoViewer.this.videoPlayer != null && event.getRepeatCount() == 0 && event.getAction() == 0 && (event.getKeyCode() == 24 || event.getKeyCode() == 25)) {
                        PhotoViewer.this.videoPlayer.setVolume(1.0f);
                    }
                    return super.dispatchKeyEvent(event);
                }

                public boolean dispatchTouchEvent(MotionEvent ev) {
                    if (PhotoViewer.this.videoPlayerControlVisible && PhotoViewer.this.isPlaying) {
                        switch (ev.getActionMasked()) {
                            case 0:
                            case 5:
                                AndroidUtilities.cancelRunOnUIThread(PhotoViewer.this.hideActionBarRunnable);
                                break;
                            case 1:
                            case 3:
                            case 6:
                                PhotoViewer.this.scheduleActionBarHide();
                                break;
                        }
                    }
                    return super.dispatchTouchEvent(ev);
                }

                /* access modifiers changed from: protected */
                public boolean drawChild(Canvas canvas, View child, long drawingTime) {
                    try {
                        return super.drawChild(canvas, child, drawingTime);
                    } catch (Throwable th) {
                        return false;
                    }
                }

                /* access modifiers changed from: protected */
                public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
                    int newSize;
                    int widthSize = View.MeasureSpec.getSize(widthMeasureSpec);
                    int heightSize = View.MeasureSpec.getSize(heightMeasureSpec);
                    if (Build.VERSION.SDK_INT >= 21 && PhotoViewer.this.lastInsets != null) {
                        WindowInsets insets = (WindowInsets) PhotoViewer.this.lastInsets;
                        if (!PhotoViewer.this.inBubbleMode) {
                            if (AndroidUtilities.incorrectDisplaySizeFix) {
                                if (heightSize > AndroidUtilities.displaySize.y) {
                                    heightSize = AndroidUtilities.displaySize.y;
                                }
                                heightSize += AndroidUtilities.statusBarHeight;
                            } else if (insets.getStableInsetBottom() >= 0 && AndroidUtilities.statusBarHeight >= 0 && (newSize = (heightSize - AndroidUtilities.statusBarHeight) - insets.getStableInsetBottom()) > 0 && newSize < 4096) {
                                AndroidUtilities.displaySize.y = newSize;
                            }
                        }
                        int bottomInsets = insets.getSystemWindowInsetBottom();
                        if (PhotoViewer.this.captionEditText.isPopupShowing()) {
                            bottomInsets -= PhotoViewer.this.containerView.getKeyboardHeight();
                        }
                        heightSize -= bottomInsets;
                    } else if (heightSize > AndroidUtilities.displaySize.y) {
                        heightSize = AndroidUtilities.displaySize.y;
                    }
                    setMeasuredDimension(widthSize, heightSize);
                    ViewGroup.LayoutParams layoutParams = PhotoViewer.this.animatingImageView.getLayoutParams();
                    PhotoViewer.this.animatingImageView.measure(View.MeasureSpec.makeMeasureSpec(layoutParams.width, Integer.MIN_VALUE), View.MeasureSpec.makeMeasureSpec(layoutParams.height, Integer.MIN_VALUE));
                    PhotoViewer.this.containerView.measure(View.MeasureSpec.makeMeasureSpec(widthSize, NUM), View.MeasureSpec.makeMeasureSpec(heightSize, NUM));
                }

                /* access modifiers changed from: protected */
                public void onLayout(boolean changed, int left, int top, int right, int bottom) {
                    PhotoViewer.this.animatingImageView.layout(0, 0, PhotoViewer.this.animatingImageView.getMeasuredWidth(), PhotoViewer.this.animatingImageView.getMeasuredHeight());
                    PhotoViewer.this.containerView.layout(0, 0, PhotoViewer.this.containerView.getMeasuredWidth(), PhotoViewer.this.containerView.getMeasuredHeight());
                    boolean unused = PhotoViewer.this.wasLayout = true;
                    if (changed) {
                        if (!PhotoViewer.this.dontResetZoomOnFirstLayout) {
                            float unused2 = PhotoViewer.this.scale = 1.0f;
                            float unused3 = PhotoViewer.this.translationX = 0.0f;
                            float unused4 = PhotoViewer.this.translationY = 0.0f;
                            PhotoViewer photoViewer = PhotoViewer.this;
                            photoViewer.updateMinMax(photoViewer.scale);
                        }
                        if (PhotoViewer.this.checkImageView != null) {
                            PhotoViewer.this.checkImageView.post(new PhotoViewer$10$$ExternalSyntheticLambda0(this));
                        }
                    }
                    if (PhotoViewer.this.dontResetZoomOnFirstLayout) {
                        PhotoViewer.this.setScaleToFill();
                        boolean unused5 = PhotoViewer.this.dontResetZoomOnFirstLayout = false;
                    }
                }

                /* renamed from: lambda$onLayout$0$org-telegram-ui-PhotoViewer$10  reason: not valid java name */
                public /* synthetic */ void m3615lambda$onLayout$0$orgtelegramuiPhotoViewer$10() {
                    FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) PhotoViewer.this.checkImageView.getLayoutParams();
                    int rotation = ((WindowManager) ApplicationLoader.applicationContext.getSystemService("window")).getDefaultDisplay().getRotation();
                    int i = 0;
                    int newMargin = ((ActionBar.getCurrentActionBarHeight() - AndroidUtilities.dp(34.0f)) / 2) + (PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0);
                    if (newMargin != layoutParams.topMargin) {
                        layoutParams.topMargin = newMargin;
                        PhotoViewer.this.checkImageView.setLayoutParams(layoutParams);
                    }
                    FrameLayout.LayoutParams layoutParams2 = (FrameLayout.LayoutParams) PhotoViewer.this.photosCounterView.getLayoutParams();
                    int currentActionBarHeight = (ActionBar.getCurrentActionBarHeight() - AndroidUtilities.dp(40.0f)) / 2;
                    if (PhotoViewer.this.isStatusBarVisible()) {
                        i = AndroidUtilities.statusBarHeight;
                    }
                    int newMargin2 = currentActionBarHeight + i;
                    if (layoutParams2.topMargin != newMargin2) {
                        layoutParams2.topMargin = newMargin2;
                        PhotoViewer.this.photosCounterView.setLayoutParams(layoutParams2);
                    }
                }

                /* access modifiers changed from: protected */
                public void onAttachedToWindow() {
                    super.onAttachedToWindow();
                    boolean unused = PhotoViewer.this.attachedToWindow = true;
                }

                /* access modifiers changed from: protected */
                public void onDetachedFromWindow() {
                    super.onDetachedFromWindow();
                    boolean unused = PhotoViewer.this.attachedToWindow = false;
                    boolean unused2 = PhotoViewer.this.wasLayout = false;
                }

                public boolean dispatchKeyEventPreIme(KeyEvent event) {
                    if (event == null || event.getKeyCode() != 4 || event.getAction() != 1) {
                        return super.dispatchKeyEventPreIme(event);
                    }
                    if (PhotoViewer.this.captionEditText.isPopupShowing() || PhotoViewer.this.captionEditText.isKeyboardVisible()) {
                        PhotoViewer.this.closeCaptionEnter(true);
                        return false;
                    }
                    PhotoViewer.getInstance().closePhoto(true, false);
                    return true;
                }

                /* access modifiers changed from: protected */
                public void onDraw(Canvas canvas) {
                    if (Build.VERSION.SDK_INT >= 21 && PhotoViewer.this.isVisible && PhotoViewer.this.lastInsets != null) {
                        WindowInsets insets = (WindowInsets) PhotoViewer.this.lastInsets;
                        if (PhotoViewer.this.animationInProgress == 1) {
                            PhotoViewer.this.blackPaint.setAlpha((int) (PhotoViewer.this.animatingImageView.getAnimationProgress() * 255.0f));
                        } else if (PhotoViewer.this.animationInProgress == 3) {
                            PhotoViewer.this.blackPaint.setAlpha((int) ((1.0f - PhotoViewer.this.animatingImageView.getAnimationProgress()) * 255.0f));
                        } else {
                            PhotoViewer.this.blackPaint.setAlpha(PhotoViewer.this.backgroundDrawable.getAlpha());
                        }
                        canvas.drawRect(0.0f, (float) getMeasuredHeight(), (float) getMeasuredWidth(), (float) (getMeasuredHeight() + insets.getSystemWindowInsetBottom()), PhotoViewer.this.blackPaint);
                    }
                }

                /* access modifiers changed from: protected */
                public void dispatchDraw(Canvas canvas) {
                    super.dispatchDraw(canvas);
                    if (PhotoViewer.this.parentChatActivity != null) {
                        View undoView = PhotoViewer.this.parentChatActivity.getUndoView();
                        if (undoView.getVisibility() == 0) {
                            canvas.save();
                            View parent = (View) undoView.getParent();
                            canvas.clipRect(parent.getX(), parent.getY(), parent.getX() + ((float) parent.getWidth()), parent.getY() + ((float) parent.getHeight()));
                            canvas.translate(undoView.getX(), undoView.getY());
                            undoView.draw(canvas);
                            canvas.restore();
                            invalidate();
                        }
                    }
                }
            };
            this.windowView = r0;
            r0.setBackgroundDrawable(this.backgroundDrawable);
            this.windowView.setClipChildren(true);
            this.windowView.setFocusable(false);
            ClippingImageView clippingImageView = new ClippingImageView(activity2);
            this.animatingImageView = clippingImageView;
            clippingImageView.setAnimationValues(this.animationValues);
            this.windowView.addView(this.animatingImageView, LayoutHelper.createFrame(40, 40.0f));
            FrameLayoutDrawer frameLayoutDrawer = new FrameLayoutDrawer(activity2);
            this.containerView = frameLayoutDrawer;
            frameLayoutDrawer.setFocusable(false);
            this.windowView.addView(this.containerView, LayoutHelper.createFrame(-1, -1, 51));
            if (Build.VERSION.SDK_INT >= 21) {
                this.containerView.setFitsSystemWindows(true);
                this.containerView.setOnApplyWindowInsetsListener(new PhotoViewer$$ExternalSyntheticLambda67(this));
                this.containerView.setSystemUiVisibility(1792);
            }
            WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams();
            this.windowLayoutParams = layoutParams;
            layoutParams.height = -1;
            this.windowLayoutParams.format = -3;
            this.windowLayoutParams.width = -1;
            this.windowLayoutParams.gravity = 51;
            this.windowLayoutParams.type = 99;
            if (Build.VERSION.SDK_INT >= 28) {
                this.windowLayoutParams.layoutInDisplayCutoutMode = 1;
            }
            if (Build.VERSION.SDK_INT >= 21) {
                this.windowLayoutParams.flags = -NUM;
            } else {
                this.windowLayoutParams.flags = 131072;
            }
            PaintingOverlay paintingOverlay2 = new PaintingOverlay(this.parentActivity);
            this.paintingOverlay = paintingOverlay2;
            this.containerView.addView(paintingOverlay2, LayoutHelper.createFrame(-2, -2.0f));
            AnonymousClass11 r02 = new ActionBar(activity2) {
                public void setAlpha(float alpha) {
                    super.setAlpha(alpha);
                    PhotoViewer.this.containerView.invalidate();
                }
            };
            this.actionBar = r02;
            r02.setOverlayTitleAnimation(true);
            this.actionBar.setTitleColor(-1);
            this.actionBar.setSubtitleColor(-1);
            this.actionBar.setBackgroundColor(NUM);
            this.actionBar.setOccupyStatusBar(isStatusBarVisible());
            this.actionBar.setItemsBackgroundColor(NUM, false);
            this.actionBar.setBackButtonImage(NUM);
            this.actionBar.setTitle(LocaleController.formatString("Of", NUM, 1, 1));
            this.containerView.addView(this.actionBar, LayoutHelper.createFrame(-1, -2.0f));
            this.actionBar.setActionBarMenuOnItemClick(new ActionBar.ActionBarMenuOnItemClick() {
                /* JADX WARNING: Code restructure failed: missing block: B:159:0x04b4, code lost:
                    if (r12.id == org.telegram.messenger.UserConfig.getInstance(org.telegram.ui.PhotoViewer.access$2200(r7.this$0)).getClientUserId()) goto L_0x04b9;
                 */
                /* Code decompiled incorrectly, please refer to instructions dump. */
                public void onItemClick(int r32) {
                    /*
                        r31 = this;
                        r7 = r31
                        r8 = r32
                        r0 = -1
                        r1 = 1
                        java.lang.Integer r2 = java.lang.Integer.valueOf(r1)
                        r3 = 0
                        if (r8 != r0) goto L_0x003a
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        boolean r0 = r0.needCaptionLayout
                        if (r0 == 0) goto L_0x0033
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.Components.PhotoViewerCaptionEnterView r0 = r0.captionEditText
                        boolean r0 = r0.isPopupShowing()
                        if (r0 != 0) goto L_0x002d
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.Components.PhotoViewerCaptionEnterView r0 = r0.captionEditText
                        boolean r0 = r0.isKeyboardVisible()
                        if (r0 == 0) goto L_0x0033
                    L_0x002d:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        r0.closeCaptionEnter(r3)
                        return
                    L_0x0033:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        r0.closePhoto(r1, r3)
                        goto L_0x0be1
                    L_0x003a:
                        r4 = 0
                        r6 = 4
                        r9 = 0
                        if (r8 != r1) goto L_0x0150
                        int r0 = android.os.Build.VERSION.SDK_INT
                        r2 = 23
                        if (r0 < r2) goto L_0x006c
                        int r0 = android.os.Build.VERSION.SDK_INT
                        r2 = 28
                        if (r0 <= r2) goto L_0x0050
                        boolean r0 = org.telegram.messenger.BuildVars.NO_SCOPED_STORAGE
                        if (r0 == 0) goto L_0x006c
                    L_0x0050:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r0 = r0.parentActivity
                        java.lang.String r2 = "android.permission.WRITE_EXTERNAL_STORAGE"
                        int r0 = r0.checkSelfPermission(r2)
                        if (r0 == 0) goto L_0x006c
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r0 = r0.parentActivity
                        java.lang.String[] r1 = new java.lang.String[r1]
                        r1[r3] = r2
                        r0.requestPermissions(r1, r6)
                        return
                    L_0x006c:
                        r0 = 0
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r2 = r2.currentMessageObject
                        if (r2 == 0) goto L_0x00c8
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r2 = r2.currentMessageObject
                        org.telegram.tgnet.TLRPC$Message r2 = r2.messageOwner
                        org.telegram.tgnet.TLRPC$MessageMedia r2 = r2.media
                        boolean r2 = r2 instanceof org.telegram.tgnet.TLRPC.TL_messageMediaWebPage
                        if (r2 == 0) goto L_0x00b0
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r2 = r2.currentMessageObject
                        org.telegram.tgnet.TLRPC$Message r2 = r2.messageOwner
                        org.telegram.tgnet.TLRPC$MessageMedia r2 = r2.media
                        org.telegram.tgnet.TLRPC$WebPage r2 = r2.webpage
                        if (r2 == 0) goto L_0x00b0
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r2 = r2.currentMessageObject
                        org.telegram.tgnet.TLRPC$Message r2 = r2.messageOwner
                        org.telegram.tgnet.TLRPC$MessageMedia r2 = r2.media
                        org.telegram.tgnet.TLRPC$WebPage r2 = r2.webpage
                        org.telegram.tgnet.TLRPC$Document r2 = r2.document
                        if (r2 != 0) goto L_0x00b0
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        int r3 = r2.currentIndex
                        org.telegram.tgnet.TLObject r2 = r2.getFileLocation(r3, r9)
                        java.io.File r0 = org.telegram.messenger.FileLoader.getPathToAttach(r2, r1)
                        goto L_0x00bc
                    L_0x00b0:
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r1 = r1.currentMessageObject
                        org.telegram.tgnet.TLRPC$Message r1 = r1.messageOwner
                        java.io.File r0 = org.telegram.messenger.FileLoader.getPathToMessage(r1)
                    L_0x00bc:
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r1 = r1.currentMessageObject
                        boolean r1 = r1.isVideo()
                        r9 = r1
                        goto L_0x012b
                    L_0x00c8:
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r2 = r2.currentFileLocationVideo
                        if (r2 == 0) goto L_0x00ff
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r2 = r2.currentFileLocationVideo
                        org.telegram.tgnet.TLRPC$FileLocation r2 = org.telegram.ui.PhotoViewer.getFileLocation(r2)
                        org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r6 = r6.currentFileLocationVideo
                        java.lang.String r6 = org.telegram.ui.PhotoViewer.getFileLocationExt(r6)
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        long r9 = r9.avatarsDialogId
                        int r11 = (r9 > r4 ? 1 : (r9 == r4 ? 0 : -1))
                        if (r11 != 0) goto L_0x00f8
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        boolean r4 = r4.isEvent
                        if (r4 == 0) goto L_0x00f7
                        goto L_0x00f8
                    L_0x00f7:
                        r1 = 0
                    L_0x00f8:
                        java.io.File r0 = org.telegram.messenger.FileLoader.getPathToAttach(r2, r6, r1)
                        r1 = 0
                        r9 = r1
                        goto L_0x012b
                    L_0x00ff:
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r1.pageBlocksAdapter
                        if (r1 == 0) goto L_0x0129
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r1.pageBlocksAdapter
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        int r2 = r2.currentIndex
                        java.io.File r0 = r1.getFile(r2)
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r1.pageBlocksAdapter
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        int r2 = r2.currentIndex
                        boolean r1 = r1.isVideo(r2)
                        r9 = r1
                        goto L_0x012b
                    L_0x0129:
                        r1 = 0
                        r9 = r1
                    L_0x012b:
                        if (r0 == 0) goto L_0x0149
                        boolean r1 = r0.exists()
                        if (r1 == 0) goto L_0x0149
                        java.lang.String r1 = r0.toString()
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r2 = r2.parentActivity
                        r4 = 0
                        r5 = 0
                        org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda4 r6 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda4
                        r6.<init>(r7, r9)
                        r3 = r9
                        org.telegram.messenger.MediaController.saveFile(r1, r2, r3, r4, r5, r6)
                        goto L_0x014e
                    L_0x0149:
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        r1.showDownloadAlert()
                    L_0x014e:
                        goto L_0x0be1
                    L_0x0150:
                        r10 = 2
                        if (r8 != r10) goto L_0x01a8
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        long r10 = r0.currentDialogId
                        int r0 = (r10 > r4 ? 1 : (r10 == r4 ? 0 : -1))
                        if (r0 == 0) goto L_0x0be1
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        boolean unused = r0.disableShowCheck = r1
                        android.os.Bundle r0 = new android.os.Bundle
                        r0.<init>()
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        long r4 = r2.currentDialogId
                        java.lang.String r2 = "dialog_id"
                        r0.putLong(r2, r4)
                        org.telegram.ui.Components.MediaActivity r2 = new org.telegram.ui.Components.MediaActivity
                        r2.<init>(r0, r9)
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ChatActivity r4 = r4.parentChatActivity
                        if (r4 == 0) goto L_0x018c
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ChatActivity r4 = r4.parentChatActivity
                        org.telegram.tgnet.TLRPC$ChatFull r4 = r4.getCurrentChatInfo()
                        r2.setChatInfo(r4)
                    L_0x018c:
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        r4.closePhoto(r3, r3)
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r4 = r4.parentActivity
                        boolean r4 = r4 instanceof org.telegram.ui.LaunchActivity
                        if (r4 == 0) goto L_0x01a6
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r4 = r4.parentActivity
                        org.telegram.ui.LaunchActivity r4 = (org.telegram.ui.LaunchActivity) r4
                        r4.presentFragment(r2, r3, r1)
                    L_0x01a6:
                        goto L_0x0be1
                    L_0x01a8:
                        if (r8 != r6) goto L_0x026b
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                        if (r0 != 0) goto L_0x01b3
                        return
                    L_0x01b3:
                        android.os.Bundle r0 = new android.os.Bundle
                        r0.<init>()
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        long r4 = r2.currentDialogId
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r2 = r2.currentMessageObject
                        if (r2 == 0) goto L_0x01d0
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r2 = r2.currentMessageObject
                        long r4 = r2.getDialogId()
                    L_0x01d0:
                        boolean r2 = org.telegram.messenger.DialogObject.isEncryptedDialog(r4)
                        if (r2 == 0) goto L_0x01e0
                        int r2 = org.telegram.messenger.DialogObject.getEncryptedChatId(r4)
                        java.lang.String r6 = "enc_id"
                        r0.putInt(r6, r2)
                        goto L_0x0215
                    L_0x01e0:
                        boolean r2 = org.telegram.messenger.DialogObject.isUserDialog(r4)
                        if (r2 == 0) goto L_0x01ec
                        java.lang.String r2 = "user_id"
                        r0.putLong(r2, r4)
                        goto L_0x0215
                    L_0x01ec:
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        int r2 = r2.currentAccount
                        org.telegram.messenger.MessagesController r2 = org.telegram.messenger.MessagesController.getInstance(r2)
                        long r10 = -r4
                        java.lang.Long r6 = java.lang.Long.valueOf(r10)
                        org.telegram.tgnet.TLRPC$Chat r2 = r2.getChat(r6)
                        if (r2 == 0) goto L_0x020f
                        org.telegram.tgnet.TLRPC$InputChannel r6 = r2.migrated_to
                        if (r6 == 0) goto L_0x020f
                        java.lang.String r6 = "migrated_to"
                        r0.putLong(r6, r4)
                        org.telegram.tgnet.TLRPC$InputChannel r6 = r2.migrated_to
                        long r10 = r6.channel_id
                        long r4 = -r10
                    L_0x020f:
                        long r10 = -r4
                        java.lang.String r6 = "chat_id"
                        r0.putLong(r6, r10)
                    L_0x0215:
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r2 = r2.currentMessageObject
                        int r2 = r2.getId()
                        java.lang.String r6 = "message_id"
                        r0.putInt(r6, r2)
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        int r2 = r2.currentAccount
                        org.telegram.messenger.NotificationCenter r2 = org.telegram.messenger.NotificationCenter.getInstance(r2)
                        int r6 = org.telegram.messenger.NotificationCenter.closeChats
                        java.lang.Object[] r10 = new java.lang.Object[r3]
                        r2.postNotificationName(r6, r10)
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r2 = r2.parentActivity
                        boolean r2 = r2 instanceof org.telegram.ui.LaunchActivity
                        if (r2 == 0) goto L_0x025f
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r2 = r2.parentActivity
                        org.telegram.ui.LaunchActivity r2 = (org.telegram.ui.LaunchActivity) r2
                        int r6 = r2.getMainFragmentsCount()
                        if (r6 > r1) goto L_0x0256
                        boolean r6 = org.telegram.messenger.AndroidUtilities.isTablet()
                        if (r6 == 0) goto L_0x0254
                        goto L_0x0256
                    L_0x0254:
                        r6 = 0
                        goto L_0x0257
                    L_0x0256:
                        r6 = 1
                    L_0x0257:
                        org.telegram.ui.ChatActivity r10 = new org.telegram.ui.ChatActivity
                        r10.<init>(r0)
                        r2.presentFragment(r10, r6, r1)
                    L_0x025f:
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        r1.closePhoto(r3, r3)
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject unused = r1.currentMessageObject = r9
                        goto L_0x0be1
                    L_0x026b:
                        r4 = 3
                        if (r8 != r4) goto L_0x02d7
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                        if (r0 == 0) goto L_0x02d6
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r0 = r0.parentActivity
                        boolean r0 = r0 instanceof org.telegram.ui.LaunchActivity
                        if (r0 != 0) goto L_0x0281
                        goto L_0x02d6
                    L_0x0281:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r0 = r0.parentActivity
                        org.telegram.ui.LaunchActivity r0 = (org.telegram.ui.LaunchActivity) r0
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r2 = r2.currentMessageObject
                        int r2 = r2.currentAccount
                        r0.switchToAccount(r2, r1)
                        android.os.Bundle r0 = new android.os.Bundle
                        r0.<init>()
                        java.lang.String r2 = "onlySelect"
                        r0.putBoolean(r2, r1)
                        java.lang.String r2 = "dialogsType"
                        r0.putInt(r2, r4)
                        org.telegram.ui.DialogsActivity r2 = new org.telegram.ui.DialogsActivity
                        r2.<init>(r0)
                        java.util.ArrayList r4 = new java.util.ArrayList
                        r4.<init>()
                        org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r5 = r5.currentMessageObject
                        r4.add(r5)
                        org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ChatActivity r5 = r5.parentChatActivity
                        org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda6 r6 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda6
                        r6.<init>(r7, r4, r5)
                        r2.setDelegate(r6)
                        org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r6 = r6.parentActivity
                        org.telegram.ui.LaunchActivity r6 = (org.telegram.ui.LaunchActivity) r6
                        r6.presentFragment(r2, r3, r1)
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        r1.closePhoto(r3, r3)
                        goto L_0x0be1
                    L_0x02d6:
                        return
                    L_0x02d7:
                        r5 = 6
                        if (r8 != r5) goto L_0x0600
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r2 = r2.parentActivity
                        if (r2 == 0) goto L_0x05ff
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PhotoViewerProvider r2 = r2.placeProvider
                        if (r2 != 0) goto L_0x02ec
                        goto L_0x05ff
                    L_0x02ec:
                        r2 = 0
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r4 = r4.currentMessageObject
                        if (r4 == 0) goto L_0x0326
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r4 = r4.currentMessageObject
                        boolean r4 = r4.scheduled
                        if (r4 != 0) goto L_0x0326
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r4 = r4.currentMessageObject
                        long r4 = r4.getDialogId()
                        boolean r6 = org.telegram.messenger.DialogObject.isChatDialog(r4)
                        if (r6 == 0) goto L_0x0326
                        org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                        int r6 = r6.currentAccount
                        org.telegram.messenger.MessagesController r6 = org.telegram.messenger.MessagesController.getInstance(r6)
                        long r10 = -r4
                        java.lang.Long r10 = java.lang.Long.valueOf(r10)
                        org.telegram.tgnet.TLRPC$Chat r6 = r6.getChat(r10)
                        boolean r2 = org.telegram.messenger.ChatObject.isChannel(r6)
                    L_0x0326:
                        org.telegram.ui.ActionBar.AlertDialog$Builder r4 = new org.telegram.ui.ActionBar.AlertDialog$Builder
                        org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r5 = r5.parentActivity
                        r4.<init>((android.content.Context) r5)
                        org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PhotoViewerProvider r5 = r5.placeProvider
                        java.lang.String r5 = r5.getDeleteMessageString()
                        r6 = 2131624371(0x7f0e01b3, float:1.887592E38)
                        java.lang.String r10 = "AreYouSureDeletePhotoTitle"
                        if (r5 == 0) goto L_0x034e
                        java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r10, r6)
                        r4.setTitle(r6)
                        r4.setMessage(r5)
                        goto L_0x0413
                    L_0x034e:
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        boolean r11 = r11.isEmbedVideo
                        if (r11 != 0) goto L_0x03e8
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r11 = r11.currentFileLocationVideo
                        if (r11 == 0) goto L_0x036c
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r11 = r11.currentFileLocationVideo
                        org.telegram.ui.PhotoViewer r12 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r12 = r12.currentFileLocation
                        if (r11 != r12) goto L_0x03e8
                    L_0x036c:
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r11 = r11.currentMessageObject
                        if (r11 == 0) goto L_0x0381
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r11 = r11.currentMessageObject
                        boolean r11 = r11.isVideo()
                        if (r11 == 0) goto L_0x0381
                        goto L_0x03e8
                    L_0x0381:
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r11 = r11.currentMessageObject
                        if (r11 == 0) goto L_0x03c1
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r11 = r11.currentMessageObject
                        boolean r11 = r11.isGif()
                        if (r11 == 0) goto L_0x03c1
                        r6 = 2131624368(0x7f0e01b0, float:1.8875914E38)
                        java.lang.String r10 = "AreYouSureDeleteGIFTitle"
                        java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r10, r6)
                        r4.setTitle(r6)
                        if (r2 == 0) goto L_0x03b2
                        r6 = 2131624367(0x7f0e01af, float:1.8875912E38)
                        java.lang.Object[] r10 = new java.lang.Object[r3]
                        java.lang.String r11 = "AreYouSureDeleteGIFEveryone"
                        java.lang.String r6 = org.telegram.messenger.LocaleController.formatString(r11, r6, r10)
                        r4.setMessage(r6)
                        goto L_0x0413
                    L_0x03b2:
                        r6 = 2131624366(0x7f0e01ae, float:1.887591E38)
                        java.lang.Object[] r10 = new java.lang.Object[r3]
                        java.lang.String r11 = "AreYouSureDeleteGIF"
                        java.lang.String r6 = org.telegram.messenger.LocaleController.formatString(r11, r6, r10)
                        r4.setMessage(r6)
                        goto L_0x0413
                    L_0x03c1:
                        java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r10, r6)
                        r4.setTitle(r6)
                        if (r2 == 0) goto L_0x03d9
                        r6 = 2131624370(0x7f0e01b2, float:1.8875918E38)
                        java.lang.Object[] r10 = new java.lang.Object[r3]
                        java.lang.String r11 = "AreYouSureDeletePhotoEveryone"
                        java.lang.String r6 = org.telegram.messenger.LocaleController.formatString(r11, r6, r10)
                        r4.setMessage(r6)
                        goto L_0x0413
                    L_0x03d9:
                        r6 = 2131624369(0x7f0e01b1, float:1.8875916E38)
                        java.lang.Object[] r10 = new java.lang.Object[r3]
                        java.lang.String r11 = "AreYouSureDeletePhoto"
                        java.lang.String r6 = org.telegram.messenger.LocaleController.formatString(r11, r6, r10)
                        r4.setMessage(r6)
                        goto L_0x0413
                    L_0x03e8:
                        r6 = 2131624382(0x7f0e01be, float:1.8875942E38)
                        java.lang.String r10 = "AreYouSureDeleteVideoTitle"
                        java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r10, r6)
                        r4.setTitle(r6)
                        if (r2 == 0) goto L_0x0405
                        r6 = 2131624381(0x7f0e01bd, float:1.887594E38)
                        java.lang.Object[] r10 = new java.lang.Object[r3]
                        java.lang.String r11 = "AreYouSureDeleteVideoEveryone"
                        java.lang.String r6 = org.telegram.messenger.LocaleController.formatString(r11, r6, r10)
                        r4.setMessage(r6)
                        goto L_0x0413
                    L_0x0405:
                        r6 = 2131624380(0x7f0e01bc, float:1.8875938E38)
                        java.lang.Object[] r10 = new java.lang.Object[r3]
                        java.lang.String r11 = "AreYouSureDeleteVideo"
                        java.lang.String r6 = org.telegram.messenger.LocaleController.formatString(r11, r6, r10)
                        r4.setMessage(r6)
                    L_0x0413:
                        boolean[] r6 = new boolean[r1]
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r10 = r10.currentMessageObject
                        if (r10 == 0) goto L_0x05be
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r10 = r10.currentMessageObject
                        boolean r10 = r10.scheduled
                        if (r10 != 0) goto L_0x05be
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r10 = r10.currentMessageObject
                        long r10 = r10.getDialogId()
                        boolean r12 = org.telegram.messenger.DialogObject.isEncryptedDialog(r10)
                        if (r12 != 0) goto L_0x05b7
                        boolean r12 = org.telegram.messenger.DialogObject.isUserDialog(r10)
                        if (r12 == 0) goto L_0x0451
                        org.telegram.ui.PhotoViewer r12 = org.telegram.ui.PhotoViewer.this
                        int r12 = r12.currentAccount
                        org.telegram.messenger.MessagesController r12 = org.telegram.messenger.MessagesController.getInstance(r12)
                        java.lang.Long r13 = java.lang.Long.valueOf(r10)
                        org.telegram.tgnet.TLRPC$User r12 = r12.getUser(r13)
                        r13 = 0
                        goto L_0x0465
                    L_0x0451:
                        r12 = 0
                        org.telegram.ui.PhotoViewer r13 = org.telegram.ui.PhotoViewer.this
                        int r13 = r13.currentAccount
                        org.telegram.messenger.MessagesController r13 = org.telegram.messenger.MessagesController.getInstance(r13)
                        long r14 = -r10
                        java.lang.Long r14 = java.lang.Long.valueOf(r14)
                        org.telegram.tgnet.TLRPC$Chat r13 = r13.getChat(r14)
                    L_0x0465:
                        if (r12 != 0) goto L_0x0474
                        boolean r14 = org.telegram.messenger.ChatObject.isChannel(r13)
                        if (r14 != 0) goto L_0x046e
                        goto L_0x0474
                    L_0x046e:
                        r20 = r2
                        r21 = r5
                        goto L_0x05c2
                    L_0x0474:
                        r14 = 0
                        org.telegram.ui.PhotoViewer r15 = org.telegram.ui.PhotoViewer.this
                        int r15 = r15.currentAccount
                        org.telegram.tgnet.ConnectionsManager r15 = org.telegram.tgnet.ConnectionsManager.getInstance(r15)
                        int r15 = r15.getCurrentTime()
                        if (r12 == 0) goto L_0x0492
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        int r0 = r0.currentAccount
                        org.telegram.messenger.MessagesController r0 = org.telegram.messenger.MessagesController.getInstance(r0)
                        int r0 = r0.revokeTimePmLimit
                        goto L_0x049e
                    L_0x0492:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        int r0 = r0.currentAccount
                        org.telegram.messenger.MessagesController r0 = org.telegram.messenger.MessagesController.getInstance(r0)
                        int r0 = r0.revokeTimeLimit
                    L_0x049e:
                        if (r12 == 0) goto L_0x04b7
                        r16 = r10
                        long r9 = r12.id
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        int r11 = r11.currentAccount
                        org.telegram.messenger.UserConfig r11 = org.telegram.messenger.UserConfig.getInstance(r11)
                        long r18 = r11.getClientUserId()
                        int r11 = (r9 > r18 ? 1 : (r9 == r18 ? 0 : -1))
                        if (r11 != 0) goto L_0x04bb
                        goto L_0x04b9
                    L_0x04b7:
                        r16 = r10
                    L_0x04b9:
                        if (r13 == 0) goto L_0x05b0
                    L_0x04bb:
                        if (r12 == 0) goto L_0x04cd
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        int r9 = r9.currentAccount
                        org.telegram.messenger.MessagesController r9 = org.telegram.messenger.MessagesController.getInstance(r9)
                        boolean r9 = r9.canRevokePmInbox
                        if (r9 == 0) goto L_0x04cd
                        r9 = 1
                        goto L_0x04ce
                    L_0x04cd:
                        r9 = 0
                    L_0x04ce:
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r10 = r10.currentMessageObject
                        org.telegram.tgnet.TLRPC$Message r10 = r10.messageOwner
                        org.telegram.tgnet.TLRPC$MessageAction r10 = r10.action
                        if (r10 == 0) goto L_0x04ef
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r10 = r10.currentMessageObject
                        org.telegram.tgnet.TLRPC$Message r10 = r10.messageOwner
                        org.telegram.tgnet.TLRPC$MessageAction r10 = r10.action
                        boolean r10 = r10 instanceof org.telegram.tgnet.TLRPC.TL_messageActionEmpty
                        if (r10 == 0) goto L_0x04e9
                        goto L_0x04ef
                    L_0x04e9:
                        r20 = r2
                        r21 = r5
                        goto L_0x05c2
                    L_0x04ef:
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r10 = r10.currentMessageObject
                        boolean r10 = r10.isOut()
                        if (r10 != 0) goto L_0x0503
                        if (r9 != 0) goto L_0x0503
                        boolean r10 = org.telegram.messenger.ChatObject.hasAdminRights(r13)
                        if (r10 == 0) goto L_0x04e9
                    L_0x0503:
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r10 = r10.currentMessageObject
                        org.telegram.tgnet.TLRPC$Message r10 = r10.messageOwner
                        int r10 = r10.date
                        int r10 = r15 - r10
                        if (r10 > r0) goto L_0x05a9
                        android.widget.FrameLayout r10 = new android.widget.FrameLayout
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r11 = r11.parentActivity
                        r10.<init>(r11)
                        org.telegram.ui.Cells.CheckBoxCell r11 = new org.telegram.ui.Cells.CheckBoxCell
                        org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r3 = r3.parentActivity
                        r19 = r0
                        org.telegram.ui.ActionBar.Theme$ResourcesProvider r0 = r15
                        r11.<init>(r3, r1, r0)
                        r0 = r11
                        r3 = 0
                        android.graphics.drawable.Drawable r11 = org.telegram.ui.ActionBar.Theme.getSelectorDrawable(r3)
                        r0.setBackgroundDrawable(r11)
                        java.lang.String r11 = ""
                        if (r13 == 0) goto L_0x0549
                        r1 = 2131625225(0x7f0e0509, float:1.8877652E38)
                        r20 = r2
                        java.lang.String r2 = "DeleteForAll"
                        java.lang.String r1 = org.telegram.messenger.LocaleController.getString(r2, r1)
                        r0.setText(r1, r11, r3, r3)
                        r21 = r5
                        goto L_0x0561
                    L_0x0549:
                        r20 = r2
                        r2 = 2131625226(0x7f0e050a, float:1.8877654E38)
                        java.lang.Object[] r1 = new java.lang.Object[r1]
                        java.lang.String r18 = org.telegram.messenger.UserObject.getFirstName(r12)
                        r1[r3] = r18
                        r21 = r5
                        java.lang.String r5 = "DeleteForUser"
                        java.lang.String r1 = org.telegram.messenger.LocaleController.formatString(r5, r2, r1)
                        r0.setText(r1, r11, r3, r3)
                    L_0x0561:
                        boolean r1 = org.telegram.messenger.LocaleController.isRTL
                        r2 = 1098907648(0x41800000, float:16.0)
                        r3 = 1090519040(0x41000000, float:8.0)
                        if (r1 == 0) goto L_0x056e
                        int r1 = org.telegram.messenger.AndroidUtilities.dp(r2)
                        goto L_0x0572
                    L_0x056e:
                        int r1 = org.telegram.messenger.AndroidUtilities.dp(r3)
                    L_0x0572:
                        boolean r5 = org.telegram.messenger.LocaleController.isRTL
                        if (r5 == 0) goto L_0x057b
                        int r2 = org.telegram.messenger.AndroidUtilities.dp(r3)
                        goto L_0x057f
                    L_0x057b:
                        int r2 = org.telegram.messenger.AndroidUtilities.dp(r2)
                    L_0x057f:
                        r3 = 0
                        r0.setPadding(r1, r3, r2, r3)
                        r22 = -1
                        r23 = 1111490560(0x42400000, float:48.0)
                        r24 = 51
                        r25 = 0
                        r26 = 0
                        r27 = 0
                        r28 = 0
                        android.widget.FrameLayout$LayoutParams r1 = org.telegram.ui.Components.LayoutHelper.createFrame(r22, r23, r24, r25, r26, r27, r28)
                        r10.addView(r0, r1)
                        org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda1 r1 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda1
                        r1.<init>(r6)
                        r0.setOnClickListener(r1)
                        r4.setView(r10)
                        r1 = 9
                        r4.setCustomViewOffset(r1)
                        goto L_0x05c2
                    L_0x05a9:
                        r19 = r0
                        r20 = r2
                        r21 = r5
                        goto L_0x05c2
                    L_0x05b0:
                        r19 = r0
                        r20 = r2
                        r21 = r5
                        goto L_0x05c2
                    L_0x05b7:
                        r20 = r2
                        r21 = r5
                        r16 = r10
                        goto L_0x05c2
                    L_0x05be:
                        r20 = r2
                        r21 = r5
                    L_0x05c2:
                        r0 = 2131625188(0x7f0e04e4, float:1.8877577E38)
                        java.lang.String r1 = "Delete"
                        java.lang.String r0 = org.telegram.messenger.LocaleController.getString(r1, r0)
                        org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda0 r1 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda0
                        r1.<init>(r7, r6)
                        r4.setPositiveButton(r0, r1)
                        r0 = 2131624692(0x7f0e02f4, float:1.887657E38)
                        java.lang.String r1 = "Cancel"
                        java.lang.String r0 = org.telegram.messenger.LocaleController.getString(r1, r0)
                        r1 = 0
                        r4.setNegativeButton(r0, r1)
                        org.telegram.ui.ActionBar.AlertDialog r0 = r4.create()
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        r1.showAlertDialog(r4)
                        r1 = -1
                        android.view.View r1 = r0.getButton(r1)
                        android.widget.TextView r1 = (android.widget.TextView) r1
                        if (r1 == 0) goto L_0x05fd
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        java.lang.String r3 = "dialogTextRed2"
                        int r2 = r2.getThemedColor(r3)
                        r1.setTextColor(r2)
                    L_0x05fd:
                        goto L_0x0be1
                    L_0x05ff:
                        return
                    L_0x0600:
                        r0 = 10
                        if (r8 == r0) goto L_0x0bdc
                        r0 = 18
                        if (r8 != r0) goto L_0x060a
                        goto L_0x0bdc
                    L_0x060a:
                        r0 = 19
                        r3 = 1065353216(0x3var_, float:1.0)
                        if (r8 != r0) goto L_0x06b0
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ActionBar.ActionBarMenuItem r0 = r0.menuItemSpeed
                        r2 = 0
                        r0.setVisibility(r2)
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ActionBar.ActionBarMenuItem r0 = r0.menuItemSpeed
                        r0.toggleSubMenu()
                        r0 = 0
                    L_0x0624:
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ActionBar.ActionBarMenuSubItem[] r2 = r2.speedItems
                        int r2 = r2.length
                        if (r0 >= r2) goto L_0x06ae
                        r2 = 981668463(0x3a83126f, float:0.001)
                        if (r0 != 0) goto L_0x0643
                        org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                        float r5 = r5.currentVideoSpeed
                        r9 = 1048576000(0x3e800000, float:0.25)
                        float r5 = r5 - r9
                        float r5 = java.lang.Math.abs(r5)
                        int r5 = (r5 > r2 ? 1 : (r5 == r2 ? 0 : -1))
                        if (r5 < 0) goto L_0x068d
                    L_0x0643:
                        if (r0 != r1) goto L_0x0656
                        org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                        float r5 = r5.currentVideoSpeed
                        r9 = 1056964608(0x3var_, float:0.5)
                        float r5 = r5 - r9
                        float r5 = java.lang.Math.abs(r5)
                        int r5 = (r5 > r2 ? 1 : (r5 == r2 ? 0 : -1))
                        if (r5 < 0) goto L_0x068d
                    L_0x0656:
                        if (r0 != r10) goto L_0x0667
                        org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                        float r5 = r5.currentVideoSpeed
                        float r5 = r5 - r3
                        float r5 = java.lang.Math.abs(r5)
                        int r5 = (r5 > r2 ? 1 : (r5 == r2 ? 0 : -1))
                        if (r5 < 0) goto L_0x068d
                    L_0x0667:
                        if (r0 != r4) goto L_0x067a
                        org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                        float r5 = r5.currentVideoSpeed
                        r9 = 1069547520(0x3fCLASSNAME, float:1.5)
                        float r5 = r5 - r9
                        float r5 = java.lang.Math.abs(r5)
                        int r5 = (r5 > r2 ? 1 : (r5 == r2 ? 0 : -1))
                        if (r5 < 0) goto L_0x068d
                    L_0x067a:
                        if (r0 != r6) goto L_0x069c
                        org.telegram.ui.PhotoViewer r5 = org.telegram.ui.PhotoViewer.this
                        float r5 = r5.currentVideoSpeed
                        r9 = 1073741824(0x40000000, float:2.0)
                        float r5 = r5 - r9
                        float r5 = java.lang.Math.abs(r5)
                        int r2 = (r5 > r2 ? 1 : (r5 == r2 ? 0 : -1))
                        if (r2 >= 0) goto L_0x069c
                    L_0x068d:
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ActionBar.ActionBarMenuSubItem[] r2 = r2.speedItems
                        r2 = r2[r0]
                        r5 = -9718023(0xffffffffff6bb6f9, float:-3.1331863E38)
                        r2.setColors(r5, r5)
                        goto L_0x06aa
                    L_0x069c:
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ActionBar.ActionBarMenuSubItem[] r2 = r2.speedItems
                        r2 = r2[r0]
                        r5 = -328966(0xfffffffffffafafa, float:NaN)
                        r2.setColors(r5, r5)
                    L_0x06aa:
                        int r0 = r0 + 1
                        goto L_0x0624
                    L_0x06ae:
                        goto L_0x0be1
                    L_0x06b0:
                        r0 = 11
                        if (r8 != r0) goto L_0x073a
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        boolean r0 = r0.isEmbedVideo     // Catch:{ Exception -> 0x0734 }
                        if (r0 == 0) goto L_0x06da
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        android.app.Activity r0 = r0.parentActivity     // Catch:{ Exception -> 0x0734 }
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        org.telegram.messenger.MessageObject r1 = r1.currentMessageObject     // Catch:{ Exception -> 0x0734 }
                        org.telegram.tgnet.TLRPC$Message r1 = r1.messageOwner     // Catch:{ Exception -> 0x0734 }
                        org.telegram.tgnet.TLRPC$MessageMedia r1 = r1.media     // Catch:{ Exception -> 0x0734 }
                        org.telegram.tgnet.TLRPC$WebPage r1 = r1.webpage     // Catch:{ Exception -> 0x0734 }
                        java.lang.String r1 = r1.url     // Catch:{ Exception -> 0x0734 }
                        org.telegram.messenger.browser.Browser.openUrl((android.content.Context) r0, (java.lang.String) r1)     // Catch:{ Exception -> 0x0734 }
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        r1 = 0
                        r0.closePhoto(r1, r1)     // Catch:{ Exception -> 0x0734 }
                        goto L_0x0738
                    L_0x06da:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject     // Catch:{ Exception -> 0x0734 }
                        if (r0 == 0) goto L_0x0703
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject     // Catch:{ Exception -> 0x0734 }
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        android.app.Activity r1 = r1.parentActivity     // Catch:{ Exception -> 0x0734 }
                        org.telegram.ui.ActionBar.Theme$ResourcesProvider r2 = r15     // Catch:{ Exception -> 0x0734 }
                        boolean r0 = org.telegram.messenger.AndroidUtilities.openForView((org.telegram.messenger.MessageObject) r0, (android.app.Activity) r1, (org.telegram.ui.ActionBar.Theme.ResourcesProvider) r2)     // Catch:{ Exception -> 0x0734 }
                        if (r0 == 0) goto L_0x06fd
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        r1 = 0
                        r0.closePhoto(r1, r1)     // Catch:{ Exception -> 0x0734 }
                        goto L_0x0738
                    L_0x06fd:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        r0.showDownloadAlert()     // Catch:{ Exception -> 0x0734 }
                        goto L_0x0738
                    L_0x0703:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r0.pageBlocksAdapter     // Catch:{ Exception -> 0x0734 }
                        if (r0 == 0) goto L_0x0738
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r0.pageBlocksAdapter     // Catch:{ Exception -> 0x0734 }
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        int r1 = r1.currentIndex     // Catch:{ Exception -> 0x0734 }
                        org.telegram.tgnet.TLObject r0 = r0.getMedia(r1)     // Catch:{ Exception -> 0x0734 }
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        android.app.Activity r1 = r1.parentActivity     // Catch:{ Exception -> 0x0734 }
                        boolean r0 = org.telegram.messenger.AndroidUtilities.openForView(r0, r1)     // Catch:{ Exception -> 0x0734 }
                        if (r0 == 0) goto L_0x072e
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        r1 = 0
                        r0.closePhoto(r1, r1)     // Catch:{ Exception -> 0x0734 }
                        goto L_0x0738
                    L_0x072e:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this     // Catch:{ Exception -> 0x0734 }
                        r0.showDownloadAlert()     // Catch:{ Exception -> 0x0734 }
                        goto L_0x0738
                    L_0x0734:
                        r0 = move-exception
                        org.telegram.messenger.FileLog.e((java.lang.Throwable) r0)
                    L_0x0738:
                        goto L_0x0be1
                    L_0x073a:
                        r0 = 13
                        if (r8 == r0) goto L_0x0b6e
                        r0 = 15
                        if (r8 != r0) goto L_0x0744
                        goto L_0x0b6e
                    L_0x0744:
                        r0 = 5
                        if (r8 != r0) goto L_0x07c6
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ActionBar.ActionBarMenuItem r0 = r0.pipItem
                        float r0 = r0.getAlpha()
                        int r0 = (r0 > r3 ? 1 : (r0 == r3 ? 0 : -1))
                        if (r0 == 0) goto L_0x0756
                        return
                    L_0x0756:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        boolean r0 = r0.isEmbedVideo
                        if (r0 == 0) goto L_0x07be
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.Components.PhotoViewerWebView r2 = r0.photoViewerWebView
                        org.telegram.ui.Components.PipVideoView r2 = r2.openInPip()
                        org.telegram.ui.Components.PipVideoView unused = r0.pipVideoView = r2
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.Components.PipVideoView r0 = r0.pipVideoView
                        if (r0 == 0) goto L_0x0be1
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.PipInstance
                        if (r0 == 0) goto L_0x0780
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.PipInstance
                        r0.destroyPhotoViewer()
                    L_0x0780:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        boolean unused = r0.isInline = r1
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.Instance
                        org.telegram.ui.PhotoViewer unused = org.telegram.ui.PhotoViewer.PipInstance = r0
                        r0 = 0
                        org.telegram.ui.PhotoViewer unused = org.telegram.ui.PhotoViewer.Instance = r0
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        r2 = 0
                        boolean unused = r0.isVisible = r2
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PlaceProviderObject r0 = r0.currentPlaceObject
                        if (r0 == 0) goto L_0x07b7
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PlaceProviderObject r0 = r0.currentPlaceObject
                        org.telegram.messenger.ImageReceiver r0 = r0.imageReceiver
                        boolean r0 = r0.getVisible()
                        if (r0 != 0) goto L_0x07b7
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PlaceProviderObject r0 = r0.currentPlaceObject
                        org.telegram.messenger.ImageReceiver r0 = r0.imageReceiver
                        r0.setVisible(r1, r1)
                    L_0x07b7:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        r0.dismissInternal()
                        goto L_0x0be1
                    L_0x07be:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        r1 = 0
                        r0.switchToPip(r1)
                        goto L_0x0be1
                    L_0x07c6:
                        r0 = 0
                        r3 = 7
                        if (r8 != r3) goto L_0x0804
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                        if (r0 != 0) goto L_0x07d3
                        return
                    L_0x07d3:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        int r0 = r0.currentAccount
                        org.telegram.messenger.FileLoader r0 = org.telegram.messenger.FileLoader.getInstance(r0)
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r1 = r1.currentMessageObject
                        org.telegram.tgnet.TLRPC$Document r1 = r1.getDocument()
                        r0.cancelLoadFile((org.telegram.tgnet.TLRPC.Document) r1)
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        r1 = 0
                        r0.releasePlayer(r1)
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        android.widget.FrameLayout r0 = r0.bottomLayout
                        r0.setTag(r2)
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        android.widget.FrameLayout r0 = r0.bottomLayout
                        r0.setVisibility(r1)
                        goto L_0x0be1
                    L_0x0804:
                        r3 = 14
                        if (r8 != r3) goto L_0x08ae
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                        r1 = 1000(0x3e8, double:4.94E-321)
                        if (r0 == 0) goto L_0x0861
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                        org.telegram.tgnet.TLRPC$Document r0 = r0.getDocument()
                        org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ChatActivity r3 = r3.parentChatActivity
                        if (r3 == 0) goto L_0x083a
                        org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ChatActivity r3 = r3.parentChatActivity
                        org.telegram.ui.Components.ChatActivityEnterView r3 = r3.chatActivityEnterView
                        if (r3 == 0) goto L_0x083a
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.ChatActivity r1 = r1.parentChatActivity
                        org.telegram.ui.Components.ChatActivityEnterView r1 = r1.chatActivityEnterView
                        r1.addRecentGif(r0)
                        goto L_0x084d
                    L_0x083a:
                        org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                        int r3 = r3.currentAccount
                        org.telegram.messenger.MediaDataController r3 = org.telegram.messenger.MediaDataController.getInstance(r3)
                        long r4 = java.lang.System.currentTimeMillis()
                        long r4 = r4 / r1
                        int r1 = (int) r4
                        r3.addRecentGif(r0, r1)
                    L_0x084d:
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        int r1 = r1.currentAccount
                        org.telegram.messenger.MessagesController r1 = org.telegram.messenger.MessagesController.getInstance(r1)
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r2 = r2.currentMessageObject
                        r1.saveGif(r2, r0)
                        goto L_0x08ac
                    L_0x0861:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r0.pageBlocksAdapter
                        if (r0 == 0) goto L_0x08ac
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PageBlocksAdapter r0 = r0.pageBlocksAdapter
                        org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                        int r3 = r3.currentIndex
                        org.telegram.tgnet.TLObject r0 = r0.getMedia(r3)
                        boolean r3 = r0 instanceof org.telegram.tgnet.TLRPC.Document
                        if (r3 == 0) goto L_0x08aa
                        r3 = r0
                        org.telegram.tgnet.TLRPC$Document r3 = (org.telegram.tgnet.TLRPC.Document) r3
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        int r4 = r4.currentAccount
                        org.telegram.messenger.MediaDataController r4 = org.telegram.messenger.MediaDataController.getInstance(r4)
                        long r5 = java.lang.System.currentTimeMillis()
                        long r5 = r5 / r1
                        int r1 = (int) r5
                        r4.addRecentGif(r3, r1)
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        int r1 = r1.currentAccount
                        org.telegram.messenger.MessagesController r1 = org.telegram.messenger.MessagesController.getInstance(r1)
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PageBlocksAdapter r2 = r2.pageBlocksAdapter
                        java.lang.Object r2 = r2.getParentObject()
                        r1.saveGif(r2, r3)
                    L_0x08aa:
                        goto L_0x0be1
                    L_0x08ac:
                        goto L_0x0be1
                    L_0x08ae:
                        r3 = 16
                        if (r8 != r3) goto L_0x0b12
                        org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r3 = r3.avatarsArr
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        int r4 = r4.currentIndex
                        java.lang.Object r3 = r3.get(r4)
                        org.telegram.tgnet.TLRPC$Photo r3 = (org.telegram.tgnet.TLRPC.Photo) r3
                        if (r3 == 0) goto L_0x0b11
                        java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r4 = r3.sizes
                        boolean r4 = r4.isEmpty()
                        if (r4 == 0) goto L_0x08d0
                        goto L_0x0b11
                    L_0x08d0:
                        java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r4 = r3.sizes
                        r5 = 800(0x320, float:1.121E-42)
                        org.telegram.tgnet.TLRPC$PhotoSize r4 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r4, r5)
                        java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r5 = r3.sizes
                        r6 = 90
                        org.telegram.tgnet.TLRPC$PhotoSize r5 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r5, r6)
                        org.telegram.ui.PhotoViewer r6 = org.telegram.ui.PhotoViewer.this
                        int r6 = r6.currentAccount
                        org.telegram.messenger.UserConfig r6 = org.telegram.messenger.UserConfig.getInstance(r6)
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        long r9 = r9.avatarsDialogId
                        long r11 = r6.clientUserId
                        int r13 = (r9 > r11 ? 1 : (r9 == r11 ? 0 : -1))
                        if (r13 != 0) goto L_0x096e
                        org.telegram.tgnet.TLRPC$TL_photos_updateProfilePhoto r9 = new org.telegram.tgnet.TLRPC$TL_photos_updateProfilePhoto
                        r9.<init>()
                        org.telegram.tgnet.TLRPC$TL_inputPhoto r10 = new org.telegram.tgnet.TLRPC$TL_inputPhoto
                        r10.<init>()
                        r9.id = r10
                        org.telegram.tgnet.TLRPC$InputPhoto r10 = r9.id
                        long r11 = r3.id
                        r10.id = r11
                        org.telegram.tgnet.TLRPC$InputPhoto r10 = r9.id
                        long r11 = r3.access_hash
                        r10.access_hash = r11
                        org.telegram.tgnet.TLRPC$InputPhoto r10 = r9.id
                        byte[] r11 = r3.file_reference
                        r10.file_reference = r11
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        int r10 = r10.currentAccount
                        org.telegram.tgnet.ConnectionsManager r10 = org.telegram.tgnet.ConnectionsManager.getInstance(r10)
                        org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda5 r11 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda5
                        r11.<init>(r7, r6, r3)
                        r10.sendRequest(r9, r11)
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        int r10 = r10.currentAccount
                        org.telegram.messenger.MessagesController r10 = org.telegram.messenger.MessagesController.getInstance(r10)
                        long r11 = r6.clientUserId
                        java.lang.Long r11 = java.lang.Long.valueOf(r11)
                        org.telegram.tgnet.TLRPC$User r10 = r10.getUser(r11)
                        if (r10 == 0) goto L_0x096c
                        org.telegram.tgnet.TLRPC$UserProfilePhoto r11 = r10.photo
                        long r12 = r3.id
                        r11.photo_id = r12
                        org.telegram.tgnet.TLRPC$UserProfilePhoto r11 = r10.photo
                        int r12 = r3.dc_id
                        r11.dc_id = r12
                        org.telegram.tgnet.TLRPC$UserProfilePhoto r11 = r10.photo
                        org.telegram.tgnet.TLRPC$FileLocation r12 = r5.location
                        r11.photo_small = r12
                        org.telegram.tgnet.TLRPC$UserProfilePhoto r11 = r10.photo
                        org.telegram.tgnet.TLRPC$FileLocation r12 = r4.location
                        r11.photo_big = r12
                        r6.setCurrentUser(r10)
                        r6.saveConfig(r1)
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        int r1 = r1.currentAccount
                        org.telegram.messenger.NotificationCenter r1 = org.telegram.messenger.NotificationCenter.getInstance(r1)
                        int r11 = org.telegram.messenger.NotificationCenter.mainUserInfoChanged
                        r12 = 0
                        java.lang.Object[] r13 = new java.lang.Object[r12]
                        r1.postNotificationName(r11, r13)
                    L_0x096c:
                        goto L_0x09fa
                    L_0x096e:
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        int r9 = r9.currentAccount
                        org.telegram.messenger.MessagesController r9 = org.telegram.messenger.MessagesController.getInstance(r9)
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        long r10 = r10.avatarsDialogId
                        long r10 = -r10
                        java.lang.Long r10 = java.lang.Long.valueOf(r10)
                        org.telegram.tgnet.TLRPC$Chat r9 = r9.getChat(r10)
                        if (r9 != 0) goto L_0x098a
                        return
                    L_0x098a:
                        org.telegram.tgnet.TLRPC$TL_inputChatPhoto r10 = new org.telegram.tgnet.TLRPC$TL_inputChatPhoto
                        r10.<init>()
                        org.telegram.tgnet.TLRPC$TL_inputPhoto r11 = new org.telegram.tgnet.TLRPC$TL_inputPhoto
                        r11.<init>()
                        r10.id = r11
                        org.telegram.tgnet.TLRPC$InputPhoto r11 = r10.id
                        long r12 = r3.id
                        r11.id = r12
                        org.telegram.tgnet.TLRPC$InputPhoto r11 = r10.id
                        long r12 = r3.access_hash
                        r11.access_hash = r12
                        org.telegram.tgnet.TLRPC$InputPhoto r11 = r10.id
                        byte[] r12 = r3.file_reference
                        r11.file_reference = r12
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        int r11 = r11.currentAccount
                        org.telegram.messenger.MessagesController r19 = org.telegram.messenger.MessagesController.getInstance(r11)
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        long r11 = r11.avatarsDialogId
                        long r11 = -r11
                        r23 = 0
                        r24 = 0
                        r25 = 0
                        r27 = 0
                        r28 = 0
                        r29 = 0
                        r30 = 0
                        r20 = r11
                        r22 = r10
                        r19.changeChatAvatar(r20, r22, r23, r24, r25, r27, r28, r29, r30)
                        org.telegram.tgnet.TLRPC$ChatPhoto r11 = r9.photo
                        int r12 = r3.dc_id
                        r11.dc_id = r12
                        org.telegram.tgnet.TLRPC$ChatPhoto r11 = r9.photo
                        org.telegram.tgnet.TLRPC$FileLocation r12 = r5.location
                        r11.photo_small = r12
                        org.telegram.tgnet.TLRPC$ChatPhoto r11 = r9.photo
                        org.telegram.tgnet.TLRPC$FileLocation r12 = r4.location
                        r11.photo_big = r12
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        int r11 = r11.currentAccount
                        org.telegram.messenger.NotificationCenter r11 = org.telegram.messenger.NotificationCenter.getInstance(r11)
                        int r12 = org.telegram.messenger.NotificationCenter.updateInterfaces
                        java.lang.Object[] r1 = new java.lang.Object[r1]
                        int r13 = org.telegram.messenger.MessagesController.UPDATE_MASK_AVATAR
                        java.lang.Integer r13 = java.lang.Integer.valueOf(r13)
                        r14 = 0
                        r1[r14] = r13
                        r11.postNotificationName(r12, r1)
                    L_0x09fa:
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r9 = org.telegram.messenger.ImageLocation.getForPhoto((org.telegram.tgnet.TLRPC.PhotoSize) r4, (org.telegram.tgnet.TLRPC.Photo) r3)
                        org.telegram.messenger.ImageLocation unused = r1.currentAvatarLocation = r9
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r1 = r1.avatarsArr
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        int r9 = r9.currentIndex
                        r1.remove(r9)
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r1 = r1.avatarsArr
                        r9 = 0
                        r1.add(r9, r3)
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r1 = r1.imagesArrLocations
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        int r9 = r9.currentIndex
                        java.lang.Object r1 = r1.get(r9)
                        org.telegram.messenger.ImageLocation r1 = (org.telegram.messenger.ImageLocation) r1
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r9 = r9.imagesArrLocations
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        int r10 = r10.currentIndex
                        r9.remove(r10)
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r9 = r9.imagesArrLocations
                        r10 = 0
                        r9.add(r10, r1)
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r9 = r9.imagesArrLocationsVideo
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        int r10 = r10.currentIndex
                        java.lang.Object r9 = r9.get(r10)
                        r1 = r9
                        org.telegram.messenger.ImageLocation r1 = (org.telegram.messenger.ImageLocation) r1
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r9 = r9.imagesArrLocationsVideo
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        int r10 = r10.currentIndex
                        r9.remove(r10)
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r9 = r9.imagesArrLocationsVideo
                        r10 = 0
                        r9.add(r10, r1)
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r9 = r9.imagesArrLocationsSizes
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        int r10 = r10.currentIndex
                        java.lang.Object r9 = r9.get(r10)
                        java.lang.Integer r9 = (java.lang.Integer) r9
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r10 = r10.imagesArrLocationsSizes
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        int r11 = r11.currentIndex
                        r10.remove(r11)
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r10 = r10.imagesArrLocationsSizes
                        r11 = 0
                        r10.add(r11, r9)
                        org.telegram.ui.PhotoViewer r10 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r10 = r10.imagesArrMessages
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        int r11 = r11.currentIndex
                        java.lang.Object r10 = r10.get(r11)
                        org.telegram.tgnet.TLRPC$Message r10 = (org.telegram.tgnet.TLRPC.Message) r10
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r11 = r11.imagesArrMessages
                        org.telegram.ui.PhotoViewer r12 = org.telegram.ui.PhotoViewer.this
                        int r12 = r12.currentIndex
                        r11.remove(r12)
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        java.util.ArrayList r11 = r11.imagesArrMessages
                        r12 = 0
                        r11.add(r12, r10)
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        r13 = -1
                        int unused = r11.currentIndex = r13
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        r11.setImageIndex(r12)
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.Components.GroupedPhotosListView r11 = r11.groupedPhotosListView
                        r11.clear()
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.Components.GroupedPhotosListView r11 = r11.groupedPhotosListView
                        r11.fillList()
                        org.telegram.ui.PhotoViewer r11 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.Components.UndoView r11 = r11.hintView
                        org.telegram.ui.PhotoViewer r12 = org.telegram.ui.PhotoViewer.this
                        long r12 = r12.avatarsDialogId
                        r14 = 22
                        org.telegram.ui.PhotoViewer r15 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r15 = r15.currentFileLocationVideo
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r0 = r0.currentFileLocation
                        if (r15 != r0) goto L_0x0b03
                        r2 = 0
                    L_0x0b03:
                        r11.showWithAction((long) r12, (int) r14, (java.lang.Object) r2)
                        org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda2 r0 = new org.telegram.ui.PhotoViewer$12$$ExternalSyntheticLambda2
                        r0.<init>(r7)
                        r11 = 300(0x12c, double:1.48E-321)
                        org.telegram.messenger.AndroidUtilities.runOnUIThread(r0, r11)
                        goto L_0x0b6c
                    L_0x0b11:
                        return
                    L_0x0b12:
                        r12 = 0
                        r0 = 17
                        if (r8 != r0) goto L_0x0b6c
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r0 = r0.currentFileLocationVideo
                        org.telegram.tgnet.TLRPC$FileLocation r0 = org.telegram.ui.PhotoViewer.getFileLocation(r0)
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r2 = r2.currentFileLocationVideo
                        java.lang.String r2 = org.telegram.ui.PhotoViewer.getFileLocationExt(r2)
                        java.io.File r0 = org.telegram.messenger.FileLoader.getPathToAttach(r0, r2, r1)
                        org.telegram.ui.PhotoViewer r2 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r2 = r2.currentFileLocationVideo
                        int r2 = r2.imageType
                        if (r2 != r10) goto L_0x0b3b
                        r3 = 1
                        goto L_0x0b3c
                    L_0x0b3b:
                        r3 = 0
                    L_0x0b3c:
                        r2 = r3
                        if (r2 == 0) goto L_0x0b5c
                        org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r3 = r3.currentFileLocation
                        org.telegram.tgnet.TLRPC$FileLocation r3 = org.telegram.ui.PhotoViewer.getFileLocation(r3)
                        org.telegram.ui.PhotoViewer r4 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.ImageLocation r4 = r4.currentFileLocation
                        java.lang.String r4 = org.telegram.ui.PhotoViewer.getFileLocationExt(r4)
                        java.io.File r1 = org.telegram.messenger.FileLoader.getPathToAttach(r3, r4, r1)
                        java.lang.String r1 = r1.getAbsolutePath()
                        goto L_0x0b5d
                    L_0x0b5c:
                        r1 = 0
                    L_0x0b5d:
                        org.telegram.ui.PhotoViewer r3 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$PhotoViewerProvider r3 = r3.placeProvider
                        java.lang.String r4 = r0.getAbsolutePath()
                        r3.openPhotoForEdit(r4, r1, r2)
                        goto L_0x0be1
                    L_0x0b6c:
                        goto L_0x0be1
                    L_0x0b6e:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r0 = r0.parentActivity
                        if (r0 == 0) goto L_0x0bdb
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                        if (r0 != 0) goto L_0x0b7f
                        goto L_0x0bdb
                    L_0x0b7f:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                        org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner
                        org.telegram.tgnet.TLRPC$MessageMedia r0 = r0.media
                        boolean r0 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageMediaPhoto
                        if (r0 == 0) goto L_0x0b9a
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                        org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner
                        org.telegram.tgnet.TLRPC$MessageMedia r0 = r0.media
                        org.telegram.tgnet.TLRPC$Photo r0 = r0.photo
                        goto L_0x0bb4
                    L_0x0b9a:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                        org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner
                        org.telegram.tgnet.TLRPC$MessageMedia r0 = r0.media
                        boolean r0 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageMediaDocument
                        if (r0 == 0) goto L_0x0bda
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r0 = r0.currentMessageObject
                        org.telegram.tgnet.TLRPC$Message r0 = r0.messageOwner
                        org.telegram.tgnet.TLRPC$MessageMedia r0 = r0.media
                        org.telegram.tgnet.TLRPC$Document r0 = r0.document
                    L_0x0bb4:
                        org.telegram.ui.PhotoViewer r9 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.PhotoViewer$12$1 r10 = new org.telegram.ui.PhotoViewer$12$1
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        android.app.Activity r3 = r1.parentActivity
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        org.telegram.messenger.MessageObject r4 = r1.currentMessageObject
                        org.telegram.ui.ActionBar.Theme$ResourcesProvider r6 = r15
                        r1 = r10
                        r2 = r31
                        r5 = r0
                        r1.<init>(r3, r4, r5, r6)
                        org.telegram.ui.Components.StickersAlert unused = r9.masksAlert = r10
                        org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                        org.telegram.ui.Components.StickersAlert r1 = r1.masksAlert
                        r1.show()
                        goto L_0x0be1
                    L_0x0bda:
                        return
                    L_0x0bdb:
                        return
                    L_0x0bdc:
                        org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                        r0.onSharePressed()
                    L_0x0be1:
                        return
                    */
                    throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.AnonymousClass12.onItemClick(int):void");
                }

                /* renamed from: lambda$onItemClick$0$org-telegram-ui-PhotoViewer$12  reason: not valid java name */
                public /* synthetic */ void m3616lambda$onItemClick$0$orgtelegramuiPhotoViewer$12(boolean isVideo) {
                    BulletinFactory.createSaveToGalleryBulletin(PhotoViewer.this.containerView, isVideo, -NUM, -1).show();
                }

                /* renamed from: lambda$onItemClick$1$org-telegram-ui-PhotoViewer$12  reason: not valid java name */
                public /* synthetic */ void m3617lambda$onItemClick$1$orgtelegramuiPhotoViewer$12(ArrayList fmessages, ChatActivity parentChatActivityFinal, DialogsActivity fragment1, ArrayList dids, CharSequence message, boolean param) {
                    ArrayList arrayList = dids;
                    if (dids.size() > 1 || ((Long) arrayList.get(0)).longValue() == UserConfig.getInstance(PhotoViewer.this.currentAccount).getClientUserId()) {
                        ArrayList arrayList2 = fmessages;
                    } else if (message != null) {
                        ArrayList arrayList3 = fmessages;
                    } else {
                        long did = ((Long) arrayList.get(0)).longValue();
                        Bundle args1 = new Bundle();
                        args1.putBoolean("scrollToTopOnResume", true);
                        if (DialogObject.isEncryptedDialog(did)) {
                            args1.putInt("enc_id", DialogObject.getEncryptedChatId(did));
                        } else if (DialogObject.isUserDialog(did)) {
                            args1.putLong("user_id", did);
                        } else {
                            args1.putLong("chat_id", -did);
                        }
                        NotificationCenter.getInstance(PhotoViewer.this.currentAccount).postNotificationName(NotificationCenter.closeChats, new Object[0]);
                        ChatActivity chatActivity = new ChatActivity(args1);
                        if (((LaunchActivity) PhotoViewer.this.parentActivity).presentFragment(chatActivity, true, false)) {
                            chatActivity.showFieldPanelForForward(true, fmessages);
                            return;
                        }
                        ArrayList arrayList4 = fmessages;
                        fragment1.finishFragment();
                        return;
                    }
                    int a = 0;
                    while (a < dids.size()) {
                        long did2 = ((Long) arrayList.get(a)).longValue();
                        if (message != null) {
                            SendMessagesHelper.getInstance(PhotoViewer.this.currentAccount).sendMessage(message.toString(), did2, (MessageObject) null, (MessageObject) null, (TLRPC.WebPage) null, true, (ArrayList<TLRPC.MessageEntity>) null, (TLRPC.ReplyMarkup) null, (HashMap<String, String>) null, true, 0, (MessageObject.SendAnimationData) null);
                        }
                        SendMessagesHelper.getInstance(PhotoViewer.this.currentAccount).sendMessage((ArrayList<MessageObject>) fmessages, did2, false, false, true, 0);
                        a++;
                        ArrayList arrayList5 = fmessages;
                    }
                    fragment1.finishFragment();
                    if (parentChatActivityFinal == null) {
                        return;
                    }
                    if (dids.size() == 1) {
                        parentChatActivityFinal.getUndoView().showWithAction(((Long) arrayList.get(0)).longValue(), 53, (Object) Integer.valueOf(fmessages.size()));
                    } else {
                        parentChatActivityFinal.getUndoView().showWithAction(0, 53, (Object) Integer.valueOf(fmessages.size()), (Object) Integer.valueOf(dids.size()), (Runnable) null, (Runnable) null);
                    }
                }

                static /* synthetic */ void lambda$onItemClick$2(boolean[] deleteForAll, View v) {
                    deleteForAll[0] = !deleteForAll[0];
                    ((CheckBoxCell) v).setChecked(deleteForAll[0], true);
                }

                /* renamed from: lambda$onItemClick$3$org-telegram-ui-PhotoViewer$12  reason: not valid java name */
                public /* synthetic */ void m3618lambda$onItemClick$3$orgtelegramuiPhotoViewer$12(boolean[] deleteForAll, DialogInterface dialogInterface, int i) {
                    TLRPC.EncryptedChat encryptedChat;
                    ArrayList<Long> random_ids;
                    if (!PhotoViewer.this.imagesArr.isEmpty()) {
                        if (PhotoViewer.this.currentIndex >= 0 && PhotoViewer.this.currentIndex < PhotoViewer.this.imagesArr.size()) {
                            MessageObject obj = (MessageObject) PhotoViewer.this.imagesArr.get(PhotoViewer.this.currentIndex);
                            if (obj.isSent()) {
                                PhotoViewer.this.closePhoto(false, false);
                                ArrayList<Integer> arr = new ArrayList<>();
                                if (PhotoViewer.this.slideshowMessageId != 0) {
                                    arr.add(Integer.valueOf(PhotoViewer.this.slideshowMessageId));
                                } else {
                                    arr.add(Integer.valueOf(obj.getId()));
                                }
                                if (!DialogObject.isEncryptedDialog(obj.getDialogId()) || obj.messageOwner.random_id == 0) {
                                    random_ids = null;
                                    encryptedChat = null;
                                } else {
                                    ArrayList<Long> random_ids2 = new ArrayList<>();
                                    random_ids2.add(Long.valueOf(obj.messageOwner.random_id));
                                    random_ids = random_ids2;
                                    encryptedChat = MessagesController.getInstance(PhotoViewer.this.currentAccount).getEncryptedChat(Integer.valueOf(DialogObject.getEncryptedChatId(obj.getDialogId())));
                                }
                                MessagesController.getInstance(PhotoViewer.this.currentAccount).deleteMessages(arr, random_ids, encryptedChat, obj.getDialogId(), deleteForAll[0], obj.scheduled);
                            }
                        }
                    } else if (!PhotoViewer.this.avatarsArr.isEmpty()) {
                        if (PhotoViewer.this.currentIndex >= 0 && PhotoViewer.this.currentIndex < PhotoViewer.this.avatarsArr.size()) {
                            TLRPC.Message message = (TLRPC.Message) PhotoViewer.this.imagesArrMessages.get(PhotoViewer.this.currentIndex);
                            if (message != null) {
                                ArrayList<Integer> arr2 = new ArrayList<>();
                                arr2.add(Integer.valueOf(message.id));
                                MessagesController.getInstance(PhotoViewer.this.currentAccount).deleteMessages(arr2, (ArrayList<Long>) null, (TLRPC.EncryptedChat) null, MessageObject.getDialogId(message), true, false);
                                NotificationCenter.getInstance(PhotoViewer.this.currentAccount).postNotificationName(NotificationCenter.reloadDialogPhotos, new Object[0]);
                            }
                            if (PhotoViewer.this.isCurrentAvatarSet()) {
                                if (PhotoViewer.this.avatarsDialogId > 0) {
                                    MessagesController.getInstance(PhotoViewer.this.currentAccount).deleteUserPhoto((TLRPC.InputPhoto) null);
                                } else {
                                    MessagesController.getInstance(PhotoViewer.this.currentAccount).changeChatAvatar(-PhotoViewer.this.avatarsDialogId, (TLRPC.TL_inputChatPhoto) null, (TLRPC.InputFile) null, (TLRPC.InputFile) null, 0.0d, (String) null, (TLRPC.FileLocation) null, (TLRPC.FileLocation) null, (Runnable) null);
                                }
                                PhotoViewer.this.closePhoto(false, false);
                                return;
                            }
                            TLRPC.Photo photo = (TLRPC.Photo) PhotoViewer.this.avatarsArr.get(PhotoViewer.this.currentIndex);
                            if (photo != null) {
                                TLRPC.TL_inputPhoto inputPhoto = new TLRPC.TL_inputPhoto();
                                inputPhoto.id = photo.id;
                                inputPhoto.access_hash = photo.access_hash;
                                inputPhoto.file_reference = photo.file_reference;
                                if (inputPhoto.file_reference == null) {
                                    inputPhoto.file_reference = new byte[0];
                                }
                                if (PhotoViewer.this.avatarsDialogId > 0) {
                                    MessagesController.getInstance(PhotoViewer.this.currentAccount).deleteUserPhoto(inputPhoto);
                                }
                                MessagesStorage.getInstance(PhotoViewer.this.currentAccount).clearUserPhoto(PhotoViewer.this.avatarsDialogId, photo.id);
                                PhotoViewer.this.imagesArrLocations.remove(PhotoViewer.this.currentIndex);
                                PhotoViewer.this.imagesArrLocationsSizes.remove(PhotoViewer.this.currentIndex);
                                PhotoViewer.this.imagesArrLocationsVideo.remove(PhotoViewer.this.currentIndex);
                                PhotoViewer.this.imagesArrMessages.remove(PhotoViewer.this.currentIndex);
                                PhotoViewer.this.avatarsArr.remove(PhotoViewer.this.currentIndex);
                                if (PhotoViewer.this.imagesArrLocations.isEmpty()) {
                                    PhotoViewer.this.closePhoto(false, false);
                                } else {
                                    int index = PhotoViewer.this.currentIndex;
                                    if (index >= PhotoViewer.this.avatarsArr.size()) {
                                        index = PhotoViewer.this.avatarsArr.size() - 1;
                                    }
                                    int unused = PhotoViewer.this.currentIndex = -1;
                                    PhotoViewer.this.setImageIndex(index);
                                }
                                if (message == null) {
                                    NotificationCenter.getInstance(PhotoViewer.this.currentAccount).postNotificationName(NotificationCenter.reloadDialogPhotos, new Object[0]);
                                }
                            }
                        }
                    } else if (!PhotoViewer.this.secureDocuments.isEmpty() && PhotoViewer.this.placeProvider != null) {
                        PhotoViewer.this.secureDocuments.remove(PhotoViewer.this.currentIndex);
                        PhotoViewer.this.placeProvider.deleteImageAtIndex(PhotoViewer.this.currentIndex);
                        if (PhotoViewer.this.secureDocuments.isEmpty()) {
                            PhotoViewer.this.closePhoto(false, false);
                            return;
                        }
                        int index2 = PhotoViewer.this.currentIndex;
                        if (index2 >= PhotoViewer.this.secureDocuments.size()) {
                            index2 = PhotoViewer.this.secureDocuments.size() - 1;
                        }
                        int unused2 = PhotoViewer.this.currentIndex = -1;
                        PhotoViewer.this.setImageIndex(index2);
                    }
                }

                /* renamed from: lambda$onItemClick$5$org-telegram-ui-PhotoViewer$12  reason: not valid java name */
                public /* synthetic */ void m3620lambda$onItemClick$5$orgtelegramuiPhotoViewer$12(UserConfig userConfig, TLRPC.Photo photo, TLObject response, TLRPC.TL_error error) {
                    AndroidUtilities.runOnUIThread(new PhotoViewer$12$$ExternalSyntheticLambda3(this, response, userConfig, photo));
                }

                /* renamed from: lambda$onItemClick$4$org-telegram-ui-PhotoViewer$12  reason: not valid java name */
                public /* synthetic */ void m3619lambda$onItemClick$4$orgtelegramuiPhotoViewer$12(TLObject response, UserConfig userConfig, TLRPC.Photo photo) {
                    if (response instanceof TLRPC.TL_photos_photo) {
                        TLRPC.TL_photos_photo photos_photo = (TLRPC.TL_photos_photo) response;
                        MessagesController.getInstance(PhotoViewer.this.currentAccount).putUsers(photos_photo.users, false);
                        TLRPC.User user = MessagesController.getInstance(PhotoViewer.this.currentAccount).getUser(Long.valueOf(userConfig.clientUserId));
                        if (photos_photo.photo instanceof TLRPC.TL_photo) {
                            int idx = PhotoViewer.this.avatarsArr.indexOf(photo);
                            if (idx >= 0) {
                                PhotoViewer.this.avatarsArr.set(idx, photos_photo.photo);
                            }
                            if (user != null) {
                                user.photo.photo_id = photos_photo.photo.id;
                                userConfig.setCurrentUser(user);
                                userConfig.saveConfig(true);
                            }
                        }
                    }
                }

                /* renamed from: lambda$onItemClick$6$org-telegram-ui-PhotoViewer$12  reason: not valid java name */
                public /* synthetic */ void m3621lambda$onItemClick$6$orgtelegramuiPhotoViewer$12() {
                    if (PhotoViewer.this.menuItem != null) {
                        PhotoViewer.this.menuItem.hideSubItem(16);
                    }
                }

                public boolean canOpenMenu() {
                    PhotoViewer.this.menuItemSpeed.setVisibility(4);
                    boolean z = true;
                    if (PhotoViewer.this.currentMessageObject != null || PhotoViewer.this.currentSecureDocument != null) {
                        return true;
                    }
                    if (PhotoViewer.this.currentFileLocationVideo != null) {
                        TLRPC.FileLocation fileLocation = PhotoViewer.getFileLocation(PhotoViewer.this.currentFileLocationVideo);
                        String fileLocationExt = PhotoViewer.getFileLocationExt(PhotoViewer.this.currentFileLocationVideo);
                        if (PhotoViewer.this.avatarsDialogId == 0 && !PhotoViewer.this.isEvent) {
                            z = false;
                        }
                        return FileLoader.getPathToAttach(fileLocation, fileLocationExt, z).exists();
                    } else if (PhotoViewer.this.pageBlocksAdapter != null) {
                        return true;
                    } else {
                        return false;
                    }
                }
            });
            ActionBarMenu menu = this.actionBar.createMenu();
            ActionBarMenuItem addItem = menu.addItem(13, NUM);
            this.masksItem = addItem;
            addItem.setContentDescription(LocaleController.getString("Masks", NUM));
            ActionBarMenuItem addItem2 = menu.addItem(5, NUM);
            this.pipItem = addItem2;
            addItem2.setContentDescription(LocaleController.getString("AccDescrPipMode", NUM));
            ActionBarMenuItem addItem3 = menu.addItem(3, NUM);
            this.sendItem = addItem3;
            addItem3.setContentDescription(LocaleController.getString("Forward", NUM));
            ActionBarMenuItem addItem4 = menu.addItem(18, NUM);
            this.shareItem = addItem4;
            addItem4.setContentDescription(LocaleController.getString("ShareFile", NUM));
            this.menuItem = menu.addItem(0, NUM);
            String str2 = "ShareFile";
            ActionBarMenu actionBarMenu = menu;
            ActionBarMenuItem actionBarMenuItem = r0;
            ActionBarMenuItem actionBarMenuItem2 = new ActionBarMenuItem((Context) this.parentActivity, (ActionBarMenu) null, 0, 0, resourcesProvider2);
            this.menuItemSpeed = actionBarMenuItem;
            actionBarMenuItem.setDelegate(new PhotoViewer$$ExternalSyntheticLambda57(this));
            this.menuItem.addView(this.menuItemSpeed);
            this.menuItemSpeed.setVisibility(4);
            ActionBarMenuSubItem addSubItem = this.menuItem.addSubItem(19, NUM, (Drawable) null, LocaleController.getString("Speed", NUM), true, false);
            this.speedItem = addSubItem;
            addSubItem.setSubtext(LocaleController.getString("SpeedNormal", NUM));
            this.speedItem.setItemHeight(56);
            this.speedItem.setTag(NUM, 240);
            this.speedItem.setColors(-328966, -328966);
            this.speedItem.setRightIcon(NUM);
            this.speedGap = this.menuItem.addGap(20);
            this.menuItem.getPopupLayout().setFitItems(true);
            this.speedItems[0] = this.menuItemSpeed.addSubItem(21, NUM, (CharSequence) LocaleController.getString("SpeedVerySlow", NUM)).setColors(-328966, -328966);
            this.speedItems[1] = this.menuItemSpeed.addSubItem(22, NUM, (CharSequence) LocaleController.getString("SpeedSlow", NUM)).setColors(-328966, -328966);
            this.speedItems[2] = this.menuItemSpeed.addSubItem(23, NUM, (CharSequence) LocaleController.getString("SpeedNormal", NUM)).setColors(-328966, -328966);
            this.speedItems[3] = this.menuItemSpeed.addSubItem(24, NUM, (CharSequence) LocaleController.getString("SpeedFast", NUM)).setColors(-328966, -328966);
            this.speedItems[4] = this.menuItemSpeed.addSubItem(25, NUM, (CharSequence) LocaleController.getString("SpeedVeryFast", NUM)).setColors(-328966, -328966);
            this.menuItem.addSubItem(11, NUM, (CharSequence) LocaleController.getString("OpenInExternalApp", NUM)).setColors(-328966, -328966);
            this.menuItem.setContentDescription(LocaleController.getString("AccDescrMoreOptions", NUM));
            ActionBarMenuSubItem addSubItem2 = this.menuItem.addSubItem(2, NUM, (CharSequence) LocaleController.getString("ShowAllMedia", NUM));
            this.allMediaItem = addSubItem2;
            addSubItem2.setColors(-328966, -328966);
            this.menuItem.addSubItem(14, NUM, (CharSequence) LocaleController.getString("SaveToGIFs", NUM)).setColors(-328966, -328966);
            this.menuItem.addSubItem(4, NUM, (CharSequence) LocaleController.getString("ShowInChat", NUM)).setColors(-328966, -328966);
            this.menuItem.addSubItem(15, NUM, (CharSequence) LocaleController.getString("ShowStickers", NUM)).setColors(-328966, -328966);
            this.menuItem.addSubItem(10, NUM, (CharSequence) LocaleController.getString(str2, NUM)).setColors(-328966, -328966);
            this.menuItem.addSubItem(1, NUM, (CharSequence) LocaleController.getString("SaveToGallery", NUM)).setColors(-328966, -328966);
            this.menuItem.addSubItem(16, NUM, (CharSequence) LocaleController.getString("SetAsMain", NUM)).setColors(-328966, -328966);
            this.menuItem.addSubItem(6, NUM, (CharSequence) LocaleController.getString("Delete", NUM)).setColors(-328966, -328966);
            this.menuItem.addSubItem(7, NUM, (CharSequence) LocaleController.getString("StopDownload", NUM)).setColors(-328966, -328966);
            this.menuItem.redrawPopup(-NUM);
            this.menuItemSpeed.redrawPopup(-NUM);
            setMenuItemIcon();
            this.menuItem.setSubMenuDelegate(new ActionBarMenuItem.ActionBarSubMenuItemDelegate() {
                public void onShowSubMenu() {
                    if (PhotoViewer.this.videoPlayerControlVisible && PhotoViewer.this.isPlaying) {
                        AndroidUtilities.cancelRunOnUIThread(PhotoViewer.this.hideActionBarRunnable);
                    }
                }

                public void onHideSubMenu() {
                    if (PhotoViewer.this.videoPlayerControlVisible && PhotoViewer.this.isPlaying) {
                        PhotoViewer.this.scheduleActionBarHide();
                    }
                }
            });
            AnonymousClass14 r03 = new FrameLayout(this.activityContext) {
                /* access modifiers changed from: protected */
                public void measureChildWithMargins(View child, int parentWidthMeasureSpec, int widthUsed, int parentHeightMeasureSpec, int heightUsed) {
                    if (child == PhotoViewer.this.nameTextView || child == PhotoViewer.this.dateTextView) {
                        widthUsed = PhotoViewer.this.bottomButtonsLayout.getMeasuredWidth();
                    }
                    super.measureChildWithMargins(child, parentWidthMeasureSpec, widthUsed, parentHeightMeasureSpec, heightUsed);
                }
            };
            this.bottomLayout = r03;
            r03.setBackgroundColor(NUM);
            this.containerView.addView(this.bottomLayout, LayoutHelper.createFrame(-1, 48, 83));
            this.pressedDrawable[0] = new GradientDrawable(GradientDrawable.Orientation.LEFT_RIGHT, new int[]{NUM, 0});
            this.pressedDrawable[0].setShape(0);
            this.pressedDrawable[1] = new GradientDrawable(GradientDrawable.Orientation.RIGHT_LEFT, new int[]{NUM, 0});
            this.pressedDrawable[1].setShape(0);
            GroupedPhotosListView groupedPhotosListView2 = new GroupedPhotosListView(this.activityContext, AndroidUtilities.dp(10.0f));
            this.groupedPhotosListView = groupedPhotosListView2;
            this.containerView.addView(groupedPhotosListView2, LayoutHelper.createFrame(-1, 68, 83));
            this.groupedPhotosListView.setDelegate(new GroupedPhotosListView.GroupedPhotosListViewDelegate() {
                public int getCurrentIndex() {
                    return PhotoViewer.this.currentIndex;
                }

                public int getCurrentAccount() {
                    return PhotoViewer.this.currentAccount;
                }

                public long getAvatarsDialogId() {
                    return PhotoViewer.this.avatarsDialogId;
                }

                public int getSlideshowMessageId() {
                    return PhotoViewer.this.slideshowMessageId;
                }

                public ArrayList<ImageLocation> getImagesArrLocations() {
                    return PhotoViewer.this.imagesArrLocations;
                }

                public ArrayList<MessageObject> getImagesArr() {
                    return PhotoViewer.this.imagesArr;
                }

                public List<TLRPC.PageBlock> getPageBlockArr() {
                    if (PhotoViewer.this.pageBlocksAdapter != null) {
                        return PhotoViewer.this.pageBlocksAdapter.getAll();
                    }
                    return null;
                }

                public Object getParentObject() {
                    if (PhotoViewer.this.pageBlocksAdapter != null) {
                        return PhotoViewer.this.pageBlocksAdapter.getParentObject();
                    }
                    return null;
                }

                public void setCurrentIndex(int index) {
                    int unused = PhotoViewer.this.currentIndex = -1;
                    if (PhotoViewer.this.currentThumb != null) {
                        PhotoViewer.this.currentThumb.release();
                        ImageReceiver.BitmapHolder unused2 = PhotoViewer.this.currentThumb = null;
                    }
                    boolean unused3 = PhotoViewer.this.dontAutoPlay = true;
                    PhotoViewer.this.setImageIndex(index);
                    boolean unused4 = PhotoViewer.this.dontAutoPlay = false;
                }

                public void onShowAnimationStart() {
                    PhotoViewer.this.containerView.requestLayout();
                }

                public void onStopScrolling() {
                    PhotoViewer photoViewer = PhotoViewer.this;
                    if (photoViewer.shouldMessageObjectAutoPlayed(photoViewer.currentMessageObject)) {
                        boolean unused = PhotoViewer.this.playerAutoStarted = true;
                        PhotoViewer.this.onActionClick(true);
                        PhotoViewer.this.checkProgress(0, false, true);
                    }
                }

                public boolean validGroupId(long groupId) {
                    if (PhotoViewer.this.placeProvider != null) {
                        return PhotoViewer.this.placeProvider.validateGroupId(groupId);
                    }
                    return true;
                }
            });
            for (int a = 0; a < 3; a++) {
                this.fullscreenButton[a] = new ImageView(this.parentActivity);
                this.fullscreenButton[a].setImageResource(NUM);
                this.fullscreenButton[a].setContentDescription(LocaleController.getString("AccSwitchToFullscreen", NUM));
                this.fullscreenButton[a].setScaleType(ImageView.ScaleType.CENTER);
                this.fullscreenButton[a].setBackground(Theme.createSelectorDrawable(NUM));
                this.fullscreenButton[a].setVisibility(4);
                this.fullscreenButton[a].setAlpha(1.0f);
                this.containerView.addView(this.fullscreenButton[a], LayoutHelper.createFrame(48, 48.0f));
                this.fullscreenButton[a].setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda18(this));
            }
            CaptionLinkMovementMethod captionLinkMovementMethod = new CaptionLinkMovementMethod();
            CaptionTextViewSwitcher captionTextViewSwitcher2 = new CaptionTextViewSwitcher(this.containerView.getContext());
            this.captionTextViewSwitcher = captionTextViewSwitcher2;
            captionTextViewSwitcher2.setFactory(new PhotoViewer$$ExternalSyntheticLambda35(this, captionLinkMovementMethod));
            this.captionTextViewSwitcher.setVisibility(4);
            setCaptionHwLayerEnabled(true);
            for (int a2 = 0; a2 < 3; a2++) {
                this.photoProgressViews[a2] = new PhotoProgressView(this.containerView) {
                    /* access modifiers changed from: protected */
                    public void onBackgroundStateUpdated(int state) {
                        if (this == PhotoViewer.this.photoProgressViews[0]) {
                            PhotoViewer.this.updateAccessibilityOverlayVisibility();
                        }
                    }

                    /* access modifiers changed from: protected */
                    public void onVisibilityChanged(boolean visible) {
                        if (this == PhotoViewer.this.photoProgressViews[0]) {
                            PhotoViewer.this.updateAccessibilityOverlayVisibility();
                        }
                    }
                };
                this.photoProgressViews[a2].setBackgroundState(0, false, true);
            }
            AnonymousClass17 r04 = new RadialProgressView(this.activityContext, resourcesProvider3) {
                public void setAlpha(float alpha) {
                    super.setAlpha(alpha);
                    if (PhotoViewer.this.containerView != null) {
                        PhotoViewer.this.containerView.invalidate();
                    }
                }

                public void invalidate() {
                    super.invalidate();
                    if (PhotoViewer.this.containerView != null) {
                        PhotoViewer.this.containerView.invalidate();
                    }
                }
            };
            this.miniProgressView = r04;
            r04.setUseSelfAlpha(true);
            this.miniProgressView.setProgressColor(-1);
            this.miniProgressView.setSize(AndroidUtilities.dp(54.0f));
            this.miniProgressView.setBackgroundResource(NUM);
            this.miniProgressView.setVisibility(4);
            this.miniProgressView.setAlpha(0.0f);
            this.containerView.addView(this.miniProgressView, LayoutHelper.createFrame(64, 64, 17));
            LinearLayout linearLayout = new LinearLayout(this.containerView.getContext());
            this.bottomButtonsLayout = linearLayout;
            linearLayout.setOrientation(0);
            this.bottomLayout.addView(this.bottomButtonsLayout, LayoutHelper.createFrame(-2, -1, 53));
            ImageView imageView = new ImageView(this.containerView.getContext());
            this.paintButton = imageView;
            imageView.setImageResource(NUM);
            this.paintButton.setScaleType(ImageView.ScaleType.CENTER);
            this.paintButton.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
            this.bottomButtonsLayout.addView(this.paintButton, LayoutHelper.createFrame(50, -1.0f));
            this.paintButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda19(this));
            this.paintButton.setContentDescription(LocaleController.getString("AccDescrPhotoEditor", NUM));
            ImageView imageView2 = new ImageView(this.containerView.getContext());
            this.shareButton = imageView2;
            imageView2.setImageResource(NUM);
            this.shareButton.setScaleType(ImageView.ScaleType.CENTER);
            this.shareButton.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
            this.bottomButtonsLayout.addView(this.shareButton, LayoutHelper.createFrame(50, -1.0f));
            this.shareButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda20(this));
            this.shareButton.setContentDescription(LocaleController.getString(str2, NUM));
            AnonymousClass18 r05 = new FadingTextViewLayout(this.containerView.getContext()) {
                /* access modifiers changed from: protected */
                public void onTextViewCreated(TextView textView) {
                    super.onTextViewCreated(textView);
                    textView.setTextSize(1, 14.0f);
                    textView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
                    textView.setEllipsize(TextUtils.TruncateAt.END);
                    textView.setTextColor(-1);
                    textView.setGravity(3);
                }
            };
            this.nameTextView = r05;
            this.bottomLayout.addView(r05, LayoutHelper.createFrame(-1, -2.0f, 51, 16.0f, 5.0f, 8.0f, 0.0f));
            AnonymousClass19 r06 = new FadingTextViewLayout(this.containerView.getContext(), true) {
                private LocaleController.LocaleInfo lastLocaleInfo = null;
                private int staticCharsCount = 0;

                /* access modifiers changed from: protected */
                public void onTextViewCreated(TextView textView) {
                    super.onTextViewCreated(textView);
                    textView.setTextSize(1, 13.0f);
                    textView.setEllipsize(TextUtils.TruncateAt.END);
                    textView.setTextColor(-1);
                    textView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
                    textView.setGravity(3);
                }

                /* access modifiers changed from: protected */
                public int getStaticCharsCount() {
                    LocaleController.LocaleInfo localeInfo = LocaleController.getInstance().getCurrentLocaleInfo();
                    if (this.lastLocaleInfo != localeInfo) {
                        this.lastLocaleInfo = localeInfo;
                        this.staticCharsCount = LocaleController.formatString("formatDateAtTime", NUM, LocaleController.getInstance().formatterYear.format(new Date()), LocaleController.getInstance().formatterDay.format(new Date())).length();
                    }
                    return this.staticCharsCount;
                }

                public void setText(CharSequence text, boolean animated) {
                    int staticCharsCount2;
                    if (animated) {
                        boolean dontAnimateUnchangedStaticChars = true;
                        if (LocaleController.isRTL && (staticCharsCount2 = getStaticCharsCount()) > 0 && !(text.length() == staticCharsCount2 && getText() != null && getText().length() == staticCharsCount2)) {
                            dontAnimateUnchangedStaticChars = false;
                        }
                        setText(text, true, dontAnimateUnchangedStaticChars);
                        return;
                    }
                    setText(text, false, false);
                }
            };
            this.dateTextView = r06;
            this.bottomLayout.addView(r06, LayoutHelper.createFrame(-1, -2.0f, 51, 16.0f, 25.0f, 8.0f, 0.0f));
            createVideoControlsInterface();
            RadialProgressView radialProgressView = new RadialProgressView(this.parentActivity, resourcesProvider3);
            this.progressView = radialProgressView;
            radialProgressView.setProgressColor(-1);
            this.progressView.setBackgroundResource(NUM);
            this.progressView.setVisibility(4);
            this.containerView.addView(this.progressView, LayoutHelper.createFrame(54, 54, 17));
            PickerBottomLayoutViewer pickerBottomLayoutViewer = new PickerBottomLayoutViewer(this.parentActivity);
            this.qualityPicker = pickerBottomLayoutViewer;
            pickerBottomLayoutViewer.setBackgroundColor(NUM);
            this.qualityPicker.updateSelectedCount(0, false);
            this.qualityPicker.setTranslationY((float) AndroidUtilities.dp(120.0f));
            this.qualityPicker.doneButton.setText(LocaleController.getString("Done", NUM).toUpperCase());
            this.qualityPicker.doneButton.setTextColor(getThemedColor("dialogFloatingButton"));
            this.containerView.addView(this.qualityPicker, LayoutHelper.createFrame(-1, 48, 83));
            this.qualityPicker.cancelButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda21(this));
            this.qualityPicker.doneButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda23(this));
            VideoForwardDrawable videoForwardDrawable2 = new VideoForwardDrawable(false);
            this.videoForwardDrawable = videoForwardDrawable2;
            videoForwardDrawable2.setDelegate(new VideoForwardDrawable.VideoForwardDrawableDelegate() {
                public void onAnimationEnd() {
                }

                public void invalidate() {
                    PhotoViewer.this.containerView.invalidate();
                }
            });
            QualityChooseView qualityChooseView2 = new QualityChooseView(this.parentActivity);
            this.qualityChooseView = qualityChooseView2;
            qualityChooseView2.setTranslationY((float) AndroidUtilities.dp(120.0f));
            this.qualityChooseView.setVisibility(4);
            this.qualityChooseView.setBackgroundColor(NUM);
            this.containerView.addView(this.qualityChooseView, LayoutHelper.createFrame(-1, 70.0f, 83, 0.0f, 0.0f, 0.0f, 48.0f));
            AnonymousClass21 r07 = new FrameLayout(this.activityContext) {
                public boolean dispatchTouchEvent(MotionEvent ev) {
                    return PhotoViewer.this.bottomTouchEnabled && super.dispatchTouchEvent(ev);
                }

                public boolean onInterceptTouchEvent(MotionEvent ev) {
                    return PhotoViewer.this.bottomTouchEnabled && super.onInterceptTouchEvent(ev);
                }

                public boolean onTouchEvent(MotionEvent event) {
                    return PhotoViewer.this.bottomTouchEnabled && super.onTouchEvent(event);
                }

                public void setTranslationY(float translationY) {
                    super.setTranslationY(translationY);
                    if (!(PhotoViewer.this.videoTimelineView == null || PhotoViewer.this.videoTimelineView.getVisibility() == 8)) {
                        PhotoViewer.this.videoTimelineView.setTranslationY(translationY);
                        PhotoViewer.this.videoAvatarTooltip.setTranslationY(translationY);
                    }
                    if (PhotoViewer.this.videoAvatarTooltip != null && PhotoViewer.this.videoAvatarTooltip.getVisibility() != 8) {
                        PhotoViewer.this.videoAvatarTooltip.setTranslationY(translationY);
                    }
                }

                public void setAlpha(float alpha) {
                    super.setAlpha(alpha);
                    if (PhotoViewer.this.videoTimelineView != null && PhotoViewer.this.videoTimelineView.getVisibility() != 8) {
                        PhotoViewer.this.videoTimelineView.setAlpha(alpha);
                    }
                }

                public void setVisibility(int visibility) {
                    super.setVisibility(visibility);
                    if (PhotoViewer.this.videoTimelineView != null && PhotoViewer.this.videoTimelineView.getVisibility() != 8) {
                        PhotoViewer.this.videoTimelineView.setVisibility(visibility == 0 ? 0 : 4);
                    }
                }

                /* access modifiers changed from: protected */
                public void onLayout(boolean changed, int left, int top, int right, int bottom) {
                    super.onLayout(changed, left, top, right, bottom);
                    if (PhotoViewer.this.itemsLayout.getVisibility() != 8) {
                        int x = (((right - left) - AndroidUtilities.dp(70.0f)) - PhotoViewer.this.itemsLayout.getMeasuredWidth()) / 2;
                        PhotoViewer.this.itemsLayout.layout(x, PhotoViewer.this.itemsLayout.getTop(), PhotoViewer.this.itemsLayout.getMeasuredWidth() + x, PhotoViewer.this.itemsLayout.getTop() + PhotoViewer.this.itemsLayout.getMeasuredHeight());
                    }
                }
            };
            this.pickerView = r07;
            r07.setBackgroundColor(NUM);
            this.containerView.addView(this.pickerView, LayoutHelper.createFrame(-1, -2, 83));
            TextView textView = new TextView(this.containerView.getContext());
            this.docNameTextView = textView;
            textView.setTextSize(1, 15.0f);
            this.docNameTextView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            this.docNameTextView.setSingleLine(true);
            this.docNameTextView.setMaxLines(1);
            this.docNameTextView.setEllipsize(TextUtils.TruncateAt.END);
            this.docNameTextView.setTextColor(-1);
            this.docNameTextView.setGravity(3);
            this.pickerView.addView(this.docNameTextView, LayoutHelper.createFrame(-1, -2.0f, 51, 20.0f, 23.0f, 84.0f, 0.0f));
            TextView textView2 = new TextView(this.containerView.getContext());
            this.docInfoTextView = textView2;
            textView2.setTextSize(1, 14.0f);
            this.docInfoTextView.setSingleLine(true);
            this.docInfoTextView.setMaxLines(1);
            this.docInfoTextView.setEllipsize(TextUtils.TruncateAt.END);
            this.docInfoTextView.setTextColor(-1);
            this.docInfoTextView.setGravity(3);
            this.pickerView.addView(this.docInfoTextView, LayoutHelper.createFrame(-1, -2.0f, 51, 20.0f, 46.0f, 84.0f, 0.0f));
            AnonymousClass22 r08 = new VideoTimelinePlayView(this.parentActivity) {
                public void setTranslationY(float translationY) {
                    if (getTranslationY() != translationY) {
                        super.setTranslationY(translationY);
                        PhotoViewer.this.containerView.invalidate();
                    }
                }
            };
            this.videoTimelineView = r08;
            r08.setDelegate(new VideoTimelinePlayView.VideoTimelineViewDelegate() {
                private int seekTo;
                private Runnable seekToRunnable;
                private boolean wasPlaying;

                public void onLeftProgressChanged(float progress) {
                    if (PhotoViewer.this.videoPlayer != null) {
                        if (PhotoViewer.this.videoPlayer.isPlaying()) {
                            boolean unused = PhotoViewer.this.manuallyPaused = false;
                            PhotoViewer.this.videoPlayer.pause();
                            PhotoViewer.this.containerView.invalidate();
                        }
                        updateAvatarStartTime(1);
                        seekTo(progress);
                        PhotoViewer.this.videoPlayerSeekbar.setProgress(0.0f);
                        PhotoViewer.this.videoTimelineView.setProgress(progress);
                        PhotoViewer.this.updateVideoInfo();
                    }
                }

                public void onRightProgressChanged(float progress) {
                    if (PhotoViewer.this.videoPlayer != null) {
                        if (PhotoViewer.this.videoPlayer.isPlaying()) {
                            boolean unused = PhotoViewer.this.manuallyPaused = false;
                            PhotoViewer.this.videoPlayer.pause();
                            PhotoViewer.this.containerView.invalidate();
                        }
                        updateAvatarStartTime(2);
                        seekTo(progress);
                        PhotoViewer.this.videoPlayerSeekbar.setProgress(1.0f);
                        PhotoViewer.this.videoTimelineView.setProgress(progress);
                        PhotoViewer.this.updateVideoInfo();
                    }
                }

                public void onPlayProgressChanged(float progress) {
                    if (PhotoViewer.this.videoPlayer != null) {
                        if (PhotoViewer.this.sendPhotoType == 1) {
                            updateAvatarStartTime(0);
                        }
                        seekTo(progress);
                    }
                }

                private void seekTo(float progress) {
                    this.seekTo = (int) (PhotoViewer.this.videoDuration * progress);
                    if (this.seekToRunnable == null) {
                        PhotoViewer$23$$ExternalSyntheticLambda0 photoViewer$23$$ExternalSyntheticLambda0 = new PhotoViewer$23$$ExternalSyntheticLambda0(this);
                        this.seekToRunnable = photoViewer$23$$ExternalSyntheticLambda0;
                        AndroidUtilities.runOnUIThread(photoViewer$23$$ExternalSyntheticLambda0, 100);
                    }
                }

                /* renamed from: lambda$seekTo$0$org-telegram-ui-PhotoViewer$23  reason: not valid java name */
                public /* synthetic */ void m3622lambda$seekTo$0$orgtelegramuiPhotoViewer$23() {
                    if (PhotoViewer.this.videoPlayer != null) {
                        PhotoViewer.this.videoPlayer.seekTo((long) this.seekTo);
                    }
                    if (PhotoViewer.this.sendPhotoType == 1) {
                        long unused = PhotoViewer.this.needCaptureFrameReadyAtTime = (long) this.seekTo;
                        if (PhotoViewer.this.captureFrameReadyAtTime != PhotoViewer.this.needCaptureFrameReadyAtTime) {
                            long unused2 = PhotoViewer.this.captureFrameReadyAtTime = -1;
                        }
                    }
                    this.seekToRunnable = null;
                }

                private void updateAvatarStartTime(int fix) {
                    if (PhotoViewer.this.sendPhotoType == 1) {
                        if (fix == 0) {
                            PhotoViewer photoViewer = PhotoViewer.this;
                            float unused = photoViewer.avatarStartProgress = photoViewer.videoTimelineView.getProgress();
                            PhotoViewer photoViewer2 = PhotoViewer.this;
                            long unused2 = photoViewer2.avatarStartTime = (long) (photoViewer2.videoDuration * 1000.0f * PhotoViewer.this.avatarStartProgress);
                        } else if (PhotoViewer.this.photoCropView == null) {
                        } else {
                            if (PhotoViewer.this.videoTimelineView.getLeftProgress() > PhotoViewer.this.avatarStartProgress || PhotoViewer.this.videoTimelineView.getRightProgress() < PhotoViewer.this.avatarStartProgress) {
                                PhotoViewer.this.photoCropView.setVideoThumbVisible(false);
                                if (fix == 1) {
                                    PhotoViewer photoViewer3 = PhotoViewer.this;
                                    long unused3 = photoViewer3.avatarStartTime = (long) (photoViewer3.videoDuration * 1000.0f * PhotoViewer.this.videoTimelineView.getLeftProgress());
                                } else {
                                    PhotoViewer photoViewer4 = PhotoViewer.this;
                                    long unused4 = photoViewer4.avatarStartTime = (long) (photoViewer4.videoDuration * 1000.0f * PhotoViewer.this.videoTimelineView.getRightProgress());
                                }
                                long unused5 = PhotoViewer.this.captureFrameAtTime = -1;
                            }
                        }
                    }
                }

                public void didStartDragging(int type) {
                    if (type == VideoTimelinePlayView.TYPE_PROGRESS) {
                        PhotoViewer.this.cancelVideoPlayRunnable();
                        boolean z = true;
                        if (PhotoViewer.this.sendPhotoType == 1) {
                            PhotoViewer.this.cancelFlashAnimations();
                            long unused = PhotoViewer.this.captureFrameAtTime = -1;
                        }
                        if (PhotoViewer.this.videoPlayer == null || !PhotoViewer.this.videoPlayer.isPlaying()) {
                            z = false;
                        }
                        this.wasPlaying = z;
                        if (z) {
                            boolean unused2 = PhotoViewer.this.manuallyPaused = false;
                            PhotoViewer.this.videoPlayer.pause();
                            PhotoViewer.this.containerView.invalidate();
                        }
                    }
                }

                public void didStopDragging(int type) {
                    Runnable runnable = this.seekToRunnable;
                    if (runnable != null) {
                        AndroidUtilities.cancelRunOnUIThread(runnable);
                        this.seekToRunnable.run();
                    }
                    PhotoViewer.this.cancelVideoPlayRunnable();
                    if (PhotoViewer.this.sendPhotoType == 1 && PhotoViewer.this.flashView != null && type == VideoTimelinePlayView.TYPE_PROGRESS) {
                        PhotoViewer.this.cancelFlashAnimations();
                        PhotoViewer photoViewer = PhotoViewer.this;
                        long unused = photoViewer.captureFrameAtTime = photoViewer.avatarStartTime;
                        if (PhotoViewer.this.captureFrameReadyAtTime == ((long) this.seekTo)) {
                            PhotoViewer.this.captureCurrentFrame();
                        }
                    } else if (PhotoViewer.this.sendPhotoType == 1 || this.wasPlaying) {
                        boolean unused2 = PhotoViewer.this.manuallyPaused = false;
                        if (PhotoViewer.this.videoPlayer != null) {
                            PhotoViewer.this.videoPlayer.play();
                        }
                    }
                }
            });
            showVideoTimeline(false, false);
            this.videoTimelineView.setBackgroundColor(NUM);
            this.containerView.addView(this.videoTimelineView, LayoutHelper.createFrame(-1, 58.0f, 83, 0.0f, 8.0f, 0.0f, 0.0f));
            TextView textView3 = new TextView(this.parentActivity);
            this.videoAvatarTooltip = textView3;
            textView3.setSingleLine(true);
            this.videoAvatarTooltip.setVisibility(8);
            this.videoAvatarTooltip.setText(LocaleController.getString("ChooseCover", NUM));
            this.videoAvatarTooltip.setGravity(1);
            this.videoAvatarTooltip.setTextSize(1, 14.0f);
            this.videoAvatarTooltip.setTextColor(-7566196);
            this.containerView.addView(this.videoAvatarTooltip, LayoutHelper.createFrame(-1, -2.0f, 83, 0.0f, 8.0f, 0.0f, 0.0f));
            AnonymousClass24 r09 = new ImageView(this.parentActivity) {
                public boolean dispatchTouchEvent(MotionEvent ev) {
                    return PhotoViewer.this.bottomTouchEnabled && super.dispatchTouchEvent(ev);
                }

                public boolean onTouchEvent(MotionEvent event) {
                    return PhotoViewer.this.bottomTouchEnabled && super.onTouchEvent(event);
                }

                public void setVisibility(int visibility) {
                    super.setVisibility(visibility);
                    if (PhotoViewer.this.captionEditText.getCaptionLimitOffset() < 0) {
                        PhotoViewer.this.captionLimitView.setVisibility(visibility);
                    } else {
                        PhotoViewer.this.captionLimitView.setVisibility(8);
                    }
                }

                public void setTranslationY(float translationY) {
                    super.setTranslationY(translationY);
                    PhotoViewer.this.captionLimitView.setTranslationY(translationY);
                }

                public void setAlpha(float alpha) {
                    super.setAlpha(alpha);
                    PhotoViewer.this.captionLimitView.setAlpha(alpha);
                }
            };
            this.pickerViewSendButton = r09;
            r09.setScaleType(ImageView.ScaleType.CENTER);
            int dp = AndroidUtilities.dp(56.0f);
            int themedColor = getThemedColor("dialogFloatingButton");
            if (Build.VERSION.SDK_INT >= 21) {
                str = "dialogFloatingButtonPressed";
            } else {
                str = "dialogFloatingButton";
            }
            Drawable createSimpleSelectorCircleDrawable = Theme.createSimpleSelectorCircleDrawable(dp, themedColor, getThemedColor(str));
            this.pickerViewSendDrawable = createSimpleSelectorCircleDrawable;
            this.pickerViewSendButton.setBackgroundDrawable(createSimpleSelectorCircleDrawable);
            this.pickerViewSendButton.setColorFilter(new PorterDuffColorFilter(-1, PorterDuff.Mode.MULTIPLY));
            this.pickerViewSendButton.setImageResource(NUM);
            this.pickerViewSendButton.setColorFilter(new PorterDuffColorFilter(getThemedColor("dialogFloatingIcon"), PorterDuff.Mode.MULTIPLY));
            this.containerView.addView(this.pickerViewSendButton, LayoutHelper.createFrame(56, 56.0f, 85, 0.0f, 0.0f, 14.0f, 14.0f));
            this.pickerViewSendButton.setContentDescription(LocaleController.getString("Send", NUM));
            this.pickerViewSendButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda4(this));
            this.pickerViewSendButton.setOnLongClickListener(new PhotoViewer$$ExternalSyntheticLambda30(this, resourcesProvider3));
            TextView textView4 = new TextView(this.parentActivity);
            this.captionLimitView = textView4;
            textView4.setTextSize(1, 15.0f);
            this.captionLimitView.setTextColor(-1280137);
            this.captionLimitView.setGravity(17);
            this.captionLimitView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            this.containerView.addView(this.captionLimitView, LayoutHelper.createFrame(56, 20.0f, 85, 3.0f, 0.0f, 14.0f, 78.0f));
            AnonymousClass25 r010 = new LinearLayout(this.parentActivity) {
                boolean ignoreLayout;

                /* access modifiers changed from: protected */
                public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
                    int compressIconWidth;
                    int visibleItemsCount = 0;
                    int count = getChildCount();
                    for (int a = 0; a < count; a++) {
                        if (getChildAt(a).getVisibility() == 0) {
                            visibleItemsCount++;
                        }
                    }
                    int width = View.MeasureSpec.getSize(widthMeasureSpec);
                    int height = View.MeasureSpec.getSize(heightMeasureSpec);
                    if (visibleItemsCount != 0) {
                        int itemWidth = Math.min(AndroidUtilities.dp(70.0f), width / visibleItemsCount);
                        if (PhotoViewer.this.compressItem.getVisibility() == 0) {
                            this.ignoreLayout = true;
                            if (PhotoViewer.this.selectedCompression < 2) {
                                compressIconWidth = 48;
                            } else {
                                compressIconWidth = 64;
                            }
                            int padding = Math.max(0, (itemWidth - AndroidUtilities.dp((float) compressIconWidth)) / 2);
                            PhotoViewer.this.compressItem.setPadding(padding, 0, padding, 0);
                            this.ignoreLayout = false;
                        }
                        for (int a2 = 0; a2 < count; a2++) {
                            View v = getChildAt(a2);
                            if (v.getVisibility() != 8) {
                                v.measure(View.MeasureSpec.makeMeasureSpec(itemWidth, NUM), View.MeasureSpec.makeMeasureSpec(height, NUM));
                            }
                        }
                        setMeasuredDimension(itemWidth * visibleItemsCount, height);
                        return;
                    }
                    setMeasuredDimension(width, height);
                }
            };
            this.itemsLayout = r010;
            r010.setOrientation(0);
            this.pickerView.addView(this.itemsLayout, LayoutHelper.createFrame(-2, 48.0f, 81, 0.0f, 0.0f, 70.0f, 0.0f));
            ImageView imageView3 = new ImageView(this.parentActivity);
            this.cropItem = imageView3;
            imageView3.setScaleType(ImageView.ScaleType.CENTER);
            this.cropItem.setImageResource(NUM);
            this.cropItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
            this.itemsLayout.addView(this.cropItem, LayoutHelper.createLinear(48, 48));
            this.cropItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda5(this));
            this.cropItem.setContentDescription(LocaleController.getString("CropImage", NUM));
            ImageView imageView4 = new ImageView(this.parentActivity);
            this.rotateItem = imageView4;
            imageView4.setScaleType(ImageView.ScaleType.CENTER);
            this.rotateItem.setImageResource(NUM);
            this.rotateItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
            this.itemsLayout.addView(this.rotateItem, LayoutHelper.createLinear(48, 48));
            this.rotateItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda6(this));
            this.rotateItem.setContentDescription(LocaleController.getString("AccDescrRotate", NUM));
            ImageView imageView5 = new ImageView(this.parentActivity);
            this.mirrorItem = imageView5;
            imageView5.setScaleType(ImageView.ScaleType.CENTER);
            this.mirrorItem.setImageResource(NUM);
            this.mirrorItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
            this.itemsLayout.addView(this.mirrorItem, LayoutHelper.createLinear(48, 48));
            this.mirrorItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda7(this));
            this.mirrorItem.setContentDescription(LocaleController.getString("AccDescrMirror", NUM));
            ImageView imageView6 = new ImageView(this.parentActivity);
            this.paintItem = imageView6;
            imageView6.setScaleType(ImageView.ScaleType.CENTER);
            this.paintItem.setImageResource(NUM);
            this.paintItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
            this.itemsLayout.addView(this.paintItem, LayoutHelper.createLinear(48, 48));
            this.paintItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda8(this));
            this.paintItem.setContentDescription(LocaleController.getString("AccDescrPhotoEditor", NUM));
            ImageView imageView7 = new ImageView(this.parentActivity);
            this.muteItem = imageView7;
            imageView7.setScaleType(ImageView.ScaleType.CENTER);
            this.muteItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
            this.containerView.addView(this.muteItem, LayoutHelper.createFrame(48, 48.0f, 83, 16.0f, 0.0f, 0.0f, 0.0f));
            this.muteItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda9(this));
            ImageView imageView8 = new ImageView(this.parentActivity);
            this.cameraItem = imageView8;
            imageView8.setScaleType(ImageView.ScaleType.CENTER);
            this.cameraItem.setImageResource(NUM);
            this.cameraItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
            this.cameraItem.setContentDescription(LocaleController.getString("AccDescrTakeMorePics", NUM));
            this.containerView.addView(this.cameraItem, LayoutHelper.createFrame(48, 48.0f, 85, 0.0f, 0.0f, 16.0f, 0.0f));
            this.cameraItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda10(this));
            ImageView imageView9 = new ImageView(this.parentActivity);
            this.tuneItem = imageView9;
            imageView9.setScaleType(ImageView.ScaleType.CENTER);
            this.tuneItem.setImageResource(NUM);
            this.tuneItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
            this.itemsLayout.addView(this.tuneItem, LayoutHelper.createLinear(48, 48));
            this.tuneItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda12(this));
            this.tuneItem.setContentDescription(LocaleController.getString("AccDescrPhotoAdjust", NUM));
            ImageView imageView10 = new ImageView(this.parentActivity);
            this.compressItem = imageView10;
            imageView10.setTag(1);
            this.compressItem.setScaleType(ImageView.ScaleType.CENTER);
            this.compressItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
            int selectCompression = selectCompression();
            this.selectedCompression = selectCompression;
            if (selectCompression <= 1) {
                this.compressItem.setImageResource(NUM);
            } else if (selectCompression == 2) {
                this.compressItem.setImageResource(NUM);
            } else {
                this.selectedCompression = this.compressionsCount - 1;
                this.compressItem.setImageResource(NUM);
            }
            this.compressItem.setContentDescription(LocaleController.getString("AccDescrVideoQuality", NUM));
            this.itemsLayout.addView(this.compressItem, LayoutHelper.createLinear(48, 48));
            this.compressItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda27(this, activity2));
            ImageView imageView11 = new ImageView(this.parentActivity);
            this.timeItem = imageView11;
            imageView11.setScaleType(ImageView.ScaleType.CENTER);
            this.timeItem.setImageResource(NUM);
            this.timeItem.setBackgroundDrawable(Theme.createSelectorDrawable(NUM));
            this.timeItem.setContentDescription(LocaleController.getString("SetTimer", NUM));
            this.itemsLayout.addView(this.timeItem, LayoutHelper.createLinear(48, 48));
            this.timeItem.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda28(this, resourcesProvider3));
            PickerBottomLayoutViewer pickerBottomLayoutViewer2 = new PickerBottomLayoutViewer(this.activityContext);
            this.editorDoneLayout = pickerBottomLayoutViewer2;
            pickerBottomLayoutViewer2.setBackgroundColor(-NUM);
            this.editorDoneLayout.updateSelectedCount(0, false);
            this.editorDoneLayout.setVisibility(8);
            this.containerView.addView(this.editorDoneLayout, LayoutHelper.createFrame(-1, 48, 83));
            this.editorDoneLayout.cancelButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda13(this));
            this.editorDoneLayout.doneButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda14(this));
            TextView textView5 = new TextView(this.activityContext);
            this.resetButton = textView5;
            textView5.setVisibility(8);
            this.resetButton.setTextSize(1, 14.0f);
            this.resetButton.setTextColor(-1);
            this.resetButton.setGravity(17);
            this.resetButton.setBackgroundDrawable(Theme.createSelectorDrawable(-12763843, 0));
            this.resetButton.setPadding(AndroidUtilities.dp(20.0f), 0, AndroidUtilities.dp(20.0f), 0);
            this.resetButton.setText(LocaleController.getString("Reset", NUM).toUpperCase());
            this.resetButton.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            this.editorDoneLayout.addView(this.resetButton, LayoutHelper.createFrame(-2, -1, 49));
            this.resetButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda15(this));
            GestureDetector2 gestureDetector2 = new GestureDetector2(this.containerView.getContext(), (GestureDetector2.OnGestureListener) this);
            this.gestureDetector = gestureDetector2;
            gestureDetector2.setIsLongpressEnabled(false);
            setDoubleTapEnabled(true);
            PhotoViewer$$ExternalSyntheticLambda56 photoViewer$$ExternalSyntheticLambda56 = new PhotoViewer$$ExternalSyntheticLambda56(this);
            this.centerImage.setParentView(this.containerView);
            this.centerImage.setCrossfadeAlpha((byte) 2);
            this.centerImage.setInvalidateAll(true);
            this.centerImage.setDelegate(photoViewer$$ExternalSyntheticLambda56);
            this.leftImage.setParentView(this.containerView);
            this.leftImage.setCrossfadeAlpha((byte) 2);
            this.leftImage.setInvalidateAll(true);
            this.leftImage.setDelegate(photoViewer$$ExternalSyntheticLambda56);
            this.rightImage.setParentView(this.containerView);
            this.rightImage.setCrossfadeAlpha((byte) 2);
            this.rightImage.setInvalidateAll(true);
            this.rightImage.setDelegate(photoViewer$$ExternalSyntheticLambda56);
            int rotation = ((WindowManager) ApplicationLoader.applicationContext.getSystemService("window")).getDefaultDisplay().getRotation();
            AnonymousClass27 r011 = new CheckBox(this.containerView.getContext(), NUM) {
                public boolean onTouchEvent(MotionEvent event) {
                    return PhotoViewer.this.bottomTouchEnabled && super.onTouchEvent(event);
                }
            };
            this.checkImageView = r011;
            r011.setDrawBackground(true);
            this.checkImageView.setHasBorder(true);
            this.checkImageView.setSize(34);
            this.checkImageView.setCheckOffset(AndroidUtilities.dp(1.0f));
            this.checkImageView.setColor(getThemedColor("dialogFloatingButton"), -1);
            this.checkImageView.setVisibility(8);
            this.containerView.addView(this.checkImageView, LayoutHelper.createFrame(34, 34.0f, 53, 0.0f, (rotation == 3 || rotation == 1) ? 61.0f : 71.0f, 11.0f, 0.0f));
            if (isStatusBarVisible()) {
                ((FrameLayout.LayoutParams) this.checkImageView.getLayoutParams()).topMargin += AndroidUtilities.statusBarHeight;
            }
            this.checkImageView.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda16(this));
            CounterView counterView = new CounterView(this.parentActivity);
            this.photosCounterView = counterView;
            this.containerView.addView(counterView, LayoutHelper.createFrame(40, 40.0f, 53, 0.0f, (rotation == 3 || rotation == 1) ? 58.0f : 68.0f, 64.0f, 0.0f));
            if (isStatusBarVisible()) {
                ((FrameLayout.LayoutParams) this.photosCounterView.getLayoutParams()).topMargin += AndroidUtilities.statusBarHeight;
            }
            this.photosCounterView.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda17(this));
            SelectedPhotosListView selectedPhotosListView2 = new SelectedPhotosListView(this.parentActivity);
            this.selectedPhotosListView = selectedPhotosListView2;
            selectedPhotosListView2.setVisibility(8);
            this.selectedPhotosListView.setAlpha(0.0f);
            this.selectedPhotosListView.setLayoutManager(new LinearLayoutManager(this.parentActivity, 0, true) {
                public void smoothScrollToPosition(RecyclerView recyclerView, RecyclerView.State state, int position) {
                    LinearSmoothScrollerEnd linearSmoothScroller = new LinearSmoothScrollerEnd(recyclerView.getContext()) {
                        /* access modifiers changed from: protected */
                        public int calculateTimeForDeceleration(int dx) {
                            return Math.max(180, super.calculateTimeForDeceleration(dx));
                        }
                    };
                    linearSmoothScroller.setTargetPosition(position);
                    startSmoothScroll(linearSmoothScroller);
                }
            });
            SelectedPhotosListView selectedPhotosListView3 = this.selectedPhotosListView;
            ListAdapter listAdapter = new ListAdapter(this.parentActivity);
            this.selectedPhotosAdapter = listAdapter;
            selectedPhotosListView3.setAdapter(listAdapter);
            this.containerView.addView(this.selectedPhotosListView, LayoutHelper.createFrame(-1, 103, 51));
            this.selectedPhotosListView.setOnItemClickListener((RecyclerListView.OnItemClickListener) new PhotoViewer$$ExternalSyntheticLambda61(this));
            CaptionLinkMovementMethod captionLinkMovementMethod2 = captionLinkMovementMethod;
            AnonymousClass29 r012 = new PhotoViewerCaptionEnterView(this.activityContext, this.containerView, this.windowView, resourcesProvider2) {
                public boolean dispatchTouchEvent(MotionEvent ev) {
                    try {
                        return !PhotoViewer.this.bottomTouchEnabled && super.dispatchTouchEvent(ev);
                    } catch (Exception e) {
                        FileLog.e((Throwable) e);
                        return false;
                    }
                }

                public boolean onInterceptTouchEvent(MotionEvent ev) {
                    try {
                        return !PhotoViewer.this.bottomTouchEnabled && super.onInterceptTouchEvent(ev);
                    } catch (Exception e) {
                        FileLog.e((Throwable) e);
                        return false;
                    }
                }

                public boolean onTouchEvent(MotionEvent event) {
                    if (PhotoViewer.this.bottomTouchEnabled && event.getAction() == 0) {
                        PhotoViewer.this.keyboardAnimationEnabled = true;
                    }
                    if (PhotoViewer.this.bottomTouchEnabled || !super.onTouchEvent(event)) {
                        return false;
                    }
                    return true;
                }

                /* access modifiers changed from: protected */
                public void extendActionMode(ActionMode actionMode, Menu menu) {
                    if (PhotoViewer.this.parentChatActivity != null) {
                        PhotoViewer.this.parentChatActivity.extendActionMode(menu);
                    }
                }
            };
            this.captionEditText = r012;
            r012.setDelegate(new PhotoViewerCaptionEnterView.PhotoViewerCaptionEnterViewDelegate() {
                public void onCaptionEnter() {
                    PhotoViewer.this.closeCaptionEnter(true);
                }

                public void onTextChanged(CharSequence text) {
                    if (!(PhotoViewer.this.mentionsAdapter == null || PhotoViewer.this.captionEditText == null || PhotoViewer.this.parentChatActivity == null || text == null)) {
                        PhotoViewer.this.mentionsAdapter.searchUsernameOrHashtag(text.toString(), PhotoViewer.this.captionEditText.getCursorPosition(), PhotoViewer.this.parentChatActivity.messages, false, false);
                    }
                    int color = PhotoViewer.this.getThemedColor("dialogFloatingIcon");
                    if (PhotoViewer.this.captionEditText.getCaptionLimitOffset() < 0) {
                        PhotoViewer.this.captionLimitView.setText(Integer.toString(PhotoViewer.this.captionEditText.getCaptionLimitOffset()));
                        PhotoViewer.this.captionLimitView.setVisibility(PhotoViewer.this.pickerViewSendButton.getVisibility());
                        PhotoViewer.this.pickerViewSendButton.setColorFilter(new PorterDuffColorFilter(ColorUtils.setAlphaComponent(color, (int) (((float) Color.alpha(color)) * 0.58f)), PorterDuff.Mode.MULTIPLY));
                    } else {
                        PhotoViewer.this.pickerViewSendButton.setColorFilter(new PorterDuffColorFilter(color, PorterDuff.Mode.MULTIPLY));
                        PhotoViewer.this.captionLimitView.setVisibility(8);
                    }
                    if (PhotoViewer.this.placeProvider != null) {
                        PhotoViewer.this.placeProvider.onCaptionChanged(text);
                    }
                }

                public void onWindowSizeChanged(int size) {
                    if (size - (ActionBar.getCurrentActionBarHeight() * 2) < AndroidUtilities.dp((float) ((Math.min(3, PhotoViewer.this.mentionsAdapter.getItemCount()) * 36) + (PhotoViewer.this.mentionsAdapter.getItemCount() > 3 ? 18 : 0)))) {
                        boolean unused = PhotoViewer.this.allowMentions = false;
                        if (PhotoViewer.this.mentionListView != null && PhotoViewer.this.mentionListView.getVisibility() == 0) {
                            PhotoViewer.this.mentionListView.setVisibility(4);
                            return;
                        }
                        return;
                    }
                    boolean unused2 = PhotoViewer.this.allowMentions = true;
                    if (PhotoViewer.this.mentionListView != null && PhotoViewer.this.mentionListView.getVisibility() == 4) {
                        PhotoViewer.this.mentionListView.setVisibility(0);
                    }
                }

                public void onEmojiViewCloseStart() {
                    String str;
                    int i;
                    setOffset(PhotoViewer.this.captionEditText.getEmojiPadding());
                    if (PhotoViewer.this.captionEditText.getTag() != null) {
                        if (PhotoViewer.this.isCurrentVideo) {
                            ActionBar access$6800 = PhotoViewer.this.actionBar;
                            if (PhotoViewer.this.muteVideo) {
                                i = NUM;
                                str = "GifCaption";
                            } else {
                                i = NUM;
                                str = "VideoCaption";
                            }
                            access$6800.setTitleAnimated(LocaleController.getString(str, i), true, 220);
                        } else {
                            PhotoViewer.this.actionBar.setTitleAnimated(LocaleController.getString("PhotoCaption", NUM), true, 220);
                        }
                        PhotoViewer.this.checkImageView.animate().alpha(0.0f).setDuration(220).start();
                        PhotoViewer.this.photosCounterView.animate().alpha(0.0f).setDuration(220).start();
                        PhotoViewer.this.selectedPhotosListView.animate().alpha(0.0f).translationY((float) (-AndroidUtilities.dp(10.0f))).setDuration(220).start();
                        return;
                    }
                    PhotoViewer.this.checkImageView.animate().alpha(1.0f).setDuration(220).start();
                    PhotoViewer.this.photosCounterView.animate().alpha(1.0f).setDuration(220).start();
                    if (PhotoViewer.this.lastTitle != null) {
                        PhotoViewer.this.actionBar.setTitleAnimated(PhotoViewer.this.lastTitle, false, 220);
                        String unused = PhotoViewer.this.lastTitle = null;
                    }
                }

                public void onEmojiViewCloseEnd() {
                    setOffset(0);
                    PhotoViewer.this.captionEditText.setVisibility(8);
                }

                private void setOffset(int offset) {
                    for (int i = 0; i < PhotoViewer.this.containerView.getChildCount(); i++) {
                        View child = PhotoViewer.this.containerView.getChildAt(i);
                        if (child == PhotoViewer.this.cameraItem || child == PhotoViewer.this.muteItem || child == PhotoViewer.this.pickerView || child == PhotoViewer.this.videoTimelineView || child == PhotoViewer.this.pickerViewSendButton || child == PhotoViewer.this.captionTextViewSwitcher || (PhotoViewer.this.muteItem.getVisibility() == 0 && child == PhotoViewer.this.bottomLayout)) {
                            child.setTranslationY((float) offset);
                        }
                    }
                }
            });
            if (Build.VERSION.SDK_INT >= 19) {
                this.captionEditText.setImportantForAccessibility(4);
            }
            this.captionEditText.setVisibility(8);
            this.containerView.addView(this.captionEditText, LayoutHelper.createFrame(-1, -2, 83));
            AnonymousClass31 r013 = new RecyclerListView(this.activityContext, resourcesProvider3) {
                public boolean dispatchTouchEvent(MotionEvent ev) {
                    return !PhotoViewer.this.bottomTouchEnabled && super.dispatchTouchEvent(ev);
                }

                public boolean onInterceptTouchEvent(MotionEvent ev) {
                    return !PhotoViewer.this.bottomTouchEnabled && super.onInterceptTouchEvent(ev);
                }

                public boolean onTouchEvent(MotionEvent event) {
                    return !PhotoViewer.this.bottomTouchEnabled && super.onTouchEvent(event);
                }
            };
            this.mentionListView = r013;
            r013.setTag(5);
            AnonymousClass32 r014 = new LinearLayoutManager(this.activityContext) {
                public boolean supportsPredictiveItemAnimations() {
                    return false;
                }
            };
            this.mentionLayoutManager = r014;
            r014.setOrientation(1);
            this.mentionListView.setLayoutManager(this.mentionLayoutManager);
            this.mentionListView.setBackgroundColor(NUM);
            this.mentionListView.setVisibility(8);
            this.mentionListView.setClipToPadding(true);
            this.mentionListView.setOverScrollMode(2);
            this.containerView.addView(this.mentionListView, LayoutHelper.createFrame(-1, 110, 83));
            RecyclerListView recyclerListView = this.mentionListView;
            int i2 = rotation;
            PhotoViewer$$ExternalSyntheticLambda56 photoViewer$$ExternalSyntheticLambda562 = photoViewer$$ExternalSyntheticLambda56;
            Theme.ResourcesProvider resourcesProvider6 = resourcesProvider3;
            MentionsAdapter mentionsAdapter2 = new MentionsAdapter(this.activityContext, true, 0, 0, new MentionsAdapter.MentionsAdapterDelegate() {
                public void needChangePanelVisibility(boolean show) {
                    if (show) {
                        FrameLayout.LayoutParams layoutParams3 = (FrameLayout.LayoutParams) PhotoViewer.this.mentionListView.getLayoutParams();
                        int height = (Math.min(3, PhotoViewer.this.mentionsAdapter.getItemCount()) * 36) + (PhotoViewer.this.mentionsAdapter.getItemCount() > 3 ? 18 : 0);
                        layoutParams3.height = AndroidUtilities.dp((float) height);
                        layoutParams3.topMargin = -AndroidUtilities.dp((float) height);
                        PhotoViewer.this.mentionListView.setLayoutParams(layoutParams3);
                        if (PhotoViewer.this.mentionListAnimation != null) {
                            PhotoViewer.this.mentionListAnimation.cancel();
                            AnimatorSet unused = PhotoViewer.this.mentionListAnimation = null;
                        }
                        if (PhotoViewer.this.mentionListView.getVisibility() == 0) {
                            PhotoViewer.this.mentionListView.setAlpha(1.0f);
                            return;
                        }
                        PhotoViewer.this.mentionLayoutManager.scrollToPositionWithOffset(0, 10000);
                        if (PhotoViewer.this.allowMentions) {
                            PhotoViewer.this.mentionListView.setVisibility(0);
                            AnimatorSet unused2 = PhotoViewer.this.mentionListAnimation = new AnimatorSet();
                            PhotoViewer.this.mentionListAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.mentionListView, View.ALPHA, new float[]{0.0f, 1.0f})});
                            PhotoViewer.this.mentionListAnimation.addListener(new AnimatorListenerAdapter() {
                                public void onAnimationEnd(Animator animation) {
                                    if (PhotoViewer.this.mentionListAnimation != null && PhotoViewer.this.mentionListAnimation.equals(animation)) {
                                        AnimatorSet unused = PhotoViewer.this.mentionListAnimation = null;
                                    }
                                }
                            });
                            PhotoViewer.this.mentionListAnimation.setDuration(200);
                            PhotoViewer.this.mentionListAnimation.start();
                            return;
                        }
                        PhotoViewer.this.mentionListView.setAlpha(1.0f);
                        PhotoViewer.this.mentionListView.setVisibility(4);
                        return;
                    }
                    if (PhotoViewer.this.mentionListAnimation != null) {
                        PhotoViewer.this.mentionListAnimation.cancel();
                        AnimatorSet unused3 = PhotoViewer.this.mentionListAnimation = null;
                    }
                    if (PhotoViewer.this.mentionListView.getVisibility() != 8) {
                        if (PhotoViewer.this.allowMentions) {
                            AnimatorSet unused4 = PhotoViewer.this.mentionListAnimation = new AnimatorSet();
                            PhotoViewer.this.mentionListAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.mentionListView, View.ALPHA, new float[]{0.0f})});
                            PhotoViewer.this.mentionListAnimation.addListener(new AnimatorListenerAdapter() {
                                public void onAnimationEnd(Animator animation) {
                                    if (PhotoViewer.this.mentionListAnimation != null && PhotoViewer.this.mentionListAnimation.equals(animation)) {
                                        PhotoViewer.this.mentionListView.setVisibility(8);
                                        AnimatorSet unused = PhotoViewer.this.mentionListAnimation = null;
                                    }
                                }
                            });
                            PhotoViewer.this.mentionListAnimation.setDuration(200);
                            PhotoViewer.this.mentionListAnimation.start();
                            return;
                        }
                        PhotoViewer.this.mentionListView.setVisibility(8);
                    }
                }

                public void onContextSearch(boolean searching) {
                }

                public void onContextClick(TLRPC.BotInlineResult result) {
                }
            }, resourcesProvider2);
            this.mentionsAdapter = mentionsAdapter2;
            recyclerListView.setAdapter(mentionsAdapter2);
            this.mentionListView.setOnItemClickListener((RecyclerListView.OnItemClickListener) new PhotoViewer$$ExternalSyntheticLambda62(this));
            this.mentionListView.setOnItemLongClickListener((RecyclerListView.OnItemLongClickListener) new PhotoViewer$$ExternalSyntheticLambda63(this, resourcesProvider6));
            UndoView undoView = new UndoView(this.activityContext, (BaseFragment) null, false, resourcesProvider6);
            this.hintView = undoView;
            undoView.setAdditionalTranslationY((float) AndroidUtilities.dp(112.0f));
            this.hintView.setColors(-NUM, -1);
            this.containerView.addView(this.hintView, LayoutHelper.createFrame(-1, -2.0f, 83, 8.0f, 0.0f, 8.0f, 8.0f));
            if (((AccessibilityManager) this.activityContext.getSystemService("accessibility")).isEnabled()) {
                View view = new View(this.activityContext);
                this.playButtonAccessibilityOverlay = view;
                view.setContentDescription(LocaleController.getString("AccActionPlay", NUM));
                this.playButtonAccessibilityOverlay.setFocusable(true);
                this.containerView.addView(this.playButtonAccessibilityOverlay, LayoutHelper.createFrame(64, 64, 17));
            }
        }
    }

    /* renamed from: lambda$setParentActivity$2$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ WindowInsets m3585lambda$setParentActivity$2$orgtelegramuiPhotoViewer(View v, WindowInsets insets) {
        int newTopInset = insets.getSystemWindowInsetTop();
        if ((this.parentActivity instanceof LaunchActivity) && ((newTopInset != 0 || AndroidUtilities.isInMultiwindow) && !this.inBubbleMode && AndroidUtilities.statusBarHeight != newTopInset)) {
            AndroidUtilities.statusBarHeight = newTopInset;
            ((LaunchActivity) this.parentActivity).drawerLayoutContainer.requestLayout();
        }
        WindowInsets oldInsets = (WindowInsets) this.lastInsets;
        this.lastInsets = insets;
        if (oldInsets == null || !oldInsets.toString().equals(insets.toString())) {
            int i = this.animationInProgress;
            if (i == 1 || i == 3) {
                ClippingImageView clippingImageView = this.animatingImageView;
                clippingImageView.setTranslationX(clippingImageView.getTranslationX() - ((float) getLeftInset()));
                this.animationValues[0][2] = this.animatingImageView.getTranslationX();
            }
            FrameLayout frameLayout = this.windowView;
            if (frameLayout != null) {
                frameLayout.requestLayout();
            }
        }
        this.containerView.setPadding(insets.getSystemWindowInsetLeft(), 0, insets.getSystemWindowInsetRight(), 0);
        if (this.actionBar != null) {
            AndroidUtilities.cancelRunOnUIThread(this.updateContainerFlagsRunnable);
            if (this.isVisible && this.animationInProgress == 0) {
                AndroidUtilities.runOnUIThread(this.updateContainerFlagsRunnable, 200);
            }
        }
        if (Build.VERSION.SDK_INT >= 30) {
            return WindowInsets.CONSUMED;
        }
        return insets.consumeSystemWindowInsets();
    }

    /* renamed from: lambda$setParentActivity$3$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3592lambda$setParentActivity$3$orgtelegramuiPhotoViewer(int id) {
        if (id >= 21 && id <= 25) {
            switch (id) {
                case 21:
                    this.currentVideoSpeed = 0.25f;
                    break;
                case 22:
                    this.currentVideoSpeed = 0.5f;
                    break;
                case 23:
                    this.currentVideoSpeed = 1.0f;
                    break;
                case 24:
                    this.currentVideoSpeed = 1.5f;
                    break;
                case 25:
                    this.currentVideoSpeed = 2.0f;
                    break;
            }
            if (this.currentMessageObject != null) {
                SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("playback_speed", 0);
                if (Math.abs(this.currentVideoSpeed - 1.0f) < 0.001f) {
                    SharedPreferences.Editor edit = preferences.edit();
                    edit.remove("speed" + this.currentMessageObject.getDialogId() + "_" + this.currentMessageObject.getId()).commit();
                } else {
                    SharedPreferences.Editor edit2 = preferences.edit();
                    edit2.putFloat("speed" + this.currentMessageObject.getDialogId() + "_" + this.currentMessageObject.getId(), this.currentVideoSpeed).commit();
                }
            }
            VideoPlayer videoPlayer2 = this.videoPlayer;
            if (videoPlayer2 != null) {
                videoPlayer2.setPlaybackSpeed(this.currentVideoSpeed);
            }
            PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
            if (photoViewerWebView2 != null) {
                photoViewerWebView2.setPlaybackSpeed(this.currentVideoSpeed);
            }
            setMenuItemIcon();
            this.menuItemSpeed.setVisibility(4);
        }
    }

    /* renamed from: lambda$setParentActivity$4$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3602lambda$setParentActivity$4$orgtelegramuiPhotoViewer(View v) {
        Activity activity = this.parentActivity;
        if (activity != null) {
            this.wasRotated = false;
            this.fullscreenedByButton = 1;
            if (this.prevOrientation == -10) {
                this.prevOrientation = activity.getRequestedOrientation();
            }
            if (((WindowManager) this.parentActivity.getSystemService("window")).getDefaultDisplay().getRotation() == 3) {
                this.parentActivity.setRequestedOrientation(8);
            } else {
                this.parentActivity.setRequestedOrientation(0);
            }
            toggleActionBar(false, false);
        }
    }

    /* renamed from: lambda$setParentActivity$6$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3604lambda$setParentActivity$6$orgtelegramuiPhotoViewer(View v) {
        openCurrentPhotoInPaintModeForSelect();
    }

    /* renamed from: lambda$setParentActivity$7$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3605lambda$setParentActivity$7$orgtelegramuiPhotoViewer(View v) {
        onSharePressed();
    }

    /* renamed from: lambda$setParentActivity$8$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3606lambda$setParentActivity$8$orgtelegramuiPhotoViewer(View view) {
        this.selectedCompression = this.previousCompression;
        didChangedCompressionLevel(false);
        showQualityView(false);
        requestVideoPreview(2);
    }

    /* renamed from: lambda$setParentActivity$9$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3607lambda$setParentActivity$9$orgtelegramuiPhotoViewer(View view) {
        showQualityView(false);
        requestVideoPreview(2);
    }

    /* renamed from: lambda$setParentActivity$10$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3575lambda$setParentActivity$10$orgtelegramuiPhotoViewer(View v) {
        if (this.captionEditText.getCaptionLimitOffset() < 0) {
            AndroidUtilities.shakeView(this.captionLimitView, 2.0f, 0);
            Vibrator vibrator = (Vibrator) this.captionLimitView.getContext().getSystemService("vibrator");
            if (vibrator != null) {
                vibrator.vibrate(200);
                return;
            }
            return;
        }
        ChatActivity chatActivity = this.parentChatActivity;
        if (chatActivity == null || !chatActivity.isInScheduleMode() || this.parentChatActivity.isEditingMessageMedia()) {
            sendPressed(true, 0);
        } else {
            showScheduleDatePickerDialog();
        }
    }

    /* renamed from: lambda$setParentActivity$14$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ boolean m3579lambda$setParentActivity$14$orgtelegramuiPhotoViewer(Theme.ResourcesProvider resourcesProvider2, View view) {
        PhotoViewerProvider photoViewerProvider;
        View view2 = view;
        PhotoViewerProvider photoViewerProvider2 = this.placeProvider;
        if (photoViewerProvider2 != null && !photoViewerProvider2.allowSendingSubmenu()) {
            return false;
        }
        ChatActivity chatActivity = this.parentChatActivity;
        if (chatActivity == null) {
            Theme.ResourcesProvider resourcesProvider3 = resourcesProvider2;
            return false;
        } else if (chatActivity.isInScheduleMode()) {
            Theme.ResourcesProvider resourcesProvider4 = resourcesProvider2;
            return false;
        } else if (this.captionEditText.getCaptionLimitOffset() < 0) {
            return false;
        } else {
            TLRPC.Chat currentChat = this.parentChatActivity.getCurrentChat();
            TLRPC.User user = this.parentChatActivity.getCurrentUser();
            ActionBarPopupWindow.ActionBarPopupWindowLayout actionBarPopupWindowLayout = new ActionBarPopupWindow.ActionBarPopupWindowLayout(this.parentActivity);
            this.sendPopupLayout = actionBarPopupWindowLayout;
            actionBarPopupWindowLayout.setAnimationEnabled(false);
            this.sendPopupLayout.setOnTouchListener(new PhotoViewer$$ExternalSyntheticLambda31(this));
            this.sendPopupLayout.setDispatchKeyEventListener(new PhotoViewer$$ExternalSyntheticLambda58(this));
            this.sendPopupLayout.setShownFromBotton(false);
            this.sendPopupLayout.setBackgroundColor(-NUM);
            PhotoViewerProvider photoViewerProvider3 = this.placeProvider;
            boolean canReplace = photoViewerProvider3 != null && photoViewerProvider3.canReplace(this.currentIndex);
            int[] order = {4, 3, 2, 0, 1};
            int i = 0;
            for (int i2 = 5; i < i2; i2 = 5) {
                int a = order[i];
                if (a != 2 && a != 3 && canReplace) {
                    Theme.ResourcesProvider resourcesProvider5 = resourcesProvider2;
                } else if (a != 0 || this.parentChatActivity.canScheduleMessage()) {
                    if (a == 0 && (photoViewerProvider = this.placeProvider) != null && photoViewerProvider.getSelectedPhotos() != null) {
                        boolean hasTtl = false;
                        Iterator<Map.Entry<Object, Object>> it = this.placeProvider.getSelectedPhotos().entrySet().iterator();
                        while (true) {
                            if (!it.hasNext()) {
                                break;
                            }
                            Object object = it.next().getValue();
                            if (!(object instanceof MediaController.PhotoEntry)) {
                                if ((object instanceof MediaController.SearchImage) && ((MediaController.SearchImage) object).ttl != 0) {
                                    hasTtl = true;
                                    break;
                                }
                            } else if (((MediaController.PhotoEntry) object).ttl != 0) {
                                hasTtl = true;
                                break;
                            }
                        }
                        if (hasTtl) {
                            Theme.ResourcesProvider resourcesProvider6 = resourcesProvider2;
                        }
                    } else if (a == 1 && UserObject.isUserSelf(user)) {
                        Theme.ResourcesProvider resourcesProvider7 = resourcesProvider2;
                    } else if ((a == 2 || a == 3) && !canReplace) {
                        Theme.ResourcesProvider resourcesProvider8 = resourcesProvider2;
                    } else if (a == 4) {
                        if (this.isCurrentVideo) {
                            Theme.ResourcesProvider resourcesProvider9 = resourcesProvider2;
                        } else if (this.timeItem.getColorFilter() != null) {
                            Theme.ResourcesProvider resourcesProvider10 = resourcesProvider2;
                        }
                    }
                    ActionBarMenuSubItem cell = new ActionBarMenuSubItem((Context) this.parentActivity, a == 0, a == 3, resourcesProvider2);
                    if (a == 0) {
                        if (UserObject.isUserSelf(user)) {
                            cell.setTextAndIcon(LocaleController.getString("SetReminder", NUM), NUM);
                        } else {
                            cell.setTextAndIcon(LocaleController.getString("ScheduleMessage", NUM), NUM);
                        }
                    } else if (a == 1) {
                        cell.setTextAndIcon(LocaleController.getString("SendWithoutSound", NUM), NUM);
                    } else if (a == 2) {
                        cell.setTextAndIcon(LocaleController.getString("ReplacePhoto", NUM), NUM);
                    } else if (a == 3) {
                        cell.setTextAndIcon(LocaleController.getString("SendAsNewPhoto", NUM), NUM);
                    } else if (a == 4) {
                        cell.setTextAndIcon(LocaleController.getString("SendWithoutCompression", NUM), NUM);
                    }
                    cell.setMinimumWidth(AndroidUtilities.dp(196.0f));
                    cell.setColors(-1, -1);
                    this.sendPopupLayout.addView(cell, LayoutHelper.createLinear(-1, 48));
                    cell.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda26(this, a));
                } else {
                    Theme.ResourcesProvider resourcesProvider11 = resourcesProvider2;
                }
                i++;
            }
            Theme.ResourcesProvider resourcesProvider12 = resourcesProvider2;
            if (this.sendPopupLayout.getChildCount() == 0) {
                return false;
            }
            this.sendPopupLayout.setupRadialSelectors(NUM);
            ActionBarPopupWindow actionBarPopupWindow = new ActionBarPopupWindow(this.sendPopupLayout, -2, -2);
            this.sendPopupWindow = actionBarPopupWindow;
            actionBarPopupWindow.setAnimationEnabled(false);
            this.sendPopupWindow.setAnimationStyle(NUM);
            this.sendPopupWindow.setOutsideTouchable(true);
            this.sendPopupWindow.setClippingEnabled(true);
            this.sendPopupWindow.setInputMethodMode(2);
            this.sendPopupWindow.setSoftInputMode(0);
            this.sendPopupWindow.getContentView().setFocusableInTouchMode(true);
            this.sendPopupLayout.measure(View.MeasureSpec.makeMeasureSpec(AndroidUtilities.dp(1000.0f), Integer.MIN_VALUE), View.MeasureSpec.makeMeasureSpec(AndroidUtilities.dp(1000.0f), Integer.MIN_VALUE));
            this.sendPopupWindow.setFocusable(true);
            int[] location = new int[2];
            view2.getLocationInWindow(location);
            this.sendPopupWindow.showAtLocation(view2, 51, ((location[0] + view.getMeasuredWidth()) - this.sendPopupLayout.getMeasuredWidth()) + AndroidUtilities.dp(14.0f), (location[1] - this.sendPopupLayout.getMeasuredHeight()) - AndroidUtilities.dp(18.0f));
            view2.performHapticFeedback(3, 2);
            return false;
        }
    }

    /* renamed from: lambda$setParentActivity$11$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ boolean m3576lambda$setParentActivity$11$orgtelegramuiPhotoViewer(View v, MotionEvent event) {
        ActionBarPopupWindow actionBarPopupWindow;
        if (event.getActionMasked() != 0 || (actionBarPopupWindow = this.sendPopupWindow) == null || !actionBarPopupWindow.isShowing()) {
            return false;
        }
        v.getHitRect(this.hitRect);
        if (this.hitRect.contains((int) event.getX(), (int) event.getY())) {
            return false;
        }
        this.sendPopupWindow.dismiss();
        return false;
    }

    /* renamed from: lambda$setParentActivity$12$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3577lambda$setParentActivity$12$orgtelegramuiPhotoViewer(KeyEvent keyEvent) {
        ActionBarPopupWindow actionBarPopupWindow;
        if (keyEvent.getKeyCode() == 4 && keyEvent.getRepeatCount() == 0 && (actionBarPopupWindow = this.sendPopupWindow) != null && actionBarPopupWindow.isShowing()) {
            this.sendPopupWindow.dismiss();
        }
    }

    /* renamed from: lambda$setParentActivity$13$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3578lambda$setParentActivity$13$orgtelegramuiPhotoViewer(int a, View v) {
        ActionBarPopupWindow actionBarPopupWindow = this.sendPopupWindow;
        if (actionBarPopupWindow != null && actionBarPopupWindow.isShowing()) {
            this.sendPopupWindow.dismiss();
        }
        if (a == 0) {
            showScheduleDatePickerDialog();
        } else if (a == 1) {
            sendPressed(false, 0);
        } else if (a == 2) {
            replacePressed();
        } else if (a == 3) {
            sendPressed(true, 0);
        } else if (a == 4) {
            sendPressed(true, 0, false, true);
        }
    }

    /* renamed from: lambda$setParentActivity$15$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3580lambda$setParentActivity$15$orgtelegramuiPhotoViewer(View v) {
        if (this.captionEditText.getTag() == null) {
            if (this.isCurrentVideo) {
                if (this.videoConvertSupported) {
                    TextureView textureView = this.videoTextureView;
                    if (textureView instanceof VideoEditTextureView) {
                        VideoEditTextureView textureView2 = (VideoEditTextureView) textureView;
                        if (textureView2.getVideoWidth() <= 0 || textureView2.getVideoHeight() <= 0) {
                            return;
                        }
                    } else {
                        return;
                    }
                } else {
                    return;
                }
            }
            switchToEditMode(1);
        }
    }

    /* renamed from: lambda$setParentActivity$16$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3581lambda$setParentActivity$16$orgtelegramuiPhotoViewer(View v) {
        PhotoCropView photoCropView2 = this.photoCropView;
        if (photoCropView2 != null) {
            if (photoCropView2.rotate()) {
                this.rotateItem.setColorFilter(new PorterDuffColorFilter(getThemedColor("dialogFloatingButton"), PorterDuff.Mode.MULTIPLY));
            } else {
                this.rotateItem.setColorFilter((ColorFilter) null);
            }
        }
    }

    /* renamed from: lambda$setParentActivity$17$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3582lambda$setParentActivity$17$orgtelegramuiPhotoViewer(View v) {
        PhotoCropView photoCropView2 = this.photoCropView;
        if (photoCropView2 != null) {
            if (photoCropView2.mirror()) {
                this.mirrorItem.setColorFilter(new PorterDuffColorFilter(getThemedColor("dialogFloatingButton"), PorterDuff.Mode.MULTIPLY));
            } else {
                this.mirrorItem.setColorFilter((ColorFilter) null);
            }
        }
    }

    /* renamed from: lambda$setParentActivity$18$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3583lambda$setParentActivity$18$orgtelegramuiPhotoViewer(View v) {
        if (this.captionEditText.getTag() == null) {
            if (this.isCurrentVideo) {
                if (this.videoConvertSupported) {
                    TextureView textureView = this.videoTextureView;
                    if (textureView instanceof VideoEditTextureView) {
                        VideoEditTextureView textureView2 = (VideoEditTextureView) textureView;
                        if (textureView2.getVideoWidth() <= 0 || textureView2.getVideoHeight() <= 0) {
                            return;
                        }
                    } else {
                        return;
                    }
                } else {
                    return;
                }
            }
            switchToEditMode(3);
        }
    }

    /* renamed from: lambda$setParentActivity$19$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3584lambda$setParentActivity$19$orgtelegramuiPhotoViewer(View v) {
        if (this.captionEditText.getTag() == null) {
            this.muteVideo = !this.muteVideo;
            updateMuteButton();
            updateVideoInfo();
            if (!this.muteVideo || this.checkImageView.isChecked()) {
                Object object = this.imagesArrLocals.get(this.currentIndex);
                if (object instanceof MediaController.MediaEditState) {
                    ((MediaController.MediaEditState) object).editedInfo = getCurrentVideoEditedInfo();
                    return;
                }
                return;
            }
            this.checkImageView.callOnClick();
        }
    }

    /* renamed from: lambda$setParentActivity$20$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3586lambda$setParentActivity$20$orgtelegramuiPhotoViewer(View v) {
        if (this.placeProvider != null && this.captionEditText.getTag() == null) {
            this.placeProvider.needAddMorePhotos();
            closePhoto(true, false);
        }
    }

    /* renamed from: lambda$setParentActivity$21$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3587lambda$setParentActivity$21$orgtelegramuiPhotoViewer(View v) {
        if (this.captionEditText.getTag() == null) {
            if (this.isCurrentVideo) {
                if (this.videoConvertSupported) {
                    TextureView textureView = this.videoTextureView;
                    if (textureView instanceof VideoEditTextureView) {
                        VideoEditTextureView textureView2 = (VideoEditTextureView) textureView;
                        if (textureView2.getVideoWidth() <= 0 || textureView2.getVideoHeight() <= 0) {
                            return;
                        }
                    } else {
                        return;
                    }
                } else {
                    return;
                }
            }
            switchToEditMode(2);
        }
    }

    /* renamed from: lambda$setParentActivity$22$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3588lambda$setParentActivity$22$orgtelegramuiPhotoViewer(Activity activity, View v) {
        if (this.captionEditText.getTag() == null && !this.muteVideo) {
            if (this.compressItem.getTag() != null) {
                showQualityView(true);
                requestVideoPreview(1);
            } else if (this.videoConvertSupported) {
                if (this.tooltip == null) {
                    this.tooltip = new Tooltip(activity, this.containerView, -NUM, -1);
                }
                this.tooltip.setText(LocaleController.getString("VideoQualityIsTooLow", NUM));
                this.tooltip.show(this.compressItem);
            }
        }
    }

    /* renamed from: lambda$setParentActivity$28$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3590lambda$setParentActivity$28$orgtelegramuiPhotoViewer(Theme.ResourcesProvider resourcesProvider2, View v) {
        String str;
        int i;
        int currentTTL;
        Theme.ResourcesProvider resourcesProvider3 = resourcesProvider2;
        if (this.parentActivity != null && this.captionEditText.getTag() == null) {
            BottomSheet.Builder builder = new BottomSheet.Builder(this.parentActivity, false, resourcesProvider3);
            builder.setUseHardwareLayer(false);
            LinearLayout linearLayout = new LinearLayout(this.parentActivity);
            linearLayout.setOrientation(1);
            builder.setCustomView(linearLayout);
            TextView titleView = new TextView(this.parentActivity);
            titleView.setLines(1);
            titleView.setSingleLine(true);
            titleView.setText(LocaleController.getString("MessageLifetime", NUM));
            titleView.setTextColor(-1);
            titleView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            titleView.setTextSize(1, 20.0f);
            titleView.setEllipsize(TextUtils.TruncateAt.MIDDLE);
            titleView.setPadding(AndroidUtilities.dp(21.0f), AndroidUtilities.dp(8.0f), AndroidUtilities.dp(21.0f), AndroidUtilities.dp(4.0f));
            titleView.setGravity(16);
            linearLayout.addView(titleView, LayoutHelper.createFrame(-1, -2.0f));
            titleView.setOnTouchListener(PhotoViewer$$ExternalSyntheticLambda32.INSTANCE);
            TextView titleView2 = new TextView(this.parentActivity);
            if (this.isCurrentVideo) {
                i = NUM;
                str = "MessageLifetimeVideo";
            } else {
                i = NUM;
                str = "MessageLifetimePhoto";
            }
            titleView2.setText(LocaleController.getString(str, i));
            titleView2.setTextColor(-8355712);
            titleView2.setTextSize(1, 14.0f);
            titleView2.setEllipsize(TextUtils.TruncateAt.MIDDLE);
            titleView2.setPadding(AndroidUtilities.dp(21.0f), 0, AndroidUtilities.dp(21.0f), AndroidUtilities.dp(8.0f));
            titleView2.setGravity(16);
            linearLayout.addView(titleView2, LayoutHelper.createFrame(-1, -2.0f));
            titleView2.setOnTouchListener(PhotoViewer$$ExternalSyntheticLambda34.INSTANCE);
            BottomSheet bottomSheet = builder.create();
            NumberPicker numberPicker = new NumberPicker((Context) this.parentActivity, resourcesProvider3);
            numberPicker.setMinValue(0);
            numberPicker.setMaxValue(28);
            Object object = this.imagesArrLocals.get(this.currentIndex);
            if (object instanceof MediaController.PhotoEntry) {
                currentTTL = ((MediaController.PhotoEntry) object).ttl;
            } else if ((object instanceof MediaController.SearchImage) != 0) {
                currentTTL = ((MediaController.SearchImage) object).ttl;
            } else {
                currentTTL = 0;
            }
            if (currentTTL == 0) {
                numberPicker.setValue(MessagesController.getGlobalMainSettings().getInt("self_destruct", 7));
            } else if (currentTTL < 0 || currentTTL >= 21) {
                numberPicker.setValue(((currentTTL / 5) + 21) - 5);
            } else {
                numberPicker.setValue(currentTTL);
            }
            numberPicker.setTextColor(-1);
            numberPicker.setSelectorColor(-11711155);
            numberPicker.setFormatter(PhotoViewer$$ExternalSyntheticLambda60.INSTANCE);
            linearLayout.addView(numberPicker, LayoutHelper.createLinear(-1, -2));
            FrameLayout buttonsLayout = new FrameLayout(this.parentActivity) {
                /* access modifiers changed from: protected */
                public void onLayout(boolean changed, int left, int top, int right, int bottom) {
                    int count = getChildCount();
                    int width = right - left;
                    for (int a = 0; a < count; a++) {
                        View child = getChildAt(a);
                        if (((Integer) child.getTag()).intValue() == -1) {
                            child.layout((width - getPaddingRight()) - child.getMeasuredWidth(), getPaddingTop(), width - getPaddingRight(), getPaddingTop() + child.getMeasuredHeight());
                        } else if (((Integer) child.getTag()).intValue() == -2) {
                            int x = getPaddingLeft();
                            child.layout(x, getPaddingTop(), child.getMeasuredWidth() + x, getPaddingTop() + child.getMeasuredHeight());
                        } else {
                            child.layout(getPaddingLeft(), getPaddingTop(), getPaddingLeft() + child.getMeasuredWidth(), getPaddingTop() + child.getMeasuredHeight());
                        }
                    }
                }
            };
            buttonsLayout.setPadding(AndroidUtilities.dp(8.0f), AndroidUtilities.dp(8.0f), AndroidUtilities.dp(8.0f), AndroidUtilities.dp(8.0f));
            linearLayout.addView(buttonsLayout, LayoutHelper.createLinear(-1, 52));
            TextView textView = new TextView(this.parentActivity);
            textView.setMinWidth(AndroidUtilities.dp(64.0f));
            textView.setTag(-1);
            textView.setTextSize(1, 14.0f);
            textView.setTextColor(getThemedColor("dialogFloatingButton"));
            textView.setGravity(17);
            textView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            textView.setText(LocaleController.getString("Done", NUM).toUpperCase());
            textView.setBackgroundDrawable(Theme.getRoundRectSelectorDrawable(-11944718));
            textView.setPadding(AndroidUtilities.dp(10.0f), 0, AndroidUtilities.dp(10.0f), 0);
            buttonsLayout.addView(textView, LayoutHelper.createFrame(-2, 36, 53));
            textView.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda29(this, numberPicker, bottomSheet));
            TextView textView2 = new TextView(this.parentActivity);
            textView2.setMinWidth(AndroidUtilities.dp(64.0f));
            textView2.setTag(-2);
            textView2.setTextSize(1, 14.0f);
            textView2.setTextColor(-1);
            textView2.setGravity(17);
            textView2.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            textView2.setText(LocaleController.getString("Cancel", NUM).toUpperCase());
            textView2.setBackgroundDrawable(Theme.getRoundRectSelectorDrawable(-1));
            textView2.setPadding(AndroidUtilities.dp(10.0f), 0, AndroidUtilities.dp(10.0f), 0);
            buttonsLayout.addView(textView2, LayoutHelper.createFrame(-2, 36, 53));
            textView2.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda68(bottomSheet));
            bottomSheet.show();
            bottomSheet.setBackgroundColor(-16777216);
        }
    }

    static /* synthetic */ boolean lambda$setParentActivity$23(View v13, MotionEvent event) {
        return true;
    }

    static /* synthetic */ boolean lambda$setParentActivity$24(View v12, MotionEvent event) {
        return true;
    }

    static /* synthetic */ String lambda$setParentActivity$25(int value) {
        if (value == 0) {
            return LocaleController.getString("ShortMessageLifetimeForever", NUM);
        }
        if (value < 1 || value >= 21) {
            return LocaleController.formatTTLString((value - 16) * 5);
        }
        return LocaleController.formatTTLString(value);
    }

    /* renamed from: lambda$setParentActivity$26$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3589lambda$setParentActivity$26$orgtelegramuiPhotoViewer(NumberPicker numberPicker, BottomSheet bottomSheet, View v1) {
        int seconds;
        int value = numberPicker.getValue();
        SharedPreferences.Editor editor = MessagesController.getGlobalMainSettings().edit();
        editor.putInt("self_destruct", value);
        editor.commit();
        bottomSheet.dismiss();
        if (value < 0 || value >= 21) {
            seconds = (value - 16) * 5;
        } else {
            seconds = value;
        }
        Object object1 = this.imagesArrLocals.get(this.currentIndex);
        if (object1 instanceof MediaController.PhotoEntry) {
            ((MediaController.PhotoEntry) object1).ttl = seconds;
        } else if (object1 instanceof MediaController.SearchImage) {
            ((MediaController.SearchImage) object1).ttl = seconds;
        }
        this.timeItem.setColorFilter(seconds != 0 ? new PorterDuffColorFilter(getThemedColor("dialogFloatingButton"), PorterDuff.Mode.MULTIPLY) : null);
        if (!this.checkImageView.isChecked()) {
            this.checkImageView.callOnClick();
        }
    }

    /* renamed from: lambda$setParentActivity$29$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3591lambda$setParentActivity$29$orgtelegramuiPhotoViewer(View view) {
        this.cropTransform.setViewTransform(this.previousHasTransform, this.previousCropPx, this.previousCropPy, this.previousCropRotation, this.previousCropOrientation, this.previousCropScale, 1.0f, 1.0f, this.previousCropPw, this.previousCropPh, 0.0f, 0.0f, this.previousCropMirrored);
        switchToEditMode(0);
    }

    /* renamed from: lambda$setParentActivity$30$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3593lambda$setParentActivity$30$orgtelegramuiPhotoViewer(View view) {
        if (this.currentEditMode != 1 || this.photoCropView.isReady()) {
            applyCurrentEditMode();
            switchToEditMode(0);
        }
    }

    /* renamed from: lambda$setParentActivity$31$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3594lambda$setParentActivity$31$orgtelegramuiPhotoViewer(View v) {
        this.photoCropView.reset();
    }

    /* renamed from: lambda$setParentActivity$32$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3595lambda$setParentActivity$32$orgtelegramuiPhotoViewer(ImageReceiver imageReceiver, boolean set, boolean thumb, boolean memCache) {
        PhotoViewerProvider photoViewerProvider;
        Bitmap bitmap;
        if (imageReceiver == this.centerImage && set && !thumb) {
            if (!this.isCurrentVideo && !((this.currentEditMode != 1 && this.sendPhotoType != 1) || this.photoCropView == null || (bitmap = imageReceiver.getBitmap()) == null)) {
                this.photoCropView.setBitmap(bitmap, imageReceiver.getOrientation(), this.sendPhotoType != 1, true, this.paintingOverlay, this.cropTransform, (VideoEditTextureView) null, (MediaController.CropState) null);
            }
            if (this.paintingOverlay.getVisibility() == 0) {
                this.containerView.requestLayout();
            }
            detectFaces();
        }
        if (imageReceiver == this.centerImage && set && (photoViewerProvider = this.placeProvider) != null && photoViewerProvider.scaleToFill() && !this.ignoreDidSetImage && this.sendPhotoType != 1) {
            if (!this.wasLayout) {
                this.dontResetZoomOnFirstLayout = true;
            } else {
                setScaleToFill();
            }
        }
    }

    /* renamed from: lambda$setParentActivity$33$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3596lambda$setParentActivity$33$orgtelegramuiPhotoViewer(View v) {
        if (this.captionEditText.getTag() == null) {
            setPhotoChecked();
        }
    }

    /* renamed from: lambda$setParentActivity$34$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3597lambda$setParentActivity$34$orgtelegramuiPhotoViewer(View v) {
        PhotoViewerProvider photoViewerProvider;
        if (this.captionEditText.getTag() == null && (photoViewerProvider = this.placeProvider) != null && photoViewerProvider.getSelectedPhotosOrder() != null && !this.placeProvider.getSelectedPhotosOrder().isEmpty()) {
            togglePhotosListView(!this.isPhotosListViewVisible, true);
        }
    }

    /* renamed from: lambda$setParentActivity$35$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3598lambda$setParentActivity$35$orgtelegramuiPhotoViewer(View view, int position) {
        int i;
        if (!this.imagesArrLocals.isEmpty() && (i = this.currentIndex) >= 0 && i < this.imagesArrLocals.size()) {
            Object entry = this.imagesArrLocals.get(this.currentIndex);
            if (entry instanceof MediaController.MediaEditState) {
                ((MediaController.MediaEditState) entry).editedInfo = getCurrentVideoEditedInfo();
            }
        }
        this.ignoreDidSetImage = true;
        int idx = this.imagesArrLocals.indexOf(view.getTag());
        if (idx >= 0) {
            this.currentIndex = -1;
            setImageIndex(idx);
        }
        this.ignoreDidSetImage = false;
    }

    /* renamed from: lambda$setParentActivity$36$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3599lambda$setParentActivity$36$orgtelegramuiPhotoViewer(View view, int position) {
        Object object = this.mentionsAdapter.getItem(position);
        int start = this.mentionsAdapter.getResultStartPosition();
        int len = this.mentionsAdapter.getResultLength();
        if (object instanceof TLRPC.User) {
            TLRPC.User user = (TLRPC.User) object;
            if (user.username != null) {
                PhotoViewerCaptionEnterView photoViewerCaptionEnterView = this.captionEditText;
                photoViewerCaptionEnterView.replaceWithText(start, len, "@" + user.username + " ", false);
                return;
            }
            String name = UserObject.getFirstName(user);
            Spannable spannable = new SpannableString(name + " ");
            spannable.setSpan(new URLSpanUserMentionPhotoViewer("" + user.id, true), 0, spannable.length(), 33);
            this.captionEditText.replaceWithText(start, len, spannable, false);
        } else if (object instanceof String) {
            PhotoViewerCaptionEnterView photoViewerCaptionEnterView2 = this.captionEditText;
            photoViewerCaptionEnterView2.replaceWithText(start, len, object + " ", false);
        } else if (object instanceof MediaDataController.KeywordResult) {
            String code = ((MediaDataController.KeywordResult) object).emoji;
            this.captionEditText.addEmojiToRecent(code);
            this.captionEditText.replaceWithText(start, len, code, true);
        }
    }

    /* renamed from: lambda$setParentActivity$38$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ boolean m3601lambda$setParentActivity$38$orgtelegramuiPhotoViewer(Theme.ResourcesProvider resourcesProvider2, View view, int position) {
        if (!(this.mentionsAdapter.getItem(position) instanceof String)) {
            return false;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(this.parentActivity, resourcesProvider2);
        builder.setTitle(LocaleController.getString("AppName", NUM));
        builder.setMessage(LocaleController.getString("ClearSearch", NUM));
        builder.setPositiveButton(LocaleController.getString("ClearButton", NUM).toUpperCase(), new PhotoViewer$$ExternalSyntheticLambda44(this));
        builder.setNegativeButton(LocaleController.getString("Cancel", NUM), (DialogInterface.OnClickListener) null);
        showAlertDialog(builder);
        return true;
    }

    /* renamed from: lambda$setParentActivity$37$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3600lambda$setParentActivity$37$orgtelegramuiPhotoViewer(DialogInterface dialogInterface, int i) {
        this.mentionsAdapter.clearRecentHashtags();
    }

    private void showScheduleDatePickerDialog() {
        if (this.parentChatActivity != null) {
            AlertsCreator.createScheduleDatePickerDialog((Context) this.parentActivity, this.parentChatActivity.getDialogId(), (AlertsCreator.ScheduleDatePickerDelegate) new PhotoViewer$$ExternalSyntheticLambda59(this), new AlertsCreator.ScheduleDatePickerColors(-1, -14342875, -1, NUM, -1, -NUM, NUM));
        }
    }

    /* access modifiers changed from: private */
    public void sendPressed(boolean notify, int scheduleDate) {
        sendPressed(notify, scheduleDate, false, false);
    }

    private void replacePressed() {
        sendPressed(false, 0, true, false);
    }

    private void sendPressed(boolean notify, int scheduleDate, boolean replace, boolean forceDocument) {
        int i;
        ChatActivity chatActivity;
        if (this.captionEditText.getTag() == null && this.placeProvider != null && !this.doneButtonPressed) {
            if (this.sendPhotoType == 1) {
                applyCurrentEditMode();
            }
            if (!replace && (chatActivity = this.parentChatActivity) != null) {
                TLRPC.Chat chat = chatActivity.getCurrentChat();
                if (this.parentChatActivity.getCurrentUser() != null || ((ChatObject.isChannel(chat) && chat.megagroup) || !ChatObject.isChannel(chat))) {
                    SharedPreferences.Editor edit = MessagesController.getNotificationsSettings(this.currentAccount).edit();
                    edit.putBoolean("silent_" + this.parentChatActivity.getDialogId(), !notify).commit();
                }
            }
            VideoEditedInfo videoEditedInfo = getCurrentVideoEditedInfo();
            if (!this.imagesArrLocals.isEmpty() && (i = this.currentIndex) >= 0 && i < this.imagesArrLocals.size()) {
                Object entry = this.imagesArrLocals.get(this.currentIndex);
                if (entry instanceof MediaController.MediaEditState) {
                    ((MediaController.MediaEditState) entry).editedInfo = videoEditedInfo;
                }
            }
            this.doneButtonPressed = true;
            if (!replace) {
                this.placeProvider.sendButtonPressed(this.currentIndex, videoEditedInfo, notify, scheduleDate, forceDocument);
            } else {
                this.placeProvider.replaceButtonPressed(this.currentIndex, videoEditedInfo);
            }
            closePhoto(false, false);
        }
    }

    private void setMenuItemIcon() {
        if (this.speedItem.getVisibility() != 0) {
            this.menuItem.setIcon(NUM);
        } else if (Math.abs(this.currentVideoSpeed - 0.25f) < 0.001f) {
            this.menuItem.setIcon(NUM);
            this.speedItem.setSubtext(LocaleController.getString("SpeedVerySlow", NUM));
        } else if (Math.abs(this.currentVideoSpeed - 0.5f) < 0.001f) {
            this.menuItem.setIcon(NUM);
            this.speedItem.setSubtext(LocaleController.getString("SpeedSlow", NUM));
        } else if (Math.abs(this.currentVideoSpeed - 1.0f) < 0.001f) {
            this.menuItem.setIcon(NUM);
            this.speedItem.setSubtext(LocaleController.getString("SpeedNormal", NUM));
        } else if (Math.abs(this.currentVideoSpeed - 1.5f) < 0.001f) {
            this.menuItem.setIcon(NUM);
            this.speedItem.setSubtext(LocaleController.getString("SpeedFast", NUM));
        } else {
            this.menuItem.setIcon(NUM);
            this.speedItem.setSubtext(LocaleController.getString("SpeedVeryFast", NUM));
        }
    }

    private boolean checkInlinePermissions() {
        if (this.parentActivity == null) {
            return false;
        }
        if (Build.VERSION.SDK_INT < 23 || Settings.canDrawOverlays(this.parentActivity)) {
            return true;
        }
        AlertsCreator.createDrawOverlayPermissionDialog(this.parentActivity, (DialogInterface.OnClickListener) null).show();
        return false;
    }

    /* access modifiers changed from: private */
    public void captureCurrentFrame() {
        TextureView textureView;
        if (this.captureFrameAtTime != -1 && (textureView = this.videoTextureView) != null) {
            this.captureFrameAtTime = -1;
            final Bitmap bitmap = textureView.getBitmap();
            this.flashView.animate().alpha(1.0f).setInterpolator(CubicBezierInterpolator.EASE_BOTH).setDuration(85).setListener(new AnimatorListenerAdapter() {
                public void onAnimationEnd(Animator animation) {
                    PhotoViewer.this.photoCropView.setVideoThumb(bitmap, 0);
                    AnimatorSet unused = PhotoViewer.this.flashAnimator = new AnimatorSet();
                    PhotoViewer.this.flashAnimator.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.flashView, PhotoViewer.this.FLASH_VIEW_VALUE, new float[]{0.0f})});
                    PhotoViewer.this.flashAnimator.setDuration(85);
                    PhotoViewer.this.flashAnimator.setInterpolator(CubicBezierInterpolator.EASE_OUT);
                    PhotoViewer.this.flashAnimator.addListener(new AnimatorListenerAdapter() {
                        public void onAnimationEnd(Animator animation) {
                            if (PhotoViewer.this.flashAnimator != null) {
                                AndroidUtilities.runOnUIThread(PhotoViewer.this.videoPlayRunnable = new PhotoViewer$34$1$$ExternalSyntheticLambda0(this), 860);
                            }
                        }

                        /* renamed from: lambda$onAnimationEnd$0$org-telegram-ui-PhotoViewer$34$1  reason: not valid java name */
                        public /* synthetic */ void m3623lambda$onAnimationEnd$0$orgtelegramuiPhotoViewer$34$1() {
                            boolean unused = PhotoViewer.this.manuallyPaused = false;
                            if (PhotoViewer.this.videoPlayer != null) {
                                PhotoViewer.this.videoPlayer.play();
                            }
                            Runnable unused2 = PhotoViewer.this.videoPlayRunnable = null;
                        }

                        public void onAnimationCancel(Animator animation) {
                            AnimatorSet unused = PhotoViewer.this.flashAnimator = null;
                        }
                    });
                    PhotoViewer.this.flashAnimator.start();
                }
            }).start();
        }
    }

    /* access modifiers changed from: private */
    /* renamed from: createCaptionTextView */
    public TextView m3603lambda$setParentActivity$5$orgtelegramuiPhotoViewer(LinkMovementMethod linkMovementMethod) {
        TextView textView = new TextView(this.activityContext) {
            private boolean handleClicks;

            public boolean onTouchEvent(MotionEvent event) {
                if (event.getActionMasked() == 0) {
                    this.handleClicks = PhotoViewer.this.needCaptionLayout;
                }
                return PhotoViewer.this.bottomTouchEnabled && super.onTouchEvent(event);
            }

            public void scrollTo(int x, int y) {
                if (getParent().getParent() == PhotoViewer.this.pickerView) {
                    super.scrollTo(x, y);
                    this.handleClicks = false;
                }
            }

            public boolean performClick() {
                return this.handleClicks && super.performClick();
            }

            public void setPressed(boolean pressed) {
                boolean needsRefresh = pressed != isPressed();
                super.setPressed(pressed);
                if (needsRefresh) {
                    invalidate();
                }
            }
        };
        textView.setMovementMethod(linkMovementMethod);
        ViewHelper.setPadding(textView, 16.0f, 8.0f, 16.0f, 8.0f);
        textView.setLinkTextColor(-8994063);
        textView.setTextColor(-1);
        textView.setHighlightColor(NUM);
        textView.setGravity(LayoutHelper.getAbsoluteGravityStart() | 16);
        textView.setTextSize(1, 16.0f);
        textView.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda69(this));
        return textView;
    }

    /* renamed from: lambda$createCaptionTextView$39$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3559lambda$createCaptionTextView$39$orgtelegramuiPhotoViewer(View v) {
        openCaptionEnter();
    }

    /* access modifiers changed from: private */
    public int getLeftInset() {
        if (this.lastInsets == null || Build.VERSION.SDK_INT < 21) {
            return 0;
        }
        return ((WindowInsets) this.lastInsets).getSystemWindowInsetLeft();
    }

    /* access modifiers changed from: private */
    public int getRightInset() {
        if (this.lastInsets == null || Build.VERSION.SDK_INT < 21) {
            return 0;
        }
        return ((WindowInsets) this.lastInsets).getSystemWindowInsetRight();
    }

    /* access modifiers changed from: private */
    public void dismissInternal() {
        try {
            if (this.windowView.getParent() != null) {
                Activity activity = this.parentActivity;
                if (activity instanceof LaunchActivity) {
                    ((LaunchActivity) activity).drawerLayoutContainer.setAllowDrawContent(true);
                }
                ((WindowManager) this.parentActivity.getSystemService("window")).removeView(this.windowView);
            }
        } catch (Exception e) {
            FileLog.e((Throwable) e);
        }
    }

    /* access modifiers changed from: private */
    public void switchToPip(boolean fromGesture) {
        CubicBezierInterpolator interpolator2;
        if (this.videoPlayer != null && this.textureUploaded && checkInlinePermissions() && !this.changingTextureView && !this.switchingInlineMode && !this.isInline) {
            if (PipInstance != null) {
                PipInstance.destroyPhotoViewer();
            }
            this.openedFullScreenVideo = false;
            PipInstance = Instance;
            Instance = null;
            this.switchingInlineMode = true;
            this.isVisible = false;
            AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
            PlaceProviderObject placeProviderObject = this.currentPlaceObject;
            if (placeProviderObject != null && !placeProviderObject.imageReceiver.getVisible()) {
                this.currentPlaceObject.imageReceiver.setVisible(true, true);
                AnimatedFileDrawable animation = this.currentPlaceObject.imageReceiver.getAnimation();
                if (animation != null) {
                    Bitmap bitmap = animation.getAnimatedBitmap();
                    if (bitmap != null) {
                        try {
                            Bitmap src = this.videoTextureView.getBitmap(bitmap.getWidth(), bitmap.getHeight());
                            new Canvas(bitmap).drawBitmap(src, 0.0f, 0.0f, (Paint) null);
                            src.recycle();
                        } catch (Throwable e) {
                            FileLog.e(e);
                        }
                    }
                    animation.seekTo(this.videoPlayer.getCurrentPosition(), true);
                    if (fromGesture) {
                        this.currentPlaceObject.imageReceiver.setAlpha(0.0f);
                        final ImageReceiver imageReceiver = this.currentPlaceObject.imageReceiver;
                        ValueAnimator valueAnimator = ValueAnimator.ofFloat(new float[]{0.0f, 1.0f});
                        valueAnimator.addUpdateListener(new PhotoViewer$$ExternalSyntheticLambda0(imageReceiver));
                        valueAnimator.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animation) {
                                imageReceiver.setAlpha(1.0f);
                            }
                        });
                        valueAnimator.setDuration(250);
                        valueAnimator.start();
                    }
                    this.currentPlaceObject.imageReceiver.setAllowStartAnimation(true);
                    this.currentPlaceObject.imageReceiver.startAnimation();
                }
            }
            if (Build.VERSION.SDK_INT >= 21) {
                this.pipAnimationInProgress = true;
                org.telegram.ui.Components.Rect rect = PipVideoView.getPipRect(this.aspectRatioFrameLayout.getAspectRatio());
                float scale2 = rect.width / ((float) this.videoTextureView.getWidth());
                ValueAnimator valueAnimator2 = ValueAnimator.ofFloat(new float[]{0.0f, 1.0f});
                float fromX = this.videoTextureView.getTranslationX();
                float fromY = this.videoTextureView.getTranslationY() + this.translationY;
                float fromY2 = this.textureImageView.getTranslationY() + this.translationY;
                float toX = rect.x;
                float toX2 = (rect.x - this.aspectRatioFrameLayout.getX()) + ((float) getLeftInset());
                float toY = rect.y;
                float toY2 = rect.y - this.aspectRatioFrameLayout.getY();
                this.textureImageView.setTranslationY(fromY2);
                this.videoTextureView.setTranslationY(fromY);
                this.translationY = 0.0f;
                this.containerView.invalidate();
                if (!fromGesture) {
                    interpolator2 = null;
                } else if (fromY < toY2) {
                    interpolator2 = new CubicBezierInterpolator(0.5d, 0.0d, 0.9d, 0.9d);
                } else {
                    interpolator2 = new CubicBezierInterpolator(0.0d, 0.5d, 0.9d, 0.9d);
                }
                PhotoViewer$$ExternalSyntheticLambda22 photoViewer$$ExternalSyntheticLambda22 = r1;
                float f = toX;
                float f2 = fromY2;
                ValueAnimator valueAnimator3 = valueAnimator2;
                PhotoViewer$$ExternalSyntheticLambda22 photoViewer$$ExternalSyntheticLambda222 = new PhotoViewer$$ExternalSyntheticLambda22(this, interpolator2, fromX, toX, fromY2, toY, toX2, fromY, toY2);
                valueAnimator3.addUpdateListener(photoViewer$$ExternalSyntheticLambda22);
                AnimatorSet animatorSet = new AnimatorSet();
                animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this.textureImageView, View.SCALE_X, new float[]{scale2}), ObjectAnimator.ofFloat(this.textureImageView, View.SCALE_Y, new float[]{scale2}), ObjectAnimator.ofFloat(this.videoTextureView, View.SCALE_X, new float[]{scale2}), ObjectAnimator.ofFloat(this.videoTextureView, View.SCALE_Y, new float[]{scale2}), ObjectAnimator.ofInt(this.backgroundDrawable, AnimationProperties.COLOR_DRAWABLE_ALPHA, new int[]{0}), valueAnimator3});
                if (fromGesture) {
                    animatorSet.setInterpolator(CubicBezierInterpolator.EASE_OUT);
                    animatorSet.setDuration(300);
                } else {
                    animatorSet.setInterpolator(new DecelerateInterpolator());
                    animatorSet.setDuration(250);
                }
                animatorSet.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        boolean unused = PhotoViewer.this.pipAnimationInProgress = false;
                        PhotoViewer.this.switchToInlineRunnable.run();
                    }
                });
                animatorSet.start();
                if (!fromGesture) {
                    toggleActionBar(false, true, new ActionBarToggleParams().enableStatusBarAnimation(false).enableTranslationAnimation(false).animationDuration(250).animationInterpolator(new DecelerateInterpolator()));
                }
            } else {
                this.switchToInlineRunnable.run();
                dismissInternal();
            }
            ChatActivity chatActivity = this.parentChatActivity;
            if (chatActivity != null) {
                chatActivity.getFragmentView().invalidate();
            }
        }
    }

    /* renamed from: lambda$switchToPip$41$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3613lambda$switchToPip$41$orgtelegramuiPhotoViewer(CubicBezierInterpolator interpolator2, float fromX, float toX, float fromY2, float toY, float toX2, float fromY, float toY2, ValueAnimator animation) {
        float xValue = ((Float) animation.getAnimatedValue()).floatValue();
        float yValue = interpolator2 == null ? xValue : interpolator2.getInterpolation(xValue);
        this.textureImageView.setTranslationX(((1.0f - xValue) * fromX) + (toX * xValue));
        this.textureImageView.setTranslationY(((1.0f - yValue) * fromY2) + (toY * yValue));
        this.videoTextureView.setTranslationX(((1.0f - xValue) * fromX) + (toX2 * xValue));
        this.videoTextureView.setTranslationY(((1.0f - yValue) * fromY) + (toY2 * yValue));
    }

    public VideoPlayer getVideoPlayer() {
        return this.videoPlayer;
    }

    public void exitFromPip() {
        TextureView textureView;
        if (this.isInline) {
            if (Instance != null) {
                Instance.closePhoto(false, true);
            }
            PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
            if (photoViewerWebView2 != null) {
                photoViewerWebView2.exitFromPip();
            }
            Instance = PipInstance;
            PipInstance = null;
            if (this.photoViewerWebView == null) {
                this.switchingInlineMode = true;
                Bitmap bitmap = this.currentBitmap;
                if (bitmap != null) {
                    bitmap.recycle();
                    this.currentBitmap = null;
                }
                this.changingTextureView = true;
            }
            this.isInline = false;
            if (this.photoViewerWebView == null && (textureView = this.videoTextureView) != null) {
                textureView.setVisibility(4);
                this.aspectRatioFrameLayout.addView(this.videoTextureView);
            }
            if (ApplicationLoader.mainInterfacePaused) {
                try {
                    this.parentActivity.startService(new Intent(ApplicationLoader.applicationContext, BringAppForegroundService.class));
                } catch (Throwable e) {
                    FileLog.e(e);
                }
            }
            if (this.photoViewerWebView == null) {
                if (Build.VERSION.SDK_INT < 21 || this.videoTextureView == null) {
                    this.pipVideoView.close();
                    this.pipVideoView = null;
                } else {
                    this.pipAnimationInProgress = true;
                    org.telegram.ui.Components.Rect rect = PipVideoView.getPipRect(this.aspectRatioFrameLayout.getAspectRatio());
                    float scale2 = rect.width / ((float) this.textureImageView.getLayoutParams().width);
                    this.textureImageView.setScaleX(scale2);
                    this.textureImageView.setScaleY(scale2);
                    this.textureImageView.setTranslationX(rect.x);
                    this.textureImageView.setTranslationY(rect.y);
                    this.videoTextureView.setScaleX(scale2);
                    this.videoTextureView.setScaleY(scale2);
                    this.videoTextureView.setTranslationX(rect.x - this.aspectRatioFrameLayout.getX());
                    this.videoTextureView.setTranslationY(rect.y - this.aspectRatioFrameLayout.getY());
                }
            }
            try {
                this.isVisible = true;
                ((WindowManager) this.parentActivity.getSystemService("window")).addView(this.windowView, this.windowLayoutParams);
                PlaceProviderObject placeProviderObject = this.currentPlaceObject;
                if (placeProviderObject != null) {
                    placeProviderObject.imageReceiver.setVisible(false, false);
                }
            } catch (Exception e2) {
                FileLog.e((Throwable) e2);
            }
            if (Build.VERSION.SDK_INT >= 21) {
                this.waitingForDraw = 4;
            }
        }
    }

    /* access modifiers changed from: private */
    public void updateVideoSeekPreviewPosition() {
        int x = (this.videoPlayerSeekbar.getThumbX() + AndroidUtilities.dp(2.0f)) - (this.videoPreviewFrame.getMeasuredWidth() / 2);
        int min = AndroidUtilities.dp(10.0f);
        int max = (this.videoPlayerControlFrameLayout.getMeasuredWidth() - AndroidUtilities.dp(10.0f)) - (this.videoPreviewFrame.getMeasuredWidth() / 2);
        if (x < min) {
            x = min;
        } else if (x >= max) {
            x = max;
        }
        this.videoPreviewFrame.setTranslationX((float) x);
    }

    /* access modifiers changed from: private */
    public void showVideoSeekPreviewPosition(boolean show) {
        if (show && this.videoPreviewFrame.getTag() != null) {
            return;
        }
        if (!show && this.videoPreviewFrame.getTag() == null) {
            return;
        }
        if (!show || this.videoPreviewFrame.isReady()) {
            AnimatorSet animatorSet = this.videoPreviewFrameAnimation;
            if (animatorSet != null) {
                animatorSet.cancel();
            }
            this.videoPreviewFrame.setTag(show ? 1 : null);
            AnimatorSet animatorSet2 = new AnimatorSet();
            this.videoPreviewFrameAnimation = animatorSet2;
            Animator[] animatorArr = new Animator[1];
            VideoSeekPreviewImage videoSeekPreviewImage = this.videoPreviewFrame;
            Property property = View.ALPHA;
            float[] fArr = new float[1];
            fArr[0] = show ? 1.0f : 0.0f;
            animatorArr[0] = ObjectAnimator.ofFloat(videoSeekPreviewImage, property, fArr);
            animatorSet2.playTogether(animatorArr);
            this.videoPreviewFrameAnimation.addListener(new AnimatorListenerAdapter() {
                public void onAnimationEnd(Animator animation) {
                    AnimatorSet unused = PhotoViewer.this.videoPreviewFrameAnimation = null;
                }
            });
            this.videoPreviewFrameAnimation.setDuration(180);
            this.videoPreviewFrameAnimation.start();
            return;
        }
        this.needShowOnReady = true;
    }

    private void createVideoControlsInterface() {
        VideoPlayerControlFrameLayout videoPlayerControlFrameLayout2 = new VideoPlayerControlFrameLayout(this.containerView.getContext());
        this.videoPlayerControlFrameLayout = videoPlayerControlFrameLayout2;
        this.containerView.addView(videoPlayerControlFrameLayout2, LayoutHelper.createFrame(-1, 48, 83));
        final VideoPlayerSeekBar.SeekBarDelegate seekBarDelegate = new VideoPlayerSeekBar.SeekBarDelegate() {
            public void onSeekBarDrag(float progress) {
                if (PhotoViewer.this.videoPlayer != null) {
                    if (!PhotoViewer.this.inPreview && PhotoViewer.this.videoTimelineView.getVisibility() == 0) {
                        progress = PhotoViewer.this.videoTimelineView.getLeftProgress() + ((PhotoViewer.this.videoTimelineView.getRightProgress() - PhotoViewer.this.videoTimelineView.getLeftProgress()) * progress);
                    }
                    long duration = PhotoViewer.this.videoPlayer.getDuration();
                    if (duration == -9223372036854775807L) {
                        float unused = PhotoViewer.this.seekToProgressPending = progress;
                    } else {
                        PhotoViewer.this.videoPlayer.seekTo((long) ((int) (((float) duration) * progress)));
                    }
                    PhotoViewer.this.showVideoSeekPreviewPosition(false);
                    boolean unused2 = PhotoViewer.this.needShowOnReady = false;
                }
            }

            public void onSeekBarContinuousDrag(float progress) {
                if (!(PhotoViewer.this.videoPlayer == null || PhotoViewer.this.videoPreviewFrame == null)) {
                    PhotoViewer.this.videoPreviewFrame.setProgress(progress, PhotoViewer.this.videoPlayerSeekbar.getWidth());
                }
                PhotoViewer.this.showVideoSeekPreviewPosition(true);
                PhotoViewer.this.updateVideoSeekPreviewPosition();
            }
        };
        FloatSeekBarAccessibilityDelegate accessibilityDelegate = new FloatSeekBarAccessibilityDelegate() {
            public float getProgress() {
                return PhotoViewer.this.videoPlayerSeekbar.getProgress();
            }

            public void setProgress(float progress) {
                seekBarDelegate.onSeekBarDrag(progress);
                PhotoViewer.this.videoPlayerSeekbar.setProgress(progress);
                PhotoViewer.this.videoPlayerSeekbarView.invalidate();
            }

            public String getContentDescription(View host) {
                return LocaleController.formatString("AccDescrPlayerDuration", NUM, LocaleController.formatPluralString("Minutes", PhotoViewer.this.videoPlayerCurrentTime[0]) + ' ' + LocaleController.formatPluralString("Seconds", PhotoViewer.this.videoPlayerCurrentTime[1]), LocaleController.formatPluralString("Minutes", PhotoViewer.this.videoPlayerTotalTime[0]) + ' ' + LocaleController.formatPluralString("Seconds", PhotoViewer.this.videoPlayerTotalTime[1]));
            }
        };
        AnonymousClass41 r4 = new View(this.containerView.getContext()) {
            /* access modifiers changed from: protected */
            public void onDraw(Canvas canvas) {
                PhotoViewer.this.videoPlayerSeekbar.draw(canvas, this);
            }
        };
        this.videoPlayerSeekbarView = r4;
        r4.setAccessibilityDelegate(accessibilityDelegate);
        this.videoPlayerSeekbarView.setImportantForAccessibility(1);
        this.videoPlayerControlFrameLayout.addView(this.videoPlayerSeekbarView, LayoutHelper.createFrame(-1, -1.0f));
        VideoPlayerSeekBar videoPlayerSeekBar = new VideoPlayerSeekBar(this.videoPlayerSeekbarView);
        this.videoPlayerSeekbar = videoPlayerSeekBar;
        videoPlayerSeekBar.setHorizontalPadding(AndroidUtilities.dp(2.0f));
        this.videoPlayerSeekbar.setColors(NUM, NUM, -1, -1, -1, NUM);
        this.videoPlayerSeekbar.setDelegate(seekBarDelegate);
        AnonymousClass42 r42 = new VideoSeekPreviewImage(this.containerView.getContext(), new PhotoViewer$$ExternalSyntheticLambda65(this)) {
            /* access modifiers changed from: protected */
            public void onLayout(boolean changed, int left, int top, int right, int bottom) {
                super.onLayout(changed, left, top, right, bottom);
                PhotoViewer.this.updateVideoSeekPreviewPosition();
            }

            public void setVisibility(int visibility) {
                super.setVisibility(visibility);
                if (visibility == 0) {
                    PhotoViewer.this.updateVideoSeekPreviewPosition();
                }
            }
        };
        this.videoPreviewFrame = r42;
        r42.setAlpha(0.0f);
        this.containerView.addView(this.videoPreviewFrame, LayoutHelper.createFrame(-2, -2.0f, 83, 0.0f, 0.0f, 0.0f, 58.0f));
        SimpleTextView simpleTextView = new SimpleTextView(this.containerView.getContext());
        this.videoPlayerTime = simpleTextView;
        simpleTextView.setTextColor(-1);
        this.videoPlayerTime.setGravity(53);
        this.videoPlayerTime.setTextSize(14);
        this.videoPlayerTime.setImportantForAccessibility(2);
        this.videoPlayerControlFrameLayout.addView(this.videoPlayerTime, LayoutHelper.createFrame(-2, -2.0f, 53, 0.0f, 15.0f, 12.0f, 0.0f));
        ImageView imageView = new ImageView(this.containerView.getContext());
        this.exitFullscreenButton = imageView;
        imageView.setImageResource(NUM);
        this.exitFullscreenButton.setContentDescription(LocaleController.getString("AccExitFullscreen", NUM));
        this.exitFullscreenButton.setScaleType(ImageView.ScaleType.CENTER);
        this.exitFullscreenButton.setBackground(Theme.createSelectorDrawable(NUM));
        this.exitFullscreenButton.setVisibility(4);
        this.videoPlayerControlFrameLayout.addView(this.exitFullscreenButton, LayoutHelper.createFrame(48, 48, 53));
        this.exitFullscreenButton.setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda3(this));
    }

    /* renamed from: lambda$createVideoControlsInterface$42$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3563x4634f8b() {
        if (this.needShowOnReady) {
            showVideoSeekPreviewPosition(true);
        }
    }

    /* renamed from: lambda$createVideoControlsInterface$43$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3564x2db3340c(View v) {
        Activity activity = this.parentActivity;
        if (activity != null) {
            this.wasRotated = false;
            this.fullscreenedByButton = 2;
            if (this.prevOrientation == -10) {
                this.prevOrientation = activity.getRequestedOrientation();
            }
            this.parentActivity.setRequestedOrientation(1);
        }
    }

    private void openCaptionEnter() {
        int i;
        if (this.imageMoveAnimation == null && this.changeModeAnimation == null && this.currentEditMode == 0 && (i = this.sendPhotoType) != 1 && i != 3 && i != 10) {
            if (!this.windowView.isFocusable()) {
                makeFocusable();
            }
            this.keyboardAnimationEnabled = true;
            this.selectedPhotosListView.setEnabled(false);
            this.photosCounterView.setRotationX(0.0f);
            this.isPhotosListViewVisible = false;
            this.captionEditText.setTag(1);
            this.captionEditText.openKeyboard();
            this.captionEditText.setImportantForAccessibility(0);
            this.lastTitle = this.actionBar.getTitle();
            this.captionEditText.setVisibility(0);
        }
    }

    private int[] fixVideoWidthHeight(int w, int h) {
        int[] result = {w, h};
        if (Build.VERSION.SDK_INT >= 21) {
            MediaCodec encoder = null;
            try {
                encoder = MediaCodec.createEncoderByType("video/avc");
                MediaCodecInfo.VideoCapabilities videoCapabilities = encoder.getCodecInfo().getCapabilitiesForType("video/avc").getVideoCapabilities();
                Range<Integer> widths = videoCapabilities.getSupportedWidths();
                Range<Integer> heights = videoCapabilities.getSupportedHeights();
                result[0] = Math.max(widths.getLower().intValue(), Math.round(((float) w) / 16.0f) * 16);
                result[1] = Math.max(heights.getLower().intValue(), Math.round(((float) h) / 16.0f) * 16);
                if (encoder != null) {
                    try {
                        encoder.release();
                    } catch (Exception e) {
                    }
                }
            } catch (Exception e2) {
                if (encoder != null) {
                    encoder.release();
                }
            } catch (Throwable th) {
                if (encoder != null) {
                    try {
                        encoder.release();
                    } catch (Exception e3) {
                    }
                }
                throw th;
            }
        }
        return result;
    }

    /* access modifiers changed from: private */
    public VideoEditedInfo getCurrentVideoEditedInfo() {
        int i = -1;
        boolean z = false;
        ArrayList<VideoEditedInfo.MediaEntity> arrayList = null;
        if (!this.isCurrentVideo && hasAnimatedMediaEntities() && this.centerImage.getBitmapWidth() > 0) {
            float maxSize = this.sendPhotoType == 1 ? 800.0f : 854.0f;
            VideoEditedInfo videoEditedInfo = new VideoEditedInfo();
            videoEditedInfo.startTime = 0;
            videoEditedInfo.start = (float) 0;
            videoEditedInfo.endTime = Math.min(3000, this.editState.averageDuration);
            while (videoEditedInfo.endTime > 0 && videoEditedInfo.endTime < 1000) {
                videoEditedInfo.endTime *= 2;
            }
            videoEditedInfo.end = (float) videoEditedInfo.endTime;
            videoEditedInfo.rotationValue = 0;
            videoEditedInfo.originalPath = this.currentImagePath;
            videoEditedInfo.estimatedSize = (long) ((int) ((((float) videoEditedInfo.endTime) / 1000.0f) * 115200.0f));
            videoEditedInfo.estimatedDuration = videoEditedInfo.endTime;
            videoEditedInfo.framerate = 30;
            videoEditedInfo.originalDuration = videoEditedInfo.endTime;
            videoEditedInfo.filterState = this.editState.savedFilterState;
            if (this.editState.croppedPaintPath != null) {
                videoEditedInfo.paintPath = this.editState.croppedPaintPath;
                if (this.editState.croppedMediaEntities != null && !this.editState.croppedMediaEntities.isEmpty()) {
                    arrayList = this.editState.croppedMediaEntities;
                }
                videoEditedInfo.mediaEntities = arrayList;
            } else {
                videoEditedInfo.paintPath = this.editState.paintPath;
                videoEditedInfo.mediaEntities = this.editState.mediaEntities;
            }
            videoEditedInfo.isPhoto = true;
            int width = this.centerImage.getBitmapWidth();
            int height = this.centerImage.getBitmapHeight();
            if (this.editState.cropState != null) {
                if (this.editState.cropState.transformRotation == 90 || this.editState.cropState.transformRotation == 270) {
                    int temp = width;
                    width = height;
                    height = temp;
                }
                width = (int) (((float) width) * this.editState.cropState.cropPw);
                height = (int) (((float) height) * this.editState.cropState.cropPh);
            }
            if (this.sendPhotoType == 1) {
                width = height;
            }
            float scale2 = Math.max(((float) width) / maxSize, ((float) height) / maxSize);
            if (scale2 < 1.0f) {
                scale2 = 1.0f;
            }
            int width2 = (int) (((float) width) / scale2);
            int height2 = (int) (((float) height) / scale2);
            if (width2 % 16 != 0) {
                width2 = Math.max(1, Math.round(((float) width2) / 16.0f)) * 16;
            }
            if (height2 % 16 != 0) {
                height2 = Math.max(1, Math.round(((float) height2) / 16.0f)) * 16;
            }
            videoEditedInfo.resultWidth = width2;
            videoEditedInfo.originalWidth = width2;
            videoEditedInfo.resultHeight = height2;
            videoEditedInfo.originalHeight = height2;
            videoEditedInfo.bitrate = -1;
            videoEditedInfo.muted = true;
            videoEditedInfo.avatarStartTime = 0;
            return videoEditedInfo;
        } else if (!this.isCurrentVideo || this.currentPlayingVideoFile == null || this.compressionsCount == 0) {
            return null;
        } else {
            VideoEditedInfo videoEditedInfo2 = new VideoEditedInfo();
            videoEditedInfo2.startTime = this.startTime;
            videoEditedInfo2.endTime = this.endTime;
            videoEditedInfo2.start = this.videoCutStart;
            videoEditedInfo2.end = this.videoCutEnd;
            videoEditedInfo2.rotationValue = this.rotationValue;
            videoEditedInfo2.originalWidth = this.originalWidth;
            videoEditedInfo2.originalHeight = this.originalHeight;
            videoEditedInfo2.bitrate = this.bitrate;
            videoEditedInfo2.originalPath = this.currentPathObject;
            long j = this.estimatedSize;
            if (j == 0) {
                j = 1;
            }
            videoEditedInfo2.estimatedSize = j;
            videoEditedInfo2.estimatedDuration = this.estimatedDuration;
            videoEditedInfo2.framerate = this.videoFramerate;
            videoEditedInfo2.originalDuration = (long) (this.videoDuration * 1000.0f);
            videoEditedInfo2.filterState = this.editState.savedFilterState;
            if (this.editState.croppedPaintPath != null) {
                videoEditedInfo2.paintPath = this.editState.croppedPaintPath;
                if (this.editState.croppedMediaEntities != null && !this.editState.croppedMediaEntities.isEmpty()) {
                    arrayList = this.editState.croppedMediaEntities;
                }
                videoEditedInfo2.mediaEntities = arrayList;
            } else {
                videoEditedInfo2.paintPath = this.editState.paintPath;
                if (this.editState.mediaEntities != null && !this.editState.mediaEntities.isEmpty()) {
                    arrayList = this.editState.mediaEntities;
                }
                videoEditedInfo2.mediaEntities = arrayList;
            }
            if (this.sendPhotoType == 1 || this.muteVideo || !(this.compressItem.getTag() == null || (videoEditedInfo2.resultWidth == this.originalWidth && videoEditedInfo2.resultHeight == this.originalHeight))) {
                if (this.muteVideo || this.sendPhotoType == 1) {
                    this.selectedCompression = 1;
                    updateWidthHeightBitrateForCompression();
                }
                videoEditedInfo2.resultWidth = this.resultWidth;
                videoEditedInfo2.resultHeight = this.resultHeight;
                if (!this.muteVideo && this.sendPhotoType != 1) {
                    i = this.bitrate;
                }
                videoEditedInfo2.bitrate = i;
            } else {
                videoEditedInfo2.resultWidth = this.originalWidth;
                videoEditedInfo2.resultHeight = this.originalHeight;
                if (!this.muteVideo) {
                    i = this.originalBitrate;
                }
                videoEditedInfo2.bitrate = i;
            }
            videoEditedInfo2.cropState = this.editState.cropState;
            if (videoEditedInfo2.cropState != null) {
                videoEditedInfo2.rotationValue += videoEditedInfo2.cropState.transformRotation;
                while (videoEditedInfo2.rotationValue >= 360) {
                    videoEditedInfo2.rotationValue -= 360;
                }
                if (videoEditedInfo2.rotationValue == 90 || videoEditedInfo2.rotationValue == 270) {
                    videoEditedInfo2.cropState.transformWidth = (int) (((float) videoEditedInfo2.resultWidth) * videoEditedInfo2.cropState.cropPh);
                    videoEditedInfo2.cropState.transformHeight = (int) (((float) videoEditedInfo2.resultHeight) * videoEditedInfo2.cropState.cropPw);
                } else {
                    videoEditedInfo2.cropState.transformWidth = (int) (((float) videoEditedInfo2.resultWidth) * videoEditedInfo2.cropState.cropPw);
                    videoEditedInfo2.cropState.transformHeight = (int) (((float) videoEditedInfo2.resultHeight) * videoEditedInfo2.cropState.cropPh);
                }
                if (this.sendPhotoType == 1) {
                    if (videoEditedInfo2.cropState.transformWidth > 800) {
                        videoEditedInfo2.cropState.transformWidth = 800;
                    }
                    if (videoEditedInfo2.cropState.transformHeight > 800) {
                        videoEditedInfo2.cropState.transformHeight = 800;
                    }
                    MediaController.CropState cropState = videoEditedInfo2.cropState;
                    MediaController.CropState cropState2 = videoEditedInfo2.cropState;
                    int min = Math.min(videoEditedInfo2.cropState.transformWidth, videoEditedInfo2.cropState.transformHeight);
                    cropState2.transformHeight = min;
                    cropState.transformWidth = min;
                }
                if (BuildVars.LOGS_ENABLED) {
                    FileLog.d("original transformed w = " + videoEditedInfo2.cropState.transformWidth + " h = " + videoEditedInfo2.cropState.transformHeight + " r = " + videoEditedInfo2.rotationValue);
                }
                int[] fixedSize = fixVideoWidthHeight(videoEditedInfo2.cropState.transformWidth, videoEditedInfo2.cropState.transformHeight);
                videoEditedInfo2.cropState.transformWidth = fixedSize[0];
                videoEditedInfo2.cropState.transformHeight = fixedSize[1];
                if (BuildVars.LOGS_ENABLED) {
                    FileLog.d("fixed transformed w = " + videoEditedInfo2.cropState.transformWidth + " h = " + videoEditedInfo2.cropState.transformHeight);
                }
            }
            if (this.sendPhotoType == 1) {
                videoEditedInfo2.avatarStartTime = this.avatarStartTime;
                videoEditedInfo2.originalBitrate = this.originalBitrate;
            }
            if (this.muteVideo || this.sendPhotoType == 1) {
                z = true;
            }
            videoEditedInfo2.muted = z;
            return videoEditedInfo2;
        }
    }

    private boolean supportsSendingNewEntities() {
        ChatActivity chatActivity = this.parentChatActivity;
        return chatActivity != null && (chatActivity.currentEncryptedChat == null || AndroidUtilities.getPeerLayerVersion(this.parentChatActivity.currentEncryptedChat.layer) >= 101);
    }

    /* access modifiers changed from: private */
    public void closeCaptionEnter(boolean apply) {
        int i = this.currentIndex;
        if (i >= 0 && i < this.imagesArrLocals.size() && this.captionEditText.getTag() != null) {
            Object object = this.imagesArrLocals.get(this.currentIndex);
            if (apply) {
                CharSequence caption = this.captionEditText.getFieldCharSequence();
                CharSequence[] result = {caption};
                ArrayList<TLRPC.MessageEntity> entities = MediaDataController.getInstance(this.currentAccount).getEntities(result, supportsSendingNewEntities());
                if (this.hasCaptionForAllMedia) {
                    this.captionForAllMedia = caption;
                } else if (object instanceof MediaController.PhotoEntry) {
                    MediaController.PhotoEntry photoEntry = (MediaController.PhotoEntry) object;
                    photoEntry.caption = result[0];
                    photoEntry.entities = entities;
                } else if (object instanceof MediaController.SearchImage) {
                    MediaController.SearchImage photoEntry2 = (MediaController.SearchImage) object;
                    photoEntry2.caption = result[0];
                    photoEntry2.entities = entities;
                }
                if (this.captionEditText.getFieldCharSequence().length() != 0 && !this.placeProvider.isPhotoChecked(this.currentIndex)) {
                    setPhotoChecked();
                }
                setCurrentCaption((MessageObject) null, result[0], false);
            }
            this.captionEditText.setTag((Object) null);
            if (this.isCurrentVideo) {
                this.actionBar.setTitleAnimated(this.lastTitle, false, 220);
                this.actionBar.setSubtitle(this.muteVideo ? LocaleController.getString("SoundMuted", NUM) : this.currentSubtitle);
            }
            updateCaptionTextForCurrentPhoto(object);
            if (this.captionEditText.isPopupShowing()) {
                this.captionEditText.hidePopup();
            }
            this.captionEditText.closeKeyboard();
            if (Build.VERSION.SDK_INT >= 19) {
                this.captionEditText.setImportantForAccessibility(4);
            }
        }
    }

    /* access modifiers changed from: private */
    public void updateVideoPlayerTime() {
        Arrays.fill(this.videoPlayerCurrentTime, 0);
        Arrays.fill(this.videoPlayerTotalTime, 0);
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null) {
            long current = Math.max(0, videoPlayer2.getCurrentPosition());
            long total = Math.max(0, this.videoPlayer.getDuration());
            if (!this.inPreview && this.videoTimelineView.getVisibility() == 0) {
                total = (long) (((float) total) * (this.videoTimelineView.getRightProgress() - this.videoTimelineView.getLeftProgress()));
                current = (long) (((float) current) - (this.videoTimelineView.getLeftProgress() * ((float) total)));
                if (current > total) {
                    current = total;
                }
            }
            long current2 = current / 1000;
            long total2 = total / 1000;
            int[] iArr = this.videoPlayerCurrentTime;
            iArr[0] = (int) (current2 / 60);
            iArr[1] = (int) (current2 % 60);
            int[] iArr2 = this.videoPlayerTotalTime;
            iArr2[0] = (int) (total2 / 60);
            iArr2[1] = (int) (total2 % 60);
        }
        this.videoPlayerTime.setText(String.format(Locale.ROOT, "%02d:%02d / %02d:%02d", new Object[]{Integer.valueOf(this.videoPlayerCurrentTime[0]), Integer.valueOf(this.videoPlayerCurrentTime[1]), Integer.valueOf(this.videoPlayerTotalTime[0]), Integer.valueOf(this.videoPlayerTotalTime[1])}));
    }

    private void checkBufferedProgress(float progress) {
        MessageObject messageObject;
        TLRPC.Document document;
        if (this.isStreaming && this.parentActivity != null && !this.streamingAlertShown && this.videoPlayer != null && (messageObject = this.currentMessageObject) != null && (document = messageObject.getDocument()) != null && this.currentMessageObject.getDuration() >= 20 && progress < 0.9f) {
            if ((((float) document.size) * progress >= 5242880.0f || (progress >= 0.5f && document.size >= 2097152)) && Math.abs(SystemClock.elapsedRealtime() - this.startedPlayTime) >= 2000) {
                if (this.videoPlayer.getDuration() == -9223372036854775807L) {
                    Toast.makeText(this.parentActivity, LocaleController.getString("VideoDoesNotSupportStreaming", NUM), 1).show();
                }
                this.streamingAlertShown = true;
            }
        }
    }

    public void updateColors() {
        String str;
        int color = getThemedColor("dialogFloatingButton");
        ImageView imageView = this.pickerViewSendButton;
        if (imageView != null) {
            Drawable drawable = imageView.getBackground();
            Theme.setSelectorDrawableColor(drawable, color, false);
            if (Build.VERSION.SDK_INT >= 21) {
                str = "dialogFloatingButtonPressed";
            } else {
                str = "dialogFloatingButton";
            }
            Theme.setSelectorDrawableColor(drawable, getThemedColor(str), true);
            this.pickerViewSendButton.setColorFilter(new PorterDuffColorFilter(getThemedColor("dialogFloatingIcon"), PorterDuff.Mode.MULTIPLY));
        }
        CheckBox checkBox = this.checkImageView;
        if (checkBox != null) {
            checkBox.setColor(getThemedColor("dialogFloatingButton"), -1);
        }
        PorterDuffColorFilter filter = new PorterDuffColorFilter(color, PorterDuff.Mode.MULTIPLY);
        ImageView imageView2 = this.timeItem;
        if (!(imageView2 == null || imageView2.getColorFilter() == null)) {
            this.timeItem.setColorFilter(filter);
        }
        ImageView imageView3 = this.paintItem;
        if (!(imageView3 == null || imageView3.getColorFilter() == null)) {
            this.paintItem.setColorFilter(filter);
        }
        ImageView imageView4 = this.cropItem;
        if (!(imageView4 == null || imageView4.getColorFilter() == null)) {
            this.cropItem.setColorFilter(filter);
        }
        ImageView imageView5 = this.tuneItem;
        if (!(imageView5 == null || imageView5.getColorFilter() == null)) {
            this.tuneItem.setColorFilter(filter);
        }
        ImageView imageView6 = this.rotateItem;
        if (!(imageView6 == null || imageView6.getColorFilter() == null)) {
            this.rotateItem.setColorFilter(filter);
        }
        ImageView imageView7 = this.mirrorItem;
        if (!(imageView7 == null || imageView7.getColorFilter() == null)) {
            this.mirrorItem.setColorFilter(filter);
        }
        PickerBottomLayoutViewer pickerBottomLayoutViewer = this.editorDoneLayout;
        if (pickerBottomLayoutViewer != null) {
            pickerBottomLayoutViewer.doneButton.setTextColor(color);
        }
        PickerBottomLayoutViewer pickerBottomLayoutViewer2 = this.qualityPicker;
        if (pickerBottomLayoutViewer2 != null) {
            pickerBottomLayoutViewer2.doneButton.setTextColor(color);
        }
        PhotoPaintView photoPaintView2 = this.photoPaintView;
        if (photoPaintView2 != null) {
            photoPaintView2.updateColors();
        }
        PhotoFilterView photoFilterView2 = this.photoFilterView;
        if (photoFilterView2 != null) {
            photoFilterView2.updateColors();
        }
        PhotoViewerCaptionEnterView photoViewerCaptionEnterView = this.captionEditText;
        if (photoViewerCaptionEnterView != null) {
            photoViewerCaptionEnterView.updateColors();
        }
        VideoTimelinePlayView videoTimelinePlayView = this.videoTimelineView;
        if (videoTimelinePlayView != null) {
            videoTimelinePlayView.invalidate();
        }
        SelectedPhotosListView selectedPhotosListView2 = this.selectedPhotosListView;
        if (selectedPhotosListView2 != null) {
            int count = selectedPhotosListView2.getChildCount();
            for (int a = 0; a < count; a++) {
                View view = this.selectedPhotosListView.getChildAt(a);
                if (view instanceof PhotoPickerPhotoCell) {
                    ((PhotoPickerPhotoCell) view).updateColors();
                }
            }
        }
        StickersAlert stickersAlert = this.masksAlert;
        if (stickersAlert != null) {
            stickersAlert.updateColors(true);
        }
    }

    public void injectVideoPlayer(VideoPlayer player) {
        this.injectingVideoPlayer = player;
    }

    public void injectVideoPlayerSurface(SurfaceTexture surface) {
        this.injectingVideoPlayerSurface = surface;
    }

    public boolean isInjectingVideoPlayer() {
        return this.injectingVideoPlayer != null;
    }

    /* access modifiers changed from: private */
    public void scheduleActionBarHide() {
        scheduleActionBarHide(3000);
    }

    private void scheduleActionBarHide(int delay) {
        if (!isAccessibilityEnabled()) {
            AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
            AndroidUtilities.runOnUIThread(this.hideActionBarRunnable, (long) delay);
        }
    }

    private boolean isAccessibilityEnabled() {
        try {
            AccessibilityManager am = (AccessibilityManager) this.activityContext.getSystemService("accessibility");
            if (!am.isEnabled() || !am.isTouchExplorationEnabled()) {
                return false;
            }
            return true;
        } catch (Exception e) {
            FileLog.e((Throwable) e);
            return false;
        }
    }

    /* access modifiers changed from: private */
    public void updatePlayerState(boolean playWhenReady, int playbackState) {
        MessageObject messageObject;
        if (this.videoPlayer != null) {
            float f = 0.0f;
            if (this.isStreaming) {
                if (playbackState != 2 || !this.skipFirstBufferingProgress) {
                    boolean buffering = this.seekToProgressPending != 0.0f || playbackState == 2;
                    if (buffering) {
                        AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
                    } else {
                        scheduleActionBarHide();
                    }
                    toggleMiniProgress(buffering, true);
                } else if (playWhenReady) {
                    this.skipFirstBufferingProgress = false;
                }
            }
            AspectRatioFrameLayout aspectRatioFrameLayout2 = this.aspectRatioFrameLayout;
            int i = 4;
            if (aspectRatioFrameLayout2 != null) {
                aspectRatioFrameLayout2.setKeepScreenOn((!playWhenReady || playbackState == 4 || playbackState == 1) ? false : true);
            }
            if (!playWhenReady || playbackState == 4 || playbackState == 1) {
                try {
                    this.parentActivity.getWindow().clearFlags(128);
                    this.keepScreenOnFlagSet = false;
                } catch (Exception e) {
                    FileLog.e((Throwable) e);
                }
            } else {
                try {
                    this.parentActivity.getWindow().addFlags(128);
                    this.keepScreenOnFlagSet = true;
                } catch (Exception e2) {
                    FileLog.e((Throwable) e2);
                }
            }
            if (playbackState == 3 || playbackState == 1) {
                if (this.currentMessageObject != null) {
                    this.videoPreviewFrame.open(this.videoPlayer.getCurrentUri());
                }
                if (this.seekToProgressPending != 0.0f) {
                    this.videoPlayer.seekTo((long) ((int) (((float) this.videoPlayer.getDuration()) * this.seekToProgressPending)));
                    this.seekToProgressPending = 0.0f;
                    MessageObject messageObject2 = this.currentMessageObject;
                    if (messageObject2 != null && !FileLoader.getInstance(messageObject2.currentAccount).isLoadingVideoAny(this.currentMessageObject.getDocument())) {
                        this.skipFirstBufferingProgress = true;
                    }
                }
            }
            if (playbackState == 3) {
                if (this.aspectRatioFrameLayout.getVisibility() != 0) {
                    this.aspectRatioFrameLayout.setVisibility(0);
                }
                if (!this.pipItem.isEnabled() && this.pipItem.getVisibility() == 0) {
                    this.pipAvailable = true;
                    this.pipItem.setEnabled(true);
                    this.pipItem.animate().alpha(1.0f).setDuration(175).withEndAction((Runnable) null).start();
                }
                this.playerWasReady = true;
                MessageObject messageObject3 = this.currentMessageObject;
                if (messageObject3 != null && messageObject3.isVideo()) {
                    AndroidUtilities.cancelRunOnUIThread(this.setLoadingRunnable);
                    FileLoader.getInstance(this.currentMessageObject.currentAccount).removeLoadingVideo(this.currentMessageObject.getDocument(), true, false);
                }
            } else if (playbackState == 2 && playWhenReady && (messageObject = this.currentMessageObject) != null && messageObject.isVideo()) {
                if (this.playerWasReady) {
                    this.setLoadingRunnable.run();
                } else {
                    AndroidUtilities.runOnUIThread(this.setLoadingRunnable, 1000);
                }
            }
            if (!this.videoPlayer.isPlaying() || playbackState == 4) {
                if (this.isPlaying || playbackState == 4) {
                    if (this.currentEditMode != 3) {
                        this.photoProgressViews[0].setIndexedAlpha(1, 1.0f, playbackState == 4);
                        PhotoProgressView[] photoProgressViewArr = this.photoProgressViews;
                        photoProgressViewArr[0].setBackgroundState(3, false, photoProgressViewArr[0].animAlphas[1] > 0.0f);
                    }
                    this.isPlaying = false;
                    AndroidUtilities.cancelRunOnUIThread(this.updateProgressRunnable);
                    if (playbackState == 4) {
                        if (!this.isCurrentVideo) {
                            this.videoPlayerSeekbar.setProgress(0.0f);
                            this.videoPlayerSeekbarView.invalidate();
                            if (this.inPreview || this.videoTimelineView.getVisibility() != 0) {
                                this.videoPlayer.seekTo(0);
                            } else {
                                this.videoPlayer.seekTo((long) ((int) (this.videoTimelineView.getLeftProgress() * ((float) this.videoPlayer.getDuration()))));
                            }
                            this.manuallyPaused = false;
                            this.videoPlayer.pause();
                            if (!this.isActionBarVisible) {
                                toggleActionBar(true, true);
                            }
                        } else if (!this.videoTimelineView.isDragging()) {
                            VideoTimelinePlayView videoTimelinePlayView = this.videoTimelineView;
                            videoTimelinePlayView.setProgress(videoTimelinePlayView.getLeftProgress());
                            if (this.inPreview || (this.currentEditMode == 0 && this.videoTimelineView.getVisibility() != 0)) {
                                this.videoPlayer.seekTo(0);
                            } else {
                                this.videoPlayer.seekTo((long) ((int) (this.videoTimelineView.getLeftProgress() * ((float) this.videoPlayer.getDuration()))));
                            }
                            this.manuallyPaused = false;
                            cancelVideoPlayRunnable();
                            if (this.sendPhotoType == 1 || this.currentEditMode != 0 || this.switchingToMode > 0) {
                                this.videoPlayer.play();
                            } else {
                                this.videoPlayer.pause();
                            }
                            this.containerView.invalidate();
                        }
                        PipVideoView pipVideoView2 = this.pipVideoView;
                        if (pipVideoView2 != null) {
                            pipVideoView2.onVideoCompleted();
                        }
                    }
                }
            } else if (!this.isPlaying) {
                this.isPlaying = true;
                PhotoProgressView photoProgressView = this.photoProgressViews[0];
                if (this.isCurrentVideo) {
                    i = -1;
                }
                photoProgressView.setBackgroundState(i, false, true);
                PhotoProgressView photoProgressView2 = this.photoProgressViews[0];
                if (this.isCurrentVideo || ((isAccessibilityEnabled() && !this.playerWasPlaying) || ((!this.playerAutoStarted || this.playerWasPlaying) && this.isActionBarVisible))) {
                    f = 1.0f;
                }
                photoProgressView2.setIndexedAlpha(1, f, false);
                this.playerWasPlaying = true;
                AndroidUtilities.runOnUIThread(this.updateProgressRunnable);
            }
            PipVideoView pipVideoView3 = this.pipVideoView;
            if (pipVideoView3 != null) {
                pipVideoView3.updatePlayButton();
            }
            updateVideoPlayerTime();
        }
    }

    private void preparePlayer(Uri uri, boolean playWhenReady, boolean preview) {
        preparePlayer(uri, playWhenReady, preview, (MediaController.SavedFilterState) null);
    }

    private void preparePlayer(Uri uri, boolean playWhenReady, boolean preview, MediaController.SavedFilterState savedFilterState) {
        Uri uri2 = uri;
        boolean z = preview;
        if (!z) {
            this.currentPlayingVideoFile = uri2;
        }
        if (this.parentActivity != null) {
            this.streamingAlertShown = false;
            this.startedPlayTime = SystemClock.elapsedRealtime();
            this.currentVideoFinishedLoading = false;
            this.lastBufferedPositionCheck = 0;
            this.firstAnimationDelay = true;
            this.inPreview = z;
            releasePlayer(false);
            if (this.imagesArrLocals.isEmpty()) {
                createVideoTextureView((MediaController.SavedFilterState) null);
            }
            if (Build.VERSION.SDK_INT >= 21 && this.textureImageView == null) {
                ImageView imageView = new ImageView(this.parentActivity);
                this.textureImageView = imageView;
                imageView.setBackgroundColor(-65536);
                this.textureImageView.setPivotX(0.0f);
                this.textureImageView.setPivotY(0.0f);
                this.textureImageView.setVisibility(4);
                this.containerView.addView(this.textureImageView);
            }
            checkFullscreenButton();
            if (this.orientationEventListener == null) {
                AnonymousClass43 r7 = new OrientationEventListener(ApplicationLoader.applicationContext) {
                    public void onOrientationChanged(int orientation) {
                        if (PhotoViewer.this.orientationEventListener != null && PhotoViewer.this.aspectRatioFrameLayout != null && PhotoViewer.this.aspectRatioFrameLayout.getVisibility() == 0 && PhotoViewer.this.parentActivity != null && PhotoViewer.this.fullscreenedByButton != 0) {
                            if (PhotoViewer.this.fullscreenedByButton == 1) {
                                if (orientation >= 240 && orientation <= 300) {
                                    boolean unused = PhotoViewer.this.wasRotated = true;
                                } else if (PhotoViewer.this.wasRotated && orientation > 0) {
                                    if (orientation >= 330 || orientation <= 30) {
                                        PhotoViewer.this.parentActivity.setRequestedOrientation(PhotoViewer.this.prevOrientation);
                                        int unused2 = PhotoViewer.this.fullscreenedByButton = 0;
                                        boolean unused3 = PhotoViewer.this.wasRotated = false;
                                    }
                                }
                            } else if (orientation > 0 && (orientation >= 330 || orientation <= 30)) {
                                boolean unused4 = PhotoViewer.this.wasRotated = true;
                            } else if (PhotoViewer.this.wasRotated && orientation >= 240 && orientation <= 300) {
                                PhotoViewer.this.parentActivity.setRequestedOrientation(PhotoViewer.this.prevOrientation);
                                int unused5 = PhotoViewer.this.fullscreenedByButton = 0;
                                boolean unused6 = PhotoViewer.this.wasRotated = false;
                            }
                        }
                    }
                };
                this.orientationEventListener = r7;
                if (r7.canDetectOrientation()) {
                    this.orientationEventListener.enable();
                } else {
                    this.orientationEventListener.disable();
                    this.orientationEventListener = null;
                }
            }
            this.textureUploaded = false;
            this.videoSizeSet = false;
            this.videoCrossfadeStarted = false;
            boolean newPlayerCreated = false;
            this.playerWasReady = false;
            this.playerWasPlaying = false;
            this.captureFrameReadyAtTime = -1;
            this.captureFrameAtTime = -1;
            this.needCaptureFrameReadyAtTime = -1;
            if (this.videoPlayer == null) {
                VideoPlayer videoPlayer2 = this.injectingVideoPlayer;
                if (videoPlayer2 != null) {
                    this.videoPlayer = videoPlayer2;
                    this.injectingVideoPlayer = null;
                    this.playerInjected = true;
                    updatePlayerState(videoPlayer2.getPlayWhenReady(), this.videoPlayer.getPlaybackState());
                } else {
                    this.videoPlayer = new VideoPlayer() {
                        public void play() {
                            super.play();
                            PhotoViewer.this.playOrStopAnimatedStickers(true);
                        }

                        public void pause() {
                            super.pause();
                            if (PhotoViewer.this.currentEditMode == 0) {
                                PhotoViewer.this.playOrStopAnimatedStickers(false);
                            }
                        }

                        public void seekTo(long positionMs) {
                            super.seekTo(positionMs);
                            if (PhotoViewer.this.isCurrentVideo) {
                                PhotoViewer.this.seekAnimatedStickersTo(positionMs);
                            }
                        }
                    };
                    newPlayerCreated = true;
                }
                TextureView textureView = this.videoTextureView;
                if (textureView != null) {
                    this.videoPlayer.setTextureView(textureView);
                }
                this.videoPlayer.setDelegate(new VideoPlayer.VideoPlayerDelegate() {
                    public /* synthetic */ void onSeekFinished(AnalyticsListener.EventTime eventTime) {
                        VideoPlayer.VideoPlayerDelegate.CC.$default$onSeekFinished(this, eventTime);
                    }

                    public /* synthetic */ void onSeekStarted(AnalyticsListener.EventTime eventTime) {
                        VideoPlayer.VideoPlayerDelegate.CC.$default$onSeekStarted(this, eventTime);
                    }

                    public void onStateChanged(boolean playWhenReady, int playbackState) {
                        PhotoViewer.this.updatePlayerState(playWhenReady, playbackState);
                    }

                    public void onError(VideoPlayer player, Exception e) {
                        if (PhotoViewer.this.videoPlayer == player) {
                            FileLog.e((Throwable) e);
                            if (PhotoViewer.this.menuItem.isSubItemVisible(11)) {
                                AlertDialog.Builder builder = new AlertDialog.Builder(PhotoViewer.this.parentActivity, PhotoViewer.this.resourcesProvider);
                                builder.setTitle(LocaleController.getString("AppName", NUM));
                                builder.setMessage(LocaleController.getString("CantPlayVideo", NUM));
                                builder.setPositiveButton(LocaleController.getString("Open", NUM), new PhotoViewer$45$$ExternalSyntheticLambda0(this));
                                builder.setNegativeButton(LocaleController.getString("Cancel", NUM), (DialogInterface.OnClickListener) null);
                                PhotoViewer.this.showAlertDialog(builder);
                            }
                        }
                    }

                    /* renamed from: lambda$onError$0$org-telegram-ui-PhotoViewer$45  reason: not valid java name */
                    public /* synthetic */ void m3624lambda$onError$0$orgtelegramuiPhotoViewer$45(DialogInterface dialog, int which) {
                        try {
                            AndroidUtilities.openForView(PhotoViewer.this.currentMessageObject, PhotoViewer.this.parentActivity, PhotoViewer.this.resourcesProvider);
                            PhotoViewer.this.closePhoto(false, false);
                        } catch (Exception e1) {
                            FileLog.e((Throwable) e1);
                        }
                    }

                    public void onVideoSizeChanged(int width, int height, int unappliedRotationDegrees, float pixelWidthHeightRatio) {
                        if (PhotoViewer.this.aspectRatioFrameLayout != null) {
                            if (unappliedRotationDegrees == 90 || unappliedRotationDegrees == 270) {
                                int temp = width;
                                width = height;
                                height = temp;
                            }
                            PhotoViewer.this.aspectRatioFrameLayout.setAspectRatio(height == 0 ? 1.0f : (((float) width) * pixelWidthHeightRatio) / ((float) height), unappliedRotationDegrees);
                            if (PhotoViewer.this.videoTextureView instanceof VideoEditTextureView) {
                                ((VideoEditTextureView) PhotoViewer.this.videoTextureView).setVideoSize((int) (((float) width) * pixelWidthHeightRatio), height);
                                if (PhotoViewer.this.sendPhotoType == 1) {
                                    PhotoViewer.this.setCropBitmap();
                                }
                            }
                            boolean unused = PhotoViewer.this.videoSizeSet = true;
                        }
                    }

                    public void onRenderedFirstFrame() {
                        if (!PhotoViewer.this.textureUploaded) {
                            boolean unused = PhotoViewer.this.textureUploaded = true;
                            PhotoViewer.this.containerView.invalidate();
                        }
                    }

                    public void onRenderedFirstFrame(AnalyticsListener.EventTime eventTime) {
                        if (eventTime.eventPlaybackPositionMs == PhotoViewer.this.needCaptureFrameReadyAtTime) {
                            long unused = PhotoViewer.this.captureFrameReadyAtTime = eventTime.eventPlaybackPositionMs;
                            long unused2 = PhotoViewer.this.needCaptureFrameReadyAtTime = -1;
                            PhotoViewer.this.captureCurrentFrame();
                        }
                    }

                    public boolean onSurfaceDestroyed(SurfaceTexture surfaceTexture) {
                        if (PhotoViewer.this.changingTextureView) {
                            boolean unused = PhotoViewer.this.changingTextureView = false;
                            if (PhotoViewer.this.isInline) {
                                int unused2 = PhotoViewer.this.waitingForFirstTextureUpload = 1;
                                PhotoViewer.this.changedTextureView.setSurfaceTexture(surfaceTexture);
                                PhotoViewer.this.changedTextureView.setSurfaceTextureListener(PhotoViewer.this.surfaceTextureListener);
                                PhotoViewer.this.changedTextureView.setVisibility(0);
                                return true;
                            }
                        }
                        return false;
                    }

                    public void onSurfaceTextureUpdated(SurfaceTexture surfaceTexture) {
                        if (PhotoViewer.this.waitingForFirstTextureUpload == 2) {
                            if (PhotoViewer.this.textureImageView != null) {
                                PhotoViewer.this.textureImageView.setVisibility(4);
                                PhotoViewer.this.textureImageView.setImageDrawable((Drawable) null);
                                if (PhotoViewer.this.currentBitmap != null) {
                                    PhotoViewer.this.currentBitmap.recycle();
                                    Bitmap unused = PhotoViewer.this.currentBitmap = null;
                                }
                            }
                            boolean unused2 = PhotoViewer.this.switchingInlineMode = false;
                            if (Build.VERSION.SDK_INT >= 21) {
                                PhotoViewer.this.aspectRatioFrameLayout.getLocationInWindow(PhotoViewer.this.pipPosition);
                                int[] access$20500 = PhotoViewer.this.pipPosition;
                                access$20500[1] = (int) (((float) access$20500[1]) - PhotoViewer.this.containerView.getTranslationY());
                                PhotoViewer.this.textureImageView.setTranslationX(PhotoViewer.this.textureImageView.getTranslationX() + ((float) PhotoViewer.this.getLeftInset()));
                                PhotoViewer.this.videoTextureView.setTranslationX((PhotoViewer.this.videoTextureView.getTranslationX() + ((float) PhotoViewer.this.getLeftInset())) - PhotoViewer.this.aspectRatioFrameLayout.getX());
                                AnimatorSet animatorSet = new AnimatorSet();
                                animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.textureImageView, View.SCALE_X, new float[]{1.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.textureImageView, View.SCALE_Y, new float[]{1.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.textureImageView, View.TRANSLATION_X, new float[]{(float) PhotoViewer.this.pipPosition[0]}), ObjectAnimator.ofFloat(PhotoViewer.this.textureImageView, View.TRANSLATION_Y, new float[]{(float) PhotoViewer.this.pipPosition[1]}), ObjectAnimator.ofFloat(PhotoViewer.this.videoTextureView, View.SCALE_X, new float[]{1.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.videoTextureView, View.SCALE_Y, new float[]{1.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.videoTextureView, View.TRANSLATION_X, new float[]{((float) PhotoViewer.this.pipPosition[0]) - PhotoViewer.this.aspectRatioFrameLayout.getX()}), ObjectAnimator.ofFloat(PhotoViewer.this.videoTextureView, View.TRANSLATION_Y, new float[]{((float) PhotoViewer.this.pipPosition[1]) - PhotoViewer.this.aspectRatioFrameLayout.getY()}), ObjectAnimator.ofInt(PhotoViewer.this.backgroundDrawable, AnimationProperties.COLOR_DRAWABLE_ALPHA, new int[]{255})});
                                DecelerateInterpolator interpolator = new DecelerateInterpolator();
                                animatorSet.setInterpolator(interpolator);
                                animatorSet.setDuration(250);
                                animatorSet.addListener(new AnimatorListenerAdapter() {
                                    public void onAnimationEnd(Animator animation) {
                                        boolean unused = PhotoViewer.this.pipAnimationInProgress = false;
                                    }
                                });
                                animatorSet.start();
                                PhotoViewer.this.toggleActionBar(true, true, new ActionBarToggleParams().enableStatusBarAnimation(false).enableTranslationAnimation(false).animationDuration(250).animationInterpolator(interpolator));
                            } else {
                                PhotoViewer.this.toggleActionBar(true, false);
                            }
                            int unused3 = PhotoViewer.this.waitingForFirstTextureUpload = 0;
                        }
                    }
                });
            }
            if (!this.imagesArrLocals.isEmpty()) {
                createVideoTextureView(savedFilterState);
            } else {
                MediaController.SavedFilterState savedFilterState2 = savedFilterState;
            }
            TextureView textureView2 = this.videoTextureView;
            this.videoCrossfadeAlpha = 0.0f;
            textureView2.setAlpha(0.0f);
            PaintingOverlay paintingOverlay2 = this.paintingOverlay;
            if (paintingOverlay2 != null) {
                paintingOverlay2.setAlpha(this.videoCrossfadeAlpha);
            }
            this.shouldSavePositionForCurrentVideo = null;
            this.shouldSavePositionForCurrentVideoShortTerm = null;
            this.lastSaveTime = 0;
            if (newPlayerCreated) {
                this.seekToProgressPending = this.seekToProgressPending2;
                this.videoPlayerSeekbar.setProgress(0.0f);
                this.videoTimelineView.setProgress(0.0f);
                this.videoPlayerSeekbar.setBufferedProgress(0.0f);
                MessageObject messageObject = this.currentMessageObject;
                if (messageObject != null) {
                    int duration = messageObject.getDuration();
                    String name = this.currentMessageObject.getFileName();
                    if (TextUtils.isEmpty(name)) {
                    } else if (duration >= 600) {
                        if (this.currentMessageObject.forceSeekTo < 0.0f) {
                            float pos = ApplicationLoader.applicationContext.getSharedPreferences("media_saved_pos", 0).getFloat(name, -1.0f);
                            if (pos > 0.0f && pos < 0.999f) {
                                this.currentMessageObject.forceSeekTo = pos;
                                this.videoPlayerSeekbar.setProgress(pos);
                            }
                        }
                        this.shouldSavePositionForCurrentVideo = name;
                        boolean z2 = newPlayerCreated;
                    } else if (duration >= 10) {
                        SavedVideoPosition videoPosition = null;
                        int i = this.savedVideoPositions.size() - 1;
                        while (i >= 0) {
                            SavedVideoPosition item = this.savedVideoPositions.valueAt(i);
                            boolean newPlayerCreated2 = newPlayerCreated;
                            if (item.timestamp < SystemClock.elapsedRealtime() - 5000) {
                                this.savedVideoPositions.removeAt(i);
                            } else if (videoPosition == null && this.savedVideoPositions.keyAt(i).equals(name)) {
                                videoPosition = item;
                            }
                            i--;
                            newPlayerCreated = newPlayerCreated2;
                        }
                        if (this.currentMessageObject.forceSeekTo < 0.0f && videoPosition != null) {
                            float pos2 = videoPosition.position;
                            if (pos2 > 0.0f && pos2 < 0.999f) {
                                this.currentMessageObject.forceSeekTo = pos2;
                                this.videoPlayerSeekbar.setProgress(pos2);
                            }
                        }
                        this.shouldSavePositionForCurrentVideoShortTerm = name;
                    }
                }
                this.videoPlayer.preparePlayer(uri2, "other");
                this.videoPlayer.setPlayWhenReady(playWhenReady);
            } else {
                boolean z3 = playWhenReady;
                boolean z4 = newPlayerCreated;
            }
            MessageObject messageObject2 = this.currentMessageObject;
            boolean z5 = messageObject2 != null && messageObject2.getDuration() <= 30;
            this.playerLooping = z5;
            this.videoPlayerControlFrameLayout.setSeekBarTransitionEnabled(z5);
            this.videoPlayer.setLooping(this.playerLooping);
            MessageObject messageObject3 = this.currentMessageObject;
            if (messageObject3 != null && messageObject3.forceSeekTo >= 0.0f) {
                this.seekToProgressPending = this.currentMessageObject.forceSeekTo;
                this.currentMessageObject.forceSeekTo = -1.0f;
            }
            TLRPC.BotInlineResult botInlineResult = this.currentBotInlineResult;
            if (botInlineResult == null || (!botInlineResult.type.equals("video") && !MessageObject.isVideoDocument(this.currentBotInlineResult.document))) {
                this.bottomLayout.setPadding(0, 0, 0, 0);
            } else {
                this.bottomLayout.setVisibility(0);
                this.bottomLayout.setPadding(0, 0, AndroidUtilities.dp(84.0f), 0);
                this.pickerView.setVisibility(8);
            }
            if (this.pageBlocksAdapter != null) {
                this.bottomLayout.setVisibility(0);
            }
            setVideoPlayerControlVisible(!this.isCurrentVideo, true);
            if (!this.isCurrentVideo) {
                scheduleActionBarHide(this.playerAutoStarted ? 3000 : 1000);
            }
            if (this.currentMessageObject != null) {
                this.videoPlayer.setPlaybackSpeed(this.currentVideoSpeed);
            }
            this.inPreview = z;
        }
    }

    /* access modifiers changed from: private */
    /* JADX WARNING: Code restructure failed: missing block: B:21:0x0050, code lost:
        r9 = r0.videoTextureView;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public void checkFullscreenButton() {
        /*
            r17 = this;
            r0 = r17
            java.util.ArrayList<org.telegram.messenger.MessageObject> r1 = r0.imagesArr
            boolean r1 = r1.isEmpty()
            r2 = 3
            r3 = 4
            if (r1 == 0) goto L_0x001a
            r1 = 0
        L_0x000d:
            if (r1 >= r2) goto L_0x0019
            android.widget.ImageView[] r4 = r0.fullscreenButton
            r4 = r4[r1]
            r4.setVisibility(r3)
            int r1 = r1 + 1
            goto L_0x000d
        L_0x0019:
            return
        L_0x001a:
            r1 = 0
        L_0x001b:
            if (r1 >= r2) goto L_0x0138
            int r4 = r0.currentIndex
            r5 = 2
            r6 = 1
            if (r1 != r6) goto L_0x0026
            int r4 = r4 + 1
            goto L_0x002a
        L_0x0026:
            if (r1 != r5) goto L_0x002a
            int r4 = r4 + -1
        L_0x002a:
            if (r4 < 0) goto L_0x012c
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            int r7 = r7.size()
            if (r4 < r7) goto L_0x0036
            goto L_0x012c
        L_0x0036:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            java.lang.Object r7 = r7.get(r4)
            org.telegram.messenger.MessageObject r7 = (org.telegram.messenger.MessageObject) r7
            boolean r8 = r7.isVideo()
            if (r8 != 0) goto L_0x004d
            android.widget.ImageView[] r5 = r0.fullscreenButton
            r5 = r5[r1]
            r5.setVisibility(r3)
            goto L_0x0134
        L_0x004d:
            r8 = 0
            if (r1 != 0) goto L_0x0059
            android.view.TextureView r9 = r0.videoTextureView
            if (r9 == 0) goto L_0x0059
            int r9 = r9.getMeasuredWidth()
            goto L_0x005a
        L_0x0059:
            r9 = 0
        L_0x005a:
            if (r1 != 0) goto L_0x0065
            android.view.TextureView r10 = r0.videoTextureView
            if (r10 == 0) goto L_0x0065
            int r10 = r10.getMeasuredHeight()
            goto L_0x0066
        L_0x0065:
            r10 = 0
        L_0x0066:
            org.telegram.tgnet.TLRPC$Document r11 = r7.getDocument()
            r12 = 0
            java.util.ArrayList<org.telegram.tgnet.TLRPC$DocumentAttribute> r13 = r11.attributes
            int r13 = r13.size()
        L_0x0071:
            if (r12 >= r13) goto L_0x0087
            java.util.ArrayList<org.telegram.tgnet.TLRPC$DocumentAttribute> r14 = r11.attributes
            java.lang.Object r14 = r14.get(r12)
            org.telegram.tgnet.TLRPC$DocumentAttribute r14 = (org.telegram.tgnet.TLRPC.DocumentAttribute) r14
            boolean r15 = r14 instanceof org.telegram.tgnet.TLRPC.TL_documentAttributeVideo
            if (r15 == 0) goto L_0x0084
            int r9 = r14.w
            int r10 = r14.h
            goto L_0x0087
        L_0x0084:
            int r12 = r12 + 1
            goto L_0x0071
        L_0x0087:
            android.graphics.Point r12 = org.telegram.messenger.AndroidUtilities.displaySize
            int r12 = r12.y
            android.graphics.Point r13 = org.telegram.messenger.AndroidUtilities.displaySize
            int r13 = r13.x
            r14 = 1111490560(0x42400000, float:48.0)
            if (r12 <= r13) goto L_0x00d3
            android.view.TextureView r12 = r0.videoTextureView
            boolean r12 = r12 instanceof org.telegram.ui.Components.VideoEditTextureView
            if (r12 != 0) goto L_0x00d3
            if (r9 <= r10) goto L_0x00d3
            android.widget.ImageView[] r12 = r0.fullscreenButton
            r12 = r12[r1]
            int r12 = r12.getVisibility()
            if (r12 == 0) goto L_0x00ac
            android.widget.ImageView[] r12 = r0.fullscreenButton
            r12 = r12[r1]
            r12.setVisibility(r8)
        L_0x00ac:
            float r8 = (float) r9
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r12 = r0.containerView
            int r12 = r12.getMeasuredWidth()
            float r12 = (float) r12
            float r8 = r8 / r12
            float r12 = (float) r10
            float r12 = r12 / r8
            int r12 = (int) r12
            android.widget.ImageView[] r13 = r0.fullscreenButton
            r13 = r13[r1]
            android.view.ViewGroup$LayoutParams r13 = r13.getLayoutParams()
            android.widget.FrameLayout$LayoutParams r13 = (android.widget.FrameLayout.LayoutParams) r13
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r15 = r0.containerView
            int r15 = r15.getMeasuredHeight()
            int r15 = r15 + r12
            int r15 = r15 / r5
            int r16 = org.telegram.messenger.AndroidUtilities.dp(r14)
            int r15 = r15 - r16
            r13.topMargin = r15
            goto L_0x00e4
        L_0x00d3:
            android.widget.ImageView[] r8 = r0.fullscreenButton
            r8 = r8[r1]
            int r8 = r8.getVisibility()
            if (r8 == r3) goto L_0x00e4
            android.widget.ImageView[] r8 = r0.fullscreenButton
            r8 = r8[r1]
            r8.setVisibility(r3)
        L_0x00e4:
            android.animation.AnimatorSet r8 = r0.imageMoveAnimation
            if (r8 == 0) goto L_0x00f3
            float r8 = r0.translationX
            float r12 = r0.animateToX
            float r12 = r12 - r8
            float r13 = r0.animationValue
            float r12 = r12 * r13
            float r8 = r8 + r12
            goto L_0x00f5
        L_0x00f3:
            float r8 = r0.translationX
        L_0x00f5:
            if (r1 != r6) goto L_0x00f9
            r5 = 0
            goto L_0x0118
        L_0x00f9:
            if (r1 != r5) goto L_0x010e
            android.graphics.Point r5 = org.telegram.messenger.AndroidUtilities.displaySize
            int r5 = r5.x
            int r5 = -r5
            r6 = 1097859072(0x41700000, float:15.0)
            int r6 = org.telegram.messenger.AndroidUtilities.dp(r6)
            int r5 = r5 - r6
            float r5 = (float) r5
            float r6 = r0.maxX
            float r6 = r8 - r6
            float r5 = r5 + r6
            goto L_0x0118
        L_0x010e:
            float r5 = r0.minX
            int r6 = (r8 > r5 ? 1 : (r8 == r5 ? 0 : -1))
            if (r6 >= 0) goto L_0x0117
            float r5 = r8 - r5
            goto L_0x0118
        L_0x0117:
            r5 = 0
        L_0x0118:
            android.widget.ImageView[] r6 = r0.fullscreenButton
            r6 = r6[r1]
            android.graphics.Point r12 = org.telegram.messenger.AndroidUtilities.displaySize
            int r12 = r12.x
            float r12 = (float) r12
            float r12 = r12 + r5
            int r13 = org.telegram.messenger.AndroidUtilities.dp(r14)
            float r13 = (float) r13
            float r12 = r12 - r13
            r6.setTranslationX(r12)
            goto L_0x0134
        L_0x012c:
            android.widget.ImageView[] r5 = r0.fullscreenButton
            r5 = r5[r1]
            r5.setVisibility(r3)
        L_0x0134:
            int r1 = r1 + 1
            goto L_0x001b
        L_0x0138:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.checkFullscreenButton():void");
    }

    private void createVideoTextureView(MediaController.SavedFilterState savedFilterState) {
        if (this.videoTextureView == null) {
            AnonymousClass46 r0 = new AspectRatioFrameLayout(this.parentActivity) {
                /* access modifiers changed from: protected */
                public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
                    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
                    if (PhotoViewer.this.textureImageView != null) {
                        ViewGroup.LayoutParams layoutParams = PhotoViewer.this.textureImageView.getLayoutParams();
                        layoutParams.width = getMeasuredWidth();
                        layoutParams.height = getMeasuredHeight();
                    }
                    if (PhotoViewer.this.videoTextureView instanceof VideoEditTextureView) {
                        PhotoViewer.this.videoTextureView.setPivotX((float) (PhotoViewer.this.videoTextureView.getMeasuredWidth() / 2));
                    } else {
                        PhotoViewer.this.videoTextureView.setPivotX(0.0f);
                    }
                    PhotoViewer.this.checkFullscreenButton();
                }
            };
            this.aspectRatioFrameLayout = r0;
            r0.setVisibility(4);
            this.containerView.addView(this.aspectRatioFrameLayout, 0, LayoutHelper.createFrame(-1, -1, 17));
            if (this.imagesArrLocals.isEmpty()) {
                this.videoTextureView = new TextureView(this.parentActivity);
            } else {
                VideoEditTextureView videoEditTextureView = new VideoEditTextureView(this.parentActivity, this.videoPlayer);
                if (savedFilterState != null) {
                    videoEditTextureView.setDelegate(new PhotoViewer$$ExternalSyntheticLambda64(savedFilterState));
                }
                this.videoTextureView = videoEditTextureView;
            }
            SurfaceTexture surfaceTexture = this.injectingVideoPlayerSurface;
            if (surfaceTexture != null) {
                this.videoTextureView.setSurfaceTexture(surfaceTexture);
                this.textureUploaded = true;
                this.videoSizeSet = true;
                this.injectingVideoPlayerSurface = null;
            }
            this.videoTextureView.setPivotX(0.0f);
            this.videoTextureView.setPivotY(0.0f);
            this.videoTextureView.setOpaque(false);
            this.aspectRatioFrameLayout.addView(this.videoTextureView, LayoutHelper.createFrame(-1, -1, 17));
            if (this.sendPhotoType == 1) {
                View view = new View(this.parentActivity);
                this.flashView = view;
                view.setBackgroundColor(-1);
                this.flashView.setAlpha(0.0f);
                this.aspectRatioFrameLayout.addView(this.flashView, LayoutHelper.createFrame(-1, -1, 17));
            }
        }
    }

    /* access modifiers changed from: private */
    public void releasePlayer(boolean onClose) {
        if (this.videoPlayer != null) {
            cancelVideoPlayRunnable();
            AndroidUtilities.cancelRunOnUIThread(this.setLoadingRunnable);
            AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
            if (this.shouldSavePositionForCurrentVideoShortTerm != null) {
                this.savedVideoPositions.put(this.shouldSavePositionForCurrentVideoShortTerm, new SavedVideoPosition(((float) this.videoPlayer.getCurrentPosition()) / ((float) this.videoPlayer.getDuration()), SystemClock.elapsedRealtime()));
            }
            this.videoPlayer.releasePlayer(true);
            this.videoPlayer = null;
        } else {
            this.playerWasPlaying = false;
        }
        OrientationEventListener orientationEventListener2 = this.orientationEventListener;
        if (orientationEventListener2 != null) {
            orientationEventListener2.disable();
            this.orientationEventListener = null;
        }
        this.videoPreviewFrame.close();
        toggleMiniProgress(false, false);
        this.pipAvailable = false;
        this.playerInjected = false;
        if (this.pipItem.isEnabled()) {
            this.pipItem.setEnabled(false);
            this.pipItem.animate().alpha(0.5f).setDuration(175).withEndAction((Runnable) null).start();
        }
        if (this.keepScreenOnFlagSet) {
            try {
                this.parentActivity.getWindow().clearFlags(128);
                this.keepScreenOnFlagSet = false;
            } catch (Exception e) {
                FileLog.e((Throwable) e);
            }
        }
        AspectRatioFrameLayout aspectRatioFrameLayout2 = this.aspectRatioFrameLayout;
        if (aspectRatioFrameLayout2 != null) {
            try {
                this.containerView.removeView(aspectRatioFrameLayout2);
            } catch (Throwable th) {
            }
            this.aspectRatioFrameLayout = null;
        }
        cancelFlashAnimations();
        this.flashView = null;
        TextureView textureView = this.videoTextureView;
        if (textureView != null) {
            if (textureView instanceof VideoEditTextureView) {
                ((VideoEditTextureView) textureView).release();
            }
            this.videoTextureView = null;
        }
        if (this.isPlaying) {
            this.isPlaying = false;
            AndroidUtilities.cancelRunOnUIThread(this.updateProgressRunnable);
        }
        if (!onClose && !this.inPreview && !this.requestingPreview) {
            setVideoPlayerControlVisible(false, true);
        }
        this.photoProgressViews[0].resetAlphas();
    }

    private void setVideoPlayerControlVisible(final boolean visible, boolean animated) {
        if (this.videoPlayerControlVisible != visible) {
            Animator animator = this.videoPlayerControlAnimator;
            if (animator != null) {
                animator.cancel();
            }
            this.videoPlayerControlVisible = visible;
            float f = 1.0f;
            int i = 0;
            if (animated) {
                if (visible) {
                    this.videoPlayerControlFrameLayout.setVisibility(0);
                } else {
                    this.dateTextView.setVisibility(0);
                    this.nameTextView.setVisibility(0);
                    if (this.allowShare) {
                        this.bottomButtonsLayout.setVisibility(0);
                    }
                }
                final boolean shareWasAllowed = this.allowShare;
                float[] fArr = new float[2];
                fArr[0] = this.videoPlayerControlFrameLayout.getAlpha();
                if (!visible) {
                    f = 0.0f;
                }
                fArr[1] = f;
                ValueAnimator anim = ValueAnimator.ofFloat(fArr);
                anim.setDuration(200);
                anim.addUpdateListener(new PhotoViewer$$ExternalSyntheticLambda33(this, shareWasAllowed));
                anim.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        if (!visible) {
                            PhotoViewer.this.videoPlayerControlFrameLayout.setVisibility(8);
                            return;
                        }
                        PhotoViewer.this.dateTextView.setVisibility(8);
                        PhotoViewer.this.nameTextView.setVisibility(8);
                        if (shareWasAllowed) {
                            PhotoViewer.this.bottomButtonsLayout.setVisibility(8);
                        }
                    }
                });
                this.videoPlayerControlAnimator = anim;
                anim.start();
            } else {
                this.videoPlayerControlFrameLayout.setVisibility(visible ? 0 : 8);
                this.videoPlayerControlFrameLayout.setAlpha(visible ? 1.0f : 0.0f);
                this.dateTextView.setVisibility(visible ? 8 : 0);
                this.dateTextView.setAlpha(visible ? 0.0f : 1.0f);
                this.nameTextView.setVisibility(visible ? 8 : 0);
                this.nameTextView.setAlpha(visible ? 0.0f : 1.0f);
                if (this.allowShare) {
                    LinearLayout linearLayout = this.bottomButtonsLayout;
                    if (visible) {
                        i = 8;
                    }
                    linearLayout.setVisibility(i);
                    LinearLayout linearLayout2 = this.bottomButtonsLayout;
                    if (visible) {
                        f = 0.0f;
                    }
                    linearLayout2.setAlpha(f);
                }
            }
            if (this.allowShare && this.pageBlocksAdapter == null) {
                if (visible) {
                    this.menuItem.showSubItem(10);
                } else {
                    this.menuItem.hideSubItem(10);
                }
            }
        }
    }

    /* renamed from: lambda$setVideoPlayerControlVisible$45$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3608x5b784var_(boolean shareWasAllowed, ValueAnimator a) {
        float alpha = ((Float) a.getAnimatedValue()).floatValue();
        this.videoPlayerControlFrameLayout.setAlpha(alpha);
        this.dateTextView.setAlpha(1.0f - alpha);
        this.nameTextView.setAlpha(1.0f - alpha);
        if (shareWasAllowed) {
            this.bottomButtonsLayout.setAlpha(1.0f - alpha);
        }
    }

    private void updateCaptionTextForCurrentPhoto(Object object) {
        CharSequence caption = null;
        if (this.hasCaptionForAllMedia) {
            caption = this.captionForAllMedia;
        } else if (object instanceof MediaController.PhotoEntry) {
            caption = ((MediaController.PhotoEntry) object).caption;
        } else if (!(object instanceof TLRPC.BotInlineResult) && (object instanceof MediaController.SearchImage)) {
            caption = ((MediaController.SearchImage) object).caption;
        }
        if (TextUtils.isEmpty(caption)) {
            this.captionEditText.setFieldText("");
        } else {
            this.captionEditText.setFieldText(caption);
        }
        this.captionEditText.setAllowTextEntitiesIntersection(supportsSendingNewEntities());
    }

    public void showAlertDialog(AlertDialog.Builder builder) {
        if (this.parentActivity != null) {
            try {
                AlertDialog alertDialog = this.visibleDialog;
                if (alertDialog != null) {
                    alertDialog.dismiss();
                    this.visibleDialog = null;
                }
            } catch (Exception e) {
                FileLog.e((Throwable) e);
            }
            try {
                AlertDialog show = builder.show();
                this.visibleDialog = show;
                show.setCanceledOnTouchOutside(true);
                this.visibleDialog.setOnDismissListener(new PhotoViewer$$ExternalSyntheticLambda66(this));
            } catch (Exception e2) {
                FileLog.e((Throwable) e2);
            }
        }
    }

    /* renamed from: lambda$showAlertDialog$46$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3609lambda$showAlertDialog$46$orgtelegramuiPhotoViewer(DialogInterface dialog) {
        this.visibleDialog = null;
    }

    private void mergeImages(String finalPath, String thumbPath, Bitmap thumb, Bitmap bitmap, float size, boolean reverse) {
        boolean recycle = false;
        if (thumb == null) {
            try {
                thumb = BitmapFactory.decodeFile(thumbPath);
                recycle = true;
            } catch (Exception e) {
                FileLog.e((Throwable) e);
            } catch (Throwable e2) {
                FileLog.e(e2);
                return;
            }
        }
        int w = thumb.getWidth();
        int h = thumb.getHeight();
        if (((float) w) > size || ((float) h) > size) {
            float scale2 = ((float) Math.max(w, h)) / size;
            w = (int) (((float) w) / scale2);
            h = (int) (((float) h) / scale2);
        }
        Bitmap dst = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(dst);
        Rect dstRect = new Rect(0, 0, w, h);
        if (reverse) {
            canvas.drawBitmap(bitmap, (Rect) null, dstRect, this.bitmapPaint);
            canvas.drawBitmap(thumb, (Rect) null, dstRect, this.bitmapPaint);
        } else {
            canvas.drawBitmap(thumb, (Rect) null, dstRect, this.bitmapPaint);
            canvas.drawBitmap(bitmap, (Rect) null, dstRect, this.bitmapPaint);
        }
        FileOutputStream stream = new FileOutputStream(new File(finalPath));
        dst.compress(Bitmap.CompressFormat.JPEG, size == 512.0f ? 83 : 87, stream);
        stream.close();
        if (recycle) {
            thumb.recycle();
        }
        dst.recycle();
    }

    /* access modifiers changed from: private */
    public void seekAnimatedStickersTo(long ms) {
        RLottieDrawable drawable;
        if (this.editState.mediaEntities != null) {
            int N = this.editState.mediaEntities.size();
            for (int a = 0; a < N; a++) {
                VideoEditedInfo.MediaEntity entity = this.editState.mediaEntities.get(a);
                if (entity.type == 0 && (entity.subType & 1) != 0 && (entity.view instanceof BackupImageView) && (drawable = ((BackupImageView) entity.view).getImageReceiver().getLottieAnimation()) != null) {
                    long j = this.startTime;
                    long j2 = 0;
                    if (j > 0) {
                        j2 = j / 1000;
                    }
                    drawable.setProgressMs(ms - j2);
                }
            }
        }
    }

    /* access modifiers changed from: private */
    public void playOrStopAnimatedStickers(boolean play) {
        RLottieDrawable drawable;
        if (this.editState.mediaEntities != null) {
            int N = this.editState.mediaEntities.size();
            for (int a = 0; a < N; a++) {
                VideoEditedInfo.MediaEntity entity = this.editState.mediaEntities.get(a);
                if (entity.type == 0 && (entity.subType & 1) != 0 && (entity.view instanceof BackupImageView) && (drawable = ((BackupImageView) entity.view).getImageReceiver().getLottieAnimation()) != null) {
                    if (play) {
                        drawable.start();
                    } else {
                        drawable.stop();
                    }
                }
            }
        }
    }

    private int getAnimatedMediaEntitiesCount(boolean single) {
        int count = 0;
        if (this.editState.mediaEntities != null) {
            int N = this.editState.mediaEntities.size();
            for (int a = 0; a < N; a++) {
                VideoEditedInfo.MediaEntity entity = this.editState.mediaEntities.get(a);
                if (entity.type == 0 && (entity.subType & 1) != 0) {
                    count++;
                    if (single) {
                        break;
                    }
                }
            }
        }
        return count;
    }

    private boolean hasAnimatedMediaEntities() {
        return getAnimatedMediaEntitiesCount(true) != 0;
    }

    private Bitmap createCroppedBitmap(Bitmap bitmap, MediaController.CropState cropState, int[] extraTransform, boolean mirror) {
        MediaController.CropState cropState2 = cropState;
        try {
            int i = cropState2.transformRotation;
            int i2 = 0;
            if (extraTransform != null) {
                i2 = extraTransform[0];
            }
            int tr = (i + i2) % 360;
            int w = bitmap.getWidth();
            int h = bitmap.getHeight();
            int fw = w;
            int rotatedW = w;
            int fh = h;
            int rotatedH = h;
            if (tr == 90 || tr == 270) {
                int temp = fw;
                rotatedW = fh;
                fw = fh;
                rotatedH = temp;
                fh = temp;
            }
            int fw2 = (int) (((float) fw) * cropState2.cropPw);
            int fh2 = (int) (((float) fh) * cropState2.cropPh);
            Bitmap canvasBitmap = Bitmap.createBitmap(fw2, fh2, Bitmap.Config.ARGB_8888);
            Matrix matrix = new Matrix();
            matrix.postTranslate((float) ((-w) / 2), (float) ((-h) / 2));
            if (mirror && cropState2.mirrored) {
                if (tr != 90) {
                    if (tr != 270) {
                        matrix.postScale(-1.0f, 1.0f);
                    }
                }
                matrix.postScale(1.0f, -1.0f);
            }
            matrix.postRotate(cropState2.cropRotate + ((float) tr));
            matrix.postTranslate(cropState2.cropPx * ((float) rotatedW), cropState2.cropPy * ((float) rotatedH));
            matrix.postScale(cropState2.cropScale, cropState2.cropScale);
            matrix.postTranslate((float) (fw2 / 2), (float) (fh2 / 2));
            try {
                new Canvas(canvasBitmap).drawBitmap(bitmap, matrix, new Paint(2));
                return canvasBitmap;
            } catch (Throwable th) {
                e = th;
                FileLog.e(e);
                return null;
            }
        } catch (Throwable th2) {
            e = th2;
            Bitmap bitmap2 = bitmap;
            FileLog.e(e);
            return null;
        }
    }

    /* JADX WARNING: Removed duplicated region for block: B:224:0x07e9  */
    /* JADX WARNING: Removed duplicated region for block: B:225:0x07f2  */
    /* JADX WARNING: Removed duplicated region for block: B:228:0x07fb  */
    /* JADX WARNING: Removed duplicated region for block: B:229:0x080e  */
    /* JADX WARNING: Removed duplicated region for block: B:244:0x0857  */
    /* JADX WARNING: Removed duplicated region for block: B:247:0x085f  */
    /* JADX WARNING: Removed duplicated region for block: B:248:0x08ba  */
    /* JADX WARNING: Removed duplicated region for block: B:251:0x08c7  */
    /* JADX WARNING: Removed duplicated region for block: B:258:0x08d6  */
    /* JADX WARNING: Removed duplicated region for block: B:263:0x08e0  */
    /* JADX WARNING: Removed duplicated region for block: B:264:0x08f2  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private void applyCurrentEditMode() {
        /*
            r49 = this;
            r7 = r49
            int r0 = r7.currentIndex
            if (r0 < 0) goto L_0x08fd
            java.util.ArrayList<java.lang.Object> r1 = r7.imagesArrLocals
            int r1 = r1.size()
            if (r0 < r1) goto L_0x0010
            goto L_0x08fd
        L_0x0010:
            java.util.ArrayList<java.lang.Object> r0 = r7.imagesArrLocals
            int r1 = r7.currentIndex
            java.lang.Object r8 = r0.get(r1)
            boolean r0 = r8 instanceof org.telegram.messenger.MediaController.MediaEditState
            if (r0 != 0) goto L_0x001d
            return
        L_0x001d:
            r0 = 0
            r9 = 1
            android.graphics.Bitmap[] r10 = new android.graphics.Bitmap[r9]
            r1 = 0
            r2 = 0
            r3 = 0
            r4 = 0
            r5 = 0
            java.util.ArrayList<java.lang.Object> r6 = r7.imagesArrLocals
            int r11 = r7.currentIndex
            java.lang.Object r6 = r6.get(r11)
            r11 = r6
            org.telegram.messenger.MediaController$MediaEditState r11 = (org.telegram.messenger.MediaController.MediaEditState) r11
            int r6 = r7.currentEditMode
            r13 = 3
            r14 = 1140850688(0x44000000, float:512.0)
            r15 = 2
            if (r6 == r9) goto L_0x0098
            if (r6 != 0) goto L_0x0041
            int r12 = r7.sendPhotoType
            if (r12 != r9) goto L_0x0041
            goto L_0x0098
        L_0x0041:
            if (r6 != r15) goto L_0x005a
            org.telegram.ui.Components.PhotoFilterView r6 = r7.photoFilterView
            android.graphics.Bitmap r0 = r6.getBitmap()
            org.telegram.ui.Components.PhotoFilterView r6 = r7.photoFilterView
            org.telegram.messenger.MediaController$SavedFilterState r2 = r6.getSavedFilterState()
            r9 = r0
            r13 = r2
            r14 = r3
            r6 = r4
            r28 = r5
            r19 = r10
            r10 = r1
            goto L_0x0120
        L_0x005a:
            if (r6 != r13) goto L_0x008d
            int r6 = android.os.Build.VERSION.SDK_INT
            r12 = 18
            if (r6 < r12) goto L_0x0070
            int r6 = r7.sendPhotoType
            if (r6 == 0) goto L_0x006a
            if (r6 == r9) goto L_0x006a
            if (r6 != r15) goto L_0x0070
        L_0x006a:
            java.util.ArrayList r6 = new java.util.ArrayList
            r6.<init>()
            r3 = r6
        L_0x0070:
            org.telegram.ui.Components.PhotoPaintView r6 = r7.photoPaintView
            boolean r5 = r6.hasChanges()
            org.telegram.ui.Components.PhotoPaintView r6 = r7.photoPaintView
            android.graphics.Bitmap r0 = r6.getBitmap(r3, r10)
            org.telegram.ui.Components.PhotoPaintView r6 = r7.photoPaintView
            java.util.ArrayList r1 = r6.getMasks()
            r9 = r0
            r13 = r2
            r14 = r3
            r6 = r4
            r28 = r5
            r19 = r10
            r10 = r1
            goto L_0x0120
        L_0x008d:
            r9 = r0
            r13 = r2
            r14 = r3
            r6 = r4
            r28 = r5
            r19 = r10
            r10 = r1
            goto L_0x0120
        L_0x0098:
            org.telegram.ui.Components.PhotoCropView r6 = r7.photoCropView
            r6.makeCrop(r11)
            org.telegram.messenger.MediaController$CropState r6 = r11.cropState
            if (r6 != 0) goto L_0x00a2
            return
        L_0x00a2:
            boolean r6 = r7.isCurrentVideo
            if (r6 == 0) goto L_0x0104
            java.lang.String r6 = r11.filterPath
            boolean r6 = android.text.TextUtils.isEmpty(r6)
            if (r6 != 0) goto L_0x00c0
            java.lang.String r6 = r11.filterPath
            r12 = 0
            android.graphics.Bitmap r0 = org.telegram.messenger.ImageLoader.loadBitmap(r6, r12, r14, r14, r9)
            r9 = r0
            r13 = r2
            r14 = r3
            r6 = r4
            r28 = r5
            r19 = r10
            r10 = r1
            goto L_0x0120
        L_0x00c0:
            int r6 = r7.sendPhotoType
            if (r6 != r9) goto L_0x00de
            int[] r4 = new int[r9]
            java.lang.String r6 = r11.getPath()
            long r13 = r7.avatarStartTime
            r18 = 1000(0x3e8, double:4.94E-321)
            long r13 = r13 / r18
            android.graphics.Bitmap r0 = org.telegram.messenger.SendMessagesHelper.createVideoThumbnailAtTime(r6, r13, r4, r9)
            r9 = r0
            r13 = r2
            r14 = r3
            r6 = r4
            r28 = r5
            r19 = r10
            r10 = r1
            goto L_0x0120
        L_0x00de:
            java.lang.String r6 = r11.getPath()
            org.telegram.ui.Components.VideoTimelinePlayView r13 = r7.videoTimelineView
            float r13 = r13.getLeftProgress()
            org.telegram.ui.Components.VideoPlayer r14 = r7.videoPlayer
            r19 = r10
            long r9 = r14.getDuration()
            float r9 = (float) r9
            float r13 = r13 * r9
            r9 = 1148846080(0x447a0000, float:1000.0)
            float r13 = r13 * r9
            long r9 = (long) r13
            android.graphics.Bitmap r0 = org.telegram.messenger.SendMessagesHelper.createVideoThumbnailAtTime(r6, r9)
            r9 = r0
            r10 = r1
            r13 = r2
            r14 = r3
            r6 = r4
            r28 = r5
            goto L_0x0120
        L_0x0104:
            r19 = r10
            org.telegram.messenger.ImageReceiver r6 = r7.centerImage
            android.graphics.Bitmap r0 = r6.getBitmap()
            r6 = 1
            int[] r9 = new int[r6]
            org.telegram.messenger.ImageReceiver r6 = r7.centerImage
            int r6 = r6.getOrientation()
            r10 = 0
            r9[r10] = r6
            r4 = r9
            r9 = r0
            r10 = r1
            r13 = r2
            r14 = r3
            r6 = r4
            r28 = r5
        L_0x0120:
            if (r9 != 0) goto L_0x0123
            return
        L_0x0123:
            java.lang.String r0 = r11.thumbPath
            if (r0 == 0) goto L_0x0134
            java.io.File r0 = new java.io.File
            java.lang.String r1 = r11.thumbPath
            r0.<init>(r1)
            r0.delete()
            r0 = 0
            r11.thumbPath = r0
        L_0x0134:
            java.lang.String r0 = r11.imagePath
            if (r0 == 0) goto L_0x0145
            java.io.File r0 = new java.io.File
            java.lang.String r1 = r11.imagePath
            r0.<init>(r1)
            r0.delete()
            r0 = 0
            r11.imagePath = r0
        L_0x0145:
            int r0 = r7.currentEditMode
            java.lang.String r5 = "_temp.jpg"
            r1 = 1
            if (r0 == r1) goto L_0x06b4
            if (r0 != 0) goto L_0x0160
            int r2 = r7.sendPhotoType
            if (r2 != r1) goto L_0x0160
            r31 = r8
            r20 = r10
            r32 = r13
            r22 = r14
            r30 = 4
            r8 = r5
            r13 = r6
            goto L_0x06c0
        L_0x0160:
            if (r0 != r15) goto L_0x0320
            java.lang.String r0 = r11.filterPath
            if (r0 == 0) goto L_0x0170
            java.io.File r0 = new java.io.File
            java.lang.String r1 = r11.filterPath
            r0.<init>(r1)
            r0.delete()
        L_0x0170:
            android.graphics.Bitmap$CompressFormat r21 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r24 = 87
            r25 = 0
            r26 = 101(0x65, float:1.42E-43)
            r27 = 101(0x65, float:1.42E-43)
            r20 = r9
            r22 = r0
            r23 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r3 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r20, (android.graphics.Bitmap.CompressFormat) r21, (float) r22, (float) r23, (int) r24, (boolean) r25, (int) r26, (int) r27)
            r0 = 1
            java.io.File r1 = org.telegram.messenger.FileLoader.getPathToAttach(r3, r0)
            java.lang.String r1 = r1.toString()
            r11.filterPath = r1
            org.telegram.messenger.MediaController$CropState r1 = r11.cropState
            if (r1 == 0) goto L_0x01a7
            org.telegram.messenger.MediaController$CropState r1 = r11.cropState
            r2 = 0
            android.graphics.Bitmap r1 = r7.createCroppedBitmap(r9, r1, r2, r0)
            r20 = r1
            goto L_0x01a9
        L_0x01a7:
            r20 = r9
        L_0x01a9:
            java.lang.String r0 = r11.paintPath
            if (r0 != 0) goto L_0x0202
            boolean r0 = r7.isCurrentVideo
            if (r0 != 0) goto L_0x01da
            android.graphics.Bitmap$CompressFormat r21 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r24 = 87
            r25 = 0
            r26 = 101(0x65, float:1.42E-43)
            r27 = 101(0x65, float:1.42E-43)
            r22 = r0
            r23 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r3 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r20, (android.graphics.Bitmap.CompressFormat) r21, (float) r22, (float) r23, (int) r24, (boolean) r25, (int) r26, (int) r27)
            r0 = 1
            java.io.File r1 = org.telegram.messenger.FileLoader.getPathToAttach(r3, r0)
            java.lang.String r0 = r1.toString()
            r7.currentImagePath = r0
            r11.imagePath = r0
        L_0x01da:
            android.graphics.Bitmap$CompressFormat r30 = android.graphics.Bitmap.CompressFormat.JPEG
            r31 = 1140850688(0x44000000, float:512.0)
            r32 = 1140850688(0x44000000, float:512.0)
            r33 = 83
            r34 = 0
            r35 = 101(0x65, float:1.42E-43)
            r36 = 101(0x65, float:1.42E-43)
            r29 = r20
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r29, (android.graphics.Bitmap.CompressFormat) r30, (float) r31, (float) r32, (int) r33, (boolean) r34, (int) r35, (int) r36)
            r1 = 1
            java.io.File r2 = org.telegram.messenger.FileLoader.getPathToAttach(r0, r1)
            java.lang.String r1 = r2.toString()
            r11.thumbPath = r1
            r31 = r8
            r32 = r13
            r30 = 4
            r13 = r6
            goto L_0x0313
        L_0x0202:
            java.lang.String r2 = r11.fullPaintPath
            java.lang.String r0 = r11.paintPath
            java.lang.String r1 = r11.fullPaintPath
            boolean r0 = r0.equals(r1)
            if (r0 == 0) goto L_0x0215
            org.telegram.ui.Components.PaintingOverlay r0 = r7.paintingOverlay
            android.graphics.Bitmap r0 = r0.getThumb()
            goto L_0x0216
        L_0x0215:
            r0 = 0
        L_0x0216:
            r1 = r0
            org.telegram.messenger.MediaController$CropState r0 = r11.cropState
            if (r0 == 0) goto L_0x023b
            if (r1 != 0) goto L_0x022f
            java.lang.String r0 = r11.fullPaintPath
            android.graphics.Bitmap r0 = android.graphics.BitmapFactory.decodeFile(r0)
            org.telegram.messenger.MediaController$CropState r12 = r11.cropState
            r4 = 0
            r15 = 0
            android.graphics.Bitmap r12 = r7.createCroppedBitmap(r0, r12, r15, r4)
            r0.recycle()
            goto L_0x0237
        L_0x022f:
            r4 = 0
            r15 = 0
            org.telegram.messenger.MediaController$CropState r0 = r11.cropState
            android.graphics.Bitmap r12 = r7.createCroppedBitmap(r1, r0, r15, r4)
        L_0x0237:
            r0 = 1
            r15 = r12
            r12 = r0
            goto L_0x023f
        L_0x023b:
            r12 = r1
            r0 = 0
            r15 = r12
            r12 = r0
        L_0x023f:
            boolean r0 = r7.isCurrentVideo
            if (r0 != 0) goto L_0x02ce
            boolean r0 = r49.hasAnimatedMediaEntities()
            if (r0 == 0) goto L_0x0283
            android.graphics.Bitmap$CompressFormat r31 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r4 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r4 = (float) r4
            r34 = 87
            r35 = 0
            r36 = 101(0x65, float:1.42E-43)
            r37 = 101(0x65, float:1.42E-43)
            r30 = r20
            r32 = r0
            r33 = r4
            org.telegram.tgnet.TLRPC$PhotoSize r3 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r30, (android.graphics.Bitmap.CompressFormat) r31, (float) r32, (float) r33, (int) r34, (boolean) r35, (int) r36, (int) r37)
            r0 = 1
            java.io.File r4 = org.telegram.messenger.FileLoader.getPathToAttach(r3, r0)
            java.lang.String r0 = r4.toString()
            r7.currentImagePath = r0
            r11.imagePath = r0
            r16 = r1
            r17 = r2
            r25 = r3
            r31 = r8
            r32 = r13
            r30 = 4
            r8 = r5
            r13 = r6
            goto L_0x02dc
        L_0x0283:
            java.io.File r0 = new java.io.File
            r16 = r1
            r4 = 4
            java.io.File r1 = org.telegram.messenger.FileLoader.getDirectory(r4)
            java.lang.StringBuilder r4 = new java.lang.StringBuilder
            r4.<init>()
            r17 = r2
            int r2 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r4.append(r2)
            r4.append(r5)
            java.lang.String r2 = r4.toString()
            r0.<init>(r1, r2)
            r23 = r0
            java.lang.String r1 = r23.getAbsolutePath()
            r11.imagePath = r1
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r4 = (float) r0
            r24 = 1
            r0 = r49
            r2 = r17
            r25 = r3
            r3 = r15
            r22 = r4
            r30 = 4
            r4 = r20
            r31 = r8
            r8 = r5
            r5 = r22
            r32 = r13
            r13 = r6
            r6 = r24
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
            goto L_0x02dc
        L_0x02ce:
            r16 = r1
            r17 = r2
            r25 = r3
            r31 = r8
            r32 = r13
            r30 = 4
            r8 = r5
            r13 = r6
        L_0x02dc:
            java.io.File r0 = new java.io.File
            java.io.File r1 = org.telegram.messenger.FileLoader.getDirectory(r30)
            java.lang.StringBuilder r2 = new java.lang.StringBuilder
            r2.<init>()
            int r3 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r2.append(r3)
            r2.append(r8)
            java.lang.String r2 = r2.toString()
            r0.<init>(r1, r2)
            r8 = r0
            java.lang.String r1 = r8.getAbsolutePath()
            r11.thumbPath = r1
            r5 = 1140850688(0x44000000, float:512.0)
            r6 = 1
            r0 = r49
            r2 = r17
            r3 = r15
            r4 = r20
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
            if (r12 == 0) goto L_0x0311
            r15.recycle()
        L_0x0311:
            r0 = r25
        L_0x0313:
            org.telegram.messenger.MediaController$CropState r1 = r11.cropState
            if (r1 == 0) goto L_0x031a
            r20.recycle()
        L_0x031a:
            r20 = r10
            r22 = r14
            goto L_0x06b1
        L_0x0320:
            r31 = r8
            r32 = r13
            r30 = 4
            r8 = r5
            r13 = r6
            r1 = 3
            if (r0 != r1) goto L_0x06ad
            java.lang.String r0 = r11.paintPath
            if (r0 == 0) goto L_0x034d
            java.io.File r0 = new java.io.File
            java.lang.String r1 = r11.paintPath
            r0.<init>(r1)
            r0.delete()
            java.lang.String r0 = r11.paintPath
            java.lang.String r1 = r11.fullPaintPath
            boolean r0 = r0.equals(r1)
            if (r0 != 0) goto L_0x034d
            java.io.File r0 = new java.io.File
            java.lang.String r1 = r11.fullPaintPath
            r0.<init>(r1)
            r0.delete()
        L_0x034d:
            android.graphics.Bitmap$CompressFormat r21 = android.graphics.Bitmap.CompressFormat.PNG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r24 = 87
            r25 = 0
            r26 = 101(0x65, float:1.42E-43)
            r27 = 101(0x65, float:1.42E-43)
            r20 = r9
            r22 = r0
            r23 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r20, (android.graphics.Bitmap.CompressFormat) r21, (float) r22, (float) r23, (int) r24, (boolean) r25, (int) r26, (int) r27)
            r11.stickers = r10
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            r2 = 1
            java.io.File r3 = org.telegram.messenger.FileLoader.getPathToAttach(r0, r2)
            java.lang.String r2 = r3.toString()
            r1.paintPath = r2
            r11.paintPath = r2
            org.telegram.ui.Components.PaintingOverlay r1 = r7.paintingOverlay
            org.telegram.ui.PhotoViewer$EditState r2 = r7.editState
            if (r14 == 0) goto L_0x038b
            boolean r3 = r14.isEmpty()
            if (r3 == 0) goto L_0x0389
            goto L_0x038b
        L_0x0389:
            r3 = r14
            goto L_0x038c
        L_0x038b:
            r3 = 0
        L_0x038c:
            r2.mediaEntities = r3
            r11.mediaEntities = r3
            boolean r2 = r7.isCurrentVideo
            r4 = 1
            r1.setEntities(r3, r2, r4)
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            org.telegram.ui.Components.PhotoPaintView r2 = r7.photoPaintView
            long r2 = r2.getLcm()
            r1.averageDuration = r2
            r11.averageDuration = r2
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r1 = r11.mediaEntities
            if (r1 == 0) goto L_0x03d6
            r1 = 0
            r2 = r19[r1]
            if (r2 == 0) goto L_0x03d6
            r20 = r19[r1]
            android.graphics.Bitmap$CompressFormat r21 = android.graphics.Bitmap.CompressFormat.PNG
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            int r2 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r2 = (float) r2
            r24 = 87
            r25 = 0
            r26 = 101(0x65, float:1.42E-43)
            r27 = 101(0x65, float:1.42E-43)
            r22 = r1
            r23 = r2
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r20, (android.graphics.Bitmap.CompressFormat) r21, (float) r22, (float) r23, (int) r24, (boolean) r25, (int) r26, (int) r27)
            r1 = 1
            java.io.File r2 = org.telegram.messenger.FileLoader.getPathToAttach(r0, r1)
            java.lang.String r1 = r2.toString()
            r11.fullPaintPath = r1
            r15 = r0
            goto L_0x03db
        L_0x03d6:
            java.lang.String r1 = r11.paintPath
            r11.fullPaintPath = r1
            r15 = r0
        L_0x03db:
            org.telegram.ui.Components.PaintingOverlay r0 = r7.paintingOverlay
            r0.setBitmap(r9)
            org.telegram.messenger.MediaController$CropState r0 = r11.cropState
            if (r0 == 0) goto L_0x04db
            org.telegram.messenger.MediaController$CropState r0 = r11.cropState
            boolean r0 = r0.initied
            if (r0 == 0) goto L_0x04db
            org.telegram.ui.PhotoViewer$EditState r0 = r7.editState
            java.lang.String r0 = r0.paintPath
            java.lang.String r0 = org.telegram.ui.Components.Crop.CropView.getCopy(r0)
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            java.lang.String r1 = r1.croppedPaintPath
            if (r1 == 0) goto L_0x0409
            java.io.File r1 = new java.io.File
            org.telegram.ui.PhotoViewer$EditState r2 = r7.editState
            java.lang.String r2 = r2.croppedPaintPath
            r1.<init>(r2)
            r1.delete()
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            r2 = 0
            r1.croppedPaintPath = r2
        L_0x0409:
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            r1.croppedPaintPath = r0
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r1 = r1.mediaEntities
            if (r1 == 0) goto L_0x0452
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r1 = r1.mediaEntities
            boolean r1 = r1.isEmpty()
            if (r1 != 0) goto L_0x0452
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            java.util.ArrayList r2 = new java.util.ArrayList
            org.telegram.ui.PhotoViewer$EditState r3 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r3 = r3.mediaEntities
            int r3 = r3.size()
            r2.<init>(r3)
            r1.croppedMediaEntities = r2
            r1 = 0
            org.telegram.ui.PhotoViewer$EditState r2 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r2 = r2.mediaEntities
            int r2 = r2.size()
        L_0x0437:
            if (r1 >= r2) goto L_0x0451
            org.telegram.ui.PhotoViewer$EditState r3 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r3 = r3.croppedMediaEntities
            org.telegram.ui.PhotoViewer$EditState r4 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r4 = r4.mediaEntities
            java.lang.Object r4 = r4.get(r1)
            org.telegram.messenger.VideoEditedInfo$MediaEntity r4 = (org.telegram.messenger.VideoEditedInfo.MediaEntity) r4
            org.telegram.messenger.VideoEditedInfo$MediaEntity r4 = r4.copy()
            r3.add(r4)
            int r1 = r1 + 1
            goto L_0x0437
        L_0x0451:
            goto L_0x0457
        L_0x0452:
            org.telegram.ui.PhotoViewer$EditState r1 = r7.editState
            r2 = 0
            r1.croppedMediaEntities = r2
        L_0x0457:
            org.telegram.messenger.MediaController$CropState r1 = r11.cropState
            int r1 = r1.width
            org.telegram.messenger.MediaController$CropState r2 = r11.cropState
            int r2 = r2.height
            android.graphics.Bitmap$Config r3 = android.graphics.Bitmap.Config.ARGB_8888
            android.graphics.Bitmap r1 = android.graphics.Bitmap.createBitmap(r1, r2, r3)
            android.graphics.Canvas r2 = new android.graphics.Canvas
            r2.<init>(r1)
            r36 = r2
            boolean r2 = r7.isCurrentVideo
            if (r2 == 0) goto L_0x047d
            android.view.TextureView r2 = r7.videoTextureView
            org.telegram.ui.Components.VideoEditTextureView r2 = (org.telegram.ui.Components.VideoEditTextureView) r2
            int r3 = r2.getVideoWidth()
            int r2 = r2.getVideoHeight()
            goto L_0x0489
        L_0x047d:
            org.telegram.messenger.ImageReceiver r2 = r7.centerImage
            int r3 = r2.getBitmapWidth()
            org.telegram.messenger.ImageReceiver r2 = r7.centerImage
            int r2 = r2.getBitmapHeight()
        L_0x0489:
            android.app.Activity r4 = r7.parentActivity
            r35 = 0
            android.graphics.Bitmap$CompressFormat r38 = android.graphics.Bitmap.CompressFormat.PNG
            org.telegram.messenger.MediaController$CropState r5 = r11.cropState
            android.graphics.Matrix r5 = r5.matrix
            org.telegram.messenger.MediaController$CropState r6 = r11.cropState
            float r6 = r6.stateScale
            org.telegram.messenger.MediaController$CropState r12 = r11.cropState
            float r12 = r12.cropRotate
            r20 = r10
            org.telegram.messenger.MediaController$CropState r10 = r11.cropState
            int r10 = r10.transformRotation
            float r10 = (float) r10
            r22 = r14
            org.telegram.messenger.MediaController$CropState r14 = r11.cropState
            float r14 = r14.scale
            r46 = 0
            r23 = r15
            org.telegram.ui.PhotoViewer$EditState r15 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r15 = r15.croppedMediaEntities
            r48 = 0
            r33 = r4
            r34 = r0
            r37 = r1
            r39 = r5
            r40 = r3
            r41 = r2
            r42 = r6
            r43 = r12
            r44 = r10
            r45 = r14
            r47 = r15
            org.telegram.ui.Components.Crop.CropView.editBitmap(r33, r34, r35, r36, r37, r38, r39, r40, r41, r42, r43, r44, r45, r46, r47, r48)
            r1.recycle()
            org.telegram.ui.PhotoViewer$EditState r4 = r7.editState
            java.lang.String r4 = r4.croppedPaintPath
            r11.croppedPaintPath = r4
            org.telegram.ui.PhotoViewer$EditState r4 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r4 = r4.croppedMediaEntities
            r11.croppedMediaEntities = r4
            goto L_0x04e1
        L_0x04db:
            r20 = r10
            r22 = r14
            r23 = r15
        L_0x04e1:
            r0 = 0
            r1 = 0
            r2 = r19[r1]
            if (r2 == 0) goto L_0x04ea
            r2 = r19[r1]
            goto L_0x04eb
        L_0x04ea:
            r2 = r9
        L_0x04eb:
            r10 = r2
            r1 = r10
            org.telegram.messenger.MediaController$CropState r2 = r11.cropState
            if (r2 == 0) goto L_0x0503
            org.telegram.messenger.MediaController$CropState r2 = r11.cropState
            boolean r2 = r2.initied
            if (r2 == 0) goto L_0x0503
            org.telegram.messenger.MediaController$CropState r2 = r11.cropState
            r3 = 0
            r4 = 0
            android.graphics.Bitmap r1 = r7.createCroppedBitmap(r10, r2, r3, r4)
            r0 = 1
            r12 = r0
            r14 = r1
            goto L_0x0505
        L_0x0503:
            r12 = r0
            r14 = r1
        L_0x0505:
            boolean r0 = r7.isCurrentVideo
            if (r0 == 0) goto L_0x054f
            java.lang.String r0 = r11.filterPath
            if (r0 != 0) goto L_0x052c
            java.lang.String r0 = r11.getPath()
            org.telegram.ui.Components.VideoTimelinePlayView r1 = r7.videoTimelineView
            float r1 = r1.getLeftProgress()
            org.telegram.ui.Components.VideoPlayer r2 = r7.videoPlayer
            long r2 = r2.getDuration()
            float r2 = (float) r2
            float r1 = r1 * r2
            r2 = 1148846080(0x447a0000, float:1000.0)
            float r1 = r1 * r2
            long r1 = (long) r1
            android.graphics.Bitmap r0 = org.telegram.messenger.SendMessagesHelper.createVideoThumbnailAtTime(r0, r1)
            r2 = 0
            r3 = 1
            goto L_0x0536
        L_0x052c:
            java.lang.String r0 = r11.filterPath
            r1 = 1140850688(0x44000000, float:512.0)
            r2 = 0
            r3 = 1
            android.graphics.Bitmap r0 = org.telegram.messenger.ImageLoader.loadBitmap(r0, r2, r1, r1, r3)
        L_0x0536:
            org.telegram.messenger.MediaController$CropState r1 = r11.cropState
            if (r1 == 0) goto L_0x0541
            org.telegram.messenger.MediaController$CropState r1 = r11.cropState
            android.graphics.Bitmap r1 = r7.createCroppedBitmap(r0, r1, r2, r3)
            goto L_0x0542
        L_0x0541:
            r1 = r0
        L_0x0542:
            org.telegram.messenger.MediaController$CropState r2 = r11.cropState
            if (r2 == 0) goto L_0x0549
            r0.recycle()
        L_0x0549:
            r0 = 1
            r15 = r1
            r16 = r13
            r13 = r0
            goto L_0x05aa
        L_0x054f:
            r0 = 1
            int[] r1 = new int[r0]
            org.telegram.messenger.ImageReceiver r0 = r7.centerImage
            int r0 = r0.getOrientation()
            r2 = 0
            r1[r2] = r0
            r6 = r1
            org.telegram.messenger.MediaController$CropState r0 = r11.cropState
            if (r0 == 0) goto L_0x0573
            org.telegram.messenger.ImageReceiver r0 = r7.centerImage
            android.graphics.Bitmap r0 = r0.getBitmap()
            org.telegram.messenger.MediaController$CropState r1 = r11.cropState
            r2 = 1
            android.graphics.Bitmap r1 = r7.createCroppedBitmap(r0, r1, r6, r2)
            r0 = 1
            r13 = r0
            r15 = r1
            r16 = r6
            goto L_0x05aa
        L_0x0573:
            org.telegram.messenger.ImageReceiver r0 = r7.centerImage
            android.graphics.Bitmap r1 = r0.getBitmap()
            r0 = 0
            r2 = r6[r0]
            if (r2 == 0) goto L_0x05a5
            android.graphics.Matrix r2 = new android.graphics.Matrix
            r2.<init>()
            r3 = r6[r0]
            float r0 = (float) r3
            r2.postRotate(r0)
            r34 = 0
            r35 = 0
            int r36 = r1.getWidth()
            int r37 = r1.getHeight()
            r39 = 1
            r33 = r1
            r38 = r2
            android.graphics.Bitmap r1 = org.telegram.messenger.Bitmaps.createBitmap(r33, r34, r35, r36, r37, r38, r39)
            r0 = 1
            r13 = r0
            r15 = r1
            r16 = r6
            goto L_0x05aa
        L_0x05a5:
            r0 = 0
            r13 = r0
            r15 = r1
            r16 = r6
        L_0x05aa:
            boolean r0 = r7.isCurrentVideo
            if (r0 != 0) goto L_0x0614
            boolean r0 = r49.hasAnimatedMediaEntities()
            if (r0 == 0) goto L_0x05e2
            android.graphics.Bitmap$CompressFormat r34 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r37 = 87
            r38 = 0
            r39 = 101(0x65, float:1.42E-43)
            r40 = 101(0x65, float:1.42E-43)
            r33 = r15
            r35 = r0
            r36 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r33, (android.graphics.Bitmap.CompressFormat) r34, (float) r35, (float) r36, (int) r37, (boolean) r38, (int) r39, (int) r40)
            r1 = 1
            java.io.File r2 = org.telegram.messenger.FileLoader.getPathToAttach(r0, r1)
            java.lang.String r1 = r2.toString()
            r7.currentImagePath = r1
            r11.imagePath = r1
            r23 = r0
            goto L_0x0614
        L_0x05e2:
            java.io.File r0 = new java.io.File
            java.io.File r1 = org.telegram.messenger.FileLoader.getDirectory(r30)
            java.lang.StringBuilder r2 = new java.lang.StringBuilder
            r2.<init>()
            int r3 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r2.append(r3)
            r2.append(r8)
            java.lang.String r2 = r2.toString()
            r0.<init>(r1, r2)
            r17 = r0
            java.lang.String r1 = r17.getAbsolutePath()
            r11.imagePath = r1
            r2 = 0
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r5 = (float) r0
            r6 = 0
            r0 = r49
            r3 = r15
            r4 = r14
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
        L_0x0614:
            java.io.File r0 = new java.io.File
            java.io.File r1 = org.telegram.messenger.FileLoader.getDirectory(r30)
            java.lang.StringBuilder r2 = new java.lang.StringBuilder
            r2.<init>()
            int r3 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r2.append(r3)
            r2.append(r8)
            java.lang.String r2 = r2.toString()
            r0.<init>(r1, r2)
            r8 = r0
            java.lang.String r1 = r8.getAbsolutePath()
            r11.thumbPath = r1
            r2 = 0
            r5 = 1140850688(0x44000000, float:512.0)
            r6 = 0
            r0 = r49
            r3 = r15
            r4 = r14
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
            if (r12 == 0) goto L_0x0649
            if (r14 == 0) goto L_0x0649
            r14.recycle()
        L_0x0649:
            if (r13 == 0) goto L_0x0650
            if (r15 == 0) goto L_0x0650
            r15.recycle()
        L_0x0650:
            int r0 = r7.sendPhotoType
            r1 = 1
            if (r0 != r1) goto L_0x06a6
            org.telegram.ui.Components.VideoPlayer r0 = r7.videoPlayer
            if (r0 == 0) goto L_0x06a6
            boolean r0 = r7.isCurrentVideo
            if (r0 == 0) goto L_0x06a6
            r0 = 0
            int r2 = r7.getAnimatedMediaEntitiesCount(r0)
            if (r2 != r1) goto L_0x06a6
            org.telegram.ui.Components.VideoTimelinePlayView r0 = r7.videoTimelineView
            float r0 = r0.getLeftProgress()
            r1 = 0
            int r0 = (r0 > r1 ? 1 : (r0 == r1 ? 0 : -1))
            if (r0 > 0) goto L_0x06a6
            org.telegram.ui.Components.VideoTimelinePlayView r0 = r7.videoTimelineView
            float r0 = r0.getRightProgress()
            r1 = 1065353216(0x3var_, float:1.0)
            int r0 = (r0 > r1 ? 1 : (r0 == r1 ? 0 : -1))
            if (r0 < 0) goto L_0x06a6
            long r2 = r11.averageDuration
            org.telegram.ui.Components.VideoPlayer r0 = r7.videoPlayer
            long r4 = r0.getDuration()
        L_0x0683:
            r24 = 3000(0xbb8, double:1.482E-320)
            int r0 = (r2 > r24 ? 1 : (r2 == r24 ? 0 : -1))
            if (r0 >= 0) goto L_0x0695
            int r0 = (r2 > r4 ? 1 : (r2 == r4 ? 0 : -1))
            if (r0 >= 0) goto L_0x0695
            r0 = r12
            r6 = r13
            long r12 = r11.averageDuration
            long r2 = r2 + r12
            r12 = r0
            r13 = r6
            goto L_0x0683
        L_0x0695:
            r0 = r12
            r6 = r13
            org.telegram.ui.Components.VideoTimelinePlayView r12 = r7.videoTimelineView
            float r13 = (float) r2
            r17 = r0
            float r0 = (float) r4
            float r13 = r13 / r0
            float r0 = java.lang.Math.min(r1, r13)
            r12.setRightProgress(r0)
            goto L_0x06a9
        L_0x06a6:
            r17 = r12
            r6 = r13
        L_0x06a9:
            r6 = r16
            goto L_0x07e4
        L_0x06ad:
            r20 = r10
            r22 = r14
        L_0x06b1:
            r6 = r13
            goto L_0x07e4
        L_0x06b4:
            r31 = r8
            r20 = r10
            r32 = r13
            r22 = r14
            r30 = 4
            r8 = r5
            r13 = r6
        L_0x06c0:
            org.telegram.ui.PhotoViewer$EditState r0 = r7.editState
            org.telegram.messenger.MediaController$CropState r1 = r11.cropState
            r0.cropState = r1
            org.telegram.ui.PhotoViewer$EditState r0 = r7.editState
            java.lang.String r1 = r11.croppedPaintPath
            r0.croppedPaintPath = r1
            org.telegram.ui.PhotoViewer$EditState r0 = r7.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r1 = r11.croppedMediaEntities
            r0.croppedMediaEntities = r1
            org.telegram.messenger.MediaController$CropState r0 = r11.cropState
            r1 = 1
            android.graphics.Bitmap r10 = r7.createCroppedBitmap(r9, r0, r13, r1)
            java.lang.String r0 = r11.paintPath
            if (r0 == 0) goto L_0x078b
            java.lang.String r0 = r11.fullPaintPath
            android.graphics.Bitmap r12 = android.graphics.BitmapFactory.decodeFile(r0)
            org.telegram.messenger.MediaController$CropState r0 = r11.cropState
            r1 = 0
            r2 = 0
            android.graphics.Bitmap r14 = r7.createCroppedBitmap(r12, r0, r1, r2)
            boolean r0 = r7.isCurrentVideo
            if (r0 != 0) goto L_0x0752
            boolean r0 = r49.hasAnimatedMediaEntities()
            if (r0 == 0) goto L_0x0721
            android.graphics.Bitmap$CompressFormat r34 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r37 = 87
            r38 = 0
            r39 = 101(0x65, float:1.42E-43)
            r40 = 101(0x65, float:1.42E-43)
            r33 = r10
            r35 = r0
            r36 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r33, (android.graphics.Bitmap.CompressFormat) r34, (float) r35, (float) r36, (int) r37, (boolean) r38, (int) r39, (int) r40)
            r1 = 1
            java.io.File r2 = org.telegram.messenger.FileLoader.getPathToAttach(r0, r1)
            java.lang.String r1 = r2.toString()
            r7.currentImagePath = r1
            r11.imagePath = r1
            goto L_0x0752
        L_0x0721:
            java.io.File r0 = new java.io.File
            java.io.File r1 = org.telegram.messenger.FileLoader.getDirectory(r30)
            java.lang.StringBuilder r2 = new java.lang.StringBuilder
            r2.<init>()
            int r3 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r2.append(r3)
            r2.append(r8)
            java.lang.String r2 = r2.toString()
            r0.<init>(r1, r2)
            r15 = r0
            java.lang.String r1 = r15.getAbsolutePath()
            r11.imagePath = r1
            r2 = 0
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r5 = (float) r0
            r6 = 1
            r0 = r49
            r3 = r14
            r4 = r10
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
        L_0x0752:
            java.io.File r0 = new java.io.File
            java.io.File r1 = org.telegram.messenger.FileLoader.getDirectory(r30)
            java.lang.StringBuilder r2 = new java.lang.StringBuilder
            r2.<init>()
            int r3 = org.telegram.messenger.SharedConfig.getLastLocalId()
            r2.append(r3)
            r2.append(r8)
            java.lang.String r2 = r2.toString()
            r0.<init>(r1, r2)
            r8 = r0
            java.lang.String r1 = r8.getAbsolutePath()
            r11.thumbPath = r1
            r2 = 0
            r5 = 1140850688(0x44000000, float:512.0)
            r6 = 1
            r0 = r49
            r3 = r14
            r4 = r10
            r0.mergeImages(r1, r2, r3, r4, r5, r6)
            if (r14 == 0) goto L_0x0785
            r14.recycle()
        L_0x0785:
            if (r12 == 0) goto L_0x078a
            r12.recycle()
        L_0x078a:
            goto L_0x07d7
        L_0x078b:
            boolean r0 = r7.isCurrentVideo
            if (r0 != 0) goto L_0x07ba
            android.graphics.Bitmap$CompressFormat r34 = android.graphics.Bitmap.CompressFormat.JPEG
            int r0 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r0 = (float) r0
            int r1 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            float r1 = (float) r1
            r37 = 87
            r38 = 0
            r39 = 101(0x65, float:1.42E-43)
            r40 = 101(0x65, float:1.42E-43)
            r33 = r10
            r35 = r0
            r36 = r1
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r33, (android.graphics.Bitmap.CompressFormat) r34, (float) r35, (float) r36, (int) r37, (boolean) r38, (int) r39, (int) r40)
            r1 = 1
            java.io.File r2 = org.telegram.messenger.FileLoader.getPathToAttach(r0, r1)
            java.lang.String r1 = r2.toString()
            r7.currentImagePath = r1
            r11.imagePath = r1
        L_0x07ba:
            r34 = 1140850688(0x44000000, float:512.0)
            r35 = 1140850688(0x44000000, float:512.0)
            r36 = 70
            r37 = 0
            r38 = 101(0x65, float:1.42E-43)
            r39 = 101(0x65, float:1.42E-43)
            r33 = r10
            org.telegram.tgnet.TLRPC$PhotoSize r0 = org.telegram.messenger.ImageLoader.scaleAndSaveImage((android.graphics.Bitmap) r33, (float) r34, (float) r35, (int) r36, (boolean) r37, (int) r38, (int) r39)
            r1 = 1
            java.io.File r2 = org.telegram.messenger.FileLoader.getPathToAttach(r0, r1)
            java.lang.String r1 = r2.toString()
            r11.thumbPath = r1
        L_0x07d7:
            int r0 = r7.currentEditMode
            if (r0 != 0) goto L_0x07e3
            boolean r0 = r7.isCurrentVideo
            if (r0 == 0) goto L_0x07e3
            r9.recycle()
            r9 = r10
        L_0x07e3:
            r6 = r13
        L_0x07e4:
            org.telegram.messenger.SharedConfig.saveConfig()
            if (r32 == 0) goto L_0x07f2
            org.telegram.ui.PhotoViewer$EditState r0 = r7.editState
            r2 = r32
            r0.savedFilterState = r2
            r11.savedFilterState = r2
            goto L_0x07f4
        L_0x07f2:
            r2 = r32
        L_0x07f4:
            int r0 = r7.currentEditMode
            java.lang.String r1 = "dialogFloatingButton"
            r3 = 1
            if (r0 != r3) goto L_0x080e
            r11.isCropped = r3
            android.widget.ImageView r0 = r7.cropItem
            android.graphics.PorterDuffColorFilter r3 = new android.graphics.PorterDuffColorFilter
            int r1 = r7.getThemedColor(r1)
            android.graphics.PorterDuff$Mode r4 = android.graphics.PorterDuff.Mode.MULTIPLY
            r3.<init>(r1, r4)
            r0.setColorFilter(r3)
            goto L_0x083d
        L_0x080e:
            r3 = 2
            if (r0 != r3) goto L_0x0825
            r0 = 1
            r11.isFiltered = r0
            android.widget.ImageView r0 = r7.tuneItem
            android.graphics.PorterDuffColorFilter r3 = new android.graphics.PorterDuffColorFilter
            int r1 = r7.getThemedColor(r1)
            android.graphics.PorterDuff$Mode r4 = android.graphics.PorterDuff.Mode.MULTIPLY
            r3.<init>(r1, r4)
            r0.setColorFilter(r3)
            goto L_0x083d
        L_0x0825:
            r3 = 3
            if (r0 != r3) goto L_0x083d
            if (r28 == 0) goto L_0x083d
            r0 = 1
            r11.isPainted = r0
            android.widget.ImageView r0 = r7.paintItem
            android.graphics.PorterDuffColorFilter r3 = new android.graphics.PorterDuffColorFilter
            int r1 = r7.getThemedColor(r1)
            android.graphics.PorterDuff$Mode r4 = android.graphics.PorterDuff.Mode.MULTIPLY
            r3.<init>(r1, r4)
            r0.setColorFilter(r3)
        L_0x083d:
            int r0 = r7.sendPhotoType
            if (r0 == 0) goto L_0x0844
            r1 = 4
            if (r0 != r1) goto L_0x085a
        L_0x0844:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r0 = r7.placeProvider
            if (r0 == 0) goto L_0x085a
            int r1 = r7.currentIndex
            r0.updatePhotoAtIndex(r1)
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r0 = r7.placeProvider
            int r1 = r7.currentIndex
            boolean r0 = r0.isPhotoChecked(r1)
            if (r0 != 0) goto L_0x085a
            r49.setPhotoChecked()
        L_0x085a:
            int r0 = r7.currentEditMode
            r1 = 1
            if (r0 != r1) goto L_0x08ba
            org.telegram.ui.Components.PhotoCropView r0 = r7.photoCropView
            float r0 = r0.getRectSizeX()
            int r1 = r49.getContainerViewWidth()
            float r1 = (float) r1
            float r0 = r0 / r1
            org.telegram.ui.Components.PhotoCropView r1 = r7.photoCropView
            float r1 = r1.getRectSizeY()
            int r3 = r49.getContainerViewHeight()
            float r3 = (float) r3
            float r1 = r1 / r3
            float r3 = java.lang.Math.max(r0, r1)
            r7.scale = r3
            org.telegram.ui.Components.PhotoCropView r3 = r7.photoCropView
            float r3 = r3.getRectX()
            org.telegram.ui.Components.PhotoCropView r4 = r7.photoCropView
            float r4 = r4.getRectSizeX()
            r5 = 1073741824(0x40000000, float:2.0)
            float r4 = r4 / r5
            float r3 = r3 + r4
            int r4 = r49.getContainerViewWidth()
            r8 = 2
            int r4 = r4 / r8
            float r4 = (float) r4
            float r3 = r3 - r4
            r7.translationX = r3
            org.telegram.ui.Components.PhotoCropView r3 = r7.photoCropView
            float r3 = r3.getRectY()
            org.telegram.ui.Components.PhotoCropView r4 = r7.photoCropView
            float r4 = r4.getRectSizeY()
            float r4 = r4 / r5
            float r3 = r3 + r4
            int r4 = r49.getContainerViewHeight()
            r5 = 2
            int r4 = r4 / r5
            float r4 = (float) r4
            float r3 = r3 - r4
            r7.translationY = r3
            r3 = 1
            r7.zoomAnimation = r3
            r7.applying = r3
            org.telegram.ui.Components.PhotoCropView r4 = r7.photoCropView
            r4.onDisappear()
            goto L_0x08bb
        L_0x08ba:
            r3 = 1
        L_0x08bb:
            org.telegram.messenger.ImageReceiver r0 = r7.centerImage
            r1 = 0
            r0.setParentView(r1)
            r7.ignoreDidSetImage = r3
            boolean r0 = r7.isCurrentVideo
            if (r0 == 0) goto L_0x08d6
            int r0 = r7.currentEditMode
            if (r0 == r3) goto L_0x08d4
            if (r0 != 0) goto L_0x08d2
            int r0 = r7.sendPhotoType
            if (r0 != r3) goto L_0x08d2
            goto L_0x08d4
        L_0x08d2:
            r0 = 0
            goto L_0x08d5
        L_0x08d4:
            r0 = 1
        L_0x08d5:
            goto L_0x08de
        L_0x08d6:
            int r0 = r7.currentEditMode
            r1 = 2
            if (r0 != r1) goto L_0x08dd
            r0 = 1
            goto L_0x08de
        L_0x08dd:
            r0 = 0
        L_0x08de:
            if (r0 == 0) goto L_0x08f2
            org.telegram.messenger.ImageReceiver r1 = r7.centerImage
            r1.setImageBitmap((android.graphics.Bitmap) r9)
            org.telegram.messenger.ImageReceiver r1 = r7.centerImage
            r3 = 0
            r4 = 1
            r1.setOrientation(r3, r4)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r1 = r7.containerView
            r1.requestLayout()
            goto L_0x08f3
        L_0x08f2:
            r3 = 0
        L_0x08f3:
            r7.ignoreDidSetImage = r3
            org.telegram.messenger.ImageReceiver r1 = r7.centerImage
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r7.containerView
            r1.setParentView(r3)
            return
        L_0x08fd:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.applyCurrentEditMode():void");
    }

    private void setPhotoChecked() {
        ChatActivity chatActivity;
        TLRPC.Chat chat;
        PhotoViewerProvider photoViewerProvider = this.placeProvider;
        if (photoViewerProvider == null) {
            return;
        }
        if (photoViewerProvider.getSelectedPhotos() == null || this.maxSelectedPhotos <= 0 || this.placeProvider.getSelectedPhotos().size() < this.maxSelectedPhotos || this.placeProvider.isPhotoChecked(this.currentIndex)) {
            int num = this.placeProvider.setPhotoChecked(this.currentIndex, getCurrentVideoEditedInfo());
            boolean checked = this.placeProvider.isPhotoChecked(this.currentIndex);
            this.checkImageView.setChecked(checked, true);
            if (num >= 0) {
                if (checked) {
                    this.selectedPhotosAdapter.notifyItemInserted(num);
                    this.selectedPhotosListView.smoothScrollToPosition(num);
                } else {
                    this.selectedPhotosAdapter.notifyItemRemoved(num);
                    if (num == 0) {
                        this.selectedPhotosAdapter.notifyItemChanged(0);
                    }
                }
            }
            updateSelectedCount();
        } else if (this.allowOrder && (chatActivity = this.parentChatActivity) != null && (chat = chatActivity.getCurrentChat()) != null && !ChatObject.hasAdminRights(chat) && chat.slowmode_enabled) {
            AlertsCreator.createSimpleAlert(this.parentActivity, LocaleController.getString("Slowmode", NUM), LocaleController.getString("SlowmodeSelectSendError", NUM)).show();
        }
    }

    private void createCropView() {
        if (this.photoCropView == null) {
            PhotoCropView photoCropView2 = new PhotoCropView(this.activityContext, this.resourcesProvider);
            this.photoCropView = photoCropView2;
            photoCropView2.setVisibility(8);
            this.photoCropView.onDisappear();
            this.containerView.addView(this.photoCropView, this.containerView.indexOfChild(this.videoTimelineView) - 1, LayoutHelper.createFrame(-1, -1.0f, 51, 0.0f, 0.0f, 0.0f, 48.0f));
            this.photoCropView.setDelegate(new PhotoCropView.PhotoCropViewDelegate() {
                public void onChange(boolean reset) {
                    PhotoViewer.this.resetButton.setVisibility(reset ? 8 : 0);
                }

                public void onUpdate() {
                    PhotoViewer.this.containerView.invalidate();
                }

                public void onTapUp() {
                    if (PhotoViewer.this.sendPhotoType == 1) {
                        boolean unused = PhotoViewer.this.manuallyPaused = true;
                        PhotoViewer.this.toggleVideoPlayer();
                    }
                }

                public void onVideoThumbClick() {
                    if (PhotoViewer.this.videoPlayer != null) {
                        PhotoViewer.this.videoPlayer.seekTo((long) (((float) PhotoViewer.this.videoPlayer.getDuration()) * PhotoViewer.this.avatarStartProgress));
                        PhotoViewer.this.videoPlayer.pause();
                        PhotoViewer.this.videoTimelineView.setProgress(PhotoViewer.this.avatarStartProgress);
                        PhotoViewer.this.cancelVideoPlayRunnable();
                        AndroidUtilities.runOnUIThread(PhotoViewer.this.videoPlayRunnable = new PhotoViewer$48$$ExternalSyntheticLambda0(this), 860);
                    }
                }

                /* renamed from: lambda$onVideoThumbClick$0$org-telegram-ui-PhotoViewer$48  reason: not valid java name */
                public /* synthetic */ void m3625lambda$onVideoThumbClick$0$orgtelegramuiPhotoViewer$48() {
                    boolean unused = PhotoViewer.this.manuallyPaused = false;
                    if (PhotoViewer.this.videoPlayer != null) {
                        PhotoViewer.this.videoPlayer.play();
                    }
                    Runnable unused2 = PhotoViewer.this.videoPlayRunnable = null;
                }

                public int getVideoThumbX() {
                    return (int) (((float) AndroidUtilities.dp(16.0f)) + (((float) (PhotoViewer.this.videoTimelineView.getMeasuredWidth() - AndroidUtilities.dp(32.0f))) * PhotoViewer.this.avatarStartProgress));
                }
            });
        }
    }

    private void startVideoPlayer() {
        VideoPlayer videoPlayer2;
        if (this.isCurrentVideo && (videoPlayer2 = this.videoPlayer) != null && !videoPlayer2.isPlaying()) {
            if (!this.muteVideo || this.sendPhotoType == 1) {
                this.videoPlayer.setVolume(0.0f);
            }
            this.manuallyPaused = false;
            toggleVideoPlayer();
        }
    }

    private void detectFaces() {
        if (this.centerImage.getAnimation() == null && !this.imagesArrLocals.isEmpty() && this.sendPhotoType != 1) {
            String key = this.centerImage.getImageKey();
            String str = this.currentImageFaceKey;
            if (str == null || !str.equals(key)) {
                this.currentImageHasFace = 0;
                detectFaces(key, this.centerImage.getBitmapSafe(), this.centerImage.getOrientation());
            }
        }
    }

    private void detectFaces(String key, ImageReceiver.BitmapHolder bitmap, int orientation) {
        if (key != null && bitmap != null && bitmap.bitmap != null) {
            Utilities.globalQueue.postRunnable(new PhotoViewer$$ExternalSyntheticLambda49(this, bitmap, orientation, key));
        }
    }

    /* renamed from: lambda$detectFaces$49$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3567lambda$detectFaces$49$orgtelegramuiPhotoViewer(ImageReceiver.BitmapHolder bitmap, int orientation, String key) {
        FaceDetector faceDetector = null;
        try {
            boolean hasFaces = false;
            faceDetector = new FaceDetector.Builder(ApplicationLoader.applicationContext).setMode(0).setLandmarkType(0).setTrackingEnabled(false).build();
            if (faceDetector.isOperational()) {
                SparseArray<Face> faces = faceDetector.detect(new Frame.Builder().setBitmap(bitmap.bitmap).setRotation(orientation).build());
                if (!(faces == null || faces.size() == 0)) {
                    hasFaces = true;
                }
                AndroidUtilities.runOnUIThread(new PhotoViewer$$ExternalSyntheticLambda48(this, key, hasFaces));
            } else {
                if (BuildVars.LOGS_ENABLED) {
                    FileLog.e("face detection is not operational");
                }
                AndroidUtilities.runOnUIThread(new PhotoViewer$$ExternalSyntheticLambda50(this, bitmap, key));
            }
            if (faceDetector == null) {
                return;
            }
        } catch (Exception e) {
            FileLog.e((Throwable) e);
            if (faceDetector == null) {
                return;
            }
        } catch (Throwable th) {
            if (faceDetector != null) {
                faceDetector.release();
            }
            throw th;
        }
        faceDetector.release();
    }

    /* renamed from: lambda$detectFaces$47$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3565lambda$detectFaces$47$orgtelegramuiPhotoViewer(String key, boolean hasFaces) {
        if (key.equals(this.centerImage.getImageKey())) {
            this.currentImageHasFace = hasFaces;
            this.currentImageFaceKey = key;
        }
    }

    /* renamed from: lambda$detectFaces$48$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3566lambda$detectFaces$48$orgtelegramuiPhotoViewer(ImageReceiver.BitmapHolder bitmap, String key) {
        bitmap.release();
        if (key.equals(this.centerImage.getImageKey())) {
            this.currentImageHasFace = 2;
            this.currentImageFaceKey = key;
        }
    }

    private void switchToEditMode(int mode) {
        Bitmap bitmap;
        int hasFaces;
        int i;
        float oldScale;
        float newScale;
        final int i2 = mode;
        if (this.currentEditMode == i2) {
            return;
        }
        if ((!this.isCurrentVideo || this.photoProgressViews[0].backgroundState == 3 || this.isCurrentVideo || (this.centerImage.getBitmap() != null && this.photoProgressViews[0].backgroundState == -1)) && this.changeModeAnimation == null && this.imageMoveAnimation == null && this.captionEditText.getTag() == null) {
            this.switchingToMode = i2;
            if (i2 == 0) {
                if (this.centerImage.getBitmap() != null) {
                    int bitmapWidth = this.centerImage.getBitmapWidth();
                    int bitmapHeight = this.centerImage.getBitmapHeight();
                    int i3 = this.currentEditMode;
                    if (i3 == 3) {
                        if (this.sendPhotoType != 1) {
                            if (this.cropTransform.getOrientation() == 90 || this.cropTransform.getOrientation() == 270) {
                                int temp = bitmapWidth;
                                bitmapWidth = bitmapHeight;
                                bitmapHeight = temp;
                            }
                        } else if (this.editState.cropState != null) {
                            if (this.editState.cropState.transformRotation == 90 || this.editState.cropState.transformRotation == 270) {
                                int temp2 = bitmapWidth;
                                bitmapWidth = bitmapHeight;
                                bitmapHeight = temp2;
                            }
                            bitmapWidth = (int) (((float) bitmapWidth) * this.editState.cropState.cropPw);
                            bitmapHeight = (int) (((float) bitmapHeight) * this.editState.cropState.cropPh);
                        }
                        newScale = Math.min(((float) getContainerViewWidth(0)) / ((float) bitmapWidth), ((float) getContainerViewHeight(0)) / ((float) bitmapHeight));
                        oldScale = Math.min(((float) getContainerViewWidth()) / ((float) bitmapWidth), ((float) getContainerViewHeight()) / ((float) bitmapHeight));
                    } else {
                        if (i3 != 1 && this.editState.cropState != null && (this.editState.cropState.transformRotation == 90 || this.editState.cropState.transformRotation == 270)) {
                            float scaleToFitX = ((float) getContainerViewWidth()) / ((float) bitmapHeight);
                            if (((float) bitmapWidth) * scaleToFitX > ((float) getContainerViewHeight())) {
                                scaleToFitX = ((float) getContainerViewHeight()) / ((float) bitmapWidth);
                            }
                            this.scale = 1.0f / (scaleToFitX / Math.min(((float) getContainerViewWidth()) / ((float) bitmapWidth), ((float) getContainerViewHeight()) / ((float) bitmapHeight)));
                        } else if (this.sendPhotoType == 1 && (this.cropTransform.getOrientation() == 90 || this.cropTransform.getOrientation() == 270)) {
                            float scaleToFitX2 = ((float) getContainerViewWidth()) / ((float) bitmapHeight);
                            if (((float) bitmapWidth) * scaleToFitX2 > ((float) getContainerViewHeight())) {
                                scaleToFitX2 = ((float) getContainerViewHeight()) / ((float) bitmapWidth);
                            }
                            this.scale = 1.0f / ((((this.cropTransform.getScale() / this.cropTransform.getTrueCropScale()) * scaleToFitX2) / Math.min(((float) getContainerViewWidth()) / ((float) bitmapWidth), ((float) getContainerViewHeight()) / ((float) bitmapHeight))) / this.cropTransform.getMinScale());
                        }
                        if (this.editState.cropState != null) {
                            if (this.editState.cropState.transformRotation == 90 || this.editState.cropState.transformRotation == 270) {
                                int temp3 = bitmapWidth;
                                bitmapWidth = bitmapHeight;
                                bitmapHeight = temp3;
                            }
                            bitmapWidth = (int) (((float) bitmapWidth) * this.editState.cropState.cropPw);
                            bitmapHeight = (int) (((float) bitmapHeight) * this.editState.cropState.cropPh);
                        } else if (this.sendPhotoType == 1 && (this.cropTransform.getOrientation() == 90 || this.cropTransform.getOrientation() == 270)) {
                            int temp4 = bitmapWidth;
                            bitmapWidth = bitmapHeight;
                            bitmapHeight = temp4;
                        }
                        oldScale = Math.min(((float) getContainerViewWidth()) / ((float) bitmapWidth), ((float) getContainerViewHeight()) / ((float) bitmapHeight));
                        if (this.sendPhotoType == 1) {
                            newScale = getCropFillScale(this.cropTransform.getOrientation() == 90 || this.cropTransform.getOrientation() == 270);
                        } else {
                            newScale = Math.min(((float) getContainerViewWidth(0)) / ((float) bitmapWidth), ((float) getContainerViewHeight(0)) / ((float) bitmapHeight));
                        }
                    }
                    this.animateToScale = newScale / oldScale;
                    this.animateToX = 0.0f;
                    this.translationX = (float) ((getLeftInset() / 2) - (getRightInset() / 2));
                    if (this.sendPhotoType == 1) {
                        int i4 = this.currentEditMode;
                        if (i4 == 2) {
                            this.animateToY = (float) AndroidUtilities.dp(36.0f);
                        } else if (i4 == 3) {
                            this.animateToY = (float) (-AndroidUtilities.dp(12.0f));
                        }
                    } else {
                        int i5 = this.currentEditMode;
                        if (i5 == 1) {
                            this.animateToY = (float) AndroidUtilities.dp(56.0f);
                        } else if (i5 == 2) {
                            this.animateToY = (float) AndroidUtilities.dp(93.0f);
                        } else if (i5 == 3) {
                            this.animateToY = (float) AndroidUtilities.dp(44.0f);
                        }
                        if (isStatusBarVisible()) {
                            this.animateToY -= (float) (AndroidUtilities.statusBarHeight / 2);
                        }
                    }
                    this.animationStartTime = System.currentTimeMillis();
                    this.zoomAnimation = true;
                }
                this.padImageForHorizontalInsets = false;
                this.imageMoveAnimation = new AnimatorSet();
                ArrayList<Animator> animators = new ArrayList<>(4);
                int i6 = this.currentEditMode;
                if (i6 == 1) {
                    animators.add(ObjectAnimator.ofFloat(this.editorDoneLayout, View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(48.0f)}));
                    animators.add(ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}));
                    animators.add(ObjectAnimator.ofFloat(this.photoCropView, View.ALPHA, new float[]{0.0f}));
                } else if (i6 == 2) {
                    this.photoFilterView.shutdown();
                    animators.add(ObjectAnimator.ofFloat(this.photoFilterView.getToolsView(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(186.0f)}));
                    animators.add(ObjectAnimator.ofFloat(this.photoFilterView.getCurveControl(), View.ALPHA, new float[]{0.0f}));
                    animators.add(ObjectAnimator.ofFloat(this.photoFilterView.getBlurControl(), View.ALPHA, new float[]{0.0f}));
                    animators.add(ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}));
                } else if (i6 == 3) {
                    this.paintingOverlay.showAll();
                    this.containerView.invalidate();
                    this.photoPaintView.shutdown();
                    animators.add(ObjectAnimator.ofFloat(this.photoPaintView.getToolsView(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(126.0f)}));
                    animators.add(ObjectAnimator.ofFloat(this.photoPaintView.getColorPicker(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(126.0f)}));
                    animators.add(ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}));
                }
                this.imageMoveAnimation.playTogether(animators);
                this.imageMoveAnimation.setDuration(200);
                this.imageMoveAnimation.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        if (PhotoViewer.this.currentEditMode == 1) {
                            PhotoViewer.this.photoCropView.onDisappear();
                            PhotoViewer.this.photoCropView.onHide();
                            PhotoViewer.this.editorDoneLayout.setVisibility(8);
                            PhotoViewer.this.photoCropView.setVisibility(8);
                        } else if (PhotoViewer.this.currentEditMode == 2) {
                            try {
                                PhotoViewer.this.containerView.removeView(PhotoViewer.this.photoFilterView);
                            } catch (Exception e) {
                                FileLog.e((Throwable) e);
                            }
                            PhotoFilterView unused = PhotoViewer.this.photoFilterView = null;
                        } else if (PhotoViewer.this.currentEditMode == 3) {
                            try {
                                PhotoViewer.this.containerView.removeView(PhotoViewer.this.photoPaintView);
                            } catch (Exception e2) {
                                FileLog.e((Throwable) e2);
                            }
                            PhotoPaintView unused2 = PhotoViewer.this.photoPaintView = null;
                        }
                        AnimatorSet unused3 = PhotoViewer.this.imageMoveAnimation = null;
                        int unused4 = PhotoViewer.this.currentEditMode = i2;
                        int unused5 = PhotoViewer.this.switchingToMode = -1;
                        boolean unused6 = PhotoViewer.this.applying = false;
                        if (PhotoViewer.this.sendPhotoType == 1) {
                            PhotoViewer.this.photoCropView.setVisibility(0);
                        }
                        float unused7 = PhotoViewer.this.animateToScale = 1.0f;
                        float unused8 = PhotoViewer.this.animateToX = 0.0f;
                        float unused9 = PhotoViewer.this.animateToY = 0.0f;
                        float unused10 = PhotoViewer.this.scale = 1.0f;
                        PhotoViewer photoViewer = PhotoViewer.this;
                        photoViewer.updateMinMax(photoViewer.scale);
                        PhotoViewer.this.containerView.invalidate();
                        if (PhotoViewer.this.savedState != null) {
                            PhotoViewer.this.savedState.restore();
                            SavedState unused11 = PhotoViewer.this.savedState = null;
                            ActionBarToggleParams toggleParams = new ActionBarToggleParams().enableStatusBarAnimation(false);
                            PhotoViewer.this.toggleActionBar(false, false, toggleParams);
                            PhotoViewer.this.toggleActionBar(true, true, toggleParams);
                            return;
                        }
                        AnimatorSet animatorSet = new AnimatorSet();
                        ArrayList<Animator> arrayList = new ArrayList<>();
                        arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.pickerView, View.TRANSLATION_Y, new float[]{0.0f}));
                        arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.pickerViewSendButton, View.TRANSLATION_Y, new float[]{0.0f}));
                        if (PhotoViewer.this.sendPhotoType != 1) {
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.actionBar, View.TRANSLATION_Y, new float[]{0.0f}));
                        }
                        if (PhotoViewer.this.needCaptionLayout) {
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.captionTextViewSwitcher, View.TRANSLATION_Y, new float[]{0.0f}));
                        }
                        if (PhotoViewer.this.sendPhotoType == 0 || PhotoViewer.this.sendPhotoType == 4) {
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.checkImageView, View.ALPHA, new float[]{1.0f}));
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.photosCounterView, View.ALPHA, new float[]{1.0f}));
                        } else if (PhotoViewer.this.sendPhotoType == 1) {
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.photoCropView, View.ALPHA, new float[]{1.0f}));
                        }
                        if (PhotoViewer.this.cameraItem.getTag() != null) {
                            PhotoViewer.this.cameraItem.setVisibility(0);
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.cameraItem, View.ALPHA, new float[]{1.0f}));
                        }
                        if (PhotoViewer.this.muteItem.getTag() != null) {
                            PhotoViewer.this.muteItem.setVisibility(0);
                            arrayList.add(ObjectAnimator.ofFloat(PhotoViewer.this.muteItem, View.ALPHA, new float[]{1.0f}));
                        }
                        animatorSet.playTogether(arrayList);
                        animatorSet.setDuration(200);
                        animatorSet.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationStart(Animator animation) {
                                PhotoViewer.this.pickerView.setVisibility(0);
                                PhotoViewer.this.pickerViewSendButton.setVisibility(0);
                                PhotoViewer.this.actionBar.setVisibility(0);
                                if (PhotoViewer.this.needCaptionLayout) {
                                    PhotoViewer.this.captionTextViewSwitcher.setVisibility(PhotoViewer.this.captionTextViewSwitcher.getTag() != null ? 0 : 4);
                                }
                                if (PhotoViewer.this.sendPhotoType == 0 || PhotoViewer.this.sendPhotoType == 4 || ((PhotoViewer.this.sendPhotoType == 2 || PhotoViewer.this.sendPhotoType == 5) && PhotoViewer.this.imagesArrLocals.size() > 1)) {
                                    PhotoViewer.this.checkImageView.setVisibility(0);
                                    PhotoViewer.this.photosCounterView.setVisibility(0);
                                }
                            }
                        });
                        animatorSet.start();
                    }
                });
                this.imageMoveAnimation.start();
            } else if (i2 == 1) {
                startVideoPlayer();
                createCropView();
                this.previousHasTransform = this.cropTransform.hasViewTransform();
                this.previousCropPx = this.cropTransform.getCropPx();
                this.previousCropPy = this.cropTransform.getCropPy();
                this.previousCropScale = this.cropTransform.getScale();
                this.previousCropRotation = this.cropTransform.getRotation();
                this.previousCropOrientation = this.cropTransform.getOrientation();
                this.previousCropPw = this.cropTransform.getCropPw();
                this.previousCropPh = this.cropTransform.getCropPh();
                this.previousCropMirrored = this.cropTransform.isMirrored();
                this.photoCropView.onAppear();
                this.editorDoneLayout.doneButton.setText(LocaleController.getString("Crop", NUM));
                this.editorDoneLayout.doneButton.setTextColor(getThemedColor("dialogFloatingButton"));
                this.changeModeAnimation = new AnimatorSet();
                ArrayList<Animator> arrayList = new ArrayList<>();
                FrameLayout frameLayout = this.pickerView;
                Property property = View.TRANSLATION_Y;
                float[] fArr = new float[2];
                fArr[0] = 0.0f;
                fArr[1] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                arrayList.add(ObjectAnimator.ofFloat(frameLayout, property, fArr));
                ImageView imageView = this.pickerViewSendButton;
                Property property2 = View.TRANSLATION_Y;
                float[] fArr2 = new float[2];
                fArr2[0] = 0.0f;
                fArr2[1] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                arrayList.add(ObjectAnimator.ofFloat(imageView, property2, fArr2));
                arrayList.add(ObjectAnimator.ofFloat(this.actionBar, View.TRANSLATION_Y, new float[]{0.0f, (float) (-this.actionBar.getHeight())}));
                if (this.needCaptionLayout) {
                    CaptionTextViewSwitcher captionTextViewSwitcher2 = this.captionTextViewSwitcher;
                    Property property3 = View.TRANSLATION_Y;
                    float[] fArr3 = new float[2];
                    fArr3[0] = 0.0f;
                    fArr3[1] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                    arrayList.add(ObjectAnimator.ofFloat(captionTextViewSwitcher2, property3, fArr3));
                }
                int i7 = this.sendPhotoType;
                if (i7 == 0 || i7 == 4) {
                    arrayList.add(ObjectAnimator.ofFloat(this.checkImageView, View.ALPHA, new float[]{1.0f, 0.0f}));
                    arrayList.add(ObjectAnimator.ofFloat(this.photosCounterView, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                if (this.selectedPhotosListView.getVisibility() == 0) {
                    arrayList.add(ObjectAnimator.ofFloat(this.selectedPhotosListView, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                if (this.cameraItem.getTag() != null) {
                    arrayList.add(ObjectAnimator.ofFloat(this.cameraItem, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                if (this.muteItem.getTag() != null) {
                    arrayList.add(ObjectAnimator.ofFloat(this.muteItem, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                this.changeModeAnimation.playTogether(arrayList);
                this.changeModeAnimation.setDuration(200);
                this.changeModeAnimation.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        VideoEditTextureView videoEditTextureView = null;
                        AnimatorSet unused = PhotoViewer.this.changeModeAnimation = null;
                        PhotoViewer.this.pickerView.setVisibility(8);
                        PhotoViewer.this.pickerViewSendButton.setVisibility(8);
                        PhotoViewer.this.cameraItem.setVisibility(8);
                        PhotoViewer.this.muteItem.setVisibility(8);
                        PhotoViewer.this.selectedPhotosListView.setVisibility(8);
                        PhotoViewer.this.selectedPhotosListView.setAlpha(0.0f);
                        PhotoViewer.this.selectedPhotosListView.setTranslationY((float) (-AndroidUtilities.dp(10.0f)));
                        PhotoViewer.this.photosCounterView.setRotationX(0.0f);
                        PhotoViewer.this.selectedPhotosListView.setEnabled(false);
                        boolean unused2 = PhotoViewer.this.isPhotosListViewVisible = false;
                        if (PhotoViewer.this.needCaptionLayout) {
                            PhotoViewer.this.captionTextViewSwitcher.setVisibility(4);
                        }
                        if (PhotoViewer.this.sendPhotoType == 0 || PhotoViewer.this.sendPhotoType == 4 || ((PhotoViewer.this.sendPhotoType == 2 || PhotoViewer.this.sendPhotoType == 5) && PhotoViewer.this.imagesArrLocals.size() > 1)) {
                            PhotoViewer.this.checkImageView.setVisibility(8);
                            PhotoViewer.this.photosCounterView.setVisibility(8);
                        }
                        Bitmap bitmap = PhotoViewer.this.centerImage.getBitmap();
                        if (bitmap != null || PhotoViewer.this.isCurrentVideo) {
                            PhotoCropView access$1400 = PhotoViewer.this.photoCropView;
                            int orientation = PhotoViewer.this.centerImage.getOrientation();
                            boolean z = PhotoViewer.this.sendPhotoType != 1;
                            PaintingOverlay access$8900 = PhotoViewer.this.paintingOverlay;
                            CropTransform access$22100 = PhotoViewer.this.cropTransform;
                            if (PhotoViewer.this.isCurrentVideo) {
                                videoEditTextureView = (VideoEditTextureView) PhotoViewer.this.videoTextureView;
                            }
                            access$1400.setBitmap(bitmap, orientation, z, false, access$8900, access$22100, videoEditTextureView, PhotoViewer.this.editState.cropState);
                            PhotoViewer.this.photoCropView.onDisappear();
                            int bitmapWidth = PhotoViewer.this.centerImage.getBitmapWidth();
                            int bitmapHeight = PhotoViewer.this.centerImage.getBitmapHeight();
                            if (PhotoViewer.this.editState.cropState != null) {
                                if (PhotoViewer.this.editState.cropState.transformRotation == 90 || PhotoViewer.this.editState.cropState.transformRotation == 270) {
                                    int temp = bitmapWidth;
                                    bitmapWidth = bitmapHeight;
                                    bitmapHeight = temp;
                                }
                                bitmapWidth = (int) (((float) bitmapWidth) * PhotoViewer.this.editState.cropState.cropPw);
                                bitmapHeight = (int) (((float) bitmapHeight) * PhotoViewer.this.editState.cropState.cropPh);
                            }
                            float scaleX = ((float) PhotoViewer.this.getContainerViewWidth()) / ((float) bitmapWidth);
                            float scaleY = ((float) PhotoViewer.this.getContainerViewHeight()) / ((float) bitmapHeight);
                            float newScaleX = ((float) PhotoViewer.this.getContainerViewWidth(1)) / ((float) bitmapWidth);
                            float newScaleY = ((float) PhotoViewer.this.getContainerViewHeight(1)) / ((float) bitmapHeight);
                            float scale = Math.min(scaleX, scaleY);
                            float newScale = Math.min(newScaleX, newScaleY);
                            if (PhotoViewer.this.sendPhotoType == 1) {
                                float minSide = (float) Math.min(PhotoViewer.this.getContainerViewWidth(1), PhotoViewer.this.getContainerViewHeight(1));
                                newScale = Math.max(minSide / ((float) bitmapWidth), minSide / ((float) bitmapHeight));
                            }
                            float unused3 = PhotoViewer.this.animateToScale = newScale / scale;
                            PhotoViewer photoViewer = PhotoViewer.this;
                            float unused4 = photoViewer.animateToX = (float) ((photoViewer.getLeftInset() / 2) - (PhotoViewer.this.getRightInset() / 2));
                            float unused5 = PhotoViewer.this.animateToY = (float) ((-AndroidUtilities.dp(56.0f)) + (PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight / 2 : 0));
                            long unused6 = PhotoViewer.this.animationStartTime = System.currentTimeMillis();
                            boolean unused7 = PhotoViewer.this.zoomAnimation = true;
                        }
                        AnimatorSet unused8 = PhotoViewer.this.imageMoveAnimation = new AnimatorSet();
                        PhotoViewer.this.imageMoveAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.editorDoneLayout, View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(48.0f), 0.0f}), ObjectAnimator.ofFloat(PhotoViewer.this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.photoCropView, View.ALPHA, new float[]{0.0f, 1.0f})});
                        PhotoViewer.this.imageMoveAnimation.setDuration(200);
                        PhotoViewer.this.imageMoveAnimation.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationStart(Animator animation) {
                                PhotoViewer.this.editorDoneLayout.setVisibility(0);
                                PhotoViewer.this.photoCropView.setVisibility(0);
                            }

                            public void onAnimationEnd(Animator animation) {
                                PhotoViewer.this.photoCropView.onAppeared();
                                PhotoViewer.this.photoCropView.onShow();
                                AnimatorSet unused = PhotoViewer.this.imageMoveAnimation = null;
                                int unused2 = PhotoViewer.this.currentEditMode = i2;
                                int unused3 = PhotoViewer.this.switchingToMode = -1;
                                float unused4 = PhotoViewer.this.animateToScale = 1.0f;
                                float unused5 = PhotoViewer.this.animateToX = 0.0f;
                                float unused6 = PhotoViewer.this.animateToY = 0.0f;
                                float unused7 = PhotoViewer.this.scale = 1.0f;
                                PhotoViewer.this.updateMinMax(PhotoViewer.this.scale);
                                boolean unused8 = PhotoViewer.this.padImageForHorizontalInsets = true;
                                PhotoViewer.this.containerView.invalidate();
                            }
                        });
                        PhotoViewer.this.imageMoveAnimation.start();
                    }
                });
                this.changeModeAnimation.start();
            } else if (i2 == 2) {
                startVideoPlayer();
                if (this.photoFilterView == null) {
                    MediaController.SavedFilterState state = null;
                    String originalPath = null;
                    int orientation = 0;
                    if (!this.imagesArrLocals.isEmpty()) {
                        Object object = this.imagesArrLocals.get(this.currentIndex);
                        if (object instanceof MediaController.PhotoEntry) {
                            orientation = ((MediaController.PhotoEntry) object).orientation;
                        }
                        MediaController.MediaEditState editState2 = (MediaController.MediaEditState) object;
                        state = editState2.savedFilterState;
                        originalPath = editState2.getPath();
                    }
                    if (this.videoTextureView != null) {
                        bitmap = null;
                    } else if (state == null) {
                        bitmap = this.centerImage.getBitmap();
                        orientation = this.centerImage.getOrientation();
                    } else {
                        bitmap = BitmapFactory.decodeFile(originalPath);
                    }
                    if (this.sendPhotoType == 1) {
                        hasFaces = 1;
                    } else if (this.isCurrentVideo != 0 || (i = this.currentImageHasFace) == 2) {
                        hasFaces = 2;
                    } else {
                        hasFaces = i == 1 ? 1 : 0;
                    }
                    Activity activity = this.parentActivity;
                    TextureView textureView = this.videoTextureView;
                    PhotoFilterView photoFilterView2 = new PhotoFilterView(activity, textureView != null ? (VideoEditTextureView) textureView : null, bitmap, orientation, state, this.isCurrentVideo ? null : this.paintingOverlay, hasFaces, textureView == null && ((this.editState.cropState != null && this.editState.cropState.mirrored) || this.cropTransform.isMirrored()), this.resourcesProvider);
                    this.photoFilterView = photoFilterView2;
                    this.containerView.addView(photoFilterView2, LayoutHelper.createFrame(-1, -1.0f));
                    this.photoFilterView.getDoneTextView().setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda24(this));
                    this.photoFilterView.getCancelTextView().setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda25(this));
                    this.photoFilterView.getToolsView().setTranslationY((float) AndroidUtilities.dp(186.0f));
                }
                this.changeModeAnimation = new AnimatorSet();
                ArrayList<Animator> arrayList2 = new ArrayList<>();
                FrameLayout frameLayout2 = this.pickerView;
                Property property4 = View.TRANSLATION_Y;
                float[] fArr4 = new float[2];
                fArr4[0] = 0.0f;
                fArr4[1] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                arrayList2.add(ObjectAnimator.ofFloat(frameLayout2, property4, fArr4));
                ImageView imageView2 = this.pickerViewSendButton;
                Property property5 = View.TRANSLATION_Y;
                float[] fArr5 = new float[2];
                fArr5[0] = 0.0f;
                fArr5[1] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                arrayList2.add(ObjectAnimator.ofFloat(imageView2, property5, fArr5));
                arrayList2.add(ObjectAnimator.ofFloat(this.actionBar, View.TRANSLATION_Y, new float[]{0.0f, (float) (-this.actionBar.getHeight())}));
                int i8 = this.sendPhotoType;
                if (i8 == 0 || i8 == 4) {
                    arrayList2.add(ObjectAnimator.ofFloat(this.checkImageView, View.ALPHA, new float[]{1.0f, 0.0f}));
                    arrayList2.add(ObjectAnimator.ofFloat(this.photosCounterView, View.ALPHA, new float[]{1.0f, 0.0f}));
                } else if (i8 == 1) {
                    arrayList2.add(ObjectAnimator.ofFloat(this.photoCropView, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                if (this.selectedPhotosListView.getVisibility() == 0) {
                    arrayList2.add(ObjectAnimator.ofFloat(this.selectedPhotosListView, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                if (this.cameraItem.getTag() != null) {
                    arrayList2.add(ObjectAnimator.ofFloat(this.cameraItem, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                if (this.muteItem.getTag() != null) {
                    arrayList2.add(ObjectAnimator.ofFloat(this.muteItem, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                this.changeModeAnimation.playTogether(arrayList2);
                this.changeModeAnimation.setDuration(200);
                this.changeModeAnimation.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        float oldScale;
                        AnimatorSet unused = PhotoViewer.this.changeModeAnimation = null;
                        PhotoViewer.this.pickerView.setVisibility(8);
                        PhotoViewer.this.pickerViewSendButton.setVisibility(8);
                        PhotoViewer.this.actionBar.setVisibility(8);
                        PhotoViewer.this.cameraItem.setVisibility(8);
                        PhotoViewer.this.muteItem.setVisibility(8);
                        if (PhotoViewer.this.photoCropView != null) {
                            PhotoViewer.this.photoCropView.setVisibility(4);
                        }
                        PhotoViewer.this.selectedPhotosListView.setVisibility(8);
                        PhotoViewer.this.selectedPhotosListView.setAlpha(0.0f);
                        PhotoViewer.this.selectedPhotosListView.setTranslationY((float) (-AndroidUtilities.dp(10.0f)));
                        PhotoViewer.this.photosCounterView.setRotationX(0.0f);
                        PhotoViewer.this.selectedPhotosListView.setEnabled(false);
                        boolean unused2 = PhotoViewer.this.isPhotosListViewVisible = false;
                        if (PhotoViewer.this.needCaptionLayout) {
                            PhotoViewer.this.captionTextViewSwitcher.setVisibility(4);
                        }
                        if (PhotoViewer.this.sendPhotoType == 0 || PhotoViewer.this.sendPhotoType == 4 || ((PhotoViewer.this.sendPhotoType == 2 || PhotoViewer.this.sendPhotoType == 5) && PhotoViewer.this.imagesArrLocals.size() > 1)) {
                            PhotoViewer.this.checkImageView.setVisibility(8);
                            PhotoViewer.this.photosCounterView.setVisibility(8);
                        }
                        if (PhotoViewer.this.centerImage.getBitmap() != null) {
                            int bitmapWidth = PhotoViewer.this.centerImage.getBitmapWidth();
                            int bitmapHeight = PhotoViewer.this.centerImage.getBitmapHeight();
                            float newScale = Math.min(((float) PhotoViewer.this.getContainerViewWidth(2)) / ((float) bitmapWidth), ((float) PhotoViewer.this.getContainerViewHeight(2)) / ((float) bitmapHeight));
                            if (PhotoViewer.this.sendPhotoType == 1) {
                                float unused3 = PhotoViewer.this.animateToY = (float) (-AndroidUtilities.dp(36.0f));
                                oldScale = PhotoViewer.this.getCropFillScale(false);
                            } else {
                                float unused4 = PhotoViewer.this.animateToY = (float) ((-AndroidUtilities.dp(93.0f)) + (PhotoViewer.this.isStatusBarVisible() ? AndroidUtilities.statusBarHeight / 2 : 0));
                                if (PhotoViewer.this.editState.cropState == null || !(PhotoViewer.this.editState.cropState.transformRotation == 90 || PhotoViewer.this.editState.cropState.transformRotation == 270)) {
                                    oldScale = Math.min(((float) PhotoViewer.this.getContainerViewWidth()) / ((float) bitmapWidth), ((float) PhotoViewer.this.getContainerViewHeight()) / ((float) bitmapHeight));
                                } else {
                                    oldScale = Math.min(((float) PhotoViewer.this.getContainerViewWidth()) / ((float) bitmapHeight), ((float) PhotoViewer.this.getContainerViewHeight()) / ((float) bitmapWidth));
                                }
                            }
                            float unused5 = PhotoViewer.this.animateToScale = newScale / oldScale;
                            PhotoViewer photoViewer = PhotoViewer.this;
                            float unused6 = photoViewer.animateToX = (float) ((photoViewer.getLeftInset() / 2) - (PhotoViewer.this.getRightInset() / 2));
                            long unused7 = PhotoViewer.this.animationStartTime = System.currentTimeMillis();
                            boolean unused8 = PhotoViewer.this.zoomAnimation = true;
                        }
                        AnimatorSet unused9 = PhotoViewer.this.imageMoveAnimation = new AnimatorSet();
                        PhotoViewer.this.imageMoveAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.photoFilterView.getToolsView(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(186.0f), 0.0f})});
                        PhotoViewer.this.imageMoveAnimation.setDuration(200);
                        PhotoViewer.this.imageMoveAnimation.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationStart(Animator animation) {
                            }

                            public void onAnimationEnd(Animator animation) {
                                PhotoViewer.this.photoFilterView.init();
                                AnimatorSet unused = PhotoViewer.this.imageMoveAnimation = null;
                                int unused2 = PhotoViewer.this.currentEditMode = i2;
                                int unused3 = PhotoViewer.this.switchingToMode = -1;
                                float unused4 = PhotoViewer.this.animateToScale = 1.0f;
                                float unused5 = PhotoViewer.this.animateToX = 0.0f;
                                float unused6 = PhotoViewer.this.animateToY = 0.0f;
                                float unused7 = PhotoViewer.this.scale = 1.0f;
                                PhotoViewer.this.updateMinMax(PhotoViewer.this.scale);
                                boolean unused8 = PhotoViewer.this.padImageForHorizontalInsets = true;
                                PhotoViewer.this.containerView.invalidate();
                            }
                        });
                        PhotoViewer.this.imageMoveAnimation.start();
                    }
                });
                this.changeModeAnimation.start();
            } else if (i2 == 3) {
                startVideoPlayer();
                createPaintView();
                this.changeModeAnimation = new AnimatorSet();
                ArrayList<Animator> arrayList3 = new ArrayList<>();
                FrameLayout frameLayout3 = this.pickerView;
                Property property6 = View.TRANSLATION_Y;
                float[] fArr6 = new float[1];
                fArr6[0] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                arrayList3.add(ObjectAnimator.ofFloat(frameLayout3, property6, fArr6));
                ImageView imageView3 = this.pickerViewSendButton;
                Property property7 = View.TRANSLATION_Y;
                float[] fArr7 = new float[1];
                fArr7[0] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                arrayList3.add(ObjectAnimator.ofFloat(imageView3, property7, fArr7));
                arrayList3.add(ObjectAnimator.ofFloat(this.actionBar, View.TRANSLATION_Y, new float[]{(float) (-this.actionBar.getHeight())}));
                if (this.needCaptionLayout) {
                    CaptionTextViewSwitcher captionTextViewSwitcher3 = this.captionTextViewSwitcher;
                    Property property8 = View.TRANSLATION_Y;
                    float[] fArr8 = new float[1];
                    fArr8[0] = (float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f);
                    arrayList3.add(ObjectAnimator.ofFloat(captionTextViewSwitcher3, property8, fArr8));
                }
                int i9 = this.sendPhotoType;
                if (i9 == 0 || i9 == 4) {
                    arrayList3.add(ObjectAnimator.ofFloat(this.checkImageView, View.ALPHA, new float[]{1.0f, 0.0f}));
                    arrayList3.add(ObjectAnimator.ofFloat(this.photosCounterView, View.ALPHA, new float[]{1.0f, 0.0f}));
                } else if (i9 == 1) {
                    arrayList3.add(ObjectAnimator.ofFloat(this.photoCropView, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                if (this.selectedPhotosListView.getVisibility() == 0) {
                    arrayList3.add(ObjectAnimator.ofFloat(this.selectedPhotosListView, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                if (this.cameraItem.getTag() != null) {
                    arrayList3.add(ObjectAnimator.ofFloat(this.cameraItem, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                if (this.muteItem.getTag() != null) {
                    arrayList3.add(ObjectAnimator.ofFloat(this.muteItem, View.ALPHA, new float[]{1.0f, 0.0f}));
                }
                this.changeModeAnimation.playTogether(arrayList3);
                this.changeModeAnimation.setDuration(200);
                this.changeModeAnimation.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        PhotoViewer.this.switchToPaintMode();
                    }
                });
                this.changeModeAnimation.start();
            }
        }
    }

    /* renamed from: lambda$switchToEditMode$50$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3610lambda$switchToEditMode$50$orgtelegramuiPhotoViewer(View v) {
        applyCurrentEditMode();
        switchToEditMode(0);
    }

    /* renamed from: lambda$switchToEditMode$52$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3612lambda$switchToEditMode$52$orgtelegramuiPhotoViewer(View v) {
        if (!this.photoFilterView.hasChanges()) {
            switchToEditMode(0);
        } else if (this.parentActivity != null) {
            AlertDialog.Builder builder = new AlertDialog.Builder(this.parentActivity, this.resourcesProvider);
            builder.setMessage(LocaleController.getString("DiscardChanges", NUM));
            builder.setTitle(LocaleController.getString("AppName", NUM));
            builder.setPositiveButton(LocaleController.getString("OK", NUM), new PhotoViewer$$ExternalSyntheticLambda55(this));
            builder.setNegativeButton(LocaleController.getString("Cancel", NUM), (DialogInterface.OnClickListener) null);
            showAlertDialog(builder);
        }
    }

    /* renamed from: lambda$switchToEditMode$51$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3611lambda$switchToEditMode$51$orgtelegramuiPhotoViewer(DialogInterface dialogInterface, int i) {
        switchToEditMode(0);
    }

    private void createPaintView() {
        int h;
        int w;
        MediaController.CropState state;
        if (this.photoPaintView == null) {
            TextureView textureView = this.videoTextureView;
            if (textureView != null) {
                VideoEditTextureView textureView2 = (VideoEditTextureView) textureView;
                w = textureView2.getVideoWidth();
                h = textureView2.getVideoHeight();
                while (true) {
                    if (w <= 1280 && h <= 1280) {
                        break;
                    }
                    w /= 2;
                    h /= 2;
                }
            } else {
                w = this.centerImage.getBitmapWidth();
                h = this.centerImage.getBitmapHeight();
            }
            Bitmap bitmap = this.paintingOverlay.getBitmap();
            if (bitmap == null) {
                bitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
            }
            if (this.sendPhotoType == 1) {
                MediaController.CropState state2 = new MediaController.CropState();
                state2.transformRotation = this.cropTransform.getOrientation();
                state = state2;
            } else {
                state = this.editState.cropState;
            }
            AnonymousClass53 r3 = new PhotoPaintView(this.parentActivity, bitmap, this.isCurrentVideo ? null : this.centerImage.getBitmap(), this.centerImage.getOrientation(), this.editState.mediaEntities, state, new PhotoViewer$$ExternalSyntheticLambda37(this), this.resourcesProvider) {
                /* access modifiers changed from: protected */
                public void onOpenCloseStickersAlert(boolean open) {
                    if (PhotoViewer.this.videoPlayer != null) {
                        boolean unused = PhotoViewer.this.manuallyPaused = false;
                        PhotoViewer.this.cancelVideoPlayRunnable();
                        if (open) {
                            PhotoViewer.this.videoPlayer.pause();
                        } else {
                            PhotoViewer.this.videoPlayer.play();
                        }
                    }
                }

                /* access modifiers changed from: protected */
                public void didSetAnimatedSticker(RLottieDrawable drawable) {
                    if (PhotoViewer.this.videoPlayer != null) {
                        long currentPosition = PhotoViewer.this.videoPlayer.getCurrentPosition();
                        long j = 0;
                        if (PhotoViewer.this.startTime > 0) {
                            j = PhotoViewer.this.startTime / 1000;
                        }
                        drawable.setProgressMs(currentPosition - j);
                    }
                }

                /* access modifiers changed from: protected */
                public void onTextAdd() {
                    if (!PhotoViewer.this.windowView.isFocusable()) {
                        PhotoViewer.this.makeFocusable();
                    }
                }
            };
            this.photoPaintView = r3;
            this.containerView.addView(r3, LayoutHelper.createFrame(-1, -1.0f));
            this.photoPaintView.getDoneTextView().setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda1(this));
            this.photoPaintView.getCancelTextView().setOnClickListener(new PhotoViewer$$ExternalSyntheticLambda2(this));
            this.photoPaintView.getColorPicker().setTranslationY((float) AndroidUtilities.dp(126.0f));
            this.photoPaintView.getToolsView().setTranslationY((float) AndroidUtilities.dp(126.0f));
        }
    }

    /* renamed from: lambda$createPaintView$53$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3560lambda$createPaintView$53$orgtelegramuiPhotoViewer() {
        this.paintingOverlay.hideBitmap();
    }

    /* renamed from: lambda$createPaintView$54$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3561lambda$createPaintView$54$orgtelegramuiPhotoViewer(View v) {
        this.savedState = null;
        applyCurrentEditMode();
        switchToEditMode(0);
    }

    /* renamed from: lambda$createPaintView$55$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3562lambda$createPaintView$55$orgtelegramuiPhotoViewer(View v) {
        closePaintMode();
    }

    private void closePaintMode() {
        this.photoPaintView.maybeShowDismissalAlert(this, this.parentActivity, new PhotoViewer$$ExternalSyntheticLambda36(this));
    }

    /* renamed from: lambda$closePaintMode$56$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3556lambda$closePaintMode$56$orgtelegramuiPhotoViewer() {
        switchToEditMode(0);
    }

    /* access modifiers changed from: private */
    public void switchToPaintMode() {
        this.changeModeAnimation = null;
        this.pickerView.setVisibility(8);
        this.pickerViewSendButton.setVisibility(8);
        this.cameraItem.setVisibility(8);
        this.muteItem.setVisibility(8);
        PhotoCropView photoCropView2 = this.photoCropView;
        if (photoCropView2 != null) {
            photoCropView2.setVisibility(4);
        }
        this.selectedPhotosListView.setVisibility(8);
        this.selectedPhotosListView.setAlpha(0.0f);
        this.selectedPhotosListView.setTranslationY((float) (-AndroidUtilities.dp(10.0f)));
        this.photosCounterView.setRotationX(0.0f);
        this.selectedPhotosListView.setEnabled(false);
        this.isPhotosListViewVisible = false;
        if (this.needCaptionLayout) {
            this.captionTextViewSwitcher.setVisibility(4);
        }
        int i = this.sendPhotoType;
        if (i == 0 || i == 4 || ((i == 2 || i == 5) && this.imagesArrLocals.size() > 1)) {
            this.checkImageView.setVisibility(8);
            this.photosCounterView.setVisibility(8);
        }
        if (this.centerImage.getBitmap() != null) {
            int bitmapWidth = this.centerImage.getBitmapWidth();
            int bitmapHeight = this.centerImage.getBitmapHeight();
            if (this.sendPhotoType == 1) {
                this.animateToY = (float) AndroidUtilities.dp(12.0f);
                if (this.cropTransform.getOrientation() == 90 || this.cropTransform.getOrientation() == 270) {
                    int temp = bitmapWidth;
                    bitmapWidth = bitmapHeight;
                    bitmapHeight = temp;
                }
            } else {
                this.animateToY = (float) ((-AndroidUtilities.dp(44.0f)) + (isStatusBarVisible() ? AndroidUtilities.statusBarHeight / 2 : 0));
                if (this.editState.cropState != null) {
                    if (this.editState.cropState.transformRotation == 90 || this.editState.cropState.transformRotation == 270) {
                        int temp2 = bitmapWidth;
                        bitmapWidth = bitmapHeight;
                        bitmapHeight = temp2;
                    }
                    bitmapWidth = (int) (((float) bitmapWidth) * this.editState.cropState.cropPw);
                    bitmapHeight = (int) (((float) bitmapHeight) * this.editState.cropState.cropPh);
                }
            }
            this.animateToScale = Math.min(((float) getContainerViewWidth(3)) / ((float) bitmapWidth), ((float) getContainerViewHeight(3)) / ((float) bitmapHeight)) / Math.min(((float) getContainerViewWidth()) / ((float) bitmapWidth), ((float) getContainerViewHeight()) / ((float) bitmapHeight));
            this.animateToX = (float) ((getLeftInset() / 2) - (getRightInset() / 2));
            this.animationStartTime = System.currentTimeMillis();
            this.zoomAnimation = true;
        }
        AnimatorSet animatorSet = new AnimatorSet();
        this.imageMoveAnimation = animatorSet;
        animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f}), ObjectAnimator.ofFloat(this.photoPaintView.getColorPicker(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(126.0f), 0.0f}), ObjectAnimator.ofFloat(this.photoPaintView.getToolsView(), View.TRANSLATION_Y, new float[]{(float) AndroidUtilities.dp(126.0f), 0.0f})});
        this.imageMoveAnimation.setDuration(200);
        this.imageMoveAnimation.addListener(new AnimatorListenerAdapter() {
            public void onAnimationStart(Animator animation) {
            }

            public void onAnimationEnd(Animator animation) {
                PhotoViewer.this.photoPaintView.init();
                PhotoViewer.this.paintingOverlay.hideEntities();
                AnimatorSet unused = PhotoViewer.this.imageMoveAnimation = null;
                int unused2 = PhotoViewer.this.currentEditMode = 3;
                int unused3 = PhotoViewer.this.switchingToMode = -1;
                float unused4 = PhotoViewer.this.animateToScale = 1.0f;
                float unused5 = PhotoViewer.this.animateToX = 0.0f;
                float unused6 = PhotoViewer.this.animateToY = 0.0f;
                float unused7 = PhotoViewer.this.scale = 1.0f;
                PhotoViewer photoViewer = PhotoViewer.this;
                photoViewer.updateMinMax(photoViewer.scale);
                boolean unused8 = PhotoViewer.this.padImageForHorizontalInsets = true;
                PhotoViewer.this.containerView.invalidate();
            }
        });
        this.imageMoveAnimation.start();
    }

    private void toggleCheckImageView(boolean show) {
        AnimatorSet animatorSet = new AnimatorSet();
        ArrayList<Animator> arrayList = new ArrayList<>();
        float offsetY = AndroidUtilities.dpf2(24.0f);
        FrameLayout frameLayout = this.pickerView;
        Property property = View.ALPHA;
        float[] fArr = new float[1];
        float f = 1.0f;
        float f2 = 0.0f;
        fArr[0] = show ? 1.0f : 0.0f;
        arrayList.add(ObjectAnimator.ofFloat(frameLayout, property, fArr));
        FrameLayout frameLayout2 = this.pickerView;
        Property property2 = View.TRANSLATION_Y;
        float[] fArr2 = new float[1];
        fArr2[0] = show ? 0.0f : offsetY;
        arrayList.add(ObjectAnimator.ofFloat(frameLayout2, property2, fArr2));
        ImageView imageView = this.pickerViewSendButton;
        Property property3 = View.ALPHA;
        float[] fArr3 = new float[1];
        fArr3[0] = show ? 1.0f : 0.0f;
        arrayList.add(ObjectAnimator.ofFloat(imageView, property3, fArr3));
        ImageView imageView2 = this.pickerViewSendButton;
        Property property4 = View.TRANSLATION_Y;
        float[] fArr4 = new float[1];
        fArr4[0] = show ? 0.0f : offsetY;
        arrayList.add(ObjectAnimator.ofFloat(imageView2, property4, fArr4));
        int i = this.sendPhotoType;
        if (i == 0 || i == 4) {
            CheckBox checkBox = this.checkImageView;
            Property property5 = View.ALPHA;
            float[] fArr5 = new float[1];
            fArr5[0] = show ? 1.0f : 0.0f;
            arrayList.add(ObjectAnimator.ofFloat(checkBox, property5, fArr5));
            CheckBox checkBox2 = this.checkImageView;
            Property property6 = View.TRANSLATION_Y;
            float[] fArr6 = new float[1];
            fArr6[0] = show ? 0.0f : -offsetY;
            arrayList.add(ObjectAnimator.ofFloat(checkBox2, property6, fArr6));
            CounterView counterView = this.photosCounterView;
            Property property7 = View.ALPHA;
            float[] fArr7 = new float[1];
            if (!show) {
                f = 0.0f;
            }
            fArr7[0] = f;
            arrayList.add(ObjectAnimator.ofFloat(counterView, property7, fArr7));
            CounterView counterView2 = this.photosCounterView;
            Property property8 = View.TRANSLATION_Y;
            float[] fArr8 = new float[1];
            if (!show) {
                f2 = -offsetY;
            }
            fArr8[0] = f2;
            arrayList.add(ObjectAnimator.ofFloat(counterView2, property8, fArr8));
        }
        animatorSet.playTogether(arrayList);
        animatorSet.setDuration(200);
        animatorSet.start();
    }

    private void toggleMiniProgressInternal(final boolean show) {
        if (show) {
            this.miniProgressView.setVisibility(0);
        }
        AnimatorSet animatorSet = new AnimatorSet();
        this.miniProgressAnimator = animatorSet;
        Animator[] animatorArr = new Animator[1];
        RadialProgressView radialProgressView = this.miniProgressView;
        Property property = View.ALPHA;
        float[] fArr = new float[1];
        fArr[0] = show ? 1.0f : 0.0f;
        animatorArr[0] = ObjectAnimator.ofFloat(radialProgressView, property, fArr);
        animatorSet.playTogether(animatorArr);
        this.miniProgressAnimator.setDuration(200);
        this.miniProgressAnimator.addListener(new AnimatorListenerAdapter() {
            public void onAnimationEnd(Animator animation) {
                if (animation.equals(PhotoViewer.this.miniProgressAnimator)) {
                    if (!show) {
                        PhotoViewer.this.miniProgressView.setVisibility(4);
                    }
                    AnimatorSet unused = PhotoViewer.this.miniProgressAnimator = null;
                }
            }

            public void onAnimationCancel(Animator animation) {
                if (animation.equals(PhotoViewer.this.miniProgressAnimator)) {
                    AnimatorSet unused = PhotoViewer.this.miniProgressAnimator = null;
                }
            }
        });
        this.miniProgressAnimator.start();
    }

    private void toggleMiniProgress(boolean show, boolean animated) {
        AndroidUtilities.cancelRunOnUIThread(this.miniProgressShowRunnable);
        int i = 0;
        if (animated) {
            toggleMiniProgressInternal(show);
            if (show) {
                AnimatorSet animatorSet = this.miniProgressAnimator;
                if (animatorSet != null) {
                    animatorSet.cancel();
                    this.miniProgressAnimator = null;
                }
                if (this.firstAnimationDelay) {
                    this.firstAnimationDelay = false;
                    toggleMiniProgressInternal(true);
                    return;
                }
                AndroidUtilities.runOnUIThread(this.miniProgressShowRunnable, 500);
                return;
            }
            AnimatorSet animatorSet2 = this.miniProgressAnimator;
            if (animatorSet2 != null) {
                animatorSet2.cancel();
                toggleMiniProgressInternal(false);
                return;
            }
            return;
        }
        AnimatorSet animatorSet3 = this.miniProgressAnimator;
        if (animatorSet3 != null) {
            animatorSet3.cancel();
            this.miniProgressAnimator = null;
        }
        this.miniProgressView.setAlpha(show ? 1.0f : 0.0f);
        RadialProgressView radialProgressView = this.miniProgressView;
        if (!show) {
            i = 4;
        }
        radialProgressView.setVisibility(i);
    }

    private void updateContainerFlags(boolean actionBarVisible) {
        FrameLayoutDrawer frameLayoutDrawer;
        if (Build.VERSION.SDK_INT >= 21 && this.sendPhotoType != 1 && (frameLayoutDrawer = this.containerView) != null) {
            int flags = 1792;
            if (!actionBarVisible) {
                flags = 1792 | 4;
                if (frameLayoutDrawer.getPaddingLeft() > 0 || this.containerView.getPaddingRight() > 0) {
                    flags |= 4098;
                }
            }
            this.containerView.setSystemUiVisibility(flags);
        }
    }

    private static class ActionBarToggleParams {
        public static final ActionBarToggleParams DEFAULT = new ActionBarToggleParams();
        public int animationDuration = 200;
        public Interpolator animationInterpolator;
        public boolean enableStatusBarAnimation = true;
        public boolean enableTranslationAnimation = true;

        public ActionBarToggleParams enableStatusBarAnimation(boolean val) {
            this.enableStatusBarAnimation = val;
            return this;
        }

        public ActionBarToggleParams enableTranslationAnimation(boolean val) {
            this.enableTranslationAnimation = val;
            return this;
        }

        public ActionBarToggleParams animationDuration(int val) {
            this.animationDuration = val;
            return this;
        }

        public ActionBarToggleParams animationInterpolator(Interpolator val) {
            this.animationInterpolator = val;
            return this;
        }
    }

    /* access modifiers changed from: private */
    public void toggleActionBar(boolean show, boolean animated) {
        toggleActionBar(show, animated, ActionBarToggleParams.DEFAULT);
    }

    /* access modifiers changed from: private */
    public void toggleActionBar(final boolean show, boolean animated, ActionBarToggleParams params) {
        CaptionScrollView captionScrollView2;
        CaptionScrollView captionScrollView3;
        AnimatorSet animatorSet = this.actionBarAnimator;
        if (animatorSet != null) {
            animatorSet.cancel();
        }
        if (show) {
            this.actionBar.setVisibility(0);
            if (this.bottomLayout.getTag() != null) {
                this.bottomLayout.setVisibility(0);
            }
            if (this.captionTextViewSwitcher.getTag() != null) {
                this.captionTextViewSwitcher.setVisibility(0);
                VideoSeekPreviewImage videoSeekPreviewImage = this.videoPreviewFrame;
                if (videoSeekPreviewImage != null) {
                    videoSeekPreviewImage.requestLayout();
                }
            }
        }
        this.isActionBarVisible = show;
        if (params.enableStatusBarAnimation) {
            updateContainerFlags(show);
        }
        if (!this.videoPlayerControlVisible || !this.isPlaying || !show) {
            AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
        } else {
            scheduleActionBarHide();
        }
        if (!show) {
            Bulletin.hide((FrameLayout) this.containerView);
        }
        float offsetY = AndroidUtilities.dpf2(24.0f);
        this.videoPlayerControlFrameLayout.setSeekBarTransitionEnabled(params.enableTranslationAnimation && this.playerLooping);
        this.videoPlayerControlFrameLayout.setTranslationYAnimationEnabled(params.enableTranslationAnimation);
        float f = 1.0f;
        if (animated) {
            ArrayList<Animator> arrayList = new ArrayList<>();
            ActionBar actionBar2 = this.actionBar;
            Property property = View.ALPHA;
            float[] fArr = new float[1];
            fArr[0] = show ? 1.0f : 0.0f;
            arrayList.add(ObjectAnimator.ofFloat(actionBar2, property, fArr));
            if (params.enableTranslationAnimation) {
                ActionBar actionBar3 = this.actionBar;
                Property property2 = View.TRANSLATION_Y;
                float[] fArr2 = new float[1];
                fArr2[0] = show ? 0.0f : -offsetY;
                arrayList.add(ObjectAnimator.ofFloat(actionBar3, property2, fArr2));
            } else {
                this.actionBar.setTranslationY(0.0f);
            }
            if (this.allowShowFullscreenButton) {
                ImageView imageView = this.fullscreenButton[0];
                Property property3 = View.ALPHA;
                float[] fArr3 = new float[1];
                fArr3[0] = show ? 1.0f : 0.0f;
                arrayList.add(ObjectAnimator.ofFloat(imageView, property3, fArr3));
            }
            for (int a = 1; a < 3; a++) {
                this.fullscreenButton[a].setTranslationY(show ? 0.0f : offsetY);
            }
            if (params.enableTranslationAnimation) {
                ImageView imageView2 = this.fullscreenButton[0];
                Property property4 = View.TRANSLATION_Y;
                float[] fArr4 = new float[1];
                fArr4[0] = show ? 0.0f : offsetY;
                arrayList.add(ObjectAnimator.ofFloat(imageView2, property4, fArr4));
            } else {
                this.fullscreenButton[0].setTranslationY(0.0f);
            }
            FrameLayout frameLayout = this.bottomLayout;
            if (frameLayout != null) {
                Property property5 = View.ALPHA;
                float[] fArr5 = new float[1];
                fArr5[0] = show ? 1.0f : 0.0f;
                arrayList.add(ObjectAnimator.ofFloat(frameLayout, property5, fArr5));
                if (params.enableTranslationAnimation) {
                    FrameLayout frameLayout2 = this.bottomLayout;
                    Property property6 = View.TRANSLATION_Y;
                    float[] fArr6 = new float[1];
                    fArr6[0] = show ? 0.0f : offsetY;
                    arrayList.add(ObjectAnimator.ofFloat(frameLayout2, property6, fArr6));
                } else {
                    this.bottomLayout.setTranslationY(0.0f);
                }
            }
            if (this.videoPlayerControlVisible) {
                VideoPlayerControlFrameLayout videoPlayerControlFrameLayout2 = this.videoPlayerControlFrameLayout;
                Property<VideoPlayerControlFrameLayout, Float> property7 = VPC_PROGRESS;
                float[] fArr7 = new float[1];
                fArr7[0] = show ? 1.0f : 0.0f;
                arrayList.add(ObjectAnimator.ofFloat(videoPlayerControlFrameLayout2, property7, fArr7));
            } else {
                this.videoPlayerControlFrameLayout.setProgress(show ? 1.0f : 0.0f);
            }
            GroupedPhotosListView groupedPhotosListView2 = this.groupedPhotosListView;
            Property property8 = View.ALPHA;
            float[] fArr8 = new float[1];
            fArr8[0] = show ? 1.0f : 0.0f;
            arrayList.add(ObjectAnimator.ofFloat(groupedPhotosListView2, property8, fArr8));
            if (params.enableTranslationAnimation) {
                GroupedPhotosListView groupedPhotosListView3 = this.groupedPhotosListView;
                Property property9 = View.TRANSLATION_Y;
                float[] fArr9 = new float[1];
                fArr9[0] = show ? 0.0f : offsetY;
                arrayList.add(ObjectAnimator.ofFloat(groupedPhotosListView3, property9, fArr9));
            } else {
                this.groupedPhotosListView.setTranslationY(0.0f);
            }
            if (!this.needCaptionLayout && (captionScrollView3 = this.captionScrollView) != null) {
                Property property10 = View.ALPHA;
                float[] fArr10 = new float[1];
                fArr10[0] = show ? 1.0f : 0.0f;
                arrayList.add(ObjectAnimator.ofFloat(captionScrollView3, property10, fArr10));
                if (params.enableTranslationAnimation) {
                    CaptionScrollView captionScrollView4 = this.captionScrollView;
                    Property property11 = View.TRANSLATION_Y;
                    float[] fArr11 = new float[1];
                    fArr11[0] = show ? 0.0f : offsetY;
                    arrayList.add(ObjectAnimator.ofFloat(captionScrollView4, property11, fArr11));
                } else {
                    this.captionScrollView.setTranslationY(0.0f);
                }
            }
            if (this.videoPlayerControlVisible && this.isPlaying) {
                float[] fArr12 = new float[2];
                fArr12[0] = this.photoProgressViews[0].animAlphas[1];
                fArr12[1] = show ? 1.0f : 0.0f;
                ValueAnimator anim = ValueAnimator.ofFloat(fArr12);
                anim.addUpdateListener(new PhotoViewer$$ExternalSyntheticLambda11(this));
                arrayList.add(anim);
            }
            if (this.muteItem.getTag() != null) {
                ImageView imageView3 = this.muteItem;
                Property property12 = View.ALPHA;
                float[] fArr13 = new float[1];
                if (!show) {
                    f = 0.0f;
                }
                fArr13[0] = f;
                arrayList.add(ObjectAnimator.ofFloat(imageView3, property12, fArr13));
            }
            AnimatorSet animatorSet2 = new AnimatorSet();
            this.actionBarAnimator = animatorSet2;
            animatorSet2.playTogether(arrayList);
            this.actionBarAnimator.setDuration((long) params.animationDuration);
            this.actionBarAnimator.setInterpolator(params.animationInterpolator);
            this.actionBarAnimator.addListener(new AnimatorListenerAdapter() {
                public void onAnimationEnd(Animator animation) {
                    if (animation.equals(PhotoViewer.this.actionBarAnimator)) {
                        if (!show) {
                            PhotoViewer.this.actionBar.setVisibility(4);
                            if (PhotoViewer.this.bottomLayout.getTag() != null) {
                                PhotoViewer.this.bottomLayout.setVisibility(4);
                            }
                            if (PhotoViewer.this.captionTextViewSwitcher.getTag() != null) {
                                PhotoViewer.this.captionTextViewSwitcher.setVisibility(4);
                            }
                        }
                        AnimatorSet unused = PhotoViewer.this.actionBarAnimator = null;
                    }
                }

                public void onAnimationCancel(Animator animation) {
                    if (animation.equals(PhotoViewer.this.actionBarAnimator)) {
                        AnimatorSet unused = PhotoViewer.this.actionBarAnimator = null;
                    }
                }
            });
            this.actionBarAnimator.start();
            return;
        }
        this.actionBar.setAlpha(show ? 1.0f : 0.0f);
        if (this.fullscreenButton[0].getTranslationX() != 0.0f && this.allowShowFullscreenButton) {
            this.fullscreenButton[0].setAlpha(show ? 1.0f : 0.0f);
        }
        for (int a2 = 0; a2 < 3; a2++) {
            this.fullscreenButton[a2].setTranslationY(show ? 0.0f : offsetY);
        }
        this.actionBar.setTranslationY(show ? 0.0f : -offsetY);
        this.bottomLayout.setAlpha(show ? 1.0f : 0.0f);
        this.bottomLayout.setTranslationY(show ? 0.0f : offsetY);
        this.groupedPhotosListView.setAlpha(show ? 1.0f : 0.0f);
        this.groupedPhotosListView.setTranslationY(show ? 0.0f : offsetY);
        if (!this.needCaptionLayout && (captionScrollView2 = this.captionScrollView) != null) {
            captionScrollView2.setAlpha(show ? 1.0f : 0.0f);
            this.captionScrollView.setTranslationY(show ? 0.0f : offsetY);
        }
        this.videoPlayerControlFrameLayout.setProgress(show ? 1.0f : 0.0f);
        if (this.muteItem.getTag() != null) {
            this.muteItem.setAlpha(show ? 1.0f : 0.0f);
        }
        if (this.videoPlayerControlVisible && this.isPlaying) {
            PhotoProgressView photoProgressView = this.photoProgressViews[0];
            if (!show) {
                f = 0.0f;
            }
            photoProgressView.setIndexedAlpha(1, f, false);
        }
    }

    /* renamed from: lambda$toggleActionBar$57$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3614lambda$toggleActionBar$57$orgtelegramuiPhotoViewer(ValueAnimator a) {
        this.photoProgressViews[0].setIndexedAlpha(1, ((Float) a.getAnimatedValue()).floatValue(), false);
    }

    private void togglePhotosListView(boolean show, boolean animated) {
        if (show != this.isPhotosListViewVisible) {
            if (show) {
                this.selectedPhotosListView.setVisibility(0);
            }
            this.isPhotosListViewVisible = show;
            this.selectedPhotosListView.setEnabled(show);
            float f = 1.0f;
            if (animated) {
                ArrayList<Animator> arrayList = new ArrayList<>();
                SelectedPhotosListView selectedPhotosListView2 = this.selectedPhotosListView;
                Property property = View.ALPHA;
                float[] fArr = new float[1];
                fArr[0] = show ? 1.0f : 0.0f;
                arrayList.add(ObjectAnimator.ofFloat(selectedPhotosListView2, property, fArr));
                SelectedPhotosListView selectedPhotosListView3 = this.selectedPhotosListView;
                Property property2 = View.TRANSLATION_Y;
                float[] fArr2 = new float[1];
                fArr2[0] = show ? 0.0f : (float) (-AndroidUtilities.dp(10.0f));
                arrayList.add(ObjectAnimator.ofFloat(selectedPhotosListView3, property2, fArr2));
                CounterView counterView = this.photosCounterView;
                Property property3 = View.ROTATION_X;
                float[] fArr3 = new float[1];
                if (!show) {
                    f = 0.0f;
                }
                fArr3[0] = f;
                arrayList.add(ObjectAnimator.ofFloat(counterView, property3, fArr3));
                AnimatorSet animatorSet = new AnimatorSet();
                this.currentListViewAnimation = animatorSet;
                animatorSet.playTogether(arrayList);
                if (!show) {
                    this.currentListViewAnimation.addListener(new AnimatorListenerAdapter() {
                        public void onAnimationEnd(Animator animation) {
                            if (PhotoViewer.this.currentListViewAnimation != null && PhotoViewer.this.currentListViewAnimation.equals(animation)) {
                                PhotoViewer.this.selectedPhotosListView.setVisibility(8);
                                AnimatorSet unused = PhotoViewer.this.currentListViewAnimation = null;
                            }
                        }
                    });
                }
                this.currentListViewAnimation.setDuration(200);
                this.currentListViewAnimation.start();
                return;
            }
            this.selectedPhotosListView.setAlpha(show ? 1.0f : 0.0f);
            this.selectedPhotosListView.setTranslationY(show ? 0.0f : (float) (-AndroidUtilities.dp(10.0f)));
            CounterView counterView2 = this.photosCounterView;
            if (!show) {
                f = 0.0f;
            }
            counterView2.setRotationX(f);
            if (!show) {
                this.selectedPhotosListView.setVisibility(8);
            }
        }
    }

    /* access modifiers changed from: private */
    public void toggleVideoPlayer() {
        if (this.videoPlayer != null) {
            cancelVideoPlayRunnable();
            AndroidUtilities.cancelRunOnUIThread(this.hideActionBarRunnable);
            if (this.isPlaying) {
                this.videoPlayer.pause();
            } else {
                if (!this.isCurrentVideo) {
                    if (Math.abs(this.videoPlayerSeekbar.getProgress() - this.videoTimelineView.getRightProgress()) < 0.01f || this.videoPlayer.getCurrentPosition() == this.videoPlayer.getDuration()) {
                        this.videoPlayer.seekTo(0);
                    }
                    scheduleActionBarHide();
                } else if (Math.abs(this.videoTimelineView.getProgress() - this.videoTimelineView.getRightProgress()) < 0.01f || this.videoPlayer.getCurrentPosition() == this.videoPlayer.getDuration()) {
                    this.videoPlayer.seekTo((long) ((int) (this.videoTimelineView.getLeftProgress() * ((float) this.videoPlayer.getDuration()))));
                }
                this.videoPlayer.play();
            }
            this.containerView.invalidate();
        }
    }

    private String getFileName(int index) {
        if (index < 0) {
            return null;
        }
        if (!this.secureDocuments.isEmpty()) {
            if (index >= this.secureDocuments.size()) {
                return null;
            }
            SecureDocument location = this.secureDocuments.get(index);
            return location.secureFile.dc_id + "_" + location.secureFile.id + ".jpg";
        } else if (this.imagesArrLocations.isEmpty() && this.imagesArr.isEmpty()) {
            if (this.imagesArrLocals.isEmpty()) {
                PageBlocksAdapter pageBlocksAdapter2 = this.pageBlocksAdapter;
                if (pageBlocksAdapter2 != null) {
                    return pageBlocksAdapter2.getFileName(index);
                }
            } else if (index >= this.imagesArrLocals.size()) {
                return null;
            } else {
                Object object = this.imagesArrLocals.get(index);
                if (object instanceof MediaController.SearchImage) {
                    return ((MediaController.SearchImage) object).getAttachName();
                }
                if (object instanceof TLRPC.BotInlineResult) {
                    TLRPC.BotInlineResult botInlineResult = (TLRPC.BotInlineResult) object;
                    if (botInlineResult.document != null) {
                        return FileLoader.getAttachFileName(botInlineResult.document);
                    }
                    if (botInlineResult.photo != null) {
                        return FileLoader.getAttachFileName(FileLoader.getClosestPhotoSizeWithSize(botInlineResult.photo.sizes, AndroidUtilities.getPhotoSize()));
                    }
                    if (botInlineResult.content instanceof TLRPC.TL_webDocument) {
                        return Utilities.MD5(botInlineResult.content.url) + "." + ImageLoader.getHttpUrlExtension(botInlineResult.content.url, FileLoader.getMimeTypePart(botInlineResult.content.mime_type));
                    }
                }
            }
            return null;
        } else if (!this.imagesArrLocations.isEmpty()) {
            if (index >= this.imagesArrLocations.size()) {
                return null;
            }
            ImageLocation location2 = this.imagesArrLocations.get(index);
            ImageLocation videoLocation = this.imagesArrLocationsVideo.get(index);
            if (location2 == null) {
                return null;
            }
            if (videoLocation != location2) {
                return videoLocation.location.volume_id + "_" + videoLocation.location.local_id + ".mp4";
            }
            return location2.location.volume_id + "_" + location2.location.local_id + ".jpg";
        } else if (index >= this.imagesArr.size()) {
            return null;
        } else {
            return FileLoader.getMessageFileName(this.imagesArr.get(index).messageOwner);
        }
    }

    private ImageLocation getImageLocation(int index, int[] size) {
        if (index < 0) {
            return null;
        }
        if (!this.secureDocuments.isEmpty()) {
            if (index >= this.secureDocuments.size()) {
                return null;
            }
            if (size != null) {
                size[0] = this.secureDocuments.get(index).secureFile.size;
            }
            return ImageLocation.getForSecureDocument(this.secureDocuments.get(index));
        } else if (!this.imagesArrLocations.isEmpty()) {
            if (index >= this.imagesArrLocations.size()) {
                return null;
            }
            if (size != null) {
                size[0] = this.imagesArrLocationsSizes.get(index).intValue();
            }
            return this.imagesArrLocationsVideo.get(index);
        } else if (this.imagesArr.isEmpty() || index >= this.imagesArr.size()) {
            return null;
        } else {
            MessageObject message = this.imagesArr.get(index);
            if (message.messageOwner instanceof TLRPC.TL_messageService) {
                if (message.messageOwner.action instanceof TLRPC.TL_messageActionUserUpdatedPhoto) {
                    return null;
                }
                TLRPC.PhotoSize sizeFull = FileLoader.getClosestPhotoSizeWithSize(message.photoThumbs, AndroidUtilities.getPhotoSize());
                if (sizeFull != null) {
                    if (size != null) {
                        size[0] = sizeFull.size;
                        if (size[0] == 0) {
                            size[0] = -1;
                        }
                    }
                    return ImageLocation.getForObject(sizeFull, message.photoThumbsObject);
                } else if (size != null) {
                    size[0] = -1;
                }
            } else if ((!(message.messageOwner.media instanceof TLRPC.TL_messageMediaPhoto) || message.messageOwner.media.photo == null) && (!(message.messageOwner.media instanceof TLRPC.TL_messageMediaWebPage) || message.messageOwner.media.webpage == null)) {
                if (message.messageOwner.media instanceof TLRPC.TL_messageMediaInvoice) {
                    return ImageLocation.getForWebFile(WebFile.createWithWebDocument(((TLRPC.TL_messageMediaInvoice) message.messageOwner.media).photo));
                }
                if (message.getDocument() != null) {
                    TLRPC.Document document = message.getDocument();
                    if (this.sharedMediaType == 5) {
                        return ImageLocation.getForDocument(document);
                    }
                    if (MessageObject.isDocumentHasThumb(message.getDocument())) {
                        TLRPC.PhotoSize thumb = FileLoader.getClosestPhotoSizeWithSize(document.thumbs, 90);
                        if (size != null) {
                            size[0] = thumb.size;
                            if (size[0] == 0) {
                                size[0] = -1;
                            }
                        }
                        return ImageLocation.getForDocument(thumb, document);
                    }
                }
            } else if (message.isGif()) {
                return ImageLocation.getForDocument(message.getDocument());
            } else {
                TLRPC.PhotoSize sizeFull2 = FileLoader.getClosestPhotoSizeWithSize(message.photoThumbs, AndroidUtilities.getPhotoSize(), false, (TLRPC.PhotoSize) null, true);
                if (sizeFull2 != null) {
                    if (size != null) {
                        size[0] = sizeFull2.size;
                        if (size[0] == 0) {
                            size[0] = -1;
                        }
                    }
                    return ImageLocation.getForObject(sizeFull2, message.photoThumbsObject);
                } else if (size != null) {
                    size[0] = -1;
                }
            }
            return null;
        }
    }

    /* access modifiers changed from: private */
    public TLObject getFileLocation(int index, int[] size) {
        if (index < 0) {
            return null;
        }
        if (!this.secureDocuments.isEmpty()) {
            if (index >= this.secureDocuments.size()) {
                return null;
            }
            if (size != null) {
                size[0] = this.secureDocuments.get(index).secureFile.size;
            }
            return this.secureDocuments.get(index);
        } else if (!this.imagesArrLocations.isEmpty()) {
            if (index >= this.imagesArrLocations.size()) {
                return null;
            }
            if (size != null) {
                size[0] = this.imagesArrLocationsSizes.get(index).intValue();
            }
            return this.imagesArrLocationsVideo.get(index).location;
        } else if (this.imagesArr.isEmpty() || index >= this.imagesArr.size()) {
            return null;
        } else {
            MessageObject message = this.imagesArr.get(index);
            if (message.messageOwner instanceof TLRPC.TL_messageService) {
                if (message.messageOwner.action instanceof TLRPC.TL_messageActionUserUpdatedPhoto) {
                    return message.messageOwner.action.newUserPhoto.photo_big;
                }
                TLRPC.PhotoSize sizeFull = FileLoader.getClosestPhotoSizeWithSize(message.photoThumbs, AndroidUtilities.getPhotoSize());
                if (sizeFull != null) {
                    if (size != null) {
                        size[0] = sizeFull.size;
                        if (size[0] == 0) {
                            size[0] = -1;
                        }
                    }
                    return sizeFull;
                } else if (size != null) {
                    size[0] = -1;
                }
            } else if (((message.messageOwner.media instanceof TLRPC.TL_messageMediaPhoto) && message.messageOwner.media.photo != null) || ((message.messageOwner.media instanceof TLRPC.TL_messageMediaWebPage) && message.messageOwner.media.webpage != null)) {
                TLRPC.PhotoSize sizeFull2 = FileLoader.getClosestPhotoSizeWithSize(message.photoThumbs, AndroidUtilities.getPhotoSize(), false, (TLRPC.PhotoSize) null, true);
                if (sizeFull2 != null) {
                    if (size != null) {
                        size[0] = sizeFull2.size;
                        if (size[0] == 0) {
                            size[0] = -1;
                        }
                    }
                    return sizeFull2;
                } else if (size != null) {
                    size[0] = -1;
                }
            } else if (message.messageOwner.media instanceof TLRPC.TL_messageMediaInvoice) {
                return ((TLRPC.TL_messageMediaInvoice) message.messageOwner.media).photo;
            } else {
                if (message.getDocument() != null && MessageObject.isDocumentHasThumb(message.getDocument())) {
                    TLRPC.PhotoSize thumb = FileLoader.getClosestPhotoSizeWithSize(message.getDocument().thumbs, 90);
                    if (size != null) {
                        size[0] = thumb.size;
                        if (size[0] == 0) {
                            size[0] = -1;
                        }
                    }
                    return thumb;
                }
            }
            return null;
        }
    }

    /* access modifiers changed from: private */
    public void updateSelectedCount() {
        PhotoViewerProvider photoViewerProvider = this.placeProvider;
        if (photoViewerProvider != null) {
            int count = photoViewerProvider.getSelectedCount();
            this.photosCounterView.setCount(count);
            if (count == 0) {
                togglePhotosListView(false, true);
            }
        }
    }

    /* access modifiers changed from: private */
    public boolean isCurrentAvatarSet() {
        int i;
        if (this.currentAvatarLocation == null || (i = this.currentIndex) < 0 || i >= this.avatarsArr.size()) {
            return false;
        }
        TLRPC.Photo photo = this.avatarsArr.get(this.currentIndex);
        ImageLocation currentLocation = this.imagesArrLocations.get(this.currentIndex);
        if (photo instanceof TLRPC.TL_photoEmpty) {
            photo = null;
        }
        if (photo != null) {
            int N = photo.sizes.size();
            for (int a = 0; a < N; a++) {
                TLRPC.PhotoSize size = photo.sizes.get(a);
                if (size.location != null && size.location.local_id == this.currentAvatarLocation.location.local_id && size.location.volume_id == this.currentAvatarLocation.location.volume_id) {
                    return true;
                }
            }
        } else if (currentLocation.location.local_id == this.currentAvatarLocation.location.local_id && currentLocation.location.volume_id == this.currentAvatarLocation.location.volume_id) {
            return true;
        } else {
            return false;
        }
        return false;
    }

    private void setItemVisible(View itemView, boolean visible, boolean animate) {
        setItemVisible(itemView, visible, animate, 1.0f);
    }

    private void setItemVisible(View itemView, boolean visible, boolean animate, float maxAlpha) {
        Boolean visibleNow = this.actionBarItemsVisibility.get(itemView);
        if (visibleNow == null || visibleNow.booleanValue() != visible) {
            this.actionBarItemsVisibility.put(itemView, Boolean.valueOf(visible));
            itemView.animate().cancel();
            float alpha = (visible ? 1.0f : 0.0f) * maxAlpha;
            int i = 0;
            if (!animate || visibleNow == null) {
                if (!visible) {
                    i = 8;
                }
                itemView.setVisibility(i);
                itemView.setAlpha(alpha);
                return;
            }
            if (visible) {
                itemView.setVisibility(0);
            }
            itemView.animate().alpha(alpha).setDuration(100).setInterpolator(new LinearInterpolator()).withEndAction(new PhotoViewer$$ExternalSyntheticLambda54(visible, itemView)).start();
        }
    }

    static /* synthetic */ void lambda$setItemVisible$58(boolean visible, View itemView) {
        if (!visible) {
            itemView.setVisibility(8);
        }
    }

    /* JADX WARNING: type inference failed for: r11v1, types: [android.animation.AnimatorSet, java.lang.String] */
    /* JADX WARNING: type inference failed for: r11v60 */
    /* JADX WARNING: type inference failed for: r11v61 */
    /* access modifiers changed from: private */
    /* JADX WARNING: Removed duplicated region for block: B:157:0x04cf A[RETURN] */
    /* JADX WARNING: Removed duplicated region for block: B:158:0x04d0  */
    /* JADX WARNING: Removed duplicated region for block: B:316:0x07fe  */
    /* JADX WARNING: Removed duplicated region for block: B:321:0x0841  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public void onPhotoShow(org.telegram.messenger.MessageObject r27, org.telegram.tgnet.TLRPC.FileLocation r28, org.telegram.messenger.ImageLocation r29, org.telegram.messenger.ImageLocation r30, java.util.ArrayList<org.telegram.messenger.MessageObject> r31, java.util.ArrayList<org.telegram.messenger.SecureDocument> r32, java.util.List<java.lang.Object> r33, int r34, org.telegram.ui.PhotoViewer.PlaceProviderObject r35) {
        /*
            r26 = this;
            r0 = r26
            r1 = r27
            r2 = r31
            r3 = r32
            r4 = r33
            r5 = r34
            r6 = r35
            int r7 = org.telegram.tgnet.ConnectionsManager.generateClassGuid()
            r0.classGuid = r7
            r7 = 0
            r0.currentMessageObject = r7
            r0.currentFileLocation = r7
            r0.currentFileLocationVideo = r7
            r0.currentSecureDocument = r7
            r0.currentPathObject = r7
            r0.currentPageBlock = r7
            r8 = 0
            r0.fromCamera = r8
            r0.currentBotInlineResult = r7
            r9 = 0
            r0.avatarStartProgress = r9
            r10 = 0
            r0.avatarStartTime = r10
            r12 = -1
            r0.currentIndex = r12
            java.lang.String[] r13 = r0.currentFileNames
            r13[r8] = r7
            r14 = 1
            java.lang.Integer r15 = java.lang.Integer.valueOf(r14)
            r13[r14] = r7
            r12 = 2
            r13[r12] = r7
            r0.avatarsDialogId = r10
            r0.canEditAvatar = r8
            r0.totalImagesCount = r8
            r0.totalImagesCountMerge = r8
            r0.currentEditMode = r8
            r0.isFirstLoading = r14
            r0.needSearchImageInArr = r8
            r0.loadingMoreImages = r8
            boolean[] r13 = r0.endReached
            r13[r8] = r8
            long r7 = r0.mergeDialogId
            int r17 = (r7 > r10 ? 1 : (r7 == r10 ? 0 : -1))
            if (r17 != 0) goto L_0x005a
            r7 = 1
            goto L_0x005b
        L_0x005a:
            r7 = 0
        L_0x005b:
            r13[r14] = r7
            r7 = 0
            r0.opennedFromMedia = r7
            r0.needCaptionLayout = r7
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r8 = r0.containerView
            r8.setTag(r15)
            r0.playerAutoStarted = r7
            r0.isCurrentVideo = r7
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            r7.clear()
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r7 = r0.imagesArrLocations
            r7.clear()
            java.util.ArrayList<java.lang.Integer> r7 = r0.imagesArrLocationsSizes
            r7.clear()
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r7 = r0.imagesArrLocationsVideo
            r7.clear()
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Message> r7 = r0.imagesArrMessages
            r7.clear()
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Photo> r7 = r0.avatarsArr
            r7.clear()
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r7 = r0.secureDocuments
            r7.clear()
            java.util.ArrayList<java.lang.Object> r7 = r0.imagesArrLocals
            r7.clear()
            r7 = 0
        L_0x0094:
            if (r7 >= r12) goto L_0x00a7
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r8 = r0.imagesByIds
            r8 = r8[r7]
            r8.clear()
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r8 = r0.imagesByIdsTemp
            r8 = r8[r7]
            r8.clear()
            int r7 = r7 + 1
            goto L_0x0094
        L_0x00a7:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArrTemp
            r7.clear()
            r7 = 0
            r0.currentAvatarLocation = r7
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r7 = r0.containerView
            r8 = 0
            r7.setPadding(r8, r8, r8, r8)
            org.telegram.messenger.ImageReceiver$BitmapHolder r7 = r0.currentThumb
            if (r7 == 0) goto L_0x00bc
            r7.release()
        L_0x00bc:
            org.telegram.ui.Components.VideoTimelinePlayView r7 = r0.videoTimelineView
            if (r7 == 0) goto L_0x00ce
            int r8 = r0.sendPhotoType
            if (r8 != r14) goto L_0x00c9
            r8 = 0
            r7.setBackground(r8)
            goto L_0x00ce
        L_0x00c9:
            r8 = 2130706432(0x7var_, float:1.7014118E38)
            r7.setBackgroundColor(r8)
        L_0x00ce:
            if (r6 == 0) goto L_0x00d3
            org.telegram.messenger.ImageReceiver$BitmapHolder r7 = r6.thumb
            goto L_0x00d4
        L_0x00d3:
            r7 = 0
        L_0x00d4:
            r0.currentThumb = r7
            if (r6 == 0) goto L_0x00de
            boolean r7 = r6.isEvent
            if (r7 == 0) goto L_0x00de
            r7 = 1
            goto L_0x00df
        L_0x00de:
            r7 = 0
        L_0x00df:
            r0.isEvent = r7
            r7 = 0
            r0.sharedMediaType = r7
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r8 = r0.allMediaItem
            r13 = 2131627850(0x7f0e0f4a, float:1.8882976E38)
            java.lang.String r10 = "ShowAllMedia"
            java.lang.String r10 = org.telegram.messenger.LocaleController.getString(r10, r13)
            r8.setText(r10)
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.sendItem
            r0.setItemVisible(r8, r7, r7)
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.pipItem
            r0.setItemVisible(r8, r7, r14)
            android.widget.ImageView r8 = r0.cameraItem
            r10 = 8
            r8.setVisibility(r10)
            android.widget.ImageView r8 = r0.cameraItem
            r11 = 0
            r8.setTag(r11)
            android.widget.FrameLayout r8 = r0.bottomLayout
            r8.setVisibility(r7)
            android.widget.FrameLayout r7 = r0.bottomLayout
            r7.setTag(r15)
            android.widget.FrameLayout r7 = r0.bottomLayout
            r7.setTranslationY(r9)
            org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r7 = r0.captionTextViewSwitcher
            r7.setTranslationY(r9)
            android.widget.LinearLayout r7 = r0.bottomButtonsLayout
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.paintButton
            r7.setVisibility(r10)
            org.telegram.ui.PhotoViewer$QualityChooseView r7 = r0.qualityChooseView
            r8 = 4
            if (r7 == 0) goto L_0x013b
            r7.setVisibility(r8)
            org.telegram.ui.Components.PickerBottomLayoutViewer r7 = r0.qualityPicker
            r7.setVisibility(r8)
            org.telegram.ui.PhotoViewer$QualityChooseView r7 = r0.qualityChooseView
            r11 = 0
            r7.setTag(r11)
            goto L_0x013c
        L_0x013b:
            r11 = 0
        L_0x013c:
            android.animation.AnimatorSet r7 = r0.qualityChooseViewAnimation
            if (r7 == 0) goto L_0x0145
            r7.cancel()
            r0.qualityChooseViewAnimation = r11
        L_0x0145:
            r0.setDoubleTapEnabled(r14)
            r7 = 0
            r0.allowShare = r7
            r0.slideshowMessageId = r7
            r0.nameOverride = r11
            r0.dateOverride = r7
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r7.hideSubItem(r12)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r7.hideSubItem(r8)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r11 = 10
            r7.hideSubItem(r11)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 11
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 14
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 15
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 17
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 16
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 6
            r7.hideSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.menuItem
            r13 = 19
            r7.hideSubItem(r13)
            android.view.View r7 = r0.speedGap
            r7.setVisibility(r10)
            org.telegram.ui.ActionBar.ActionBar r7 = r0.actionBar
            r7.setTranslationY(r9)
            org.telegram.ui.Components.CheckBox r7 = r0.checkImageView
            r13 = 1065353216(0x3var_, float:1.0)
            r7.setAlpha(r13)
            org.telegram.ui.Components.CheckBox r7 = r0.checkImageView
            r7.setTranslationY(r9)
            org.telegram.ui.Components.CheckBox r7 = r0.checkImageView
            r7.setVisibility(r10)
            org.telegram.ui.ActionBar.ActionBar r7 = r0.actionBar
            r11 = 0
            r7.setTitleRightMargin(r11)
            org.telegram.ui.PhotoViewer$CounterView r7 = r0.photosCounterView
            r7.setAlpha(r13)
            org.telegram.ui.PhotoViewer$CounterView r7 = r0.photosCounterView
            r7.setTranslationY(r9)
            org.telegram.ui.PhotoViewer$CounterView r7 = r0.photosCounterView
            r7.setVisibility(r10)
            android.widget.FrameLayout r7 = r0.pickerView
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.pickerViewSendButton
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.pickerViewSendButton
            r7.setTranslationY(r9)
            android.widget.FrameLayout r7 = r0.pickerView
            r7.setAlpha(r13)
            android.widget.ImageView r7 = r0.pickerViewSendButton
            r7.setAlpha(r13)
            android.widget.FrameLayout r7 = r0.pickerView
            r7.setTranslationY(r9)
            android.widget.ImageView r7 = r0.paintItem
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.paintItem
            r11 = 0
            r7.setTag(r11)
            android.widget.ImageView r7 = r0.cropItem
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.tuneItem
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.tuneItem
            r7.setTag(r11)
            android.widget.ImageView r7 = r0.timeItem
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.rotateItem
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.mirrorItem
            r7.setVisibility(r10)
            android.widget.FrameLayout r7 = r0.pickerView
            android.view.ViewGroup$LayoutParams r7 = r7.getLayoutParams()
            r11 = -2
            r7.height = r11
            android.widget.TextView r7 = r0.docInfoTextView
            r7.setVisibility(r10)
            android.widget.TextView r7 = r0.docNameTextView
            r7.setVisibility(r10)
            r7 = 0
            r0.showVideoTimeline(r7, r7)
            android.widget.TextView r7 = r0.videoAvatarTooltip
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.compressItem
            r7.setVisibility(r10)
            org.telegram.ui.Components.PhotoViewerCaptionEnterView r7 = r0.captionEditText
            r7.setVisibility(r10)
            org.telegram.ui.Components.RecyclerListView r7 = r0.mentionListView
            r7.setVisibility(r10)
            android.widget.ImageView r7 = r0.muteItem
            r11 = 0
            org.telegram.messenger.AndroidUtilities.updateViewVisibilityAnimated(r7, r11, r13, r11)
            org.telegram.ui.ActionBar.ActionBar r7 = r0.actionBar
            r9 = 0
            r7.setSubtitle(r9)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.masksItem
            r0.setItemVisible(r7, r11, r14)
            org.telegram.ui.ActionBar.ActionBarMenuItem r7 = r0.shareItem
            r7.setVisibility(r10)
            r0.muteVideo = r11
            android.widget.ImageView r7 = r0.muteItem
            r9 = 2131166172(0x7var_dc, float:1.7946582E38)
            r7.setImageResource(r9)
            org.telegram.ui.Components.PickerBottomLayoutViewer r7 = r0.editorDoneLayout
            r7.setVisibility(r10)
            org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r7 = r0.captionTextViewSwitcher
            r9 = 0
            r7.setTag(r9)
            org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r7 = r0.captionTextViewSwitcher
            r7.setVisibility(r8)
            org.telegram.ui.Components.PhotoCropView r7 = r0.photoCropView
            if (r7 == 0) goto L_0x026b
            r7.setVisibility(r10)
        L_0x026b:
            org.telegram.ui.Components.PhotoFilterView r7 = r0.photoFilterView
            if (r7 == 0) goto L_0x0272
            r7.setVisibility(r10)
        L_0x0272:
            r7 = 0
        L_0x0273:
            r9 = 3
            if (r7 >= r9) goto L_0x0289
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r9 = r0.photoProgressViews
            r11 = r9[r7]
            if (r11 == 0) goto L_0x0284
            r9 = r9[r7]
            r11 = -1
            r12 = 0
            r9.setBackgroundState(r11, r12, r14)
            goto L_0x0285
        L_0x0284:
            r11 = -1
        L_0x0285:
            int r7 = r7 + 1
            r12 = 2
            goto L_0x0273
        L_0x0289:
            org.telegram.ui.Components.GroupedPhotosListView r7 = r0.groupedPhotosListView
            if (r7 == 0) goto L_0x029a
            r7.reset()
            org.telegram.ui.Components.GroupedPhotosListView r7 = r0.groupedPhotosListView
            boolean r9 = org.telegram.messenger.ApplicationLoader.isNetworkOnline()
            r9 = r9 ^ r14
            r7.setAnimateBackground(r9)
        L_0x029a:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r7 = r0.placeProvider
            if (r7 == 0) goto L_0x02ac
            int r7 = r7.getTotalImageCount()
            if (r7 <= 0) goto L_0x02ac
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r7 = r0.placeProvider
            int r7 = r7.getTotalImageCount()
            r0.totalImagesCount = r7
        L_0x02ac:
            if (r1 == 0) goto L_0x02df
            android.content.Context r7 = org.telegram.messenger.ApplicationLoader.applicationContext
            java.lang.String r9 = "playback_speed"
            r11 = 0
            android.content.SharedPreferences r7 = r7.getSharedPreferences(r9, r11)
            java.lang.StringBuilder r9 = new java.lang.StringBuilder
            r9.<init>()
            java.lang.String r11 = "speed"
            r9.append(r11)
            long r11 = r27.getDialogId()
            r9.append(r11)
            java.lang.String r11 = "_"
            r9.append(r11)
            int r11 = r27.getId()
            r9.append(r11)
            java.lang.String r9 = r9.toString()
            float r9 = r7.getFloat(r9, r13)
            r0.currentVideoSpeed = r9
            goto L_0x02e1
        L_0x02df:
            r0.currentVideoSpeed = r13
        L_0x02e1:
            r26.setMenuItemIcon()
            java.lang.String r9 = "ShowAllGIFs"
            r11 = 2131627848(0x7f0e0var_, float:1.8882972E38)
            java.lang.String r12 = "ShowAllFiles"
            if (r1 == 0) goto L_0x046c
            if (r2 != 0) goto L_0x046c
            org.telegram.tgnet.TLRPC$Message r15 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r15 = r15.media
            boolean r15 = r15 instanceof org.telegram.tgnet.TLRPC.TL_messageMediaWebPage
            if (r15 == 0) goto L_0x038a
            org.telegram.tgnet.TLRPC$Message r15 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r15 = r15.media
            org.telegram.tgnet.TLRPC$WebPage r15 = r15.webpage
            if (r15 == 0) goto L_0x038a
            org.telegram.tgnet.TLRPC$Message r15 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r15 = r15.media
            org.telegram.tgnet.TLRPC$WebPage r15 = r15.webpage
            java.lang.String r8 = r15.site_name
            if (r8 == 0) goto L_0x038a
            java.lang.String r8 = r8.toLowerCase()
            java.lang.String r10 = "instagram"
            boolean r10 = r8.equals(r10)
            if (r10 != 0) goto L_0x0327
            java.lang.String r10 = "twitter"
            boolean r10 = r8.equals(r10)
            if (r10 != 0) goto L_0x0327
            java.lang.String r10 = r15.type
            java.lang.String r7 = "telegram_album"
            boolean r7 = r7.equals(r10)
            if (r7 == 0) goto L_0x038a
        L_0x0327:
            java.lang.String r7 = r15.author
            boolean r7 = android.text.TextUtils.isEmpty(r7)
            if (r7 != 0) goto L_0x0333
            java.lang.String r7 = r15.author
            r0.nameOverride = r7
        L_0x0333:
            org.telegram.tgnet.TLRPC$Page r7 = r15.cached_page
            boolean r7 = r7 instanceof org.telegram.tgnet.TLRPC.TL_page
            if (r7 == 0) goto L_0x035d
            r7 = 0
        L_0x033a:
            org.telegram.tgnet.TLRPC$Page r10 = r15.cached_page
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PageBlock> r10 = r10.blocks
            int r10 = r10.size()
            if (r7 >= r10) goto L_0x035d
            org.telegram.tgnet.TLRPC$Page r10 = r15.cached_page
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PageBlock> r10 = r10.blocks
            java.lang.Object r10 = r10.get(r7)
            org.telegram.tgnet.TLRPC$PageBlock r10 = (org.telegram.tgnet.TLRPC.PageBlock) r10
            boolean r13 = r10 instanceof org.telegram.tgnet.TLRPC.TL_pageBlockAuthorDate
            if (r13 == 0) goto L_0x035a
            r13 = r10
            org.telegram.tgnet.TLRPC$TL_pageBlockAuthorDate r13 = (org.telegram.tgnet.TLRPC.TL_pageBlockAuthorDate) r13
            int r13 = r13.published_date
            r0.dateOverride = r13
            goto L_0x035d
        L_0x035a:
            int r7 = r7 + 1
            goto L_0x033a
        L_0x035d:
            r7 = 0
            java.util.ArrayList r10 = r1.getWebPagePhotos(r7, r7)
            boolean r7 = r10.isEmpty()
            if (r7 != 0) goto L_0x038a
            int r7 = r27.getId()
            r0.slideshowMessageId = r7
            r7 = 0
            r0.needSearchImageInArr = r7
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            r7.addAll(r10)
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            int r7 = r7.size()
            r0.totalImagesCount = r7
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            int r7 = r7.indexOf(r1)
            if (r7 >= 0) goto L_0x0387
            r7 = 0
        L_0x0387:
            r0.setImageIndex(r7)
        L_0x038a:
            boolean r7 = r27.canPreviewDocument()
            if (r7 == 0) goto L_0x039c
            r0.sharedMediaType = r14
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r7 = r0.allMediaItem
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r12, r11)
            r7.setText(r8)
            goto L_0x03b1
        L_0x039c:
            boolean r7 = r27.isGif()
            if (r7 == 0) goto L_0x03b1
            r7 = 5
            r0.sharedMediaType = r7
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r7 = r0.allMediaItem
            r8 = 2131627849(0x7f0e0var_, float:1.8882974E38)
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r9, r8)
            r7.setText(r8)
        L_0x03b1:
            boolean r7 = r0.isEmbedVideo
            if (r7 == 0) goto L_0x03c2
            android.widget.FrameLayout r7 = r0.bottomLayout
            r8 = 0
            r7.setTag(r8)
            android.widget.FrameLayout r7 = r0.bottomLayout
            r8 = 8
            r7.setVisibility(r8)
        L_0x03c2:
            int r7 = r0.slideshowMessageId
            if (r7 != 0) goto L_0x0469
            int r7 = org.telegram.messenger.UserConfig.selectedAccount
            org.telegram.messenger.MessagesController r7 = org.telegram.messenger.MessagesController.getInstance(r7)
            long r8 = r27.getChatId()
            boolean r7 = r7.isChatNoForwards((long) r8)
            java.util.ArrayList<org.telegram.messenger.MessageObject> r8 = r0.imagesArr
            r8.add(r1)
            long r8 = r1.eventId
            r10 = 0
            int r12 = (r8 > r10 ? 1 : (r8 == r10 ? 0 : -1))
            if (r12 == 0) goto L_0x03e7
            r8 = 0
            r0.needSearchImageInArr = r8
            r9 = 0
            goto L_0x0463
        L_0x03e7:
            r8 = 0
            org.telegram.ui.Components.AnimatedFileDrawable r9 = r0.currentAnimation
            if (r9 == 0) goto L_0x03ff
            r0.needSearchImageInArr = r8
            boolean r9 = r27.canForwardMessage()
            if (r9 == 0) goto L_0x03fd
            if (r7 != 0) goto L_0x03fd
            org.telegram.ui.ActionBar.ActionBarMenuItem r9 = r0.sendItem
            r0.setItemVisible(r9, r14, r8)
            r9 = 0
            goto L_0x0463
        L_0x03fd:
            r9 = 0
            goto L_0x0463
        L_0x03ff:
            boolean r8 = r1.scheduled
            if (r8 != 0) goto L_0x044f
            org.telegram.tgnet.TLRPC$Message r8 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r8 = r8.media
            boolean r8 = r8 instanceof org.telegram.tgnet.TLRPC.TL_messageMediaInvoice
            if (r8 != 0) goto L_0x044f
            org.telegram.tgnet.TLRPC$Message r8 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r8 = r8.media
            boolean r8 = r8 instanceof org.telegram.tgnet.TLRPC.TL_messageMediaWebPage
            if (r8 != 0) goto L_0x044f
            org.telegram.tgnet.TLRPC$Message r8 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageAction r8 = r8.action
            if (r8 == 0) goto L_0x0421
            org.telegram.tgnet.TLRPC$Message r8 = r1.messageOwner
            org.telegram.tgnet.TLRPC$MessageAction r8 = r8.action
            boolean r8 = r8 instanceof org.telegram.tgnet.TLRPC.TL_messageActionEmpty
            if (r8 == 0) goto L_0x044f
        L_0x0421:
            r0.needSearchImageInArr = r14
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r8 = r0.imagesByIds
            r9 = 0
            r8 = r8[r9]
            int r9 = r27.getId()
            r8.put(r9, r1)
            org.telegram.ui.ChatActivity r8 = r0.parentChatActivity
            if (r8 == 0) goto L_0x0439
            boolean r8 = r8.isThreadChat()
            if (r8 != 0) goto L_0x0445
        L_0x0439:
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r9 = 4
            r8.showSubItem(r9)
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r9 = 2
            r8.showSubItem(r9)
        L_0x0445:
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.sendItem
            r9 = r7 ^ 1
            r10 = 0
            r0.setItemVisible(r8, r9, r10)
            r9 = 0
            goto L_0x0463
        L_0x044f:
            boolean r8 = r0.isEmbedVideo
            if (r8 == 0) goto L_0x0462
            long r8 = r1.eventId
            r10 = 0
            int r12 = (r8 > r10 ? 1 : (r8 == r10 ? 0 : -1))
            if (r12 != 0) goto L_0x0462
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.sendItem
            r9 = 0
            r0.setItemVisible(r8, r14, r9)
            goto L_0x0463
        L_0x0462:
            r9 = 0
        L_0x0463:
            r0.setImageIndex(r9)
            r10 = 0
            goto L_0x07e0
        L_0x0469:
            r10 = 0
            goto L_0x07e0
        L_0x046c:
            if (r3 == 0) goto L_0x0479
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r7 = r0.secureDocuments
            r7.addAll(r3)
            r0.setImageIndex(r5)
            r10 = 0
            goto L_0x07e0
        L_0x0479:
            if (r28 == 0) goto L_0x0534
            if (r6 == 0) goto L_0x0480
            long r7 = r6.dialogId
            goto L_0x0482
        L_0x0480:
            r7 = 0
        L_0x0482:
            r0.avatarsDialogId = r7
            if (r6 == 0) goto L_0x048c
            boolean r7 = r6.canEdit
            if (r7 == 0) goto L_0x048c
            r7 = 1
            goto L_0x048d
        L_0x048c:
            r7 = 0
        L_0x048d:
            r0.canEditAvatar = r7
            if (r29 != 0) goto L_0x04cb
            long r7 = r0.avatarsDialogId
            r9 = 0
            int r11 = (r7 > r9 ? 1 : (r7 == r9 ? 0 : -1))
            if (r11 == 0) goto L_0x04cb
            int r11 = (r7 > r9 ? 1 : (r7 == r9 ? 0 : -1))
            if (r11 <= 0) goto L_0x04b3
            int r7 = r0.currentAccount
            org.telegram.messenger.MessagesController r7 = org.telegram.messenger.MessagesController.getInstance(r7)
            long r8 = r0.avatarsDialogId
            java.lang.Long r8 = java.lang.Long.valueOf(r8)
            org.telegram.tgnet.TLRPC$User r7 = r7.getUser(r8)
            r8 = 0
            org.telegram.messenger.ImageLocation r7 = org.telegram.messenger.ImageLocation.getForUserOrChat(r7, r8)
            goto L_0x04cd
        L_0x04b3:
            r8 = 0
            int r7 = r0.currentAccount
            org.telegram.messenger.MessagesController r7 = org.telegram.messenger.MessagesController.getInstance(r7)
            long r9 = r0.avatarsDialogId
            long r9 = -r9
            java.lang.Long r9 = java.lang.Long.valueOf(r9)
            org.telegram.tgnet.TLRPC$Chat r7 = r7.getChat(r9)
            org.telegram.messenger.ImageLocation r9 = org.telegram.messenger.ImageLocation.getForUserOrChat(r7, r8)
            r7 = r9
            goto L_0x04cd
        L_0x04cb:
            r7 = r29
        L_0x04cd:
            if (r7 != 0) goto L_0x04d0
            return
        L_0x04d0:
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r8 = r0.imagesArrLocations
            r8.add(r7)
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r8 = r0.imagesArrLocationsVideo
            if (r30 == 0) goto L_0x04dc
            r9 = r30
            goto L_0x04dd
        L_0x04dc:
            r9 = r7
        L_0x04dd:
            r8.add(r9)
            r0.currentAvatarLocation = r7
            java.util.ArrayList<java.lang.Integer> r8 = r0.imagesArrLocationsSizes
            if (r6 == 0) goto L_0x04e9
            int r9 = r6.size
            goto L_0x04ea
        L_0x04e9:
            r9 = 0
        L_0x04ea:
            java.lang.Integer r9 = java.lang.Integer.valueOf(r9)
            r8.add(r9)
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Message> r8 = r0.imagesArrMessages
            r9 = 0
            r8.add(r9)
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Photo> r8 = r0.avatarsArr
            org.telegram.tgnet.TLRPC$TL_photoEmpty r9 = new org.telegram.tgnet.TLRPC$TL_photoEmpty
            r9.<init>()
            r8.add(r9)
            android.widget.LinearLayout r8 = r0.bottomButtonsLayout
            boolean r9 = r0.videoPlayerControlVisible
            if (r9 != 0) goto L_0x0509
            r9 = 0
            goto L_0x050b
        L_0x0509:
            r9 = 8
        L_0x050b:
            r8.setVisibility(r9)
            r0.allowShare = r14
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r9 = 2
            r8.hideSubItem(r9)
            android.widget.LinearLayout r8 = r0.bottomButtonsLayout
            int r8 = r8.getVisibility()
            if (r8 != 0) goto L_0x0526
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r9 = 10
            r8.hideSubItem(r9)
            goto L_0x052d
        L_0x0526:
            r9 = 10
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.showSubItem(r9)
        L_0x052d:
            r8 = 0
            r0.setImageIndex(r8)
            r10 = 0
            goto L_0x07e2
        L_0x0534:
            if (r2 == 0) goto L_0x05eb
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            r7.addAll(r2)
            r7 = 0
        L_0x053c:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r8 = r0.imagesArr
            int r8 = r8.size()
            if (r7 >= r8) goto L_0x056e
            java.util.ArrayList<org.telegram.messenger.MessageObject> r8 = r0.imagesArr
            java.lang.Object r8 = r8.get(r7)
            org.telegram.messenger.MessageObject r8 = (org.telegram.messenger.MessageObject) r8
            android.util.SparseArray<org.telegram.messenger.MessageObject>[] r10 = r0.imagesByIds
            long r15 = r8.getDialogId()
            r25 = r12
            long r11 = r0.currentDialogId
            int r19 = (r15 > r11 ? 1 : (r15 == r11 ? 0 : -1))
            if (r19 != 0) goto L_0x055c
            r11 = 0
            goto L_0x055d
        L_0x055c:
            r11 = 1
        L_0x055d:
            r10 = r10[r11]
            int r11 = r8.getId()
            r10.put(r11, r8)
            int r7 = r7 + 1
            r12 = r25
            r11 = 2131627848(0x7f0e0var_, float:1.8882972E38)
            goto L_0x053c
        L_0x056e:
            r25 = r12
            java.util.ArrayList<org.telegram.messenger.MessageObject> r7 = r0.imagesArr
            java.lang.Object r7 = r7.get(r5)
            org.telegram.messenger.MessageObject r7 = (org.telegram.messenger.MessageObject) r7
            boolean r8 = r7.scheduled
            if (r8 != 0) goto L_0x05dd
            org.telegram.ui.ChatActivity r8 = r0.parentChatActivity
            if (r8 == 0) goto L_0x0586
            boolean r8 = r8.isThreadChat()
            if (r8 != 0) goto L_0x05dd
        L_0x0586:
            r0.opennedFromMedia = r14
            if (r6 == 0) goto L_0x058e
            int r8 = r6.starOffset
            r0.startOffset = r8
        L_0x058e:
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r10 = 4
            r8.showSubItem(r10)
            boolean r8 = r7.canForwardMessage()
            if (r8 == 0) goto L_0x05b0
            int r8 = org.telegram.messenger.UserConfig.selectedAccount
            org.telegram.messenger.MessagesController r8 = org.telegram.messenger.MessagesController.getInstance(r8)
            long r10 = r7.getChatId()
            boolean r8 = r8.isChatNoForwards((long) r10)
            if (r8 != 0) goto L_0x05b0
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.sendItem
            r10 = 0
            r0.setItemVisible(r8, r14, r10)
        L_0x05b0:
            boolean r8 = r7.canPreviewDocument()
            if (r8 == 0) goto L_0x05c7
            r0.sharedMediaType = r14
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r8 = r0.allMediaItem
            r10 = r25
            r9 = 2131627848(0x7f0e0var_, float:1.8882972E38)
            java.lang.String r9 = org.telegram.messenger.LocaleController.getString(r10, r9)
            r8.setText(r9)
            goto L_0x05e5
        L_0x05c7:
            boolean r8 = r7.isGif()
            if (r8 == 0) goto L_0x05e5
            r8 = 5
            r0.sharedMediaType = r8
            org.telegram.ui.ActionBar.ActionBarMenuSubItem r8 = r0.allMediaItem
            r10 = 2131627849(0x7f0e0var_, float:1.8882974E38)
            java.lang.String r9 = org.telegram.messenger.LocaleController.getString(r9, r10)
            r8.setText(r9)
            goto L_0x05e5
        L_0x05dd:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r8 = r0.imagesArr
            int r8 = r8.size()
            r0.totalImagesCount = r8
        L_0x05e5:
            r0.setImageIndex(r5)
            r10 = 0
            goto L_0x07e0
        L_0x05eb:
            if (r4 == 0) goto L_0x07dc
            int r7 = r0.sendPhotoType
            if (r7 == 0) goto L_0x0600
            r8 = 4
            if (r7 == r8) goto L_0x0600
            r8 = 2
            if (r7 == r8) goto L_0x05fa
            r8 = 5
            if (r7 != r8) goto L_0x0616
        L_0x05fa:
            int r7 = r33.size()
            if (r7 <= r14) goto L_0x0616
        L_0x0600:
            org.telegram.ui.Components.CheckBox r7 = r0.checkImageView
            r8 = 0
            r7.setVisibility(r8)
            org.telegram.ui.PhotoViewer$CounterView r7 = r0.photosCounterView
            r7.setVisibility(r8)
            org.telegram.ui.ActionBar.ActionBar r7 = r0.actionBar
            r8 = 1120403456(0x42CLASSNAME, float:100.0)
            int r8 = org.telegram.messenger.AndroidUtilities.dp(r8)
            r7.setTitleRightMargin(r8)
        L_0x0616:
            int r7 = r0.sendPhotoType
            r8 = 2
            if (r7 == r8) goto L_0x061e
            r8 = 5
            if (r7 != r8) goto L_0x0631
        L_0x061e:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r7 = r0.placeProvider
            boolean r7 = r7.canCaptureMorePhotos()
            if (r7 == 0) goto L_0x0631
            android.widget.ImageView r7 = r0.cameraItem
            r8 = 0
            r7.setVisibility(r8)
            android.widget.ImageView r7 = r0.cameraItem
            r7.setTag(r15)
        L_0x0631:
            java.util.ArrayList<java.lang.Object> r7 = r0.imagesArrLocals
            r7.addAll(r4)
            java.util.ArrayList<java.lang.Object> r7 = r0.imagesArrLocals
            java.lang.Object r7 = r7.get(r5)
            boolean r8 = r7 instanceof org.telegram.messenger.MediaController.PhotoEntry
            if (r8 == 0) goto L_0x06e4
            int r8 = r0.sendPhotoType
            r9 = 10
            if (r8 != r9) goto L_0x0659
            android.widget.ImageView r8 = r0.cropItem
            r9 = 8
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.rotateItem
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.mirrorItem
            r8.setVisibility(r9)
            goto L_0x06e0
        L_0x0659:
            r9 = 8
            boolean r8 = r0.isDocumentsPicker
            if (r8 == 0) goto L_0x0688
            android.widget.ImageView r8 = r0.cropItem
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.rotateItem
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.mirrorItem
            r8.setVisibility(r9)
            android.widget.TextView r8 = r0.docInfoTextView
            r9 = 0
            r8.setVisibility(r9)
            android.widget.TextView r8 = r0.docNameTextView
            r8.setVisibility(r9)
            android.widget.FrameLayout r8 = r0.pickerView
            android.view.ViewGroup$LayoutParams r8 = r8.getLayoutParams()
            r9 = 1118306304(0x42a80000, float:84.0)
            int r9 = org.telegram.messenger.AndroidUtilities.dp(r9)
            r8.height = r9
            goto L_0x06e0
        L_0x0688:
            r8 = r7
            org.telegram.messenger.MediaController$PhotoEntry r8 = (org.telegram.messenger.MediaController.PhotoEntry) r8
            boolean r8 = r8.isVideo
            if (r8 == 0) goto L_0x06b9
            android.widget.ImageView r8 = r0.cropItem
            r9 = 8
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.rotateItem
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.mirrorItem
            r8.setVisibility(r9)
            android.widget.FrameLayout r8 = r0.bottomLayout
            r9 = 0
            r8.setVisibility(r9)
            android.widget.FrameLayout r8 = r0.bottomLayout
            r8.setTag(r15)
            android.widget.FrameLayout r8 = r0.bottomLayout
            r9 = 1111490560(0x42400000, float:48.0)
            int r9 = org.telegram.messenger.AndroidUtilities.dp(r9)
            int r9 = -r9
            float r9 = (float) r9
            r8.setTranslationY(r9)
            goto L_0x06e0
        L_0x06b9:
            android.widget.ImageView r8 = r0.cropItem
            int r9 = r0.sendPhotoType
            if (r9 == r14) goto L_0x06c1
            r9 = 0
            goto L_0x06c3
        L_0x06c1:
            r9 = 8
        L_0x06c3:
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.rotateItem
            int r9 = r0.sendPhotoType
            if (r9 == r14) goto L_0x06cf
            r9 = 8
            goto L_0x06d0
        L_0x06cf:
            r9 = 0
        L_0x06d0:
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.mirrorItem
            int r9 = r0.sendPhotoType
            if (r9 == r14) goto L_0x06dc
            r9 = 8
            goto L_0x06dd
        L_0x06dc:
            r9 = 0
        L_0x06dd:
            r8.setVisibility(r9)
        L_0x06e0:
            boolean r8 = r0.isDocumentsPicker
            r8 = r8 ^ r14
            goto L_0x0726
        L_0x06e4:
            boolean r8 = r7 instanceof org.telegram.tgnet.TLRPC.BotInlineResult
            if (r8 == 0) goto L_0x06fb
            android.widget.ImageView r8 = r0.cropItem
            r9 = 8
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.rotateItem
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.mirrorItem
            r8.setVisibility(r9)
            r8 = 0
            goto L_0x0726
        L_0x06fb:
            android.widget.ImageView r8 = r0.cropItem
            boolean r9 = r7 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r9 == 0) goto L_0x070a
            r9 = r7
            org.telegram.messenger.MediaController$SearchImage r9 = (org.telegram.messenger.MediaController.SearchImage) r9
            int r9 = r9.type
            if (r9 != 0) goto L_0x070a
            r9 = 0
            goto L_0x070c
        L_0x070a:
            r9 = 8
        L_0x070c:
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.rotateItem
            r9 = 8
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.mirrorItem
            r8.setVisibility(r9)
            android.widget.ImageView r8 = r0.cropItem
            int r8 = r8.getVisibility()
            if (r8 != 0) goto L_0x0725
            r8 = 1
            goto L_0x0726
        L_0x0725:
            r8 = 0
        L_0x0726:
            org.telegram.ui.ChatActivity r9 = r0.parentChatActivity
            if (r9 == 0) goto L_0x076a
            org.telegram.ui.Adapters.MentionsAdapter r10 = r0.mentionsAdapter
            org.telegram.tgnet.TLRPC$ChatFull r9 = r9.chatInfo
            r10.setChatInfo(r9)
            org.telegram.ui.Adapters.MentionsAdapter r9 = r0.mentionsAdapter
            org.telegram.ui.ChatActivity r10 = r0.parentChatActivity
            org.telegram.tgnet.TLRPC$Chat r10 = r10.currentChat
            if (r10 == 0) goto L_0x073b
            r10 = 1
            goto L_0x073c
        L_0x073b:
            r10 = 0
        L_0x073c:
            r9.setNeedUsernames(r10)
            org.telegram.ui.Adapters.MentionsAdapter r9 = r0.mentionsAdapter
            r10 = 0
            r9.setNeedBotContext(r10)
            if (r8 == 0) goto L_0x0753
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r9 = r0.placeProvider
            if (r9 == 0) goto L_0x0751
            boolean r9 = r9.allowCaption()
            if (r9 == 0) goto L_0x0753
        L_0x0751:
            r9 = 1
            goto L_0x0754
        L_0x0753:
            r9 = 0
        L_0x0754:
            r0.needCaptionLayout = r9
            org.telegram.ui.Components.PhotoViewerCaptionEnterView r10 = r0.captionEditText
            if (r9 == 0) goto L_0x075c
            r9 = 0
            goto L_0x075e
        L_0x075c:
            r9 = 8
        L_0x075e:
            r10.setVisibility(r9)
            boolean r9 = r0.needCaptionLayout
            if (r9 == 0) goto L_0x076a
            org.telegram.ui.Components.PhotoViewerCaptionEnterView r9 = r0.captionEditText
            r9.onCreate()
        L_0x076a:
            android.widget.FrameLayout r9 = r0.pickerView
            r10 = 0
            r9.setVisibility(r10)
            android.widget.ImageView r9 = r0.pickerViewSendButton
            r9.setVisibility(r10)
            android.widget.ImageView r9 = r0.pickerViewSendButton
            r10 = 0
            r9.setTranslationY(r10)
            android.widget.ImageView r9 = r0.pickerViewSendButton
            r10 = 1065353216(0x3var_, float:1.0)
            r9.setAlpha(r10)
            android.widget.FrameLayout r9 = r0.bottomLayout
            r10 = 8
            r9.setVisibility(r10)
            android.widget.FrameLayout r9 = r0.bottomLayout
            r10 = 0
            r9.setTag(r10)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r9 = r0.containerView
            r9.setTag(r10)
            r0.setImageIndex(r5)
            int r9 = r0.sendPhotoType
            if (r9 != r14) goto L_0x07a7
            android.widget.ImageView r9 = r0.paintItem
            r11 = 0
            r9.setVisibility(r11)
            android.widget.ImageView r9 = r0.tuneItem
            r9.setVisibility(r11)
            goto L_0x07d8
        L_0x07a7:
            r11 = 4
            if (r9 == r11) goto L_0x07cc
            r11 = 5
            if (r9 == r11) goto L_0x07cc
            android.widget.ImageView r9 = r0.paintItem
            java.lang.Object r11 = r9.getTag()
            if (r11 == 0) goto L_0x07b7
            r11 = 0
            goto L_0x07b9
        L_0x07b7:
            r11 = 8
        L_0x07b9:
            r9.setVisibility(r11)
            android.widget.ImageView r9 = r0.tuneItem
            java.lang.Object r11 = r9.getTag()
            if (r11 == 0) goto L_0x07c6
            r11 = 0
            goto L_0x07c8
        L_0x07c6:
            r11 = 8
        L_0x07c8:
            r9.setVisibility(r11)
            goto L_0x07d8
        L_0x07cc:
            android.widget.ImageView r9 = r0.paintItem
            r11 = 8
            r9.setVisibility(r11)
            android.widget.ImageView r9 = r0.tuneItem
            r9.setVisibility(r11)
        L_0x07d8:
            r26.updateSelectedCount()
            goto L_0x07e0
        L_0x07dc:
            r10 = 0
            r0.setImageIndex(r5)
        L_0x07e0:
            r7 = r29
        L_0x07e2:
            org.telegram.ui.Components.AnimatedFileDrawable r8 = r0.currentAnimation
            if (r8 != 0) goto L_0x0860
            boolean r8 = r0.isEvent
            if (r8 != 0) goto L_0x0860
            long r8 = r0.currentDialogId
            r11 = 0
            int r13 = (r8 > r11 ? 1 : (r8 == r11 ? 0 : -1))
            if (r13 == 0) goto L_0x0841
            int r8 = r0.totalImagesCount
            if (r8 != 0) goto L_0x0841
            org.telegram.messenger.MessageObject r8 = r0.currentMessageObject
            if (r8 == 0) goto L_0x0841
            boolean r8 = r8.scheduled
            if (r8 != 0) goto L_0x0841
            org.telegram.messenger.MessageObject r8 = r0.currentMessageObject
            org.telegram.tgnet.TLRPC$Message r8 = r8.messageOwner
            int r8 = org.telegram.messenger.MediaDataController.getMediaType(r8)
            int r9 = r0.sharedMediaType
            if (r8 != r9) goto L_0x0860
            int r8 = r0.currentAccount
            org.telegram.messenger.MediaDataController r19 = org.telegram.messenger.MediaDataController.getInstance(r8)
            long r8 = r0.currentDialogId
            int r11 = r0.sharedMediaType
            int r12 = r0.classGuid
            r24 = 1
            r20 = r8
            r22 = r11
            r23 = r12
            r19.getMediaCount(r20, r22, r23, r24)
            long r8 = r0.mergeDialogId
            r11 = 0
            int r13 = (r8 > r11 ? 1 : (r8 == r11 ? 0 : -1))
            if (r13 == 0) goto L_0x0860
            int r8 = r0.currentAccount
            org.telegram.messenger.MediaDataController r17 = org.telegram.messenger.MediaDataController.getInstance(r8)
            long r8 = r0.mergeDialogId
            int r11 = r0.sharedMediaType
            int r12 = r0.classGuid
            r22 = 1
            r18 = r8
            r20 = r11
            r21 = r12
            r17.getMediaCount(r18, r20, r21, r22)
            goto L_0x0860
        L_0x0841:
            long r8 = r0.avatarsDialogId
            r11 = 0
            int r13 = (r8 > r11 ? 1 : (r8 == r11 ? 0 : -1))
            if (r13 == 0) goto L_0x0860
            int r8 = r0.currentAccount
            org.telegram.messenger.MessagesController r17 = org.telegram.messenger.MessagesController.getInstance(r8)
            long r8 = r0.avatarsDialogId
            r20 = 80
            r21 = 0
            r22 = 1
            int r11 = r0.classGuid
            r18 = r8
            r23 = r11
            r17.loadDialogPhotos(r18, r20, r21, r22, r23)
        L_0x0860:
            org.telegram.messenger.MessageObject r8 = r0.currentMessageObject
            if (r8 == 0) goto L_0x086a
            boolean r8 = r8.isVideo()
            if (r8 != 0) goto L_0x088c
        L_0x086a:
            org.telegram.tgnet.TLRPC$BotInlineResult r8 = r0.currentBotInlineResult
            if (r8 == 0) goto L_0x0882
            java.lang.String r8 = r8.type
            java.lang.String r9 = "video"
            boolean r8 = r8.equals(r9)
            if (r8 != 0) goto L_0x088c
            org.telegram.tgnet.TLRPC$BotInlineResult r8 = r0.currentBotInlineResult
            org.telegram.tgnet.TLRPC$Document r8 = r8.document
            boolean r8 = org.telegram.messenger.MessageObject.isVideoDocument(r8)
            if (r8 != 0) goto L_0x088c
        L_0x0882:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r8 = r0.pageBlocksAdapter
            if (r8 == 0) goto L_0x0894
            boolean r8 = r8.isVideo(r5)
            if (r8 == 0) goto L_0x0894
        L_0x088c:
            r0.playerAutoStarted = r14
            r8 = 0
            r0.onActionClick(r8)
            goto L_0x0906
        L_0x0894:
            java.util.ArrayList<java.lang.Object> r8 = r0.imagesArrLocals
            boolean r8 = r8.isEmpty()
            if (r8 != 0) goto L_0x0906
            java.util.ArrayList<java.lang.Object> r8 = r0.imagesArrLocals
            java.lang.Object r8 = r8.get(r5)
            r9 = 0
            org.telegram.ui.ChatActivity r11 = r0.parentChatActivity
            if (r11 == 0) goto L_0x08ab
            org.telegram.tgnet.TLRPC$User r10 = r11.getCurrentUser()
        L_0x08ab:
            boolean r11 = r0.isDocumentsPicker
            if (r11 != 0) goto L_0x08d7
            org.telegram.ui.ChatActivity r11 = r0.parentChatActivity
            if (r11 == 0) goto L_0x08d7
            boolean r11 = r11.isSecretChat()
            if (r11 != 0) goto L_0x08d7
            org.telegram.ui.ChatActivity r11 = r0.parentChatActivity
            boolean r11 = r11.isInScheduleMode()
            if (r11 != 0) goto L_0x08d7
            if (r10 == 0) goto L_0x08d7
            boolean r11 = r10.bot
            if (r11 != 0) goto L_0x08d7
            boolean r11 = org.telegram.messenger.UserObject.isUserSelf(r10)
            if (r11 != 0) goto L_0x08d7
            org.telegram.ui.ChatActivity r11 = r0.parentChatActivity
            boolean r11 = r11.isEditingMessageMedia()
            if (r11 != 0) goto L_0x08d7
            r11 = 1
            goto L_0x08d8
        L_0x08d7:
            r11 = 0
        L_0x08d8:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r12 = r0.placeProvider
            if (r12 == 0) goto L_0x08e3
            org.telegram.messenger.MessageObject r12 = r12.getEditingMessageObject()
            if (r12 == 0) goto L_0x08e3
            r11 = 0
        L_0x08e3:
            boolean r12 = r8 instanceof org.telegram.tgnet.TLRPC.BotInlineResult
            if (r12 == 0) goto L_0x08e9
            r11 = 0
            goto L_0x08fe
        L_0x08e9:
            boolean r12 = r8 instanceof org.telegram.messenger.MediaController.PhotoEntry
            if (r12 == 0) goto L_0x08ee
            goto L_0x08fe
        L_0x08ee:
            if (r11 == 0) goto L_0x08fe
            boolean r12 = r8 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r12 == 0) goto L_0x08fe
            r12 = r8
            org.telegram.messenger.MediaController$SearchImage r12 = (org.telegram.messenger.MediaController.SearchImage) r12
            int r12 = r12.type
            if (r12 != 0) goto L_0x08fc
            goto L_0x08fd
        L_0x08fc:
            r14 = 0
        L_0x08fd:
            r11 = r14
        L_0x08fe:
            if (r11 == 0) goto L_0x0906
            android.widget.ImageView r12 = r0.timeItem
            r13 = 0
            r12.setVisibility(r13)
        L_0x0906:
            r26.checkFullscreenButton()
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.onPhotoShow(org.telegram.messenger.MessageObject, org.telegram.tgnet.TLRPC$FileLocation, org.telegram.messenger.ImageLocation, org.telegram.messenger.ImageLocation, java.util.ArrayList, java.util.ArrayList, java.util.List, int, org.telegram.ui.PhotoViewer$PlaceProviderObject):void");
    }

    private boolean canSendMediaToParentChatActivity() {
        ChatActivity chatActivity = this.parentChatActivity;
        return chatActivity != null && (chatActivity.currentUser != null || (this.parentChatActivity.currentChat != null && !ChatObject.isNotInChat(this.parentChatActivity.currentChat) && ChatObject.canSendMedia(this.parentChatActivity.currentChat)));
    }

    private void setDoubleTapEnabled(boolean value) {
        this.doubleTapEnabled = value;
        this.gestureDetector.setOnDoubleTapListener(value ? this : null);
    }

    /* access modifiers changed from: private */
    public void setImages() {
        if (this.animationInProgress == 0) {
            setIndexToImage(this.centerImage, this.currentIndex);
            setIndexToImage(this.rightImage, this.currentIndex + 1);
            setIndexToImage(this.leftImage, this.currentIndex - 1);
        }
    }

    /* JADX WARNING: Removed duplicated region for block: B:404:0x0988  */
    /* JADX WARNING: Removed duplicated region for block: B:412:0x0a40  */
    /* JADX WARNING: Removed duplicated region for block: B:60:0x017e  */
    /* JADX WARNING: Removed duplicated region for block: B:61:0x0180  */
    /* JADX WARNING: Removed duplicated region for block: B:63:0x0183  */
    /* JADX WARNING: Removed duplicated region for block: B:64:0x018a  */
    /* JADX WARNING: Removed duplicated region for block: B:67:0x018f  */
    /* JADX WARNING: Removed duplicated region for block: B:72:0x01a6  */
    /* JADX WARNING: Removed duplicated region for block: B:81:0x01c5  */
    /* JADX WARNING: Removed duplicated region for block: B:82:0x01cd  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private void setIsAboutToSwitchToIndex(int r34, boolean r35, boolean r36) {
        /*
            r33 = this;
            r0 = r33
            r1 = r34
            r2 = r36
            if (r35 != 0) goto L_0x000d
            int r3 = r0.switchingToIndex
            if (r3 != r1) goto L_0x000d
            return
        L_0x000d:
            r3 = r36
            r0.switchingToIndex = r1
            r4 = 0
            r5 = 0
            java.lang.String r6 = r33.getFileName(r34)
            r7 = 0
            r8 = 0
            if (r2 == 0) goto L_0x0048
            int r9 = android.os.Build.VERSION.SDK_INT
            r10 = 19
            if (r9 < r10) goto L_0x0048
            android.transition.TransitionSet r9 = new android.transition.TransitionSet
            r9.<init>()
            android.transition.Fade r10 = new android.transition.Fade
            r10.<init>()
            r9.addTransition(r10)
            android.transition.ChangeBounds r10 = new android.transition.ChangeBounds
            r10.<init>()
            r9.addTransition(r10)
            r9.setOrdering(r8)
            r10 = 220(0xdc, double:1.087E-321)
            r9.setDuration(r10)
            org.telegram.ui.Components.CubicBezierInterpolator r10 = org.telegram.ui.Components.CubicBezierInterpolator.DEFAULT
            r9.setInterpolator(r10)
            android.widget.LinearLayout r10 = r0.itemsLayout
            android.transition.TransitionManager.beginDelayedTransition(r10, r9)
        L_0x0048:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r9 = r0.imagesArr
            boolean r9 = r9.isEmpty()
            java.lang.String r11 = "AttachVideo"
            java.lang.String r13 = "AttachPhoto"
            r16 = 0
            java.lang.String r10 = "Of"
            java.lang.String r14 = ""
            r15 = 1
            if (r9 != 0) goto L_0x0737
            int r9 = r0.switchingToIndex
            if (r9 < 0) goto L_0x0732
            java.util.ArrayList<org.telegram.messenger.MessageObject> r12 = r0.imagesArr
            int r12 = r12.size()
            if (r9 < r12) goto L_0x006d
            r22 = r3
            r23 = r5
            goto L_0x0736
        L_0x006d:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r9 = r0.imagesArr
            int r12 = r0.switchingToIndex
            java.lang.Object r9 = r9.get(r12)
            r7 = r9
            org.telegram.messenger.MessageObject r7 = (org.telegram.messenger.MessageObject) r7
            boolean r4 = r7.isVideo()
            boolean r9 = r7.isInvoice()
            if (r9 == 0) goto L_0x00c3
            org.telegram.ui.ActionBar.ActionBarMenuItem r12 = r0.masksItem
            r0.setItemVisible(r12, r8, r15)
            org.telegram.ui.ActionBar.ActionBarMenuItem r12 = r0.menuItem
            r15 = 6
            r12.hideSubItem(r15)
            org.telegram.ui.ActionBar.ActionBarMenuItem r12 = r0.menuItem
            r15 = 11
            r12.hideSubItem(r15)
            org.telegram.tgnet.TLRPC$Message r12 = r7.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r12 = r12.media
            java.lang.String r5 = r12.description
            r0.allowShare = r8
            android.widget.FrameLayout r12 = r0.bottomLayout
            r15 = 1111490560(0x42400000, float:48.0)
            int r8 = org.telegram.messenger.AndroidUtilities.dp(r15)
            float r8 = (float) r8
            r12.setTranslationY(r8)
            org.telegram.ui.PhotoViewer$CaptionTextViewSwitcher r8 = r0.captionTextViewSwitcher
            int r12 = org.telegram.messenger.AndroidUtilities.dp(r15)
            float r12 = (float) r12
            r8.setTranslationY(r12)
            org.telegram.ui.Components.FadingTextViewLayout r8 = r0.nameTextView
            r8.setText(r14)
            org.telegram.ui.Components.FadingTextViewLayout r8 = r0.dateTextView
            r8.setText(r14)
            r22 = r3
            r20 = r9
            r15 = r13
            goto L_0x0384
        L_0x00c3:
            boolean r8 = r7.isNewGif()
            if (r8 == 0) goto L_0x00d4
            boolean r8 = r0.allowShare
            if (r8 == 0) goto L_0x00d4
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r12 = 14
            r8.showSubItem(r12)
        L_0x00d4:
            org.telegram.ui.ChatActivity r8 = r0.parentChatActivity
            if (r8 == 0) goto L_0x00e0
            boolean r8 = r8.isInScheduleMode()
            if (r8 == 0) goto L_0x00e0
            r8 = 1
            goto L_0x00e1
        L_0x00e0:
            r8 = 0
        L_0x00e1:
            r12 = 0
            boolean r8 = r7.canDeleteMessage(r8, r12)
            if (r8 == 0) goto L_0x00f3
            int r8 = r0.slideshowMessageId
            if (r8 != 0) goto L_0x00f3
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r12 = 6
            r8.showSubItem(r12)
            goto L_0x00f9
        L_0x00f3:
            r12 = 6
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.hideSubItem(r12)
        L_0x00f9:
            int r8 = org.telegram.messenger.UserConfig.selectedAccount
            org.telegram.messenger.MessagesController r8 = org.telegram.messenger.MessagesController.getInstance(r8)
            r15 = r13
            long r12 = r7.getChatId()
            boolean r8 = r8.isChatNoForwards((long) r12)
            boolean r12 = r0.isEmbedVideo
            if (r12 == 0) goto L_0x0122
            org.telegram.ui.ActionBar.ActionBarMenuItem r12 = r0.menuItem
            r13 = 11
            r12.showSubItem(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r12 = r0.pipItem
            r22 = r3
            r3 = 1
            r13 = 0
            r0.setItemVisible(r12, r3, r13)
            r23 = r5
            r19 = r8
            goto L_0x021c
        L_0x0122:
            r22 = r3
            if (r4 == 0) goto L_0x01d5
            if (r8 == 0) goto L_0x016f
            int r3 = r0.slideshowMessageId
            if (r3 != 0) goto L_0x0141
            org.telegram.tgnet.TLRPC$Message r3 = r7.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r3 = r3.media
            org.telegram.tgnet.TLRPC$WebPage r3 = r3.webpage
            if (r3 == 0) goto L_0x0167
            org.telegram.tgnet.TLRPC$Message r3 = r7.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r3 = r3.media
            org.telegram.tgnet.TLRPC$WebPage r3 = r3.webpage
            java.lang.String r3 = r3.url
            if (r3 == 0) goto L_0x0167
            r12 = 11
            goto L_0x0171
        L_0x0141:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            r12 = 0
            java.lang.Object r3 = r3.get(r12)
            org.telegram.messenger.MessageObject r3 = (org.telegram.messenger.MessageObject) r3
            org.telegram.tgnet.TLRPC$Message r3 = r3.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r3 = r3.media
            org.telegram.tgnet.TLRPC$WebPage r3 = r3.webpage
            if (r3 == 0) goto L_0x0167
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            java.lang.Object r3 = r3.get(r12)
            org.telegram.messenger.MessageObject r3 = (org.telegram.messenger.MessageObject) r3
            org.telegram.tgnet.TLRPC$Message r3 = r3.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r3 = r3.media
            org.telegram.tgnet.TLRPC$WebPage r3 = r3.webpage
            java.lang.String r3 = r3.url
            if (r3 == 0) goto L_0x0167
            r12 = 11
            goto L_0x0171
        L_0x0167:
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r12 = 11
            r3.hideSubItem(r12)
            goto L_0x0176
        L_0x016f:
            r12 = 11
        L_0x0171:
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r3.showSubItem(r12)
        L_0x0176:
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.masksItem
            int r3 = r3.getVisibility()
            if (r3 != 0) goto L_0x0180
            r3 = 1
            goto L_0x0181
        L_0x0180:
            r3 = 0
        L_0x0181:
            if (r3 == 0) goto L_0x018a
            org.telegram.ui.ActionBar.ActionBarMenuItem r12 = r0.masksItem
            r13 = 0
            r0.setItemVisible(r12, r13, r13)
            goto L_0x018b
        L_0x018a:
            r13 = 0
        L_0x018b:
            boolean r12 = r0.pipAvailable
            if (r12 != 0) goto L_0x01a6
            org.telegram.ui.ActionBar.ActionBarMenuItem r12 = r0.pipItem
            r12.setEnabled(r13)
            org.telegram.ui.ActionBar.ActionBarMenuItem r12 = r0.pipItem
            if (r3 != 0) goto L_0x019a
            r13 = 1
            goto L_0x019b
        L_0x019a:
            r13 = 0
        L_0x019b:
            r23 = r5
            r5 = 1056964608(0x3var_, float:0.5)
            r19 = r8
            r8 = 1
            r0.setItemVisible(r12, r8, r13, r5)
            goto L_0x01b5
        L_0x01a6:
            r23 = r5
            r19 = r8
            r8 = 1
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.pipItem
            if (r3 != 0) goto L_0x01b1
            r12 = 1
            goto L_0x01b2
        L_0x01b1:
            r12 = 0
        L_0x01b2:
            r0.setItemVisible(r5, r8, r12)
        L_0x01b5:
            boolean r5 = r7.hasAttachedStickers()
            if (r5 == 0) goto L_0x01cd
            long r12 = r7.getDialogId()
            boolean r5 = org.telegram.messenger.DialogObject.isEncryptedDialog(r12)
            if (r5 != 0) goto L_0x01cd
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.menuItem
            r8 = 15
            r5.showSubItem(r8)
            goto L_0x01d4
        L_0x01cd:
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.menuItem
            r8 = 15
            r5.hideSubItem(r8)
        L_0x01d4:
            goto L_0x021c
        L_0x01d5:
            r23 = r5
            r19 = r8
            android.view.View r3 = r0.speedGap
            r5 = 8
            r3.setVisibility(r5)
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r5 = 11
            r3.hideSubItem(r5)
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.pipItem
            int r3 = r3.getVisibility()
            if (r3 != 0) goto L_0x01f1
            r3 = 1
            goto L_0x01f2
        L_0x01f1:
            r3 = 0
        L_0x01f2:
            boolean r5 = r7.hasAttachedStickers()
            if (r5 == 0) goto L_0x0204
            long r12 = r7.getDialogId()
            boolean r5 = org.telegram.messenger.DialogObject.isEncryptedDialog(r12)
            if (r5 != 0) goto L_0x0204
            r5 = 1
            goto L_0x0205
        L_0x0204:
            r5 = 0
        L_0x0205:
            if (r3 == 0) goto L_0x0212
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.pipItem
            if (r5 != 0) goto L_0x020d
            r12 = 1
            goto L_0x020e
        L_0x020d:
            r12 = 0
        L_0x020e:
            r13 = 0
            r0.setItemVisible(r8, r13, r12)
        L_0x0212:
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.masksItem
            if (r3 != 0) goto L_0x0218
            r12 = 1
            goto L_0x0219
        L_0x0218:
            r12 = 0
        L_0x0219:
            r0.setItemVisible(r8, r5, r12)
        L_0x021c:
            boolean r3 = r0.shouldMessageObjectAutoPlayed(r7)
            if (r3 != 0) goto L_0x0354
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r5 = r0.placeProvider
            int r8 = r0.switchingToIndex
            java.lang.CharSequence r5 = r5.getTitleFor(r8)
            boolean r5 = android.text.TextUtils.isEmpty(r5)
            if (r5 == 0) goto L_0x0354
            boolean r5 = r0.playerWasPlaying
            r8 = 1
            r5 = r5 ^ r8
            java.lang.String r8 = r0.nameOverride
            if (r8 == 0) goto L_0x0241
            org.telegram.ui.Components.FadingTextViewLayout r12 = r0.nameTextView
            r12.setText(r8)
            r20 = r9
            goto L_0x02df
        L_0x0241:
            org.telegram.tgnet.TLRPC$Message r8 = r7.messageOwner
            org.telegram.tgnet.TLRPC$MessageFwdHeader r8 = r8.fwd_from
            if (r8 == 0) goto L_0x025e
            org.telegram.tgnet.TLRPC$Message r8 = r7.messageOwner
            org.telegram.tgnet.TLRPC$MessageFwdHeader r8 = r8.fwd_from
            java.lang.String r8 = r8.from_name
            if (r8 == 0) goto L_0x025e
            org.telegram.ui.Components.FadingTextViewLayout r8 = r0.nameTextView
            org.telegram.tgnet.TLRPC$Message r12 = r7.messageOwner
            org.telegram.tgnet.TLRPC$MessageFwdHeader r12 = r12.fwd_from
            java.lang.String r12 = r12.from_name
            r8.setText(r12, r5)
            r20 = r9
            goto L_0x02df
        L_0x025e:
            boolean r8 = r7.isFromUser()
            if (r8 == 0) goto L_0x028c
            int r8 = r0.currentAccount
            org.telegram.messenger.MessagesController r8 = org.telegram.messenger.MessagesController.getInstance(r8)
            org.telegram.tgnet.TLRPC$Message r12 = r7.messageOwner
            org.telegram.tgnet.TLRPC$Peer r12 = r12.from_id
            long r12 = r12.user_id
            java.lang.Long r12 = java.lang.Long.valueOf(r12)
            org.telegram.tgnet.TLRPC$User r8 = r8.getUser(r12)
            if (r8 == 0) goto L_0x0284
            org.telegram.ui.Components.FadingTextViewLayout r12 = r0.nameTextView
            java.lang.String r13 = org.telegram.messenger.UserObject.getUserName(r8)
            r12.setText(r13, r5)
            goto L_0x0289
        L_0x0284:
            org.telegram.ui.Components.FadingTextViewLayout r12 = r0.nameTextView
            r12.setText(r14, r5)
        L_0x0289:
            r20 = r9
            goto L_0x02df
        L_0x028c:
            int r8 = r0.currentAccount
            org.telegram.messenger.MessagesController r8 = org.telegram.messenger.MessagesController.getInstance(r8)
            long r12 = r7.getSenderId()
            long r12 = -r12
            java.lang.Long r12 = java.lang.Long.valueOf(r12)
            org.telegram.tgnet.TLRPC$Chat r8 = r8.getChat(r12)
            boolean r12 = org.telegram.messenger.ChatObject.isChannel(r8)
            if (r12 == 0) goto L_0x02ca
            boolean r12 = r8.megagroup
            if (r12 == 0) goto L_0x02ca
            boolean r12 = r7.isForwardedChannelPost()
            if (r12 == 0) goto L_0x02ca
            int r12 = r0.currentAccount
            org.telegram.messenger.MessagesController r12 = org.telegram.messenger.MessagesController.getInstance(r12)
            org.telegram.tgnet.TLRPC$Message r13 = r7.messageOwner
            org.telegram.tgnet.TLRPC$MessageFwdHeader r13 = r13.fwd_from
            org.telegram.tgnet.TLRPC$Peer r13 = r13.from_id
            r24 = r8
            r20 = r9
            long r8 = r13.channel_id
            java.lang.Long r8 = java.lang.Long.valueOf(r8)
            org.telegram.tgnet.TLRPC$Chat r8 = r12.getChat(r8)
            goto L_0x02d0
        L_0x02ca:
            r24 = r8
            r20 = r9
            r8 = r24
        L_0x02d0:
            if (r8 == 0) goto L_0x02da
            org.telegram.ui.Components.FadingTextViewLayout r9 = r0.nameTextView
            java.lang.String r12 = r8.title
            r9.setText(r12, r5)
            goto L_0x02df
        L_0x02da:
            org.telegram.ui.Components.FadingTextViewLayout r9 = r0.nameTextView
            r9.setText(r14, r5)
        L_0x02df:
            int r8 = r0.dateOverride
            if (r8 == 0) goto L_0x02e9
            long r8 = (long) r8
            r12 = 1000(0x3e8, double:4.94E-321)
            long r8 = r8 * r12
            goto L_0x02f2
        L_0x02e9:
            org.telegram.tgnet.TLRPC$Message r8 = r7.messageOwner
            int r8 = r8.date
            long r8 = (long) r8
            r12 = 1000(0x3e8, double:4.94E-321)
            long r8 = r8 * r12
        L_0x02f2:
            r13 = 2
            java.lang.Object[] r14 = new java.lang.Object[r13]
            org.telegram.messenger.LocaleController r13 = org.telegram.messenger.LocaleController.getInstance()
            org.telegram.messenger.time.FastDateFormat r13 = r13.formatterYear
            java.util.Date r12 = new java.util.Date
            r12.<init>(r8)
            java.lang.String r12 = r13.format((java.util.Date) r12)
            r13 = 0
            r14[r13] = r12
            org.telegram.messenger.LocaleController r12 = org.telegram.messenger.LocaleController.getInstance()
            org.telegram.messenger.time.FastDateFormat r12 = r12.formatterDay
            java.util.Date r13 = new java.util.Date
            r13.<init>(r8)
            java.lang.String r12 = r12.format((java.util.Date) r13)
            r13 = 1
            r14[r13] = r12
            java.lang.String r12 = "formatDateAtTime"
            r13 = 2131628796(0x7f0e12fc, float:1.8884895E38)
            java.lang.String r12 = org.telegram.messenger.LocaleController.formatString(r12, r13, r14)
            if (r6 == 0) goto L_0x034a
            if (r4 == 0) goto L_0x034a
            org.telegram.ui.Components.FadingTextViewLayout r13 = r0.dateTextView
            r24 = r3
            r14 = 2
            java.lang.Object[] r3 = new java.lang.Object[r14]
            r14 = 0
            r3[r14] = r12
            org.telegram.tgnet.TLRPC$Document r14 = r7.getDocument()
            int r14 = r14.size
            r25 = r8
            long r8 = (long) r14
            java.lang.String r8 = org.telegram.messenger.AndroidUtilities.formatFileSize(r8)
            r9 = 1
            r3[r9] = r8
            java.lang.String r8 = "%s (%s)"
            java.lang.String r3 = java.lang.String.format(r8, r3)
            r13.setText(r3, r2)
            goto L_0x0371
        L_0x034a:
            r24 = r3
            r25 = r8
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.dateTextView
            r3.setText(r12, r5)
            goto L_0x0371
        L_0x0354:
            r24 = r3
            r20 = r9
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r3 = r0.placeProvider
            int r5 = r0.switchingToIndex
            java.lang.CharSequence r3 = r3.getTitleFor(r5)
            boolean r3 = android.text.TextUtils.isEmpty(r3)
            if (r3 != 0) goto L_0x0371
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.nameTextView
            r3.setText(r14)
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.dateTextView
            r3.setText(r14)
            goto L_0x0372
        L_0x0371:
        L_0x0372:
            org.telegram.tgnet.TLRPC$Message r3 = r7.messageOwner
            java.util.ArrayList<org.telegram.tgnet.TLRPC$TL_restrictionReason> r3 = r3.restriction_reason
            java.lang.String r3 = org.telegram.messenger.MessagesController.getRestrictionReason(r3)
            boolean r5 = android.text.TextUtils.isEmpty(r3)
            if (r5 != 0) goto L_0x0382
            r5 = r3
            goto L_0x0384
        L_0x0382:
            java.lang.CharSequence r5 = r7.caption
        L_0x0384:
            org.telegram.ui.Components.AnimatedFileDrawable r3 = r0.currentAnimation
            if (r3 == 0) goto L_0x03f7
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r8 = 1
            r3.hideSubItem(r8)
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r8 = 10
            r3.hideSubItem(r8)
            org.telegram.ui.ChatActivity r3 = r0.parentChatActivity
            if (r3 == 0) goto L_0x03a1
            boolean r3 = r3.isInScheduleMode()
            if (r3 == 0) goto L_0x03a1
            r3 = 1
            goto L_0x03a2
        L_0x03a1:
            r3 = 0
        L_0x03a2:
            r8 = 0
            boolean r3 = r7.canDeleteMessage(r3, r8)
            if (r3 != 0) goto L_0x03af
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r8 = 6
            r3.hideSubItem(r8)
        L_0x03af:
            int r3 = org.telegram.messenger.UserConfig.selectedAccount
            org.telegram.messenger.MessagesController r3 = org.telegram.messenger.MessagesController.getInstance(r3)
            long r8 = r0.currentDialogId
            long r8 = -r8
            boolean r3 = r3.isChatNoForwards((long) r8)
            r8 = 1
            r3 = r3 ^ r8
            r0.allowShare = r3
            android.widget.LinearLayout r3 = r0.bottomButtonsLayout
            r8 = 0
            r3.setVisibility(r8)
            android.widget.ImageView r3 = r0.paintButton
            r8 = 8
            r3.setVisibility(r8)
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.shareItem
            boolean r8 = r0.allowShare
            if (r8 == 0) goto L_0x03d5
            r8 = 0
            goto L_0x03d7
        L_0x03d5:
            r8 = 8
        L_0x03d7:
            r3.setVisibility(r8)
            android.widget.ImageView r3 = r0.shareButton
            boolean r8 = r0.allowShare
            if (r8 == 0) goto L_0x03e2
            r8 = 0
            goto L_0x03e4
        L_0x03e2:
            r8 = 8
        L_0x03e4:
            r3.setVisibility(r8)
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            r8 = 2131624407(0x7f0e01d7, float:1.8875993E38)
            java.lang.String r9 = "AttachGif"
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r9, r8)
            r3.setTitle(r8)
            goto L_0x0727
        L_0x03f7:
            int r3 = r0.totalImagesCount
            int r8 = r0.totalImagesCountMerge
            int r3 = r3 + r8
            if (r3 == 0) goto L_0x05ed
            boolean r3 = r0.needSearchImageInArr
            if (r3 != 0) goto L_0x05ed
            boolean r3 = r0.opennedFromMedia
            if (r3 == 0) goto L_0x053b
            int r3 = r0.startOffset
            java.util.ArrayList<org.telegram.messenger.MessageObject> r8 = r0.imagesArr
            int r8 = r8.size()
            int r3 = r3 + r8
            int r8 = r0.totalImagesCount
            int r9 = r0.totalImagesCountMerge
            int r8 = r8 + r9
            if (r3 >= r8) goto L_0x04a0
            boolean r3 = r0.loadingMoreImages
            if (r3 != 0) goto L_0x04a0
            int r3 = r0.switchingToIndex
            java.util.ArrayList<org.telegram.messenger.MessageObject> r8 = r0.imagesArr
            int r8 = r8.size()
            r9 = 5
            int r8 = r8 - r9
            if (r3 <= r8) goto L_0x04a0
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            boolean r3 = r3.isEmpty()
            if (r3 == 0) goto L_0x0430
            r3 = 0
            goto L_0x0442
        L_0x0430:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            int r8 = r3.size()
            r9 = 1
            int r8 = r8 - r9
            java.lang.Object r3 = r3.get(r8)
            org.telegram.messenger.MessageObject r3 = (org.telegram.messenger.MessageObject) r3
            int r3 = r3.getId()
        L_0x0442:
            r8 = 0
            boolean[] r9 = r0.endReached
            boolean r9 = r9[r8]
            if (r9 == 0) goto L_0x0471
            long r11 = r0.mergeDialogId
            int r9 = (r11 > r16 ? 1 : (r11 == r16 ? 0 : -1))
            if (r9 == 0) goto L_0x0471
            r8 = 1
            java.util.ArrayList<org.telegram.messenger.MessageObject> r9 = r0.imagesArr
            boolean r9 = r9.isEmpty()
            if (r9 != 0) goto L_0x0471
            java.util.ArrayList<org.telegram.messenger.MessageObject> r9 = r0.imagesArr
            int r11 = r9.size()
            r12 = 1
            int r11 = r11 - r12
            java.lang.Object r9 = r9.get(r11)
            org.telegram.messenger.MessageObject r9 = (org.telegram.messenger.MessageObject) r9
            long r11 = r9.getDialogId()
            long r13 = r0.mergeDialogId
            int r9 = (r11 > r13 ? 1 : (r11 == r13 ? 0 : -1))
            if (r9 == 0) goto L_0x0471
            r3 = 0
        L_0x0471:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r9 = r0.placeProvider
            boolean r9 = r9.loadMore()
            if (r9 != 0) goto L_0x04a0
            int r9 = r0.currentAccount
            org.telegram.messenger.MediaDataController r23 = org.telegram.messenger.MediaDataController.getInstance(r9)
            if (r8 != 0) goto L_0x0484
            long r11 = r0.currentDialogId
            goto L_0x0486
        L_0x0484:
            long r11 = r0.mergeDialogId
        L_0x0486:
            r24 = r11
            r26 = 40
            r28 = 0
            int r9 = r0.sharedMediaType
            r30 = 1
            int r11 = r0.classGuid
            r32 = 0
            r27 = r3
            r29 = r9
            r31 = r11
            r23.loadMedia(r24, r26, r27, r28, r29, r30, r31, r32)
            r9 = 1
            r0.loadingMoreImages = r9
        L_0x04a0:
            int r3 = r0.startOffset
            if (r3 <= 0) goto L_0x04ee
            int r3 = r0.switchingToIndex
            r8 = 5
            if (r3 >= r8) goto L_0x04ee
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x04ee
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            r8 = 0
            java.lang.Object r3 = r3.get(r8)
            org.telegram.messenger.MessageObject r3 = (org.telegram.messenger.MessageObject) r3
            int r3 = r3.getId()
            r8 = 0
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r9 = r0.placeProvider
            boolean r9 = r9.loadMore()
            if (r9 != 0) goto L_0x04ee
            int r9 = r0.currentAccount
            org.telegram.messenger.MediaDataController r23 = org.telegram.messenger.MediaDataController.getInstance(r9)
            if (r8 != 0) goto L_0x04d2
            long r11 = r0.currentDialogId
            goto L_0x04d4
        L_0x04d2:
            long r11 = r0.mergeDialogId
        L_0x04d4:
            r24 = r11
            r26 = 40
            r27 = 0
            int r9 = r0.sharedMediaType
            r30 = 1
            int r11 = r0.classGuid
            r32 = 0
            r28 = r3
            r29 = r9
            r31 = r11
            r23.loadMedia(r24, r26, r27, r28, r29, r30, r31, r32)
            r9 = 1
            r0.loadingMoreImages = r9
        L_0x04ee:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r3 = r0.placeProvider
            int r8 = r0.switchingToIndex
            java.lang.CharSequence r3 = r3.getTitleFor(r8)
            if (r3 == 0) goto L_0x0511
            org.telegram.ui.ActionBar.ActionBar r8 = r0.actionBar
            r8.setTitle(r3)
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r8 = r0.placeProvider
            int r9 = r0.switchingToIndex
            java.lang.CharSequence r8 = r8.getSubtitleFor(r9)
            org.telegram.ui.ActionBar.ActionBar r9 = r0.actionBar
            r9.setSubtitle(r8)
            org.telegram.ui.ActionBar.ActionBar r9 = r0.actionBar
            r11 = 1
            r9.setTitleScrollNonFitText(r11)
            goto L_0x0539
        L_0x0511:
            r11 = 1
            org.telegram.ui.ActionBar.ActionBar r8 = r0.actionBar
            r9 = 2
            java.lang.Object[] r9 = new java.lang.Object[r9]
            int r12 = r0.startOffset
            int r13 = r0.switchingToIndex
            int r12 = r12 + r13
            int r12 = r12 + r11
            java.lang.Integer r12 = java.lang.Integer.valueOf(r12)
            r13 = 0
            r9[r13] = r12
            int r12 = r0.totalImagesCount
            int r13 = r0.totalImagesCountMerge
            int r12 = r12 + r13
            java.lang.Integer r12 = java.lang.Integer.valueOf(r12)
            r9[r11] = r12
            r11 = 2131626753(0x7f0e0b01, float:1.8880751E38)
            java.lang.String r9 = org.telegram.messenger.LocaleController.formatString(r10, r11, r9)
            r8.setTitle(r9)
        L_0x0539:
            goto L_0x0670
        L_0x053b:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            int r3 = r3.size()
            int r8 = r0.totalImagesCount
            int r9 = r0.totalImagesCountMerge
            int r8 = r8 + r9
            if (r3 >= r8) goto L_0x05b9
            boolean r3 = r0.loadingMoreImages
            if (r3 != 0) goto L_0x05b9
            int r3 = r0.switchingToIndex
            r8 = 5
            if (r3 >= r8) goto L_0x05b9
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            boolean r3 = r3.isEmpty()
            if (r3 == 0) goto L_0x055b
            r3 = 0
            goto L_0x0568
        L_0x055b:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r3 = r0.imagesArr
            r8 = 0
            java.lang.Object r3 = r3.get(r8)
            org.telegram.messenger.MessageObject r3 = (org.telegram.messenger.MessageObject) r3
            int r3 = r3.getId()
        L_0x0568:
            r8 = 0
            boolean[] r9 = r0.endReached
            boolean r9 = r9[r8]
            if (r9 == 0) goto L_0x0592
            long r11 = r0.mergeDialogId
            int r9 = (r11 > r16 ? 1 : (r11 == r16 ? 0 : -1))
            if (r9 == 0) goto L_0x0592
            r8 = 1
            java.util.ArrayList<org.telegram.messenger.MessageObject> r9 = r0.imagesArr
            boolean r9 = r9.isEmpty()
            if (r9 != 0) goto L_0x0592
            java.util.ArrayList<org.telegram.messenger.MessageObject> r9 = r0.imagesArr
            r11 = 0
            java.lang.Object r9 = r9.get(r11)
            org.telegram.messenger.MessageObject r9 = (org.telegram.messenger.MessageObject) r9
            long r11 = r9.getDialogId()
            long r13 = r0.mergeDialogId
            int r9 = (r11 > r13 ? 1 : (r11 == r13 ? 0 : -1))
            if (r9 == 0) goto L_0x0592
            r3 = 0
        L_0x0592:
            int r9 = r0.currentAccount
            org.telegram.messenger.MediaDataController r23 = org.telegram.messenger.MediaDataController.getInstance(r9)
            if (r8 != 0) goto L_0x059d
            long r11 = r0.currentDialogId
            goto L_0x059f
        L_0x059d:
            long r11 = r0.mergeDialogId
        L_0x059f:
            r24 = r11
            r26 = 80
            r28 = 0
            int r9 = r0.sharedMediaType
            r30 = 1
            int r11 = r0.classGuid
            r32 = 0
            r27 = r3
            r29 = r9
            r31 = r11
            r23.loadMedia(r24, r26, r27, r28, r29, r30, r31, r32)
            r9 = 1
            r0.loadingMoreImages = r9
        L_0x05b9:
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            r8 = 2
            java.lang.Object[] r8 = new java.lang.Object[r8]
            int r9 = r0.totalImagesCount
            int r11 = r0.totalImagesCountMerge
            int r9 = r9 + r11
            java.util.ArrayList<org.telegram.messenger.MessageObject> r11 = r0.imagesArr
            int r11 = r11.size()
            int r9 = r9 - r11
            int r11 = r0.switchingToIndex
            int r9 = r9 + r11
            r11 = 1
            int r9 = r9 + r11
            java.lang.Integer r9 = java.lang.Integer.valueOf(r9)
            r12 = 0
            r8[r12] = r9
            int r9 = r0.totalImagesCount
            int r12 = r0.totalImagesCountMerge
            int r9 = r9 + r12
            java.lang.Integer r9 = java.lang.Integer.valueOf(r9)
            r8[r11] = r9
            r9 = 2131626753(0x7f0e0b01, float:1.8880751E38)
            java.lang.String r8 = org.telegram.messenger.LocaleController.formatString(r10, r9, r8)
            r3.setTitle(r8)
            goto L_0x0670
        L_0x05ed:
            int r3 = r0.slideshowMessageId
            if (r3 != 0) goto L_0x063b
            org.telegram.tgnet.TLRPC$Message r3 = r7.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r3 = r3.media
            boolean r3 = r3 instanceof org.telegram.tgnet.TLRPC.TL_messageMediaWebPage
            if (r3 == 0) goto L_0x063b
            boolean r3 = r0.isEmbedVideo
            if (r3 == 0) goto L_0x0605
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            java.lang.String r8 = "YouTube"
            r3.setTitle(r8)
            goto L_0x0670
        L_0x0605:
            boolean r3 = r7.canPreviewDocument()
            if (r3 == 0) goto L_0x061a
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            r8 = 2131624405(0x7f0e01d5, float:1.8875989E38)
            java.lang.String r9 = "AttachDocument"
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r9, r8)
            r3.setTitle(r8)
            goto L_0x0670
        L_0x061a:
            boolean r3 = r7.isVideo()
            if (r3 == 0) goto L_0x062d
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            r8 = 2131624427(0x7f0e01eb, float:1.8876033E38)
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r11, r8)
            r3.setTitle(r8)
            goto L_0x0670
        L_0x062d:
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            r9 = r15
            r8 = 2131624421(0x7f0e01e5, float:1.8876021E38)
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r9, r8)
            r3.setTitle(r8)
            goto L_0x0670
        L_0x063b:
            if (r20 == 0) goto L_0x0649
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            org.telegram.tgnet.TLRPC$Message r8 = r7.messageOwner
            org.telegram.tgnet.TLRPC$MessageMedia r8 = r8.media
            java.lang.String r8 = r8.title
            r3.setTitle(r8)
            goto L_0x0670
        L_0x0649:
            boolean r3 = r7.isVideo()
            if (r3 == 0) goto L_0x065c
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            r8 = 2131624427(0x7f0e01eb, float:1.8876033E38)
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r11, r8)
            r3.setTitle(r8)
            goto L_0x0670
        L_0x065c:
            org.telegram.tgnet.TLRPC$Document r3 = r7.getDocument()
            if (r3 == 0) goto L_0x0670
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            r8 = 2131624405(0x7f0e01d5, float:1.8875989E38)
            java.lang.String r9 = "AttachDocument"
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r9, r8)
            r3.setTitle(r8)
        L_0x0670:
            long r8 = r0.currentDialogId
            boolean r3 = org.telegram.messenger.DialogObject.isEncryptedDialog(r8)
            if (r3 == 0) goto L_0x067c
            boolean r3 = r0.isEmbedVideo
            if (r3 == 0) goto L_0x068c
        L_0x067c:
            int r3 = r0.currentAccount
            org.telegram.messenger.MessagesController r3 = org.telegram.messenger.MessagesController.getInstance(r3)
            long r8 = r7.getChatId()
            boolean r3 = r3.isChatNoForwards((long) r8)
            if (r3 == 0) goto L_0x0692
        L_0x068c:
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.sendItem
            r8 = 0
            r0.setItemVisible(r3, r8, r8)
        L_0x0692:
            boolean r3 = r0.isEmbedVideo
            if (r3 != 0) goto L_0x0710
            org.telegram.tgnet.TLRPC$Message r3 = r7.messageOwner
            int r3 = r3.ttl
            if (r3 == 0) goto L_0x06a4
            org.telegram.tgnet.TLRPC$Message r3 = r7.messageOwner
            int r3 = r3.ttl
            r8 = 3600(0xe10, float:5.045E-42)
            if (r3 < r8) goto L_0x0710
        L_0x06a4:
            int r3 = org.telegram.messenger.UserConfig.selectedAccount
            org.telegram.messenger.MessagesController r3 = org.telegram.messenger.MessagesController.getInstance(r3)
            long r8 = r7.getChatId()
            boolean r3 = r3.isChatNoForwards((long) r8)
            if (r3 == 0) goto L_0x06b5
            goto L_0x0710
        L_0x06b5:
            r3 = 1
            r0.allowShare = r3
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.showSubItem(r3)
            org.telegram.tgnet.TLRPC$Document r3 = r7.getDocument()
            if (r3 == 0) goto L_0x06d8
            boolean r3 = r7.canPreviewDocument()
            if (r3 != 0) goto L_0x06d8
            java.lang.String r3 = r7.getMimeType()
            java.lang.String r8 = "video/"
            boolean r3 = r3.startsWith(r8)
            if (r3 == 0) goto L_0x06d6
            goto L_0x06d8
        L_0x06d6:
            r15 = 0
            goto L_0x06d9
        L_0x06d8:
            r15 = 1
        L_0x06d9:
            r3 = r15
            android.widget.ImageView r8 = r0.paintButton
            if (r3 == 0) goto L_0x06e6
            boolean r9 = r33.canSendMediaToParentChatActivity()
            if (r9 == 0) goto L_0x06e6
            r9 = 0
            goto L_0x06e8
        L_0x06e6:
            r9 = 8
        L_0x06e8:
            r8.setVisibility(r9)
            android.widget.LinearLayout r8 = r0.bottomButtonsLayout
            boolean r9 = r0.videoPlayerControlVisible
            if (r9 != 0) goto L_0x06f3
            r9 = 0
            goto L_0x06f5
        L_0x06f3:
            r9 = 8
        L_0x06f5:
            r8.setVisibility(r9)
            android.widget.LinearLayout r8 = r0.bottomButtonsLayout
            int r8 = r8.getVisibility()
            if (r8 != 0) goto L_0x0708
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r9 = 10
            r8.hideSubItem(r9)
            goto L_0x0727
        L_0x0708:
            r9 = 10
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.showSubItem(r9)
            goto L_0x0727
        L_0x0710:
            r3 = 0
            r0.allowShare = r3
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r8 = 1
            r3.hideSubItem(r8)
            android.widget.LinearLayout r3 = r0.bottomButtonsLayout
            r8 = 8
            r3.setVisibility(r8)
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r8 = 10
            r3.hideSubItem(r8)
        L_0x0727:
            org.telegram.ui.Components.GroupedPhotosListView r3 = r0.groupedPhotosListView
            r3.fillList()
            r25 = r6
            r3 = r22
            goto L_0x0e1a
        L_0x0732:
            r22 = r3
            r23 = r5
        L_0x0736:
            return
        L_0x0737:
            r22 = r3
            r23 = r5
            r9 = r13
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r3 = r0.secureDocuments
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x0788
            r3 = 0
            r0.allowShare = r3
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r5 = 6
            r3.showSubItem(r5)
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r5 = 1
            r3.hideSubItem(r5)
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.nameTextView
            r3.setText(r14)
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.dateTextView
            r3.setText(r14)
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            r8 = 2
            java.lang.Object[] r8 = new java.lang.Object[r8]
            int r9 = r0.switchingToIndex
            int r9 = r9 + r5
            java.lang.Integer r9 = java.lang.Integer.valueOf(r9)
            r11 = 0
            r8[r11] = r9
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r9 = r0.secureDocuments
            int r9 = r9.size()
            java.lang.Integer r9 = java.lang.Integer.valueOf(r9)
            r8[r5] = r9
            r5 = 2131626753(0x7f0e0b01, float:1.8880751E38)
            java.lang.String r5 = org.telegram.messenger.LocaleController.formatString(r10, r5, r8)
            r3.setTitle(r5)
            r21 = r4
            r25 = r6
            goto L_0x0e14
        L_0x0788:
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r3 = r0.imagesArrLocations
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x08c1
            if (r1 < 0) goto L_0x08c0
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r3 = r0.imagesArrLocations
            int r3 = r3.size()
            if (r1 < r3) goto L_0x079c
            goto L_0x08c0
        L_0x079c:
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.nameTextView
            r3.setText(r14)
            org.telegram.ui.Components.FadingTextViewLayout r3 = r0.dateTextView
            r3.setText(r14)
            boolean r3 = r0.canEditAvatar
            r5 = 17
            r8 = 16
            if (r3 == 0) goto L_0x0811
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Photo> r3 = r0.avatarsArr
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x0811
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r3.showSubItem(r5)
            boolean r3 = r33.isCurrentAvatarSet()
            if (r3 == 0) goto L_0x07c7
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.menuItem
            r5.hideSubItem(r8)
            goto L_0x07cc
        L_0x07c7:
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.menuItem
            r5.showSubItem(r8)
        L_0x07cc:
            long r11 = r0.avatarsDialogId
            int r5 = (r11 > r16 ? 1 : (r11 == r16 ? 0 : -1))
            if (r5 <= 0) goto L_0x07d4
            r5 = 1
            goto L_0x0801
        L_0x07d4:
            int r5 = r0.currentAccount
            org.telegram.messenger.MessagesController r5 = org.telegram.messenger.MessagesController.getInstance(r5)
            long r11 = r0.avatarsDialogId
            long r11 = -r11
            java.lang.Long r8 = java.lang.Long.valueOf(r11)
            org.telegram.tgnet.TLRPC$Chat r5 = r5.getChat(r8)
            boolean r8 = r33.isCurrentAvatarSet()
            if (r8 != 0) goto L_0x07ff
            int r8 = r0.currentAccount
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Message> r11 = r0.imagesArrMessages
            java.lang.Object r11 = r11.get(r1)
            org.telegram.tgnet.TLRPC$Message r11 = (org.telegram.tgnet.TLRPC.Message) r11
            r12 = 0
            boolean r8 = org.telegram.messenger.MessageObject.canDeleteMessage(r8, r12, r11, r5)
            if (r8 == 0) goto L_0x07fd
            goto L_0x07ff
        L_0x07fd:
            r8 = 0
            goto L_0x0800
        L_0x07ff:
            r8 = 1
        L_0x0800:
            r5 = r8
        L_0x0801:
            if (r5 == 0) goto L_0x080a
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r11 = 6
            r8.showSubItem(r11)
            goto L_0x0810
        L_0x080a:
            r11 = 6
            org.telegram.ui.ActionBar.ActionBarMenuItem r8 = r0.menuItem
            r8.hideSubItem(r11)
        L_0x0810:
            goto L_0x0821
        L_0x0811:
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r3.hideSubItem(r5)
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r3.hideSubItem(r8)
            org.telegram.ui.ActionBar.ActionBarMenuItem r3 = r0.menuItem
            r5 = 6
            r3.hideSubItem(r5)
        L_0x0821:
            boolean r3 = r0.isEvent
            if (r3 == 0) goto L_0x0832
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            r5 = 2131624421(0x7f0e01e5, float:1.8876021E38)
            java.lang.String r5 = org.telegram.messenger.LocaleController.getString(r9, r5)
            r3.setTitle(r5)
            goto L_0x0858
        L_0x0832:
            org.telegram.ui.ActionBar.ActionBar r3 = r0.actionBar
            r5 = 2
            java.lang.Object[] r5 = new java.lang.Object[r5]
            int r8 = r0.switchingToIndex
            r9 = 1
            int r8 = r8 + r9
            java.lang.Integer r8 = java.lang.Integer.valueOf(r8)
            r11 = 0
            r5[r11] = r8
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r8 = r0.imagesArrLocations
            int r8 = r8.size()
            java.lang.Integer r8 = java.lang.Integer.valueOf(r8)
            r5[r9] = r8
            r8 = 2131626753(0x7f0e0b01, float:1.8880751E38)
            java.lang.String r5 = org.telegram.messenger.LocaleController.formatString(r10, r8, r5)
            r3.setTitle(r5)
        L_0x0858:
            long r8 = r0.avatarsDialogId
            int r3 = (r8 > r16 ? 1 : (r8 == r16 ? 0 : -1))
            if (r3 == 0) goto L_0x086f
            int r3 = r0.currentAccount
            org.telegram.messenger.MessagesController r3 = org.telegram.messenger.MessagesController.getInstance(r3)
            long r8 = r0.avatarsDialogId
            long r8 = -r8
            boolean r3 = r3.isChatNoForwards((long) r8)
            if (r3 == 0) goto L_0x086f
            r3 = 1
            goto L_0x0870
        L_0x086f:
            r3 = 0
        L_0x0870:
            if (r3 == 0) goto L_0x0879
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.menuItem
            r8 = 1
            r5.hideSubItem(r8)
            goto L_0x087f
        L_0x0879:
            r8 = 1
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.menuItem
            r5.showSubItem(r8)
        L_0x087f:
            if (r3 != 0) goto L_0x0883
            r15 = 1
            goto L_0x0884
        L_0x0883:
            r15 = 0
        L_0x0884:
            r0.allowShare = r15
            android.widget.ImageView r5 = r0.shareButton
            if (r15 == 0) goto L_0x088c
            r8 = 0
            goto L_0x088e
        L_0x088c:
            r8 = 8
        L_0x088e:
            r5.setVisibility(r8)
            android.widget.LinearLayout r5 = r0.bottomButtonsLayout
            boolean r8 = r0.videoPlayerControlVisible
            if (r8 != 0) goto L_0x0899
            r8 = 0
            goto L_0x089b
        L_0x0899:
            r8 = 8
        L_0x089b:
            r5.setVisibility(r8)
            android.widget.LinearLayout r5 = r0.bottomButtonsLayout
            int r5 = r5.getVisibility()
            if (r5 != 0) goto L_0x08ae
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.menuItem
            r8 = 10
            r5.hideSubItem(r8)
            goto L_0x08b5
        L_0x08ae:
            r8 = 10
            org.telegram.ui.ActionBar.ActionBarMenuItem r5 = r0.menuItem
            r5.showSubItem(r8)
        L_0x08b5:
            org.telegram.ui.Components.GroupedPhotosListView r5 = r0.groupedPhotosListView
            r5.fillList()
            r21 = r4
            r25 = r6
            goto L_0x0e14
        L_0x08c0:
            return
        L_0x08c1:
            java.util.ArrayList<java.lang.Object> r3 = r0.imagesArrLocals
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x0cea
            if (r1 < 0) goto L_0x0ce5
            java.util.ArrayList<java.lang.Object> r3 = r0.imagesArrLocals
            int r3 = r3.size()
            if (r1 < r3) goto L_0x08d9
            r21 = r4
            r25 = r6
            goto L_0x0ce9
        L_0x08d9:
            java.util.ArrayList<java.lang.Object> r3 = r0.imagesArrLocals
            java.lang.Object r3 = r3.get(r1)
            r5 = 0
            r8 = 0
            r12 = 0
            r13 = 0
            r14 = 0
            boolean r15 = r3 instanceof org.telegram.tgnet.TLRPC.BotInlineResult
            if (r15 == 0) goto L_0x090f
            r15 = r3
            org.telegram.tgnet.TLRPC$BotInlineResult r15 = (org.telegram.tgnet.TLRPC.BotInlineResult) r15
            r0.currentBotInlineResult = r15
            org.telegram.tgnet.TLRPC$Document r1 = r15.document
            if (r1 == 0) goto L_0x08f8
            org.telegram.tgnet.TLRPC$Document r1 = r15.document
            boolean r4 = org.telegram.messenger.MessageObject.isVideoDocument(r1)
            goto L_0x090b
        L_0x08f8:
            org.telegram.tgnet.TLRPC$WebDocument r1 = r15.content
            boolean r1 = r1 instanceof org.telegram.tgnet.TLRPC.TL_webDocument
            if (r1 == 0) goto L_0x0909
            java.lang.String r1 = r15.type
            r21 = r4
            java.lang.String r4 = "video"
            boolean r4 = r1.equals(r4)
            goto L_0x090b
        L_0x0909:
            r21 = r4
        L_0x090b:
            r25 = r6
            goto L_0x0bb3
        L_0x090f:
            r21 = r4
            r1 = 0
            boolean r4 = r3 instanceof org.telegram.messenger.MediaController.PhotoEntry
            if (r4 == 0) goto L_0x0923
            r4 = r3
            org.telegram.messenger.MediaController$PhotoEntry r4 = (org.telegram.messenger.MediaController.PhotoEntry) r4
            java.lang.String r15 = r4.path
            r0.currentPathObject = r15
            boolean r15 = r4.isVideo
            org.telegram.messenger.MediaController$CropState r14 = r4.cropState
            r4 = r15
            goto L_0x0946
        L_0x0923:
            boolean r4 = r3 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r4 == 0) goto L_0x0942
            r4 = r3
            org.telegram.messenger.MediaController$SearchImage r4 = (org.telegram.messenger.MediaController.SearchImage) r4
            java.lang.String r15 = r4.getPathToAttach()
            r0.currentPathObject = r15
            org.telegram.messenger.MediaController$CropState r14 = r4.cropState
            int r15 = r4.type
            r19 = r1
            r1 = 1
            if (r15 != r1) goto L_0x093d
            r1 = 1
            r4 = r21
            goto L_0x0946
        L_0x093d:
            r1 = r19
            r4 = r21
            goto L_0x0946
        L_0x0942:
            r19 = r1
            r4 = r21
        L_0x0946:
            if (r4 == 0) goto L_0x0a93
            boolean r15 = r0.isCurrentVideo
            if (r15 != 0) goto L_0x094f
            r15 = 0
            r22 = r15
        L_0x094f:
            r15 = 1
            r0.isCurrentVideo = r15
            r15 = 0
            r18 = 0
            r20 = 1065353216(0x3var_, float:1.0)
            r21 = r4
            boolean r4 = r3 instanceof org.telegram.messenger.MediaController.PhotoEntry
            if (r4 == 0) goto L_0x0977
            r4 = r3
            org.telegram.messenger.MediaController$PhotoEntry r4 = (org.telegram.messenger.MediaController.PhotoEntry) r4
            r24 = r5
            org.telegram.messenger.VideoEditedInfo r5 = r4.editedInfo
            if (r5 == 0) goto L_0x0979
            org.telegram.messenger.VideoEditedInfo r5 = r4.editedInfo
            boolean r15 = r5.muted
            org.telegram.messenger.VideoEditedInfo r5 = r4.editedInfo
            float r5 = r5.start
            r18 = r5
            org.telegram.messenger.VideoEditedInfo r5 = r4.editedInfo
            float r5 = r5.end
            r4 = r18
            goto L_0x097d
        L_0x0977:
            r24 = r5
        L_0x0979:
            r4 = r18
            r5 = r20
        L_0x097d:
            r25 = r6
            java.lang.String r6 = r0.currentPathObject
            r0.processOpenVideo(r6, r15, r4, r5)
            boolean r6 = r0.isDocumentsPicker
            if (r6 != 0) goto L_0x0a40
            int r6 = android.os.Build.VERSION.SDK_INT
            r18 = r4
            r4 = 18
            if (r6 >= r4) goto L_0x0994
            r20 = r5
            goto L_0x0a44
        L_0x0994:
            r4 = 1
            r0.showVideoTimeline(r4, r2)
            int r6 = r0.sendPhotoType
            if (r6 == r4) goto L_0x09dc
            android.widget.TextView r6 = r0.videoAvatarTooltip
            r4 = 8
            r6.setVisibility(r4)
            android.widget.ImageView r6 = r0.cropItem
            r4 = 0
            r6.setVisibility(r4)
            android.widget.ImageView r4 = r0.cropItem
            r20 = r5
            r6 = 1
            java.lang.Integer r5 = java.lang.Integer.valueOf(r6)
            r4.setTag(r5)
            android.widget.ImageView r4 = r0.rotateItem
            r5 = 8
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.rotateItem
            r6 = 0
            r4.setTag(r6)
            android.widget.ImageView r4 = r0.mirrorItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.mirrorItem
            r4.setTag(r6)
            android.widget.ImageView r4 = r0.muteItem
            r5 = 1065353216(0x3var_, float:1.0)
            r6 = 1
            org.telegram.messenger.AndroidUtilities.updateViewVisibilityAnimated(r4, r6, r5, r2)
            android.widget.ImageView r4 = r0.compressItem
            r5 = 0
            r4.setVisibility(r5)
            r6 = 0
            goto L_0x0a1e
        L_0x09dc:
            r20 = r5
            r5 = 0
            android.widget.TextView r4 = r0.videoAvatarTooltip
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.cropItem
            r6 = 8
            r4.setVisibility(r6)
            android.widget.ImageView r4 = r0.cropItem
            r6 = 0
            r4.setTag(r6)
            android.widget.ImageView r4 = r0.rotateItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.rotateItem
            r6 = 1
            java.lang.Integer r5 = java.lang.Integer.valueOf(r6)
            r4.setTag(r5)
            android.widget.ImageView r4 = r0.mirrorItem
            r5 = 0
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.mirrorItem
            java.lang.Integer r5 = java.lang.Integer.valueOf(r6)
            r4.setTag(r5)
            android.widget.ImageView r4 = r0.muteItem
            r5 = 1065353216(0x3var_, float:1.0)
            r6 = 0
            org.telegram.messenger.AndroidUtilities.updateViewVisibilityAnimated(r4, r6, r5, r2)
            android.widget.ImageView r4 = r0.compressItem
            r5 = 8
            r4.setVisibility(r5)
        L_0x0a1e:
            android.widget.ImageView r4 = r0.tuneItem
            r4.setVisibility(r6)
            android.widget.ImageView r4 = r0.tuneItem
            r5 = 1
            java.lang.Integer r6 = java.lang.Integer.valueOf(r5)
            r4.setTag(r6)
            android.widget.ImageView r4 = r0.paintItem
            r6 = 0
            r4.setVisibility(r6)
            android.widget.ImageView r4 = r0.paintItem
            java.lang.Integer r6 = java.lang.Integer.valueOf(r5)
            r4.setTag(r6)
            r5 = 0
            r6 = 8
            goto L_0x0a91
        L_0x0a40:
            r18 = r4
            r20 = r5
        L_0x0a44:
            r4 = 0
            r0.showVideoTimeline(r4, r2)
            android.widget.TextView r4 = r0.videoAvatarTooltip
            r5 = 8
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.cropItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.cropItem
            r6 = 0
            r4.setTag(r6)
            android.widget.ImageView r4 = r0.tuneItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.tuneItem
            r4.setTag(r6)
            android.widget.ImageView r4 = r0.paintItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.paintItem
            r4.setTag(r6)
            android.widget.ImageView r4 = r0.rotateItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.rotateItem
            r4.setTag(r6)
            android.widget.ImageView r4 = r0.mirrorItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.mirrorItem
            r4.setTag(r6)
            android.widget.ImageView r4 = r0.muteItem
            r5 = 0
            r6 = 1065353216(0x3var_, float:1.0)
            org.telegram.messenger.AndroidUtilities.updateViewVisibilityAnimated(r4, r5, r6, r2)
            android.widget.ImageView r4 = r0.compressItem
            r6 = 8
            r4.setVisibility(r6)
        L_0x0a91:
            goto L_0x0b62
        L_0x0a93:
            r21 = r4
            r24 = r5
            r25 = r6
            r5 = 0
            r6 = 8
            r0.showVideoTimeline(r5, r2)
            android.widget.TextView r4 = r0.videoAvatarTooltip
            r4.setVisibility(r6)
            android.widget.ImageView r4 = r0.muteItem
            r6 = 1065353216(0x3var_, float:1.0)
            org.telegram.messenger.AndroidUtilities.updateViewVisibilityAnimated(r4, r5, r6, r2)
            boolean r4 = r0.isCurrentVideo
            if (r4 == 0) goto L_0x0ab2
            r4 = 0
            r22 = r4
        L_0x0ab2:
            r0.isCurrentVideo = r5
            android.widget.ImageView r4 = r0.compressItem
            r5 = 8
            r4.setVisibility(r5)
            if (r1 != 0) goto L_0x0b2e
            int r4 = r0.sendPhotoType
            r5 = 10
            if (r4 == r5) goto L_0x0b2e
            boolean r5 = r0.isDocumentsPicker
            if (r5 == 0) goto L_0x0ac8
            goto L_0x0b2e
        L_0x0ac8:
            r5 = 4
            if (r4 == r5) goto L_0x0aee
            r5 = 5
            if (r4 != r5) goto L_0x0acf
            goto L_0x0aee
        L_0x0acf:
            android.widget.ImageView r4 = r0.paintItem
            r5 = 0
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.paintItem
            r6 = 1
            java.lang.Integer r15 = java.lang.Integer.valueOf(r6)
            r4.setTag(r15)
            android.widget.ImageView r4 = r0.tuneItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.tuneItem
            java.lang.Integer r5 = java.lang.Integer.valueOf(r6)
            r4.setTag(r5)
            goto L_0x0b05
        L_0x0aee:
            android.widget.ImageView r4 = r0.paintItem
            r5 = 8
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.paintItem
            r6 = 0
            r4.setTag(r6)
            android.widget.ImageView r4 = r0.tuneItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.tuneItem
            r4.setTag(r6)
        L_0x0b05:
            android.widget.ImageView r4 = r0.cropItem
            int r5 = r0.sendPhotoType
            r6 = 1
            if (r5 == r6) goto L_0x0b0e
            r5 = 0
            goto L_0x0b10
        L_0x0b0e:
            r5 = 8
        L_0x0b10:
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.rotateItem
            int r5 = r0.sendPhotoType
            if (r5 == r6) goto L_0x0b1c
            r5 = 8
            goto L_0x0b1d
        L_0x0b1c:
            r5 = 0
        L_0x0b1d:
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.mirrorItem
            int r5 = r0.sendPhotoType
            if (r5 == r6) goto L_0x0b29
            r5 = 8
            goto L_0x0b2a
        L_0x0b29:
            r5 = 0
        L_0x0b2a:
            r4.setVisibility(r5)
            goto L_0x0b55
        L_0x0b2e:
            android.widget.ImageView r4 = r0.paintItem
            r5 = 8
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.paintItem
            r6 = 0
            r4.setTag(r6)
            android.widget.ImageView r4 = r0.cropItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.rotateItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.mirrorItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.tuneItem
            r4.setVisibility(r5)
            android.widget.ImageView r4 = r0.tuneItem
            r5 = 0
            r4.setTag(r5)
        L_0x0b55:
            if (r2 == 0) goto L_0x0b5c
            org.telegram.ui.ActionBar.ActionBar r4 = r0.actionBar
            r4.beginDelayedTransition()
        L_0x0b5c:
            org.telegram.ui.ActionBar.ActionBar r4 = r0.actionBar
            r5 = 0
            r4.setSubtitle(r5)
        L_0x0b62:
            boolean r4 = r3 instanceof org.telegram.messenger.MediaController.PhotoEntry
            if (r4 == 0) goto L_0x0b98
            r4 = r3
            org.telegram.messenger.MediaController$PhotoEntry r4 = (org.telegram.messenger.MediaController.PhotoEntry) r4
            int r5 = r4.bucketId
            if (r5 != 0) goto L_0x0b7e
            long r5 = r4.dateTaken
            int r15 = (r5 > r16 ? 1 : (r5 == r16 ? 0 : -1))
            if (r15 != 0) goto L_0x0b7e
            java.util.ArrayList<java.lang.Object> r5 = r0.imagesArrLocals
            int r5 = r5.size()
            r6 = 1
            if (r5 != r6) goto L_0x0b7e
            r5 = 1
            goto L_0x0b7f
        L_0x0b7e:
            r5 = 0
        L_0x0b7f:
            r0.fromCamera = r5
            boolean r5 = r0.hasCaptionForAllMedia
            if (r5 == 0) goto L_0x0b88
            java.lang.CharSequence r5 = r0.captionForAllMedia
            goto L_0x0b8a
        L_0x0b88:
            java.lang.CharSequence r5 = r4.caption
        L_0x0b8a:
            int r6 = r4.ttl
            boolean r8 = r4.isFiltered
            boolean r12 = r4.isPainted
            boolean r13 = r4.isCropped
            r23 = r5
            r5 = r6
            r4 = r21
            goto L_0x0bb3
        L_0x0b98:
            boolean r4 = r3 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r4 == 0) goto L_0x0baf
            r4 = r3
            org.telegram.messenger.MediaController$SearchImage r4 = (org.telegram.messenger.MediaController.SearchImage) r4
            java.lang.CharSequence r5 = r4.caption
            int r6 = r4.ttl
            boolean r8 = r4.isFiltered
            boolean r12 = r4.isPainted
            boolean r13 = r4.isCropped
            r23 = r5
            r5 = r6
            r4 = r21
            goto L_0x0bb3
        L_0x0baf:
            r4 = r21
            r5 = r24
        L_0x0bb3:
            android.widget.FrameLayout r1 = r0.bottomLayout
            int r1 = r1.getVisibility()
            r6 = 8
            if (r1 == r6) goto L_0x0bc2
            android.widget.FrameLayout r1 = r0.bottomLayout
            r1.setVisibility(r6)
        L_0x0bc2:
            android.widget.FrameLayout r1 = r0.bottomLayout
            r6 = 0
            r1.setTag(r6)
            boolean r1 = r0.fromCamera
            if (r1 == 0) goto L_0x0be8
            if (r4 == 0) goto L_0x0bdb
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            r6 = 2131624427(0x7f0e01eb, float:1.8876033E38)
            java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r11, r6)
            r1.setTitle(r6)
            goto L_0x0c0e
        L_0x0bdb:
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            r6 = 2131624421(0x7f0e01e5, float:1.8876021E38)
            java.lang.String r6 = org.telegram.messenger.LocaleController.getString(r9, r6)
            r1.setTitle(r6)
            goto L_0x0c0e
        L_0x0be8:
            org.telegram.ui.ActionBar.ActionBar r1 = r0.actionBar
            r6 = 2
            java.lang.Object[] r9 = new java.lang.Object[r6]
            int r6 = r0.switchingToIndex
            r11 = 1
            int r6 = r6 + r11
            java.lang.Integer r6 = java.lang.Integer.valueOf(r6)
            r15 = 0
            r9[r15] = r6
            java.util.ArrayList<java.lang.Object> r6 = r0.imagesArrLocals
            int r6 = r6.size()
            java.lang.Integer r6 = java.lang.Integer.valueOf(r6)
            r9[r11] = r6
            r6 = 2131626753(0x7f0e0b01, float:1.8880751E38)
            java.lang.String r6 = org.telegram.messenger.LocaleController.formatString(r10, r6, r9)
            r1.setTitle(r6)
        L_0x0c0e:
            org.telegram.ui.ChatActivity r1 = r0.parentChatActivity
            if (r1 == 0) goto L_0x0CLASSNAME
            org.telegram.tgnet.TLRPC$Chat r1 = r1.getCurrentChat()
            if (r1 == 0) goto L_0x0CLASSNAME
            org.telegram.ui.ActionBar.ActionBar r6 = r0.actionBar
            java.lang.String r9 = r1.title
            r6.setTitle(r9)
            goto L_0x0CLASSNAME
        L_0x0CLASSNAME:
            org.telegram.ui.ChatActivity r6 = r0.parentChatActivity
            org.telegram.tgnet.TLRPC$User r6 = r6.getCurrentUser()
            if (r6 == 0) goto L_0x0CLASSNAME
            boolean r9 = r6.self
            if (r9 == 0) goto L_0x0c3b
            org.telegram.ui.ActionBar.ActionBar r9 = r0.actionBar
            r10 = 2131627603(0x7f0e0e53, float:1.8882475E38)
            java.lang.String r11 = "SavedMessages"
            java.lang.String r10 = org.telegram.messenger.LocaleController.getString(r11, r10)
            r9.setTitle(r10)
            goto L_0x0CLASSNAME
        L_0x0c3b:
            org.telegram.ui.ActionBar.ActionBar r9 = r0.actionBar
            java.lang.String r10 = r6.first_name
            java.lang.String r11 = r6.last_name
            java.lang.String r10 = org.telegram.messenger.ContactsController.formatName(r10, r11)
            r9.setTitle(r10)
        L_0x0CLASSNAME:
            int r1 = r0.sendPhotoType
            if (r1 == 0) goto L_0x0c5e
            r6 = 4
            if (r1 == r6) goto L_0x0c5e
            r6 = 2
            if (r1 == r6) goto L_0x0CLASSNAME
            r6 = 5
            if (r1 != r6) goto L_0x0c6c
        L_0x0CLASSNAME:
            java.util.ArrayList<java.lang.Object> r1 = r0.imagesArrLocals
            int r1 = r1.size()
            r6 = 1
            if (r1 <= r6) goto L_0x0c6c
        L_0x0c5e:
            org.telegram.ui.Components.CheckBox r1 = r0.checkImageView
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r6 = r0.placeProvider
            int r9 = r0.switchingToIndex
            boolean r6 = r6.isPhotoChecked(r9)
            r9 = 0
            r1.setChecked(r6, r9)
        L_0x0c6c:
            r0.updateCaptionTextForCurrentPhoto(r3)
            android.graphics.PorterDuffColorFilter r1 = new android.graphics.PorterDuffColorFilter
            java.lang.String r6 = "dialogFloatingButton"
            int r6 = r0.getThemedColor(r6)
            android.graphics.PorterDuff$Mode r9 = android.graphics.PorterDuff.Mode.MULTIPLY
            r1.<init>(r6, r9)
            android.widget.ImageView r6 = r0.timeItem
            if (r5 == 0) goto L_0x0CLASSNAME
            r9 = r1
            goto L_0x0CLASSNAME
        L_0x0CLASSNAME:
            r9 = 0
        L_0x0CLASSNAME:
            r6.setColorFilter(r9)
            android.widget.ImageView r6 = r0.paintItem
            if (r12 == 0) goto L_0x0c8c
            r9 = r1
            goto L_0x0c8d
        L_0x0c8c:
            r9 = 0
        L_0x0c8d:
            r6.setColorFilter(r9)
            android.widget.ImageView r6 = r0.cropItem
            if (r13 == 0) goto L_0x0CLASSNAME
            r9 = r1
            goto L_0x0CLASSNAME
        L_0x0CLASSNAME:
            r9 = 0
        L_0x0CLASSNAME:
            r6.setColorFilter(r9)
            android.widget.ImageView r6 = r0.tuneItem
            if (r8 == 0) goto L_0x0ca0
            r9 = r1
            goto L_0x0ca1
        L_0x0ca0:
            r9 = 0
        L_0x0ca1:
            r6.setColorFilter(r9)
            boolean r6 = r0.fromCamera
            if (r6 == 0) goto L_0x0cc3
            android.widget.ImageView r6 = r0.mirrorItem
            if (r14 == 0) goto L_0x0cbe
            boolean r9 = r0.isCurrentVideo
            if (r9 == 0) goto L_0x0cb4
            boolean r9 = r14.mirrored
            if (r9 == 0) goto L_0x0cbc
        L_0x0cb4:
            boolean r9 = r0.isCurrentVideo
            if (r9 != 0) goto L_0x0cbe
            boolean r9 = r14.mirrored
            if (r9 == 0) goto L_0x0cbe
        L_0x0cbc:
            r9 = r1
            goto L_0x0cbf
        L_0x0cbe:
            r9 = 0
        L_0x0cbf:
            r6.setColorFilter(r9)
            goto L_0x0cd1
        L_0x0cc3:
            android.widget.ImageView r6 = r0.mirrorItem
            if (r14 == 0) goto L_0x0ccd
            boolean r9 = r14.mirrored
            if (r9 == 0) goto L_0x0ccd
            r9 = r1
            goto L_0x0cce
        L_0x0ccd:
            r9 = 0
        L_0x0cce:
            r6.setColorFilter(r9)
        L_0x0cd1:
            android.widget.ImageView r6 = r0.rotateItem
            if (r14 == 0) goto L_0x0cdb
            int r9 = r14.transformRotation
            if (r9 == 0) goto L_0x0cdb
            r15 = r1
            goto L_0x0cdc
        L_0x0cdb:
            r15 = 0
        L_0x0cdc:
            r6.setColorFilter(r15)
            r3 = r22
            r5 = r23
            goto L_0x0e1a
        L_0x0ce5:
            r21 = r4
            r25 = r6
        L_0x0ce9:
            return
        L_0x0cea:
            r21 = r4
            r25 = r6
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r1 = r0.pageBlocksAdapter
            if (r1 == 0) goto L_0x0e14
            int r1 = r1.getItemsCount()
            int r3 = r0.switchingToIndex
            if (r3 < 0) goto L_0x0e13
            if (r3 < r1) goto L_0x0cfe
            goto L_0x0e13
        L_0x0cfe:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r4 = r0.pageBlocksAdapter
            org.telegram.tgnet.TLRPC$PageBlock r3 = r4.get(r3)
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r4 = r0.pageBlocksAdapter
            int r5 = r0.switchingToIndex
            java.lang.CharSequence r5 = r4.getCaption(r5)
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r4 = r0.pageBlocksAdapter
            int r6 = r0.switchingToIndex
            boolean r4 = r4.isVideo(r6)
            if (r4 == 0) goto L_0x0d4e
            int r6 = org.telegram.messenger.UserConfig.selectedAccount
            org.telegram.messenger.MessagesController r6 = org.telegram.messenger.MessagesController.getInstance(r6)
            long r12 = r0.currentDialogId
            long r12 = -r12
            boolean r6 = r6.isChatNoForwards((long) r12)
            if (r6 != 0) goto L_0x0d2d
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.menuItem
            r8 = 11
            r6.showSubItem(r8)
            goto L_0x0d34
        L_0x0d2d:
            r8 = 11
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.menuItem
            r6.hideSubItem(r8)
        L_0x0d34:
            boolean r6 = r0.pipAvailable
            if (r6 != 0) goto L_0x0d47
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.pipItem
            r8 = 0
            r6.setEnabled(r8)
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.pipItem
            r8 = 1056964608(0x3var_, float:0.5)
            r12 = 1
            r0.setItemVisible(r6, r12, r12, r8)
            goto L_0x0d5c
        L_0x0d47:
            r12 = 1
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.pipItem
            r0.setItemVisible(r6, r12, r12)
            goto L_0x0d5c
        L_0x0d4e:
            r12 = 1
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.menuItem
            r8 = 11
            r6.hideSubItem(r8)
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.pipItem
            r8 = 0
            r0.setItemVisible(r6, r8, r12)
        L_0x0d5c:
            android.widget.FrameLayout r6 = r0.bottomLayout
            int r6 = r6.getVisibility()
            r8 = 8
            if (r6 == r8) goto L_0x0d6b
            android.widget.FrameLayout r6 = r0.bottomLayout
            r6.setVisibility(r8)
        L_0x0d6b:
            android.widget.FrameLayout r6 = r0.bottomLayout
            r12 = 0
            r6.setTag(r12)
            int r6 = org.telegram.messenger.UserConfig.selectedAccount
            org.telegram.messenger.MessagesController r6 = org.telegram.messenger.MessagesController.getInstance(r6)
            long r12 = r0.currentDialogId
            long r12 = -r12
            boolean r6 = r6.isChatNoForwards((long) r12)
            r12 = 1
            r6 = r6 ^ r12
            r0.allowShare = r6
            org.telegram.ui.ActionBar.ActionBarMenuItem r12 = r0.shareItem
            if (r6 == 0) goto L_0x0d88
            r15 = 0
            goto L_0x0d8a
        L_0x0d88:
            r15 = 8
        L_0x0d8a:
            r12.setVisibility(r15)
            org.telegram.ui.Components.AnimatedFileDrawable r6 = r0.currentAnimation
            if (r6 == 0) goto L_0x0db9
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.menuItem
            r8 = 1
            r6.hideSubItem(r8)
            boolean r6 = r0.allowShare
            if (r6 == 0) goto L_0x0da3
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.menuItem
            r8 = 14
            r6.showSubItem(r8)
            goto L_0x0daa
        L_0x0da3:
            r8 = 14
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.menuItem
            r6.hideSubItem(r8)
        L_0x0daa:
            org.telegram.ui.ActionBar.ActionBar r6 = r0.actionBar
            r8 = 2131624407(0x7f0e01d7, float:1.8875993E38)
            java.lang.String r9 = "AttachGif"
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r9, r8)
            r6.setTitle(r8)
            goto L_0x0e06
        L_0x0db9:
            r6 = 1
            if (r1 != r6) goto L_0x0dda
            if (r4 == 0) goto L_0x0dcc
            org.telegram.ui.ActionBar.ActionBar r6 = r0.actionBar
            r8 = 2131624427(0x7f0e01eb, float:1.8876033E38)
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r11, r8)
            r6.setTitle(r8)
            r11 = 1
            goto L_0x0dfa
        L_0x0dcc:
            org.telegram.ui.ActionBar.ActionBar r6 = r0.actionBar
            r8 = 2131624421(0x7f0e01e5, float:1.8876021E38)
            java.lang.String r8 = org.telegram.messenger.LocaleController.getString(r9, r8)
            r6.setTitle(r8)
            r11 = 1
            goto L_0x0dfa
        L_0x0dda:
            org.telegram.ui.ActionBar.ActionBar r6 = r0.actionBar
            r8 = 2
            java.lang.Object[] r8 = new java.lang.Object[r8]
            int r9 = r0.switchingToIndex
            r11 = 1
            int r9 = r9 + r11
            java.lang.Integer r9 = java.lang.Integer.valueOf(r9)
            r12 = 0
            r8[r12] = r9
            java.lang.Integer r9 = java.lang.Integer.valueOf(r1)
            r8[r11] = r9
            r9 = 2131626753(0x7f0e0b01, float:1.8880751E38)
            java.lang.String r8 = org.telegram.messenger.LocaleController.formatString(r10, r9, r8)
            r6.setTitle(r8)
        L_0x0dfa:
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.menuItem
            r6.showSubItem(r11)
            org.telegram.ui.ActionBar.ActionBarMenuItem r6 = r0.menuItem
            r8 = 14
            r6.hideSubItem(r8)
        L_0x0e06:
            org.telegram.ui.Components.GroupedPhotosListView r6 = r0.groupedPhotosListView
            r6.fillList()
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r6 = r0.pageBlocksAdapter
            r6.updateSlideshowCell(r3)
            r3 = r22
            goto L_0x0e1a
        L_0x0e13:
            return
        L_0x0e14:
            r4 = r21
            r3 = r22
            r5 = r23
        L_0x0e1a:
            r0.setCurrentCaption(r7, r5, r3)
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.setIsAboutToSwitchToIndex(int, boolean, boolean):void");
    }

    private void showVideoTimeline(boolean show, boolean animated) {
        int i = null;
        int i2 = 0;
        if (!animated) {
            this.videoTimelineView.animate().setListener((Animator.AnimatorListener) null).cancel();
            VideoTimelinePlayView videoTimelinePlayView = this.videoTimelineView;
            if (!show) {
                i2 = 8;
            }
            videoTimelinePlayView.setVisibility(i2);
            this.videoTimelineView.setTranslationY(0.0f);
            this.videoTimelineView.setAlpha(this.pickerView.getAlpha());
        } else if (show && this.videoTimelineView.getTag() == null) {
            if (this.videoTimelineView.getVisibility() != 0) {
                this.videoTimelineView.setVisibility(0);
                this.videoTimelineView.setAlpha(this.pickerView.getAlpha());
                this.videoTimelineView.setTranslationY((float) AndroidUtilities.dp(58.0f));
            }
            ObjectAnimator objectAnimator = this.videoTimelineAnimator;
            if (objectAnimator != null) {
                objectAnimator.removeAllListeners();
                this.videoTimelineAnimator.cancel();
            }
            ObjectAnimator ofFloat = ObjectAnimator.ofFloat(this.videoTimelineView, View.TRANSLATION_Y, new float[]{this.videoTimelineView.getTranslationY(), 0.0f});
            this.videoTimelineAnimator = ofFloat;
            ofFloat.setDuration(220);
            this.videoTimelineAnimator.setInterpolator(CubicBezierInterpolator.DEFAULT);
            this.videoTimelineAnimator.start();
        } else if (!show && this.videoTimelineView.getTag() != null) {
            ObjectAnimator objectAnimator2 = this.videoTimelineAnimator;
            if (objectAnimator2 != null) {
                objectAnimator2.removeAllListeners();
                this.videoTimelineAnimator.cancel();
            }
            ObjectAnimator ofFloat2 = ObjectAnimator.ofFloat(this.videoTimelineView, View.TRANSLATION_Y, new float[]{this.videoTimelineView.getTranslationY(), (float) AndroidUtilities.dp(58.0f)});
            this.videoTimelineAnimator = ofFloat2;
            ofFloat2.addListener(new HideViewAfterAnimation(this.videoTimelineView));
            this.videoTimelineAnimator.setDuration(220);
            this.videoTimelineAnimator.setInterpolator(CubicBezierInterpolator.DEFAULT);
            this.videoTimelineAnimator.start();
        }
        VideoTimelinePlayView videoTimelinePlayView2 = this.videoTimelineView;
        if (show) {
            i = 1;
        }
        videoTimelinePlayView2.setTag(i);
    }

    public static TLRPC.FileLocation getFileLocation(ImageLocation location) {
        if (location == null) {
            return null;
        }
        return location.location;
    }

    public static String getFileLocationExt(ImageLocation location) {
        if (location == null || location.imageType != 2) {
            return null;
        }
        return "mp4";
    }

    /* access modifiers changed from: private */
    public void setImageIndex(int index) {
        setImageIndex(index, true, false);
    }

    /* JADX WARNING: Code restructure failed: missing block: B:17:0x0081, code lost:
        r14 = r0.currentMessageObject;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private void setImageIndex(int r34, boolean r35, boolean r36) {
        /*
            r33 = this;
            r0 = r33
            r1 = r34
            int r2 = r0.currentIndex
            if (r2 == r1) goto L_0x056e
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r2 = r0.placeProvider
            if (r2 != 0) goto L_0x000e
            goto L_0x056e
        L_0x000e:
            r2 = 0
            if (r35 != 0) goto L_0x001a
            org.telegram.messenger.ImageReceiver$BitmapHolder r3 = r0.currentThumb
            if (r3 == 0) goto L_0x001a
            r3.release()
            r0.currentThumb = r2
        L_0x001a:
            java.lang.String[] r3 = r0.currentFileNames
            java.lang.String r4 = r33.getFileName(r34)
            r5 = 0
            r3[r5] = r4
            java.lang.String[] r3 = r0.currentFileNames
            int r4 = r1 + 1
            java.lang.String r4 = r0.getFileName(r4)
            r6 = 1
            r3[r6] = r4
            java.lang.String[] r3 = r0.currentFileNames
            int r4 = r1 + -1
            java.lang.String r4 = r0.getFileName(r4)
            r7 = 2
            r3[r7] = r4
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r3 = r0.placeProvider
            org.telegram.messenger.MessageObject r4 = r0.currentMessageObject
            org.telegram.messenger.ImageLocation r8 = r0.currentFileLocation
            org.telegram.tgnet.TLRPC$FileLocation r8 = getFileLocation(r8)
            int r9 = r0.currentIndex
            r3.willSwitchFromPhoto(r4, r8, r9)
            long r3 = android.os.SystemClock.elapsedRealtime()
            r0.lastPhotoSetTime = r3
            int r3 = r0.currentIndex
            r0.currentIndex = r1
            r33.setIsAboutToSwitchToIndex(r34, r35, r36)
            r4 = 0
            r8 = 0
            r9 = 0
            org.telegram.ui.PhotoViewer$EditState r10 = r0.editState
            r10.reset()
            java.util.ArrayList<org.telegram.messenger.MessageObject> r10 = r0.imagesArr
            boolean r10 = r10.isEmpty()
            r11 = 8
            if (r10 != 0) goto L_0x00eb
            int r10 = r0.currentIndex
            if (r10 < 0) goto L_0x00e7
            java.util.ArrayList<org.telegram.messenger.MessageObject> r14 = r0.imagesArr
            int r14 = r14.size()
            if (r10 < r14) goto L_0x0075
            goto L_0x00e7
        L_0x0075:
            java.util.ArrayList<org.telegram.messenger.MessageObject> r10 = r0.imagesArr
            int r14 = r0.currentIndex
            java.lang.Object r10 = r10.get(r14)
            org.telegram.messenger.MessageObject r10 = (org.telegram.messenger.MessageObject) r10
            if (r35 == 0) goto L_0x0091
            org.telegram.messenger.MessageObject r14 = r0.currentMessageObject
            if (r14 == 0) goto L_0x0091
            int r14 = r14.getId()
            int r15 = r10.getId()
            if (r14 != r15) goto L_0x0091
            r14 = 1
            goto L_0x0092
        L_0x0091:
            r14 = 0
        L_0x0092:
            r8 = r14
            r0.currentMessageObject = r10
            boolean r4 = r10.isVideo()
            int r14 = r0.sharedMediaType
            if (r14 != r6) goto L_0x00c0
            boolean r14 = r10.canPreviewDocument()
            r0.canZoom = r14
            if (r14 == 0) goto L_0x00b8
            boolean r14 = r0.allowShare
            if (r14 == 0) goto L_0x00af
            org.telegram.ui.ActionBar.ActionBarMenuItem r14 = r0.menuItem
            r14.showSubItem(r6)
            goto L_0x00b4
        L_0x00af:
            org.telegram.ui.ActionBar.ActionBarMenuItem r14 = r0.menuItem
            r14.hideSubItem(r6)
        L_0x00b4:
            r0.setDoubleTapEnabled(r6)
            goto L_0x00c0
        L_0x00b8:
            org.telegram.ui.ActionBar.ActionBarMenuItem r14 = r0.menuItem
            r14.hideSubItem(r6)
            r0.setDoubleTapEnabled(r5)
        L_0x00c0:
            r14 = 19
            if (r4 != 0) goto L_0x00d9
            boolean r15 = r0.isEmbedVideo
            if (r15 == 0) goto L_0x00c9
            goto L_0x00d9
        L_0x00c9:
            org.telegram.ui.ActionBar.ActionBarMenuItem r15 = r0.menuItem
            r15.hideSubItem(r14)
            android.view.View r14 = r0.speedGap
            r14.setVisibility(r11)
            org.telegram.ui.ActionBar.ActionBarMenuItem r14 = r0.menuItem
            r14.checkHideMenuItem()
            goto L_0x00e3
        L_0x00d9:
            android.view.View r15 = r0.speedGap
            r15.setVisibility(r5)
            org.telegram.ui.ActionBar.ActionBarMenuItem r15 = r0.menuItem
            r15.showSubItem(r14)
        L_0x00e3:
            r16 = r3
            goto L_0x03df
        L_0x00e7:
            r0.closePhoto(r5, r5)
            return
        L_0x00eb:
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r10 = r0.secureDocuments
            boolean r10 = r10.isEmpty()
            if (r10 != 0) goto L_0x0110
            if (r1 < 0) goto L_0x010c
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r10 = r0.secureDocuments
            int r10 = r10.size()
            if (r1 < r10) goto L_0x00fe
            goto L_0x010c
        L_0x00fe:
            java.util.ArrayList<org.telegram.messenger.SecureDocument> r10 = r0.secureDocuments
            java.lang.Object r10 = r10.get(r1)
            org.telegram.messenger.SecureDocument r10 = (org.telegram.messenger.SecureDocument) r10
            r0.currentSecureDocument = r10
            r16 = r3
            goto L_0x03df
        L_0x010c:
            r0.closePhoto(r5, r5)
            return
        L_0x0110:
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r10 = r0.imagesArrLocations
            boolean r10 = r10.isEmpty()
            if (r10 != 0) goto L_0x016d
            if (r1 < 0) goto L_0x0167
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r10 = r0.imagesArrLocations
            int r10 = r10.size()
            if (r1 < r10) goto L_0x0125
            r16 = r3
            goto L_0x0169
        L_0x0125:
            org.telegram.messenger.ImageLocation r10 = r0.currentFileLocation
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r14 = r0.imagesArrLocations
            java.lang.Object r14 = r14.get(r1)
            org.telegram.messenger.ImageLocation r14 = (org.telegram.messenger.ImageLocation) r14
            if (r35 == 0) goto L_0x014f
            if (r10 == 0) goto L_0x014f
            if (r14 == 0) goto L_0x014f
            org.telegram.tgnet.TLRPC$TL_fileLocationToBeDeprecated r15 = r10.location
            int r15 = r15.local_id
            org.telegram.tgnet.TLRPC$TL_fileLocationToBeDeprecated r11 = r14.location
            int r11 = r11.local_id
            if (r15 != r11) goto L_0x014f
            org.telegram.tgnet.TLRPC$TL_fileLocationToBeDeprecated r11 = r10.location
            r16 = r3
            long r2 = r11.volume_id
            org.telegram.tgnet.TLRPC$TL_fileLocationToBeDeprecated r11 = r14.location
            long r12 = r11.volume_id
            int r11 = (r2 > r12 ? 1 : (r2 == r12 ? 0 : -1))
            if (r11 != 0) goto L_0x0151
            r8 = 1
            goto L_0x0151
        L_0x014f:
            r16 = r3
        L_0x0151:
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r2 = r0.imagesArrLocations
            java.lang.Object r2 = r2.get(r1)
            org.telegram.messenger.ImageLocation r2 = (org.telegram.messenger.ImageLocation) r2
            r0.currentFileLocation = r2
            java.util.ArrayList<org.telegram.messenger.ImageLocation> r2 = r0.imagesArrLocationsVideo
            java.lang.Object r2 = r2.get(r1)
            org.telegram.messenger.ImageLocation r2 = (org.telegram.messenger.ImageLocation) r2
            r0.currentFileLocationVideo = r2
            goto L_0x03df
        L_0x0167:
            r16 = r3
        L_0x0169:
            r0.closePhoto(r5, r5)
            return
        L_0x016d:
            r16 = r3
            java.util.ArrayList<java.lang.Object> r2 = r0.imagesArrLocals
            boolean r2 = r2.isEmpty()
            if (r2 != 0) goto L_0x03ae
            if (r1 < 0) goto L_0x03a9
            java.util.ArrayList<java.lang.Object> r2 = r0.imagesArrLocals
            int r2 = r2.size()
            if (r1 < r2) goto L_0x0183
            goto L_0x03a9
        L_0x0183:
            java.util.ArrayList<java.lang.Object> r2 = r0.imagesArrLocals
            java.lang.Object r2 = r2.get(r1)
            boolean r3 = r2 instanceof org.telegram.tgnet.TLRPC.BotInlineResult
            if (r3 == 0) goto L_0x01da
            r3 = r2
            org.telegram.tgnet.TLRPC$BotInlineResult r3 = (org.telegram.tgnet.TLRPC.BotInlineResult) r3
            r0.currentBotInlineResult = r3
            org.telegram.tgnet.TLRPC$Document r10 = r3.document
            if (r10 == 0) goto L_0x01a9
            org.telegram.tgnet.TLRPC$Document r10 = r3.document
            java.io.File r10 = org.telegram.messenger.FileLoader.getPathToAttach(r10)
            java.lang.String r10 = r10.getAbsolutePath()
            r0.currentPathObject = r10
            org.telegram.tgnet.TLRPC$Document r10 = r3.document
            boolean r4 = org.telegram.messenger.MessageObject.isVideoDocument(r10)
            goto L_0x01d8
        L_0x01a9:
            org.telegram.tgnet.TLRPC$Photo r10 = r3.photo
            if (r10 == 0) goto L_0x01c4
            org.telegram.tgnet.TLRPC$Photo r10 = r3.photo
            java.util.ArrayList<org.telegram.tgnet.TLRPC$PhotoSize> r10 = r10.sizes
            int r11 = org.telegram.messenger.AndroidUtilities.getPhotoSize()
            org.telegram.tgnet.TLRPC$PhotoSize r10 = org.telegram.messenger.FileLoader.getClosestPhotoSizeWithSize(r10, r11)
            java.io.File r10 = org.telegram.messenger.FileLoader.getPathToAttach(r10)
            java.lang.String r10 = r10.getAbsolutePath()
            r0.currentPathObject = r10
            goto L_0x01d8
        L_0x01c4:
            org.telegram.tgnet.TLRPC$WebDocument r10 = r3.content
            boolean r10 = r10 instanceof org.telegram.tgnet.TLRPC.TL_webDocument
            if (r10 == 0) goto L_0x01d8
            org.telegram.tgnet.TLRPC$WebDocument r10 = r3.content
            java.lang.String r10 = r10.url
            r0.currentPathObject = r10
            java.lang.String r10 = r3.type
            java.lang.String r11 = "video"
            boolean r4 = r10.equals(r11)
        L_0x01d8:
            goto L_0x02f9
        L_0x01da:
            r3 = 0
            boolean r10 = r2 instanceof org.telegram.messenger.MediaController.PhotoEntry
            if (r10 == 0) goto L_0x02a3
            r10 = r2
            org.telegram.messenger.MediaController$PhotoEntry r10 = (org.telegram.messenger.MediaController.PhotoEntry) r10
            java.lang.String r11 = r10.path
            r0.currentPathObject = r11
            if (r11 != 0) goto L_0x01ec
            r0.closePhoto(r5, r5)
            return
        L_0x01ec:
            boolean r4 = r10.isVideo
            org.telegram.ui.PhotoViewer$EditState r11 = r0.editState
            org.telegram.messenger.MediaController$SavedFilterState r12 = r10.savedFilterState
            r11.savedFilterState = r12
            org.telegram.ui.PhotoViewer$EditState r11 = r0.editState
            java.lang.String r12 = r10.paintPath
            r11.paintPath = r12
            org.telegram.ui.PhotoViewer$EditState r11 = r0.editState
            java.lang.String r12 = r10.croppedPaintPath
            r11.croppedPaintPath = r12
            org.telegram.ui.PhotoViewer$EditState r11 = r0.editState
            java.util.ArrayList r12 = r10.croppedMediaEntities
            r11.croppedMediaEntities = r12
            org.telegram.ui.PhotoViewer$EditState r11 = r0.editState
            long r12 = r10.averageDuration
            r11.averageDuration = r12
            org.telegram.ui.PhotoViewer$EditState r11 = r0.editState
            java.util.ArrayList r12 = r10.mediaEntities
            r11.mediaEntities = r12
            org.telegram.ui.PhotoViewer$EditState r11 = r0.editState
            org.telegram.messenger.MediaController$CropState r12 = r10.cropState
            r11.cropState = r12
            java.io.File r11 = new java.io.File
            java.lang.String r12 = r10.path
            r11.<init>(r12)
            android.net.Uri r9 = android.net.Uri.fromFile(r11)
            boolean r12 = r0.isDocumentsPicker
            if (r12 == 0) goto L_0x029a
            java.lang.StringBuilder r12 = new java.lang.StringBuilder
            r12.<init>()
            int r13 = r10.width
            java.lang.String r14 = ", "
            if (r13 == 0) goto L_0x025c
            int r13 = r10.height
            if (r13 == 0) goto L_0x025c
            int r13 = r12.length()
            if (r13 <= 0) goto L_0x023f
            r12.append(r14)
        L_0x023f:
            java.util.Locale r13 = java.util.Locale.US
            java.lang.Object[] r15 = new java.lang.Object[r7]
            int r7 = r10.width
            java.lang.Integer r7 = java.lang.Integer.valueOf(r7)
            r15[r5] = r7
            int r7 = r10.height
            java.lang.Integer r7 = java.lang.Integer.valueOf(r7)
            r15[r6] = r7
            java.lang.String r7 = "%dx%d"
            java.lang.String r7 = java.lang.String.format(r13, r7, r15)
            r12.append(r7)
        L_0x025c:
            boolean r7 = r10.isVideo
            if (r7 == 0) goto L_0x0272
            int r7 = r12.length()
            if (r7 <= 0) goto L_0x0269
            r12.append(r14)
        L_0x0269:
            int r7 = r10.duration
            java.lang.String r7 = org.telegram.messenger.AndroidUtilities.formatShortDuration(r7)
            r12.append(r7)
        L_0x0272:
            long r5 = r10.size
            r17 = 0
            int r15 = (r5 > r17 ? 1 : (r5 == r17 ? 0 : -1))
            if (r15 == 0) goto L_0x028c
            int r5 = r12.length()
            if (r5 <= 0) goto L_0x0283
            r12.append(r14)
        L_0x0283:
            long r5 = r10.size
            java.lang.String r5 = org.telegram.messenger.AndroidUtilities.formatFileSize(r5)
            r12.append(r5)
        L_0x028c:
            android.widget.TextView r5 = r0.docNameTextView
            java.lang.String r6 = r11.getName()
            r5.setText(r6)
            android.widget.TextView r5 = r0.docInfoTextView
            r5.setText(r12)
        L_0x029a:
            org.telegram.ui.PhotoViewer$SavedState r5 = r0.savedState
            if (r5 == 0) goto L_0x02a0
            r5 = 1
            goto L_0x02a1
        L_0x02a0:
            r5 = 0
        L_0x02a1:
            r8 = r5
        L_0x02a2:
            goto L_0x02da
        L_0x02a3:
            boolean r5 = r2 instanceof org.telegram.messenger.MediaController.SearchImage
            if (r5 == 0) goto L_0x02a2
            r5 = r2
            org.telegram.messenger.MediaController$SearchImage r5 = (org.telegram.messenger.MediaController.SearchImage) r5
            java.lang.String r6 = r5.getPathToAttach()
            r0.currentPathObject = r6
            org.telegram.ui.PhotoViewer$EditState r6 = r0.editState
            org.telegram.messenger.MediaController$SavedFilterState r10 = r5.savedFilterState
            r6.savedFilterState = r10
            org.telegram.ui.PhotoViewer$EditState r6 = r0.editState
            java.lang.String r10 = r5.paintPath
            r6.paintPath = r10
            org.telegram.ui.PhotoViewer$EditState r6 = r0.editState
            java.lang.String r10 = r5.croppedPaintPath
            r6.croppedPaintPath = r10
            org.telegram.ui.PhotoViewer$EditState r6 = r0.editState
            java.util.ArrayList r10 = r5.croppedMediaEntities
            r6.croppedMediaEntities = r10
            org.telegram.ui.PhotoViewer$EditState r6 = r0.editState
            long r10 = r5.averageDuration
            r6.averageDuration = r10
            org.telegram.ui.PhotoViewer$EditState r6 = r0.editState
            java.util.ArrayList r10 = r5.mediaEntities
            r6.mediaEntities = r10
            org.telegram.ui.PhotoViewer$EditState r6 = r0.editState
            org.telegram.messenger.MediaController$CropState r10 = r5.cropState
            r6.cropState = r10
        L_0x02da:
            boolean r5 = r2 instanceof org.telegram.messenger.MediaController.MediaEditState
            if (r5 == 0) goto L_0x02f9
            r5 = r2
            org.telegram.messenger.MediaController$MediaEditState r5 = (org.telegram.messenger.MediaController.MediaEditState) r5
            boolean r6 = r33.hasAnimatedMediaEntities()
            if (r6 == 0) goto L_0x02ec
            java.lang.String r6 = r5.imagePath
            r0.currentImagePath = r6
            goto L_0x02f9
        L_0x02ec:
            java.lang.String r6 = r5.filterPath
            if (r6 == 0) goto L_0x02f5
            java.lang.String r6 = r5.filterPath
            r0.currentImagePath = r6
            goto L_0x02f9
        L_0x02f5:
            java.lang.String r6 = r0.currentPathObject
            r0.currentImagePath = r6
        L_0x02f9:
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            if (r3 == 0) goto L_0x0374
            r3 = 1
            r0.previousHasTransform = r3
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            float r3 = r3.cropPx
            r0.previousCropPx = r3
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            float r3 = r3.cropPy
            r0.previousCropPy = r3
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            float r3 = r3.cropScale
            r0.previousCropScale = r3
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            float r3 = r3.cropRotate
            r0.previousCropRotation = r3
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            int r3 = r3.transformRotation
            r0.previousCropOrientation = r3
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            float r3 = r3.cropPw
            r0.previousCropPw = r3
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            float r3 = r3.cropPh
            r0.previousCropPh = r3
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            boolean r3 = r3.mirrored
            r0.previousCropMirrored = r3
            org.telegram.ui.Components.Crop.CropTransform r5 = r0.cropTransform
            boolean r6 = r0.previousHasTransform
            float r10 = r0.previousCropPx
            float r11 = r0.previousCropPy
            float r12 = r0.previousCropRotation
            int r14 = r0.previousCropOrientation
            float r15 = r0.previousCropScale
            r26 = 1065353216(0x3var_, float:1.0)
            r27 = 1065353216(0x3var_, float:1.0)
            float r7 = r0.previousCropPw
            float r13 = r0.previousCropPh
            r30 = 0
            r31 = 0
            r19 = r5
            r20 = r6
            r21 = r10
            r22 = r11
            r23 = r12
            r24 = r14
            r25 = r15
            r28 = r7
            r29 = r13
            r32 = r3
            r19.setViewTransform(r20, r21, r22, r23, r24, r25, r26, r27, r28, r29, r30, r31, r32)
            goto L_0x03a8
        L_0x0374:
            r3 = 0
            r0.previousHasTransform = r3
            org.telegram.ui.Components.Crop.CropTransform r3 = r0.cropTransform
            r20 = 0
            float r5 = r0.previousCropPx
            float r6 = r0.previousCropPy
            float r10 = r0.previousCropRotation
            int r11 = r0.previousCropOrientation
            float r12 = r0.previousCropScale
            r26 = 1065353216(0x3var_, float:1.0)
            r27 = 1065353216(0x3var_, float:1.0)
            float r13 = r0.previousCropPw
            float r14 = r0.previousCropPh
            r30 = 0
            r31 = 0
            boolean r15 = r0.previousCropMirrored
            r19 = r3
            r21 = r5
            r22 = r6
            r23 = r10
            r24 = r11
            r25 = r12
            r28 = r13
            r29 = r14
            r32 = r15
            r19.setViewTransform(r20, r21, r22, r23, r24, r25, r26, r27, r28, r29, r30, r31, r32)
        L_0x03a8:
            goto L_0x03df
        L_0x03a9:
            r2 = 0
            r0.closePhoto(r2, r2)
            return
        L_0x03ae:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r2 = r0.pageBlocksAdapter
            if (r2 == 0) goto L_0x03a8
            int r3 = r0.currentIndex
            if (r3 < 0) goto L_0x03da
            int r2 = r2.getItemsCount()
            if (r3 < r2) goto L_0x03bd
            goto L_0x03da
        L_0x03bd:
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r2 = r0.pageBlocksAdapter
            int r3 = r0.currentIndex
            org.telegram.tgnet.TLRPC$PageBlock r2 = r2.get(r3)
            org.telegram.tgnet.TLRPC$PageBlock r3 = r0.currentPageBlock
            if (r3 == 0) goto L_0x03cd
            if (r3 != r2) goto L_0x03cd
            r3 = 1
            goto L_0x03ce
        L_0x03cd:
            r3 = 0
        L_0x03ce:
            r8 = r3
            r0.currentPageBlock = r2
            org.telegram.ui.PhotoViewer$PageBlocksAdapter r3 = r0.pageBlocksAdapter
            int r5 = r0.currentIndex
            boolean r4 = r3.isVideo(r5)
            goto L_0x03df
        L_0x03da:
            r2 = 0
            r0.closePhoto(r2, r2)
            return
        L_0x03df:
            r33.setMenuItemIcon()
            org.telegram.ui.PhotoViewer$PlaceProviderObject r2 = r0.currentPlaceObject
            if (r2 == 0) goto L_0x03f3
            int r3 = r0.animationInProgress
            if (r3 != 0) goto L_0x03f1
            org.telegram.messenger.ImageReceiver r2 = r2.imageReceiver
            r3 = 1
            r2.setVisible(r3, r3)
            goto L_0x03f3
        L_0x03f1:
            r0.showAfterAnimation = r2
        L_0x03f3:
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r2 = r0.placeProvider
            org.telegram.messenger.MessageObject r3 = r0.currentMessageObject
            org.telegram.messenger.ImageLocation r5 = r0.currentFileLocation
            org.telegram.tgnet.TLRPC$FileLocation r5 = getFileLocation(r5)
            int r6 = r0.currentIndex
            r7 = 0
            org.telegram.ui.PhotoViewer$PlaceProviderObject r2 = r2.getPlaceForPhoto(r3, r5, r6, r7)
            r0.currentPlaceObject = r2
            if (r2 == 0) goto L_0x0415
            int r3 = r0.animationInProgress
            if (r3 != 0) goto L_0x0413
            org.telegram.messenger.ImageReceiver r2 = r2.imageReceiver
            r3 = 1
            r2.setVisible(r7, r3)
            goto L_0x0415
        L_0x0413:
            r0.hideAfterAnimation = r2
        L_0x0415:
            if (r8 != 0) goto L_0x048d
            r0.draggingDown = r7
            r2 = 0
            r0.translationX = r2
            r0.translationY = r2
            r3 = 1065353216(0x3var_, float:1.0)
            r0.scale = r3
            r0.animateToX = r2
            r0.animateToY = r2
            r0.animateToScale = r3
            r5 = 0
            r0.animationStartTime = r5
            r5 = 0
            r0.zoomAnimation = r5
            r5 = 0
            r0.imageMoveAnimation = r5
            r0.changeModeAnimation = r5
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r5 = r0.aspectRatioFrameLayout
            if (r5 == 0) goto L_0x043c
            r6 = 4
            r5.setVisibility(r6)
        L_0x043c:
            r0.pinchStartDistance = r2
            r0.pinchStartScale = r3
            r0.pinchCenterX = r2
            r0.pinchCenterY = r2
            r0.pinchStartX = r2
            r0.pinchStartY = r2
            r0.moveStartX = r2
            r0.moveStartY = r2
            r2 = 0
            r0.zooming = r2
            r0.moving = r2
            r0.paintViewTouched = r2
            r0.doubleTap = r2
            r0.invalidCoords = r2
            r3 = 1
            r0.canDragDown = r3
            r0.changingPage = r2
            r0.switchImageAfterAnimation = r2
            int r2 = r0.sharedMediaType
            if (r2 == r3) goto L_0x0484
            boolean r2 = r0.isEmbedVideo
            if (r2 != 0) goto L_0x0481
            java.util.ArrayList<java.lang.Object> r2 = r0.imagesArrLocals
            boolean r2 = r2.isEmpty()
            if (r2 == 0) goto L_0x047f
            java.lang.String[] r2 = r0.currentFileNames
            r3 = 0
            r2 = r2[r3]
            if (r2 == 0) goto L_0x0481
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r2 = r0.photoProgressViews
            r2 = r2[r3]
            int r2 = r2.backgroundState
            if (r2 == 0) goto L_0x0481
        L_0x047f:
            r2 = 1
            goto L_0x0482
        L_0x0481:
            r2 = 0
        L_0x0482:
            r0.canZoom = r2
        L_0x0484:
            float r2 = r0.scale
            r0.updateMinMax(r2)
            r7 = 0
            r0.releasePlayer(r7)
        L_0x048d:
            if (r4 == 0) goto L_0x04a2
            if (r9 == 0) goto L_0x04a2
            r0.isStreaming = r7
            int r2 = r0.sendPhotoType
            r3 = 1
            if (r2 != r3) goto L_0x049a
            r2 = 1
            goto L_0x049b
        L_0x049a:
            r2 = 0
        L_0x049b:
            org.telegram.ui.PhotoViewer$EditState r3 = r0.editState
            org.telegram.messenger.MediaController$SavedFilterState r3 = r3.savedFilterState
            r0.preparePlayer(r9, r2, r7, r3)
        L_0x04a2:
            java.util.ArrayList<java.lang.Object> r2 = r0.imagesArrLocals
            boolean r2 = r2.isEmpty()
            if (r2 != 0) goto L_0x04c0
            org.telegram.ui.Components.PaintingOverlay r2 = r0.paintingOverlay
            r3 = 0
            r2.setVisibility(r3)
            org.telegram.ui.Components.PaintingOverlay r2 = r0.paintingOverlay
            org.telegram.ui.PhotoViewer$EditState r5 = r0.editState
            java.lang.String r5 = r5.paintPath
            org.telegram.ui.PhotoViewer$EditState r6 = r0.editState
            java.util.ArrayList<org.telegram.messenger.VideoEditedInfo$MediaEntity> r6 = r6.mediaEntities
            boolean r7 = r0.isCurrentVideo
            r2.setData(r5, r6, r7, r3)
            goto L_0x04cc
        L_0x04c0:
            org.telegram.ui.Components.PaintingOverlay r2 = r0.paintingOverlay
            r3 = 8
            r2.setVisibility(r3)
            org.telegram.ui.PhotoViewer$EditState r2 = r0.editState
            r2.reset()
        L_0x04cc:
            r2 = -1
            r3 = r16
            if (r3 != r2) goto L_0x04e1
            r33.setImages()
            r2 = 0
        L_0x04d5:
            r5 = 3
            if (r2 >= r5) goto L_0x04df
            r5 = 0
            r0.checkProgress(r2, r5, r5)
            int r2 = r2 + 1
            goto L_0x04d5
        L_0x04df:
            goto L_0x056a
        L_0x04e1:
            r5 = 0
            r2 = 1
            r0.checkProgress(r5, r2, r5)
            int r2 = r0.currentIndex
            if (r3 <= r2) goto L_0x0529
            org.telegram.messenger.ImageReceiver r2 = r0.rightImage
            org.telegram.messenger.ImageReceiver r5 = r0.centerImage
            r0.rightImage = r5
            org.telegram.messenger.ImageReceiver r5 = r0.leftImage
            r0.centerImage = r5
            r0.leftImage = r2
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r5 = r0.photoProgressViews
            r6 = 0
            r7 = r5[r6]
            r10 = 2
            r11 = r5[r10]
            r5[r6] = r11
            r5[r10] = r7
            android.widget.ImageView[] r5 = r0.fullscreenButton
            r11 = r5[r6]
            r12 = r5[r10]
            r5[r6] = r12
            r5[r10] = r11
            r5 = r5[r6]
            float r10 = r11.getTranslationY()
            r5.setTranslationY(r10)
            org.telegram.messenger.ImageReceiver r5 = r0.leftImage
            int r10 = r0.currentIndex
            r12 = 1
            int r10 = r10 - r12
            r0.setIndexToImage(r5, r10)
            r33.updateAccessibilityOverlayVisibility()
            r0.checkProgress(r12, r12, r6)
            r5 = 2
            r0.checkProgress(r5, r12, r6)
            goto L_0x0569
        L_0x0529:
            if (r3 >= r2) goto L_0x0569
            org.telegram.messenger.ImageReceiver r2 = r0.leftImage
            org.telegram.messenger.ImageReceiver r5 = r0.centerImage
            r0.leftImage = r5
            org.telegram.messenger.ImageReceiver r5 = r0.rightImage
            r0.centerImage = r5
            r0.rightImage = r2
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r5 = r0.photoProgressViews
            r6 = 0
            r7 = r5[r6]
            r10 = 1
            r11 = r5[r10]
            r5[r6] = r11
            r5[r10] = r7
            android.widget.ImageView[] r5 = r0.fullscreenButton
            r11 = r5[r6]
            r12 = r5[r10]
            r5[r6] = r12
            r5[r10] = r11
            r5 = r5[r6]
            float r12 = r11.getTranslationY()
            r5.setTranslationY(r12)
            org.telegram.messenger.ImageReceiver r5 = r0.rightImage
            int r12 = r0.currentIndex
            int r12 = r12 + r10
            r0.setIndexToImage(r5, r12)
            r33.updateAccessibilityOverlayVisibility()
            r0.checkProgress(r10, r10, r6)
            r5 = 2
            r0.checkProgress(r5, r10, r6)
            goto L_0x056a
        L_0x0569:
        L_0x056a:
            r33.detectFaces()
            return
        L_0x056e:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.setImageIndex(int, boolean, boolean):void");
    }

    private void setCurrentCaption(MessageObject messageObject, CharSequence caption, boolean animated) {
        CharSequence str;
        int newCount;
        MessageObject messageObject2 = messageObject;
        boolean z = animated;
        boolean z2 = true;
        int i = 0;
        if (!this.needCaptionLayout) {
            if (this.captionScrollView == null) {
                this.captionScrollView = new CaptionScrollView(this.containerView.getContext());
                FrameLayout frameLayout = new FrameLayout(this.containerView.getContext());
                this.captionContainer = frameLayout;
                frameLayout.setClipChildren(false);
                this.captionScrollView.addView((View) this.captionContainer, new ViewGroup.LayoutParams(-1, -2));
                this.containerView.addView(this.captionScrollView, LayoutHelper.createFrame(-1, -1, 80));
            }
            if (this.captionTextViewSwitcher.getParent() != this.captionContainer) {
                this.pickerView.removeView(this.captionTextViewSwitcher);
                this.captionTextViewSwitcher.setMeasureAllChildren(true);
                this.captionContainer.addView(this.captionTextViewSwitcher, -1, -2);
                this.videoPreviewFrame.bringToFront();
            }
        } else if (this.captionTextViewSwitcher.getParent() != this.pickerView) {
            FrameLayout frameLayout2 = this.captionContainer;
            if (frameLayout2 != null) {
                frameLayout2.removeView(this.captionTextViewSwitcher);
            }
            this.captionTextViewSwitcher.setMeasureAllChildren(false);
            this.pickerView.addView(this.captionTextViewSwitcher, LayoutHelper.createFrame(-1, -2.0f, 83, 0.0f, 0.0f, 76.0f, 48.0f));
        }
        final boolean isCaptionEmpty = TextUtils.isEmpty(caption);
        final boolean isCurrentCaptionEmpty = TextUtils.isEmpty(this.captionTextViewSwitcher.getCurrentView().getText());
        CaptionTextViewSwitcher captionTextViewSwitcher2 = this.captionTextViewSwitcher;
        TextView captionTextView = z ? captionTextViewSwitcher2.getNextView() : captionTextViewSwitcher2.getCurrentView();
        if (!this.isCurrentVideo) {
            int maxLines = captionTextView.getMaxLines();
            if (maxLines == 1) {
                this.captionTextViewSwitcher.getCurrentView().setSingleLine(false);
                this.captionTextViewSwitcher.getNextView().setSingleLine(false);
            }
            if (this.needCaptionLayout) {
                newCount = AndroidUtilities.displaySize.x > AndroidUtilities.displaySize.y ? 5 : 10;
            } else {
                newCount = Integer.MAX_VALUE;
            }
            if (maxLines != newCount) {
                this.captionTextViewSwitcher.getCurrentView().setMaxLines(newCount);
                this.captionTextViewSwitcher.getNextView().setMaxLines(newCount);
                this.captionTextViewSwitcher.getCurrentView().setEllipsize((TextUtils.TruncateAt) null);
                this.captionTextViewSwitcher.getNextView().setEllipsize((TextUtils.TruncateAt) null);
            }
        } else if (captionTextView.getMaxLines() != 1) {
            this.captionTextViewSwitcher.getCurrentView().setMaxLines(1);
            this.captionTextViewSwitcher.getNextView().setMaxLines(1);
            this.captionTextViewSwitcher.getCurrentView().setSingleLine(true);
            this.captionTextViewSwitcher.getNextView().setSingleLine(true);
            this.captionTextViewSwitcher.getCurrentView().setEllipsize(TextUtils.TruncateAt.END);
            this.captionTextViewSwitcher.getNextView().setEllipsize(TextUtils.TruncateAt.END);
        }
        captionTextView.setScrollX(0);
        boolean z3 = this.needCaptionLayout;
        this.dontChangeCaptionPosition = !z3 && z && isCaptionEmpty;
        boolean withTransition = false;
        if (!z3) {
            boolean unused = this.captionScrollView.dontChangeTopMargin = false;
        }
        if (!z || Build.VERSION.SDK_INT < 19) {
            this.captionTextViewSwitcher.getCurrentView().setText((CharSequence) null);
            CaptionScrollView captionScrollView2 = this.captionScrollView;
            if (captionScrollView2 != null) {
                captionScrollView2.scrollTo(0, 0);
            }
        } else {
            withTransition = true;
            if (Build.VERSION.SDK_INT >= 23) {
                TransitionManager.endTransitions(this.needCaptionLayout ? this.pickerView : this.captionScrollView);
            }
            if (this.needCaptionLayout) {
                TransitionSet transitionSet = new TransitionSet();
                transitionSet.setOrdering(0);
                transitionSet.addTransition(new ChangeBounds());
                transitionSet.addTransition(new Fade(2));
                transitionSet.addTransition(new Fade(1));
                transitionSet.setDuration(200);
                TransitionManager.beginDelayedTransition(this.pickerView, transitionSet);
            } else {
                TransitionSet transition = new TransitionSet().addTransition(new Fade(2) {
                    public Animator onDisappear(ViewGroup sceneRoot, View view, TransitionValues startValues, TransitionValues endValues) {
                        Animator animator = super.onDisappear(sceneRoot, view, startValues, endValues);
                        if (!isCurrentCaptionEmpty && isCaptionEmpty && view == PhotoViewer.this.captionTextViewSwitcher) {
                            animator.addListener(new AnimatorListenerAdapter() {
                                public void onAnimationEnd(Animator animation) {
                                    PhotoViewer.this.captionScrollView.setVisibility(4);
                                    float unused = PhotoViewer.this.captionScrollView.backgroundAlpha = 1.0f;
                                }
                            });
                            ((ObjectAnimator) animator).addUpdateListener(new PhotoViewer$59$$ExternalSyntheticLambda0(this));
                        }
                        return animator;
                    }

                    /* renamed from: lambda$onDisappear$0$org-telegram-ui-PhotoViewer$59  reason: not valid java name */
                    public /* synthetic */ void m3628lambda$onDisappear$0$orgtelegramuiPhotoViewer$59(ValueAnimator animation) {
                        float unused = PhotoViewer.this.captionScrollView.backgroundAlpha = ((Float) animation.getAnimatedValue()).floatValue();
                        PhotoViewer.this.captionScrollView.invalidate();
                    }
                }).addTransition(new Fade(1) {
                    public Animator onAppear(ViewGroup sceneRoot, View view, TransitionValues startValues, TransitionValues endValues) {
                        Animator animator = super.onAppear(sceneRoot, view, startValues, endValues);
                        if (isCurrentCaptionEmpty && !isCaptionEmpty && view == PhotoViewer.this.captionTextViewSwitcher) {
                            animator.addListener(new AnimatorListenerAdapter() {
                                public void onAnimationEnd(Animator animation) {
                                    float unused = PhotoViewer.this.captionScrollView.backgroundAlpha = 1.0f;
                                }
                            });
                            ((ObjectAnimator) animator).addUpdateListener(new PhotoViewer$58$$ExternalSyntheticLambda0(this));
                        }
                        return animator;
                    }

                    /* renamed from: lambda$onAppear$0$org-telegram-ui-PhotoViewer$58  reason: not valid java name */
                    public /* synthetic */ void m3627lambda$onAppear$0$orgtelegramuiPhotoViewer$58(ValueAnimator animation) {
                        float unused = PhotoViewer.this.captionScrollView.backgroundAlpha = ((Float) animation.getAnimatedValue()).floatValue();
                        PhotoViewer.this.captionScrollView.invalidate();
                    }
                }).setDuration(200);
                if (!isCurrentCaptionEmpty) {
                    boolean unused2 = this.captionScrollView.dontChangeTopMargin = true;
                    transition.addTransition(new Transition() {
                        public void captureStartValues(TransitionValues transitionValues) {
                            if (transitionValues.view == PhotoViewer.this.captionScrollView) {
                                transitionValues.values.put("scrollY", Integer.valueOf(PhotoViewer.this.captionScrollView.getScrollY()));
                            }
                        }

                        public void captureEndValues(TransitionValues transitionValues) {
                            if (transitionValues.view == PhotoViewer.this.captionTextViewSwitcher) {
                                transitionValues.values.put("translationY", Integer.valueOf(PhotoViewer.this.captionScrollView.getPendingMarginTopDiff()));
                            }
                        }

                        public Animator createAnimator(ViewGroup sceneRoot, TransitionValues startValues, TransitionValues endValues) {
                            int endValue;
                            if (startValues.view == PhotoViewer.this.captionScrollView) {
                                ValueAnimator animator = ValueAnimator.ofInt(new int[]{((Integer) startValues.values.get("scrollY")).intValue(), 0});
                                animator.addListener(new AnimatorListenerAdapter() {
                                    public void onAnimationEnd(Animator animation) {
                                        PhotoViewer.this.captionTextViewSwitcher.getNextView().setText((CharSequence) null);
                                        PhotoViewer.this.captionScrollView.applyPendingTopMargin();
                                    }

                                    public void onAnimationStart(Animator animation) {
                                        PhotoViewer.this.captionScrollView.stopScrolling();
                                    }
                                });
                                animator.addUpdateListener(new PhotoViewer$60$$ExternalSyntheticLambda0(this));
                                return animator;
                            } else if (endValues.view != PhotoViewer.this.captionTextViewSwitcher || (endValue = ((Integer) endValues.values.get("translationY")).intValue()) == 0) {
                                return null;
                            } else {
                                ObjectAnimator animator2 = ObjectAnimator.ofFloat(PhotoViewer.this.captionTextViewSwitcher, View.TRANSLATION_Y, new float[]{0.0f, (float) endValue});
                                animator2.addListener(new AnimatorListenerAdapter() {
                                    public void onAnimationEnd(Animator animation) {
                                        PhotoViewer.this.captionTextViewSwitcher.setTranslationY(0.0f);
                                    }
                                });
                                return animator2;
                            }
                        }

                        /* renamed from: lambda$createAnimator$0$org-telegram-ui-PhotoViewer$60  reason: not valid java name */
                        public /* synthetic */ void m3629lambda$createAnimator$0$orgtelegramuiPhotoViewer$60(ValueAnimator a) {
                            PhotoViewer.this.captionScrollView.scrollTo(0, ((Integer) a.getAnimatedValue()).intValue());
                        }
                    });
                }
                if (isCurrentCaptionEmpty && !isCaptionEmpty) {
                    transition.addTarget(this.captionTextViewSwitcher);
                }
                TransitionManager.beginDelayedTransition(this.captionScrollView, transition);
            }
        }
        if (!isCaptionEmpty) {
            Theme.createChatResources((Context) null, true);
            if (messageObject2 == null || messageObject2.messageOwner.entities.isEmpty()) {
                str = Emoji.replaceEmoji(new SpannableStringBuilder(caption), captionTextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(20.0f), false);
            } else {
                SpannableString valueOf = SpannableString.valueOf(caption.toString());
                messageObject2.addEntitiesToText(valueOf, true, false);
                if (messageObject.isVideo()) {
                    MessageObject.addUrlsByPattern(messageObject.isOutOwner(), valueOf, false, 3, messageObject.getDuration(), false);
                }
                CharSequence charSequence = caption;
                str = Emoji.replaceEmoji(valueOf, captionTextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(20.0f), false);
            }
            this.captionTextViewSwitcher.setTag(str);
            try {
                this.captionTextViewSwitcher.setText(str, z);
                CaptionScrollView captionScrollView3 = this.captionScrollView;
                if (captionScrollView3 != null) {
                    captionScrollView3.updateTopMargin();
                }
            } catch (Exception e) {
                FileLog.e((Throwable) e);
            }
            captionTextView.setScrollY(0);
            captionTextView.setTextColor(-1);
            if (!this.isActionBarVisible || !(this.bottomLayout.getVisibility() == 0 || this.pickerView.getVisibility() == 0 || this.pageBlocksAdapter != null)) {
                z2 = false;
            }
            boolean visible = z2;
            CaptionTextViewSwitcher captionTextViewSwitcher3 = this.captionTextViewSwitcher;
            if (!visible) {
                i = 4;
            }
            captionTextViewSwitcher3.setVisibility(i);
            return;
        }
        CharSequence charSequence2 = caption;
        if (this.needCaptionLayout) {
            this.captionTextViewSwitcher.setText(LocaleController.getString("AddCaption", NUM), z);
            this.captionTextViewSwitcher.getCurrentView().setTextColor(-NUM);
            this.captionTextViewSwitcher.setTag("empty");
            this.captionTextViewSwitcher.setVisibility(0);
            return;
        }
        this.captionTextViewSwitcher.setText((CharSequence) null, z);
        this.captionTextViewSwitcher.getCurrentView().setTextColor(-1);
        CaptionTextViewSwitcher captionTextViewSwitcher4 = this.captionTextViewSwitcher;
        if (withTransition && !isCurrentCaptionEmpty) {
            z2 = false;
        }
        captionTextViewSwitcher4.setVisibility(4, z2);
        this.captionTextViewSwitcher.setTag((Object) null);
    }

    /* access modifiers changed from: private */
    public void setCaptionHwLayerEnabled(boolean enabled) {
        if (this.captionHwLayerEnabled != enabled) {
            this.captionHwLayerEnabled = enabled;
            this.captionTextViewSwitcher.setLayerType(2, (Paint) null);
            this.captionTextViewSwitcher.getCurrentView().setLayerType(2, (Paint) null);
            this.captionTextViewSwitcher.getNextView().setLayerType(2, (Paint) null);
        }
    }

    /* access modifiers changed from: private */
    public void checkProgress(int a, boolean scroll, boolean animated) {
        int index;
        MessageObject messageObject;
        boolean canAutoPlay;
        boolean canStream;
        boolean isVideo;
        File f2;
        File f1;
        boolean z;
        File var_;
        int i = a;
        boolean z2 = animated;
        int index2 = this.currentIndex;
        if (i == 1) {
            index = index2 + 1;
        } else if (i == 2) {
            index = index2 - 1;
        } else {
            index = index2;
        }
        if (this.currentFileNames[i] != null) {
            File var_ = null;
            boolean isVideo2 = false;
            if (this.currentMessageObject != null) {
                if (index < 0 || index >= this.imagesArr.size()) {
                    this.photoProgressViews[i].setBackgroundState(-1, z2, true);
                    return;
                }
                MessageObject messageObject2 = this.imagesArr.get(index);
                boolean canAutoPlay2 = shouldMessageObjectAutoPlayed(messageObject2);
                if (this.sharedMediaType != 1 || messageObject2.canPreviewDocument()) {
                    if (!TextUtils.isEmpty(messageObject2.messageOwner.attachPath)) {
                        var_ = new File(messageObject2.messageOwner.attachPath);
                    }
                    if (!(messageObject2.messageOwner.media instanceof TLRPC.TL_messageMediaWebPage) || messageObject2.messageOwner.media.webpage == null || messageObject2.messageOwner.media.webpage.document != null) {
                        var_ = FileLoader.getPathToMessage(messageObject2.messageOwner);
                    } else {
                        var_ = FileLoader.getPathToAttach(getFileLocation(index, (int[]) null), true);
                    }
                    if (messageObject2.isVideo()) {
                        f1 = var_;
                        f2 = var_;
                        isVideo = true;
                        canStream = SharedConfig.streamMedia && messageObject2.canStreamVideo() && !DialogObject.isEncryptedDialog(messageObject2.getDialogId());
                        canAutoPlay = canAutoPlay2;
                        messageObject = messageObject2;
                    } else {
                        f1 = var_;
                        f2 = var_;
                        isVideo = false;
                        canStream = false;
                        canAutoPlay = canAutoPlay2;
                        messageObject = messageObject2;
                    }
                } else {
                    this.photoProgressViews[i].setBackgroundState(-1, z2, true);
                    return;
                }
            } else if (this.currentBotInlineResult != null) {
                if (index < 0 || index >= this.imagesArrLocals.size()) {
                    this.photoProgressViews[i].setBackgroundState(-1, z2, true);
                    return;
                }
                TLRPC.BotInlineResult botInlineResult = (TLRPC.BotInlineResult) this.imagesArrLocals.get(index);
                if (botInlineResult.type.equals("video") || MessageObject.isVideoDocument(botInlineResult.document)) {
                    if (botInlineResult.document != null) {
                        var_ = FileLoader.getPathToAttach(botInlineResult.document);
                    } else if (botInlineResult.content instanceof TLRPC.TL_webDocument) {
                        var_ = new File(FileLoader.getDirectory(4), Utilities.MD5(botInlineResult.content.url) + "." + ImageLoader.getHttpUrlExtension(botInlineResult.content.url, "mp4"));
                    }
                    isVideo2 = true;
                } else if (botInlineResult.document != null) {
                    var_ = new File(FileLoader.getDirectory(3), this.currentFileNames[i]);
                } else if (botInlineResult.photo != null) {
                    var_ = new File(FileLoader.getDirectory(0), this.currentFileNames[i]);
                }
                f1 = var_;
                f2 = new File(FileLoader.getDirectory(4), this.currentFileNames[i]);
                isVideo = isVideo2;
                canStream = false;
                canAutoPlay = false;
                messageObject = null;
            } else if (this.currentFileLocation != null) {
                if (index < 0 || index >= this.imagesArrLocationsVideo.size()) {
                    this.photoProgressViews[i].setBackgroundState(-1, z2, true);
                    return;
                }
                ImageLocation location = this.imagesArrLocationsVideo.get(index);
                f1 = FileLoader.getPathToAttach(location.location, getFileLocationExt(location), this.avatarsDialogId != 0 || this.isEvent);
                f2 = null;
                isVideo = false;
                canStream = false;
                canAutoPlay = false;
                messageObject = null;
            } else if (this.currentSecureDocument != null) {
                if (index < 0) {
                    z = true;
                } else if (index >= this.secureDocuments.size()) {
                    z = true;
                } else {
                    f1 = FileLoader.getPathToAttach(this.secureDocuments.get(index), true);
                    f2 = null;
                    isVideo = false;
                    canStream = false;
                    canAutoPlay = false;
                    messageObject = null;
                }
                this.photoProgressViews[i].setBackgroundState(-1, z2, z);
                return;
            } else if (this.currentPathObject != null) {
                f1 = new File(FileLoader.getDirectory(3), this.currentFileNames[i]);
                f2 = new File(FileLoader.getDirectory(4), this.currentFileNames[i]);
                isVideo = false;
                canStream = false;
                canAutoPlay = false;
                messageObject = null;
            } else {
                PageBlocksAdapter pageBlocksAdapter2 = this.pageBlocksAdapter;
                if (pageBlocksAdapter2 != null) {
                    f1 = pageBlocksAdapter2.getFile(index);
                    f2 = null;
                    isVideo = this.pageBlocksAdapter.isVideo(index);
                    canStream = false;
                    canAutoPlay = shouldIndexAutoPlayed(index);
                    messageObject = null;
                } else {
                    f1 = null;
                    f2 = null;
                    isVideo = false;
                    canStream = false;
                    canAutoPlay = false;
                    messageObject = null;
                }
            }
            File f1Final = f1;
            File f2Final = f2;
            MessageObject messageObjectFinal = messageObject;
            boolean canStreamFinal = canStream;
            boolean canAutoPlayFinal = (i != 0 || !this.dontAutoPlay) && canAutoPlay;
            File file = f1;
            PhotoViewer$$ExternalSyntheticLambda45 photoViewer$$ExternalSyntheticLambda45 = r0;
            File file2 = f2;
            DispatchQueue dispatchQueue = Utilities.globalQueue;
            PhotoViewer$$ExternalSyntheticLambda45 photoViewer$$ExternalSyntheticLambda452 = new PhotoViewer$$ExternalSyntheticLambda45(this, f1Final, f2Final, a, messageObjectFinal, canStreamFinal, isVideo, canAutoPlayFinal, animated);
            dispatchQueue.postRunnable(photoViewer$$ExternalSyntheticLambda45);
            return;
        }
        boolean isLocalVideo = false;
        if (!this.imagesArrLocals.isEmpty() && index >= 0 && index < this.imagesArrLocals.size()) {
            Object object = this.imagesArrLocals.get(index);
            if (object instanceof MediaController.PhotoEntry) {
                isLocalVideo = ((MediaController.PhotoEntry) object).isVideo;
            }
        }
        if (isLocalVideo) {
            this.photoProgressViews[i].setBackgroundState(3, z2, true);
        } else {
            this.photoProgressViews[i].setBackgroundState(-1, z2, true);
        }
    }

    /* renamed from: lambda$checkProgress$60$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3555lambda$checkProgress$60$orgtelegramuiPhotoViewer(File f1Final, File f2Final, int a, MessageObject messageObjectFinal, boolean canStreamFinal, boolean isVideoFinal, boolean canAutoPlayFinal, boolean animated) {
        boolean exists;
        ChatActivity chatActivity;
        TLRPC.Document document;
        MessageObject messageObject = messageObjectFinal;
        boolean exists2 = false;
        if (f1Final != null) {
            exists2 = f1Final.exists();
        }
        if (exists2 || f2Final == null) {
            exists = exists2;
        } else {
            exists = f2Final.exists();
        }
        if (!exists && a != 0 && messageObject != null && canStreamFinal && DownloadController.getInstance(this.currentAccount).canDownloadMedia(messageObject.messageOwner) != 0 && (((chatActivity = this.parentChatActivity) == null || chatActivity.getCurrentEncryptedChat() == null) && !messageObjectFinal.shouldEncryptPhotoOrVideo() && (document = messageObjectFinal.getDocument()) != null)) {
            FileLoader.getInstance(this.currentAccount).loadFile(document, messageObject, 0, 10);
        }
        AndroidUtilities.runOnUIThread(new PhotoViewer$$ExternalSyntheticLambda46(this, f1Final, f2Final, exists, canStreamFinal, a, isVideoFinal, canAutoPlayFinal, animated));
    }

    /* renamed from: lambda$checkProgress$59$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3554lambda$checkProgress$59$orgtelegramuiPhotoViewer(File f1Final, File f2Final, boolean existsFinal, boolean canStreamFinal, int a, boolean isVideoFinal, boolean canAutoPlayFinal, boolean animated) {
        boolean z = true;
        if (!(f1Final == null && f2Final == null) && (existsFinal || canStreamFinal)) {
            if (a != 0 || !this.isPlaying) {
                if (!isVideoFinal || (canAutoPlayFinal && (a != 0 || !this.playerWasPlaying))) {
                    this.photoProgressViews[a].setBackgroundState(-1, animated, true);
                } else {
                    this.photoProgressViews[a].setBackgroundState(3, animated, true);
                }
            }
            if (a == 0) {
                if (existsFinal) {
                    this.menuItem.hideSubItem(7);
                } else if (!FileLoader.getInstance(this.currentAccount).isLoadingFile(this.currentFileNames[a])) {
                    this.menuItem.hideSubItem(7);
                } else {
                    this.menuItem.showSubItem(7);
                }
            }
        } else {
            if (!isVideoFinal) {
                this.photoProgressViews[a].setBackgroundState(0, animated, true);
            } else if (!FileLoader.getInstance(this.currentAccount).isLoadingFile(this.currentFileNames[a])) {
                this.photoProgressViews[a].setBackgroundState(2, false, true);
            } else {
                this.photoProgressViews[a].setBackgroundState(1, false, true);
            }
            Float progress = ImageLoader.getInstance().getFileProgress(this.currentFileNames[a]);
            if (progress == null) {
                progress = Float.valueOf(0.0f);
            }
            this.photoProgressViews[a].setProgress(progress.floatValue(), false);
        }
        if (a == 0) {
            if (this.isEmbedVideo || (this.imagesArrLocals.isEmpty() && (this.currentFileNames[0] == null || this.photoProgressViews[0].backgroundState == 0))) {
                z = false;
            }
            this.canZoom = z;
        }
    }

    public int getSelectiongLength() {
        PhotoViewerCaptionEnterView photoViewerCaptionEnterView = this.captionEditText;
        if (photoViewerCaptionEnterView != null) {
            return photoViewerCaptionEnterView.getSelectionLength();
        }
        return 0;
    }

    private void setIndexToImage(ImageReceiver imageReceiver, int index) {
        MessageObject messageObject;
        ImageReceiver.BitmapHolder placeHolder;
        TLObject photoObject;
        TLRPC.PhotoSize thumbLocation;
        TLRPC.PhotoSize thumbLocation2;
        Object parentObject;
        ImageLocation videoThumb;
        String filter;
        ImageLocation imageLocation;
        TLRPC.PhotoSize thumbLocation3;
        TLObject photoObject2;
        ImageLocation imageLocation2;
        ImageReceiver.BitmapHolder placeHolder2;
        ImageReceiver.BitmapHolder placeHolder3;
        ImageReceiver.BitmapHolder placeHolder4;
        ImageReceiver.BitmapHolder placeHolder5;
        int cacheType;
        boolean isVideo;
        String filter2;
        int imageSize;
        ImageLocation videoThumb2;
        WebFile webDocument;
        String path;
        ImageReceiver.BitmapHolder placeHolder6;
        TLRPC.Document document;
        TLRPC.PhotoSize photo;
        TLObject tLObject;
        Drawable drawable;
        Activity activity;
        Drawable drawable2;
        Drawable drawable3;
        Activity activity2;
        Drawable drawable4;
        TLRPC.PhotoSize thumb;
        ImageLocation imageLocation3;
        String filter3;
        ImageReceiver.BitmapHolder placeHolder7;
        ImageReceiver imageReceiver2 = imageReceiver;
        int i = index;
        imageReceiver2.setOrientation(0, false);
        if (!this.secureDocuments.isEmpty()) {
            if (i >= 0 && i < this.secureDocuments.size()) {
                SecureDocument secureDocument = this.secureDocuments.get(i);
                int photoSize = (int) (((float) AndroidUtilities.getPhotoSize()) / AndroidUtilities.density);
                ImageReceiver.BitmapHolder placeHolder8 = null;
                if (this.currentThumb != null && imageReceiver2 == this.centerImage) {
                    placeHolder8 = this.currentThumb;
                }
                if (placeHolder8 == null) {
                    placeHolder7 = this.placeProvider.getThumbForPhoto((MessageObject) null, (TLRPC.FileLocation) null, i);
                } else {
                    placeHolder7 = placeHolder8;
                }
                SecureDocument document2 = this.secureDocuments.get(i);
                int imageSize2 = document2.secureFile.size;
                int i2 = imageSize2;
                SecureDocument secureDocument2 = document2;
                imageReceiver.setImage(ImageLocation.getForSecureDocument(document2), "d", (ImageLocation) null, (String) null, placeHolder7 != null ? new BitmapDrawable(placeHolder7.bitmap) : null, imageSize2, (String) null, (Object) null, 0);
            }
        } else if (this.imagesArrLocals.isEmpty()) {
            PageBlocksAdapter pageBlocksAdapter2 = this.pageBlocksAdapter;
            if (pageBlocksAdapter2 != null) {
                int[] size = new int[1];
                TLObject media = pageBlocksAdapter2.getMedia(i);
                TLRPC.PhotoSize fileLocation = this.pageBlocksAdapter.getFileLocation(media, size);
                if (fileLocation != null) {
                    if (media instanceof TLRPC.Photo) {
                        TLRPC.Photo photo2 = (TLRPC.Photo) media;
                        if (this.currentThumb == null || imageReceiver2 != this.centerImage) {
                            placeHolder5 = null;
                        } else {
                            placeHolder5 = this.currentThumb;
                        }
                        if (size[0] == 0) {
                            size[0] = -1;
                        }
                        TLRPC.PhotoSize thumbLocation4 = FileLoader.getClosestPhotoSizeWithSize(photo2.sizes, 80);
                        TLRPC.PhotoSize photoSize2 = thumbLocation4;
                        ImageReceiver.BitmapHolder bitmapHolder = placeHolder5;
                        TLRPC.Photo photo3 = photo2;
                        imageReceiver.setImage(ImageLocation.getForPhoto(fileLocation, photo2), (String) null, ImageLocation.getForPhoto(thumbLocation4, photo2), "b", placeHolder5 != null ? new BitmapDrawable(placeHolder5.bitmap) : null, size[0], (String) null, this.pageBlocksAdapter.getParentObject(), 1);
                    } else if (!this.pageBlocksAdapter.isVideo(i)) {
                        AnimatedFileDrawable animatedFileDrawable = this.currentAnimation;
                        if (animatedFileDrawable != null) {
                            imageReceiver2.setImageBitmap((Drawable) animatedFileDrawable);
                            this.currentAnimation.addSecondParentView(this.containerView);
                        }
                    } else if (!(fileLocation.location instanceof TLRPC.TL_fileLocationUnavailable)) {
                        if (this.currentThumb == null || imageReceiver2 != this.centerImage) {
                            placeHolder4 = null;
                        } else {
                            placeHolder4 = this.currentThumb;
                        }
                        ImageReceiver.BitmapHolder bitmapHolder2 = placeHolder4;
                        imageReceiver.setImage((ImageLocation) null, (String) null, placeHolder4 == null ? ImageLocation.getForDocument(fileLocation, (TLRPC.Document) media) : null, "b", placeHolder4 != null ? new BitmapDrawable(placeHolder4.bitmap) : null, 0, (String) null, this.pageBlocksAdapter.getParentObject(), 1);
                    } else {
                        imageReceiver2.setImageBitmap(this.parentActivity.getResources().getDrawable(NUM));
                    }
                } else if (size[0] == 0) {
                    imageReceiver2.setImageBitmap((Bitmap) null);
                } else {
                    imageReceiver2.setImageBitmap(this.parentActivity.getResources().getDrawable(NUM));
                }
            } else {
                if (this.imagesArr.isEmpty() || i < 0 || i >= this.imagesArr.size()) {
                    messageObject = null;
                } else {
                    imageReceiver2.setShouldGenerateQualityThumb(true);
                    messageObject = this.imagesArr.get(i);
                }
                if (messageObject != null) {
                    if (!TextUtils.isEmpty(MessagesController.getRestrictionReason(messageObject.messageOwner.restriction_reason))) {
                        imageReceiver2.setImageBitmap(this.parentActivity.getResources().getDrawable(NUM));
                        return;
                    } else if (!messageObject.isVideo()) {
                        AnimatedFileDrawable animatedFileDrawable2 = this.currentAnimation;
                        if (animatedFileDrawable2 != null) {
                            animatedFileDrawable2.addSecondParentView(this.containerView);
                            imageReceiver2.setImageBitmap((Drawable) this.currentAnimation);
                            return;
                        } else if (this.sharedMediaType == 1) {
                            if (messageObject.canPreviewDocument()) {
                                TLRPC.Document document3 = messageObject.getDocument();
                                imageReceiver2.setNeedsQualityThumb(true);
                                if (this.currentThumb == null || imageReceiver2 != this.centerImage) {
                                    placeHolder2 = null;
                                } else {
                                    placeHolder2 = this.currentThumb;
                                }
                                TLRPC.PhotoSize thumbLocation5 = FileLoader.getClosestPhotoSizeWithSize(messageObject.photoThumbs, 100);
                                int size2 = (int) (2048.0f / AndroidUtilities.density);
                                int i3 = size2;
                                TLRPC.PhotoSize photoSize3 = thumbLocation5;
                                ImageReceiver.BitmapHolder bitmapHolder3 = placeHolder2;
                                imageReceiver.setImage(ImageLocation.getForDocument(document3), String.format(Locale.US, "%d_%d", new Object[]{Integer.valueOf(size2), Integer.valueOf(size2)}), placeHolder2 == null ? ImageLocation.getForDocument(thumbLocation5, document3) : null, "b", placeHolder2 != null ? new BitmapDrawable(placeHolder2.bitmap) : null, document3.size, (String) null, messageObject, 0);
                                return;
                            }
                            imageReceiver2.setImageBitmap((Drawable) new OtherDocumentPlaceholderDrawable(this.parentActivity, this.containerView, messageObject));
                            return;
                        }
                    } else if (messageObject.photoThumbs == null || messageObject.photoThumbs.isEmpty()) {
                        imageReceiver2.setImageBitmap(this.parentActivity.getResources().getDrawable(NUM));
                        return;
                    } else {
                        if (this.currentThumb == null || imageReceiver2 != this.centerImage) {
                            placeHolder3 = null;
                        } else {
                            placeHolder3 = this.currentThumb;
                        }
                        TLRPC.PhotoSize thumbLocation6 = FileLoader.getClosestPhotoSizeWithSize(messageObject.photoThumbs, 320);
                        imageReceiver2.setNeedsQualityThumb(thumbLocation6.w < 100 && thumbLocation6.h < 100);
                        TLRPC.PhotoSize photoSize4 = thumbLocation6;
                        imageReceiver.setImage((ImageLocation) null, (String) null, placeHolder3 == null ? ImageLocation.getForObject(thumbLocation6, messageObject.photoThumbsObject) : null, "b", placeHolder3 != null ? new BitmapDrawable(placeHolder3.bitmap) : null, 0, (String) null, messageObject, 1);
                        ImageReceiver.BitmapHolder bitmapHolder4 = this.currentThumb;
                        if (bitmapHolder4 != null) {
                            imageReceiver2.setOrientation(bitmapHolder4.orientation, false);
                            return;
                        }
                        return;
                    }
                }
                int[] size3 = new int[1];
                ImageLocation imageLocation4 = getImageLocation(i, size3);
                TLObject fileLocation2 = getFileLocation(i, size3);
                imageReceiver2.setNeedsQualityThumb(true);
                if (imageLocation4 != null) {
                    if (this.currentThumb == null || imageReceiver2 != this.centerImage) {
                        placeHolder = null;
                    } else {
                        placeHolder = this.currentThumb;
                    }
                    if (size3[0] == 0) {
                        size3[0] = -1;
                    }
                    if (messageObject != null) {
                        thumbLocation = FileLoader.getClosestPhotoSizeWithSize(messageObject.photoThumbs, 100);
                        photoObject = messageObject.photoThumbsObject;
                    } else {
                        thumbLocation = null;
                        photoObject = null;
                    }
                    if (thumbLocation == null || thumbLocation != fileLocation2) {
                        thumbLocation2 = thumbLocation;
                    } else {
                        thumbLocation2 = null;
                    }
                    boolean cacheOnly = (messageObject != null && messageObject.isWebpage()) || this.avatarsDialogId != 0 || this.isEvent;
                    ImageLocation videoThumb3 = null;
                    if (messageObject != null) {
                        Object parentObject2 = messageObject;
                        if (this.sharedMediaType == 5) {
                            TLRPC.Document document4 = messageObject.getDocument();
                            TLRPC.VideoSize videoSize = MessageObject.getDocumentVideoThumb(document4);
                            if (videoSize != null) {
                                videoThumb3 = ImageLocation.getForDocument(videoSize, document4);
                            }
                            videoThumb = videoThumb3;
                            parentObject = parentObject2;
                        } else {
                            videoThumb = null;
                            parentObject = parentObject2;
                        }
                    } else {
                        long j = this.avatarsDialogId;
                        if (j == 0) {
                            videoThumb = null;
                            parentObject = null;
                        } else if (j > 0) {
                            videoThumb = null;
                            parentObject = MessagesController.getInstance(this.currentAccount).getUser(Long.valueOf(this.avatarsDialogId));
                        } else {
                            videoThumb = null;
                            parentObject = MessagesController.getInstance(this.currentAccount).getChat(Long.valueOf(-this.avatarsDialogId));
                        }
                    }
                    if (videoThumb != null) {
                        TLRPC.PhotoSize photoSize5 = thumbLocation2;
                        TLObject tLObject2 = photoObject;
                        ImageReceiver.BitmapHolder bitmapHolder5 = placeHolder;
                        TLObject tLObject3 = fileLocation2;
                        int[] iArr = size3;
                        imageReceiver.setImage(imageLocation4, (String) null, videoThumb, (String) null, placeHolder == null ? ImageLocation.getForObject(thumbLocation2, photoObject) : null, "b", placeHolder != null ? new BitmapDrawable(placeHolder.bitmap) : null, size3[0], (String) null, parentObject, cacheOnly ? 1 : 0);
                        ImageLocation imageLocation5 = imageLocation4;
                        return;
                    }
                    TLRPC.PhotoSize thumbLocation7 = thumbLocation2;
                    TLObject photoObject3 = photoObject;
                    ImageReceiver.BitmapHolder placeHolder9 = placeHolder;
                    TLObject tLObject4 = fileLocation2;
                    ImageLocation imageLocation6 = imageLocation4;
                    int[] size4 = size3;
                    if (this.avatarsDialogId != 0) {
                        imageLocation = imageLocation6;
                        filter = imageLocation.imageType == 2 ? "g" : null;
                    } else {
                        imageLocation = imageLocation6;
                        filter = null;
                    }
                    ImageReceiver.BitmapHolder placeHolder10 = placeHolder9;
                    if (placeHolder10 == null) {
                        thumbLocation3 = thumbLocation7;
                        photoObject2 = photoObject3;
                        imageLocation2 = ImageLocation.getForObject(thumbLocation3, photoObject2);
                    } else {
                        thumbLocation3 = thumbLocation7;
                        photoObject2 = photoObject3;
                        imageLocation2 = null;
                    }
                    TLObject tLObject5 = photoObject2;
                    TLRPC.PhotoSize photoSize6 = thumbLocation3;
                    ImageReceiver.BitmapHolder bitmapHolder6 = placeHolder10;
                    imageReceiver.setImage(imageLocation, filter, imageLocation2, "b", placeHolder10 != null ? new BitmapDrawable(placeHolder10.bitmap) : null, size4[0], (String) null, parentObject, cacheOnly ? 1 : 0);
                    return;
                }
                if (size3[0] == 0) {
                    imageReceiver2.setImageBitmap((Bitmap) null);
                } else {
                    imageReceiver2.setImageBitmap(this.parentActivity.getResources().getDrawable(NUM));
                }
            }
        } else if (i < 0 || i >= this.imagesArrLocals.size()) {
            imageReceiver2.setImageBitmap((Bitmap) null);
        } else {
            Object object = this.imagesArrLocals.get(i);
            int size5 = (int) (((float) AndroidUtilities.getPhotoSize()) / AndroidUtilities.density);
            ImageReceiver.BitmapHolder placeHolder11 = null;
            if (this.currentThumb != null && imageReceiver2 == this.centerImage) {
                placeHolder11 = this.currentThumb;
            }
            if (placeHolder11 == null) {
                placeHolder11 = this.placeProvider.getThumbForPhoto((MessageObject) null, (TLRPC.FileLocation) null, i);
            }
            String path2 = null;
            TLRPC.Document document5 = null;
            WebFile webDocument2 = null;
            ImageLocation videoThumb4 = null;
            TLRPC.PhotoSize photo4 = null;
            TLObject photoObject4 = null;
            int imageSize3 = 0;
            String filter4 = null;
            int cacheType2 = 0;
            if (object instanceof MediaController.PhotoEntry) {
                MediaController.PhotoEntry photoEntry = (MediaController.PhotoEntry) object;
                boolean isVideo2 = photoEntry.isVideo;
                if (!photoEntry.isVideo) {
                    if (photoEntry.filterPath != null) {
                        path2 = photoEntry.filterPath;
                    } else {
                        imageReceiver2.setOrientation(photoEntry.orientation, false);
                        path2 = photoEntry.path;
                    }
                    filter4 = String.format(Locale.US, "%d_%d", new Object[]{Integer.valueOf(size5), Integer.valueOf(size5)});
                    placeHolder11 = placeHolder11;
                } else if (photoEntry.thumbPath == null) {
                    path2 = "vthumb://" + photoEntry.imageId + ":" + photoEntry.path;
                } else if (this.fromCamera) {
                    Bitmap b = BitmapFactory.decodeFile(photoEntry.thumbPath);
                    if (b != null) {
                        placeHolder11 = new ImageReceiver.BitmapHolder(b);
                        photoEntry.thumbPath = null;
                    }
                } else {
                    path2 = photoEntry.thumbPath;
                }
                placeHolder6 = placeHolder11;
                isVideo = isVideo2;
                imageSize = 0;
                cacheType = 0;
                webDocument = null;
                tLObject = null;
                filter2 = filter4;
                path = path2;
                videoThumb2 = null;
                photo = null;
                document = null;
            } else {
                ImageReceiver.BitmapHolder placeHolder12 = placeHolder11;
                if (object instanceof TLRPC.BotInlineResult) {
                    cacheType2 = 1;
                    TLRPC.BotInlineResult botInlineResult = (TLRPC.BotInlineResult) object;
                    if (botInlineResult.type.equals("video") || MessageObject.isVideoDocument(botInlineResult.document)) {
                        if (botInlineResult.document != null) {
                            photo4 = FileLoader.getClosestPhotoSizeWithSize(botInlineResult.document.thumbs, 90);
                            photoObject4 = botInlineResult.document;
                        } else if (botInlineResult.thumb instanceof TLRPC.TL_webDocument) {
                            webDocument2 = WebFile.createWithWebDocument(botInlineResult.thumb);
                        }
                    } else if (botInlineResult.type.equals("gif") && botInlineResult.document != null) {
                        TLRPC.Document document6 = botInlineResult.document;
                        int imageSize4 = botInlineResult.document.size;
                        TLRPC.VideoSize videoSize2 = MessageObject.getDocumentVideoThumb(botInlineResult.document);
                        if (videoSize2 != null) {
                            videoThumb4 = ImageLocation.getForDocument(videoSize2, document6);
                        }
                        document5 = document6;
                        imageSize3 = imageSize4;
                        filter4 = "d";
                    } else if (botInlineResult.photo != null) {
                        TLRPC.PhotoSize sizeFull = FileLoader.getClosestPhotoSizeWithSize(botInlineResult.photo.sizes, AndroidUtilities.getPhotoSize());
                        TLObject photoObject5 = botInlineResult.photo;
                        int imageSize5 = sizeFull.size;
                        TLRPC.PhotoSize photoSize7 = sizeFull;
                        filter4 = String.format(Locale.US, "%d_%d", new Object[]{Integer.valueOf(size5), Integer.valueOf(size5)});
                        photoObject4 = photoObject5;
                        imageSize3 = imageSize5;
                        photo4 = sizeFull;
                    } else if (botInlineResult.content instanceof TLRPC.TL_webDocument) {
                        if (botInlineResult.type.equals("gif")) {
                            filter3 = "d";
                            if ((botInlineResult.thumb instanceof TLRPC.TL_webDocument) && "video/mp4".equals(botInlineResult.thumb.mime_type)) {
                                videoThumb4 = ImageLocation.getForWebFile(WebFile.createWithWebDocument(botInlineResult.thumb));
                            }
                        } else {
                            filter3 = String.format(Locale.US, "%d_%d", new Object[]{Integer.valueOf(size5), Integer.valueOf(size5)});
                        }
                        filter4 = filter3;
                        webDocument2 = WebFile.createWithWebDocument(botInlineResult.content);
                    }
                } else if (object instanceof MediaController.SearchImage) {
                    MediaController.SearchImage photoEntry2 = (MediaController.SearchImage) object;
                    if (photoEntry2.photoSize != null) {
                        photo4 = photoEntry2.photoSize;
                        photoObject4 = photoEntry2.photo;
                        imageSize3 = photoEntry2.photoSize.size;
                    } else if (photoEntry2.filterPath != null) {
                        path2 = photoEntry2.filterPath;
                    } else if (photoEntry2.document != null) {
                        document5 = photoEntry2.document;
                        imageSize3 = photoEntry2.document.size;
                    } else {
                        path2 = photoEntry2.imageUrl;
                        imageSize3 = photoEntry2.size;
                    }
                    cacheType = 1;
                    placeHolder6 = placeHolder12;
                    filter2 = "d";
                    isVideo = false;
                    videoThumb2 = null;
                    photo = photo4;
                    imageSize = imageSize3;
                    document = document5;
                    webDocument = null;
                    tLObject = photoObject4;
                    path = path2;
                }
                cacheType = cacheType2;
                placeHolder6 = placeHolder12;
                filter2 = filter4;
                isVideo = false;
                videoThumb2 = videoThumb4;
                photo = photo4;
                imageSize = imageSize3;
                document = document5;
                webDocument = webDocument2;
                tLObject = photoObject4;
                path = null;
            }
            if (document != null) {
                TLRPC.PhotoSize thumb2 = FileLoader.getClosestPhotoSizeWithSize(document.thumbs, 90);
                if (videoThumb2 != null) {
                    TLRPC.PhotoSize photoSize8 = thumb2;
                    TLRPC.Document document7 = tLObject;
                    TLRPC.PhotoSize photoSize9 = photo;
                    int i4 = size5;
                    imageReceiver.setImage(ImageLocation.getForDocument(document), "d", videoThumb2, (String) null, placeHolder6 == null ? ImageLocation.getForDocument(thumb2, document) : null, String.format(Locale.US, "%d_%d", new Object[]{Integer.valueOf(size5), Integer.valueOf(size5)}), placeHolder6 != null ? new BitmapDrawable(placeHolder6.bitmap) : null, imageSize, (String) null, object, cacheType);
                    TLRPC.Document document8 = document;
                    ImageReceiver.BitmapHolder bitmapHolder7 = placeHolder6;
                    return;
                }
                TLRPC.PhotoSize thumb3 = thumb2;
                TLRPC.Photo photo5 = tLObject;
                TLRPC.PhotoSize photoSize10 = photo;
                TLRPC.Document document9 = document;
                ImageReceiver.BitmapHolder bitmapHolder8 = placeHolder6;
                int size6 = size5;
                ImageLocation forDocument = ImageLocation.getForDocument(document9);
                if (placeHolder6 == null) {
                    thumb = thumb3;
                    imageLocation3 = ImageLocation.getForDocument(thumb, document9);
                } else {
                    thumb = thumb3;
                    imageLocation3 = null;
                }
                TLRPC.PhotoSize photoSize11 = thumb;
                imageReceiver.setImage(forDocument, "d", imageLocation3, String.format(Locale.US, "%d_%d", new Object[]{Integer.valueOf(size6), Integer.valueOf(size6)}), placeHolder6 != null ? new BitmapDrawable(placeHolder6.bitmap) : null, imageSize, (String) null, object, cacheType);
                return;
            }
            TLObject photoObject6 = tLObject;
            int i5 = size5;
            TLRPC.Document document10 = document;
            TLRPC.PhotoSize photo6 = photo;
            if (photo6 != null) {
                imageReceiver.setImage(ImageLocation.getForObject(photo6, photoObject6), filter2, (Drawable) placeHolder6 != null ? new BitmapDrawable(placeHolder6.bitmap) : null, imageSize, (String) null, object, cacheType);
                return;
            }
            if (webDocument == null) {
                if (placeHolder6 != null) {
                    drawable2 = new BitmapDrawable(placeHolder6.bitmap);
                } else if (!isVideo || (activity = this.parentActivity) == null) {
                    drawable = null;
                    imageReceiver.setImage(path, filter2, drawable, (String) null, imageSize);
                } else {
                    drawable2 = activity.getResources().getDrawable(NUM);
                }
                drawable = drawable2;
                imageReceiver.setImage(path, filter2, drawable, (String) null, imageSize);
            } else if (videoThumb2 != null) {
                imageReceiver.setImage(ImageLocation.getForWebFile(webDocument), filter2, videoThumb2, (String) null, (Drawable) null, object, cacheType);
            } else {
                ImageLocation forWebFile = ImageLocation.getForWebFile(webDocument);
                if (placeHolder6 != null) {
                    drawable4 = new BitmapDrawable(placeHolder6.bitmap);
                } else if (!isVideo || (activity2 = this.parentActivity) == null) {
                    drawable3 = null;
                    imageReceiver.setImage(forWebFile, filter2, drawable3, (String) null, object, cacheType);
                } else {
                    drawable4 = activity2.getResources().getDrawable(NUM);
                }
                drawable3 = drawable4;
                imageReceiver.setImage(forWebFile, filter2, drawable3, (String) null, object, cacheType);
            }
        }
    }

    public static boolean isShowingImage(MessageObject object) {
        boolean result = false;
        boolean result2 = true;
        if (Instance != null && !Instance.pipAnimationInProgress && Instance.isVisible && !Instance.disableShowCheck && object != null) {
            MessageObject currentMessageObject2 = Instance.currentMessageObject;
            if (currentMessageObject2 == null && Instance.placeProvider != null) {
                currentMessageObject2 = Instance.placeProvider.getEditingMessageObject();
            }
            result = currentMessageObject2 != null && currentMessageObject2.getId() == object.getId() && currentMessageObject2.getDialogId() == object.getDialogId();
        }
        if (result || PipInstance == null) {
            return result;
        }
        if (!PipInstance.isVisible || PipInstance.disableShowCheck || object == null || PipInstance.currentMessageObject == null || PipInstance.currentMessageObject.getId() != object.getId() || PipInstance.currentMessageObject.getDialogId() != object.getDialogId()) {
            result2 = false;
        }
        return result2;
    }

    public static boolean isPlayingMessageInPip(MessageObject object) {
        return (PipInstance == null || object == null || PipInstance.currentMessageObject == null || PipInstance.currentMessageObject.getId() != object.getId() || PipInstance.currentMessageObject.getDialogId() != object.getDialogId()) ? false : true;
    }

    public static boolean isPlayingMessage(MessageObject object) {
        return Instance != null && !Instance.pipAnimationInProgress && Instance.isVisible && object != null && Instance.currentMessageObject != null && Instance.currentMessageObject.getId() == object.getId() && Instance.currentMessageObject.getDialogId() == object.getDialogId();
    }

    public static boolean isShowingImage(TLRPC.FileLocation object) {
        if (Instance == null) {
            return false;
        }
        return Instance.isVisible && !Instance.disableShowCheck && object != null && ((Instance.currentFileLocation != null && object.local_id == Instance.currentFileLocation.location.local_id && object.volume_id == Instance.currentFileLocation.location.volume_id && object.dc_id == Instance.currentFileLocation.dc_id) || (Instance.currentFileLocationVideo != null && object.local_id == Instance.currentFileLocationVideo.location.local_id && object.volume_id == Instance.currentFileLocationVideo.location.volume_id && object.dc_id == Instance.currentFileLocationVideo.dc_id));
    }

    public static boolean isShowingImage(TLRPC.BotInlineResult object) {
        if (Instance == null) {
            return false;
        }
        return Instance.isVisible && !Instance.disableShowCheck && object != null && Instance.currentBotInlineResult != null && object.id == Instance.currentBotInlineResult.id;
    }

    public static boolean isShowingImage(String object) {
        if (Instance == null) {
            return false;
        }
        return Instance.isVisible && !Instance.disableShowCheck && object != null && object.equals(Instance.currentPathObject);
    }

    public void setParentChatActivity(ChatActivity chatActivity) {
        this.parentChatActivity = chatActivity;
    }

    public void setMaxSelectedPhotos(int value, boolean order) {
        this.maxSelectedPhotos = value;
        this.allowOrder = order;
    }

    public void checkCurrentImageVisibility() {
        PlaceProviderObject placeProviderObject = this.currentPlaceObject;
        if (placeProviderObject != null) {
            placeProviderObject.imageReceiver.setVisible(true, true);
        }
        PhotoViewerProvider photoViewerProvider = this.placeProvider;
        PlaceProviderObject placeForPhoto = photoViewerProvider == null ? null : photoViewerProvider.getPlaceForPhoto(this.currentMessageObject, getFileLocation(this.currentFileLocation), this.currentIndex, false);
        this.currentPlaceObject = placeForPhoto;
        if (placeForPhoto != null) {
            placeForPhoto.imageReceiver.setVisible(false, true);
        }
    }

    public boolean openPhoto(MessageObject messageObject, ChatActivity chatActivity, long dialogId, long mergeDialogId2, PhotoViewerProvider provider) {
        return openPhoto(messageObject, (TLRPC.FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, provider, chatActivity, dialogId, mergeDialogId2, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(MessageObject messageObject, int embedSeekTime, ChatActivity chatActivity, long dialogId, long mergeDialogId2, PhotoViewerProvider provider) {
        return openPhoto(messageObject, (TLRPC.FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, provider, chatActivity, dialogId, mergeDialogId2, true, (PageBlocksAdapter) null, Integer.valueOf(embedSeekTime));
    }

    public boolean openPhoto(MessageObject messageObject, long dialogId, long mergeDialogId2, PhotoViewerProvider provider, boolean fullScreenVideo) {
        return openPhoto(messageObject, (TLRPC.FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, provider, (ChatActivity) null, dialogId, mergeDialogId2, fullScreenVideo, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(TLRPC.FileLocation fileLocation, PhotoViewerProvider provider) {
        return openPhoto((MessageObject) null, fileLocation, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, provider, (ChatActivity) null, 0, 0, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhotoWithVideo(TLRPC.FileLocation fileLocation, ImageLocation videoLocation, PhotoViewerProvider provider) {
        return openPhoto((MessageObject) null, fileLocation, (ImageLocation) null, videoLocation, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, provider, (ChatActivity) null, 0, 0, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(TLRPC.FileLocation fileLocation, ImageLocation imageLocation, PhotoViewerProvider provider) {
        return openPhoto((MessageObject) null, fileLocation, imageLocation, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, 0, provider, (ChatActivity) null, 0, 0, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(ArrayList<MessageObject> messages, int index, long dialogId, long mergeDialogId2, PhotoViewerProvider provider) {
        PhotoViewerProvider photoViewerProvider = provider;
        return openPhoto(messages.get(index), (TLRPC.FileLocation) null, (ImageLocation) null, (ImageLocation) null, messages, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, index, photoViewerProvider, (ChatActivity) null, dialogId, mergeDialogId2, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(ArrayList<SecureDocument> documents, int index, PhotoViewerProvider provider) {
        return openPhoto((MessageObject) null, (TLRPC.FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, documents, (ArrayList<Object>) null, index, provider, (ChatActivity) null, 0, 0, true, (PageBlocksAdapter) null, (Integer) null);
    }

    public boolean openPhoto(int index, PageBlocksAdapter pageBlocksAdapter2, PhotoViewerProvider provider) {
        return openPhoto((MessageObject) null, (TLRPC.FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, (ArrayList<Object>) null, index, provider, (ChatActivity) null, 0, 0, true, pageBlocksAdapter2, (Integer) null);
    }

    public boolean openPhotoForSelect(ArrayList<Object> photos, int index, int type, boolean documentsPicker, PhotoViewerProvider provider, ChatActivity chatActivity) {
        int i = type;
        this.isDocumentsPicker = documentsPicker;
        ImageView imageView = this.pickerViewSendButton;
        if (imageView != null) {
            FrameLayout.LayoutParams layoutParams2 = (FrameLayout.LayoutParams) imageView.getLayoutParams();
            if (i == 4 || i == 5) {
                this.pickerViewSendButton.setImageResource(NUM);
                layoutParams2.bottomMargin = AndroidUtilities.dp(19.0f);
            } else if (i == 1 || i == 3 || i == 10) {
                this.pickerViewSendButton.setImageResource(NUM);
                this.pickerViewSendButton.setPadding(0, AndroidUtilities.dp(1.0f), 0, 0);
                layoutParams2.bottomMargin = AndroidUtilities.dp(19.0f);
            } else {
                this.pickerViewSendButton.setImageResource(NUM);
                layoutParams2.bottomMargin = AndroidUtilities.dp(14.0f);
            }
            this.pickerViewSendButton.setLayoutParams(layoutParams2);
        }
        if (this.sendPhotoType == 1 || i != 1 || !this.isVisible) {
            PhotoViewerProvider photoViewerProvider = provider;
            this.sendPhotoType = i;
            return openPhoto((MessageObject) null, (TLRPC.FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, photos, index, provider, chatActivity, 0, 0, true, (PageBlocksAdapter) null, (Integer) null);
        }
        this.sendPhotoType = i;
        this.doneButtonPressed = false;
        this.actionBar.setTitle(LocaleController.formatString("Of", NUM, 1, 1));
        this.placeProvider = provider;
        this.mergeDialogId = 0;
        this.currentDialogId = 0;
        this.selectedPhotosAdapter.notifyDataSetChanged();
        this.pageBlocksAdapter = null;
        if (this.velocityTracker == null) {
            this.velocityTracker = VelocityTracker.obtain();
        }
        this.isVisible = true;
        togglePhotosListView(false, false);
        this.openedFullScreenVideo = false;
        createCropView();
        toggleActionBar(false, false);
        this.seekToProgressPending2 = 0.0f;
        this.skipFirstBufferingProgress = false;
        this.playerInjected = false;
        makeFocusable();
        this.backgroundDrawable.setAlpha(255);
        this.containerView.setAlpha(1.0f);
        onPhotoShow((MessageObject) null, (TLRPC.FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, photos, index, (PlaceProviderObject) null);
        initCropView();
        setCropBitmap();
        return true;
    }

    private void openCurrentPhotoInPaintModeForSelect() {
        if (canSendMediaToParentChatActivity()) {
            File file = null;
            boolean isVideo = false;
            boolean capReplace = false;
            MessageObject messageObject = null;
            MessageObject messageObject2 = this.currentMessageObject;
            if (messageObject2 != null) {
                messageObject = this.currentMessageObject;
                capReplace = messageObject2.canEditMedia() && !this.currentMessageObject.isDocument();
                isVideo = this.currentMessageObject.isVideo();
                if (!TextUtils.isEmpty(this.currentMessageObject.messageOwner.attachPath)) {
                    file = new File(this.currentMessageObject.messageOwner.attachPath);
                    if (!file.exists()) {
                        file = null;
                    }
                }
                if (file == null) {
                    file = FileLoader.getPathToMessage(this.currentMessageObject.messageOwner);
                }
            }
            if (file == null || !file.exists()) {
                showDownloadAlert();
                return;
            }
            this.savedState = new SavedState(this.currentIndex, new ArrayList(this.imagesArr), this.placeProvider);
            ActionBarToggleParams toggleParams = new ActionBarToggleParams().enableStatusBarAnimation(false);
            toggleActionBar(false, true, toggleParams);
            AndroidUtilities.runOnUIThread(new PhotoViewer$$ExternalSyntheticLambda47(this, file, isVideo, messageObject, capReplace), (long) toggleParams.animationDuration);
        }
    }

    /* renamed from: lambda$openCurrentPhotoInPaintModeForSelect$61$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3573xeb925300(File finalFile, boolean finalIsVideo, MessageObject finalMessageObject, boolean finalCanReplace) {
        int orientation;
        int orientation2 = 0;
        try {
            switch (new ExifInterface(finalFile.getAbsolutePath()).getAttributeInt("Orientation", 1)) {
                case 3:
                    orientation2 = 180;
                    break;
                case 6:
                    orientation2 = 90;
                    break;
                case 8:
                    orientation2 = 270;
                    break;
            }
            orientation = orientation2;
        } catch (Exception e) {
            FileLog.e((Throwable) e);
            orientation = 0;
        }
        int i = this.lastImageId;
        this.lastImageId = i - 1;
        final MediaController.PhotoEntry photoEntry = new MediaController.PhotoEntry(0, i, 0, finalFile.getAbsolutePath(), orientation, finalIsVideo, 0, 0, 0);
        this.sendPhotoType = 2;
        this.doneButtonPressed = false;
        PhotoViewerProvider chatPhotoProvider = this.placeProvider;
        final PhotoViewerProvider photoViewerProvider = chatPhotoProvider;
        final MessageObject messageObject = finalMessageObject;
        final boolean z = finalCanReplace;
        this.placeProvider = new EmptyPhotoViewerProvider() {
            private final ImageReceiver.BitmapHolder thumbHolder;

            {
                this.thumbHolder = PhotoViewer.this.centerImage.getBitmapSafe();
            }

            public PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int index, boolean needPreview) {
                PhotoViewerProvider photoViewerProvider = photoViewerProvider;
                if (photoViewerProvider != null) {
                    return photoViewerProvider.getPlaceForPhoto(messageObject, (TLRPC.FileLocation) null, 0, needPreview);
                }
                return null;
            }

            public ImageReceiver.BitmapHolder getThumbForPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int index) {
                return this.thumbHolder;
            }

            public void sendButtonPressed(int index, VideoEditedInfo videoEditedInfo, boolean notify, int scheduleDate, boolean forceDocument) {
                sendMedia(videoEditedInfo, notify, scheduleDate, false, forceDocument);
            }

            public void replaceButtonPressed(int index, VideoEditedInfo videoEditedInfo) {
                if (photoEntry.isCropped || photoEntry.isPainted || photoEntry.isFiltered || videoEditedInfo != null || !TextUtils.isEmpty(photoEntry.caption)) {
                    sendMedia(videoEditedInfo, false, 0, true, false);
                }
            }

            public boolean canReplace(int index) {
                return photoViewerProvider != null && z;
            }

            public MessageObject getEditingMessageObject() {
                return messageObject;
            }

            public boolean canCaptureMorePhotos() {
                return false;
            }

            private void sendMedia(VideoEditedInfo videoEditedInfo, boolean notify, int scheduleDate, boolean replace, boolean forceDocument) {
                if (PhotoViewer.this.parentChatActivity != null) {
                    MessageObject editingMessageObject = replace ? messageObject : null;
                    if (editingMessageObject != null && !TextUtils.isEmpty(photoEntry.caption)) {
                        editingMessageObject.editingMessage = photoEntry.caption;
                        editingMessageObject.editingMessageEntities = photoEntry.entities;
                    }
                    if (photoEntry.isVideo) {
                        if (videoEditedInfo != null) {
                            SendMessagesHelper.prepareSendingVideo(PhotoViewer.this.parentChatActivity.getAccountInstance(), photoEntry.path, videoEditedInfo, PhotoViewer.this.parentChatActivity.getDialogId(), PhotoViewer.this.parentChatActivity.getReplyMessage(), PhotoViewer.this.parentChatActivity.getThreadMessage(), photoEntry.caption, photoEntry.entities, photoEntry.ttl, editingMessageObject, notify, scheduleDate, forceDocument);
                        } else {
                            SendMessagesHelper.prepareSendingVideo(PhotoViewer.this.parentChatActivity.getAccountInstance(), photoEntry.path, (VideoEditedInfo) null, PhotoViewer.this.parentChatActivity.getDialogId(), PhotoViewer.this.parentChatActivity.getReplyMessage(), PhotoViewer.this.parentChatActivity.getThreadMessage(), photoEntry.caption, photoEntry.entities, photoEntry.ttl, editingMessageObject, notify, scheduleDate, forceDocument);
                        }
                    } else if (photoEntry.imagePath != null) {
                        SendMessagesHelper.prepareSendingPhoto(PhotoViewer.this.parentChatActivity.getAccountInstance(), photoEntry.imagePath, photoEntry.thumbPath, (Uri) null, PhotoViewer.this.parentChatActivity.getDialogId(), PhotoViewer.this.parentChatActivity.getReplyMessage(), PhotoViewer.this.parentChatActivity.getThreadMessage(), photoEntry.caption, photoEntry.entities, photoEntry.stickers, (InputContentInfoCompat) null, photoEntry.ttl, editingMessageObject, videoEditedInfo, notify, scheduleDate, forceDocument);
                    } else if (photoEntry.path != null) {
                        SendMessagesHelper.prepareSendingPhoto(PhotoViewer.this.parentChatActivity.getAccountInstance(), photoEntry.path, photoEntry.thumbPath, (Uri) null, PhotoViewer.this.parentChatActivity.getDialogId(), PhotoViewer.this.parentChatActivity.getReplyMessage(), PhotoViewer.this.parentChatActivity.getThreadMessage(), photoEntry.caption, photoEntry.entities, photoEntry.stickers, (InputContentInfoCompat) null, photoEntry.ttl, editingMessageObject, videoEditedInfo, notify, scheduleDate, forceDocument);
                    }
                }
            }
        };
        this.selectedPhotosAdapter.notifyDataSetChanged();
        if (this.velocityTracker == null) {
            this.velocityTracker = VelocityTracker.obtain();
        }
        togglePhotosListView(false, false);
        toggleActionBar(true, false);
        ChatActivity chatActivity = this.parentChatActivity;
        if (chatActivity == null || chatActivity.getChatActivityEnterView() == null || !this.parentChatActivity.isKeyboardVisible()) {
            makeFocusable();
        } else {
            this.parentChatActivity.getChatActivityEnterView().closeKeyboard();
        }
        this.backgroundDrawable.setAlpha(255);
        this.containerView.setAlpha(1.0f);
        PhotoViewerProvider photoViewerProvider2 = chatPhotoProvider;
        onPhotoShow((MessageObject) null, (TLRPC.FileLocation) null, (ImageLocation) null, (ImageLocation) null, (ArrayList<MessageObject>) null, (ArrayList<SecureDocument>) null, Collections.singletonList(photoEntry), 0, (PlaceProviderObject) null);
        float f = 154.0f;
        this.pickerView.setTranslationY((float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f));
        this.pickerViewSendButton.setTranslationY((float) AndroidUtilities.dp(this.isCurrentVideo ? 154.0f : 96.0f));
        ActionBar actionBar2 = this.actionBar;
        actionBar2.setTranslationY((float) (-actionBar2.getHeight()));
        CaptionTextViewSwitcher captionTextViewSwitcher2 = this.captionTextViewSwitcher;
        if (!this.isCurrentVideo) {
            f = 96.0f;
        }
        captionTextViewSwitcher2.setTranslationY((float) AndroidUtilities.dp(f));
        createPaintView();
        switchToPaintMode();
    }

    private boolean checkAnimation() {
        if (this.animationInProgress != 0 && Math.abs(this.transitionAnimationStartTime - System.currentTimeMillis()) >= 500) {
            Runnable runnable = this.animationEndRunnable;
            if (runnable != null) {
                runnable.run();
                this.animationEndRunnable = null;
            }
            this.animationInProgress = 0;
        }
        if (this.animationInProgress != 0) {
            return true;
        }
        return false;
    }

    /* access modifiers changed from: private */
    public void setCropBitmap() {
        VideoEditTextureView textureView;
        if (!this.cropInitied && this.sendPhotoType == 1) {
            if (!this.isCurrentVideo || ((textureView = (VideoEditTextureView) this.videoTextureView) != null && textureView.getVideoWidth() > 0 && textureView.getVideoHeight() > 0)) {
                this.cropInitied = true;
                Bitmap bitmap = this.centerImage.getBitmap();
                int orientation = this.centerImage.getOrientation();
                if (bitmap == null) {
                    bitmap = this.animatingImageView.getBitmap();
                    orientation = this.animatingImageView.getOrientation();
                }
                if (bitmap != null || this.videoTextureView != null) {
                    this.photoCropView.setBitmap(bitmap, orientation, false, false, this.paintingOverlay, this.cropTransform, this.isCurrentVideo ? (VideoEditTextureView) this.videoTextureView : null, this.editState.cropState);
                }
            }
        }
    }

    private void initCropView() {
        PhotoCropView photoCropView2 = this.photoCropView;
        if (photoCropView2 != null) {
            photoCropView2.setBitmap((Bitmap) null, 0, false, false, (PaintingOverlay) null, (CropTransform) null, (VideoEditTextureView) null, (MediaController.CropState) null);
            if (this.sendPhotoType == 1) {
                this.photoCropView.onAppear();
                this.photoCropView.setVisibility(0);
                this.photoCropView.setAlpha(1.0f);
                this.photoCropView.onAppeared();
                this.padImageForHorizontalInsets = true;
            }
        }
    }

    /* JADX WARNING: Code restructure failed: missing block: B:33:0x007c, code lost:
        if (r35.getCurrentEncryptedChat() == null) goto L_0x007e;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:40:0x0093, code lost:
        if (org.telegram.messenger.MessagesController.getInstance(r11.currentAccount).isChatNoForwards(-r11.avatarsDialogId) == false) goto L_0x0095;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:88:0x021d, code lost:
        if (org.telegram.messenger.FileLoader.getInstance(r12.currentAccount).isLoadingVideo(r26.getDocument(), false) == false) goto L_0x0221;
     */
    /* JADX WARNING: Removed duplicated region for block: B:132:0x0382  */
    /* JADX WARNING: Removed duplicated region for block: B:147:0x03f5  */
    /* JADX WARNING: Removed duplicated region for block: B:158:? A[RETURN, SYNTHETIC] */
    /* JADX WARNING: Removed duplicated region for block: B:49:0x00be A[Catch:{ Exception -> 0x0413 }] */
    /* JADX WARNING: Removed duplicated region for block: B:50:0x00c1 A[Catch:{ Exception -> 0x0413 }] */
    /* JADX WARNING: Removed duplicated region for block: B:54:0x00e5  */
    /* JADX WARNING: Removed duplicated region for block: B:55:0x00e7  */
    /* JADX WARNING: Removed duplicated region for block: B:58:0x018d  */
    /* JADX WARNING: Removed duplicated region for block: B:61:0x019f  */
    /* JADX WARNING: Removed duplicated region for block: B:62:0x01a4  */
    /* JADX WARNING: Removed duplicated region for block: B:68:0x01bc  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public boolean openPhoto(org.telegram.messenger.MessageObject r26, org.telegram.tgnet.TLRPC.FileLocation r27, org.telegram.messenger.ImageLocation r28, org.telegram.messenger.ImageLocation r29, java.util.ArrayList<org.telegram.messenger.MessageObject> r30, java.util.ArrayList<org.telegram.messenger.SecureDocument> r31, java.util.ArrayList<java.lang.Object> r32, int r33, org.telegram.ui.PhotoViewer.PhotoViewerProvider r34, org.telegram.ui.ChatActivity r35, long r36, long r38, boolean r40, org.telegram.ui.PhotoViewer.PageBlocksAdapter r41, java.lang.Integer r42) {
        /*
            r25 = this;
            r11 = r25
            r12 = r26
            r13 = r27
            r14 = r34
            r15 = r35
            r10 = r41
            r9 = r42
            android.app.Activity r0 = r11.parentActivity
            r8 = 0
            if (r0 == 0) goto L_0x041e
            boolean r0 = r11.isVisible
            if (r0 != 0) goto L_0x041e
            if (r14 != 0) goto L_0x0024
            boolean r0 = r25.checkAnimation()
            if (r0 != 0) goto L_0x0020
            goto L_0x0024
        L_0x0020:
            r2 = r9
            r12 = 0
            goto L_0x0420
        L_0x0024:
            if (r12 != 0) goto L_0x0033
            if (r13 != 0) goto L_0x0033
            if (r30 != 0) goto L_0x0033
            if (r32 != 0) goto L_0x0033
            if (r31 != 0) goto L_0x0033
            if (r28 != 0) goto L_0x0033
            if (r10 != 0) goto L_0x0033
            goto L_0x0020
        L_0x0033:
            r7 = 1
            r6 = r33
            org.telegram.ui.PhotoViewer$PlaceProviderObject r5 = r14.getPlaceForPhoto(r12, r13, r6, r7)
            r1 = 0
            r11.lastInsets = r1
            android.app.Activity r0 = r11.parentActivity
            java.lang.String r2 = "window"
            java.lang.Object r0 = r0.getSystemService(r2)
            r4 = r0
            android.view.WindowManager r4 = (android.view.WindowManager) r4
            boolean r0 = r11.attachedToWindow
            if (r0 == 0) goto L_0x0053
            android.widget.FrameLayout r0 = r11.windowView     // Catch:{ Exception -> 0x0052 }
            r4.removeView(r0)     // Catch:{ Exception -> 0x0052 }
            goto L_0x0053
        L_0x0052:
            r0 = move-exception
        L_0x0053:
            android.view.WindowManager$LayoutParams r0 = r11.windowLayoutParams     // Catch:{ Exception -> 0x0413 }
            r2 = 99
            r0.type = r2     // Catch:{ Exception -> 0x0413 }
            int r0 = android.os.Build.VERSION.SDK_INT     // Catch:{ Exception -> 0x0413 }
            r2 = 21
            if (r0 < r2) goto L_0x0070
            android.view.WindowManager$LayoutParams r0 = r11.windowLayoutParams     // Catch:{ Exception -> 0x0067 }
            r2 = -2147286784(0xfffffffvar_, float:-2.75865E-40)
            r0.flags = r2     // Catch:{ Exception -> 0x0067 }
            goto L_0x0076
        L_0x0067:
            r0 = move-exception
            r17 = r4
            r23 = r5
            r2 = r9
            r12 = 0
            goto L_0x041a
        L_0x0070:
            android.view.WindowManager$LayoutParams r0 = r11.windowLayoutParams     // Catch:{ Exception -> 0x0413 }
            r2 = 131072(0x20000, float:1.83671E-40)
            r0.flags = r2     // Catch:{ Exception -> 0x0413 }
        L_0x0076:
            if (r15 == 0) goto L_0x007e
            org.telegram.tgnet.TLRPC$EncryptedChat r0 = r35.getCurrentEncryptedChat()     // Catch:{ Exception -> 0x0067 }
            if (r0 != 0) goto L_0x00a7
        L_0x007e:
            long r2 = r11.avatarsDialogId     // Catch:{ Exception -> 0x0413 }
            r16 = 0
            int r0 = (r2 > r16 ? 1 : (r2 == r16 ? 0 : -1))
            if (r0 == 0) goto L_0x0095
            int r0 = r11.currentAccount     // Catch:{ Exception -> 0x0067 }
            org.telegram.messenger.MessagesController r0 = org.telegram.messenger.MessagesController.getInstance(r0)     // Catch:{ Exception -> 0x0067 }
            long r2 = r11.avatarsDialogId     // Catch:{ Exception -> 0x0067 }
            long r2 = -r2
            boolean r0 = r0.isChatNoForwards((long) r2)     // Catch:{ Exception -> 0x0067 }
            if (r0 != 0) goto L_0x00a7
        L_0x0095:
            if (r12 == 0) goto L_0x00b0
            int r0 = r11.currentAccount     // Catch:{ Exception -> 0x0067 }
            org.telegram.messenger.MessagesController r0 = org.telegram.messenger.MessagesController.getInstance(r0)     // Catch:{ Exception -> 0x0067 }
            long r2 = r26.getChatId()     // Catch:{ Exception -> 0x0067 }
            boolean r0 = r0.isChatNoForwards((long) r2)     // Catch:{ Exception -> 0x0067 }
            if (r0 == 0) goto L_0x00b0
        L_0x00a7:
            android.view.WindowManager$LayoutParams r0 = r11.windowLayoutParams     // Catch:{ Exception -> 0x0067 }
            int r2 = r0.flags     // Catch:{ Exception -> 0x0067 }
            r2 = r2 | 8192(0x2000, float:1.14794E-41)
            r0.flags = r2     // Catch:{ Exception -> 0x0067 }
            goto L_0x00b8
        L_0x00b0:
            android.view.WindowManager$LayoutParams r0 = r11.windowLayoutParams     // Catch:{ Exception -> 0x0413 }
            int r2 = r0.flags     // Catch:{ Exception -> 0x0413 }
            r2 = r2 & -8193(0xffffffffffffdfff, float:NaN)
            r0.flags = r2     // Catch:{ Exception -> 0x0413 }
        L_0x00b8:
            android.view.WindowManager$LayoutParams r0 = r11.windowLayoutParams     // Catch:{ Exception -> 0x0413 }
            boolean r2 = r11.useSmoothKeyboard     // Catch:{ Exception -> 0x0413 }
            if (r2 == 0) goto L_0x00c1
            r2 = 32
            goto L_0x00c3
        L_0x00c1:
            r2 = 16
        L_0x00c3:
            r2 = r2 | 256(0x100, float:3.59E-43)
            r0.softInputMode = r2     // Catch:{ Exception -> 0x0413 }
            android.widget.FrameLayout r0 = r11.windowView     // Catch:{ Exception -> 0x0413 }
            r0.setFocusable(r8)     // Catch:{ Exception -> 0x0413 }
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r11.containerView     // Catch:{ Exception -> 0x0413 }
            r0.setFocusable(r8)     // Catch:{ Exception -> 0x0413 }
            android.widget.FrameLayout r0 = r11.windowView     // Catch:{ Exception -> 0x0413 }
            android.view.WindowManager$LayoutParams r2 = r11.windowLayoutParams     // Catch:{ Exception -> 0x0413 }
            r4.addView(r0, r2)     // Catch:{ Exception -> 0x0413 }
            r11.hasCaptionForAllMedia = r8
            r11.doneButtonPressed = r8
            r11.allowShowFullscreenButton = r7
            r11.parentChatActivity = r15
            r11.lastTitle = r1
            if (r9 == 0) goto L_0x00e7
            r0 = 1
            goto L_0x00e8
        L_0x00e7:
            r0 = 0
        L_0x00e8:
            r11.isEmbedVideo = r0
            org.telegram.ui.ActionBar.ActionBar r0 = r11.actionBar
            r2 = 2131626753(0x7f0e0b01, float:1.8880751E38)
            r3 = 2
            java.lang.Object[] r3 = new java.lang.Object[r3]
            java.lang.Integer r16 = java.lang.Integer.valueOf(r7)
            r3[r8] = r16
            java.lang.Integer r16 = java.lang.Integer.valueOf(r7)
            r3[r7] = r16
            java.lang.String r1 = "Of"
            java.lang.String r1 = org.telegram.messenger.LocaleController.formatString(r1, r2, r3)
            r0.setTitle(r1)
            org.telegram.ui.ActionBar.ActionBar r0 = r11.actionBar
            r0.setTitleScrollNonFitText(r8)
            int r0 = r11.currentAccount
            org.telegram.messenger.NotificationCenter r0 = org.telegram.messenger.NotificationCenter.getInstance(r0)
            int r1 = org.telegram.messenger.NotificationCenter.fileLoadFailed
            r0.addObserver(r11, r1)
            int r0 = r11.currentAccount
            org.telegram.messenger.NotificationCenter r0 = org.telegram.messenger.NotificationCenter.getInstance(r0)
            int r1 = org.telegram.messenger.NotificationCenter.fileLoaded
            r0.addObserver(r11, r1)
            int r0 = r11.currentAccount
            org.telegram.messenger.NotificationCenter r0 = org.telegram.messenger.NotificationCenter.getInstance(r0)
            int r1 = org.telegram.messenger.NotificationCenter.fileLoadProgressChanged
            r0.addObserver(r11, r1)
            int r0 = r11.currentAccount
            org.telegram.messenger.NotificationCenter r0 = org.telegram.messenger.NotificationCenter.getInstance(r0)
            int r1 = org.telegram.messenger.NotificationCenter.mediaCountDidLoad
            r0.addObserver(r11, r1)
            int r0 = r11.currentAccount
            org.telegram.messenger.NotificationCenter r0 = org.telegram.messenger.NotificationCenter.getInstance(r0)
            int r1 = org.telegram.messenger.NotificationCenter.mediaDidLoad
            r0.addObserver(r11, r1)
            int r0 = r11.currentAccount
            org.telegram.messenger.NotificationCenter r0 = org.telegram.messenger.NotificationCenter.getInstance(r0)
            int r1 = org.telegram.messenger.NotificationCenter.dialogPhotosLoaded
            r0.addObserver(r11, r1)
            int r0 = r11.currentAccount
            org.telegram.messenger.NotificationCenter r0 = org.telegram.messenger.NotificationCenter.getInstance(r0)
            int r1 = org.telegram.messenger.NotificationCenter.messagesDeleted
            r0.addObserver(r11, r1)
            org.telegram.messenger.NotificationCenter r0 = org.telegram.messenger.NotificationCenter.getGlobalInstance()
            int r1 = org.telegram.messenger.NotificationCenter.emojiLoaded
            r0.addObserver(r11, r1)
            int r0 = r11.currentAccount
            org.telegram.messenger.NotificationCenter r0 = org.telegram.messenger.NotificationCenter.getInstance(r0)
            int r1 = org.telegram.messenger.NotificationCenter.filePreparingFailed
            r0.addObserver(r11, r1)
            int r0 = r11.currentAccount
            org.telegram.messenger.NotificationCenter r0 = org.telegram.messenger.NotificationCenter.getInstance(r0)
            int r1 = org.telegram.messenger.NotificationCenter.fileNewChunkAvailable
            r0.addObserver(r11, r1)
            r11.placeProvider = r14
            r2 = r38
            r11.mergeDialogId = r2
            r8 = r36
            r11.currentDialogId = r8
            org.telegram.ui.PhotoViewer$ListAdapter r0 = r11.selectedPhotosAdapter
            r0.notifyDataSetChanged()
            r11.pageBlocksAdapter = r10
            android.view.VelocityTracker r0 = r11.velocityTracker
            if (r0 != 0) goto L_0x0193
            android.view.VelocityTracker r0 = android.view.VelocityTracker.obtain()
            r11.velocityTracker = r0
        L_0x0193:
            r11.isVisible = r7
            r1 = 0
            r11.togglePhotosListView(r1, r1)
            r0 = r40 ^ 1
            r11.openedFullScreenVideo = r0
            if (r0 == 0) goto L_0x01a4
            r1 = 0
            r11.toggleActionBar(r1, r1)
            goto L_0x01b3
        L_0x01a4:
            r1 = 0
            int r0 = r11.sendPhotoType
            if (r0 != r7) goto L_0x01b0
            r25.createCropView()
            r11.toggleActionBar(r1, r1)
            goto L_0x01b3
        L_0x01b0:
            r11.toggleActionBar(r7, r1)
        L_0x01b3:
            r0 = 0
            r11.seekToProgressPending2 = r0
            r11.skipFirstBufferingProgress = r1
            r11.playerInjected = r1
            if (r5 == 0) goto L_0x0382
            r11.disableShowCheck = r7
            r11.animationInProgress = r7
            if (r12 == 0) goto L_0x023f
            boolean r1 = r5.allowTakeAnimation
            if (r1 == 0) goto L_0x01cd
            org.telegram.messenger.ImageReceiver r1 = r5.imageReceiver
            org.telegram.ui.Components.AnimatedFileDrawable r1 = r1.getAnimation()
            goto L_0x01ce
        L_0x01cd:
            r1 = 0
        L_0x01ce:
            r11.currentAnimation = r1
            if (r1 == 0) goto L_0x023c
            boolean r1 = r26.isVideo()
            if (r1 == 0) goto L_0x022c
            org.telegram.messenger.ImageReceiver r1 = r5.imageReceiver
            r7 = 0
            r1.setAllowStartAnimation(r7)
            org.telegram.messenger.ImageReceiver r1 = r5.imageReceiver
            r1.stopAnimation()
            org.telegram.messenger.MediaController r1 = org.telegram.messenger.MediaController.getInstance()
            boolean r1 = r1.isPlayingMessage(r12)
            if (r1 == 0) goto L_0x01f1
            float r1 = r12.audioProgress
            r11.seekToProgressPending2 = r1
        L_0x01f1:
            org.telegram.ui.Components.VideoPlayer r1 = r11.injectingVideoPlayer
            if (r1 != 0) goto L_0x0223
            int r1 = r12.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            org.telegram.tgnet.TLRPC$Document r7 = r26.getDocument()
            r2 = 1
            boolean r1 = r1.isLoadingVideo(r7, r2)
            if (r1 != 0) goto L_0x0223
            org.telegram.ui.Components.AnimatedFileDrawable r1 = r11.currentAnimation
            boolean r1 = r1.hasBitmap()
            if (r1 != 0) goto L_0x0220
            int r1 = r12.currentAccount
            org.telegram.messenger.FileLoader r1 = org.telegram.messenger.FileLoader.getInstance(r1)
            org.telegram.tgnet.TLRPC$Document r2 = r26.getDocument()
            r7 = 0
            boolean r1 = r1.isLoadingVideo(r2, r7)
            if (r1 != 0) goto L_0x0224
            goto L_0x0221
        L_0x0220:
            r7 = 0
        L_0x0221:
            r1 = 1
            goto L_0x0225
        L_0x0223:
            r7 = 0
        L_0x0224:
            r1 = 0
        L_0x0225:
            r11.skipFirstBufferingProgress = r1
            r1 = 0
            r11.currentAnimation = r1
            r3 = 1
            goto L_0x024b
        L_0x022c:
            r1 = 0
            r7 = 0
            java.util.ArrayList r2 = r12.getWebPagePhotos(r1, r1)
            int r2 = r2.size()
            r3 = 1
            if (r2 <= r3) goto L_0x024b
            r11.currentAnimation = r1
            goto L_0x024b
        L_0x023c:
            r3 = 1
            r7 = 0
            goto L_0x024b
        L_0x023f:
            r3 = 1
            r7 = 0
            if (r10 == 0) goto L_0x024b
            org.telegram.messenger.ImageReceiver r1 = r5.imageReceiver
            org.telegram.ui.Components.AnimatedFileDrawable r1 = r1.getAnimation()
            r11.currentAnimation = r1
        L_0x024b:
            r2 = 1065353216(0x3var_, float:1.0)
            r1 = r25
            r2 = r26
            r16 = 1
            r3 = r27
            r17 = r4
            r4 = r28
            r18 = r5
            r5 = r29
            r6 = r30
            r12 = 1
            r16 = 0
            r7 = r31
            r9 = 0
            r8 = r32
            r9 = r33
            r10 = r18
            r1.onPhotoShow(r2, r3, r4, r5, r6, r7, r8, r9, r10)
            int r1 = r11.sendPhotoType
            if (r1 != r12) goto L_0x0283
            org.telegram.ui.Components.PhotoCropView r1 = r11.photoCropView
            r10 = 0
            r1.setVisibility(r10)
            org.telegram.ui.Components.PhotoCropView r1 = r11.photoCropView
            r1.setAlpha(r0)
            org.telegram.ui.Components.PhotoCropView r1 = r11.photoCropView
            r1.setFreeform(r10)
            goto L_0x0284
        L_0x0283:
            r10 = 0
        L_0x0284:
            r9 = r18
            org.telegram.messenger.ImageReceiver r1 = r9.imageReceiver
            android.graphics.RectF r8 = r1.getDrawRegion()
            float r7 = r8.left
            float r6 = r8.top
            org.telegram.messenger.ImageReceiver r1 = r9.imageReceiver
            int r1 = r1.getOrientation()
            org.telegram.messenger.ImageReceiver r2 = r9.imageReceiver
            int r16 = r2.getAnimatedOrientation()
            if (r16 == 0) goto L_0x02a2
            r1 = r16
            r5 = r1
            goto L_0x02a3
        L_0x02a2:
            r5 = r1
        L_0x02a3:
            org.telegram.ui.Components.ClippingImageView[] r4 = r11.getAnimatingImageViews(r9)
            r1 = 0
        L_0x02a8:
            int r2 = r4.length
            if (r1 >= r2) goto L_0x02cd
            r2 = r4[r1]
            float[][] r3 = r11.animationValues
            r2.setAnimationValues(r3)
            r2 = r4[r1]
            r2.setVisibility(r10)
            r2 = r4[r1]
            int[] r3 = r9.radius
            r2.setRadius(r3)
            r2 = r4[r1]
            r2.setOrientation(r5)
            r2 = r4[r1]
            org.telegram.messenger.ImageReceiver$BitmapHolder r3 = r9.thumb
            r2.setImageBitmap(r3)
            int r1 = r1 + 1
            goto L_0x02a8
        L_0x02cd:
            r25.initCropView()
            int r1 = r11.sendPhotoType
            if (r1 != r12) goto L_0x02dc
            org.telegram.ui.Components.PhotoCropView r1 = r11.photoCropView
            r2 = 1065353216(0x3var_, float:1.0)
            r1.setAspectRatio(r2)
            goto L_0x02de
        L_0x02dc:
            r2 = 1065353216(0x3var_, float:1.0)
        L_0x02de:
            org.telegram.ui.Components.ClippingImageView r1 = r11.animatingImageView
            android.view.ViewGroup$LayoutParams r10 = r1.getLayoutParams()
            float r1 = r8.width()
            int r1 = (int) r1
            r10.width = r1
            float r1 = r8.height()
            int r1 = (int) r1
            r10.height = r1
            int r1 = r10.width
            r3 = 100
            if (r1 > 0) goto L_0x02fa
            r10.width = r3
        L_0x02fa:
            int r1 = r10.height
            if (r1 > 0) goto L_0x0300
            r10.height = r3
        L_0x0300:
            r1 = 0
        L_0x0301:
            int r3 = r4.length
            if (r1 >= r3) goto L_0x0354
            int r3 = r4.length
            if (r3 <= r12) goto L_0x030d
            r3 = r4[r1]
            r3.setAlpha(r0)
            goto L_0x0312
        L_0x030d:
            r3 = r4[r1]
            r3.setAlpha(r2)
        L_0x0312:
            r3 = r4[r1]
            r3.setPivotX(r0)
            r3 = r4[r1]
            r3.setPivotY(r0)
            r3 = r4[r1]
            float r0 = r9.scale
            r3.setScaleX(r0)
            r0 = r4[r1]
            float r3 = r9.scale
            r0.setScaleY(r3)
            r0 = r4[r1]
            int r3 = r9.viewX
            float r3 = (float) r3
            float r12 = r8.left
            float r2 = r9.scale
            float r12 = r12 * r2
            float r3 = r3 + r12
            r0.setTranslationX(r3)
            r0 = r4[r1]
            int r2 = r9.viewY
            float r2 = (float) r2
            float r3 = r8.top
            float r12 = r9.scale
            float r3 = r3 * r12
            float r2 = r2 + r3
            r0.setTranslationY(r2)
            r0 = r4[r1]
            r0.setLayoutParams(r10)
            int r1 = r1 + 1
            r0 = 0
            r2 = 1065353216(0x3var_, float:1.0)
            r12 = 1
            goto L_0x0301
        L_0x0354:
            android.widget.FrameLayout r0 = r11.windowView
            android.view.ViewTreeObserver r0 = r0.getViewTreeObserver()
            org.telegram.ui.PhotoViewer$62 r12 = new org.telegram.ui.PhotoViewer$62
            r1 = r12
            r2 = r25
            r3 = r4
            r18 = r4
            r4 = r10
            r19 = r5
            r5 = r7
            r20 = r6
            r6 = r9
            r21 = r7
            r7 = r20
            r22 = r8
            r8 = r41
            r23 = r9
            r9 = r32
            r24 = r10
            r10 = r42
            r1.<init>(r3, r4, r5, r6, r7, r8, r9, r10)
            r0.addOnPreDrawListener(r12)
            r2 = r42
            goto L_0x03e5
        L_0x0382:
            r17 = r4
            r23 = r5
            r10 = 0
            if (r32 == 0) goto L_0x039b
            int r0 = r11.sendPhotoType
            r1 = 3
            if (r0 == r1) goto L_0x039b
            org.telegram.ui.PhotoViewer$PhotoViewerProvider r0 = r11.placeProvider
            if (r0 == 0) goto L_0x0398
            boolean r0 = r0.closeKeyboard()
            if (r0 != 0) goto L_0x039b
        L_0x0398:
            r25.makeFocusable()
        L_0x039b:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r11.containerView
            r1 = 1065353216(0x3var_, float:1.0)
            r0.setAlpha(r1)
            r1 = r25
            r2 = r26
            r3 = r27
            r4 = r28
            r5 = r29
            r6 = r30
            r7 = r31
            r8 = r32
            r9 = r33
            r12 = 0
            r10 = r23
            r1.onPhotoShow(r2, r3, r4, r5, r6, r7, r8, r9, r10)
            r25.initCropView()
            r25.setCropBitmap()
            org.telegram.ui.ChatActivity r0 = r11.parentChatActivity
            if (r0 == 0) goto L_0x03d5
            org.telegram.ui.Components.UndoView r0 = r0.getUndoView()
            r1 = 1
            r0.hide(r12, r1)
            org.telegram.ui.ChatActivity r0 = r11.parentChatActivity
            android.view.View r0 = r0.getFragmentView()
            r0.invalidate()
        L_0x03d5:
            android.widget.FrameLayout r0 = r11.windowView
            android.view.ViewTreeObserver r0 = r0.getViewTreeObserver()
            org.telegram.ui.PhotoViewer$63 r1 = new org.telegram.ui.PhotoViewer$63
            r2 = r42
            r1.<init>(r2)
            r0.addOnPreDrawListener(r1)
        L_0x03e5:
            android.app.Activity r0 = r11.parentActivity
            java.lang.String r1 = "accessibility"
            java.lang.Object r0 = r0.getSystemService(r1)
            android.view.accessibility.AccessibilityManager r0 = (android.view.accessibility.AccessibilityManager) r0
            boolean r1 = r0.isTouchExplorationEnabled()
            if (r1 == 0) goto L_0x0411
            android.view.accessibility.AccessibilityEvent r1 = android.view.accessibility.AccessibilityEvent.obtain()
            r3 = 16384(0x4000, float:2.2959E-41)
            r1.setEventType(r3)
            java.util.List r3 = r1.getText()
            r4 = 2131624010(0x7f0e004a, float:1.8875188E38)
            java.lang.String r5 = "AccDescrPhotoViewer"
            java.lang.String r4 = org.telegram.messenger.LocaleController.getString(r5, r4)
            r3.add(r4)
            r0.sendAccessibilityEvent(r1)
        L_0x0411:
            r1 = 1
            return r1
        L_0x0413:
            r0 = move-exception
            r17 = r4
            r23 = r5
            r2 = r9
            r12 = 0
        L_0x041a:
            org.telegram.messenger.FileLog.e((java.lang.Throwable) r0)
            return r12
        L_0x041e:
            r2 = r9
            r12 = 0
        L_0x0420:
            return r12
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.openPhoto(org.telegram.messenger.MessageObject, org.telegram.tgnet.TLRPC$FileLocation, org.telegram.messenger.ImageLocation, org.telegram.messenger.ImageLocation, java.util.ArrayList, java.util.ArrayList, java.util.ArrayList, int, org.telegram.ui.PhotoViewer$PhotoViewerProvider, org.telegram.ui.ChatActivity, long, long, boolean, org.telegram.ui.PhotoViewer$PageBlocksAdapter, java.lang.Integer):boolean");
    }

    /* access modifiers changed from: private */
    public void initEmbedVideo(int embedSeekTime) {
        if (this.isEmbedVideo) {
            AnonymousClass64 r0 = new PhotoViewerWebView(this.parentActivity, this.pipItem) {
                Rect rect = new Rect();

                /* access modifiers changed from: protected */
                public void drawBlackBackground(Canvas canvas, int w, int h) {
                    Bitmap bitmap = PhotoViewer.this.centerImage.getBitmap();
                    if (bitmap != null) {
                        float minScale = Math.min(((float) w) / ((float) bitmap.getWidth()), ((float) h) / ((float) bitmap.getHeight()));
                        int width = (int) (((float) bitmap.getWidth()) * minScale);
                        int height = (int) (((float) bitmap.getHeight()) * minScale);
                        int top = (h - height) / 2;
                        int left = (w - width) / 2;
                        this.rect.set(left, top, left + width, top + height);
                        canvas.drawBitmap(bitmap, (Rect) null, this.rect, (Paint) null);
                    }
                }

                /* access modifiers changed from: protected */
                public void processTouch(MotionEvent event) {
                    PhotoViewer.this.gestureDetector.onTouchEvent(event);
                }
            };
            this.photoViewerWebView = r0;
            r0.init(embedSeekTime, this.currentMessageObject.messageOwner.media.webpage);
            this.photoViewerWebView.setPlaybackSpeed(this.currentVideoSpeed);
            this.containerView.addView(this.photoViewerWebView, 0, LayoutHelper.createFrame(-1, -1.0f));
        }
    }

    /* access modifiers changed from: private */
    public void makeFocusable() {
        if (Build.VERSION.SDK_INT >= 21) {
            this.windowLayoutParams.flags = -NUM;
        } else {
            this.windowLayoutParams.flags = 0;
        }
        this.windowLayoutParams.softInputMode = (this.useSmoothKeyboard ? 32 : 16) | 256;
        try {
            ((WindowManager) this.parentActivity.getSystemService("window")).updateViewLayout(this.windowView, this.windowLayoutParams);
        } catch (Exception e) {
            FileLog.e((Throwable) e);
        }
        this.windowView.setFocusable(true);
        this.containerView.setFocusable(true);
    }

    public void injectVideoPlayerToMediaController() {
        if (this.videoPlayer.isPlaying()) {
            if (this.playerLooping) {
                this.videoPlayer.setLooping(false);
            }
            MediaController.getInstance().injectVideoPlayer(this.videoPlayer, this.currentMessageObject);
            this.videoPlayer = null;
        }
    }

    public void closePhoto(boolean animated, boolean fromEditMode) {
        float statusBarHeight;
        float yPos;
        AnimatedFileDrawable animation;
        Bitmap bitmap;
        int i;
        int i2;
        if (fromEditMode || (i2 = this.currentEditMode) == 0) {
            QualityChooseView qualityChooseView2 = this.qualityChooseView;
            if (qualityChooseView2 == null || qualityChooseView2.getTag() == null) {
                this.openedFullScreenVideo = false;
                try {
                    AlertDialog alertDialog = this.visibleDialog;
                    if (alertDialog != null) {
                        alertDialog.dismiss();
                        this.visibleDialog = null;
                    }
                } catch (Exception e) {
                    FileLog.e((Throwable) e);
                }
                if (Build.VERSION.SDK_INT >= 21 && this.containerView != null) {
                    AndroidUtilities.cancelRunOnUIThread(this.updateContainerFlagsRunnable);
                    updateContainerFlags(true);
                }
                int i3 = this.currentEditMode;
                if (i3 != 0) {
                    if (i3 == 2) {
                        this.photoFilterView.shutdown();
                        this.containerView.removeView(this.photoFilterView);
                        this.photoFilterView = null;
                    } else if (i3 == 1) {
                        this.editorDoneLayout.setVisibility(8);
                        this.photoCropView.setVisibility(8);
                    } else if (i3 == 3) {
                        this.photoPaintView.shutdown();
                        this.containerView.removeView(this.photoPaintView);
                        this.photoPaintView = null;
                        this.savedState = null;
                    }
                    this.currentEditMode = 0;
                }
                if (this.parentActivity == null) {
                    return;
                }
                if ((!this.isInline && !this.isVisible) || checkAnimation() || this.placeProvider == null) {
                    return;
                }
                if (!this.captionEditText.hideActionMode() || fromEditMode) {
                    Activity activity = this.parentActivity;
                    if (!(activity == null || this.fullscreenedByButton == 0)) {
                        activity.setRequestedOrientation(this.prevOrientation);
                        this.fullscreenedByButton = 0;
                        this.wasRotated = false;
                    }
                    if (!this.doneButtonPressed && !this.imagesArrLocals.isEmpty() && (i = this.currentIndex) >= 0 && i < this.imagesArrLocals.size()) {
                        Object entry = this.imagesArrLocals.get(this.currentIndex);
                        if (entry instanceof MediaController.MediaEditState) {
                            ((MediaController.MediaEditState) entry).editedInfo = getCurrentVideoEditedInfo();
                        }
                    }
                    PlaceProviderObject object = this.placeProvider.getPlaceForPhoto(this.currentMessageObject, getFileLocation(this.currentFileLocation), this.currentIndex, true);
                    if (!(this.videoPlayer == null || object == null || (animation = object.imageReceiver.getAnimation()) == null)) {
                        if (this.textureUploaded && (bitmap = animation.getAnimatedBitmap()) != null) {
                            try {
                                Bitmap src = this.videoTextureView.getBitmap(bitmap.getWidth(), bitmap.getHeight());
                                new Canvas(bitmap).drawBitmap(src, 0.0f, 0.0f, (Paint) null);
                                src.recycle();
                            } catch (Throwable e2) {
                                FileLog.e(e2);
                            }
                        }
                        if (this.currentMessageObject != null) {
                            long startTime2 = animation.getStartTime();
                            long currentPosition = this.videoPlayer.getCurrentPosition();
                            long j = 0;
                            if (startTime2 > 0) {
                                j = startTime2;
                            }
                            animation.seekTo(currentPosition + j, !FileLoader.getInstance(this.currentMessageObject.currentAccount).isLoadingVideo(this.currentMessageObject.getDocument(), true));
                        }
                        object.imageReceiver.setAllowStartAnimation(true);
                        object.imageReceiver.startAnimation();
                    }
                    if (!this.doneButtonPressed) {
                        releasePlayer(true);
                    }
                    PhotoViewerWebView photoViewerWebView2 = this.photoViewerWebView;
                    if (photoViewerWebView2 != null) {
                        photoViewerWebView2.release();
                        this.containerView.removeView(this.photoViewerWebView);
                        this.photoViewerWebView = null;
                    }
                    this.captionEditText.onDestroy();
                    ChatActivity chatActivity = this.parentChatActivity;
                    if (!(chatActivity == null || chatActivity.getFragmentView() == null)) {
                        this.parentChatActivity.getFragmentView().invalidate();
                    }
                    this.parentChatActivity = null;
                    removeObservers();
                    this.isActionBarVisible = false;
                    VelocityTracker velocityTracker2 = this.velocityTracker;
                    if (velocityTracker2 != null) {
                        velocityTracker2.recycle();
                        this.velocityTracker = null;
                    }
                    if (this.isInline) {
                        this.isInline = false;
                        this.animationInProgress = 0;
                        onPhotoClosed(object);
                        this.containerView.setScaleX(1.0f);
                        this.containerView.setScaleY(1.0f);
                        return;
                    }
                    if (animated) {
                        ClippingImageView[] animatingImageViews = getAnimatingImageViews(object);
                        for (int i4 = 0; i4 < animatingImageViews.length; i4++) {
                            animatingImageViews[i4].setAnimationValues(this.animationValues);
                            animatingImageViews[i4].setVisibility(0);
                        }
                        this.animationInProgress = 3;
                        this.containerView.invalidate();
                        AnimatorSet animatorSet = new AnimatorSet();
                        ViewGroup.LayoutParams layoutParams = this.animatingImageView.getLayoutParams();
                        RectF drawRegion = null;
                        if (object != null) {
                            drawRegion = object.imageReceiver.getDrawRegion();
                            layoutParams.width = (int) drawRegion.width();
                            layoutParams.height = (int) drawRegion.height();
                            int orientation = object.imageReceiver.getOrientation();
                            int animatedOrientation = object.imageReceiver.getAnimatedOrientation();
                            if (animatedOrientation != 0) {
                                orientation = animatedOrientation;
                            }
                            for (int i5 = 0; i5 < animatingImageViews.length; i5++) {
                                animatingImageViews[i5].setOrientation(orientation);
                                animatingImageViews[i5].setImageBitmap(object.thumb);
                            }
                        } else {
                            layoutParams.width = (int) this.centerImage.getImageWidth();
                            layoutParams.height = (int) this.centerImage.getImageHeight();
                            for (int i6 = 0; i6 < animatingImageViews.length; i6++) {
                                animatingImageViews[i6].setOrientation(this.centerImage.getOrientation());
                                animatingImageViews[i6].setImageBitmap(this.centerImage.getBitmapSafe());
                            }
                        }
                        if (layoutParams.width <= 0) {
                            layoutParams.width = 100;
                        }
                        if (layoutParams.height <= 0) {
                            layoutParams.height = 100;
                        }
                        if (this.sendPhotoType == 1) {
                            float minSide = Math.min((float) this.photoCropView.getMeasuredWidth(), (((float) this.photoCropView.getMeasuredHeight()) - ((float) AndroidUtilities.dp(64.0f))) - ((float) (isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0))) - ((float) (AndroidUtilities.dp(16.0f) * 2));
                            statusBarHeight = Math.max(minSide / ((float) layoutParams.width), minSide / ((float) layoutParams.height));
                        } else {
                            statusBarHeight = Math.min(((float) this.windowView.getMeasuredWidth()) / ((float) layoutParams.width), ((float) (AndroidUtilities.displaySize.y + (isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0))) / ((float) layoutParams.height));
                        }
                        float width = ((float) layoutParams.width) * this.scale * statusBarHeight;
                        float height = ((float) layoutParams.height) * this.scale * statusBarHeight;
                        float xPos = (((float) this.windowView.getMeasuredWidth()) - width) / 2.0f;
                        if (this.sendPhotoType == 1) {
                            yPos = ((((float) this.photoCropView.getMeasuredHeight()) - ((float) (isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0))) - height) / 2.0f;
                        } else {
                            yPos = (((float) (AndroidUtilities.displaySize.y + (isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0))) - height) / 2.0f;
                        }
                        for (int i7 = 0; i7 < animatingImageViews.length; i7++) {
                            animatingImageViews[i7].setLayoutParams(layoutParams);
                            animatingImageViews[i7].setTranslationX(this.translationX + xPos);
                            animatingImageViews[i7].setTranslationY(yPos + this.translationY);
                            animatingImageViews[i7].setScaleX(this.scale * statusBarHeight);
                            animatingImageViews[i7].setScaleY(this.scale * statusBarHeight);
                        }
                        if (object != null) {
                            object.imageReceiver.setVisible(false, true);
                            int clipHorizontal = (int) Math.abs(drawRegion.left - object.imageReceiver.getImageX());
                            int clipVertical = (int) Math.abs(drawRegion.top - object.imageReceiver.getImageY());
                            if (this.pageBlocksAdapter != null && object.imageReceiver.isAspectFit()) {
                                clipHorizontal = 0;
                            }
                            int[] coords2 = new int[2];
                            object.parentView.getLocationInWindow(coords2);
                            float f = xPos;
                            float f2 = statusBarHeight;
                            int clipTop = (int) ((((float) (coords2[1] - (Build.VERSION.SDK_INT >= 21 ? 0 : AndroidUtilities.statusBarHeight))) - (((float) object.viewY) + drawRegion.top)) + ((float) object.clipTopAddition));
                            if (clipTop < 0) {
                                clipTop = 0;
                            }
                            float f3 = width;
                            int[] iArr = coords2;
                            int clipBottom = (int) ((((((float) object.viewY) + drawRegion.top) + (drawRegion.bottom - drawRegion.top)) - ((float) ((coords2[1] + object.parentView.getHeight()) - (Build.VERSION.SDK_INT >= 21 ? 0 : AndroidUtilities.statusBarHeight)))) + ((float) object.clipBottomAddition));
                            if (clipBottom < 0) {
                                clipBottom = 0;
                            }
                            int clipTop2 = Math.max(clipTop, clipVertical);
                            int clipBottom2 = Math.max(clipBottom, clipVertical);
                            this.animationValues[0][0] = this.animatingImageView.getScaleX();
                            this.animationValues[0][1] = this.animatingImageView.getScaleY();
                            this.animationValues[0][2] = this.animatingImageView.getTranslationX();
                            this.animationValues[0][3] = this.animatingImageView.getTranslationY();
                            float[][] fArr = this.animationValues;
                            fArr[0][4] = 0.0f;
                            fArr[0][5] = 0.0f;
                            fArr[0][6] = 0.0f;
                            fArr[0][7] = 0.0f;
                            fArr[0][8] = 0.0f;
                            fArr[0][9] = 0.0f;
                            fArr[0][10] = 0.0f;
                            fArr[0][11] = 0.0f;
                            fArr[0][12] = 0.0f;
                            fArr[1][0] = object.scale;
                            this.animationValues[1][1] = object.scale;
                            float f4 = height;
                            this.animationValues[1][2] = ((float) object.viewX) + (drawRegion.left * object.scale);
                            this.animationValues[1][3] = ((float) object.viewY) + (drawRegion.top * object.scale);
                            this.animationValues[1][4] = ((float) clipHorizontal) * object.scale;
                            this.animationValues[1][5] = ((float) clipTop2) * object.scale;
                            this.animationValues[1][6] = ((float) clipBottom2) * object.scale;
                            for (int a = 0; a < 4; a++) {
                                this.animationValues[1][a + 7] = object.radius != null ? (float) object.radius[a] : 0.0f;
                            }
                            this.animationValues[1][11] = ((float) clipVertical) * object.scale;
                            this.animationValues[1][12] = ((float) clipHorizontal) * object.scale;
                            ArrayList<Animator> animators = new ArrayList<>((this.sendPhotoType == 1 ? 3 : 2) + animatingImageViews.length + (animatingImageViews.length > 1 ? 1 : 0));
                            int i8 = 0;
                            while (i8 < animatingImageViews.length) {
                                animators.add(ObjectAnimator.ofFloat(animatingImageViews[i8], AnimationProperties.CLIPPING_IMAGE_VIEW_PROGRESS, new float[]{0.0f, 1.0f}));
                                i8++;
                                clipBottom2 = clipBottom2;
                                clipTop2 = clipTop2;
                            }
                            int i9 = clipBottom2;
                            if (animatingImageViews.length > 1) {
                                animators.add(ObjectAnimator.ofFloat(this.animatingImageView, View.ALPHA, new float[]{0.0f}));
                                animatingImageViews[1].setAdditionalTranslationX((float) (-getLeftInset()));
                            }
                            animators.add(ObjectAnimator.ofInt(this.backgroundDrawable, AnimationProperties.COLOR_DRAWABLE_ALPHA, new int[]{0}));
                            animators.add(ObjectAnimator.ofFloat(this.containerView, View.ALPHA, new float[]{0.0f}));
                            if (this.sendPhotoType == 1) {
                                animators.add(ObjectAnimator.ofFloat(this.photoCropView, View.ALPHA, new float[]{0.0f}));
                            }
                            animatorSet.playTogether(animators);
                        } else {
                            float scale2 = statusBarHeight;
                            float f5 = xPos;
                            float f6 = width;
                            float f7 = height;
                            int h = AndroidUtilities.displaySize.y + (isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0);
                            Animator[] animatorArr = new Animator[4];
                            animatorArr[0] = ObjectAnimator.ofInt(this.backgroundDrawable, AnimationProperties.COLOR_DRAWABLE_ALPHA, new int[]{0});
                            animatorArr[1] = ObjectAnimator.ofFloat(this.animatingImageView, View.ALPHA, new float[]{0.0f});
                            ClippingImageView clippingImageView = this.animatingImageView;
                            Property property = View.TRANSLATION_Y;
                            float[] fArr2 = new float[1];
                            fArr2[0] = this.translationY >= 0.0f ? (float) h : (float) (-h);
                            animatorArr[2] = ObjectAnimator.ofFloat(clippingImageView, property, fArr2);
                            animatorArr[3] = ObjectAnimator.ofFloat(this.containerView, View.ALPHA, new float[]{0.0f});
                            animatorSet.playTogether(animatorArr);
                        }
                        this.animationEndRunnable = new PhotoViewer$$ExternalSyntheticLambda51(this, object);
                        animatorSet.setDuration(200);
                        animatorSet.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animation) {
                                AndroidUtilities.runOnUIThread(new PhotoViewer$65$$ExternalSyntheticLambda0(this));
                            }

                            /* renamed from: lambda$onAnimationEnd$0$org-telegram-ui-PhotoViewer$65  reason: not valid java name */
                            public /* synthetic */ void m3634lambda$onAnimationEnd$0$orgtelegramuiPhotoViewer$65() {
                                if (PhotoViewer.this.animationEndRunnable != null) {
                                    PhotoViewer.this.animationEndRunnable.run();
                                    Runnable unused = PhotoViewer.this.animationEndRunnable = null;
                                }
                            }
                        });
                        this.transitionAnimationStartTime = System.currentTimeMillis();
                        if (Build.VERSION.SDK_INT >= 18) {
                            this.containerView.setLayerType(2, (Paint) null);
                        }
                        animatorSet.start();
                    } else {
                        AnimatorSet animatorSet2 = new AnimatorSet();
                        animatorSet2.playTogether(new Animator[]{ObjectAnimator.ofFloat(this.containerView, View.SCALE_X, new float[]{0.9f}), ObjectAnimator.ofFloat(this.containerView, View.SCALE_Y, new float[]{0.9f}), ObjectAnimator.ofInt(this.backgroundDrawable, AnimationProperties.COLOR_DRAWABLE_ALPHA, new int[]{0}), ObjectAnimator.ofFloat(this.containerView, View.ALPHA, new float[]{0.0f})});
                        this.animationInProgress = 2;
                        this.animationEndRunnable = new PhotoViewer$$ExternalSyntheticLambda52(this, object);
                        animatorSet2.setDuration(200);
                        animatorSet2.addListener(new AnimatorListenerAdapter() {
                            /* JADX WARNING: type inference failed for: r1v9, types: [org.telegram.ui.ActionBar.BaseFragment] */
                            /* JADX WARNING: Multi-variable type inference failed */
                            /* JADX WARNING: Unknown variable types count: 1 */
                            /* Code decompiled incorrectly, please refer to instructions dump. */
                            public void onAnimationEnd(android.animation.Animator r4) {
                                /*
                                    r3 = this;
                                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                                    java.lang.Runnable r0 = r0.animationEndRunnable
                                    if (r0 == 0) goto L_0x0044
                                    org.telegram.ui.PhotoViewer r0 = org.telegram.ui.PhotoViewer.this
                                    org.telegram.ui.ChatActivity r0 = r0.parentChatActivity
                                    if (r0 != 0) goto L_0x0029
                                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                                    org.telegram.ui.Components.ChatAttachAlert r1 = r1.parentAlert
                                    if (r1 == 0) goto L_0x0029
                                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                                    org.telegram.ui.Components.ChatAttachAlert r1 = r1.parentAlert
                                    org.telegram.ui.ActionBar.BaseFragment r1 = r1.getBaseFragment()
                                    boolean r2 = r1 instanceof org.telegram.ui.ChatActivity
                                    if (r2 == 0) goto L_0x0029
                                    r0 = r1
                                    org.telegram.ui.ChatActivity r0 = (org.telegram.ui.ChatActivity) r0
                                L_0x0029:
                                    if (r0 == 0) goto L_0x0035
                                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                                    java.lang.Runnable r1 = r1.animationEndRunnable
                                    r0.m1760x1bca6a4(r1)
                                    goto L_0x0044
                                L_0x0035:
                                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                                    java.lang.Runnable r1 = r1.animationEndRunnable
                                    r1.run()
                                    org.telegram.ui.PhotoViewer r1 = org.telegram.ui.PhotoViewer.this
                                    r2 = 0
                                    java.lang.Runnable unused = r1.animationEndRunnable = r2
                                L_0x0044:
                                    return
                                */
                                throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.AnonymousClass66.onAnimationEnd(android.animation.Animator):void");
                            }
                        });
                        this.transitionAnimationStartTime = System.currentTimeMillis();
                        if (Build.VERSION.SDK_INT >= 18) {
                            this.containerView.setLayerType(2, (Paint) null);
                        }
                        animatorSet2.start();
                    }
                    AnimatedFileDrawable animatedFileDrawable = this.currentAnimation;
                    if (animatedFileDrawable != null) {
                        animatedFileDrawable.removeSecondParentView(this.containerView);
                        this.currentAnimation = null;
                        this.centerImage.setImageBitmap((Drawable) null);
                    }
                    PhotoViewerProvider photoViewerProvider = this.placeProvider;
                    if (photoViewerProvider != null && !photoViewerProvider.canScrollAway()) {
                        this.placeProvider.cancelButtonPressed();
                        return;
                    }
                    return;
                }
                return;
            }
            this.qualityPicker.cancelButton.callOnClick();
        } else if (i2 != 3 || this.photoPaintView == null) {
            if (i2 == 1) {
                this.cropTransform.setViewTransform(this.previousHasTransform, this.previousCropPx, this.previousCropPy, this.previousCropRotation, this.previousCropOrientation, this.previousCropScale, 1.0f, 1.0f, this.previousCropPw, this.previousCropPh, 0.0f, 0.0f, this.previousCropMirrored);
            }
            switchToEditMode(0);
        } else {
            closePaintMode();
        }
    }

    /* renamed from: lambda$closePhoto$62$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3557lambda$closePhoto$62$orgtelegramuiPhotoViewer(PlaceProviderObject object) {
        this.animationEndRunnable = null;
        if (Build.VERSION.SDK_INT >= 18) {
            this.containerView.setLayerType(0, (Paint) null);
        }
        this.animationInProgress = 0;
        onPhotoClosed(object);
    }

    /* renamed from: lambda$closePhoto$63$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3558lambda$closePhoto$63$orgtelegramuiPhotoViewer(PlaceProviderObject object) {
        this.animationEndRunnable = null;
        if (this.containerView != null) {
            if (Build.VERSION.SDK_INT >= 18) {
                this.containerView.setLayerType(0, (Paint) null);
            }
            this.animationInProgress = 0;
            onPhotoClosed(object);
            this.containerView.setScaleX(1.0f);
            this.containerView.setScaleY(1.0f);
        }
    }

    private ClippingImageView[] getAnimatingImageViews(PlaceProviderObject object) {
        boolean hasSecondAnimatingImageView = (AndroidUtilities.isTablet() || object == null || object.animatingImageView == null) ? false : true;
        ClippingImageView[] animatingImageViews = new ClippingImageView[((hasSecondAnimatingImageView ? 1 : 0) + 1)];
        animatingImageViews[0] = this.animatingImageView;
        if (hasSecondAnimatingImageView) {
            animatingImageViews[1] = object.animatingImageView;
            object.animatingImageView.setAdditionalTranslationY((float) object.animatingImageViewYOffset);
        }
        return animatingImageViews;
    }

    private void removeObservers() {
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.fileLoadFailed);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.fileLoaded);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.fileLoadProgressChanged);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.mediaCountDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.mediaDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.dialogPhotosLoaded);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagesDeleted);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.emojiLoaded);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.filePreparingFailed);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.fileNewChunkAvailable);
        ConnectionsManager.getInstance(this.currentAccount).cancelRequestsForGuid(this.classGuid);
    }

    public void destroyPhotoViewer() {
        if (this.parentActivity != null && this.windowView != null) {
            PipVideoView pipVideoView2 = this.pipVideoView;
            if (pipVideoView2 != null) {
                pipVideoView2.close();
                this.pipVideoView = null;
            }
            removeObservers();
            releasePlayer(false);
            try {
                if (this.windowView.getParent() != null) {
                    ((WindowManager) this.parentActivity.getSystemService("window")).removeViewImmediate(this.windowView);
                }
                this.windowView = null;
            } catch (Exception e) {
                FileLog.e((Throwable) e);
            }
            ImageReceiver.BitmapHolder bitmapHolder = this.currentThumb;
            if (bitmapHolder != null) {
                bitmapHolder.release();
                this.currentThumb = null;
            }
            this.animatingImageView.setImageBitmap((ImageReceiver.BitmapHolder) null);
            PhotoViewerCaptionEnterView photoViewerCaptionEnterView = this.captionEditText;
            if (photoViewerCaptionEnterView != null) {
                photoViewerCaptionEnterView.onDestroy();
            }
            if (this == PipInstance) {
                PipInstance = null;
            } else {
                Instance = null;
            }
        }
    }

    private void onPhotoClosed(PlaceProviderObject object) {
        if (this.doneButtonPressed) {
            releasePlayer(true);
        }
        this.isVisible = false;
        this.cropInitied = false;
        this.disableShowCheck = true;
        this.currentMessageObject = null;
        this.currentBotInlineResult = null;
        this.currentFileLocation = null;
        this.currentFileLocationVideo = null;
        this.currentSecureDocument = null;
        this.currentPageBlock = null;
        this.currentPathObject = null;
        if (this.videoPlayerControlFrameLayout != null) {
            setVideoPlayerControlVisible(false, false);
        }
        CaptionScrollView captionScrollView2 = this.captionScrollView;
        if (captionScrollView2 != null) {
            captionScrollView2.reset();
        }
        this.sendPhotoType = 0;
        this.isDocumentsPicker = false;
        ImageReceiver.BitmapHolder bitmapHolder = this.currentThumb;
        if (bitmapHolder != null) {
            bitmapHolder.release();
            this.currentThumb = null;
        }
        this.parentAlert = null;
        AnimatedFileDrawable animatedFileDrawable = this.currentAnimation;
        if (animatedFileDrawable != null) {
            animatedFileDrawable.removeSecondParentView(this.containerView);
            this.currentAnimation = null;
        }
        for (int a = 0; a < 3; a++) {
            PhotoProgressView[] photoProgressViewArr = this.photoProgressViews;
            if (photoProgressViewArr[a] != null) {
                photoProgressViewArr[a].setBackgroundState(-1, false, true);
            }
        }
        requestVideoPreview(0);
        VideoTimelinePlayView videoTimelinePlayView = this.videoTimelineView;
        if (videoTimelinePlayView != null) {
            videoTimelinePlayView.setBackgroundColor(NUM);
            this.videoTimelineView.destroy();
        }
        this.hintView.hide(false, 0);
        Bitmap bitmap = null;
        this.centerImage.setImageBitmap(bitmap);
        this.leftImage.setImageBitmap(bitmap);
        this.rightImage.setImageBitmap(bitmap);
        this.containerView.post(new PhotoViewer$$ExternalSyntheticLambda53(this, object));
        PhotoViewerProvider photoViewerProvider = this.placeProvider;
        if (photoViewerProvider != null) {
            photoViewerProvider.willHidePhotoViewer();
        }
        this.groupedPhotosListView.clear();
        this.placeProvider = null;
        this.selectedPhotosAdapter.notifyDataSetChanged();
        this.pageBlocksAdapter = null;
        this.disableShowCheck = false;
        this.videoCutStart = 0.0f;
        this.videoCutEnd = 1.0f;
        if (object != null) {
            object.imageReceiver.setVisible(true, true);
        }
        ChatActivity chatActivity = this.parentChatActivity;
        if (chatActivity != null) {
            chatActivity.getFragmentView().invalidate();
        }
    }

    /* renamed from: lambda$onPhotoClosed$64$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3572lambda$onPhotoClosed$64$orgtelegramuiPhotoViewer(PlaceProviderObject object) {
        this.animatingImageView.setImageBitmap((ImageReceiver.BitmapHolder) null);
        if (!(object == null || AndroidUtilities.isTablet() || object.animatingImageView == null)) {
            object.animatingImageView.setImageBitmap((ImageReceiver.BitmapHolder) null);
        }
        try {
            if (this.windowView.getParent() != null) {
                ((WindowManager) this.parentActivity.getSystemService("window")).removeView(this.windowView);
            }
        } catch (Exception e) {
            FileLog.e((Throwable) e);
        }
    }

    private void redraw(int count) {
        FrameLayoutDrawer frameLayoutDrawer;
        if (count < 6 && (frameLayoutDrawer = this.containerView) != null) {
            frameLayoutDrawer.invalidate();
            AndroidUtilities.runOnUIThread(new PhotoViewer$$ExternalSyntheticLambda43(this, count), 100);
        }
    }

    /* renamed from: lambda$redraw$65$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3574lambda$redraw$65$orgtelegramuiPhotoViewer(int count) {
        redraw(count + 1);
    }

    public void onResume() {
        redraw(0);
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null) {
            videoPlayer2.seekTo(videoPlayer2.getCurrentPosition() + 1);
            if (this.playerLooping) {
                this.videoPlayer.setLooping(true);
            }
        }
        PhotoPaintView photoPaintView2 = this.photoPaintView;
        if (photoPaintView2 != null) {
            photoPaintView2.onResume();
        }
    }

    public void onConfigurationChanged(Configuration newConfig) {
        PipVideoView pipVideoView2 = this.pipVideoView;
        if (pipVideoView2 != null) {
            pipVideoView2.onConfigurationChanged();
        }
    }

    public void onPause() {
        if (this.currentAnimation != null) {
            closePhoto(false, false);
            return;
        }
        if (this.lastTitle != null) {
            closeCaptionEnter(true);
        }
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null && this.playerLooping) {
            videoPlayer2.setLooping(false);
        }
    }

    public boolean isVisible() {
        return this.isVisible && this.placeProvider != null;
    }

    /* access modifiers changed from: private */
    public void updateMinMax(float scale2) {
        AspectRatioFrameLayout aspectRatioFrameLayout2;
        if (this.currentEditMode == 3 && (aspectRatioFrameLayout2 = this.aspectRatioFrameLayout) != null && aspectRatioFrameLayout2.getVisibility() == 0 && this.textureUploaded) {
            scale2 *= Math.min(((float) getContainerViewWidth()) / ((float) this.videoTextureView.getMeasuredWidth()), ((float) getContainerViewHeight()) / ((float) this.videoTextureView.getMeasuredHeight()));
        }
        float w = this.centerImage.getImageWidth();
        float h = this.centerImage.getImageHeight();
        if (this.editState.cropState != null) {
            w *= this.editState.cropState.cropPw;
            h *= this.editState.cropState.cropPh;
        }
        int maxW = ((int) ((w * scale2) - ((float) getContainerViewWidth()))) / 2;
        int maxH = ((int) ((h * scale2) - ((float) getContainerViewHeight()))) / 2;
        if (maxW > 0) {
            this.minX = (float) (-maxW);
            this.maxX = (float) maxW;
        } else {
            this.maxX = 0.0f;
            this.minX = 0.0f;
        }
        if (maxH > 0) {
            this.minY = (float) (-maxH);
            this.maxY = (float) maxH;
            return;
        }
        this.maxY = 0.0f;
        this.minY = 0.0f;
    }

    private int getAdditionX() {
        int i = this.currentEditMode;
        if (i == 1 || (i == 0 && this.sendPhotoType == 1)) {
            return AndroidUtilities.dp(16.0f);
        }
        if (i == 0 || i == 3) {
            return 0;
        }
        return AndroidUtilities.dp(14.0f);
    }

    private int getAdditionY() {
        int i = this.currentEditMode;
        int i2 = 0;
        if (i == 1 || (i == 0 && this.sendPhotoType == 1)) {
            int dp = AndroidUtilities.dp(16.0f);
            if (isStatusBarVisible()) {
                i2 = AndroidUtilities.statusBarHeight;
            }
            return dp + i2;
        } else if (i == 3) {
            int dp2 = AndroidUtilities.dp(8.0f);
            if (isStatusBarVisible()) {
                i2 = AndroidUtilities.statusBarHeight;
            }
            return dp2 + i2;
        } else if (i == 0) {
            return 0;
        } else {
            int dp3 = AndroidUtilities.dp(14.0f);
            if (isStatusBarVisible()) {
                i2 = AndroidUtilities.statusBarHeight;
            }
            return dp3 + i2;
        }
    }

    /* access modifiers changed from: private */
    public int getContainerViewWidth() {
        return getContainerViewWidth(this.currentEditMode);
    }

    /* access modifiers changed from: private */
    public int getContainerViewWidth(int mode) {
        int width = this.containerView.getWidth();
        if (mode == 1 || (mode == 0 && this.sendPhotoType == 1)) {
            return width - AndroidUtilities.dp(32.0f);
        }
        if (mode == 0 || mode == 3) {
            return width;
        }
        return width - AndroidUtilities.dp(28.0f);
    }

    /* access modifiers changed from: private */
    public int getContainerViewHeight() {
        return getContainerViewHeight(this.currentEditMode);
    }

    /* access modifiers changed from: private */
    public int getContainerViewHeight(int mode) {
        return getContainerViewHeight(false, mode);
    }

    private int getContainerViewHeight(boolean trueHeight, int mode) {
        int height;
        if (trueHeight || this.inBubbleMode) {
            height = this.containerView.getMeasuredHeight();
        } else {
            height = AndroidUtilities.displaySize.y;
            if (mode == 0 && this.sendPhotoType != 1 && isStatusBarVisible()) {
                height += AndroidUtilities.statusBarHeight;
            }
        }
        if ((mode == 0 && this.sendPhotoType == 1) || mode == 1) {
            return height - AndroidUtilities.dp(144.0f);
        }
        if (mode == 2) {
            return height - AndroidUtilities.dp(214.0f);
        }
        if (mode == 3) {
            return height - (AndroidUtilities.dp(48.0f) + ActionBar.getCurrentActionBarHeight());
        }
        return height;
    }

    /* access modifiers changed from: private */
    public boolean onTouchEvent(MotionEvent ev) {
        MotionEvent motionEvent = ev;
        if (this.currentEditMode == 3 && this.animationStartTime != 0 && (ev.getActionMasked() == 0 || ev.getActionMasked() == 5)) {
            if (ev.getPointerCount() < 2) {
                return true;
            }
            cancelMoveZoomAnimation();
        }
        if (this.animationInProgress != 0 || this.animationStartTime != 0) {
            return false;
        }
        if (this.videoPlayerRewinder.rewindCount <= 0) {
            int i = this.currentEditMode;
            if (i == 2) {
                this.photoFilterView.onTouch(motionEvent);
                return true;
            } else if (i == 1 || (i != 3 && this.sendPhotoType == 1)) {
                return true;
            } else {
                if (this.captionEditText.isPopupShowing() || this.captionEditText.isKeyboardVisible()) {
                    if (ev.getAction() == 1) {
                        closeCaptionEnter(true);
                    }
                    return true;
                } else if (this.currentEditMode != 0 || this.sendPhotoType == 1 || ev.getPointerCount() != 1 || !this.gestureDetector.onTouchEvent(motionEvent) || !this.doubleTap) {
                    Tooltip tooltip2 = this.tooltip;
                    if (tooltip2 != null) {
                        tooltip2.hide();
                    }
                    if (ev.getActionMasked() == 0 || ev.getActionMasked() == 5) {
                        this.discardTap = false;
                        if (!this.scroller.isFinished()) {
                            this.scroller.abortAnimation();
                        }
                        if (!this.draggingDown && !this.changingPage) {
                            if (this.canZoom && ev.getPointerCount() == 2) {
                                if (this.paintViewTouched == 1) {
                                    MotionEvent event = MotionEvent.obtain(0, 0, 3, 0.0f, 0.0f, 0);
                                    this.photoPaintView.onTouch(event);
                                    event.recycle();
                                    this.paintViewTouched = 2;
                                }
                                this.pinchStartDistance = (float) Math.hypot((double) (motionEvent.getX(1) - motionEvent.getX(0)), (double) (motionEvent.getY(1) - motionEvent.getY(0)));
                                this.pinchStartScale = this.scale;
                                this.pinchCenterX = (motionEvent.getX(0) + motionEvent.getX(1)) / 2.0f;
                                float y = (motionEvent.getY(0) + motionEvent.getY(1)) / 2.0f;
                                this.pinchCenterY = y;
                                this.pinchStartX = this.translationX;
                                this.pinchStartY = this.translationY;
                                this.zooming = true;
                                this.moving = false;
                                if (this.currentEditMode == 3) {
                                    this.moveStartX = this.pinchCenterX;
                                    this.moveStartY = y;
                                    this.draggingDown = false;
                                    this.canDragDown = false;
                                }
                                hidePressedDrawables();
                                VelocityTracker velocityTracker2 = this.velocityTracker;
                                if (velocityTracker2 != null) {
                                    velocityTracker2.clear();
                                }
                            } else if (ev.getPointerCount() == 1) {
                                if (this.currentEditMode != 3) {
                                    this.moveStartX = ev.getX();
                                    float y2 = ev.getY();
                                    this.moveStartY = y2;
                                    this.dragY = y2;
                                    this.draggingDown = false;
                                    this.canDragDown = true;
                                    VelocityTracker velocityTracker3 = this.velocityTracker;
                                    if (velocityTracker3 != null) {
                                        velocityTracker3.clear();
                                    }
                                } else if (this.paintViewTouched == 0) {
                                    this.photoPaintView.getHitRect(this.hitRect);
                                    if (this.hitRect.contains((int) ev.getX(), (int) ev.getY())) {
                                        MotionEvent event2 = MotionEvent.obtain(ev);
                                        event2.offsetLocation(-this.photoPaintView.getX(), -this.photoPaintView.getY());
                                        this.photoPaintView.onTouch(event2);
                                        event2.recycle();
                                        this.paintViewTouched = 1;
                                    }
                                }
                            }
                        }
                        if (ev.getActionMasked() == 0) {
                            this.longPressX = ev.getX();
                            AndroidUtilities.runOnUIThread(this.longPressRunnable, 300);
                        } else {
                            AndroidUtilities.cancelRunOnUIThread(this.longPressRunnable);
                        }
                    } else if (ev.getActionMasked() == 2) {
                        if (this.canZoom && ev.getPointerCount() == 2 && !this.draggingDown && this.zooming && !this.changingPage) {
                            this.discardTap = true;
                            if (this.currentEditMode == 3) {
                                float newPinchCenterX = (motionEvent.getX(0) + motionEvent.getX(1)) / 2.0f;
                                float newPinchCenterY = (motionEvent.getY(0) + motionEvent.getY(1)) / 2.0f;
                                float moveDx = this.moveStartX - newPinchCenterX;
                                float moveDy = this.moveStartY - newPinchCenterY;
                                this.moveStartX = newPinchCenterX;
                                this.moveStartY = newPinchCenterY;
                                float f = this.translationX;
                                if (f < this.minX || f > this.maxX) {
                                    moveDx /= 3.0f;
                                }
                                float f2 = this.translationY;
                                if (f2 < this.minY || f2 > this.maxY) {
                                    moveDy /= 3.0f;
                                }
                                this.pinchStartX = ((this.pinchCenterX - ((float) (getContainerViewWidth() / 2))) - (((this.pinchCenterX - ((float) (getContainerViewWidth() / 2))) - this.translationX) / (this.scale / this.pinchStartScale))) - moveDx;
                                this.pinchStartY = ((this.pinchCenterY - ((float) (getContainerViewHeight() / 2))) - (((this.pinchCenterY - ((float) (getContainerViewHeight() / 2))) - this.translationY) / (this.scale / this.pinchStartScale))) - moveDy;
                                this.pinchCenterX = newPinchCenterX;
                                this.pinchCenterY = newPinchCenterY;
                            }
                            this.scale = (((float) Math.hypot((double) (motionEvent.getX(1) - motionEvent.getX(0)), (double) (motionEvent.getY(1) - motionEvent.getY(0)))) / this.pinchStartDistance) * this.pinchStartScale;
                            this.translationX = (this.pinchCenterX - ((float) (getContainerViewWidth() / 2))) - (((this.pinchCenterX - ((float) (getContainerViewWidth() / 2))) - this.pinchStartX) * (this.scale / this.pinchStartScale));
                            float containerViewHeight = this.pinchCenterY - ((float) (getContainerViewHeight() / 2));
                            float containerViewHeight2 = (this.pinchCenterY - ((float) (getContainerViewHeight() / 2))) - this.pinchStartY;
                            float f3 = this.scale;
                            this.translationY = containerViewHeight - (containerViewHeight2 * (f3 / this.pinchStartScale));
                            updateMinMax(f3);
                            this.containerView.invalidate();
                        } else if (ev.getPointerCount() == 1) {
                            if (this.paintViewTouched == 1) {
                                MotionEvent event3 = MotionEvent.obtain(ev);
                                event3.offsetLocation(-this.photoPaintView.getX(), -this.photoPaintView.getY());
                                this.photoPaintView.onTouch(event3);
                                event3.recycle();
                                return true;
                            }
                            VelocityTracker velocityTracker4 = this.velocityTracker;
                            if (velocityTracker4 != null) {
                                velocityTracker4.addMovement(motionEvent);
                            }
                            float dx = Math.abs(ev.getX() - this.moveStartX);
                            float dy = Math.abs(ev.getY() - this.dragY);
                            int i2 = this.touchSlop;
                            if (dx > ((float) i2) || dy > ((float) i2)) {
                                this.discardTap = true;
                                hidePressedDrawables();
                                AndroidUtilities.cancelRunOnUIThread(this.longPressRunnable);
                                QualityChooseView qualityChooseView2 = this.qualityChooseView;
                                if (qualityChooseView2 != null && qualityChooseView2.getVisibility() == 0) {
                                    return true;
                                }
                            }
                            if (this.placeProvider.canScrollAway() && this.currentEditMode == 0 && this.sendPhotoType != 1 && this.canDragDown && !this.draggingDown && this.scale == 1.0f && dy >= ((float) AndroidUtilities.dp(30.0f)) && dy / 2.0f > dx) {
                                this.draggingDown = true;
                                hidePressedDrawables();
                                this.moving = false;
                                this.dragY = ev.getY();
                                if (this.isActionBarVisible && this.containerView.getTag() != null) {
                                    toggleActionBar(false, true);
                                } else if (this.pickerView.getVisibility() == 0) {
                                    toggleActionBar(false, true);
                                    togglePhotosListView(false, true);
                                    toggleCheckImageView(false);
                                }
                                return true;
                            } else if (this.draggingDown) {
                                this.translationY = ev.getY() - this.dragY;
                                this.containerView.invalidate();
                            } else if (this.invalidCoords || this.animationStartTime != 0) {
                                this.invalidCoords = false;
                                this.moveStartX = ev.getX();
                                this.moveStartY = ev.getY();
                            } else {
                                float moveDx2 = this.moveStartX - ev.getX();
                                float moveDy2 = this.moveStartY - ev.getY();
                                if (this.moving || this.currentEditMode != 0 || ((this.scale == 1.0f && Math.abs(moveDy2) + ((float) AndroidUtilities.dp(12.0f)) < Math.abs(moveDx2)) || this.scale != 1.0f)) {
                                    if (!this.moving) {
                                        moveDx2 = 0.0f;
                                        moveDy2 = 0.0f;
                                        this.moving = true;
                                        this.canDragDown = false;
                                        hidePressedDrawables();
                                    }
                                    this.moveStartX = ev.getX();
                                    this.moveStartY = ev.getY();
                                    updateMinMax(this.scale);
                                    if ((this.translationX < this.minX && (this.currentEditMode != 0 || !this.rightImage.hasImageSet())) || (this.translationX > this.maxX && (this.currentEditMode != 0 || !this.leftImage.hasImageSet()))) {
                                        moveDx2 /= 3.0f;
                                    }
                                    float f4 = this.maxY;
                                    if (f4 == 0.0f) {
                                        float f5 = this.minY;
                                        if (f5 == 0.0f && this.currentEditMode == 0 && this.sendPhotoType != 1) {
                                            float f6 = this.translationY;
                                            if (f6 - moveDy2 < f5) {
                                                this.translationY = f5;
                                                moveDy2 = 0.0f;
                                            } else if (f6 - moveDy2 > f4) {
                                                this.translationY = f4;
                                                moveDy2 = 0.0f;
                                            }
                                            this.translationX -= moveDx2;
                                            if (!(this.scale == 1.0f && this.currentEditMode == 0)) {
                                                this.translationY -= moveDy2;
                                            }
                                            this.containerView.invalidate();
                                        }
                                    }
                                    float f7 = this.translationY;
                                    if (f7 < this.minY || f7 > f4) {
                                        moveDy2 /= 3.0f;
                                    }
                                    this.translationX -= moveDx2;
                                    this.translationY -= moveDy2;
                                    this.containerView.invalidate();
                                }
                            }
                        }
                    } else if (ev.getActionMasked() == 3 || ev.getActionMasked() == 1 || ev.getActionMasked() == 6) {
                        AndroidUtilities.cancelRunOnUIThread(this.longPressRunnable);
                        if (this.paintViewTouched == 1) {
                            if (this.photoPaintView != null) {
                                MotionEvent event4 = MotionEvent.obtain(ev);
                                event4.offsetLocation(-this.photoPaintView.getX(), -this.photoPaintView.getY());
                                this.photoPaintView.onTouch(event4);
                                event4.recycle();
                            }
                            this.paintViewTouched = 0;
                            return true;
                        }
                        this.paintViewTouched = 0;
                        if (this.zooming) {
                            this.invalidCoords = true;
                            float f8 = this.scale;
                            if (f8 < 1.0f) {
                                updateMinMax(1.0f);
                                animateTo(1.0f, 0.0f, 0.0f, true);
                            } else if (f8 > 3.0f) {
                                float atx = (this.pinchCenterX - ((float) (getContainerViewWidth() / 2))) - (((this.pinchCenterX - ((float) (getContainerViewWidth() / 2))) - this.pinchStartX) * (3.0f / this.pinchStartScale));
                                float aty = (this.pinchCenterY - ((float) (getContainerViewHeight() / 2))) - (((this.pinchCenterY - ((float) (getContainerViewHeight() / 2))) - this.pinchStartY) * (3.0f / this.pinchStartScale));
                                updateMinMax(3.0f);
                                if (atx < this.minX) {
                                    atx = this.minX;
                                } else if (atx > this.maxX) {
                                    atx = this.maxX;
                                }
                                if (aty < this.minY) {
                                    aty = this.minY;
                                } else if (aty > this.maxY) {
                                    aty = this.maxY;
                                }
                                animateTo(3.0f, atx, aty, true);
                            } else {
                                checkMinMax(true);
                                if (this.currentEditMode == 3) {
                                    float moveToX = this.translationX;
                                    float moveToY = this.translationY;
                                    updateMinMax(this.scale);
                                    float f9 = this.translationX;
                                    if (f9 < this.minX) {
                                        moveToX = this.minX;
                                    } else if (f9 > this.maxX) {
                                        moveToX = this.maxX;
                                    }
                                    float var_ = this.translationY;
                                    if (var_ < this.minY) {
                                        moveToY = this.minY;
                                    } else if (var_ > this.maxY) {
                                        moveToY = this.maxY;
                                    }
                                    animateTo(this.scale, moveToX, moveToY, false);
                                }
                            }
                            this.zooming = false;
                            this.moving = false;
                        } else if (this.draggingDown) {
                            if (Math.abs(this.dragY - ev.getY()) <= ((float) getContainerViewHeight()) / 6.0f) {
                                if (this.pickerView.getVisibility() == 0) {
                                    toggleActionBar(true, true);
                                    toggleCheckImageView(true);
                                }
                                animateTo(1.0f, 0.0f, 0.0f, false);
                            } else if (!enableSwipeToPiP() || this.dragY - ev.getY() <= 0.0f) {
                                closePhoto(true, false);
                            } else {
                                switchToPip(true);
                            }
                            this.draggingDown = false;
                        } else if (this.moving) {
                            float moveToX2 = this.translationX;
                            float moveToY2 = this.translationY;
                            updateMinMax(this.scale);
                            this.moving = false;
                            this.canDragDown = true;
                            float velocity = 0.0f;
                            VelocityTracker velocityTracker5 = this.velocityTracker;
                            if (velocityTracker5 != null && this.scale == 1.0f) {
                                velocityTracker5.computeCurrentVelocity(1000);
                                velocity = this.velocityTracker.getXVelocity();
                            }
                            if (this.currentEditMode == 0 && this.sendPhotoType != 1) {
                                if ((this.translationX < this.minX - ((float) (getContainerViewWidth() / 3)) || velocity < ((float) (-AndroidUtilities.dp(650.0f)))) && this.rightImage.hasImageSet()) {
                                    goToNext();
                                    return true;
                                } else if ((this.translationX > this.maxX + ((float) (getContainerViewWidth() / 3)) || velocity > ((float) AndroidUtilities.dp(650.0f))) && this.leftImage.hasImageSet()) {
                                    goToPrev();
                                    return true;
                                }
                            }
                            float var_ = this.translationX;
                            if (var_ < this.minX) {
                                moveToX2 = this.minX;
                            } else if (var_ > this.maxX) {
                                moveToX2 = this.maxX;
                            }
                            float var_ = this.translationY;
                            if (var_ < this.minY) {
                                moveToY2 = this.minY;
                            } else if (var_ > this.maxY) {
                                moveToY2 = this.maxY;
                            }
                            animateTo(this.scale, moveToX2, moveToY2, false);
                        }
                    }
                    return false;
                } else {
                    this.doubleTap = false;
                    this.moving = false;
                    this.zooming = false;
                    checkMinMax(false);
                    return true;
                }
            }
        } else if (ev.getAction() != 1 && ev.getAction() != 3) {
            return true;
        } else {
            this.videoPlayerRewinder.cancelRewind();
            return false;
        }
    }

    private void checkMinMax(boolean zoom) {
        float moveToX = this.translationX;
        float moveToY = this.translationY;
        updateMinMax(this.scale);
        float f = this.translationX;
        if (f < this.minX) {
            moveToX = this.minX;
        } else if (f > this.maxX) {
            moveToX = this.maxX;
        }
        float f2 = this.translationY;
        if (f2 < this.minY) {
            moveToY = this.minY;
        } else if (f2 > this.maxY) {
            moveToY = this.maxY;
        }
        animateTo(this.scale, moveToX, moveToY, zoom);
    }

    private void goToNext() {
        float extra = 0.0f;
        if (this.scale != 1.0f) {
            extra = ((((float) getContainerViewWidth()) - this.centerImage.getImageWidth()) / 2.0f) * this.scale;
        }
        this.switchImageAfterAnimation = 1;
        animateTo(this.scale, ((this.minX - ((float) getContainerViewWidth())) - extra) - ((float) (AndroidUtilities.dp(30.0f) / 2)), this.translationY, false);
    }

    private void goToPrev() {
        float extra = 0.0f;
        if (this.scale != 1.0f) {
            extra = ((((float) getContainerViewWidth()) - this.centerImage.getImageWidth()) / 2.0f) * this.scale;
        }
        this.switchImageAfterAnimation = 2;
        animateTo(this.scale, this.maxX + ((float) getContainerViewWidth()) + extra + ((float) (AndroidUtilities.dp(30.0f) / 2)), this.translationY, false);
    }

    private void cancelMoveZoomAnimation() {
        AnimatorSet animatorSet = this.imageMoveAnimation;
        if (animatorSet != null) {
            float f = this.scale;
            float f2 = this.animationValue;
            float ts = f + ((this.animateToScale - f) * f2);
            float f3 = this.translationX;
            float tx = f3 + ((this.animateToX - f3) * f2);
            float f4 = this.translationY;
            animatorSet.cancel();
            this.scale = ts;
            this.translationX = tx;
            this.translationY = f4 + ((this.animateToY - f4) * f2);
            this.animationStartTime = 0;
            updateMinMax(ts);
            this.zoomAnimation = false;
            this.containerView.invalidate();
        }
    }

    private void animateTo(float newScale, float newTx, float newTy, boolean isZoom) {
        animateTo(newScale, newTx, newTy, isZoom, 250);
    }

    private void animateTo(float newScale, float newTx, float newTy, boolean isZoom, int duration) {
        if (this.scale != newScale || this.translationX != newTx || this.translationY != newTy) {
            this.zoomAnimation = isZoom;
            this.animateToScale = newScale;
            this.animateToX = newTx;
            this.animateToY = newTy;
            this.animationStartTime = System.currentTimeMillis();
            AnimatorSet animatorSet = new AnimatorSet();
            this.imageMoveAnimation = animatorSet;
            animatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this, AnimationProperties.PHOTO_VIEWER_ANIMATION_VALUE, new float[]{0.0f, 1.0f})});
            this.imageMoveAnimation.setInterpolator(this.interpolator);
            this.imageMoveAnimation.setDuration((long) duration);
            this.imageMoveAnimation.addListener(new AnimatorListenerAdapter() {
                public void onAnimationEnd(Animator animation) {
                    AnimatorSet unused = PhotoViewer.this.imageMoveAnimation = null;
                    PhotoViewer.this.containerView.invalidate();
                }
            });
            this.imageMoveAnimation.start();
        }
    }

    public void setAnimationValue(float value) {
        this.animationValue = value;
        this.containerView.invalidate();
    }

    public float getAnimationValue() {
        return this.animationValue;
    }

    private void switchToNextIndex(int add, boolean init) {
        if (this.currentMessageObject != null) {
            releasePlayer(false);
            FileLoader.getInstance(this.currentAccount).cancelLoadFile(this.currentMessageObject.getDocument());
        } else if (this.currentPageBlock != null) {
            TLObject media = this.pageBlocksAdapter.getMedia(this.currentIndex);
            if (media instanceof TLRPC.Document) {
                releasePlayer(false);
                FileLoader.getInstance(this.currentAccount).cancelLoadFile((TLRPC.Document) media);
            }
        }
        GroupedPhotosListView groupedPhotosListView2 = this.groupedPhotosListView;
        if (groupedPhotosListView2 != null) {
            groupedPhotosListView2.setAnimateBackground(true);
        }
        this.playerAutoStarted = false;
        setImageIndex(this.currentIndex + add, init, true);
        if (shouldMessageObjectAutoPlayed(this.currentMessageObject) || shouldIndexAutoPlayed(this.currentIndex)) {
            this.playerAutoStarted = true;
            onActionClick(true);
            checkProgress(0, false, true);
        }
        checkFullscreenButton();
    }

    /* access modifiers changed from: private */
    public boolean shouldMessageObjectAutoPlayed(MessageObject messageObject) {
        return messageObject != null && messageObject.isVideo() && (messageObject.mediaExists || messageObject.attachPathExists || (messageObject.canStreamVideo() && SharedConfig.streamMedia)) && SharedConfig.autoplayVideo;
    }

    private boolean shouldIndexAutoPlayed(int index) {
        File mediaFile;
        PageBlocksAdapter pageBlocksAdapter2 = this.pageBlocksAdapter;
        if (pageBlocksAdapter2 == null || !pageBlocksAdapter2.isVideo(index) || !SharedConfig.autoplayVideo || (mediaFile = this.pageBlocksAdapter.getFile(index)) == null || !mediaFile.exists()) {
            return false;
        }
        return true;
    }

    /* access modifiers changed from: private */
    public float getCropFillScale(boolean rotated) {
        ImageReceiver imageReceiver = this.centerImage;
        int width = rotated ? imageReceiver.getBitmapHeight() : imageReceiver.getBitmapWidth();
        ImageReceiver imageReceiver2 = this.centerImage;
        int height = rotated ? imageReceiver2.getBitmapWidth() : imageReceiver2.getBitmapHeight();
        float minSide = Math.min((float) this.photoCropView.getMeasuredWidth(), (((float) this.photoCropView.getMeasuredHeight()) - ((float) AndroidUtilities.dp(64.0f))) - ((float) (isStatusBarVisible() ? AndroidUtilities.statusBarHeight : 0))) - ((float) (AndroidUtilities.dp(16.0f) * 2));
        return Math.max(minSide / ((float) width), minSide / ((float) height));
    }

    /* access modifiers changed from: private */
    public boolean isStatusBarVisible() {
        return Build.VERSION.SDK_INT >= 21 && !this.inBubbleMode;
    }

    /* access modifiers changed from: private */
    /* JADX WARNING: Removed duplicated region for block: B:151:0x0319  */
    /* JADX WARNING: Removed duplicated region for block: B:152:0x038a  */
    /* JADX WARNING: Removed duplicated region for block: B:155:0x03d2  */
    /* JADX WARNING: Removed duplicated region for block: B:176:0x042d  */
    /* JADX WARNING: Removed duplicated region for block: B:177:0x042f  */
    /* JADX WARNING: Removed duplicated region for block: B:186:0x0468  */
    /* JADX WARNING: Removed duplicated region for block: B:187:0x046b  */
    /* JADX WARNING: Removed duplicated region for block: B:197:0x04a4  */
    /* JADX WARNING: Removed duplicated region for block: B:219:0x051d  */
    /* JADX WARNING: Removed duplicated region for block: B:226:0x052d  */
    /* JADX WARNING: Removed duplicated region for block: B:227:0x053c  */
    /* JADX WARNING: Removed duplicated region for block: B:230:0x056e  */
    /* JADX WARNING: Removed duplicated region for block: B:257:0x05aa  */
    /* JADX WARNING: Removed duplicated region for block: B:259:0x05b1  */
    /* JADX WARNING: Removed duplicated region for block: B:316:0x06de  */
    /* JADX WARNING: Removed duplicated region for block: B:319:0x06ee  */
    /* JADX WARNING: Removed duplicated region for block: B:369:0x0803  */
    /* JADX WARNING: Removed duplicated region for block: B:372:0x0812  */
    /* JADX WARNING: Removed duplicated region for block: B:378:0x083d  */
    /* JADX WARNING: Removed duplicated region for block: B:407:0x08a6  */
    /* JADX WARNING: Removed duplicated region for block: B:431:0x0933  */
    /* JADX WARNING: Removed duplicated region for block: B:434:0x0941  */
    /* JADX WARNING: Removed duplicated region for block: B:442:0x096b  */
    /* JADX WARNING: Removed duplicated region for block: B:446:0x0976  */
    /* JADX WARNING: Removed duplicated region for block: B:476:0x0a4f  */
    /* JADX WARNING: Removed duplicated region for block: B:491:0x0a72  */
    /* JADX WARNING: Removed duplicated region for block: B:496:0x0a81  */
    /* JADX WARNING: Removed duplicated region for block: B:497:0x0a83  */
    /* JADX WARNING: Removed duplicated region for block: B:500:0x0a87  */
    /* JADX WARNING: Removed duplicated region for block: B:509:0x0aa0  */
    /* JADX WARNING: Removed duplicated region for block: B:510:0x0aa3  */
    /* JADX WARNING: Removed duplicated region for block: B:513:0x0aa7  */
    /* JADX WARNING: Removed duplicated region for block: B:516:0x0ab7  */
    /* JADX WARNING: Removed duplicated region for block: B:517:0x0ac2  */
    /* JADX WARNING: Removed duplicated region for block: B:528:0x0b22  */
    /* JADX WARNING: Removed duplicated region for block: B:535:0x0b52  */
    /* JADX WARNING: Removed duplicated region for block: B:543:0x0CLASSNAME  */
    /* JADX WARNING: Removed duplicated region for block: B:548:0x0c3d  */
    /* JADX WARNING: Removed duplicated region for block: B:570:0x0c9d  */
    /* JADX WARNING: Removed duplicated region for block: B:575:0x0cac  */
    /* JADX WARNING: Removed duplicated region for block: B:581:0x0a45 A[EDGE_INSN: B:581:0x0a45->B:473:0x0a45 ?: BREAK  , SYNTHETIC] */
    /* JADX WARNING: Removed duplicated region for block: B:588:? A[RETURN, SYNTHETIC] */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public void onDraw(android.graphics.Canvas r49) {
        /*
            r48 = this;
            r1 = r48
            r2 = r49
            int r0 = r1.animationInProgress
            r3 = 1
            java.lang.Integer r4 = java.lang.Integer.valueOf(r3)
            if (r0 == r3) goto L_0x0cea
            r5 = 3
            if (r0 == r5) goto L_0x0cea
            boolean r6 = r1.isVisible
            r7 = 2
            if (r6 != 0) goto L_0x001d
            if (r0 == r7) goto L_0x001d
            boolean r0 = r1.pipAnimationInProgress
            if (r0 != 0) goto L_0x001d
            goto L_0x0cea
        L_0x001d:
            boolean r0 = r1.padImageForHorizontalInsets
            r6 = 0
            if (r0 == 0) goto L_0x0034
            r49.save()
            int r0 = r48.getLeftInset()
            int r0 = r0 / r7
            int r8 = r48.getRightInset()
            int r8 = r8 / r7
            int r0 = r0 - r8
            float r0 = (float) r0
            r2.translate(r0, r6)
        L_0x0034:
            r0 = -1082130432(0xffffffffbvar_, float:-1.0)
            long r8 = java.lang.System.currentTimeMillis()
            long r10 = r1.videoCrossfadeAlphaLastTime
            long r10 = r8 - r10
            r12 = 20
            int r14 = (r10 > r12 ? 1 : (r10 == r12 ? 0 : -1))
            if (r14 <= 0) goto L_0x0046
            r10 = 17
        L_0x0046:
            r1.videoCrossfadeAlphaLastTime = r8
            android.animation.AnimatorSet r12 = r1.imageMoveAnimation
            r14 = 1065353216(0x3var_, float:1.0)
            if (r12 == 0) goto L_0x0094
            android.widget.Scroller r12 = r1.scroller
            boolean r12 = r12.isFinished()
            if (r12 != 0) goto L_0x005b
            android.widget.Scroller r12 = r1.scroller
            r12.abortAnimation()
        L_0x005b:
            float r12 = r1.scale
            float r15 = r1.animateToScale
            float r16 = r15 - r12
            float r5 = r1.animationValue
            float r16 = r16 * r5
            float r16 = r12 + r16
            float r7 = r1.translationX
            float r3 = r1.animateToX
            float r3 = r3 - r7
            float r3 = r3 * r5
            float r3 = r3 + r7
            float r13 = r1.translationY
            float r6 = r1.animateToY
            float r6 = r6 - r13
            float r6 = r6 * r5
            float r13 = r13 + r6
            int r5 = (r15 > r14 ? 1 : (r15 == r14 ? 0 : -1))
            if (r5 != 0) goto L_0x0085
            int r5 = (r12 > r14 ? 1 : (r12 == r14 ? 0 : -1))
            if (r5 != 0) goto L_0x0085
            r5 = 0
            int r6 = (r7 > r5 ? 1 : (r7 == r5 ? 0 : -1))
            if (r6 != 0) goto L_0x0085
            r0 = r13
        L_0x0085:
            r5 = r16
            r6 = r13
            r7 = r3
            r1.updateMinMax(r5)
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r12 = r1.containerView
            r12.invalidate()
            r3 = r0
            goto L_0x0166
        L_0x0094:
            long r5 = r1.animationStartTime
            r12 = 0
            int r3 = (r5 > r12 ? 1 : (r5 == r12 ? 0 : -1))
            if (r3 == 0) goto L_0x00b0
            float r3 = r1.animateToX
            r1.translationX = r3
            float r3 = r1.animateToY
            r1.translationY = r3
            float r3 = r1.animateToScale
            r1.scale = r3
            r1.animationStartTime = r12
            r1.updateMinMax(r3)
            r3 = 0
            r1.zoomAnimation = r3
        L_0x00b0:
            android.widget.Scroller r3 = r1.scroller
            boolean r3 = r3.isFinished()
            if (r3 != 0) goto L_0x010b
            android.widget.Scroller r3 = r1.scroller
            boolean r3 = r3.computeScrollOffset()
            if (r3 == 0) goto L_0x010b
            android.widget.Scroller r3 = r1.scroller
            int r3 = r3.getStartX()
            float r3 = (float) r3
            float r5 = r1.maxX
            int r3 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r3 >= 0) goto L_0x00e3
            android.widget.Scroller r3 = r1.scroller
            int r3 = r3.getStartX()
            float r3 = (float) r3
            float r5 = r1.minX
            int r3 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r3 <= 0) goto L_0x00e3
            android.widget.Scroller r3 = r1.scroller
            int r3 = r3.getCurrX()
            float r3 = (float) r3
            r1.translationX = r3
        L_0x00e3:
            android.widget.Scroller r3 = r1.scroller
            int r3 = r3.getStartY()
            float r3 = (float) r3
            float r5 = r1.maxY
            int r3 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r3 >= 0) goto L_0x0106
            android.widget.Scroller r3 = r1.scroller
            int r3 = r3.getStartY()
            float r3 = (float) r3
            float r5 = r1.minY
            int r3 = (r3 > r5 ? 1 : (r3 == r5 ? 0 : -1))
            if (r3 <= 0) goto L_0x0106
            android.widget.Scroller r3 = r1.scroller
            int r3 = r3.getCurrY()
            float r3 = (float) r3
            r1.translationY = r3
        L_0x0106:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r1.containerView
            r3.invalidate()
        L_0x010b:
            int r3 = r1.switchImageAfterAnimation
            if (r3 == 0) goto L_0x0157
            r3 = 0
            r1.openedFullScreenVideo = r3
            java.util.ArrayList<java.lang.Object> r3 = r1.imagesArrLocals
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L_0x013b
            int r3 = r1.currentIndex
            if (r3 < 0) goto L_0x013b
            java.util.ArrayList<java.lang.Object> r5 = r1.imagesArrLocals
            int r5 = r5.size()
            if (r3 >= r5) goto L_0x013b
            java.util.ArrayList<java.lang.Object> r3 = r1.imagesArrLocals
            int r5 = r1.currentIndex
            java.lang.Object r3 = r3.get(r5)
            boolean r5 = r3 instanceof org.telegram.messenger.MediaController.MediaEditState
            if (r5 == 0) goto L_0x013b
            r5 = r3
            org.telegram.messenger.MediaController$MediaEditState r5 = (org.telegram.messenger.MediaController.MediaEditState) r5
            org.telegram.messenger.VideoEditedInfo r6 = r48.getCurrentVideoEditedInfo()
            r5.editedInfo = r6
        L_0x013b:
            int r3 = r1.switchImageAfterAnimation
            r5 = 1
            if (r3 != r5) goto L_0x0149
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda40 r3 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda40
            r3.<init>(r1)
            org.telegram.messenger.AndroidUtilities.runOnUIThread(r3)
            goto L_0x0154
        L_0x0149:
            r5 = 2
            if (r3 != r5) goto L_0x0154
            org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda41 r3 = new org.telegram.ui.PhotoViewer$$ExternalSyntheticLambda41
            r3.<init>(r1)
            org.telegram.messenger.AndroidUtilities.runOnUIThread(r3)
        L_0x0154:
            r3 = 0
            r1.switchImageAfterAnimation = r3
        L_0x0157:
            float r5 = r1.scale
            float r6 = r1.translationY
            float r7 = r1.translationX
            boolean r3 = r1.moving
            if (r3 != 0) goto L_0x0165
            float r0 = r1.translationY
            r3 = r0
            goto L_0x0166
        L_0x0165:
            r3 = r0
        L_0x0166:
            org.telegram.ui.Components.PhotoViewerWebView r0 = r1.photoViewerWebView
            if (r0 == 0) goto L_0x016d
            r0.setTranslationY(r6)
        L_0x016d:
            boolean r0 = r1.isActionBarVisible
            if (r0 == 0) goto L_0x01db
            r0 = 1065354055(0x3var_, float:1.0001)
            r12 = 120(0x78, double:5.93E-322)
            int r0 = (r5 > r0 ? 1 : (r5 == r0 ? 0 : -1))
            if (r0 > 0) goto L_0x01b0
            boolean r0 = r1.allowShowFullscreenButton
            if (r0 != 0) goto L_0x01db
            android.widget.ImageView[] r0 = r1.fullscreenButton
            r15 = 0
            r0 = r0[r15]
            java.lang.Object r0 = r0.getTag()
            if (r0 != 0) goto L_0x01db
            android.widget.ImageView[] r0 = r1.fullscreenButton
            r0 = r0[r15]
            android.view.ViewPropertyAnimator r0 = r0.animate()
            android.view.ViewPropertyAnimator r0 = r0.alpha(r14)
            android.view.ViewPropertyAnimator r0 = r0.setDuration(r12)
            org.telegram.ui.PhotoViewer$68 r12 = new org.telegram.ui.PhotoViewer$68
            r12.<init>()
            android.view.ViewPropertyAnimator r0 = r0.setListener(r12)
            r0.start()
            android.widget.ImageView[] r0 = r1.fullscreenButton
            r0 = r0[r15]
            r0.setTag(r4)
            r0 = 1
            r1.allowShowFullscreenButton = r0
            goto L_0x01db
        L_0x01b0:
            boolean r0 = r1.allowShowFullscreenButton
            if (r0 == 0) goto L_0x01db
            android.widget.ImageView[] r0 = r1.fullscreenButton
            r15 = 0
            r0 = r0[r15]
            android.view.ViewPropertyAnimator r0 = r0.animate()
            r14 = 0
            android.view.ViewPropertyAnimator r0 = r0.alpha(r14)
            android.view.ViewPropertyAnimator r0 = r0.setDuration(r12)
            org.telegram.ui.PhotoViewer$69 r12 = new org.telegram.ui.PhotoViewer$69
            r12.<init>()
            android.view.ViewPropertyAnimator r0 = r0.setListener(r12)
            r0.start()
            android.widget.ImageView[] r0 = r1.fullscreenButton
            r0 = r0[r15]
            r0.setTag(r4)
            r1.allowShowFullscreenButton = r15
        L_0x01db:
            int r4 = r48.getContainerViewWidth()
            int r12 = r48.getContainerViewHeight()
            int r0 = r1.animationInProgress
            r14 = 4
            r15 = -1082130432(0xffffffffbvar_, float:-1.0)
            r13 = 2
            if (r0 == r13) goto L_0x0238
            if (r0 == r14) goto L_0x0238
            boolean r13 = r1.pipAnimationInProgress
            if (r13 != 0) goto L_0x0238
            boolean r13 = r1.isInline
            if (r13 != 0) goto L_0x0238
            int r0 = r1.currentEditMode
            if (r0 != 0) goto L_0x0230
            int r0 = r1.sendPhotoType
            r13 = 1
            if (r0 == r13) goto L_0x0230
            float r0 = r1.scale
            r13 = 1065353216(0x3var_, float:1.0)
            int r0 = (r0 > r13 ? 1 : (r0 == r13 ? 0 : -1))
            if (r0 != 0) goto L_0x0230
            int r0 = (r3 > r15 ? 1 : (r3 == r15 ? 0 : -1))
            if (r0 == 0) goto L_0x0230
            boolean r0 = r1.zoomAnimation
            if (r0 != 0) goto L_0x0230
            float r0 = (float) r4
            r13 = 1082130432(0x40800000, float:4.0)
            float r0 = r0 / r13
            org.telegram.ui.PhotoViewer$BackgroundDrawable r13 = r1.backgroundDrawable
            r15 = 1123942400(0x42fe0000, float:127.0)
            float r14 = java.lang.Math.abs(r3)
            float r14 = java.lang.Math.min(r14, r0)
            float r14 = r14 / r0
            r16 = 1065353216(0x3var_, float:1.0)
            float r14 = r16 - r14
            r20 = 1132396544(0x437var_, float:255.0)
            float r14 = r14 * r20
            float r14 = java.lang.Math.max(r15, r14)
            int r14 = (int) r14
            r13.setAlpha(r14)
            goto L_0x0240
        L_0x0230:
            org.telegram.ui.PhotoViewer$BackgroundDrawable r0 = r1.backgroundDrawable
            r13 = 255(0xff, float:3.57E-43)
            r0.setAlpha(r13)
            goto L_0x0240
        L_0x0238:
            r13 = 4
            if (r0 != r13) goto L_0x0240
            r0 = -16777216(0xfffffffffvar_, float:-1.7014118E38)
            r2.drawColor(r0)
        L_0x0240:
            r13 = 0
            r1.sideImage = r13
            int r0 = r1.currentEditMode
            if (r0 != 0) goto L_0x028f
            int r0 = r1.sendPhotoType
            r14 = 1
            if (r0 == r14) goto L_0x028f
            float r0 = r1.scale
            r14 = 1065353216(0x3var_, float:1.0)
            int r0 = (r0 > r14 ? 1 : (r0 == r14 ? 0 : -1))
            if (r0 < 0) goto L_0x0286
            boolean r0 = r1.zoomAnimation
            if (r0 != 0) goto L_0x0286
            boolean r0 = r1.zooming
            if (r0 != 0) goto L_0x0286
            float r0 = r1.maxX
            r14 = 1084227584(0x40a00000, float:5.0)
            int r15 = org.telegram.messenger.AndroidUtilities.dp(r14)
            float r15 = (float) r15
            float r0 = r0 + r15
            int r0 = (r7 > r0 ? 1 : (r7 == r0 ? 0 : -1))
            if (r0 <= 0) goto L_0x026f
            org.telegram.messenger.ImageReceiver r0 = r1.leftImage
            r1.sideImage = r0
            goto L_0x0286
        L_0x026f:
            float r0 = r1.minX
            int r14 = org.telegram.messenger.AndroidUtilities.dp(r14)
            float r14 = (float) r14
            float r0 = r0 - r14
            int r0 = (r7 > r0 ? 1 : (r7 == r0 ? 0 : -1))
            if (r0 >= 0) goto L_0x0280
            org.telegram.messenger.ImageReceiver r0 = r1.rightImage
            r1.sideImage = r0
            goto L_0x0286
        L_0x0280:
            org.telegram.ui.Components.GroupedPhotosListView r0 = r1.groupedPhotosListView
            r14 = 0
            r0.setMoveProgress(r14)
        L_0x0286:
            org.telegram.messenger.ImageReceiver r0 = r1.sideImage
            if (r0 == 0) goto L_0x028c
            r0 = 1
            goto L_0x028d
        L_0x028c:
            r0 = 0
        L_0x028d:
            r1.changingPage = r0
        L_0x028f:
            r0 = 0
        L_0x0290:
            r14 = 3
            if (r0 >= r14) goto L_0x02d9
            r14 = 1
            if (r0 != r14) goto L_0x0298
            r14 = 0
            goto L_0x02ba
        L_0x0298:
            r14 = 2
            if (r0 != r14) goto L_0x02b0
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r14 = r1.containerView
            int r14 = r14.getMeasuredWidth()
            int r14 = -r14
            r15 = 1097859072(0x41700000, float:15.0)
            int r15 = org.telegram.messenger.AndroidUtilities.dp(r15)
            int r14 = r14 - r15
            float r14 = (float) r14
            float r15 = r1.maxX
            float r15 = r7 - r15
            float r14 = r14 + r15
            goto L_0x02ba
        L_0x02b0:
            float r14 = r1.minX
            int r15 = (r7 > r14 ? 1 : (r7 == r14 ? 0 : -1))
            if (r15 >= 0) goto L_0x02b9
            float r14 = r7 - r14
            goto L_0x02ba
        L_0x02b9:
            r14 = 0
        L_0x02ba:
            android.widget.ImageView[] r15 = r1.fullscreenButton
            r15 = r15[r0]
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r13 = r1.containerView
            int r13 = r13.getMeasuredWidth()
            float r13 = (float) r13
            float r13 = r13 + r14
            r20 = 1111490560(0x42400000, float:48.0)
            r26 = r3
            int r3 = org.telegram.messenger.AndroidUtilities.dp(r20)
            float r3 = (float) r3
            float r13 = r13 - r3
            r15.setTranslationX(r13)
            int r0 = r0 + 1
            r3 = r26
            r13 = 0
            goto L_0x0290
        L_0x02d9:
            r26 = r3
            org.telegram.messenger.ImageReceiver r0 = r1.sideImage
            org.telegram.messenger.ImageReceiver r3 = r1.rightImage
            r13 = 1050253722(0x3e99999a, float:0.3)
            if (r0 != r3) goto L_0x03dd
            r0 = r7
            r3 = 0
            r20 = 1065353216(0x3var_, float:1.0)
            boolean r15 = r1.zoomAnimation
            if (r15 != 0) goto L_0x030f
            float r15 = r1.minX
            int r21 = (r0 > r15 ? 1 : (r0 == r15 ? 0 : -1))
            if (r21 >= 0) goto L_0x030f
            float r15 = r15 - r0
            float r14 = (float) r4
            float r15 = r15 / r14
            r14 = 1065353216(0x3var_, float:1.0)
            float r20 = java.lang.Math.min(r14, r15)
            float r15 = r14 - r20
            float r3 = r15 * r13
            int r14 = -r4
            r15 = 1106247680(0x41var_, float:30.0)
            int r21 = org.telegram.messenger.AndroidUtilities.dp(r15)
            r15 = 2
            int r21 = r21 / 2
            int r14 = r14 - r21
            float r0 = (float) r14
            r14 = r20
            goto L_0x0311
        L_0x030f:
            r14 = r20
        L_0x0311:
            org.telegram.messenger.ImageReceiver r15 = r1.sideImage
            boolean r15 = r15.hasBitmapImage()
            if (r15 == 0) goto L_0x038a
            r49.save()
            int r15 = r4 / 2
            float r15 = (float) r15
            int r13 = r12 / 2
            float r13 = (float) r13
            r2.translate(r15, r13)
            r13 = 1106247680(0x41var_, float:30.0)
            int r15 = org.telegram.messenger.AndroidUtilities.dp(r13)
            r13 = 2
            int r15 = r15 / r13
            int r15 = r15 + r4
            float r13 = (float) r15
            float r13 = r13 + r0
            r15 = 0
            r2.translate(r13, r15)
            r13 = 1065353216(0x3var_, float:1.0)
            float r15 = r13 - r3
            r28 = r8
            float r8 = r13 - r3
            r2.scale(r15, r8)
            org.telegram.messenger.ImageReceiver r8 = r1.sideImage
            int r8 = r8.getBitmapWidth()
            org.telegram.messenger.ImageReceiver r9 = r1.sideImage
            int r9 = r9.getBitmapHeight()
            float r13 = (float) r4
            float r15 = (float) r8
            float r13 = r13 / r15
            float r15 = (float) r12
            r30 = r10
            float r10 = (float) r9
            float r15 = r15 / r10
            float r10 = java.lang.Math.min(r13, r15)
            float r11 = (float) r8
            float r11 = r11 * r10
            int r11 = (int) r11
            r21 = r8
            float r8 = (float) r9
            float r8 = r8 * r10
            int r8 = (int) r8
            r22 = r9
            org.telegram.messenger.ImageReceiver r9 = r1.sideImage
            r9.setAlpha(r14)
            org.telegram.messenger.ImageReceiver r9 = r1.sideImage
            r23 = r10
            int r10 = -r11
            r18 = 2
            int r10 = r10 / 2
            float r10 = (float) r10
            r24 = r13
            int r13 = -r8
            int r13 = r13 / 2
            float r13 = (float) r13
            r25 = r15
            float r15 = (float) r11
            r32 = r11
            float r11 = (float) r8
            r9.setImageCoords(r10, r13, r15, r11)
            org.telegram.messenger.ImageReceiver r9 = r1.sideImage
            r9.draw(r2)
            r49.restore()
            goto L_0x038e
        L_0x038a:
            r28 = r8
            r30 = r10
        L_0x038e:
            org.telegram.ui.Components.GroupedPhotosListView r8 = r1.groupedPhotosListView
            float r9 = -r14
            r8.setMoveProgress(r9)
            r49.save()
            float r8 = r6 / r5
            r2.translate(r0, r8)
            float r8 = (float) r4
            float r9 = r1.scale
            r10 = 1065353216(0x3var_, float:1.0)
            float r9 = r9 + r10
            float r8 = r8 * r9
            r9 = 1106247680(0x41var_, float:30.0)
            int r10 = org.telegram.messenger.AndroidUtilities.dp(r9)
            float r9 = (float) r10
            float r8 = r8 + r9
            r9 = 1073741824(0x40000000, float:2.0)
            float r8 = r8 / r9
            float r9 = -r6
            float r9 = r9 / r5
            r2.translate(r8, r9)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r8 = r1.photoProgressViews
            r9 = 1
            r8 = r8[r9]
            r10 = 1065353216(0x3var_, float:1.0)
            float r11 = r10 - r3
            r8.setScale(r11)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r8 = r1.photoProgressViews
            r8 = r8[r9]
            r8.setAlpha(r14)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r8 = r1.photoProgressViews
            r8 = r8[r9]
            r8.onDraw(r2)
            boolean r8 = r1.isActionBarVisible
            if (r8 == 0) goto L_0x03d9
            android.widget.ImageView[] r8 = r1.fullscreenButton
            r8 = r8[r9]
            r8.setAlpha(r14)
        L_0x03d9:
            r49.restore()
            goto L_0x03ee
        L_0x03dd:
            r28 = r8
            r30 = r10
            boolean r0 = r1.isActionBarVisible
            if (r0 == 0) goto L_0x03ee
            android.widget.ImageView[] r0 = r1.fullscreenButton
            r3 = 1
            r0 = r0[r3]
            r3 = 0
            r0.setAlpha(r3)
        L_0x03ee:
            r0 = r7
            r3 = 0
            r8 = 1065353216(0x3var_, float:1.0)
            boolean r9 = r1.zoomAnimation
            if (r9 != 0) goto L_0x041c
            float r9 = r1.maxX
            int r10 = (r0 > r9 ? 1 : (r0 == r9 ? 0 : -1))
            if (r10 <= 0) goto L_0x041c
            int r10 = r1.currentEditMode
            if (r10 != 0) goto L_0x041c
            int r10 = r1.sendPhotoType
            r11 = 1
            if (r10 == r11) goto L_0x041c
            float r9 = r0 - r9
            float r10 = (float) r4
            float r9 = r9 / r10
            r10 = 1065353216(0x3var_, float:1.0)
            float r8 = java.lang.Math.min(r10, r9)
            r9 = 1050253722(0x3e99999a, float:0.3)
            float r3 = r8 * r9
            float r8 = r10 - r8
            float r0 = r1.maxX
            r9 = r8
            r8 = r3
            r3 = r0
            goto L_0x041f
        L_0x041c:
            r9 = r8
            r8 = r3
            r3 = r0
        L_0x041f:
            boolean r0 = r1.videoSizeSet
            if (r0 == 0) goto L_0x042f
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r0 = r1.aspectRatioFrameLayout
            if (r0 == 0) goto L_0x042f
            int r0 = r0.getVisibility()
            if (r0 != 0) goto L_0x042f
            r0 = 1
            goto L_0x0430
        L_0x042f:
            r0 = 0
        L_0x0430:
            r10 = r0
            org.telegram.messenger.ImageReceiver r0 = r1.centerImage
            boolean r0 = r0.hasBitmapImage()
            if (r0 != 0) goto L_0x044d
            if (r10 == 0) goto L_0x0440
            boolean r0 = r1.textureUploaded
            if (r0 == 0) goto L_0x0440
            goto L_0x044d
        L_0x0440:
            r32 = r3
            r40 = r6
            r38 = r7
            r13 = r9
            r34 = r10
            r6 = r30
            goto L_0x0a4b
        L_0x044d:
            r49.save()
            int r0 = r4 / 2
            int r11 = r48.getAdditionX()
            int r0 = r0 + r11
            float r0 = (float) r0
            int r11 = r12 / 2
            int r13 = r48.getAdditionY()
            int r11 = r11 + r13
            float r11 = (float) r11
            r2.translate(r0, r11)
            int r0 = r1.currentEditMode
            r11 = 3
            if (r0 == r11) goto L_0x046b
            float r0 = r1.currentPanTranslationY
            goto L_0x0470
        L_0x046b:
            float r0 = r1.currentPanTranslationY
            r11 = 1073741824(0x40000000, float:2.0)
            float r0 = r0 / r11
        L_0x0470:
            float r0 = r0 + r6
            r2.translate(r3, r0)
            float r0 = r5 - r8
            float r11 = r5 - r8
            r2.scale(r0, r11)
            int r0 = r1.currentEditMode
            r11 = 3
            if (r0 != r11) goto L_0x049f
            int r0 = r1.keyboardSize
            r11 = 1101004800(0x41a00000, float:20.0)
            int r11 = org.telegram.messenger.AndroidUtilities.dp(r11)
            if (r0 <= r11) goto L_0x049f
            r0 = 1
            r11 = 0
            int r13 = r1.getContainerViewHeight(r0, r11)
            int r0 = r1.getContainerViewHeight(r11, r11)
            if (r13 == r0) goto L_0x049f
            int r11 = r13 - r0
            r14 = 2
            int r11 = r11 / r14
            float r11 = (float) r11
            r14 = 0
            r2.translate(r14, r11)
        L_0x049f:
            r0 = 0
            boolean r11 = r1.pipAnimationInProgress
            if (r11 != 0) goto L_0x051d
            if (r10 == 0) goto L_0x04c0
            boolean r11 = r1.textureUploaded
            if (r11 != 0) goto L_0x04ae
            boolean r11 = r1.videoSizeSet
            if (r11 == 0) goto L_0x04c0
        L_0x04ae:
            boolean r11 = r1.videoCrossfadeStarted
            if (r11 == 0) goto L_0x04c0
            float r11 = r1.videoCrossfadeAlpha
            r13 = 1065353216(0x3var_, float:1.0)
            int r11 = (r11 > r13 ? 1 : (r11 == r13 ? 0 : -1))
            if (r11 == 0) goto L_0x04bb
            goto L_0x04c0
        L_0x04bb:
            r20 = r0
            r32 = r3
            goto L_0x0521
        L_0x04c0:
            org.telegram.messenger.ImageReceiver r11 = r1.centerImage
            r11.setAlpha(r9)
            org.telegram.messenger.ImageReceiver r11 = r1.centerImage
            int r11 = r11.getBitmapWidth()
            org.telegram.messenger.ImageReceiver r13 = r1.centerImage
            int r13 = r13.getBitmapHeight()
            boolean r14 = r1.isCurrentVideo
            if (r14 == 0) goto L_0x04e6
            int r14 = r1.currentEditMode
            if (r14 != 0) goto L_0x04e6
            int r14 = r1.sendPhotoType
            r15 = 1
            if (r14 != r15) goto L_0x04e6
            r14 = 0
            float r15 = r1.getCropFillScale(r14)
            r20 = r0
            goto L_0x04f2
        L_0x04e6:
            float r14 = (float) r4
            float r15 = (float) r11
            float r14 = r14 / r15
            float r15 = (float) r12
            r20 = r0
            float r0 = (float) r13
            float r15 = r15 / r0
            float r15 = java.lang.Math.min(r14, r15)
        L_0x04f2:
            float r0 = (float) r11
            float r0 = r0 * r15
            int r0 = (int) r0
            float r11 = (float) r13
            float r11 = r11 * r15
            int r11 = (int) r11
            org.telegram.messenger.ImageReceiver r13 = r1.centerImage
            int r14 = -r0
            r18 = 2
            int r14 = r14 / 2
            float r14 = (float) r14
            r21 = r15
            int r15 = -r11
            int r15 = r15 / 2
            float r15 = (float) r15
            r32 = r3
            float r3 = (float) r0
            r22 = r0
            float r0 = (float) r11
            r13.setImageCoords(r14, r15, r3, r0)
            boolean r0 = r1.isCurrentVideo
            if (r0 == 0) goto L_0x051b
            org.telegram.messenger.ImageReceiver r0 = r1.centerImage
            r0.draw(r2)
            goto L_0x0521
        L_0x051b:
            r0 = 1
            goto L_0x0523
        L_0x051d:
            r20 = r0
            r32 = r3
        L_0x0521:
            r0 = r20
        L_0x0523:
            if (r10 == 0) goto L_0x053c
            boolean r3 = r1.textureUploaded
            if (r3 == 0) goto L_0x053c
            boolean r3 = r1.videoSizeSet
            if (r3 == 0) goto L_0x053c
            android.view.TextureView r3 = r1.videoTextureView
            int r3 = r3.getMeasuredWidth()
            r11 = r3
            android.view.TextureView r13 = r1.videoTextureView
            int r13 = r13.getMeasuredHeight()
            r14 = r13
            goto L_0x054a
        L_0x053c:
            org.telegram.messenger.ImageReceiver r3 = r1.centerImage
            int r3 = r3.getBitmapWidth()
            r11 = r3
            org.telegram.messenger.ImageReceiver r13 = r1.centerImage
            int r13 = r13.getBitmapHeight()
            r14 = r13
        L_0x054a:
            float r15 = (float) r4
            r33 = r9
            float r9 = (float) r3
            float r15 = r15 / r9
            float r9 = (float) r12
            r34 = r10
            float r10 = (float) r13
            float r9 = r9 / r10
            float r9 = java.lang.Math.min(r15, r9)
            float r10 = (float) r3
            float r10 = r10 * r9
            int r10 = (int) r10
            float r15 = (float) r13
            float r15 = r15 * r9
            int r15 = (int) r15
            r20 = 1065353216(0x3var_, float:1.0)
            r35 = r15
            java.util.ArrayList<java.lang.Object> r15 = r1.imagesArrLocals
            boolean r15 = r15.isEmpty()
            r36 = r10
            if (r15 != 0) goto L_0x05aa
            int r15 = r1.currentEditMode
            r10 = 3
            if (r15 == r10) goto L_0x05a4
            r37 = r0
            int r0 = r1.switchingToMode
            if (r0 != r10) goto L_0x057c
            r38 = r7
            goto L_0x05a8
        L_0x057c:
            int r10 = r1.sendPhotoType
            r38 = r7
            r7 = 1
            if (r10 != r7) goto L_0x0590
            if (r0 == 0) goto L_0x058e
            r0 = 3
            if (r15 == r0) goto L_0x058c
            r7 = 2
            if (r15 == r7) goto L_0x058c
            goto L_0x058e
        L_0x058c:
            r0 = 0
            goto L_0x058f
        L_0x058e:
            r0 = 1
        L_0x058f:
            goto L_0x05af
        L_0x0590:
            android.animation.AnimatorSet r7 = r1.imageMoveAnimation
            if (r7 == 0) goto L_0x0597
            r7 = -1
            if (r0 != r7) goto L_0x05a2
        L_0x0597:
            if (r15 == 0) goto L_0x05a2
            r7 = 1
            if (r15 == r7) goto L_0x05a2
            r7 = -1
            if (r0 == r7) goto L_0x05a0
            goto L_0x05a2
        L_0x05a0:
            r0 = 0
            goto L_0x05a3
        L_0x05a2:
            r0 = 1
        L_0x05a3:
            goto L_0x05af
        L_0x05a4:
            r37 = r0
            r38 = r7
        L_0x05a8:
            r0 = 1
            goto L_0x05af
        L_0x05aa:
            r37 = r0
            r38 = r7
            r0 = 0
        L_0x05af:
            if (r0 == 0) goto L_0x0803
            r10 = r3
            r15 = r13
            org.telegram.ui.Components.Crop.CropTransform r7 = r1.cropTransform
            int r7 = r7.getOrientation()
            r39 = r0
            r0 = 90
            if (r7 == r0) goto L_0x05c3
            r0 = 270(0x10e, float:3.78E-43)
            if (r7 != r0) goto L_0x05c9
        L_0x05c3:
            r0 = r11
            r11 = r14
            r14 = r0
            r0 = r10
            r10 = r15
            r15 = r0
        L_0x05c9:
            int r0 = r1.sendPhotoType
            r40 = r6
            r6 = 1
            if (r0 == r6) goto L_0x05de
            int r0 = r1.currentEditMode
            r6 = 3
            if (r0 == r6) goto L_0x05d9
            int r0 = r1.switchingToMode
            if (r0 != r6) goto L_0x05de
        L_0x05d9:
            r0 = 1065353216(0x3var_, float:1.0)
            r21 = r7
            goto L_0x0618
        L_0x05de:
            android.animation.AnimatorSet r0 = r1.imageMoveAnimation
            if (r0 == 0) goto L_0x0609
            int r0 = r1.switchingToMode
            r6 = -1
            if (r0 == r6) goto L_0x0609
            int r6 = r1.currentEditMode
            r21 = r7
            r7 = 1
            if (r6 == r7) goto L_0x0606
            if (r0 == r7) goto L_0x0606
            r7 = 2
            if (r6 == r7) goto L_0x05f6
            r7 = 3
            if (r6 != r7) goto L_0x05fa
        L_0x05f6:
            r6 = -1
            if (r0 != r6) goto L_0x05fa
            goto L_0x0606
        L_0x05fa:
            if (r0 != 0) goto L_0x05ff
            float r0 = r1.animationValue
            goto L_0x0618
        L_0x05ff:
            float r0 = r1.animationValue
            r6 = 1065353216(0x3var_, float:1.0)
            float r0 = r6 - r0
            goto L_0x0618
        L_0x0606:
            r0 = 1065353216(0x3var_, float:1.0)
            goto L_0x0618
        L_0x0609:
            r21 = r7
            int r0 = r1.currentEditMode
            r6 = 2
            if (r0 == r6) goto L_0x0617
            r6 = 3
            if (r0 != r6) goto L_0x0614
            goto L_0x0617
        L_0x0614:
            r0 = 1065353216(0x3var_, float:1.0)
            goto L_0x0618
        L_0x0617:
            r0 = 0
        L_0x0618:
            org.telegram.ui.Components.Crop.CropTransform r6 = r1.cropTransform
            float r6 = r6.getCropPw()
            org.telegram.ui.Components.Crop.CropTransform r7 = r1.cropTransform
            float r7 = r7.getCropPh()
            r22 = r15
            float r15 = (float) r11
            r16 = 1065353216(0x3var_, float:1.0)
            float r23 = r16 - r6
            float r24 = r16 - r0
            float r23 = r23 * r24
            float r23 = r6 + r23
            float r15 = r15 * r23
            int r11 = (int) r15
            float r15 = (float) r14
            float r23 = r16 - r7
            float r24 = r16 - r0
            float r23 = r23 * r24
            float r23 = r7 + r23
            float r15 = r15 * r23
            int r14 = (int) r15
            float r15 = (float) r4
            r23 = r6
            float r6 = (float) r11
            float r15 = r15 / r6
            float r6 = (float) r14
            float r6 = r6 * r15
            r24 = r7
            float r7 = (float) r12
            int r6 = (r6 > r7 ? 1 : (r6 == r7 ? 0 : -1))
            if (r6 <= 0) goto L_0x0655
            float r6 = (float) r12
            float r7 = (float) r14
            float r6 = r6 / r7
            r20 = r6
            goto L_0x0657
        L_0x0655:
            r20 = r15
        L_0x0657:
            int r6 = r1.sendPhotoType
            r7 = 1
            if (r6 == r7) goto L_0x06c8
            int r6 = r1.currentEditMode
            if (r6 != r7) goto L_0x066e
            int r6 = r1.switchingToMode
            if (r6 != 0) goto L_0x0665
            goto L_0x066e
        L_0x0665:
            r43 = r3
            r25 = r11
            r46 = r13
            r41 = r14
            goto L_0x06d0
        L_0x066e:
            org.telegram.ui.PhotoViewer$EditState r6 = r1.editState
            org.telegram.messenger.MediaController$CropState r6 = r6.cropState
            if (r6 == 0) goto L_0x06c8
            float r6 = (float) r11
            float r6 = r6 * r20
            float r7 = (float) r14
            float r7 = r7 * r20
            float r15 = (float) r4
            r25 = r11
            float r11 = (float) r3
            float r15 = r15 / r11
            float r11 = (float) r13
            float r11 = r11 * r15
            r41 = r14
            float r14 = (float) r12
            int r11 = (r11 > r14 ? 1 : (r11 == r14 ? 0 : -1))
            if (r11 <= 0) goto L_0x068d
            float r11 = (float) r12
            float r14 = (float) r13
            float r15 = r11 / r14
        L_0x068d:
            float r11 = (float) r3
            float r11 = r11 * r15
            float r14 = r5 - r8
            float r11 = r11 / r14
            float r14 = (float) r13
            float r14 = r14 * r15
            float r42 = r5 - r8
            float r14 = r14 / r42
            float r42 = r11 - r6
            r16 = 1065353216(0x3var_, float:1.0)
            float r43 = r16 - r0
            float r42 = r42 * r43
            r43 = r3
            float r3 = r6 + r42
            float r42 = r14 - r7
            float r44 = r16 - r0
            float r42 = r42 * r44
            r44 = r6
            float r6 = r7 + r42
            r42 = r7
            float r7 = -r3
            r27 = 1073741824(0x40000000, float:2.0)
            float r7 = r7 / r27
            r45 = r11
            float r11 = -r6
            float r11 = r11 / r27
            r46 = r13
            float r13 = r3 / r27
            r47 = r3
            float r3 = r6 / r27
            r2.clipRect(r7, r11, r13, r3)
            goto L_0x06d0
        L_0x06c8:
            r43 = r3
            r25 = r11
            r46 = r13
            r41 = r14
        L_0x06d0:
            int r3 = r1.sendPhotoType
            r6 = 1
            if (r3 == r6) goto L_0x06ee
            org.telegram.ui.Components.Crop.CropTransform r3 = r1.cropTransform
            boolean r3 = r3.hasViewTransform()
            if (r3 == 0) goto L_0x06de
            goto L_0x06ee
        L_0x06de:
            android.view.TextureView r3 = r1.videoTextureView
            if (r3 == 0) goto L_0x07fc
            r6 = 1065353216(0x3var_, float:1.0)
            r3.setScaleX(r6)
            android.view.TextureView r3 = r1.videoTextureView
            r3.setScaleY(r6)
            goto L_0x07fc
        L_0x06ee:
            int r3 = r1.currentEditMode
            r6 = 1
            if (r3 == r6) goto L_0x0733
            int r3 = r1.sendPhotoType
            if (r3 != r6) goto L_0x06f8
            goto L_0x0733
        L_0x06f8:
            android.view.TextureView r3 = r1.videoTextureView
            if (r3 == 0) goto L_0x0712
            org.telegram.ui.PhotoViewer$EditState r6 = r1.editState
            org.telegram.messenger.MediaController$CropState r6 = r6.cropState
            if (r6 == 0) goto L_0x070d
            org.telegram.ui.PhotoViewer$EditState r6 = r1.editState
            org.telegram.messenger.MediaController$CropState r6 = r6.cropState
            boolean r6 = r6.mirrored
            if (r6 == 0) goto L_0x070d
            r6 = -1082130432(0xffffffffbvar_, float:-1.0)
            goto L_0x070f
        L_0x070d:
            r6 = 1065353216(0x3var_, float:1.0)
        L_0x070f:
            r3.setScaleX(r6)
        L_0x0712:
            org.telegram.ui.PhotoViewer$EditState r3 = r1.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            if (r3 == 0) goto L_0x071f
            org.telegram.ui.PhotoViewer$EditState r3 = r1.editState
            org.telegram.messenger.MediaController$CropState r3 = r3.cropState
            float r3 = r3.cropScale
            goto L_0x0721
        L_0x071f:
            r3 = 1065353216(0x3var_, float:1.0)
        L_0x0721:
            r6 = 1065353216(0x3var_, float:1.0)
            float r7 = r3 - r6
            float r14 = r6 - r0
            float r7 = r7 * r14
            float r7 = r7 + r6
            float r6 = r20 / r9
            float r6 = r6 / r7
            float r3 = r3 * r6
            r15 = r22
            goto L_0x079e
        L_0x0733:
            android.view.TextureView r3 = r1.videoTextureView
            if (r3 == 0) goto L_0x0747
            org.telegram.ui.Components.Crop.CropTransform r6 = r1.cropTransform
            boolean r6 = r6.isMirrored()
            if (r6 == 0) goto L_0x0742
            r6 = -1082130432(0xffffffffbvar_, float:-1.0)
            goto L_0x0744
        L_0x0742:
            r6 = 1065353216(0x3var_, float:1.0)
        L_0x0744:
            r3.setScaleX(r6)
        L_0x0747:
            org.telegram.ui.Components.Crop.CropTransform r3 = r1.cropTransform
            float r3 = r3.getTrueCropScale()
            r6 = 1065353216(0x3var_, float:1.0)
            float r3 = r3 - r6
            float r14 = r6 - r0
            float r3 = r3 * r14
            float r3 = r3 + r6
            org.telegram.ui.Components.Crop.CropTransform r6 = r1.cropTransform
            float r6 = r6.getScale()
            float r6 = r6 / r3
            float r7 = (float) r4
            float r11 = (float) r10
            float r7 = r7 / r11
            r15 = r22
            float r11 = (float) r15
            float r11 = r11 * r7
            float r13 = (float) r12
            int r11 = (r11 > r13 ? 1 : (r11 == r13 ? 0 : -1))
            if (r11 <= 0) goto L_0x076d
            float r11 = (float) r12
            float r13 = (float) r15
            float r7 = r11 / r13
        L_0x076d:
            float r11 = r7 / r9
            float r6 = r6 * r11
            int r11 = r1.sendPhotoType
            r13 = 1
            if (r11 != r13) goto L_0x079c
            int r11 = r1.currentEditMode
            r13 = 3
            if (r11 == r13) goto L_0x078b
            int r11 = r1.switchingToMode
            if (r11 != r13) goto L_0x0780
            goto L_0x078b
        L_0x0780:
            if (r11 != 0) goto L_0x079c
            org.telegram.ui.Components.Crop.CropTransform r11 = r1.cropTransform
            float r11 = r11.getMinScale()
            float r6 = r6 / r11
            r3 = r6
            goto L_0x079d
        L_0x078b:
            org.telegram.ui.Components.Crop.CropTransform r11 = r1.cropTransform
            float r11 = r11.getMinScale()
            r13 = 1065353216(0x3var_, float:1.0)
            float r11 = r11 - r13
            float r14 = r13 - r0
            float r11 = r11 * r14
            float r11 = r11 + r13
            float r6 = r6 / r11
            r3 = r6
            goto L_0x079d
        L_0x079c:
            r3 = r6
        L_0x079d:
        L_0x079e:
            org.telegram.ui.Components.Crop.CropTransform r6 = r1.cropTransform
            float r6 = r6.getCropAreaX()
            float r6 = r6 * r0
            org.telegram.ui.Components.Crop.CropTransform r7 = r1.cropTransform
            float r7 = r7.getCropAreaY()
            float r7 = r7 * r0
            r2.translate(r6, r7)
            r2.scale(r3, r3)
            org.telegram.ui.Components.Crop.CropTransform r6 = r1.cropTransform
            float r6 = r6.getCropPx()
            float r7 = (float) r10
            float r6 = r6 * r7
            float r6 = r6 * r9
            float r6 = r6 * r0
            org.telegram.ui.Components.Crop.CropTransform r7 = r1.cropTransform
            float r7 = r7.getCropPy()
            float r11 = (float) r15
            float r7 = r7 * r11
            float r7 = r7 * r9
            float r7 = r7 * r0
            r2.translate(r6, r7)
            org.telegram.ui.Components.Crop.CropTransform r6 = r1.cropTransform
            float r6 = r6.getRotation()
            r7 = r21
            float r11 = (float) r7
            float r6 = r6 + r11
            r11 = 1127481344(0x43340000, float:180.0)
            int r13 = (r6 > r11 ? 1 : (r6 == r11 ? 0 : -1))
            if (r13 <= 0) goto L_0x07e4
            r11 = 1135869952(0x43b40000, float:360.0)
            float r6 = r6 - r11
        L_0x07e4:
            int r11 = r1.sendPhotoType
            r13 = 1
            if (r11 != r13) goto L_0x07f6
            int r11 = r1.currentEditMode
            r13 = 3
            if (r11 == r13) goto L_0x07f2
            int r11 = r1.switchingToMode
            if (r11 != r13) goto L_0x07f6
        L_0x07f2:
            r2.rotate(r6)
            goto L_0x07fb
        L_0x07f6:
            float r11 = r6 * r0
            r2.rotate(r11)
        L_0x07fb:
        L_0x07fc:
            r0 = r20
            r11 = r25
            r14 = r41
            goto L_0x080d
        L_0x0803:
            r39 = r0
            r43 = r3
            r40 = r6
            r46 = r13
            r0 = r20
        L_0x080d:
            int r3 = r1.currentEditMode
            r6 = 3
            if (r3 != r6) goto L_0x083b
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r1.containerView
            org.telegram.ui.ActionBar.AdjustPanLayoutHelper r3 = r3.adjustPanLayoutHelper
            boolean r3 = r3.animationInProgress()
            if (r3 == 0) goto L_0x0827
            int r3 = r1.keyboardSize
            float r3 = (float) r3
            r6 = 1073741824(0x40000000, float:2.0)
            float r3 = r3 / r6
            float r7 = r1.currentPanTranslationY
            float r7 = r7 / r6
            float r3 = r3 + r7
            goto L_0x0828
        L_0x0827:
            r3 = 0
        L_0x0828:
            org.telegram.ui.Components.PhotoPaintView r6 = r1.photoPaintView
            float r23 = r40 + r3
            float r7 = (float) r11
            float r24 = r7 * r0
            float r7 = (float) r14
            float r25 = r7 * r0
            r20 = r6
            r21 = r5
            r22 = r38
            r20.setTransform(r21, r22, r23, r24, r25)
        L_0x083b:
            if (r37 == 0) goto L_0x0889
            r3 = 0
            java.util.ArrayList<java.lang.Object> r6 = r1.imagesArrLocals
            boolean r6 = r6.isEmpty()
            if (r6 != 0) goto L_0x0869
            int r6 = r1.currentEditMode
            r7 = 1
            if (r6 == r7) goto L_0x0863
            int r6 = r1.sendPhotoType
            if (r6 != r7) goto L_0x0850
            goto L_0x0863
        L_0x0850:
            org.telegram.ui.PhotoViewer$EditState r6 = r1.editState
            org.telegram.messenger.MediaController$CropState r6 = r6.cropState
            if (r6 == 0) goto L_0x0860
            org.telegram.ui.PhotoViewer$EditState r6 = r1.editState
            org.telegram.messenger.MediaController$CropState r6 = r6.cropState
            boolean r6 = r6.mirrored
            if (r6 == 0) goto L_0x0860
            r6 = 1
            goto L_0x0861
        L_0x0860:
            r6 = 0
        L_0x0861:
            r3 = r6
            goto L_0x0869
        L_0x0863:
            org.telegram.ui.Components.Crop.CropTransform r6 = r1.cropTransform
            boolean r3 = r6.isMirrored()
        L_0x0869:
            if (r3 == 0) goto L_0x0875
            r49.save()
            r6 = -1082130432(0xffffffffbvar_, float:-1.0)
            r7 = 1065353216(0x3var_, float:1.0)
            r2.scale(r6, r7)
        L_0x0875:
            org.telegram.ui.Components.PhotoViewerWebView r6 = r1.photoViewerWebView
            if (r6 == 0) goto L_0x087f
            boolean r6 = r6.isLoaded()
            if (r6 != 0) goto L_0x0884
        L_0x087f:
            org.telegram.messenger.ImageReceiver r6 = r1.centerImage
            r6.draw(r2)
        L_0x0884:
            if (r3 == 0) goto L_0x0889
            r49.restore()
        L_0x0889:
            r3 = r36
            int r6 = -r3
            r7 = 2
            int r6 = r6 / r7
            float r6 = (float) r6
            r10 = r35
            int r13 = -r10
            int r13 = r13 / r7
            float r7 = (float) r13
            r2.translate(r6, r7)
            if (r34 != 0) goto L_0x08a1
            org.telegram.ui.Components.PaintingOverlay r6 = r1.paintingOverlay
            int r6 = r6.getVisibility()
            if (r6 != 0) goto L_0x08a4
        L_0x08a1:
            r2.scale(r9, r9)
        L_0x08a4:
            if (r34 == 0) goto L_0x0933
            boolean r6 = r1.videoCrossfadeStarted
            if (r6 != 0) goto L_0x08c3
            boolean r6 = r1.textureUploaded
            if (r6 == 0) goto L_0x08c3
            boolean r6 = r1.videoSizeSet
            if (r6 == 0) goto L_0x08c3
            r6 = 1
            r1.videoCrossfadeStarted = r6
            r6 = 0
            r1.videoCrossfadeAlpha = r6
            long r6 = java.lang.System.currentTimeMillis()
            r1.videoCrossfadeAlphaLastTime = r6
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r6 = r1.containerView
            r6.getMeasuredHeight()
        L_0x08c3:
            android.view.TextureView r6 = r1.videoTextureView
            float r7 = r1.videoCrossfadeAlpha
            float r7 = r7 * r33
            r6.setAlpha(r7)
            android.view.TextureView r6 = r1.videoTextureView
            boolean r7 = r6 instanceof org.telegram.ui.Components.VideoEditTextureView
            if (r7 == 0) goto L_0x08f6
            org.telegram.ui.Components.VideoEditTextureView r6 = (org.telegram.ui.Components.VideoEditTextureView) r6
            int r7 = r4 - r3
            r13 = 2
            int r7 = r7 / r13
            int r15 = r48.getAdditionX()
            int r7 = r7 + r15
            float r7 = (float) r7
            float r7 = r7 + r32
            int r15 = r12 - r10
            int r15 = r15 / r13
            int r13 = r48.getAdditionY()
            int r15 = r15 + r13
            float r13 = (float) r15
            float r13 = r13 + r40
            float r15 = r1.currentPanTranslationY
            float r13 = r13 + r15
            float r15 = (float) r3
            r17 = r0
            float r0 = (float) r10
            r6.setViewRect(r7, r13, r15, r0)
            goto L_0x08f8
        L_0x08f6:
            r17 = r0
        L_0x08f8:
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r0 = r1.aspectRatioFrameLayout
            r0.draw(r2)
            boolean r0 = r1.videoCrossfadeStarted
            if (r0 == 0) goto L_0x0929
            float r0 = r1.videoCrossfadeAlpha
            r6 = 1065353216(0x3var_, float:1.0)
            int r7 = (r0 > r6 ? 1 : (r0 == r6 ? 0 : -1))
            if (r7 >= 0) goto L_0x0929
            r6 = r30
            float r13 = (float) r6
            boolean r15 = r1.playerInjected
            if (r15 == 0) goto L_0x0913
            r15 = 1120403456(0x42CLASSNAME, float:100.0)
            goto L_0x0915
        L_0x0913:
            r15 = 1128792064(0x43480000, float:200.0)
        L_0x0915:
            float r13 = r13 / r15
            float r0 = r0 + r13
            r1.videoCrossfadeAlpha = r0
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r1.containerView
            r0.invalidate()
            float r0 = r1.videoCrossfadeAlpha
            r13 = 1065353216(0x3var_, float:1.0)
            int r0 = (r0 > r13 ? 1 : (r0 == r13 ? 0 : -1))
            if (r0 <= 0) goto L_0x092b
            r1.videoCrossfadeAlpha = r13
            goto L_0x092b
        L_0x0929:
            r6 = r30
        L_0x092b:
            org.telegram.ui.Components.PaintingOverlay r0 = r1.paintingOverlay
            r13 = r33
            r0.setAlpha(r13)
            goto L_0x0939
        L_0x0933:
            r17 = r0
            r6 = r30
            r13 = r33
        L_0x0939:
            org.telegram.ui.Components.PaintingOverlay r0 = r1.paintingOverlay
            int r0 = r0.getVisibility()
            if (r0 != 0) goto L_0x096b
            boolean r0 = r1.isCurrentVideo
            if (r0 != 0) goto L_0x0953
            int r0 = r1.currentEditMode
            r15 = 2
            if (r0 != r15) goto L_0x0953
            int r0 = r1.switchingToMode
            r15 = -1
            if (r0 == r15) goto L_0x0950
            goto L_0x0953
        L_0x0950:
            r36 = r3
            goto L_0x096d
        L_0x0953:
            org.telegram.ui.Components.PaintingOverlay r0 = r1.paintingOverlay
            int r0 = r0.getMeasuredWidth()
            org.telegram.ui.Components.PaintingOverlay r15 = r1.paintingOverlay
            int r15 = r15.getMeasuredHeight()
            r36 = r3
            r3 = 0
            r2.clipRect(r3, r3, r0, r15)
            org.telegram.ui.Components.PaintingOverlay r0 = r1.paintingOverlay
            r0.draw(r2)
            goto L_0x096d
        L_0x096b:
            r36 = r3
        L_0x096d:
            r49.restore()
            r0 = 0
        L_0x0971:
            android.graphics.drawable.GradientDrawable[] r3 = r1.pressedDrawable
            int r15 = r3.length
            if (r0 >= r15) goto L_0x0a45
            boolean[] r15 = r1.drawPressedDrawable
            boolean r15 = r15[r0]
            if (r15 != 0) goto L_0x0990
            float[] r15 = r1.pressedDrawableAlpha
            r15 = r15[r0]
            r19 = 0
            int r15 = (r15 > r19 ? 1 : (r15 == r19 ? 0 : -1))
            if (r15 == 0) goto L_0x0987
            goto L_0x0990
        L_0x0987:
            r21 = r9
            r35 = r10
            r22 = r11
            r20 = 1132396544(0x437var_, float:255.0)
            goto L_0x09ed
        L_0x0990:
            r3 = r3[r0]
            float[] r15 = r1.pressedDrawableAlpha
            r15 = r15[r0]
            r20 = 1132396544(0x437var_, float:255.0)
            float r15 = r15 * r20
            int r15 = (int) r15
            r3.setAlpha(r15)
            if (r0 != 0) goto L_0x09bd
            android.graphics.drawable.GradientDrawable[] r3 = r1.pressedDrawable
            r3 = r3[r0]
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r15 = r1.containerView
            int r15 = r15.getMeasuredWidth()
            int r15 = r15 / 5
            r21 = r9
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r9 = r1.containerView
            int r9 = r9.getMeasuredHeight()
            r35 = r10
            r10 = 0
            r3.setBounds(r10, r10, r15, r9)
            r22 = r11
            goto L_0x09e6
        L_0x09bd:
            r21 = r9
            r35 = r10
            android.graphics.drawable.GradientDrawable[] r3 = r1.pressedDrawable
            r3 = r3[r0]
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r9 = r1.containerView
            int r9 = r9.getMeasuredWidth()
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r10 = r1.containerView
            int r10 = r10.getMeasuredWidth()
            int r10 = r10 / 5
            int r9 = r9 - r10
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r10 = r1.containerView
            int r10 = r10.getMeasuredWidth()
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r15 = r1.containerView
            int r15 = r15.getMeasuredHeight()
            r22 = r11
            r11 = 0
            r3.setBounds(r9, r11, r10, r15)
        L_0x09e6:
            android.graphics.drawable.GradientDrawable[] r3 = r1.pressedDrawable
            r3 = r3[r0]
            r3.draw(r2)
        L_0x09ed:
            boolean[] r3 = r1.drawPressedDrawable
            boolean r3 = r3[r0]
            if (r3 == 0) goto L_0x0a19
            float[] r3 = r1.pressedDrawableAlpha
            r9 = r3[r0]
            r10 = 1065353216(0x3var_, float:1.0)
            int r9 = (r9 > r10 ? 1 : (r9 == r10 ? 0 : -1))
            if (r9 >= 0) goto L_0x0a16
            r9 = r3[r0]
            float r11 = (float) r6
            r15 = 1127481344(0x43340000, float:180.0)
            float r11 = r11 / r15
            float r9 = r9 + r11
            r3[r0] = r9
            r9 = r3[r0]
            int r9 = (r9 > r10 ? 1 : (r9 == r10 ? 0 : -1))
            if (r9 <= 0) goto L_0x0a0e
            r3[r0] = r10
        L_0x0a0e:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r1.containerView
            r3.invalidate()
            r15 = 1127481344(0x43340000, float:180.0)
            goto L_0x0a3b
        L_0x0a16:
            r15 = 1127481344(0x43340000, float:180.0)
            goto L_0x0a3b
        L_0x0a19:
            float[] r3 = r1.pressedDrawableAlpha
            r9 = r3[r0]
            r10 = 0
            int r9 = (r9 > r10 ? 1 : (r9 == r10 ? 0 : -1))
            if (r9 <= 0) goto L_0x0a39
            r9 = r3[r0]
            float r11 = (float) r6
            r15 = 1127481344(0x43340000, float:180.0)
            float r11 = r11 / r15
            float r9 = r9 - r11
            r3[r0] = r9
            r9 = r3[r0]
            int r9 = (r9 > r10 ? 1 : (r9 == r10 ? 0 : -1))
            if (r9 >= 0) goto L_0x0a33
            r3[r0] = r10
        L_0x0a33:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r3 = r1.containerView
            r3.invalidate()
            goto L_0x0a3b
        L_0x0a39:
            r15 = 1127481344(0x43340000, float:180.0)
        L_0x0a3b:
            int r0 = r0 + 1
            r9 = r21
            r11 = r22
            r10 = r35
            goto L_0x0971
        L_0x0a45:
            r21 = r9
            r35 = r10
            r22 = r11
        L_0x0a4b:
            boolean r0 = r1.isCurrentVideo
            if (r0 == 0) goto L_0x0a72
            org.telegram.ui.Components.VideoTimelinePlayView r0 = r1.videoTimelineView
            if (r0 == 0) goto L_0x0a59
            boolean r0 = r0.isDragging()
            if (r0 != 0) goto L_0x0a6d
        L_0x0a59:
            int r0 = r1.sendPhotoType
            r3 = 1
            if (r0 != r3) goto L_0x0a62
            boolean r0 = r1.manuallyPaused
            if (r0 == 0) goto L_0x0a6d
        L_0x0a62:
            org.telegram.ui.Components.VideoPlayer r0 = r1.videoPlayer
            if (r0 == 0) goto L_0x0a6f
            boolean r0 = r0.isPlaying()
            if (r0 != 0) goto L_0x0a6d
            goto L_0x0a6f
        L_0x0a6d:
            r0 = 0
            goto L_0x0a70
        L_0x0a6f:
            r0 = 1
        L_0x0a70:
            r3 = r0
            goto L_0x0a74
        L_0x0a72:
            r0 = 1
            r3 = r0
        L_0x0a74:
            org.telegram.ui.Components.RadialProgressView r0 = r1.miniProgressView
            int r0 = r0.getVisibility()
            if (r0 == 0) goto L_0x0a83
            android.animation.AnimatorSet r0 = r1.miniProgressAnimator
            if (r0 == 0) goto L_0x0a81
            goto L_0x0a83
        L_0x0a81:
            r0 = 0
            goto L_0x0a84
        L_0x0a83:
            r0 = 1
        L_0x0a84:
            r9 = r0
            if (r3 == 0) goto L_0x0b22
            boolean r0 = r1.zoomAnimation
            if (r0 != 0) goto L_0x0a97
            r10 = r32
            float r0 = -r10
            float r11 = r1.maxX
            int r0 = (r0 > r11 ? 1 : (r0 == r11 ? 0 : -1))
            if (r0 <= 0) goto L_0x0a99
            float r0 = r10 + r11
            goto L_0x0a9a
        L_0x0a97:
            r10 = r32
        L_0x0a99:
            r0 = 0
        L_0x0a9a:
            r11 = 1065353216(0x3var_, float:1.0)
            int r14 = (r5 > r11 ? 1 : (r5 == r11 ? 0 : -1))
            if (r14 != 0) goto L_0x0aa3
            r11 = r40
            goto L_0x0aa4
        L_0x0aa3:
            r11 = 0
        L_0x0aa4:
            r14 = r13
            if (r9 == 0) goto L_0x0ab3
            org.telegram.ui.Components.RadialProgressView r15 = r1.miniProgressView
            float r15 = r15.getAlpha()
            r16 = 1065353216(0x3var_, float:1.0)
            float r15 = r16 - r15
            float r14 = r14 * r15
        L_0x0ab3:
            boolean r15 = r1.pipAnimationInProgress
            if (r15 == 0) goto L_0x0ac2
            org.telegram.ui.ActionBar.ActionBar r15 = r1.actionBar
            float r15 = r15.getAlpha()
            float r14 = r14 * r15
            r17 = r3
            goto L_0x0ae4
        L_0x0ac2:
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r15 = r1.photoProgressViews
            r17 = 0
            r15 = r15[r17]
            int r15 = r15.backgroundState
            r17 = r3
            r3 = 4
            if (r15 != r3) goto L_0x0ae4
            r3 = 1090519040(0x41000000, float:8.0)
            float r3 = org.telegram.messenger.AndroidUtilities.dpf2(r3)
            org.telegram.ui.ActionBar.ActionBar r15 = r1.actionBar
            float r15 = r15.getAlpha()
            r16 = 1065353216(0x3var_, float:1.0)
            float r15 = r16 - r15
            float r3 = r3 * r15
            float r11 = r11 + r3
        L_0x0ae4:
            r49.save()
            r2.translate(r0, r11)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r3 = r1.photoProgressViews
            r15 = 0
            r3 = r3[r15]
            r16 = 1065353216(0x3var_, float:1.0)
            float r15 = r16 - r8
            r3.setScale(r15)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r3 = r1.photoProgressViews
            r15 = 0
            r3 = r3[r15]
            r3.setAlpha(r14)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r3 = r1.photoProgressViews
            r3 = r3[r15]
            r3.onDraw(r2)
            boolean r3 = r1.isActionBarVisible
            if (r3 == 0) goto L_0x0b1e
            boolean r3 = r1.allowShowFullscreenButton
            if (r3 == 0) goto L_0x0b1e
            android.widget.ImageView[] r3 = r1.fullscreenButton
            r3 = r3[r15]
            java.lang.Object r3 = r3.getTag()
            if (r3 != 0) goto L_0x0b1e
            android.widget.ImageView[] r3 = r1.fullscreenButton
            r3 = r3[r15]
            r3.setAlpha(r13)
        L_0x0b1e:
            r49.restore()
            goto L_0x0b26
        L_0x0b22:
            r17 = r3
            r10 = r32
        L_0x0b26:
            if (r9 == 0) goto L_0x0b4c
            boolean r0 = r1.pipAnimationInProgress
            if (r0 != 0) goto L_0x0b4c
            r49.save()
            org.telegram.ui.Components.RadialProgressView r0 = r1.miniProgressView
            int r0 = r0.getLeft()
            float r0 = (float) r0
            float r0 = r0 + r10
            org.telegram.ui.Components.RadialProgressView r3 = r1.miniProgressView
            int r3 = r3.getTop()
            float r3 = (float) r3
            float r11 = r40 / r5
            float r3 = r3 + r11
            r2.translate(r0, r3)
            org.telegram.ui.Components.RadialProgressView r0 = r1.miniProgressView
            r0.draw(r2)
            r49.restore()
        L_0x0b4c:
            org.telegram.messenger.ImageReceiver r0 = r1.sideImage
            org.telegram.messenger.ImageReceiver r3 = r1.leftImage
            if (r0 != r3) goto L_0x0CLASSNAME
            boolean r0 = r0.hasBitmapImage()
            if (r0 == 0) goto L_0x0bc9
            r49.save()
            int r0 = r4 / 2
            float r0 = (float) r0
            int r3 = r12 / 2
            float r3 = (float) r3
            r2.translate(r0, r3)
            float r0 = (float) r4
            float r3 = r1.scale
            r11 = 1065353216(0x3var_, float:1.0)
            float r3 = r3 + r11
            float r0 = r0 * r3
            r3 = 1106247680(0x41var_, float:30.0)
            int r11 = org.telegram.messenger.AndroidUtilities.dp(r3)
            float r3 = (float) r11
            float r0 = r0 + r3
            float r0 = -r0
            r3 = 1073741824(0x40000000, float:2.0)
            float r0 = r0 / r3
            float r0 = r0 + r38
            r3 = 0
            r2.translate(r0, r3)
            org.telegram.messenger.ImageReceiver r0 = r1.sideImage
            int r0 = r0.getBitmapWidth()
            org.telegram.messenger.ImageReceiver r3 = r1.sideImage
            int r3 = r3.getBitmapHeight()
            float r11 = (float) r4
            float r14 = (float) r0
            float r11 = r11 / r14
            float r14 = (float) r12
            float r15 = (float) r3
            float r14 = r14 / r15
            float r15 = java.lang.Math.min(r11, r14)
            r30 = r6
            float r6 = (float) r0
            float r6 = r6 * r15
            int r6 = (int) r6
            float r7 = (float) r3
            float r7 = r7 * r15
            int r7 = (int) r7
            r19 = r0
            org.telegram.messenger.ImageReceiver r0 = r1.sideImage
            r20 = r3
            r3 = 1065353216(0x3var_, float:1.0)
            r0.setAlpha(r3)
            org.telegram.messenger.ImageReceiver r0 = r1.sideImage
            int r3 = -r6
            r18 = 2
            int r3 = r3 / 2
            float r3 = (float) r3
            r21 = r8
            int r8 = -r7
            int r8 = r8 / 2
            float r8 = (float) r8
            r22 = r9
            float r9 = (float) r6
            r23 = r6
            float r6 = (float) r7
            r0.setImageCoords(r3, r8, r9, r6)
            org.telegram.messenger.ImageReceiver r0 = r1.sideImage
            r0.draw(r2)
            r49.restore()
            goto L_0x0bcf
        L_0x0bc9:
            r30 = r6
            r21 = r8
            r22 = r9
        L_0x0bcf:
            org.telegram.ui.Components.GroupedPhotosListView r0 = r1.groupedPhotosListView
            r3 = 1065353216(0x3var_, float:1.0)
            float r14 = r3 - r13
            r0.setMoveProgress(r14)
            r49.save()
            float r6 = r40 / r5
            r7 = r38
            r2.translate(r7, r6)
            float r0 = (float) r4
            float r6 = r1.scale
            float r6 = r6 + r3
            float r0 = r0 * r6
            r3 = 1106247680(0x41var_, float:30.0)
            int r3 = org.telegram.messenger.AndroidUtilities.dp(r3)
            float r3 = (float) r3
            float r0 = r0 + r3
            float r0 = -r0
            r3 = 1073741824(0x40000000, float:2.0)
            float r0 = r0 / r3
            r6 = r40
            float r3 = -r6
            float r3 = r3 / r5
            r2.translate(r0, r3)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r0 = r1.photoProgressViews
            r3 = 2
            r0 = r0[r3]
            r8 = 1065353216(0x3var_, float:1.0)
            r0.setScale(r8)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r0 = r1.photoProgressViews
            r0 = r0[r3]
            r0.setAlpha(r8)
            org.telegram.ui.PhotoViewer$PhotoProgressView[] r0 = r1.photoProgressViews
            r0 = r0[r3]
            r0.onDraw(r2)
            boolean r0 = r1.isActionBarVisible
            if (r0 == 0) goto L_0x0c1e
            android.widget.ImageView[] r0 = r1.fullscreenButton
            r0 = r0[r3]
            r0.setAlpha(r8)
        L_0x0c1e:
            r49.restore()
            goto L_0x0CLASSNAME
        L_0x0CLASSNAME:
            r30 = r6
            r21 = r8
            r22 = r9
            r7 = r38
            r6 = r40
            boolean r0 = r1.isActionBarVisible
            if (r0 == 0) goto L_0x0CLASSNAME
            android.widget.ImageView[] r0 = r1.fullscreenButton
            r3 = 2
            r0 = r0[r3]
            r3 = 0
            r0.setAlpha(r3)
        L_0x0CLASSNAME:
            int r0 = r1.waitingForDraw
            if (r0 == 0) goto L_0x0CLASSNAME
            r3 = 1
            int r0 = r0 - r3
            r1.waitingForDraw = r0
            if (r0 != 0) goto L_0x0CLASSNAME
            android.widget.ImageView r0 = r1.textureImageView
            if (r0 == 0) goto L_0x0CLASSNAME
            android.view.TextureView r0 = r1.videoTextureView     // Catch:{ all -> 0x0CLASSNAME }
            int r0 = r0.getWidth()     // Catch:{ all -> 0x0CLASSNAME }
            android.view.TextureView r3 = r1.videoTextureView     // Catch:{ all -> 0x0CLASSNAME }
            int r3 = r3.getHeight()     // Catch:{ all -> 0x0CLASSNAME }
            android.graphics.Bitmap$Config r8 = android.graphics.Bitmap.Config.ARGB_8888     // Catch:{ all -> 0x0CLASSNAME }
            android.graphics.Bitmap r0 = org.telegram.messenger.Bitmaps.createBitmap(r0, r3, r8)     // Catch:{ all -> 0x0CLASSNAME }
            r1.currentBitmap = r0     // Catch:{ all -> 0x0CLASSNAME }
            android.view.TextureView r3 = r1.changedTextureView     // Catch:{ all -> 0x0CLASSNAME }
            r3.getBitmap(r0)     // Catch:{ all -> 0x0CLASSNAME }
            goto L_0x0c6f
        L_0x0CLASSNAME:
            r0 = move-exception
            android.graphics.Bitmap r3 = r1.currentBitmap
            if (r3 == 0) goto L_0x0c6c
            r3.recycle()
            r3 = 0
            r1.currentBitmap = r3
        L_0x0c6c:
            org.telegram.messenger.FileLog.e((java.lang.Throwable) r0)
        L_0x0c6f:
            android.graphics.Bitmap r0 = r1.currentBitmap
            if (r0 == 0) goto L_0x0CLASSNAME
            android.widget.ImageView r0 = r1.textureImageView
            r3 = 0
            r0.setVisibility(r3)
            android.widget.ImageView r0 = r1.textureImageView
            android.graphics.Bitmap r3 = r1.currentBitmap
            r0.setImageBitmap(r3)
            r3 = 0
            goto L_0x0c8a
        L_0x0CLASSNAME:
            android.widget.ImageView r0 = r1.textureImageView
            r3 = 0
            r0.setImageDrawable(r3)
            goto L_0x0c8a
        L_0x0CLASSNAME:
            r3 = 0
        L_0x0c8a:
            org.telegram.ui.Components.PipVideoView r0 = r1.pipVideoView
            if (r0 == 0) goto L_0x0CLASSNAME
            r0.close()
            r1.pipVideoView = r3
            goto L_0x0CLASSNAME
        L_0x0CLASSNAME:
            org.telegram.ui.PhotoViewer$FrameLayoutDrawer r0 = r1.containerView
            r0.invalidate()
        L_0x0CLASSNAME:
            boolean r0 = r1.padImageForHorizontalInsets
            if (r0 == 0) goto L_0x0ca0
            r49.restore()
        L_0x0ca0:
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r0 = r1.aspectRatioFrameLayout
            if (r0 == 0) goto L_0x0ce9
            org.telegram.ui.Components.VideoForwardDrawable r0 = r1.videoForwardDrawable
            boolean r0 = r0.isAnimating()
            if (r0 == 0) goto L_0x0ce9
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r0 = r1.aspectRatioFrameLayout
            int r0 = r0.getMeasuredHeight()
            float r0 = (float) r0
            float r3 = r1.scale
            r8 = 1065353216(0x3var_, float:1.0)
            float r3 = r3 - r8
            float r0 = r0 * r3
            int r0 = (int) r0
            r3 = 2
            int r0 = r0 / r3
            org.telegram.ui.Components.VideoForwardDrawable r3 = r1.videoForwardDrawable
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r8 = r1.aspectRatioFrameLayout
            int r8 = r8.getLeft()
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r9 = r1.aspectRatioFrameLayout
            int r9 = r9.getTop()
            int r9 = r9 - r0
            float r11 = r6 / r5
            int r11 = (int) r11
            int r9 = r9 + r11
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r11 = r1.aspectRatioFrameLayout
            int r11 = r11.getRight()
            com.google.android.exoplayer2.ui.AspectRatioFrameLayout r14 = r1.aspectRatioFrameLayout
            int r14 = r14.getBottom()
            int r14 = r14 + r0
            float r15 = r6 / r5
            int r15 = (int) r15
            int r14 = r14 + r15
            r3.setBounds(r8, r9, r11, r14)
            org.telegram.ui.Components.VideoForwardDrawable r3 = r1.videoForwardDrawable
            r3.draw(r2)
        L_0x0ce9:
            return
        L_0x0cea:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.PhotoViewer.onDraw(android.graphics.Canvas):void");
    }

    /* renamed from: lambda$onDraw$66$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3570lambda$onDraw$66$orgtelegramuiPhotoViewer() {
        switchToNextIndex(1, false);
    }

    /* renamed from: lambda$onDraw$67$org-telegram-ui-PhotoViewer  reason: not valid java name */
    public /* synthetic */ void m3571lambda$onDraw$67$orgtelegramuiPhotoViewer() {
        switchToNextIndex(-1, false);
    }

    /* access modifiers changed from: private */
    public void onActionClick(boolean download) {
        MessageObject messageObject = this.currentMessageObject;
        if ((messageObject != null || this.currentBotInlineResult != null || this.pageBlocksAdapter != null) && this.currentFileNames[0] != null) {
            Uri uri = null;
            File file = null;
            this.isStreaming = false;
            if (messageObject != null) {
                if (!(messageObject.messageOwner.attachPath == null || this.currentMessageObject.messageOwner.attachPath.length() == 0)) {
                    file = new File(this.currentMessageObject.messageOwner.attachPath);
                    if (!file.exists()) {
                        file = null;
                    }
                }
                if (file == null) {
                    file = FileLoader.getPathToMessage(this.currentMessageObject.messageOwner);
                    if (!file.exists()) {
                        file = null;
                        if (SharedConfig.streamMedia && !DialogObject.isEncryptedDialog(this.currentMessageObject.getDialogId()) && this.currentMessageObject.isVideo() && this.currentMessageObject.canStreamVideo()) {
                            try {
                                int reference = FileLoader.getInstance(this.currentMessageObject.currentAccount).getFileReference(this.currentMessageObject);
                                FileLoader.getInstance(this.currentAccount).loadFile(this.currentMessageObject.getDocument(), this.currentMessageObject, 1, 0);
                                TLRPC.Document document = this.currentMessageObject.getDocument();
                                StringBuilder sb = new StringBuilder();
                                sb.append("?account=");
                                sb.append(this.currentMessageObject.currentAccount);
                                sb.append("&id=");
                                sb.append(document.id);
                                sb.append("&hash=");
                                sb.append(document.access_hash);
                                sb.append("&dc=");
                                sb.append(document.dc_id);
                                sb.append("&size=");
                                sb.append(document.size);
                                sb.append("&mime=");
                                sb.append(URLEncoder.encode(document.mime_type, "UTF-8"));
                                sb.append("&rid=");
                                sb.append(reference);
                                sb.append("&name=");
                                sb.append(URLEncoder.encode(FileLoader.getDocumentFileName(document), "UTF-8"));
                                sb.append("&reference=");
                                sb.append(Utilities.bytesToHex(document.file_reference != null ? document.file_reference : new byte[0]));
                                String params = sb.toString();
                                uri = Uri.parse("tg://" + this.currentMessageObject.getFileName() + params);
                                this.isStreaming = true;
                                checkProgress(0, false, false);
                            } catch (Exception e) {
                            }
                        }
                    }
                }
            } else {
                TLRPC.BotInlineResult botInlineResult = this.currentBotInlineResult;
                if (botInlineResult == null) {
                    PageBlocksAdapter pageBlocksAdapter2 = this.pageBlocksAdapter;
                    if (pageBlocksAdapter2 != null) {
                        if (pageBlocksAdapter2.getMedia(this.currentIndex) instanceof TLRPC.Document) {
                            file = this.pageBlocksAdapter.getFile(this.currentIndex);
                            if (file != null && !file.exists()) {
                                file = null;
                            }
                        } else {
                            return;
                        }
                    }
                } else if (botInlineResult.document != null) {
                    file = FileLoader.getPathToAttach(this.currentBotInlineResult.document);
                    if (!file.exists()) {
                        file = null;
                    }
                } else if (this.currentBotInlineResult.content instanceof TLRPC.TL_webDocument) {
                    File directory = FileLoader.getDirectory(4);
                    file = new File(directory, Utilities.MD5(this.currentBotInlineResult.content.url) + "." + ImageLoader.getHttpUrlExtension(this.currentBotInlineResult.content.url, "mp4"));
                    if (!file.exists()) {
                        file = null;
                    }
                }
            }
            if (file != null && uri == null) {
                uri = Uri.fromFile(file);
            }
            if (uri == null) {
                if (download) {
                    if (this.currentMessageObject == null) {
                        TLRPC.BotInlineResult botInlineResult2 = this.currentBotInlineResult;
                        if (botInlineResult2 != null) {
                            if (botInlineResult2.document != null) {
                                if (!FileLoader.getInstance(this.currentAccount).isLoadingFile(this.currentFileNames[0])) {
                                    FileLoader.getInstance(this.currentAccount).loadFile(this.currentBotInlineResult.document, this.currentMessageObject, 1, 0);
                                } else {
                                    FileLoader.getInstance(this.currentAccount).cancelLoadFile(this.currentBotInlineResult.document);
                                }
                            } else if (this.currentBotInlineResult.content instanceof TLRPC.TL_webDocument) {
                                if (!ImageLoader.getInstance().isLoadingHttpFile(this.currentBotInlineResult.content.url)) {
                                    ImageLoader.getInstance().loadHttpFile(this.currentBotInlineResult.content.url, "mp4", this.currentAccount);
                                } else {
                                    ImageLoader.getInstance().cancelLoadHttpFile(this.currentBotInlineResult.content.url);
                                }
                            }
                        } else if (this.pageBlocksAdapter != null) {
                            if (!FileLoader.getInstance(this.currentAccount).isLoadingFile(this.currentFileNames[0])) {
                                FileLoader.getInstance(this.currentAccount).loadFile((TLRPC.Document) this.pageBlocksAdapter.getMedia(this.currentIndex), this.pageBlocksAdapter.getParentObject(), 1, 1);
                            } else {
                                FileLoader.getInstance(this.currentAccount).cancelLoadFile((TLRPC.Document) this.pageBlocksAdapter.getMedia(this.currentIndex));
                            }
                        }
                    } else if (!FileLoader.getInstance(this.currentAccount).isLoadingFile(this.currentFileNames[0])) {
                        FileLoader.getInstance(this.currentAccount).loadFile(this.currentMessageObject.getDocument(), this.currentMessageObject, 1, 0);
                    } else {
                        FileLoader.getInstance(this.currentAccount).cancelLoadFile(this.currentMessageObject.getDocument());
                    }
                    Drawable drawable = this.centerImage.getStaticThumb();
                    if (drawable instanceof OtherDocumentPlaceholderDrawable) {
                        ((OtherDocumentPlaceholderDrawable) drawable).checkFileExist();
                    }
                }
            } else if (this.sharedMediaType != 1 || this.currentMessageObject.canPreviewDocument()) {
                preparePlayer(uri, true, false);
            } else {
                AndroidUtilities.openDocument(this.currentMessageObject, this.parentActivity, (BaseFragment) null);
            }
        }
    }

    public boolean onDown(MotionEvent e) {
        if (!this.doubleTap && this.checkImageView.getVisibility() != 0) {
            boolean[] zArr = this.drawPressedDrawable;
            if (!zArr[0] && !zArr[1]) {
                float x = e.getX();
                int side = Math.min(135, this.containerView.getMeasuredWidth() / 8);
                if (x < ((float) side)) {
                    if (this.leftImage.hasImageSet()) {
                        this.drawPressedDrawable[0] = true;
                        this.containerView.invalidate();
                    }
                } else if (x > ((float) (this.containerView.getMeasuredWidth() - side)) && this.rightImage.hasImageSet()) {
                    this.drawPressedDrawable[1] = true;
                    this.containerView.invalidate();
                }
            }
        }
        return false;
    }

    public boolean canDoubleTap(MotionEvent e) {
        MessageObject messageObject;
        if (this.checkImageView.getVisibility() != 0) {
            boolean[] zArr = this.drawPressedDrawable;
            if (!zArr[0] && !zArr[1]) {
                float x = e.getX();
                int side = Math.min(135, this.containerView.getMeasuredWidth() / 8);
                if ((x >= ((float) side) && x <= ((float) (this.containerView.getMeasuredWidth() - side))) || (messageObject = this.currentMessageObject) == null) {
                    return true;
                }
                if (!messageObject.isVideo() || SystemClock.elapsedRealtime() - this.lastPhotoSetTime < 500 || !canDoubleTapSeekVideo(e)) {
                    return false;
                }
                return true;
            }
        }
        return true;
    }

    private void hidePressedDrawables() {
        boolean[] zArr = this.drawPressedDrawable;
        zArr[1] = false;
        zArr[0] = false;
        this.containerView.invalidate();
    }

    public void onUp(MotionEvent e) {
        hidePressedDrawables();
    }

    public void onShowPress(MotionEvent e) {
    }

    public boolean onSingleTapUp(MotionEvent e) {
        if (!this.canZoom && !this.doubleTapEnabled) {
            return onSingleTapConfirmed(e);
        }
        if (!(this.containerView.getTag() == null || this.photoProgressViews[0] == null || this.containerView == null)) {
            float x = e.getX();
            float y = e.getY();
            boolean rez = false;
            if (x >= ((float) (getContainerViewWidth() - AndroidUtilities.dp(100.0f))) / 2.0f && x <= ((float) (getContainerViewWidth() + AndroidUtilities.dp(100.0f))) / 2.0f && y >= ((float) (getContainerViewHeight() - AndroidUtilities.dp(100.0f))) / 2.0f && y <= ((float) (getContainerViewHeight() + AndroidUtilities.dp(100.0f))) / 2.0f) {
                rez = onSingleTapConfirmed(e);
            }
            if (rez) {
                this.discardTap = true;
                return true;
            }
        }
        return false;
    }

    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
        return false;
    }

    public void onLongPress(MotionEvent ev) {
    }

    public void onLongPress() {
        boolean forward;
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null && this.videoPlayerControlVisible && this.scale <= 1.1f) {
            long current = videoPlayer2.getCurrentPosition();
            long total = this.videoPlayer.getDuration();
            if (current != -9223372036854775807L && total >= 15000) {
                float x = this.longPressX;
                int width = getContainerViewWidth();
                if (x >= ((float) ((width / 3) * 2))) {
                    forward = true;
                } else if (x < ((float) (width / 3))) {
                    forward = false;
                } else {
                    return;
                }
                this.videoPlayerRewinder.startRewind(this.videoPlayer, forward, this.currentVideoSpeed);
            }
        }
    }

    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        if (this.scale == 1.0f) {
            return false;
        }
        this.scroller.abortAnimation();
        this.scroller.fling(Math.round(this.translationX), Math.round(this.translationY), Math.round(velocityX), Math.round(velocityY), (int) this.minX, (int) this.maxX, (int) this.minY, (int) this.maxY);
        this.containerView.postInvalidate();
        return false;
    }

    public boolean onSingleTapConfirmed(MotionEvent e) {
        MessageObject messageObject;
        if (this.discardTap) {
            return false;
        }
        float x = e.getX();
        float y = e.getY();
        if (this.checkImageView.getVisibility() != 0 && y > ((float) (ActionBar.getCurrentActionBarHeight() + AndroidUtilities.statusBarHeight + AndroidUtilities.dp(40.0f)))) {
            int side = Math.min(135, this.containerView.getMeasuredWidth() / 8);
            if (x < ((float) side)) {
                if (this.leftImage.hasImageSet()) {
                    switchToNextIndex(-1, true);
                    return true;
                }
            } else if (x > ((float) (this.containerView.getMeasuredWidth() - side)) && this.rightImage.hasImageSet()) {
                switchToNextIndex(1, true);
                return true;
            }
        }
        if (this.containerView.getTag() != null) {
            AspectRatioFrameLayout aspectRatioFrameLayout2 = this.aspectRatioFrameLayout;
            boolean drawTextureView = aspectRatioFrameLayout2 != null && aspectRatioFrameLayout2.getVisibility() == 0;
            if (this.sharedMediaType != 1 || (messageObject = this.currentMessageObject) == null) {
                PhotoProgressView[] photoProgressViewArr = this.photoProgressViews;
                if (!(photoProgressViewArr[0] == null || this.containerView == null)) {
                    int state = photoProgressViewArr[0].backgroundState;
                    if (x >= ((float) (getContainerViewWidth() - AndroidUtilities.dp(100.0f))) / 2.0f && x <= ((float) (getContainerViewWidth() + AndroidUtilities.dp(100.0f))) / 2.0f && y >= ((float) (getContainerViewHeight() - AndroidUtilities.dp(100.0f))) / 2.0f && y <= ((float) (getContainerViewHeight() + AndroidUtilities.dp(100.0f))) / 2.0f) {
                        if (!drawTextureView) {
                            if (state > 0 && state <= 3) {
                                onActionClick(true);
                                checkProgress(0, false, true);
                                return true;
                            }
                        } else if ((state == 3 || state == 4) && this.photoProgressViews[0].isVisible()) {
                            this.manuallyPaused = true;
                            toggleVideoPlayer();
                            return true;
                        }
                    }
                }
            } else if (!messageObject.canPreviewDocument()) {
                float vy = ((float) (getContainerViewHeight() - AndroidUtilities.dp(360.0f))) / 2.0f;
                if (y >= vy && y <= ((float) AndroidUtilities.dp(360.0f)) + vy) {
                    onActionClick(true);
                    return true;
                }
            }
            toggleActionBar(!this.isActionBarVisible, true);
        } else {
            int i = this.sendPhotoType;
            if (i != 0 && i != 4) {
                TLRPC.BotInlineResult botInlineResult = this.currentBotInlineResult;
                if (botInlineResult != null && (botInlineResult.type.equals("video") || MessageObject.isVideoDocument(this.currentBotInlineResult.document))) {
                    int state2 = this.photoProgressViews[0].backgroundState;
                    if (state2 > 0 && state2 <= 3 && x >= ((float) (getContainerViewWidth() - AndroidUtilities.dp(100.0f))) / 2.0f && x <= ((float) (getContainerViewWidth() + AndroidUtilities.dp(100.0f))) / 2.0f && y >= ((float) (getContainerViewHeight() - AndroidUtilities.dp(100.0f))) / 2.0f && y <= ((float) (getContainerViewHeight() + AndroidUtilities.dp(100.0f))) / 2.0f) {
                        onActionClick(true);
                        checkProgress(0, false, true);
                        return true;
                    }
                } else if (this.sendPhotoType == 2 && this.isCurrentVideo) {
                    this.manuallyPaused = true;
                    toggleVideoPlayer();
                }
            } else if (this.isCurrentVideo) {
                VideoPlayer videoPlayer2 = this.videoPlayer;
                if (!(videoPlayer2 == null || this.muteVideo || i == 1)) {
                    videoPlayer2.setVolume(1.0f);
                }
                this.manuallyPaused = true;
                toggleVideoPlayer();
            } else {
                this.checkImageView.performClick();
            }
        }
        return true;
    }

    private boolean canDoubleTapSeekVideo(MotionEvent e) {
        if (this.videoPlayer == null) {
            return false;
        }
        boolean forward = e.getX() >= ((float) ((getContainerViewWidth() / 3) * 2));
        long current = this.videoPlayer.getCurrentPosition();
        long total = this.videoPlayer.getDuration();
        if (current == -9223372036854775807L || total <= 15000) {
            return false;
        }
        if (!forward || total - current > 10000) {
            return true;
        }
        return false;
    }

    public boolean onDoubleTap(MotionEvent e) {
        boolean z;
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null && this.videoPlayerControlVisible) {
            long current = videoPlayer2.getCurrentPosition();
            long total = this.videoPlayer.getDuration();
            float x = e.getX();
            int width = getContainerViewWidth();
            if (x >= ((float) ((width / 3) * 2))) {
            }
            if (canDoubleTapSeekVideo(e)) {
                long old = current;
                if (x >= ((float) ((width / 3) * 2))) {
                    current += 10000;
                } else if (x < ((float) (width / 3))) {
                    current -= 10000;
                }
                if (old != current) {
                    boolean apply = true;
                    if (current > total) {
                        current = total;
                    } else if (current < 0) {
                        if (current < -9000) {
                            apply = false;
                        }
                        current = 0;
                    }
                    if (!apply) {
                        return true;
                    }
                    this.videoForwardDrawable.setOneShootAnimation(true);
                    this.videoForwardDrawable.setLeftSide(x < ((float) (width / 3)));
                    this.videoForwardDrawable.addTime(10000);
                    this.videoPlayer.seekTo(current);
                    this.containerView.invalidate();
                    this.videoPlayerSeekbar.setProgress(((float) current) / ((float) total), true);
                    this.videoPlayerSeekbarView.invalidate();
                    return true;
                }
            }
        }
        if (!this.canZoom) {
            return false;
        }
        float f = this.scale;
        if ((f == 1.0f && (this.translationY != 0.0f || this.translationX != 0.0f)) || this.animationStartTime != 0 || this.animationInProgress != 0) {
            return false;
        }
        if (f == 1.0f) {
            float atx = (e.getX() - ((float) (getContainerViewWidth() / 2))) - (((e.getX() - ((float) (getContainerViewWidth() / 2))) - this.translationX) * (3.0f / this.scale));
            float aty = (e.getY() - ((float) (getContainerViewHeight() / 2))) - (((e.getY() - ((float) (getContainerViewHeight() / 2))) - this.translationY) * (3.0f / this.scale));
            updateMinMax(3.0f);
            if (atx < this.minX) {
                atx = this.minX;
            } else if (atx > this.maxX) {
                atx = this.maxX;
            }
            if (aty < this.minY) {
                aty = this.minY;
            } else if (aty > this.maxY) {
                aty = this.maxY;
            }
            z = true;
            animateTo(3.0f, atx, aty, true);
        } else {
            z = true;
            animateTo(1.0f, 0.0f, 0.0f, true);
        }
        this.doubleTap = z;
        hidePressedDrawables();
        return z;
    }

    private boolean enableSwipeToPiP() {
        VideoPlayer videoPlayer2;
        if (!BuildVars.DEBUG_PRIVATE_VERSION) {
            return false;
        }
        boolean permissionsEnabled = Build.VERSION.SDK_INT < 23 || Settings.canDrawOverlays(this.parentActivity);
        if (!this.pipAvailable || !this.textureUploaded || (videoPlayer2 = this.videoPlayer) == null || videoPlayer2.getRepeatCount() != 0 || !permissionsEnabled || this.changingTextureView || this.switchingInlineMode || this.isInline) {
            return false;
        }
        return true;
    }

    public boolean onDoubleTapEvent(MotionEvent e) {
        return false;
    }

    private class QualityChooseView extends View {
        private int circleSize;
        private int gapSize;
        private String hightQualityDescription;
        private int lineSize;
        private String lowQualityDescription;
        private Paint paint = new Paint(1);
        private int sideSide;
        private int startMovingQuality;
        private TextPaint textPaint;

        public QualityChooseView(Context context) {
            super(context);
            TextPaint textPaint2 = new TextPaint(1);
            this.textPaint = textPaint2;
            textPaint2.setTextSize((float) AndroidUtilities.dp(14.0f));
            this.textPaint.setColor(-3289651);
            this.lowQualityDescription = LocaleController.getString("AccDescrVideoCompressLow", NUM);
            this.hightQualityDescription = LocaleController.getString("AccDescrVideoCompressHigh", NUM);
        }

        public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            if (event.getAction() == 0) {
                this.startMovingQuality = PhotoViewer.this.selectedCompression;
                getParent().requestDisallowInterceptTouchEvent(true);
            }
            if (event.getAction() == 0 || event.getAction() == 2) {
                int a = 0;
                while (true) {
                    if (a >= PhotoViewer.this.compressionsCount) {
                        break;
                    }
                    int i = this.sideSide;
                    int i2 = this.lineSize;
                    int i3 = this.gapSize;
                    int i4 = this.circleSize;
                    int cx = i + (((i3 * 2) + i2 + i4) * a) + (i4 / 2);
                    int diff = (i2 / 2) + (i4 / 2) + i3;
                    if (x <= ((float) (cx - diff)) || x >= ((float) (cx + diff))) {
                        a++;
                    } else if (PhotoViewer.this.selectedCompression != a) {
                        int unused = PhotoViewer.this.selectedCompression = a;
                        PhotoViewer.this.didChangedCompressionLevel(false);
                        invalidate();
                    }
                }
            } else if (event.getAction() == 1 || event.getAction() == 3) {
                if (PhotoViewer.this.selectedCompression != this.startMovingQuality) {
                    PhotoViewer.this.requestVideoPreview(1);
                }
                boolean unused2 = PhotoViewer.this.moving = false;
            }
            return true;
        }

        /* access modifiers changed from: protected */
        public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
            this.circleSize = AndroidUtilities.dp(8.0f);
            this.gapSize = AndroidUtilities.dp(2.0f);
            this.sideSide = AndroidUtilities.dp(18.0f);
        }

        /* access modifiers changed from: protected */
        public void onDraw(Canvas canvas) {
            Canvas canvas2 = canvas;
            if (PhotoViewer.this.compressionsCount != 1) {
                this.lineSize = (((getMeasuredWidth() - (this.circleSize * PhotoViewer.this.compressionsCount)) - (this.gapSize * ((PhotoViewer.this.compressionsCount * 2) - 2))) - (this.sideSide * 2)) / (PhotoViewer.this.compressionsCount - 1);
            } else {
                this.lineSize = ((getMeasuredWidth() - (this.circleSize * PhotoViewer.this.compressionsCount)) - (this.gapSize * 2)) - (this.sideSide * 2);
            }
            int cy = (getMeasuredHeight() / 2) + AndroidUtilities.dp(6.0f);
            int a = 0;
            while (a < PhotoViewer.this.compressionsCount) {
                int i = this.sideSide;
                int i2 = this.lineSize + (this.gapSize * 2);
                int i3 = this.circleSize;
                int cx = i + ((i2 + i3) * a) + (i3 / 2);
                if (a <= PhotoViewer.this.selectedCompression) {
                    this.paint.setColor(-11292945);
                } else {
                    this.paint.setColor(NUM);
                }
                canvas2.drawCircle((float) cx, (float) cy, (float) (a == PhotoViewer.this.selectedCompression ? AndroidUtilities.dp(6.0f) : this.circleSize / 2), this.paint);
                if (a != 0) {
                    int x = ((cx - (this.circleSize / 2)) - this.gapSize) - this.lineSize;
                    float endPadding = 0.0f;
                    float startPadding = a == PhotoViewer.this.selectedCompression + 1 ? AndroidUtilities.dpf2(2.0f) : 0.0f;
                    if (a == PhotoViewer.this.selectedCompression) {
                        endPadding = AndroidUtilities.dpf2(2.0f);
                    }
                    canvas.drawRect(((float) x) + startPadding, (float) (cy - AndroidUtilities.dp(1.0f)), ((float) (this.lineSize + x)) - endPadding, (float) (AndroidUtilities.dp(2.0f) + cy), this.paint);
                }
                a++;
            }
            canvas2.drawText(this.lowQualityDescription, (float) this.sideSide, (float) (cy - AndroidUtilities.dp(16.0f)), this.textPaint);
            canvas2.drawText(this.hightQualityDescription, ((float) (getMeasuredWidth() - this.sideSide)) - this.textPaint.measureText(this.hightQualityDescription), (float) (cy - AndroidUtilities.dp(16.0f)), this.textPaint);
        }
    }

    public void updateMuteButton() {
        VideoPlayer videoPlayer2 = this.videoPlayer;
        if (videoPlayer2 != null) {
            videoPlayer2.setMute(this.muteVideo);
        }
        if (!this.videoConvertSupported) {
            this.muteItem.setEnabled(false);
            this.muteItem.setClickable(false);
            this.muteItem.animate().alpha(0.5f).setDuration(180).start();
            this.videoTimelineView.setMode(0);
            return;
        }
        this.muteItem.setEnabled(true);
        this.muteItem.setClickable(true);
        this.muteItem.animate().alpha(1.0f).setDuration(180).start();
        if (this.muteVideo) {
            this.actionBar.setSubtitle(LocaleController.getString("SoundMuted", NUM));
            this.muteItem.setImageResource(NUM);
            if (this.compressItem.getTag() != null) {
                this.compressItem.setAlpha(0.5f);
                this.compressItem.setEnabled(false);
            }
            if (this.sendPhotoType == 1) {
                this.videoTimelineView.setMaxProgressDiff(9600.0f / this.videoDuration);
                this.videoTimelineView.setMode(1);
                updateVideoInfo();
            } else {
                this.videoTimelineView.setMaxProgressDiff(1.0f);
                this.videoTimelineView.setMode(0);
            }
            this.muteItem.setContentDescription(LocaleController.getString("NoSound", NUM));
            return;
        }
        this.actionBar.setSubtitle(this.currentSubtitle);
        this.muteItem.setImageResource(NUM);
        this.muteItem.setContentDescription(LocaleController.getString("Sound", NUM));
        if (this.compressItem.getTag() != null) {
            this.compressItem.setAlpha(1.0f);
            this.compressItem.setEnabled(true);
        }
        this.videoTimelineView.setMaxProgressDiff(1.0f);
        this.videoTimelineView.setMode(0);
    }

    /* access modifiers changed from: private */
    public void didChangedCompressionLevel(boolean request) {
        SharedPreferences.Editor editor = MessagesController.getGlobalMainSettings().edit();
        editor.putInt(String.format("compress_video_%d", new Object[]{Integer.valueOf(this.compressionsCount)}), this.selectedCompression);
        editor.commit();
        updateWidthHeightBitrateForCompression();
        updateVideoInfo();
        if (request) {
            requestVideoPreview(1);
        }
    }

    /* access modifiers changed from: private */
    public void updateVideoInfo() {
        int width;
        int height;
        int bitrate2;
        ActionBar actionBar2 = this.actionBar;
        if (actionBar2 != null) {
            if (this.compressionsCount == 0) {
                actionBar2.setSubtitle((CharSequence) null);
                return;
            }
            int i = this.selectedCompression;
            if (i < 2) {
                this.compressItem.setImageResource(NUM);
            } else if (i == 2) {
                this.compressItem.setImageResource(NUM);
            } else if (i == 3) {
                this.compressItem.setImageResource(NUM);
            }
            this.itemsLayout.requestLayout();
            long ceil = (long) Math.ceil((double) ((this.videoTimelineView.getRightProgress() - this.videoTimelineView.getLeftProgress()) * this.videoDuration));
            this.estimatedDuration = ceil;
            if (this.muteVideo) {
                int i2 = this.rotationValue;
                width = (i2 == 90 || i2 == 270) ? this.resultHeight : this.resultWidth;
                height = (i2 == 90 || i2 == 270) ? this.resultWidth : this.resultHeight;
                if (this.sendPhotoType != 1) {
                    bitrate2 = 921600;
                } else if (ceil <= 2000) {
                    bitrate2 = 2600000;
                } else if (ceil <= 5000) {
                    bitrate2 = 2200000;
                } else {
                    bitrate2 = 1560000;
                }
                long j = (long) (((float) (bitrate2 / 8)) * (((float) ceil) / 1000.0f));
                this.estimatedSize = j;
                this.estimatedSize = j + ((j / 32768) * 16);
            } else if (this.compressItem.getTag() == null) {
                int i3 = this.rotationValue;
                width = (i3 == 90 || i3 == 270) ? this.originalHeight : this.originalWidth;
                height = (i3 == 90 || i3 == 270) ? this.originalWidth : this.originalHeight;
                this.estimatedSize = (long) (((float) this.originalSize) * (((float) this.estimatedDuration) / this.videoDuration));
            } else {
                int height2 = this.rotationValue;
                width = (height2 == 90 || height2 == 270) ? this.resultHeight : this.resultWidth;
                height = (height2 == 90 || height2 == 270) ? this.resultWidth : this.resultHeight;
                long j2 = (long) (((float) ((this.sendPhotoType == 1 ? 0 : this.audioFramesSize) + this.videoFramesSize)) * (((float) this.estimatedDuration) / this.videoDuration));
                this.estimatedSize = j2;
                this.estimatedSize = j2 + ((j2 / 32768) * 16);
            }
            this.videoCutStart = this.videoTimelineView.getLeftProgress();
            float rightProgress = this.videoTimelineView.getRightProgress();
            this.videoCutEnd = rightProgress;
            float f = this.videoCutStart;
            if (f == 0.0f) {
                this.startTime = -1;
            } else {
                this.startTime = ((long) (f * this.videoDuration)) * 1000;
            }
            if (rightProgress == 1.0f) {
                this.endTime = -1;
            } else {
                this.endTime = ((long) (rightProgress * this.videoDuration)) * 1000;
            }
            this.currentSubtitle = String.format("%s, %s", new Object[]{String.format("%dx%d", new Object[]{Integer.valueOf(width), Integer.valueOf(height)}), String.format("%s, ~%s", new Object[]{AndroidUtilities.formatShortDuration((int) (this.estimatedDuration / 1000)), AndroidUtilities.formatFileSize(this.estimatedSize)})});
            this.actionBar.beginDelayedTransition();
            this.actionBar.setSubtitle(this.muteVideo ? LocaleController.getString("SoundMuted", NUM) : this.currentSubtitle);
        }
    }

    /* access modifiers changed from: private */
    public void requestVideoPreview(int request) {
        if (this.videoPreviewMessageObject != null) {
            MediaController.getInstance().cancelVideoConvert(this.videoPreviewMessageObject);
        }
        boolean wasRequestingPreview = this.requestingPreview && !this.tryStartRequestPreviewOnFinish;
        this.requestingPreview = false;
        this.loadInitialVideo = false;
        this.progressView.setVisibility(4);
        if (request != 1) {
            this.tryStartRequestPreviewOnFinish = false;
            this.photoProgressViews[0].setBackgroundState(3, false, true);
            if (request == 2) {
                preparePlayer(this.currentPlayingVideoFile, false, false, this.editState.savedFilterState);
                this.videoPlayer.seekTo((long) (this.videoTimelineView.getLeftProgress() * this.videoDuration));
            }
        } else if (this.resultHeight == this.originalHeight && this.resultWidth == this.originalWidth) {
            this.tryStartRequestPreviewOnFinish = false;
            PhotoProgressView[] photoProgressViewArr = this.photoProgressViews;
            photoProgressViewArr[0].setProgress(0.0f, photoProgressViewArr[0].backgroundState == 0 || this.photoProgressViews[0].previousBackgroundState == 0);
            this.photoProgressViews[0].setBackgroundState(3, false, true);
            if (!wasRequestingPreview) {
                preparePlayer(this.currentPlayingVideoFile, false, false, this.editState.savedFilterState);
                this.videoPlayer.seekTo((long) (this.videoTimelineView.getLeftProgress() * this.videoDuration));
            } else {
                this.loadInitialVideo = true;
            }
        } else {
            releasePlayer(false);
            if (this.videoPreviewMessageObject == null) {
                TLRPC.TL_message message = new TLRPC.TL_message();
                message.id = 0;
                message.message = "";
                message.media = new TLRPC.TL_messageMediaEmpty();
                message.action = new TLRPC.TL_messageActionEmpty();
                message.dialog_id = this.currentDialogId;
                MessageObject messageObject = new MessageObject(UserConfig.selectedAccount, message, false, false);
                this.videoPreviewMessageObject = messageObject;
                messageObject.messageOwner.attachPath = new File(FileLoader.getDirectory(4), "video_preview.mp4").getAbsolutePath();
                this.videoPreviewMessageObject.videoEditedInfo = new VideoEditedInfo();
                this.videoPreviewMessageObject.videoEditedInfo.rotationValue = this.rotationValue;
                this.videoPreviewMessageObject.videoEditedInfo.originalWidth = this.originalWidth;
                this.videoPreviewMessageObject.videoEditedInfo.originalHeight = this.originalHeight;
                this.videoPreviewMessageObject.videoEditedInfo.framerate = this.videoFramerate;
                this.videoPreviewMessageObject.videoEditedInfo.originalPath = this.currentPlayingVideoFile.getPath();
            }
            VideoEditedInfo videoEditedInfo = this.videoPreviewMessageObject.videoEditedInfo;
            long j = this.startTime;
            videoEditedInfo.startTime = j;
            long start = j;
            VideoEditedInfo videoEditedInfo2 = this.videoPreviewMessageObject.videoEditedInfo;
            long j2 = this.endTime;
            videoEditedInfo2.endTime = j2;
            long end = j2;
            if (start == -1) {
                start = 0;
            }
            if (end == -1) {
                end = (long) (this.videoDuration * 1000.0f);
            }
            if (end - start > 5000000) {
                this.videoPreviewMessageObject.videoEditedInfo.endTime = 5000000 + start;
            }
            this.videoPreviewMessageObject.videoEditedInfo.bitrate = this.bitrate;
            this.videoPreviewMessageObject.videoEditedInfo.resultWidth = this.resultWidth;
            this.videoPreviewMessageObject.videoEditedInfo.resultHeight = this.resultHeight;
            this.videoPreviewMessageObject.videoEditedInfo.needUpdateProgress = true;
            this.videoPreviewMessageObject.videoEditedInfo.originalDuration = (long) (this.videoDuration * 1000.0f);
            if (!MediaController.getInstance().scheduleVideoConvert(this.videoPreviewMessageObject, true)) {
                this.tryStartRequestPreviewOnFinish = true;
            }
            this.requestingPreview = true;
            PhotoProgressView[] photoProgressViewArr2 = this.photoProgressViews;
            photoProgressViewArr2[0].setProgress(0.0f, photoProgressViewArr2[0].backgroundState == 0 || this.photoProgressViews[0].previousBackgroundState == 0);
            this.photoProgressViews[0].setBackgroundState(0, false, true);
        }
        this.containerView.invalidate();
    }

    /* access modifiers changed from: private */
    public void updateWidthHeightBitrateForCompression() {
        float maxSize;
        int i = this.compressionsCount;
        if (i > 0) {
            if (this.selectedCompression >= i) {
                this.selectedCompression = i - 1;
            }
            if (this.sendPhotoType == 1) {
                float scale2 = Math.max(800.0f / ((float) this.originalWidth), 800.0f / ((float) this.originalHeight));
                this.resultWidth = Math.round((((float) this.originalWidth) * scale2) / 2.0f) * 2;
                this.resultHeight = Math.round((((float) this.originalHeight) * scale2) / 2.0f) * 2;
            } else {
                int i2 = this.selectedCompression;
                switch (i2) {
                    case 0:
                        maxSize = 480.0f;
                        break;
                    case 1:
                        maxSize = 854.0f;
                        break;
                    case 2:
                        maxSize = 1280.0f;
                        break;
                    default:
                        maxSize = 1920.0f;
                        break;
                }
                int i3 = this.originalWidth;
                int i4 = this.originalHeight;
                float scale3 = maxSize / (i3 > i4 ? (float) i3 : (float) i4);
                if (i2 != i - 1 || scale3 < 1.0f) {
                    this.resultWidth = Math.round((((float) i3) * scale3) / 2.0f) * 2;
                    this.resultHeight = Math.round((((float) this.originalHeight) * scale3) / 2.0f) * 2;
                } else {
                    this.resultWidth = i3;
                    this.resultHeight = i4;
                }
            }
            if (this.bitrate != 0) {
                if (this.sendPhotoType == 1) {
                    this.bitrate = 1560000;
                } else {
                    int i5 = this.resultWidth;
                    int i6 = this.originalWidth;
                    if (i5 == i6 && this.resultHeight == this.originalHeight) {
                        this.bitrate = this.originalBitrate;
                    } else {
                        this.bitrate = MediaController.makeVideoBitrate(this.originalHeight, i6, this.originalBitrate, this.resultHeight, i5);
                    }
                }
                this.videoFramesSize = (long) ((((float) (this.bitrate / 8)) * this.videoDuration) / 1000.0f);
            }
        }
    }

    private void showQualityView(final boolean show) {
        if (show) {
            this.previousCompression = this.selectedCompression;
        }
        AnimatorSet animatorSet = this.qualityChooseViewAnimation;
        if (animatorSet != null) {
            animatorSet.cancel();
        }
        this.qualityChooseViewAnimation = new AnimatorSet();
        float f = 0.0f;
        if (show) {
            this.qualityChooseView.setTag(1);
            this.qualityChooseViewAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(this.pickerView, View.TRANSLATION_Y, new float[]{0.0f, (float) AndroidUtilities.dp(152.0f)}), ObjectAnimator.ofFloat(this.pickerViewSendButton, View.TRANSLATION_Y, new float[]{0.0f, (float) AndroidUtilities.dp(152.0f)}), ObjectAnimator.ofFloat(this.bottomLayout, View.TRANSLATION_Y, new float[]{(float) (-AndroidUtilities.dp(48.0f)), (float) AndroidUtilities.dp(104.0f)})});
        } else {
            this.qualityChooseView.setTag((Object) null);
            this.qualityChooseViewAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(this.qualityChooseView, View.TRANSLATION_Y, new float[]{0.0f, (float) AndroidUtilities.dp(166.0f)}), ObjectAnimator.ofFloat(this.qualityPicker, View.TRANSLATION_Y, new float[]{0.0f, (float) AndroidUtilities.dp(166.0f)}), ObjectAnimator.ofFloat(this.bottomLayout, View.TRANSLATION_Y, new float[]{(float) (-AndroidUtilities.dp(48.0f)), (float) AndroidUtilities.dp(118.0f)})});
        }
        this.qualityChooseViewAnimation.addListener(new AnimatorListenerAdapter() {
            public void onAnimationEnd(Animator animation) {
                if (animation.equals(PhotoViewer.this.qualityChooseViewAnimation)) {
                    AnimatorSet unused = PhotoViewer.this.qualityChooseViewAnimation = new AnimatorSet();
                    if (show) {
                        PhotoViewer.this.qualityChooseView.setVisibility(0);
                        PhotoViewer.this.qualityPicker.setVisibility(0);
                        PhotoViewer.this.qualityChooseViewAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.qualityChooseView, View.TRANSLATION_Y, new float[]{0.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.qualityPicker, View.TRANSLATION_Y, new float[]{0.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.bottomLayout, View.TRANSLATION_Y, new float[]{(float) (-AndroidUtilities.dp(48.0f))})});
                    } else {
                        PhotoViewer.this.qualityChooseView.setVisibility(4);
                        PhotoViewer.this.qualityPicker.setVisibility(4);
                        PhotoViewer.this.qualityChooseViewAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(PhotoViewer.this.pickerView, View.TRANSLATION_Y, new float[]{0.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.pickerViewSendButton, View.TRANSLATION_Y, new float[]{0.0f}), ObjectAnimator.ofFloat(PhotoViewer.this.bottomLayout, View.TRANSLATION_Y, new float[]{(float) (-AndroidUtilities.dp(48.0f))})});
                    }
                    PhotoViewer.this.qualityChooseViewAnimation.addListener(new AnimatorListenerAdapter() {
                        public void onAnimationEnd(Animator animation) {
                            if (animation.equals(PhotoViewer.this.qualityChooseViewAnimation)) {
                                AnimatorSet unused = PhotoViewer.this.qualityChooseViewAnimation = null;
                            }
                        }
                    });
                    PhotoViewer.this.qualityChooseViewAnimation.setDuration(200);
                    PhotoViewer.this.qualityChooseViewAnimation.setInterpolator(AndroidUtilities.decelerateInterpolator);
                    PhotoViewer.this.qualityChooseViewAnimation.start();
                }
            }

            public void onAnimationCancel(Animator animation) {
                AnimatorSet unused = PhotoViewer.this.qualityChooseViewAnimation = null;
            }
        });
        this.qualityChooseViewAnimation.setDuration(200);
        this.qualityChooseViewAnimation.setInterpolator(AndroidUtilities.accelerateInterpolator);
        this.qualityChooseViewAnimation.start();
        float f2 = 0.25f;
        if (this.cameraItem.getVisibility() == 0) {
            this.cameraItem.animate().scaleX(show ? 0.25f : 1.0f).scaleY(show ? 0.25f : 1.0f).alpha(show ? 0.0f : 1.0f).setDuration(200);
        }
        if (this.muteItem.getVisibility() == 0) {
            ViewPropertyAnimator scaleX = this.muteItem.animate().scaleX(show ? 0.25f : 1.0f);
            if (!show) {
                f2 = 1.0f;
            }
            ViewPropertyAnimator scaleY = scaleX.scaleY(f2);
            if (!show) {
                f = 1.0f;
            }
            scaleY.alpha(f).setDuration(200);
        }
    }

    private ByteArrayInputStream cleanBuffer(byte[] data) {
        byte[] output = new byte[data.length];
        int inPos = 0;
        int outPos = 0;
        while (inPos < data.length) {
            if (data[inPos] == 0 && data[inPos + 1] == 0 && data[inPos + 2] == 3) {
                output[outPos] = 0;
                output[outPos + 1] = 0;
                inPos += 3;
                outPos += 2;
            } else {
                output[outPos] = data[inPos];
                inPos++;
                outPos++;
            }
        }
        return new ByteArrayInputStream(output, 0, outPos);
    }

    private void processOpenVideo(final String videoPath, boolean muted, float start, float end) {
        if (this.currentLoadingVideoRunnable != null) {
            Utilities.globalQueue.cancelRunnable(this.currentLoadingVideoRunnable);
            this.currentLoadingVideoRunnable = null;
        }
        this.videoTimelineView.setVideoPath(videoPath, start, end);
        this.videoPreviewMessageObject = null;
        boolean z = true;
        if (!muted && this.sendPhotoType != 1) {
            z = false;
        }
        this.muteVideo = z;
        this.compressionsCount = -1;
        this.rotationValue = 0;
        this.videoFramerate = 25;
        this.originalSize = new File(videoPath).length();
        DispatchQueue dispatchQueue = Utilities.globalQueue;
        AnonymousClass71 r2 = new Runnable() {
            public void run() {
                if (PhotoViewer.this.currentLoadingVideoRunnable == this) {
                    int videoBitrate = MediaController.getVideoBitrate(videoPath);
                    int[] params = new int[11];
                    AnimatedFileDrawable.getVideoInfo(videoPath, params);
                    if (PhotoViewer.this.currentLoadingVideoRunnable == this) {
                        AndroidUtilities.runOnUIThread(new PhotoViewer$71$$ExternalSyntheticLambda0(this, this, params, videoBitrate));
                    }
                }
            }

            /* renamed from: lambda$run$0$org-telegram-ui-PhotoViewer$71  reason: not valid java name */
            public /* synthetic */ void m3636lambda$run$0$orgtelegramuiPhotoViewer$71(Runnable thisFinal, int[] params, int videoBitrate) {
                if (PhotoViewer.this.parentActivity != null && thisFinal == PhotoViewer.this.currentLoadingVideoRunnable) {
                    Runnable unused = PhotoViewer.this.currentLoadingVideoRunnable = null;
                    boolean unused2 = PhotoViewer.this.videoConvertSupported = params[0] != 0 && (!(params[10] != 0) || params[9] != 0);
                    long unused3 = PhotoViewer.this.audioFramesSize = (long) params[5];
                    float unused4 = PhotoViewer.this.videoDuration = (float) params[4];
                    if (videoBitrate == -1) {
                        PhotoViewer photoViewer = PhotoViewer.this;
                        int unused5 = photoViewer.originalBitrate = photoViewer.bitrate = params[3];
                    } else {
                        PhotoViewer photoViewer2 = PhotoViewer.this;
                        int unused6 = photoViewer2.originalBitrate = photoViewer2.bitrate = videoBitrate;
                    }
                    int unused7 = PhotoViewer.this.videoFramerate = params[7];
                    PhotoViewer photoViewer3 = PhotoViewer.this;
                    long unused8 = photoViewer3.videoFramesSize = (long) ((((float) (photoViewer3.bitrate / 8)) * PhotoViewer.this.videoDuration) / 1000.0f);
                    if (PhotoViewer.this.videoConvertSupported) {
                        int unused9 = PhotoViewer.this.rotationValue = params[8];
                        PhotoViewer photoViewer4 = PhotoViewer.this;
                        int unused10 = photoViewer4.resultWidth = photoViewer4.originalWidth = params[1];
                        PhotoViewer photoViewer5 = PhotoViewer.this;
                        int unused11 = photoViewer5.resultHeight = photoViewer5.originalHeight = params[2];
                        PhotoViewer photoViewer6 = PhotoViewer.this;
                        photoViewer6.updateCompressionsCount(photoViewer6.originalWidth, PhotoViewer.this.originalHeight);
                        PhotoViewer photoViewer7 = PhotoViewer.this;
                        int unused12 = photoViewer7.selectedCompression = photoViewer7.selectCompression();
                        PhotoViewer.this.updateWidthHeightBitrateForCompression();
                        if (PhotoViewer.this.selectedCompression > PhotoViewer.this.compressionsCount - 1) {
                            PhotoViewer photoViewer8 = PhotoViewer.this;
                            int unused13 = photoViewer8.selectedCompression = photoViewer8.compressionsCount - 1;
                        }
                        PhotoViewer photoViewer9 = PhotoViewer.this;
                        photoViewer9.setCompressItemEnabled(photoViewer9.compressionsCount > 1, true);
                        if (BuildVars.LOGS_ENABLED) {
                            FileLog.d("compressionsCount = " + PhotoViewer.this.compressionsCount + " w = " + PhotoViewer.this.originalWidth + " h = " + PhotoViewer.this.originalHeight + " r = " + PhotoViewer.this.rotationValue);
                        }
                        if (Build.VERSION.SDK_INT < 18 && PhotoViewer.this.compressItem.getTag() != null) {
                            boolean unused14 = PhotoViewer.this.videoConvertSupported = false;
                            PhotoViewer.this.setCompressItemEnabled(false, true);
                        }
                        PhotoViewer.this.qualityChooseView.invalidate();
                    } else {
                        PhotoViewer.this.setCompressItemEnabled(false, true);
                        int unused15 = PhotoViewer.this.compressionsCount = 0;
                    }
                    PhotoViewer.this.updateVideoInfo();
                    PhotoViewer.this.updateMuteButton();
                }
            }
        };
        this.currentLoadingVideoRunnable = r2;
        dispatchQueue.postRunnable(r2);
    }

    /* access modifiers changed from: private */
    public int selectCompression() {
        SharedPreferences preferences = MessagesController.getGlobalMainSettings();
        int compressionsCount2 = this.compressionsCount;
        while (compressionsCount2 < 5) {
            int selectedCompression2 = preferences.getInt(String.format(Locale.US, "compress_video_%d", new Object[]{Integer.valueOf(compressionsCount2)}), -1);
            if (selectedCompression2 >= 0) {
                return Math.min(selectedCompression2, 2);
            }
            compressionsCount2++;
        }
        return Math.min(2, Math.round(((float) DownloadController.getInstance(this.currentAccount).getMaxVideoBitrate()) / (100.0f / ((float) compressionsCount2))) - 1);
    }

    /* access modifiers changed from: private */
    public void updateCompressionsCount(int h, int w) {
        int maxSize = Math.max(h, w);
        if (maxSize > 1280) {
            this.compressionsCount = 4;
        } else if (maxSize > 854) {
            this.compressionsCount = 3;
        } else if (maxSize > 640) {
            this.compressionsCount = 2;
        } else {
            this.compressionsCount = 1;
        }
    }

    /* access modifiers changed from: private */
    public void setCompressItemEnabled(boolean enabled, boolean animated) {
        ImageView imageView = this.compressItem;
        if (imageView != null) {
            if (enabled && imageView.getTag() != null) {
                return;
            }
            if (enabled || this.compressItem.getTag() != null) {
                this.compressItem.setTag(enabled ? 1 : null);
                AnimatorSet animatorSet = this.compressItemAnimation;
                if (animatorSet != null) {
                    animatorSet.cancel();
                    this.compressItemAnimation = null;
                }
                float f = 1.0f;
                if (animated) {
                    AnimatorSet animatorSet2 = new AnimatorSet();
                    this.compressItemAnimation = animatorSet2;
                    Animator[] animatorArr = new Animator[4];
                    ImageView imageView2 = this.compressItem;
                    Property property = View.ALPHA;
                    float[] fArr = new float[1];
                    fArr[0] = enabled ? 1.0f : 0.5f;
                    animatorArr[0] = ObjectAnimator.ofFloat(imageView2, property, fArr);
                    ImageView imageView3 = this.paintItem;
                    Property property2 = View.ALPHA;
                    float[] fArr2 = new float[1];
                    fArr2[0] = this.videoConvertSupported ? 1.0f : 0.5f;
                    animatorArr[1] = ObjectAnimator.ofFloat(imageView3, property2, fArr2);
                    ImageView imageView4 = this.tuneItem;
                    Property property3 = View.ALPHA;
                    float[] fArr3 = new float[1];
                    fArr3[0] = this.videoConvertSupported ? 1.0f : 0.5f;
                    animatorArr[2] = ObjectAnimator.ofFloat(imageView4, property3, fArr3);
                    ImageView imageView5 = this.cropItem;
                    Property property4 = View.ALPHA;
                    float[] fArr4 = new float[1];
                    if (!this.videoConvertSupported) {
                        f = 0.5f;
                    }
                    fArr4[0] = f;
                    animatorArr[3] = ObjectAnimator.ofFloat(imageView5, property4, fArr4);
                    animatorSet2.playTogether(animatorArr);
                    this.compressItemAnimation.setDuration(180);
                    this.compressItemAnimation.setInterpolator(decelerateInterpolator);
                    this.compressItemAnimation.start();
                    return;
                }
                ImageView imageView6 = this.compressItem;
                if (!enabled) {
                    f = 0.5f;
                }
                imageView6.setAlpha(f);
            }
        }
    }

    /* access modifiers changed from: private */
    public void updateAccessibilityOverlayVisibility() {
        if (this.playButtonAccessibilityOverlay != null) {
            int state = this.photoProgressViews[0].backgroundState;
            if (!this.photoProgressViews[0].isVisible() || !(state == 3 || state == 4)) {
                this.playButtonAccessibilityOverlay.setVisibility(4);
                return;
            }
            if (state == 3) {
                this.playButtonAccessibilityOverlay.setContentDescription(LocaleController.getString("AccActionPlay", NUM));
            } else {
                this.playButtonAccessibilityOverlay.setContentDescription(LocaleController.getString("AccActionPause", NUM));
            }
            this.playButtonAccessibilityOverlay.setVisibility(0);
        }
    }

    private class ListAdapter extends RecyclerListView.SelectionAdapter {
        private Context mContext;

        public ListAdapter(Context context) {
            this.mContext = context;
        }

        public boolean isEnabled(RecyclerView.ViewHolder holder) {
            return false;
        }

        public int getItemCount() {
            if (PhotoViewer.this.placeProvider == null || PhotoViewer.this.placeProvider.getSelectedPhotosOrder() == null) {
                return 0;
            }
            return PhotoViewer.this.placeProvider.getSelectedPhotosOrder().size();
        }

        public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
            PhotoPickerPhotoCell cell = new PhotoPickerPhotoCell(this.mContext);
            cell.checkFrame.setOnClickListener(new PhotoViewer$ListAdapter$$ExternalSyntheticLambda0(this));
            return new RecyclerListView.Holder(cell);
        }

        /* renamed from: lambda$onCreateViewHolder$0$org-telegram-ui-PhotoViewer$ListAdapter  reason: not valid java name */
        public /* synthetic */ void m3640x660e23ec(View v) {
            Object photoEntry = ((View) v.getParent()).getTag();
            int idx = PhotoViewer.this.imagesArrLocals.indexOf(photoEntry);
            if (idx >= 0) {
                int num = PhotoViewer.this.placeProvider.setPhotoChecked(idx, PhotoViewer.this.getCurrentVideoEditedInfo());
                boolean isPhotoChecked = PhotoViewer.this.placeProvider.isPhotoChecked(idx);
                if (idx == PhotoViewer.this.currentIndex) {
                    PhotoViewer.this.checkImageView.setChecked(-1, false, true);
                }
                if (num >= 0) {
                    PhotoViewer.this.selectedPhotosAdapter.notifyItemRemoved(num);
                    if (num == 0) {
                        PhotoViewer.this.selectedPhotosAdapter.notifyItemChanged(0);
                    }
                }
                PhotoViewer.this.updateSelectedCount();
                return;
            }
            int num2 = PhotoViewer.this.placeProvider.setPhotoUnchecked(photoEntry);
            if (num2 >= 0) {
                PhotoViewer.this.selectedPhotosAdapter.notifyItemRemoved(num2);
                if (num2 == 0) {
                    PhotoViewer.this.selectedPhotosAdapter.notifyItemChanged(0);
                }
                PhotoViewer.this.updateSelectedCount();
            }
        }

        public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {
            PhotoPickerPhotoCell cell = (PhotoPickerPhotoCell) holder.itemView;
            cell.setItemWidth(AndroidUtilities.dp(85.0f), position != 0 ? AndroidUtilities.dp(6.0f) : 0);
            BackupImageView imageView = cell.imageView;
            imageView.setOrientation(0, true);
            Object object = PhotoViewer.this.placeProvider.getSelectedPhotos().get(PhotoViewer.this.placeProvider.getSelectedPhotosOrder().get(position));
            if (object instanceof MediaController.PhotoEntry) {
                MediaController.PhotoEntry photoEntry = (MediaController.PhotoEntry) object;
                cell.setTag(photoEntry);
                cell.videoInfoContainer.setVisibility(4);
                if (photoEntry.thumbPath != null) {
                    imageView.setImage(photoEntry.thumbPath, (String) null, this.mContext.getResources().getDrawable(NUM));
                } else if (photoEntry.path != null) {
                    imageView.setOrientation(photoEntry.orientation, true);
                    if (photoEntry.isVideo) {
                        cell.videoInfoContainer.setVisibility(0);
                        cell.videoTextView.setText(AndroidUtilities.formatShortDuration(photoEntry.duration));
                        imageView.setImage("vthumb://" + photoEntry.imageId + ":" + photoEntry.path, (String) null, this.mContext.getResources().getDrawable(NUM));
                    } else {
                        imageView.setImage("thumb://" + photoEntry.imageId + ":" + photoEntry.path, (String) null, this.mContext.getResources().getDrawable(NUM));
                    }
                } else {
                    imageView.setImageResource(NUM);
                }
                cell.setChecked(-1, true, false);
                cell.checkBox.setVisibility(0);
            } else if (object instanceof MediaController.SearchImage) {
                MediaController.SearchImage photoEntry2 = (MediaController.SearchImage) object;
                cell.setTag(photoEntry2);
                cell.setImage(photoEntry2);
                cell.videoInfoContainer.setVisibility(4);
                cell.setChecked(-1, true, false);
                cell.checkBox.setVisibility(0);
            }
        }

        public int getItemViewType(int i) {
            return 0;
        }
    }

    /* access modifiers changed from: private */
    public int getThemedColor(String key) {
        Theme.ResourcesProvider resourcesProvider2 = this.resourcesProvider;
        Integer color = resourcesProvider2 != null ? resourcesProvider2.getColor(key) : null;
        return color != null ? color.intValue() : Theme.getColor(key);
    }
}
