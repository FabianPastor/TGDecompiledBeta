package org.telegram.ui;

import android.animation.Animator;
import android.animation.AnimatorListenerAdapter;
import android.animation.AnimatorSet;
import android.animation.ObjectAnimator;
import android.annotation.TargetApi;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.content.ClipData;
import android.content.ClipboardManager;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.content.res.Configuration;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Outline;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.Path.Direction;
import android.graphics.PorterDuff.Mode;
import android.graphics.PorterDuffColorFilter;
import android.graphics.PorterDuffXfermode;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.Typeface;
import android.graphics.drawable.Drawable;
import android.media.ThumbnailUtils;
import android.net.Uri;
import android.os.Build.VERSION;
import android.os.Bundle;
import android.support.v4.content.FileProvider;
import android.text.Spannable;
import android.text.SpannableString;
import android.text.SpannableStringBuilder;
import android.text.TextUtils;
import android.text.TextUtils.TruncateAt;
import android.text.style.CharacterStyle;
import android.text.style.ClickableSpan;
import android.text.style.ForegroundColorSpan;
import android.text.style.URLSpan;
import android.util.LongSparseArray;
import android.util.SparseArray;
import android.util.SparseBooleanArray;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.TextureView;
import android.view.View;
import android.view.View.MeasureSpec;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.view.ViewOutlineProvider;
import android.view.ViewTreeObserver.OnPreDrawListener;
import android.view.accessibility.AccessibilityNodeInfo;
import android.view.accessibility.AccessibilityNodeInfo.CollectionInfo;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.ImageView.ScaleType;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;
import com.google.android.exoplayer2.ui.AspectRatioFrameLayout;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.net.URLDecoder;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Collections;
import java.util.HashMap;
import java.util.Iterator;
import java.util.concurrent.CountDownLatch;
import org.telegram.PhoneFormat.PhoneFormat;
import org.telegram.messenger.AndroidUtilities;
import org.telegram.messenger.ApplicationLoader;
import org.telegram.messenger.BuildVars;
import org.telegram.messenger.ChatObject;
import org.telegram.messenger.ContactsController;
import org.telegram.messenger.DataQuery;
import org.telegram.messenger.DownloadController;
import org.telegram.messenger.Emoji;
import org.telegram.messenger.EmojiSuggestion;
import org.telegram.messenger.FileLoader;
import org.telegram.messenger.FileLog;
import org.telegram.messenger.ImageReceiver;
import org.telegram.messenger.ImageReceiver.BitmapHolder;
import org.telegram.messenger.LocaleController;
import org.telegram.messenger.MediaController;
import org.telegram.messenger.MediaController.PhotoEntry;
import org.telegram.messenger.MessageObject;
import org.telegram.messenger.MessageObject.GroupedMessagePosition;
import org.telegram.messenger.MessageObject.GroupedMessages;
import org.telegram.messenger.MessagesController;
import org.telegram.messenger.MessagesStorage;
import org.telegram.messenger.NotificationCenter;
import org.telegram.messenger.NotificationCenter.NotificationCenterDelegate;
import org.telegram.messenger.NotificationsController;
import org.telegram.messenger.SecretChatHelper;
import org.telegram.messenger.SendMessagesHelper;
import org.telegram.messenger.SendMessagesHelper.SendingMediaInfo;
import org.telegram.messenger.SharedConfig;
import org.telegram.messenger.UserConfig;
import org.telegram.messenger.UserObject;
import org.telegram.messenger.Utilities;
import org.telegram.messenger.VideoEditedInfo;
import org.telegram.messenger.browser.Browser;
import org.telegram.messenger.support.widget.GridLayoutManager.SpanSizeLookup;
import org.telegram.messenger.support.widget.GridLayoutManagerFixed;
import org.telegram.messenger.support.widget.LinearLayoutManager;
import org.telegram.messenger.support.widget.LinearSmoothScrollerMiddle;
import org.telegram.messenger.support.widget.RecyclerView;
import org.telegram.messenger.support.widget.RecyclerView.Adapter;
import org.telegram.messenger.support.widget.RecyclerView.ItemDecoration;
import org.telegram.messenger.support.widget.RecyclerView.LayoutManager;
import org.telegram.messenger.support.widget.RecyclerView.LayoutParams;
import org.telegram.messenger.support.widget.RecyclerView.OnScrollListener;
import org.telegram.messenger.support.widget.RecyclerView.State;
import org.telegram.messenger.support.widget.RecyclerView.ViewHolder;
import org.telegram.tgnet.ConnectionsManager;
import org.telegram.tgnet.TLObject;
import org.telegram.tgnet.TLRPC.BotInfo;
import org.telegram.tgnet.TLRPC.BotInlineResult;
import org.telegram.tgnet.TLRPC.Chat;
import org.telegram.tgnet.TLRPC.ChatFull;
import org.telegram.tgnet.TLRPC.ChatParticipant;
import org.telegram.tgnet.TLRPC.Document;
import org.telegram.tgnet.TLRPC.DocumentAttribute;
import org.telegram.tgnet.TLRPC.DraftMessage;
import org.telegram.tgnet.TLRPC.EncryptedChat;
import org.telegram.tgnet.TLRPC.FileLocation;
import org.telegram.tgnet.TLRPC.InputStickerSet;
import org.telegram.tgnet.TLRPC.KeyboardButton;
import org.telegram.tgnet.TLRPC.Message;
import org.telegram.tgnet.TLRPC.MessageEntity;
import org.telegram.tgnet.TLRPC.MessageMedia;
import org.telegram.tgnet.TLRPC.PhotoSize;
import org.telegram.tgnet.TLRPC.TL_botCommand;
import org.telegram.tgnet.TLRPC.TL_channelForbidden;
import org.telegram.tgnet.TLRPC.TL_channelFull;
import org.telegram.tgnet.TLRPC.TL_channels_exportMessageLink;
import org.telegram.tgnet.TLRPC.TL_chatForbidden;
import org.telegram.tgnet.TLRPC.TL_chatFull;
import org.telegram.tgnet.TLRPC.TL_chatParticipantsForbidden;
import org.telegram.tgnet.TLRPC.TL_dialog;
import org.telegram.tgnet.TLRPC.TL_document;
import org.telegram.tgnet.TLRPC.TL_documentAttributeImageSize;
import org.telegram.tgnet.TLRPC.TL_documentAttributeVideo;
import org.telegram.tgnet.TLRPC.TL_encryptedChat;
import org.telegram.tgnet.TLRPC.TL_encryptedChatDiscarded;
import org.telegram.tgnet.TLRPC.TL_encryptedChatRequested;
import org.telegram.tgnet.TLRPC.TL_encryptedChatWaiting;
import org.telegram.tgnet.TLRPC.TL_error;
import org.telegram.tgnet.TLRPC.TL_exportedMessageLink;
import org.telegram.tgnet.TLRPC.TL_fileLocationUnavailable;
import org.telegram.tgnet.TLRPC.TL_game;
import org.telegram.tgnet.TLRPC.TL_inlineBotSwitchPM;
import org.telegram.tgnet.TLRPC.TL_inputMediaPoll;
import org.telegram.tgnet.TLRPC.TL_inputMessageEntityMentionName;
import org.telegram.tgnet.TLRPC.TL_inputStickerSetID;
import org.telegram.tgnet.TLRPC.TL_inputStickerSetShortName;
import org.telegram.tgnet.TLRPC.TL_keyboardButtonBuy;
import org.telegram.tgnet.TLRPC.TL_keyboardButtonCallback;
import org.telegram.tgnet.TLRPC.TL_keyboardButtonGame;
import org.telegram.tgnet.TLRPC.TL_keyboardButtonSwitchInline;
import org.telegram.tgnet.TLRPC.TL_keyboardButtonUrl;
import org.telegram.tgnet.TLRPC.TL_messageActionPhoneCall;
import org.telegram.tgnet.TLRPC.TL_messageEntityBold;
import org.telegram.tgnet.TLRPC.TL_messageEntityCode;
import org.telegram.tgnet.TLRPC.TL_messageEntityItalic;
import org.telegram.tgnet.TLRPC.TL_messageEntityMentionName;
import org.telegram.tgnet.TLRPC.TL_messageEntityPre;
import org.telegram.tgnet.TLRPC.TL_messageEntityTextUrl;
import org.telegram.tgnet.TLRPC.TL_messageMediaGame;
import org.telegram.tgnet.TLRPC.TL_messageMediaPhoto;
import org.telegram.tgnet.TLRPC.TL_messageMediaPoll;
import org.telegram.tgnet.TLRPC.TL_messageMediaWebPage;
import org.telegram.tgnet.TLRPC.TL_messages_editMessage;
import org.telegram.tgnet.TLRPC.TL_messages_getMessageEditData;
import org.telegram.tgnet.TLRPC.TL_messages_getUnreadMentions;
import org.telegram.tgnet.TLRPC.TL_messages_getWebPagePreview;
import org.telegram.tgnet.TLRPC.TL_peerNotifySettings;
import org.telegram.tgnet.TLRPC.TL_photoSizeEmpty;
import org.telegram.tgnet.TLRPC.TL_poll;
import org.telegram.tgnet.TLRPC.TL_pollAnswer;
import org.telegram.tgnet.TLRPC.TL_replyKeyboardForceReply;
import org.telegram.tgnet.TLRPC.TL_userFull;
import org.telegram.tgnet.TLRPC.TL_webPage;
import org.telegram.tgnet.TLRPC.TL_webPagePending;
import org.telegram.tgnet.TLRPC.Updates;
import org.telegram.tgnet.TLRPC.User;
import org.telegram.tgnet.TLRPC.WebPage;
import org.telegram.tgnet.TLRPC.messages_Messages;
import org.telegram.ui.ActionBar.ActionBar;
import org.telegram.ui.ActionBar.ActionBar.ActionBarMenuOnItemClick;
import org.telegram.ui.ActionBar.ActionBarLayout;
import org.telegram.ui.ActionBar.ActionBarMenu;
import org.telegram.ui.ActionBar.ActionBarMenuItem;
import org.telegram.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener;
import org.telegram.ui.ActionBar.AlertDialog;
import org.telegram.ui.ActionBar.BackDrawable;
import org.telegram.ui.ActionBar.BaseFragment;
import org.telegram.ui.ActionBar.BottomSheet.Builder;
import org.telegram.ui.ActionBar.SimpleTextView;
import org.telegram.ui.ActionBar.Theme;
import org.telegram.ui.ActionBar.Theme.ThemeInfo;
import org.telegram.ui.ActionBar.ThemeDescription;
import org.telegram.ui.ActionBar.ThemeDescription.ThemeDescriptionDelegate;
import org.telegram.ui.Adapters.MentionsAdapter;
import org.telegram.ui.Adapters.MentionsAdapter.MentionsAdapterDelegate;
import org.telegram.ui.Adapters.StickersAdapter;
import org.telegram.ui.Cells.BotHelpCell;
import org.telegram.ui.Cells.BotSwitchCell;
import org.telegram.ui.Cells.ChatActionCell;
import org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate;
import org.telegram.ui.Cells.ChatLoadingCell;
import org.telegram.ui.Cells.ChatMessageCell;
import org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate;
import org.telegram.ui.Cells.ChatUnreadCell;
import org.telegram.ui.Cells.CheckBoxCell;
import org.telegram.ui.Cells.ContextLinkCell;
import org.telegram.ui.Cells.MentionCell;
import org.telegram.ui.Cells.StickerCell;
import org.telegram.ui.Components.AlertsCreator;
import org.telegram.ui.Components.AnimatedFileDrawable;
import org.telegram.ui.Components.BackupImageView;
import org.telegram.ui.Components.ChatActivityEnterView;
import org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate;
import org.telegram.ui.Components.ChatAttachAlert;
import org.telegram.ui.Components.ChatAttachAlert.ChatAttachViewDelegate;
import org.telegram.ui.Components.ChatAvatarContainer;
import org.telegram.ui.Components.ChatBigEmptyView;
import org.telegram.ui.Components.CombinedDrawable;
import org.telegram.ui.Components.CorrectlyMeasuringTextView;
import org.telegram.ui.Components.EmbedBottomSheet;
import org.telegram.ui.Components.EmojiView;
import org.telegram.ui.Components.ExtendedGridLayoutManager;
import org.telegram.ui.Components.FragmentContextView;
import org.telegram.ui.Components.HintView;
import org.telegram.ui.Components.InstantCameraView;
import org.telegram.ui.Components.LayoutHelper;
import org.telegram.ui.Components.NumberTextView;
import org.telegram.ui.Components.PipRoundVideoView;
import org.telegram.ui.Components.RadialProgressView;
import org.telegram.ui.Components.RecyclerListView;
import org.telegram.ui.Components.RecyclerListView.Holder;
import org.telegram.ui.Components.RecyclerListView.OnItemClickListener;
import org.telegram.ui.Components.RecyclerListView.OnItemClickListenerExtended;
import org.telegram.ui.Components.RecyclerListView.OnItemLongClickListenerExtended;
import org.telegram.ui.Components.ShareAlert;
import org.telegram.ui.Components.Size;
import org.telegram.ui.Components.SizeNotifierFrameLayout;
import org.telegram.ui.Components.StickersAlert;
import org.telegram.ui.Components.StickersAlert.StickersAlertDelegate;
import org.telegram.ui.Components.TypefaceSpan;
import org.telegram.ui.Components.URLSpanBotCommand;
import org.telegram.ui.Components.URLSpanMono;
import org.telegram.ui.Components.URLSpanNoUnderline;
import org.telegram.ui.Components.URLSpanReplacement;
import org.telegram.ui.Components.URLSpanUserMention;
import org.telegram.ui.Components.UndoView;
import org.telegram.ui.Components.voip.VoIPHelper;
import org.telegram.ui.ContentPreviewViewer.ContentPreviewViewerDelegate;
import org.telegram.ui.DialogsActivity.DialogsActivityDelegate;
import org.telegram.ui.DocumentSelectActivity.DocumentSelectActivityDelegate;
import org.telegram.ui.LocationActivity.LocationActivityDelegate;
import org.telegram.ui.PhotoAlbumPickerActivity.PhotoAlbumPickerActivityDelegate;
import org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider;
import org.telegram.ui.PhotoViewer.PhotoViewerProvider;
import org.telegram.ui.PhotoViewer.PlaceProviderObject;

public class ChatActivity extends BaseFragment implements NotificationCenterDelegate, DialogsActivityDelegate, LocationActivityDelegate {
    private static final int add_shortcut = 24;
    private static final int attach_audio = 3;
    private static final int attach_contact = 5;
    private static final int attach_document = 4;
    private static final int attach_gallery = 1;
    private static final int attach_location = 6;
    private static final int attach_photo = 0;
    private static final int attach_poll = 9;
    private static final int attach_video = 2;
    private static final int bot_help = 30;
    private static final int bot_settings = 31;
    private static final int call = 32;
    private static final int chat_enc_timer = 13;
    private static final int chat_menu_attach = 14;
    private static final int clear_history = 15;
    private static final int copy = 10;
    private static final int delete = 12;
    private static final int delete_chat = 16;
    private static final int edit = 23;
    private static final int forward = 11;
    private static final int id_chat_compose_panel = 1000;
    private static final int mute = 18;
    private static final int reply = 19;
    private static final int report = 21;
    private static final int search = 40;
    private static final int share_contact = 17;
    private static final int star = 22;
    private static final int text_bold = 50;
    private static final int text_italic = 51;
    private static final int text_link = 53;
    private static final int text_mono = 52;
    private static final int text_regular = 54;
    private ArrayList<View> actionModeViews = new ArrayList();
    private TextView addContactItem;
    private TextView addToContactsButton;
    private TextView alertNameTextView;
    private TextView alertTextView;
    private FrameLayout alertView;
    private AnimatorSet alertViewAnimator;
    private boolean allowContextBotPanel;
    private boolean allowContextBotPanelSecond = true;
    private boolean allowStickersPanel;
    private ArrayList<MessageObject> animatingMessageObjects = new ArrayList();
    private Paint aspectPaint;
    private Path aspectPath;
    private AspectRatioFrameLayout aspectRatioFrameLayout;
    private ActionBarMenuItem attachItem;
    private ChatAvatarContainer avatarContainer;
    private ChatBigEmptyView bigEmptyView;
    private MessageObject botButtons;
    private PhotoViewerProvider botContextProvider = new EmptyPhotoViewerProvider() {
        public PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, FileLocation fileLocation, int index, boolean needPreview) {
            if (index < 0 || index >= ChatActivity.this.botContextResults.size()) {
                return null;
            }
            int count = ChatActivity.this.mentionListView.getChildCount();
            BotInlineResult result = ChatActivity.this.botContextResults.get(index);
            for (int a = 0; a < count; a++) {
                ImageReceiver imageReceiver = null;
                View view = ChatActivity.this.mentionListView.getChildAt(a);
                if (view instanceof ContextLinkCell) {
                    ContextLinkCell cell = (ContextLinkCell) view;
                    if (cell.getResult() == result) {
                        imageReceiver = cell.getPhotoImage();
                    }
                }
                if (imageReceiver != null) {
                    int[] coords = new int[2];
                    view.getLocationInWindow(coords);
                    PlaceProviderObject object = new PlaceProviderObject();
                    object.viewX = coords[0];
                    object.viewY = coords[1] - (VERSION.SDK_INT >= 21 ? 0 : AndroidUtilities.statusBarHeight);
                    object.parentView = ChatActivity.this.mentionListView;
                    object.imageReceiver = imageReceiver;
                    object.thumb = imageReceiver.getBitmapSafe();
                    object.radius = imageReceiver.getRoundRadius();
                    return object;
                }
            }
            return null;
        }

        public void sendButtonPressed(int index, VideoEditedInfo videoEditedInfo) {
            if (index >= 0 && index < ChatActivity.this.botContextResults.size()) {
                ChatActivity.this.sendBotInlineResult((BotInlineResult) ChatActivity.this.botContextResults.get(index));
            }
        }
    };
    private ArrayList<Object> botContextResults;
    private SparseArray<BotInfo> botInfo = new SparseArray();
    private MessageObject botReplyButtons;
    private String botUser;
    private int botsCount;
    private FrameLayout bottomOverlay;
    private AnimatorSet bottomOverlayAnimation;
    private FrameLayout bottomOverlayChat;
    private TextView bottomOverlayChatText;
    private RadialProgressView bottomOverlayProgress;
    private TextView bottomOverlayText;
    private boolean[] cacheEndReached = new boolean[2];
    private int canEditMessagesCount;
    private int cantDeleteMessagesCount;
    protected ChatActivityEnterView chatActivityEnterView;
    private ChatActivityAdapter chatAdapter;
    private ChatAttachAlert chatAttachAlert;
    private long chatEnterTime;
    protected ChatFull chatInfo;
    private GridLayoutManagerFixed chatLayoutManager;
    private long chatLeaveTime;
    private RecyclerListView chatListView;
    private ArrayList<ChatMessageCell> chatMessageCellsCache = new ArrayList();
    private boolean checkTextureViewPosition;
    private boolean clearingHistory;
    private Dialog closeChatDialog;
    private ImageView closePinned;
    private ImageView closeReportSpam;
    private SizeNotifierFrameLayout contentView;
    private int createUnreadMessageAfterId;
    private boolean createUnreadMessageAfterIdLoading;
    protected Chat currentChat;
    protected EncryptedChat currentEncryptedChat;
    private boolean currentFloatingDateOnScreen;
    private boolean currentFloatingTopIsNotMessage;
    private String currentPicturePath;
    protected User currentUser;
    private long dialog_id;
    private ChatMessageCell drawLaterRoundProgressCell;
    private int editTextEnd;
    private ActionBarMenuItem editTextItem;
    private int editTextStart;
    private MessageObject editingMessageObject;
    private int editingMessageObjectReqId;
    private View emojiButtonRed;
    private TextView emptyView;
    private FrameLayout emptyViewContainer;
    private boolean[] endReached = new boolean[2];
    private boolean first = true;
    private boolean firstLoading = true;
    boolean firstOpen = true;
    private boolean firstUnreadSent = false;
    private int first_unread_id;
    private boolean fixPaddingsInLayout;
    private AnimatorSet floatingDateAnimation;
    private ChatActionCell floatingDateView;
    private boolean forceScrollToTop;
    private boolean[] forwardEndReached = new boolean[]{true, true};
    private HintView forwardHintView;
    private MessageObject forwardingMessage;
    private GroupedMessages forwardingMessageGroup;
    private ArrayList<MessageObject> forwardingMessages;
    private ArrayList<CharSequence> foundUrls;
    private WebPage foundWebPage;
    private FragmentContextView fragmentContextView;
    private TextView gifHintTextView;
    private boolean globalIgnoreLayout;
    private LongSparseArray<GroupedMessages> groupedMessagesMap = new LongSparseArray();
    private boolean hasAllMentionsLocal;
    private boolean hasBotsCommands;
    private boolean hasUnfavedSelected;
    private ActionBarMenuItem headerItem;
    private Runnable hideAlertViewRunnable;
    private int highlightMessageId = Integer.MAX_VALUE;
    private boolean ignoreAttachOnPause;
    private long inlineReturn;
    private InstantCameraView instantCameraView;
    private boolean isBroadcast;
    private int lastLoadIndex;
    private int last_message_id = 0;
    private int linkSearchRequestId;
    private boolean loading;
    private boolean loadingForward;
    private boolean loadingFromOldPosition;
    private int loadingPinnedMessage;
    private int loadsCount;
    private boolean locationAlertShown;
    private int[] maxDate = new int[]{Integer.MIN_VALUE, Integer.MIN_VALUE};
    private int[] maxMessageId = new int[]{Integer.MAX_VALUE, Integer.MAX_VALUE};
    private TextView mediaBanTooltip;
    private FrameLayout mentionContainer;
    private ExtendedGridLayoutManager mentionGridLayoutManager;
    private LinearLayoutManager mentionLayoutManager;
    private AnimatorSet mentionListAnimation;
    private RecyclerListView mentionListView;
    private boolean mentionListViewIgnoreLayout;
    private boolean mentionListViewIsScrolling;
    private int mentionListViewLastViewPosition;
    private int mentionListViewLastViewTop;
    private int mentionListViewScrollOffsetY;
    private FrameLayout mentiondownButton;
    private ObjectAnimator mentiondownButtonAnimation;
    private TextView mentiondownButtonCounter;
    private ImageView mentiondownButtonImage;
    private MentionsAdapter mentionsAdapter;
    private OnItemClickListener mentionsOnItemClickListener;
    private long mergeDialogId;
    protected ArrayList<MessageObject> messages = new ArrayList();
    private HashMap<String, ArrayList<MessageObject>> messagesByDays = new HashMap();
    private SparseArray<MessageObject>[] messagesDict = new SparseArray[]{new SparseArray(), new SparseArray()};
    private int[] minDate = new int[2];
    private int[] minMessageId = new int[]{Integer.MIN_VALUE, Integer.MIN_VALUE};
    private TextView muteItem;
    private MessageObject needAnimateToMessage;
    private boolean needSelectFromMessageId;
    private int newMentionsCount;
    private int newUnreadMessageCount;
    private HintView noSoundHintView;
    OnItemClickListenerExtended onItemClickListener = new OnItemClickListenerExtended() {
        public void onItemClick(View view, int position, float x, float y) {
            ChatActivity.this.wasManualScroll = true;
            if (ChatActivity.this.actionBar.isActionModeShowed()) {
                boolean outside = false;
                if (view instanceof ChatMessageCell) {
                    if (((ChatMessageCell) view).isInsideBackground(x, y)) {
                        outside = false;
                    } else {
                        outside = true;
                    }
                }
                ChatActivity.this.processRowSelect(view, outside);
                return;
            }
            ChatActivity.this.createMenu(view, true, false);
        }
    };
    OnItemLongClickListenerExtended onItemLongClickListener = new OnItemLongClickListenerExtended() {
        public boolean onItemClick(View view, int position, float x, float y) {
            ChatActivity.this.wasManualScroll = true;
            if (ChatActivity.this.actionBar.isActionModeShowed()) {
                boolean outside = false;
                if (view instanceof ChatMessageCell) {
                    if (((ChatMessageCell) view).isInsideBackground(x, y)) {
                        outside = false;
                    } else {
                        outside = true;
                    }
                }
                ChatActivity.this.processRowSelect(view, outside);
            } else {
                ChatActivity.this.createMenu(view, false, true);
            }
            return true;
        }

        public void onLongClickRelease() {
        }

        public void onMove(float dx, float dy) {
        }
    };
    private boolean openAnimationEnded;
    private boolean openSearchKeyboard;
    private View overlayView;
    private FrameLayout pagedownButton;
    private AnimatorSet pagedownButtonAnimation;
    private TextView pagedownButtonCounter;
    private ImageView pagedownButtonImage;
    private boolean pagedownButtonShowedByScroll;
    private boolean paused = true;
    private boolean pausedOnLastMessage;
    private String pendingLinkSearchString;
    private Runnable pendingWebPageTimeoutRunnable;
    private PhotoViewerProvider photoViewerProvider = new EmptyPhotoViewerProvider() {
        public PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, FileLocation fileLocation, int index, boolean needPreview) {
            int count = ChatActivity.this.chatListView.getChildCount();
            for (int a = 0; a < count; a++) {
                ImageReceiver imageReceiver = null;
                View view = ChatActivity.this.chatListView.getChildAt(a);
                MessageObject message;
                if (view instanceof ChatMessageCell) {
                    if (messageObject != null) {
                        ChatMessageCell cell = (ChatMessageCell) view;
                        message = cell.getMessageObject();
                        if (message != null && message.getId() == messageObject.getId()) {
                            imageReceiver = cell.getPhotoImage();
                        }
                    }
                } else if (view instanceof ChatActionCell) {
                    ChatActionCell cell2 = (ChatActionCell) view;
                    message = cell2.getMessageObject();
                    if (message != null) {
                        if (messageObject != null) {
                            if (message.getId() == messageObject.getId()) {
                                imageReceiver = cell2.getPhotoImage();
                            }
                        } else if (fileLocation != null && message.photoThumbs != null) {
                            for (int b = 0; b < message.photoThumbs.size(); b++) {
                                PhotoSize photoSize = (PhotoSize) message.photoThumbs.get(b);
                                if (photoSize.location.volume_id == fileLocation.volume_id && photoSize.location.local_id == fileLocation.local_id) {
                                    imageReceiver = cell2.getPhotoImage();
                                    break;
                                }
                            }
                        }
                    }
                }
                if (imageReceiver != null) {
                    int[] coords = new int[2];
                    view.getLocationInWindow(coords);
                    PlaceProviderObject object = new PlaceProviderObject();
                    object.viewX = coords[0];
                    object.viewY = coords[1] - (VERSION.SDK_INT >= 21 ? 0 : AndroidUtilities.statusBarHeight);
                    object.parentView = ChatActivity.this.chatListView;
                    object.imageReceiver = imageReceiver;
                    if (needPreview) {
                        object.thumb = imageReceiver.getBitmapSafe();
                    }
                    object.radius = imageReceiver.getRoundRadius();
                    if ((view instanceof ChatActionCell) && ChatActivity.this.currentChat != null) {
                        object.dialogId = -ChatActivity.this.currentChat.id;
                    }
                    if ((ChatActivity.this.pinnedMessageView == null || ChatActivity.this.pinnedMessageView.getTag() != null) && (ChatActivity.this.reportSpamView == null || ChatActivity.this.reportSpamView.getTag() != null)) {
                        return object;
                    }
                    object.clipTopAddition = AndroidUtilities.dp(48.0f);
                    return object;
                }
            }
            return null;
        }
    };
    private PhotoSize pinnedImageLocation;
    private View pinnedLineView;
    private BackupImageView pinnedMessageImageView;
    private SimpleTextView pinnedMessageNameTextView;
    private MessageObject pinnedMessageObject;
    private SimpleTextView pinnedMessageTextView;
    private FrameLayout pinnedMessageView;
    private AnimatorSet pinnedMessageViewAnimator;
    private LongSparseArray<ArrayList<MessageObject>> polls = new LongSparseArray();
    ArrayList<MessageObject> pollsToCheck = new ArrayList(10);
    private int prevSetUnreadCount = Integer.MIN_VALUE;
    private RadialProgressView progressBar;
    private FrameLayout progressView;
    private View progressView2;
    private AnimatorSet replyButtonAnimation;
    private ImageView replyCloseImageView;
    private ImageView replyIconImageView;
    private PhotoSize replyImageLocation;
    private BackupImageView replyImageView;
    private View replyLineView;
    private SimpleTextView replyNameTextView;
    private SimpleTextView replyObjectTextView;
    private MessageObject replyingMessageObject;
    private TextView reportSpamButton;
    private FrameLayout reportSpamContainer;
    private LinearLayout reportSpamView;
    private AnimatorSet reportSpamViewAnimator;
    private int returnToLoadIndex;
    private int returnToMessageId;
    private AnimatorSet runningAnimation;
    private MessageObject scrollToMessage;
    private int scrollToMessagePosition = -10000;
    private int scrollToOffsetOnRecreate = 0;
    private int scrollToPositionOnRecreate = -1;
    private boolean scrollToTopOnResume;
    private boolean scrollToTopUnReadOnResume;
    private boolean scrollToVideo;
    private boolean scrollingChatListView;
    private boolean scrollingFloatingDate;
    private ImageView searchCalendarButton;
    private FrameLayout searchContainer;
    private SimpleTextView searchCountText;
    private ImageView searchDownButton;
    private ActionBarMenuItem searchItem;
    private ImageView searchUpButton;
    private ImageView searchUserButton;
    private boolean searchingForUser;
    private User searchingUserMessages;
    private SparseArray<MessageObject>[] selectedMessagesCanCopyIds = new SparseArray[]{new SparseArray(), new SparseArray()};
    private SparseArray<MessageObject>[] selectedMessagesCanStarIds = new SparseArray[]{new SparseArray(), new SparseArray()};
    private NumberTextView selectedMessagesCountTextView;
    private SparseArray<MessageObject>[] selectedMessagesIds = new SparseArray[]{new SparseArray(), new SparseArray()};
    private MessageObject selectedObject;
    private GroupedMessages selectedObjectGroup;
    private int startLoadFromMessageId;
    private int startLoadFromMessageOffset = Integer.MAX_VALUE;
    private boolean startReplyOnTextChange;
    private String startVideoEdit;
    private StickersAdapter stickersAdapter;
    private RecyclerListView stickersListView;
    private OnItemClickListener stickersOnItemClickListener;
    private FrameLayout stickersPanel;
    private ImageView stickersPanelArrow;
    private View timeItem2;
    private int topViewWasVisible;
    private UndoView undoView;
    private MessageObject unreadMessageObject;
    private boolean userBlocked = false;
    protected TL_userFull userInfo;
    private FrameLayout videoPlayerContainer;
    private TextureView videoTextureView;
    private AnimatorSet voiceHintAnimation;
    private Runnable voiceHintHideRunnable;
    private TextView voiceHintTextView;
    private Runnable waitingForCharaterEnterRunnable;
    private ArrayList<Integer> waitingForLoad = new ArrayList();
    private boolean waitingForReplyMessageLoad;
    private boolean wasManualScroll;
    private boolean wasPaused;

    public class ChatActivityAdapter extends Adapter {
        private int botInfoRow = -1;
        private boolean isBot;
        private int loadingDownRow;
        private int loadingUpRow;
        private Context mContext;
        private int messagesEndRow;
        private int messagesStartRow;
        private int rowCount;

        public ChatActivityAdapter(Context context) {
            this.mContext = context;
            boolean z = ChatActivity.this.currentUser != null && ChatActivity.this.currentUser.bot;
            this.isBot = z;
        }

        public void updateRows() {
            this.rowCount = 0;
            int i;
            if (ChatActivity.this.messages.isEmpty()) {
                this.loadingUpRow = -1;
                this.loadingDownRow = -1;
                this.messagesStartRow = -1;
                this.messagesEndRow = -1;
                if (ChatActivity.this.currentUser == null || !ChatActivity.this.currentUser.bot || MessagesController.isSupportUser(ChatActivity.this.currentUser)) {
                    this.botInfoRow = -1;
                    return;
                }
                i = this.rowCount;
                this.rowCount = i + 1;
                this.botInfoRow = i;
                return;
            }
            if (ChatActivity.this.forwardEndReached[0] && (ChatActivity.this.mergeDialogId == 0 || ChatActivity.this.forwardEndReached[1])) {
                this.loadingDownRow = -1;
            } else {
                i = this.rowCount;
                this.rowCount = i + 1;
                this.loadingDownRow = i;
            }
            this.messagesStartRow = this.rowCount;
            this.rowCount += ChatActivity.this.messages.size();
            this.messagesEndRow = this.rowCount;
            if (ChatActivity.this.currentUser == null || !ChatActivity.this.currentUser.bot) {
                this.botInfoRow = -1;
            } else {
                i = this.rowCount;
                this.rowCount = i + 1;
                this.botInfoRow = i;
            }
            if (ChatActivity.this.endReached[0] && (ChatActivity.this.mergeDialogId == 0 || ChatActivity.this.endReached[1])) {
                this.loadingUpRow = -1;
                return;
            }
            i = this.rowCount;
            this.rowCount = i + 1;
            this.loadingUpRow = i;
        }

        public int getItemCount() {
            return ChatActivity.this.clearingHistory ? 0 : this.rowCount;
        }

        public long getItemId(int i) {
            return -1;
        }

        public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
            View view = null;
            if (viewType == 0) {
                if (ChatActivity.this.chatMessageCellsCache.isEmpty()) {
                    view = new ChatMessageCell(this.mContext);
                } else {
                    view = (View) ChatActivity.this.chatMessageCellsCache.get(0);
                    ChatActivity.this.chatMessageCellsCache.remove(0);
                }
                ChatMessageCell chatMessageCell = (ChatMessageCell) view;
                chatMessageCell.setDelegate(new ChatMessageCellDelegate() {
                    public void didPressShare(ChatMessageCell cell) {
                        if (ChatActivity.this.getParentActivity() != null) {
                            if (ChatActivity.this.chatActivityEnterView != null) {
                                ChatActivity.this.chatActivityEnterView.closeKeyboard();
                            }
                            MessageObject messageObject = cell.getMessageObject();
                            if (!UserObject.isUserSelf(ChatActivity.this.currentUser) || messageObject.messageOwner.fwd_from.saved_from_peer == null) {
                                ArrayList<MessageObject> arrayList = null;
                                if (messageObject.getGroupId() != 0) {
                                    GroupedMessages groupedMessages = (GroupedMessages) ChatActivity.this.groupedMessagesMap.get(messageObject.getGroupId());
                                    if (groupedMessages != null) {
                                        arrayList = groupedMessages.messages;
                                    }
                                }
                                if (arrayList == null) {
                                    arrayList = new ArrayList();
                                    arrayList.add(messageObject);
                                }
                                ChatActivity chatActivity = ChatActivity.this;
                                Context access$21900 = ChatActivityAdapter.this.mContext;
                                boolean z = ChatObject.isChannel(ChatActivity.this.currentChat) && !ChatActivity.this.currentChat.megagroup && ChatActivity.this.currentChat.username != null && ChatActivity.this.currentChat.username.length() > 0;
                                chatActivity.showDialog(new ShareAlert(access$21900, arrayList, null, z, null, false));
                                return;
                            }
                            Bundle args = new Bundle();
                            if (messageObject.messageOwner.fwd_from.saved_from_peer.channel_id != 0) {
                                args.putInt("chat_id", messageObject.messageOwner.fwd_from.saved_from_peer.channel_id);
                            } else if (messageObject.messageOwner.fwd_from.saved_from_peer.chat_id != 0) {
                                args.putInt("chat_id", messageObject.messageOwner.fwd_from.saved_from_peer.chat_id);
                            } else if (messageObject.messageOwner.fwd_from.saved_from_peer.user_id != 0) {
                                args.putInt("user_id", messageObject.messageOwner.fwd_from.saved_from_peer.user_id);
                            }
                            args.putInt("message_id", messageObject.messageOwner.fwd_from.saved_from_msg_id);
                            if (MessagesController.getInstance(ChatActivity.this.currentAccount).checkCanOpenChat(args, ChatActivity.this)) {
                                ChatActivity.this.presentFragment(new ChatActivity(args));
                            }
                        }
                    }

                    public boolean needPlayMessage(MessageObject messageObject) {
                        if (!messageObject.isVoice() && !messageObject.isRoundVideo()) {
                            return messageObject.isMusic() ? MediaController.getInstance().setPlaylist(ChatActivity.this.messages, messageObject) : false;
                        } else {
                            boolean result = MediaController.getInstance().playMessage(messageObject);
                            MediaController.getInstance().setVoiceMessagesPlaylist(result ? ChatActivity.this.createVoiceMessagesPlaylist(messageObject, false) : null, false);
                            return result;
                        }
                    }

                    public void videoTimerReached() {
                        ChatActivity.this.showNoSoundHint();
                    }

                    public void didPressChannelAvatar(ChatMessageCell cell, Chat chat, int postId) {
                        if (ChatActivity.this.actionBar.isActionModeShowed()) {
                            ChatActivity.this.processRowSelect(cell, true);
                        } else if (chat != null && chat != ChatActivity.this.currentChat) {
                            Bundle args = new Bundle();
                            args.putInt("chat_id", chat.id);
                            if (postId != 0) {
                                args.putInt("message_id", postId);
                            }
                            if (MessagesController.getInstance(ChatActivity.this.currentAccount).checkCanOpenChat(args, ChatActivity.this, cell.getMessageObject())) {
                                ChatActivity.this.presentFragment(new ChatActivity(args));
                            }
                        }
                    }

                    public void didPressHiddenForward(ChatMessageCell cell) {
                        ChatActivity.this.showForwardHint(cell);
                    }

                    public void didPressOther(ChatMessageCell cell) {
                        if (cell.getMessageObject().type != 16) {
                            ChatActivity.this.createMenu(cell, true, false, false);
                        } else if (ChatActivity.this.currentUser != null) {
                            VoIPHelper.startCall(ChatActivity.this.currentUser, ChatActivity.this.getParentActivity(), MessagesController.getInstance(ChatActivity.this.currentAccount).getUserFull(ChatActivity.this.currentUser.id));
                        }
                    }

                    public void didPressUserAvatar(ChatMessageCell cell, User user) {
                        boolean z = true;
                        if (ChatActivity.this.actionBar.isActionModeShowed()) {
                            ChatActivity.this.processRowSelect(cell, true);
                        } else if (user != null && user.id != UserConfig.getInstance(ChatActivity.this.currentAccount).getClientUserId()) {
                            Bundle args = new Bundle();
                            args.putInt("user_id", user.id);
                            ProfileActivity fragment = new ProfileActivity(args);
                            if (ChatActivity.this.currentUser == null || ChatActivity.this.currentUser.id != user.id) {
                                z = false;
                            }
                            fragment.setPlayProfileAnimation(z);
                            ChatActivity.this.presentFragment(fragment);
                        }
                    }

                    public void didPressBotButton(ChatMessageCell cell, KeyboardButton button) {
                        if (ChatActivity.this.getParentActivity() == null) {
                            return;
                        }
                        if (ChatActivity.this.bottomOverlayChat.getVisibility() != 0 || (button instanceof TL_keyboardButtonSwitchInline) || (button instanceof TL_keyboardButtonCallback) || (button instanceof TL_keyboardButtonGame) || (button instanceof TL_keyboardButtonUrl) || (button instanceof TL_keyboardButtonBuy)) {
                            ChatActivity.this.chatActivityEnterView.didPressedBotButton(button, cell.getMessageObject(), cell.getMessageObject());
                        }
                    }

                    public void didPressVoteButton(ChatMessageCell cell, TL_pollAnswer button) {
                        SendMessagesHelper.getInstance(ChatActivity.this.currentAccount).sendVote(cell.getMessageObject(), button, null);
                    }

                    public void didPressCancelSendButton(ChatMessageCell cell) {
                        MessageObject message = cell.getMessageObject();
                        if (message.messageOwner.send_state != 0) {
                            SendMessagesHelper.getInstance(ChatActivity.this.currentAccount).cancelSendingMessage(message);
                        }
                    }

                    public void didLongPress(ChatMessageCell cell) {
                        ChatActivity.this.createMenu(cell, false, false);
                    }

                    public boolean canPerformActions() {
                        return (ChatActivity.this.actionBar == null || ChatActivity.this.actionBar.isActionModeShowed()) ? false : true;
                    }

                    public void didPressUrl(MessageObject messageObject, CharacterStyle url, boolean longPress) {
                        if (url != null) {
                            if (url instanceof URLSpanMono) {
                                ((URLSpanMono) url).copyToClipboard();
                                Toast.makeText(ChatActivity.this.getParentActivity(), LocaleController.getString("TextCopied", NUM), 0).show();
                            } else if (url instanceof URLSpanUserMention) {
                                User user = MessagesController.getInstance(ChatActivity.this.currentAccount).getUser(Utilities.parseInt(((URLSpanUserMention) url).getURL()));
                                if (user != null) {
                                    MessagesController.openChatOrProfileWith(user, null, ChatActivity.this, 0, false);
                                }
                            } else if (url instanceof URLSpanNoUnderline) {
                                String str = ((URLSpanNoUnderline) url).getURL();
                                if (str.startsWith("@")) {
                                    String username = str.substring(1).toLowerCase();
                                    if ((ChatActivity.this.currentChat == null || TextUtils.isEmpty(ChatActivity.this.currentChat.username) || !username.equals(ChatActivity.this.currentChat.username.toLowerCase())) && (ChatActivity.this.currentUser == null || TextUtils.isEmpty(ChatActivity.this.currentUser.username) || !username.equals(ChatActivity.this.currentUser.username.toLowerCase()))) {
                                        MessagesController.getInstance(ChatActivity.this.currentAccount).openByUserName(username, ChatActivity.this, 0);
                                        return;
                                    }
                                    Bundle args = new Bundle();
                                    if (ChatActivity.this.currentChat != null) {
                                        args.putInt("chat_id", ChatActivity.this.currentChat.id);
                                    } else if (ChatActivity.this.currentUser != null) {
                                        args.putInt("user_id", ChatActivity.this.currentUser.id);
                                        if (ChatActivity.this.currentEncryptedChat != null) {
                                            args.putLong("dialog_id", ChatActivity.this.dialog_id);
                                        }
                                    }
                                    ProfileActivity fragment = new ProfileActivity(args);
                                    fragment.setPlayProfileAnimation(true);
                                    fragment.setChatInfo(ChatActivity.this.chatInfo);
                                    fragment.setUserInfo(ChatActivity.this.userInfo);
                                    ChatActivity.this.presentFragment(fragment);
                                } else if (str.startsWith("#") || str.startsWith("$")) {
                                    if (ChatObject.isChannel(ChatActivity.this.currentChat)) {
                                        ChatActivity.this.openSearchWithText(str);
                                        return;
                                    }
                                    DialogsActivity fragment2 = new DialogsActivity(null);
                                    fragment2.setSearchString(str);
                                    ChatActivity.this.presentFragment(fragment2);
                                } else if (str.startsWith("/") && URLSpanBotCommand.enabled) {
                                    ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                                    boolean z = ChatActivity.this.currentChat != null && ChatActivity.this.currentChat.megagroup;
                                    chatActivityEnterView.setCommand(messageObject, str, longPress, z);
                                    if (!longPress && ChatActivity.this.chatActivityEnterView.getFieldText() == null) {
                                        ChatActivity.this.hideFieldPanel();
                                    }
                                }
                            } else {
                                String urlFinal = ((URLSpan) url).getURL();
                                if (longPress) {
                                    Builder builder = new Builder(ChatActivity.this.getParentActivity());
                                    builder.setTitle(urlFinal);
                                    builder.setItems(new CharSequence[]{LocaleController.getString("Open", NUM), LocaleController.getString("Copy", NUM)}, new ChatActivity$ChatActivityAdapter$1$$Lambda$0(this, urlFinal));
                                    ChatActivity.this.showDialog(builder.create());
                                } else if ((url instanceof URLSpanReplacement) && (urlFinal == null || !urlFinal.startsWith("mailto:"))) {
                                    ChatActivity.this.showOpenUrlAlert(urlFinal, true);
                                } else if (url instanceof URLSpan) {
                                    if (!(!(messageObject.messageOwner.media instanceof TL_messageMediaWebPage) || messageObject.messageOwner.media.webpage == null || messageObject.messageOwner.media.webpage.cached_page == null)) {
                                        String lowerUrl = urlFinal.toLowerCase();
                                        String lowerUrl2 = messageObject.messageOwner.media.webpage.url.toLowerCase();
                                        if ((lowerUrl.contains("telegra.ph") || lowerUrl.contains("t.me/iv")) && (lowerUrl.contains(lowerUrl2) || lowerUrl2.contains(lowerUrl))) {
                                            ArticleViewer.getInstance().setParentActivity(ChatActivity.this.getParentActivity(), ChatActivity.this);
                                            ArticleViewer.getInstance().open(messageObject);
                                            return;
                                        }
                                    }
                                    Browser.openUrl(ChatActivity.this.getParentActivity(), urlFinal, ChatActivity.this.inlineReturn == 0);
                                } else if (url instanceof ClickableSpan) {
                                    ((ClickableSpan) url).onClick(ChatActivity.this.fragmentView);
                                }
                            }
                        }
                    }

                    /* Access modifiers changed, original: final|synthetic */
                    public final /* synthetic */ void lambda$didPressUrl$0$ChatActivity$ChatActivityAdapter$1(String urlFinal, DialogInterface dialog, int which) {
                        boolean z = true;
                        if (which == 0) {
                            Context parentActivity = ChatActivity.this.getParentActivity();
                            if (ChatActivity.this.inlineReturn != 0) {
                                z = false;
                            }
                            Browser.openUrl(parentActivity, urlFinal, z, false);
                        } else if (which == 1) {
                            String url1 = urlFinal;
                            if (url1.startsWith("mailto:")) {
                                url1 = url1.substring(7);
                            } else if (url1.startsWith("tel:")) {
                                url1 = url1.substring(4);
                            }
                            AndroidUtilities.addToClipboard(url1);
                        }
                    }

                    public void needOpenWebView(String url, String title, String description, String originalUrl, int w, int h) {
                        try {
                            EmbedBottomSheet.show(ChatActivityAdapter.this.mContext, title, description, originalUrl, url, w, h);
                        } catch (Throwable e) {
                            FileLog.e(e);
                        }
                    }

                    public void didPressReplyMessage(ChatMessageCell cell, int id) {
                        int i;
                        MessageObject messageObject = cell.getMessageObject();
                        ChatActivity chatActivity = ChatActivity.this;
                        int id2 = messageObject.getId();
                        if (messageObject.getDialogId() == ChatActivity.this.mergeDialogId) {
                            i = 1;
                        } else {
                            i = 0;
                        }
                        chatActivity.scrollToMessageId(id, id2, true, i, false);
                    }

                    public void didPressViaBot(ChatMessageCell cell, String username) {
                        if (ChatActivity.this.bottomOverlayChat != null && ChatActivity.this.bottomOverlayChat.getVisibility() == 0) {
                            return;
                        }
                        if ((ChatActivity.this.bottomOverlay == null || ChatActivity.this.bottomOverlay.getVisibility() != 0) && ChatActivity.this.chatActivityEnterView != null && username != null && username.length() > 0) {
                            ChatActivity.this.chatActivityEnterView.setFieldText("@" + username + " ");
                            ChatActivity.this.chatActivityEnterView.openKeyboard();
                        }
                    }

                    public void didPressImage(ChatMessageCell cell) {
                        MessageObject message = cell.getMessageObject();
                        if (message.isSendError()) {
                            ChatActivity.this.createMenu(cell, false, false);
                        } else if (!message.isSending()) {
                            File f;
                            if (message.needDrawBluredPreview()) {
                                if (ChatActivity.this.sendSecretMessageRead(message)) {
                                    cell.invalidate();
                                }
                                SecretMediaViewer.getInstance().setParentActivity(ChatActivity.this.getParentActivity());
                                SecretMediaViewer.getInstance().openMedia(message, ChatActivity.this.photoViewerProvider);
                            } else if (message.type == 13) {
                                ChatActivity chatActivity = ChatActivity.this;
                                Activity parentActivity = ChatActivity.this.getParentActivity();
                                ChatActivity chatActivity2 = ChatActivity.this;
                                InputStickerSet inputStickerSet = message.getInputStickerSet();
                                StickersAlertDelegate stickersAlertDelegate = (ChatActivity.this.bottomOverlayChat.getVisibility() == 0 || !(ChatActivity.this.currentChat == null || ChatObject.canSendStickers(ChatActivity.this.currentChat))) ? null : ChatActivity.this.chatActivityEnterView;
                                chatActivity.showDialog(new StickersAlert(parentActivity, chatActivity2, inputStickerSet, null, stickersAlertDelegate));
                            } else if (message.isVideo() || message.type == 1 || ((message.type == 0 && !message.isWebpageDocument()) || message.isGif())) {
                                if (message.isVideo()) {
                                    ChatActivity.this.sendSecretMessageRead(message);
                                }
                                PhotoViewer.getInstance().setParentActivity(ChatActivity.this.getParentActivity());
                                MessageObject playingObject = MediaController.getInstance().getPlayingMessageObject();
                                if (playingObject != null && playingObject.isVideo()) {
                                    FileLoader.getInstance(ChatActivity.this.currentAccount).setLoadingVideoForPlayer(playingObject.getDocument(), false);
                                    if (playingObject.equals(message)) {
                                        AnimatedFileDrawable animation = cell.getPhotoImage().getAnimation();
                                        if (!(animation == null || ChatActivity.this.videoTextureView == null || ChatActivity.this.videoPlayerContainer.getTag() == null)) {
                                            Bitmap bitmap = animation.getAnimatedBitmap();
                                            if (bitmap != null) {
                                                try {
                                                    Bitmap src = ChatActivity.this.videoTextureView.getBitmap(bitmap.getWidth(), bitmap.getHeight());
                                                    new Canvas(bitmap).drawBitmap(src, 0.0f, 0.0f, null);
                                                    src.recycle();
                                                } catch (Throwable e) {
                                                    FileLog.e(e);
                                                }
                                            }
                                        }
                                    }
                                    MediaController.getInstance().cleanupPlayer(true, true, false, playingObject.equals(message));
                                }
                                if (PhotoViewer.getInstance().openPhoto(message, message.type != 0 ? ChatActivity.this.dialog_id : 0, message.type != 0 ? ChatActivity.this.mergeDialogId : 0, ChatActivity.this.photoViewerProvider)) {
                                    PhotoViewer.getInstance().setParentChatActivity(ChatActivity.this);
                                }
                                if (ChatActivity.this.noSoundHintView != null) {
                                    ChatActivity.this.noSoundHintView.hide();
                                }
                                if (ChatActivity.this.forwardHintView != null) {
                                    ChatActivity.this.forwardHintView.hide();
                                }
                                MediaController.getInstance().resetGoingToShowMessageObject();
                            } else if (message.type == 3) {
                                ChatActivity.this.sendSecretMessageRead(message);
                                f = null;
                                try {
                                    if (!(message.messageOwner.attachPath == null || message.messageOwner.attachPath.length() == 0)) {
                                        f = new File(message.messageOwner.attachPath);
                                    }
                                    if (f == null || !f.exists()) {
                                        f = FileLoader.getPathToMessage(message.messageOwner);
                                    }
                                    Intent intent = new Intent("android.intent.action.VIEW");
                                    if (VERSION.SDK_INT >= 24) {
                                        intent.setFlags(1);
                                        intent.setDataAndType(FileProvider.getUriForFile(ChatActivity.this.getParentActivity(), "org.telegram.messenger.beta.provider", f), "video/mp4");
                                    } else {
                                        intent.setDataAndType(Uri.fromFile(f), "video/mp4");
                                    }
                                    ChatActivity.this.getParentActivity().startActivityForResult(intent, 500);
                                } catch (Exception e2) {
                                    FileLog.e(e2);
                                    ChatActivity.this.alertUserOpenError(message);
                                }
                            } else if (message.type == 4) {
                                if (!AndroidUtilities.isGoogleMapsInstalled(ChatActivity.this)) {
                                    return;
                                }
                                LocationActivity fragment;
                                if (message.isLiveLocation()) {
                                    fragment = new LocationActivity(2);
                                    fragment.setMessageObject(message);
                                    fragment.setDelegate(ChatActivity.this);
                                    ChatActivity.this.presentFragment(fragment);
                                    return;
                                }
                                fragment = new LocationActivity(ChatActivity.this.currentEncryptedChat == null ? 3 : 0);
                                fragment.setMessageObject(message);
                                fragment.setDelegate(ChatActivity.this);
                                ChatActivity.this.presentFragment(fragment);
                            } else if (message.type == 9 || message.type == 0) {
                                if (message.getDocumentName().toLowerCase().endsWith("attheme")) {
                                    File locFile = null;
                                    if (!(message.messageOwner.attachPath == null || message.messageOwner.attachPath.length() == 0)) {
                                        f = new File(message.messageOwner.attachPath);
                                        if (f.exists()) {
                                            locFile = f;
                                        }
                                    }
                                    if (locFile == null) {
                                        f = FileLoader.getPathToMessage(message.messageOwner);
                                        if (f.exists()) {
                                            locFile = f;
                                        }
                                    }
                                    if (ChatActivity.this.chatLayoutManager != null) {
                                        int lastPosition = ChatActivity.this.chatLayoutManager.findFirstVisibleItemPosition();
                                        if (lastPosition != 0) {
                                            ChatActivity.this.scrollToPositionOnRecreate = lastPosition;
                                            Holder holder = (Holder) ChatActivity.this.chatListView.findViewHolderForAdapterPosition(ChatActivity.this.scrollToPositionOnRecreate);
                                            if (holder != null) {
                                                ChatActivity.this.scrollToOffsetOnRecreate = (ChatActivity.this.chatListView.getMeasuredHeight() - holder.itemView.getBottom()) - ChatActivity.this.chatListView.getPaddingBottom();
                                            } else {
                                                ChatActivity.this.scrollToPositionOnRecreate = -1;
                                            }
                                        } else {
                                            ChatActivity.this.scrollToPositionOnRecreate = -1;
                                        }
                                    }
                                    ThemeInfo themeInfo = Theme.applyThemeFile(locFile, message.getDocumentName(), true);
                                    if (themeInfo != null) {
                                        ChatActivity.this.presentFragment(new ThemePreviewActivity(locFile, themeInfo));
                                        return;
                                    }
                                    ChatActivity.this.scrollToPositionOnRecreate = -1;
                                }
                                boolean handled = false;
                                if (message.canPreviewDocument()) {
                                    PhotoViewer.getInstance().setParentActivity(ChatActivity.this.getParentActivity());
                                    PhotoViewer.getInstance().openPhoto(message, message.type != 0 ? ChatActivity.this.dialog_id : 0, message.type != 0 ? ChatActivity.this.mergeDialogId : 0, ChatActivity.this.photoViewerProvider);
                                    handled = true;
                                }
                                if (!handled) {
                                    try {
                                        AndroidUtilities.openForView(message, ChatActivity.this.getParentActivity());
                                    } catch (Exception e22) {
                                        FileLog.e(e22);
                                        ChatActivity.this.alertUserOpenError(message);
                                    }
                                }
                            }
                        }
                    }

                    public void didPressInstantButton(ChatMessageCell cell, int type) {
                        MessageObject messageObject = cell.getMessageObject();
                        if (type == 0) {
                            if (messageObject.messageOwner.media != null && messageObject.messageOwner.media.webpage != null && messageObject.messageOwner.media.webpage.cached_page != null) {
                                ArticleViewer.getInstance().setParentActivity(ChatActivity.this.getParentActivity(), ChatActivity.this);
                                ArticleViewer.getInstance().open(messageObject);
                            }
                        } else if (type == 5) {
                            ChatActivity.this.openVCard(messageObject.messageOwner.media.vcard, messageObject.messageOwner.media.first_name, messageObject.messageOwner.media.last_name);
                        } else if (messageObject.messageOwner.media != null && messageObject.messageOwner.media.webpage != null) {
                            Browser.openUrl(ChatActivity.this.getParentActivity(), messageObject.messageOwner.media.webpage.url);
                        }
                    }

                    public boolean isChatAdminCell(int uid) {
                        if (ChatObject.isChannel(ChatActivity.this.currentChat) && ChatActivity.this.currentChat.megagroup) {
                            return MessagesController.getInstance(ChatActivity.this.currentAccount).isChannelAdmin(ChatActivity.this.currentChat.id, uid);
                        }
                        return false;
                    }
                });
                if (ChatActivity.this.currentEncryptedChat == null) {
                    chatMessageCell.setAllowAssistant(true);
                }
            } else if (viewType == 1) {
                view = new ChatActionCell(this.mContext);
                ((ChatActionCell) view).setDelegate(new ChatActionCellDelegate() {
                    public void didClickedImage(ChatActionCell cell) {
                        MessageObject message = cell.getMessageObject();
                        PhotoViewer.getInstance().setParentActivity(ChatActivity.this.getParentActivity());
                        PhotoSize photoSize = FileLoader.getClosestPhotoSizeWithSize(message.photoThumbs, 640);
                        if (photoSize != null) {
                            PhotoViewer.getInstance().openPhoto(photoSize.location, ChatActivity.this.photoViewerProvider);
                            return;
                        }
                        PhotoViewer.getInstance().openPhoto(message, 0, 0, ChatActivity.this.photoViewerProvider);
                    }

                    public void didLongPressed(ChatActionCell cell) {
                        ChatActivity.this.createMenu(cell, false, false);
                    }

                    public void needOpenUserProfile(int uid) {
                        Bundle args;
                        if (uid < 0) {
                            args = new Bundle();
                            args.putInt("chat_id", -uid);
                            if (MessagesController.getInstance(ChatActivity.this.currentAccount).checkCanOpenChat(args, ChatActivity.this)) {
                                ChatActivity.this.presentFragment(new ChatActivity(args));
                            }
                        } else if (uid != UserConfig.getInstance(ChatActivity.this.currentAccount).getClientUserId()) {
                            args = new Bundle();
                            args.putInt("user_id", uid);
                            if (ChatActivity.this.currentEncryptedChat != null && uid == ChatActivity.this.currentUser.id) {
                                args.putLong("dialog_id", ChatActivity.this.dialog_id);
                            }
                            ProfileActivity fragment = new ProfileActivity(args);
                            boolean z = ChatActivity.this.currentUser != null && ChatActivity.this.currentUser.id == uid;
                            fragment.setPlayProfileAnimation(z);
                            ChatActivity.this.presentFragment(fragment);
                        }
                    }

                    public void didPressedReplyMessage(ChatActionCell cell, int id) {
                        int i;
                        MessageObject messageObject = cell.getMessageObject();
                        ChatActivity chatActivity = ChatActivity.this;
                        int id2 = messageObject.getId();
                        if (messageObject.getDialogId() == ChatActivity.this.mergeDialogId) {
                            i = 1;
                        } else {
                            i = 0;
                        }
                        chatActivity.scrollToMessageId(id, id2, true, i, false);
                    }

                    public void didPressedBotButton(MessageObject messageObject, KeyboardButton button) {
                        if (ChatActivity.this.getParentActivity() == null) {
                            return;
                        }
                        if (ChatActivity.this.bottomOverlayChat.getVisibility() != 0 || (button instanceof TL_keyboardButtonSwitchInline) || (button instanceof TL_keyboardButtonCallback) || (button instanceof TL_keyboardButtonGame) || (button instanceof TL_keyboardButtonUrl) || (button instanceof TL_keyboardButtonBuy)) {
                            ChatActivity.this.chatActivityEnterView.didPressedBotButton(button, messageObject, messageObject);
                        }
                    }
                });
            } else if (viewType == 2) {
                view = new ChatUnreadCell(this.mContext);
            } else if (viewType == 3) {
                view = new BotHelpCell(this.mContext);
                ((BotHelpCell) view).setDelegate(new ChatActivity$ChatActivityAdapter$$Lambda$0(this));
            } else if (viewType == 4) {
                view = new ChatLoadingCell(this.mContext);
            }
            view.setLayoutParams(new LayoutParams(-1, -2));
            return new Holder(view);
        }

        /* Access modifiers changed, original: final|synthetic */
        public final /* synthetic */ void lambda$onCreateViewHolder$0$ChatActivity$ChatActivityAdapter(String url) {
            if (url.startsWith("@")) {
                MessagesController.getInstance(ChatActivity.this.currentAccount).openByUserName(url.substring(1), ChatActivity.this, 0);
            } else if (url.startsWith("#") || url.startsWith("$")) {
                DialogsActivity fragment = new DialogsActivity(null);
                fragment.setSearchString(url);
                ChatActivity.this.presentFragment(fragment);
            } else if (url.startsWith("/")) {
                ChatActivity.this.chatActivityEnterView.setCommand(null, url, false, false);
                if (ChatActivity.this.chatActivityEnterView.getFieldText() == null) {
                    ChatActivity.this.hideFieldPanel();
                }
            }
        }

        /* JADX WARNING: Removed duplicated region for block: B:123:? A:{SYNTHETIC, RETURN} */
        /* JADX WARNING: Removed duplicated region for block: B:86:0x0348  */
        public void onBindViewHolder(org.telegram.messenger.support.widget.RecyclerView.ViewHolder r31, int r32) {
            /*
            r30 = this;
            r0 = r30;
            r0 = r0.botInfoRow;
            r22 = r0;
            r0 = r32;
            r1 = r22;
            if (r0 != r1) goto L_0x0053;
        L_0x000c:
            r0 = r31;
            r6 = r0.itemView;
            r6 = (org.telegram.ui.Cells.BotHelpCell) r6;
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.botInfo;
            r22 = r22.size();
            if (r22 == 0) goto L_0x0050;
        L_0x0022:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.botInfo;
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r23 = r0;
            r0 = r23;
            r0 = r0.currentUser;
            r23 = r0;
            r0 = r23;
            r0 = r0.id;
            r23 = r0;
            r22 = r22.get(r23);
            r22 = (org.telegram.tgnet.TLRPC.BotInfo) r22;
            r0 = r22;
            r0 = r0.description;
            r22 = r0;
        L_0x004a:
            r0 = r22;
            r6.setText(r0);
        L_0x004f:
            return;
        L_0x0050:
            r22 = 0;
            goto L_0x004a;
        L_0x0053:
            r0 = r30;
            r0 = r0.loadingDownRow;
            r22 = r0;
            r0 = r32;
            r1 = r22;
            if (r0 == r1) goto L_0x006b;
        L_0x005f:
            r0 = r30;
            r0 = r0.loadingUpRow;
            r22 = r0;
            r0 = r32;
            r1 = r22;
            if (r0 != r1) goto L_0x008e;
        L_0x006b:
            r0 = r31;
            r8 = r0.itemView;
            r8 = (org.telegram.ui.Cells.ChatLoadingCell) r8;
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.loadsCount;
            r23 = 1;
            r0 = r22;
            r1 = r23;
            if (r0 <= r1) goto L_0x008b;
        L_0x0083:
            r22 = 1;
        L_0x0085:
            r0 = r22;
            r8.setProgressVisible(r0);
            goto L_0x004f;
        L_0x008b:
            r22 = 0;
            goto L_0x0085;
        L_0x008e:
            r0 = r30;
            r0 = r0.messagesStartRow;
            r22 = r0;
            r0 = r32;
            r1 = r22;
            if (r0 < r1) goto L_0x004f;
        L_0x009a:
            r0 = r30;
            r0 = r0.messagesEndRow;
            r22 = r0;
            r0 = r32;
            r1 = r22;
            if (r0 >= r1) goto L_0x004f;
        L_0x00a6:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r0 = r22;
            r0 = r0.messages;
            r22 = r0;
            r0 = r30;
            r0 = r0.messagesStartRow;
            r23 = r0;
            r23 = r32 - r23;
            r9 = r22.get(r23);
            r9 = (org.telegram.messenger.MessageObject) r9;
            r0 = r31;
            r0 = r0.itemView;
            r21 = r0;
            r0 = r21;
            r0 = r0 instanceof org.telegram.ui.Cells.ChatMessageCell;
            r22 = r0;
            if (r22 == 0) goto L_0x03ea;
        L_0x00ce:
            r10 = r21;
            r10 = (org.telegram.ui.Cells.ChatMessageCell) r10;
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r0 = r22;
            r0 = r0.currentChat;
            r22 = r0;
            if (r22 != 0) goto L_0x00f2;
        L_0x00e0:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r0 = r22;
            r0 = r0.currentUser;
            r22 = r0;
            r22 = org.telegram.messenger.UserObject.isUserSelf(r22);
            if (r22 == 0) goto L_0x0369;
        L_0x00f2:
            r22 = 1;
        L_0x00f4:
            r0 = r22;
            r10.isChat = r0;
            r14 = 0;
            r15 = 0;
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r0 = r22;
            r5 = r0.getValidGroupedMessage(r9);
            if (r5 == 0) goto L_0x037d;
        L_0x0108:
            r0 = r5.positions;
            r22 = r0;
            r0 = r22;
            r16 = r0.get(r9);
            r16 = (org.telegram.messenger.MessageObject.GroupedMessagePosition) r16;
            if (r16 == 0) goto L_0x0377;
        L_0x0116:
            r0 = r16;
            r0 = r0.flags;
            r22 = r0;
            r22 = r22 & 4;
            if (r22 == 0) goto L_0x036d;
        L_0x0120:
            r0 = r5.posArray;
            r22 = r0;
            r0 = r22;
            r1 = r16;
            r22 = r0.indexOf(r1);
            r22 = r22 + r32;
            r18 = r22 + 1;
        L_0x0130:
            r0 = r16;
            r0 = r0.flags;
            r22 = r0;
            r22 = r22 & 8;
            if (r22 == 0) goto L_0x0372;
        L_0x013a:
            r0 = r5.posArray;
            r22 = r0;
            r22 = r22.size();
            r22 = r32 - r22;
            r0 = r5.posArray;
            r23 = r0;
            r0 = r23;
            r1 = r16;
            r23 = r0.indexOf(r1);
            r12 = r22 + r23;
        L_0x0152:
            r0 = r30;
            r13 = r0.getItemViewType(r12);
            r0 = r30;
            r1 = r18;
            r19 = r0.getItemViewType(r1);
            r0 = r9.messageOwner;
            r22 = r0;
            r0 = r22;
            r0 = r0.reply_markup;
            r22 = r0;
            r0 = r22;
            r0 = r0 instanceof org.telegram.tgnet.TLRPC.TL_replyInlineMarkup;
            r22 = r0;
            if (r22 != 0) goto L_0x01f0;
        L_0x0172:
            r22 = r31.getItemViewType();
            r0 = r22;
            if (r13 != r0) goto L_0x01f0;
        L_0x017a:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r0 = r22;
            r0 = r0.messages;
            r22 = r0;
            r0 = r30;
            r0 = r0.messagesStartRow;
            r23 = r0;
            r23 = r12 - r23;
            r11 = r22.get(r23);
            r11 = (org.telegram.messenger.MessageObject) r11;
            r22 = r11.isOutOwner();
            r23 = r9.isOutOwner();
            r0 = r22;
            r1 = r23;
            if (r0 != r1) goto L_0x0383;
        L_0x01a2:
            r0 = r11.messageOwner;
            r22 = r0;
            r0 = r22;
            r0 = r0.date;
            r22 = r0;
            r0 = r9.messageOwner;
            r23 = r0;
            r0 = r23;
            r0 = r0.date;
            r23 = r0;
            r22 = r22 - r23;
            r22 = java.lang.Math.abs(r22);
            r23 = 300; // 0x12c float:4.2E-43 double:1.48E-321;
            r0 = r22;
            r1 = r23;
            if (r0 > r1) goto L_0x0383;
        L_0x01c4:
            r14 = 1;
        L_0x01c5:
            if (r14 == 0) goto L_0x01f0;
        L_0x01c7:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r0 = r22;
            r0 = r0.currentChat;
            r22 = r0;
            if (r22 == 0) goto L_0x0389;
        L_0x01d5:
            r0 = r11.messageOwner;
            r22 = r0;
            r0 = r22;
            r0 = r0.from_id;
            r22 = r0;
            r0 = r9.messageOwner;
            r23 = r0;
            r0 = r23;
            r0 = r0.from_id;
            r23 = r0;
            r0 = r22;
            r1 = r23;
            if (r0 != r1) goto L_0x0386;
        L_0x01ef:
            r14 = 1;
        L_0x01f0:
            r22 = r31.getItemViewType();
            r0 = r19;
            r1 = r22;
            if (r0 != r1) goto L_0x0288;
        L_0x01fa:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r0 = r22;
            r0 = r0.messages;
            r22 = r0;
            r0 = r30;
            r0 = r0.messagesStartRow;
            r23 = r0;
            r23 = r18 - r23;
            r17 = r22.get(r23);
            r17 = (org.telegram.messenger.MessageObject) r17;
            r0 = r17;
            r0 = r0.messageOwner;
            r22 = r0;
            r0 = r22;
            r0 = r0.reply_markup;
            r22 = r0;
            r0 = r22;
            r0 = r0 instanceof org.telegram.tgnet.TLRPC.TL_replyInlineMarkup;
            r22 = r0;
            if (r22 != 0) goto L_0x03ae;
        L_0x0228:
            r22 = r17.isOutOwner();
            r23 = r9.isOutOwner();
            r0 = r22;
            r1 = r23;
            if (r0 != r1) goto L_0x03ae;
        L_0x0236:
            r0 = r17;
            r0 = r0.messageOwner;
            r22 = r0;
            r0 = r22;
            r0 = r0.date;
            r22 = r0;
            r0 = r9.messageOwner;
            r23 = r0;
            r0 = r23;
            r0 = r0.date;
            r23 = r0;
            r22 = r22 - r23;
            r22 = java.lang.Math.abs(r22);
            r23 = 300; // 0x12c float:4.2E-43 double:1.48E-321;
            r0 = r22;
            r1 = r23;
            if (r0 > r1) goto L_0x03ae;
        L_0x025a:
            r15 = 1;
        L_0x025b:
            if (r15 == 0) goto L_0x0288;
        L_0x025d:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r0 = r22;
            r0 = r0.currentChat;
            r22 = r0;
            if (r22 == 0) goto L_0x03b4;
        L_0x026b:
            r0 = r17;
            r0 = r0.messageOwner;
            r22 = r0;
            r0 = r22;
            r0 = r0.from_id;
            r22 = r0;
            r0 = r9.messageOwner;
            r23 = r0;
            r0 = r23;
            r0 = r0.from_id;
            r23 = r0;
            r0 = r22;
            r1 = r23;
            if (r0 != r1) goto L_0x03b1;
        L_0x0287:
            r15 = 1;
        L_0x0288:
            r10.setMessageObject(r9, r5, r14, r15);
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.highlightMessageId;
            r23 = NUM; // 0x7fffffff float:NaN double:1.060997895E-314;
            r0 = r22;
            r1 = r23;
            if (r0 == r1) goto L_0x03d9;
        L_0x029e:
            r22 = r9.getId();
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r23 = r0;
            r23 = r23.highlightMessageId;
            r0 = r22;
            r1 = r23;
            if (r0 != r1) goto L_0x03d9;
        L_0x02b2:
            r22 = 1;
        L_0x02b4:
            r0 = r22;
            r10.setHighlighted(r0);
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.searchContainer;
            if (r22 == 0) goto L_0x03e1;
        L_0x02c5:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.searchContainer;
            r22 = r22.getVisibility();
            if (r22 != 0) goto L_0x03e1;
        L_0x02d5:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.currentAccount;
            r23 = org.telegram.messenger.DataQuery.getInstance(r22);
            r24 = r9.getId();
            r26 = r9.getDialogId();
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r28 = r22.mergeDialogId;
            r22 = (r26 > r28 ? 1 : (r26 == r28 ? 0 : -1));
            if (r22 != 0) goto L_0x03dd;
        L_0x02f9:
            r22 = 1;
        L_0x02fb:
            r0 = r23;
            r1 = r24;
            r2 = r22;
            r22 = r0.isMessageFound(r1, r2);
            if (r22 == 0) goto L_0x03e1;
        L_0x0307:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.currentAccount;
            r22 = org.telegram.messenger.DataQuery.getInstance(r22);
            r22 = r22.getLastSearchQuery();
            if (r22 == 0) goto L_0x03e1;
        L_0x031b:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.currentAccount;
            r22 = org.telegram.messenger.DataQuery.getInstance(r22);
            r22 = r22.getLastSearchQuery();
            r0 = r22;
            r10.setHighlightedText(r0);
        L_0x0332:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.animatingMessageObjects;
            r0 = r22;
            r7 = r0.indexOf(r9);
            r22 = -1;
            r0 = r22;
            if (r7 == r0) goto L_0x004f;
        L_0x0348:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.animatingMessageObjects;
            r0 = r22;
            r0.remove(r7);
            r22 = r10.getViewTreeObserver();
            r23 = new org.telegram.ui.ChatActivity$ChatActivityAdapter$3;
            r0 = r23;
            r1 = r30;
            r0.<init>(r10);
            r22.addOnPreDrawListener(r23);
            goto L_0x004f;
        L_0x0369:
            r22 = 0;
            goto L_0x00f4;
        L_0x036d:
            r15 = 1;
            r18 = -100;
            goto L_0x0130;
        L_0x0372:
            r14 = 1;
            r12 = -100;
            goto L_0x0152;
        L_0x0377:
            r18 = -100;
            r12 = -100;
            goto L_0x0152;
        L_0x037d:
            r12 = r32 + -1;
            r18 = r32 + 1;
            goto L_0x0152;
        L_0x0383:
            r14 = 0;
            goto L_0x01c5;
        L_0x0386:
            r14 = 0;
            goto L_0x01f0;
        L_0x0389:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r0 = r22;
            r0 = r0.currentUser;
            r22 = r0;
            r22 = org.telegram.messenger.UserObject.isUserSelf(r22);
            if (r22 == 0) goto L_0x01f0;
        L_0x039b:
            r22 = r11.getFromId();
            r23 = r9.getFromId();
            r0 = r22;
            r1 = r23;
            if (r0 != r1) goto L_0x03ac;
        L_0x03a9:
            r14 = 1;
        L_0x03aa:
            goto L_0x01f0;
        L_0x03ac:
            r14 = 0;
            goto L_0x03aa;
        L_0x03ae:
            r15 = 0;
            goto L_0x025b;
        L_0x03b1:
            r15 = 0;
            goto L_0x0288;
        L_0x03b4:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r0 = r22;
            r0 = r0.currentUser;
            r22 = r0;
            r22 = org.telegram.messenger.UserObject.isUserSelf(r22);
            if (r22 == 0) goto L_0x0288;
        L_0x03c6:
            r22 = r17.getFromId();
            r23 = r9.getFromId();
            r0 = r22;
            r1 = r23;
            if (r0 != r1) goto L_0x03d7;
        L_0x03d4:
            r15 = 1;
        L_0x03d5:
            goto L_0x0288;
        L_0x03d7:
            r15 = 0;
            goto L_0x03d5;
        L_0x03d9:
            r22 = 0;
            goto L_0x02b4;
        L_0x03dd:
            r22 = 0;
            goto L_0x02fb;
        L_0x03e1:
            r22 = 0;
            r0 = r22;
            r10.setHighlightedText(r0);
            goto L_0x0332;
        L_0x03ea:
            r0 = r21;
            r0 = r0 instanceof org.telegram.ui.Cells.ChatActionCell;
            r22 = r0;
            if (r22 == 0) goto L_0x0402;
        L_0x03f2:
            r4 = r21;
            r4 = (org.telegram.ui.Cells.ChatActionCell) r4;
            r4.setMessageObject(r9);
            r22 = NUM; // 0x3var_ float:1.0 double:5.263544247E-315;
            r0 = r22;
            r4.setAlpha(r0);
            goto L_0x004f;
        L_0x0402:
            r0 = r21;
            r0 = r0 instanceof org.telegram.ui.Cells.ChatUnreadCell;
            r22 = r0;
            if (r22 == 0) goto L_0x004f;
        L_0x040a:
            r20 = r21;
            r20 = (org.telegram.ui.Cells.ChatUnreadCell) r20;
            r22 = "UnreadMessages";
            r23 = NUM; // 0x7f0CLASSNAMEd float:1.8614054E38 double:1.0530985827E-314;
            r22 = org.telegram.messenger.LocaleController.getString(r22, r23);
            r0 = r20;
            r1 = r22;
            r0.setText(r1);
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r22 = r22.createUnreadMessageAfterId;
            if (r22 == 0) goto L_0x004f;
        L_0x042b:
            r0 = r30;
            r0 = org.telegram.ui.ChatActivity.this;
            r22 = r0;
            r23 = 0;
            r22.createUnreadMessageAfterId = r23;
            goto L_0x004f;
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity$ChatActivityAdapter.onBindViewHolder(org.telegram.messenger.support.widget.RecyclerView$ViewHolder, int):void");
        }

        public int getItemViewType(int position) {
            if (position >= this.messagesStartRow && position < this.messagesEndRow) {
                return ((MessageObject) ChatActivity.this.messages.get(position - this.messagesStartRow)).contentType;
            }
            if (position == this.botInfoRow) {
                return 3;
            }
            return 4;
        }

        public void onViewAttachedToWindow(ViewHolder holder) {
            MessageObject message;
            if (holder.itemView instanceof ChatMessageCell) {
                boolean z;
                boolean z2;
                final ChatMessageCell messageCell = holder.itemView;
                message = messageCell.getMessageObject();
                boolean selected = false;
                boolean disableSelection = false;
                if (ChatActivity.this.actionBar.isActionModeShowed()) {
                    MessageObject messageObject = ChatActivity.this.chatActivityEnterView != null ? ChatActivity.this.chatActivityEnterView.getEditingMessageObject() : null;
                    int idx = message.getDialogId() == ChatActivity.this.dialog_id ? 0 : 1;
                    if (messageObject == message || ChatActivity.this.selectedMessagesIds[idx].indexOfKey(message.getId()) >= 0) {
                        ChatActivity.this.setCellSelectionBackground(message, messageCell, idx);
                        selected = true;
                    } else {
                        messageCell.setBackgroundDrawable(null);
                    }
                    disableSelection = true;
                } else {
                    messageCell.setBackgroundDrawable(null);
                }
                if (disableSelection) {
                    z = false;
                } else {
                    z = true;
                }
                if (disableSelection && selected) {
                    z2 = true;
                } else {
                    z2 = false;
                }
                messageCell.setCheckPressed(z, z2);
                messageCell.getViewTreeObserver().addOnPreDrawListener(new OnPreDrawListener() {
                    public boolean onPreDraw() {
                        messageCell.getViewTreeObserver().removeOnPreDrawListener(this);
                        int height = ChatActivity.this.chatListView.getMeasuredHeight();
                        int top = messageCell.getTop();
                        int bottom = messageCell.getBottom();
                        int viewTop = top >= 0 ? 0 : -top;
                        int viewBottom = messageCell.getMeasuredHeight();
                        if (viewBottom > height) {
                            viewBottom = viewTop + height;
                        }
                        messageCell.setVisiblePart(viewTop, viewBottom - viewTop);
                        return true;
                    }
                });
                if (!(ChatActivity.this.inPreviewMode && messageCell.isHighlighted())) {
                    z2 = ChatActivity.this.highlightMessageId != Integer.MAX_VALUE && messageCell.getMessageObject().getId() == ChatActivity.this.highlightMessageId;
                    messageCell.setHighlighted(z2);
                }
            }
            int position = holder.getAdapterPosition();
            if (position >= this.messagesStartRow && position < this.messagesEndRow) {
                message = (MessageObject) ChatActivity.this.messages.get(position - this.messagesStartRow);
                View view = holder.itemView;
                if (message != null && message.messageOwner != null && message.messageOwner.media_unread && message.messageOwner.mentioned) {
                    if (!(ChatActivity.this.inPreviewMode || message.isVoice() || message.isRoundVideo())) {
                        ChatActivity.this.newMentionsCount = ChatActivity.this.newMentionsCount - 1;
                        if (ChatActivity.this.newMentionsCount <= 0) {
                            ChatActivity.this.newMentionsCount = 0;
                            ChatActivity.this.hasAllMentionsLocal = true;
                            ChatActivity.this.showMentionDownButton(false, true);
                        } else {
                            ChatActivity.this.mentiondownButtonCounter.setText(String.format("%d", new Object[]{Integer.valueOf(ChatActivity.this.newMentionsCount)}));
                        }
                        MessagesController.getInstance(ChatActivity.this.currentAccount).markMentionMessageAsRead(message.getId(), ChatObject.isChannel(ChatActivity.this.currentChat) ? ChatActivity.this.currentChat.id : 0, ChatActivity.this.dialog_id);
                        message.setContentIsRead();
                    }
                    if (!(view instanceof ChatMessageCell)) {
                        return;
                    }
                    if (ChatActivity.this.inPreviewMode) {
                        ((ChatMessageCell) view).setHighlighted(true);
                    } else {
                        ((ChatMessageCell) view).setHighlightedAnimated();
                    }
                }
            }
        }

        public void updateRowAtPosition(int index) {
            if (ChatActivity.this.chatLayoutManager != null) {
                int lastVisibleItem = -1;
                if (!(ChatActivity.this.wasManualScroll || ChatActivity.this.unreadMessageObject == null)) {
                    int pos = ChatActivity.this.messages.indexOf(ChatActivity.this.unreadMessageObject);
                    if (pos >= 0) {
                        lastVisibleItem = this.messagesStartRow + pos;
                    }
                }
                notifyItemChanged(index);
                if (lastVisibleItem != -1) {
                    ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(lastVisibleItem, ((ChatActivity.this.chatListView.getMeasuredHeight() - ChatActivity.this.chatListView.getPaddingBottom()) - ChatActivity.this.chatListView.getPaddingTop()) - AndroidUtilities.dp(29.0f));
                }
            }
        }

        public void updateRowWithMessageObject(MessageObject messageObject, boolean allowInPlace) {
            if (allowInPlace) {
                int count = ChatActivity.this.chatListView.getChildCount();
                for (int a = 0; a < count; a++) {
                    View child = ChatActivity.this.chatListView.getChildAt(a);
                    if (child instanceof ChatMessageCell) {
                        ChatMessageCell cell = (ChatMessageCell) child;
                        if (cell.getMessageObject() == messageObject) {
                            cell.setMessageObject(messageObject, cell.getCurrentMessagesGroup(), cell.isPinnedBottom(), cell.isPinnedTop());
                            return;
                        }
                    }
                }
            }
            int index = ChatActivity.this.messages.indexOf(messageObject);
            if (index != -1) {
                updateRowAtPosition(this.messagesStartRow + index);
            }
        }

        public void notifyDataSetChanged() {
            updateRows();
            try {
                super.notifyDataSetChanged();
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        public void notifyItemChanged(int position) {
            updateRows();
            try {
                super.notifyItemChanged(position);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        public void notifyItemRangeChanged(int positionStart, int itemCount) {
            updateRows();
            try {
                super.notifyItemRangeChanged(positionStart, itemCount);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        public void notifyItemInserted(int position) {
            updateRows();
            try {
                super.notifyItemInserted(position);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        public void notifyItemMoved(int fromPosition, int toPosition) {
            updateRows();
            try {
                super.notifyItemMoved(fromPosition, toPosition);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        public void notifyItemRangeInserted(int positionStart, int itemCount) {
            updateRows();
            try {
                super.notifyItemRangeInserted(positionStart, itemCount);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        public void notifyItemRemoved(int position) {
            updateRows();
            try {
                super.notifyItemRemoved(position);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        public void notifyItemRangeRemoved(int positionStart, int itemCount) {
            updateRows();
            try {
                super.notifyItemRangeRemoved(positionStart, itemCount);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }
    }

    /* Access modifiers changed, original: final|bridge|synthetic */
    public final /* bridge */ /* synthetic */ void bridge$lambda$0$ChatActivity() {
        hideVoiceHint();
    }

    /* Access modifiers changed, original: final|bridge|synthetic */
    public final /* bridge */ /* synthetic */ void bridge$lambda$1$ChatActivity() {
        inlineUpdate1();
    }

    /* Access modifiers changed, original: final|bridge|synthetic */
    public final /* bridge */ /* synthetic */ void bridge$lambda$2$ChatActivity() {
        inlineUpdate2();
    }

    /* Access modifiers changed, original: final|bridge|synthetic */
    public final /* bridge */ /* synthetic */ void bridge$lambda$3$ChatActivity() {
        checkListViewPaddingsInternal();
    }

    /* Access modifiers changed, original: final|bridge|synthetic */
    public final /* bridge */ /* synthetic */ void bridge$lambda$4$ChatActivity() {
        checkEditTimer();
    }

    public ChatActivity(Bundle args) {
        super(args);
    }

    public boolean onFragmentCreate() {
        CountDownLatch countDownLatch;
        int chatId = this.arguments.getInt("chat_id", 0);
        int userId = this.arguments.getInt("user_id", 0);
        int encId = this.arguments.getInt("enc_id", 0);
        this.inlineReturn = this.arguments.getLong("inline_return", 0);
        String inlineQuery = this.arguments.getString("inline_query");
        this.startLoadFromMessageId = this.arguments.getInt("message_id", 0);
        int migrated_to = this.arguments.getInt("migrated_to", 0);
        this.scrollToTopOnResume = this.arguments.getBoolean("scrollToTopOnResume", false);
        MessagesStorage messagesStorage;
        if (chatId != 0) {
            this.currentChat = MessagesController.getInstance(this.currentAccount).getChat(Integer.valueOf(chatId));
            if (this.currentChat == null) {
                countDownLatch = new CountDownLatch(1);
                messagesStorage = MessagesStorage.getInstance(this.currentAccount);
                messagesStorage.getStorageQueue().postRunnable(new ChatActivity$$Lambda$0(this, messagesStorage, chatId, countDownLatch));
                try {
                    countDownLatch.await();
                } catch (Exception e) {
                    FileLog.e(e);
                }
                if (this.currentChat == null) {
                    return false;
                }
                MessagesController.getInstance(this.currentAccount).putChat(this.currentChat, true);
            }
            if (chatId > 0) {
                this.dialog_id = (long) (-chatId);
            } else {
                this.isBroadcast = true;
                this.dialog_id = AndroidUtilities.makeBroadcastId(chatId);
            }
            if (ChatObject.isChannel(this.currentChat)) {
                MessagesController.getInstance(this.currentAccount).startShortPoll(this.currentChat, false);
            }
        } else if (userId != 0) {
            this.currentUser = MessagesController.getInstance(this.currentAccount).getUser(Integer.valueOf(userId));
            if (this.currentUser == null) {
                messagesStorage = MessagesStorage.getInstance(this.currentAccount);
                countDownLatch = new CountDownLatch(1);
                messagesStorage.getStorageQueue().postRunnable(new ChatActivity$$Lambda$1(this, messagesStorage, userId, countDownLatch));
                try {
                    countDownLatch.await();
                } catch (Exception e2) {
                    FileLog.e(e2);
                }
                if (this.currentUser == null) {
                    return false;
                }
                MessagesController.getInstance(this.currentAccount).putUser(this.currentUser, true);
            }
            this.dialog_id = (long) userId;
            this.botUser = this.arguments.getString("botUser");
            if (inlineQuery != null) {
                MessagesController.getInstance(this.currentAccount).sendBotStart(this.currentUser, inlineQuery);
            }
        } else if (encId == 0) {
            return false;
        } else {
            this.currentEncryptedChat = MessagesController.getInstance(this.currentAccount).getEncryptedChat(Integer.valueOf(encId));
            messagesStorage = MessagesStorage.getInstance(this.currentAccount);
            if (this.currentEncryptedChat == null) {
                countDownLatch = new CountDownLatch(1);
                messagesStorage.getStorageQueue().postRunnable(new ChatActivity$$Lambda$2(this, messagesStorage, encId, countDownLatch));
                try {
                    countDownLatch.await();
                } catch (Exception e22) {
                    FileLog.e(e22);
                }
                if (this.currentEncryptedChat == null) {
                    return false;
                }
                MessagesController.getInstance(this.currentAccount).putEncryptedChat(this.currentEncryptedChat, true);
            }
            this.currentUser = MessagesController.getInstance(this.currentAccount).getUser(Integer.valueOf(this.currentEncryptedChat.user_id));
            if (this.currentUser == null) {
                countDownLatch = new CountDownLatch(1);
                messagesStorage.getStorageQueue().postRunnable(new ChatActivity$$Lambda$3(this, messagesStorage, countDownLatch));
                try {
                    countDownLatch.await();
                } catch (Exception e222) {
                    FileLog.e(e222);
                }
                if (this.currentUser == null) {
                    return false;
                }
                MessagesController.getInstance(this.currentAccount).putUser(this.currentUser, true);
            }
            this.dialog_id = ((long) encId) << 32;
            int[] iArr = this.maxMessageId;
            this.maxMessageId[1] = Integer.MIN_VALUE;
            iArr[0] = Integer.MIN_VALUE;
            iArr = this.minMessageId;
            this.minMessageId[1] = Integer.MAX_VALUE;
            iArr[0] = Integer.MAX_VALUE;
        }
        if (this.currentUser != null) {
            MediaController.getInstance().startMediaObserver();
        }
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messagesDidLoad);
        NotificationCenter.getGlobalInstance().addObserver(this, NotificationCenter.emojiDidLoad);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.didUpdateConnectionState);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.updateInterfaces);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.didReceiveNewMessages);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.closeChats);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messagesRead);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messagesDeleted);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.historyCleared);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messageReceivedByServer);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messageReceivedByAck);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messageSendError);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.chatInfoDidLoad);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.contactsDidLoad);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.encryptedChatUpdated);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messagesReadEncrypted);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.removeAllMessagesFromDialog);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messagePlayingProgressDidChanged);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messagePlayingDidReset);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messagePlayingGoingToStop);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messagePlayingPlayStateChanged);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.screenshotTook);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.blockedUsersDidLoad);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.fileNewChunkAvailable);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.didCreatedNewDeleteTask);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messagePlayingDidStart);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.updateMessageMedia);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.replaceMessagesObjects);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.notificationsSettingsUpdated);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.replyMessagesDidLoad);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.didReceivedWebpages);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.didReceivedWebpagesInUpdates);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.messagesReadContent);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.botInfoDidLoad);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.botKeyboardDidLoad);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.chatSearchResultsAvailable);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.chatSearchResultsLoading);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.didUpdatedMessagesViews);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.chatInfoCantLoad);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.pinnedMessageDidLoad);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.peerSettingsDidLoad);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.newDraftReceived);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.userInfoDidLoad);
        NotificationCenter.getGlobalInstance().addObserver(this, NotificationCenter.didSetNewWallpapper);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.channelRightsUpdated);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.updateMentionsCount);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.audioRecordTooShort);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.didUpdatePollResults);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.chatOnlineCountDidLoad);
        NotificationCenter.getInstance(this.currentAccount).addObserver(this, NotificationCenter.videoLoadingStateChanged);
        super.onFragmentCreate();
        if (this.currentEncryptedChat == null && !this.isBroadcast) {
            DataQuery.getInstance(this.currentAccount).loadBotKeyboard(this.dialog_id);
        }
        this.loading = true;
        MessagesController.getInstance(this.currentAccount).loadPeerSettings(this.currentUser, this.currentChat);
        MessagesController.getInstance(this.currentAccount).setLastCreatedDialogId(this.dialog_id, true);
        if (this.startLoadFromMessageId == 0) {
            SharedPreferences sharedPreferences = MessagesController.getNotificationsSettings(this.currentAccount);
            int messageId = sharedPreferences.getInt("diditem" + this.dialog_id, 0);
            if (messageId != 0) {
                this.wasManualScroll = true;
                this.loadingFromOldPosition = true;
                this.startLoadFromMessageOffset = sharedPreferences.getInt("diditemo" + this.dialog_id, 0);
                this.startLoadFromMessageId = messageId;
            }
        } else {
            this.needSelectFromMessageId = true;
        }
        MessagesController instance;
        long j;
        int i;
        int i2;
        boolean isChannel;
        int i3;
        if (this.startLoadFromMessageId != 0) {
            this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
            int i4;
            if (migrated_to != 0) {
                this.mergeDialogId = (long) migrated_to;
                instance = MessagesController.getInstance(this.currentAccount);
                j = this.mergeDialogId;
                i = this.loadingFromOldPosition ? 50 : AndroidUtilities.isTablet() ? 30 : 20;
                i4 = this.startLoadFromMessageId;
                i2 = this.classGuid;
                isChannel = ChatObject.isChannel(this.currentChat);
                i3 = this.lastLoadIndex;
                this.lastLoadIndex = i3 + 1;
                instance.loadMessages(j, i, i4, 0, true, 0, i2, 3, 0, isChannel, i3);
            } else {
                instance = MessagesController.getInstance(this.currentAccount);
                j = this.dialog_id;
                i = this.loadingFromOldPosition ? 50 : AndroidUtilities.isTablet() ? 30 : 20;
                i4 = this.startLoadFromMessageId;
                i2 = this.classGuid;
                isChannel = ChatObject.isChannel(this.currentChat);
                i3 = this.lastLoadIndex;
                this.lastLoadIndex = i3 + 1;
                instance.loadMessages(j, i, i4, 0, true, 0, i2, 3, 0, isChannel, i3);
            }
        } else {
            this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
            instance = MessagesController.getInstance(this.currentAccount);
            j = this.dialog_id;
            i = AndroidUtilities.isTablet() ? 30 : 20;
            i2 = this.classGuid;
            isChannel = ChatObject.isChannel(this.currentChat);
            i3 = this.lastLoadIndex;
            this.lastLoadIndex = i3 + 1;
            instance.loadMessages(j, i, 0, 0, true, 0, i2, 2, 0, isChannel, i3);
        }
        if (this.currentChat != null) {
            CountDownLatch countDownLatch2 = null;
            if (this.isBroadcast) {
                countDownLatch = new CountDownLatch(1);
            }
            MessagesController.getInstance(this.currentAccount).loadChatInfo(this.currentChat.id, countDownLatch2, true);
            if (this.isBroadcast && countDownLatch2 != null) {
                try {
                    countDownLatch2.await();
                } catch (Exception e2222) {
                    FileLog.e(e2222);
                }
            }
        } else if (this.currentUser != null) {
            MessagesController.getInstance(this.currentAccount).loadUserInfo(this.currentUser, true, this.classGuid);
        }
        if (userId != 0 && this.currentUser.bot) {
            DataQuery.getInstance(this.currentAccount).loadBotInfo(userId, true, this.classGuid);
        } else if (this.chatInfo instanceof TL_chatFull) {
            for (int a = 0; a < this.chatInfo.participants.participants.size(); a++) {
                User user = MessagesController.getInstance(this.currentAccount).getUser(Integer.valueOf(((ChatParticipant) this.chatInfo.participants.participants.get(a)).user_id));
                if (user != null && user.bot) {
                    DataQuery.getInstance(this.currentAccount).loadBotInfo(user.id, true, this.classGuid);
                }
            }
        }
        if (this.currentUser != null) {
            this.userBlocked = MessagesController.getInstance(this.currentAccount).blockedUsers.indexOfKey(this.currentUser.id) >= 0;
        }
        if (AndroidUtilities.isTablet()) {
            NotificationCenter.getInstance(this.currentAccount).postNotificationName(NotificationCenter.openedChatChanged, Long.valueOf(this.dialog_id), Boolean.valueOf(false));
        }
        if (!(this.currentEncryptedChat == null || AndroidUtilities.getMyLayerVersion(this.currentEncryptedChat.layer) == 73)) {
            SecretChatHelper.getInstance(this.currentAccount).sendNotifyLayerMessage(this.currentEncryptedChat, null);
        }
        return true;
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$onFragmentCreate$0$ChatActivity(MessagesStorage messagesStorage, int chatId, CountDownLatch countDownLatch) {
        this.currentChat = messagesStorage.getChat(chatId);
        countDownLatch.countDown();
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$onFragmentCreate$1$ChatActivity(MessagesStorage messagesStorage, int userId, CountDownLatch countDownLatch) {
        this.currentUser = messagesStorage.getUser(userId);
        countDownLatch.countDown();
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$onFragmentCreate$2$ChatActivity(MessagesStorage messagesStorage, int encId, CountDownLatch countDownLatch) {
        this.currentEncryptedChat = messagesStorage.getEncryptedChat(encId);
        countDownLatch.countDown();
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$onFragmentCreate$3$ChatActivity(MessagesStorage messagesStorage, CountDownLatch countDownLatch) {
        this.currentUser = messagesStorage.getUser(this.currentEncryptedChat.user_id);
        countDownLatch.countDown();
    }

    public void onFragmentDestroy() {
        super.onFragmentDestroy();
        if (this.chatActivityEnterView != null) {
            this.chatActivityEnterView.onDestroy();
        }
        if (this.mentionsAdapter != null) {
            this.mentionsAdapter.onDestroy();
        }
        if (this.chatAttachAlert != null) {
            this.chatAttachAlert.dismissInternal();
        }
        if (this.undoView != null) {
            this.undoView.hide(true, false);
        }
        MessagesController.getInstance(this.currentAccount).setLastCreatedDialogId(this.dialog_id, false);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagesDidLoad);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.emojiDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.didUpdateConnectionState);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.updateInterfaces);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.didReceiveNewMessages);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.closeChats);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagesRead);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagesDeleted);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.historyCleared);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messageReceivedByServer);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messageReceivedByAck);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messageSendError);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.chatInfoDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.encryptedChatUpdated);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagesReadEncrypted);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.removeAllMessagesFromDialog);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.contactsDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagePlayingProgressDidChanged);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagePlayingDidReset);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.screenshotTook);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.blockedUsersDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.fileNewChunkAvailable);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.didCreatedNewDeleteTask);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagePlayingDidStart);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagePlayingGoingToStop);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.updateMessageMedia);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.replaceMessagesObjects);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.notificationsSettingsUpdated);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.replyMessagesDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.didReceivedWebpages);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.didReceivedWebpagesInUpdates);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagesReadContent);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.botInfoDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.botKeyboardDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.chatSearchResultsAvailable);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.chatSearchResultsLoading);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.messagePlayingPlayStateChanged);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.didUpdatedMessagesViews);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.chatInfoCantLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.pinnedMessageDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.peerSettingsDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.newDraftReceived);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.userInfoDidLoad);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.didSetNewWallpapper);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.channelRightsUpdated);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.updateMentionsCount);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.audioRecordTooShort);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.didUpdatePollResults);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.chatOnlineCountDidLoad);
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.videoLoadingStateChanged);
        if (AndroidUtilities.isTablet()) {
            NotificationCenter.getInstance(this.currentAccount).postNotificationName(NotificationCenter.openedChatChanged, Long.valueOf(this.dialog_id), Boolean.valueOf(true));
        }
        if (this.currentUser != null) {
            MediaController.getInstance().stopMediaObserver();
        }
        if (this.currentEncryptedChat != null) {
            try {
                if (VERSION.SDK_INT >= 23 && (SharedConfig.passcodeHash.length() == 0 || SharedConfig.allowScreenCapture)) {
                    MediaController.getInstance().setFlagSecure(this, false);
                }
            } catch (Throwable e) {
                FileLog.e(e);
            }
        }
        if (this.currentUser != null) {
            MessagesController.getInstance(this.currentAccount).cancelLoadFullUser(this.currentUser.id);
        }
        AndroidUtilities.removeAdjustResize(getParentActivity(), this.classGuid);
        if (this.stickersAdapter != null) {
            this.stickersAdapter.onDestroy();
        }
        if (this.chatAttachAlert != null) {
            this.chatAttachAlert.onDestroy();
        }
        AndroidUtilities.unlockOrientation(getParentActivity());
        if (ChatObject.isChannel(this.currentChat)) {
            MessagesController.getInstance(this.currentAccount).startShortPoll(this.currentChat, true);
        }
    }

    public View createView(Context context) {
        int a;
        CharSequence oldMessage;
        boolean z;
        View fragmentContextView;
        boolean z2;
        if (this.chatMessageCellsCache.isEmpty()) {
            for (a = 0; a < 8; a++) {
                this.chatMessageCellsCache.add(new ChatMessageCell(context));
            }
        }
        for (a = 1; a >= 0; a--) {
            this.selectedMessagesIds[a].clear();
            this.selectedMessagesCanCopyIds[a].clear();
            this.selectedMessagesCanStarIds[a].clear();
        }
        this.cantDeleteMessagesCount = 0;
        this.canEditMessagesCount = 0;
        this.videoPlayerContainer = null;
        this.hasOwnBackground = true;
        if (this.chatAttachAlert != null) {
            try {
                if (this.chatAttachAlert.isShowing()) {
                    this.chatAttachAlert.dismiss();
                }
            } catch (Exception e) {
            }
            this.chatAttachAlert.onDestroy();
            this.chatAttachAlert = null;
        }
        if (this.stickersAdapter != null) {
            this.stickersAdapter.onDestroy();
            this.stickersAdapter = null;
        }
        Theme.createChatResources(context, false);
        this.actionBar.setAddToContainer(false);
        if (this.inPreviewMode) {
            this.actionBar.setBackButtonDrawable(null);
        } else {
            this.actionBar.setBackButtonDrawable(new BackDrawable(false));
        }
        this.actionBar.setActionBarMenuOnItemClick(new ActionBarMenuOnItemClick() {
            public void onItemClick(int id) {
                int a;
                ArrayList<Integer> ids;
                int b;
                MessageObject messageObject;
                Bundle args;
                if (id == -1) {
                    if (ChatActivity.this.actionBar.isActionModeShowed()) {
                        for (a = 1; a >= 0; a--) {
                            ChatActivity.this.selectedMessagesIds[a].clear();
                            ChatActivity.this.selectedMessagesCanCopyIds[a].clear();
                            ChatActivity.this.selectedMessagesCanStarIds[a].clear();
                        }
                        ChatActivity.this.cantDeleteMessagesCount = 0;
                        ChatActivity.this.canEditMessagesCount = 0;
                        ChatActivity.this.actionBar.hideActionMode();
                        ChatActivity.this.updatePinnedMessageView(true);
                        ChatActivity.this.updateVisibleRows();
                        return;
                    }
                    ChatActivity.this.finishFragment();
                } else if (id == 10) {
                    String str = "";
                    int previousUid = 0;
                    for (a = 1; a >= 0; a--) {
                        ids = new ArrayList();
                        for (b = 0; b < ChatActivity.this.selectedMessagesCanCopyIds[a].size(); b++) {
                            ids.add(Integer.valueOf(ChatActivity.this.selectedMessagesCanCopyIds[a].keyAt(b)));
                        }
                        if (ChatActivity.this.currentEncryptedChat == null) {
                            Collections.sort(ids);
                        } else {
                            Collections.sort(ids, Collections.reverseOrder());
                        }
                        for (b = 0; b < ids.size(); b++) {
                            messageObject = (MessageObject) ChatActivity.this.selectedMessagesCanCopyIds[a].get(((Integer) ids.get(b)).intValue());
                            if (str.length() != 0) {
                                str = str + "\n\n";
                            }
                            StringBuilder append = new StringBuilder().append(str);
                            ChatActivity chatActivity = ChatActivity.this;
                            boolean z = ids.size() != 1 && (ChatActivity.this.currentUser == null || !ChatActivity.this.currentUser.self);
                            str = append.append(chatActivity.getMessageContent(messageObject, previousUid, z)).toString();
                            previousUid = messageObject.messageOwner.from_id;
                        }
                    }
                    if (str.length() != 0) {
                        AndroidUtilities.addToClipboard(str);
                    }
                    for (a = 1; a >= 0; a--) {
                        ChatActivity.this.selectedMessagesIds[a].clear();
                        ChatActivity.this.selectedMessagesCanCopyIds[a].clear();
                        ChatActivity.this.selectedMessagesCanStarIds[a].clear();
                    }
                    ChatActivity.this.cantDeleteMessagesCount = 0;
                    ChatActivity.this.canEditMessagesCount = 0;
                    ChatActivity.this.actionBar.hideActionMode();
                    ChatActivity.this.updatePinnedMessageView(true);
                    ChatActivity.this.updateVisibleRows();
                } else if (id == 12) {
                    if (ChatActivity.this.getParentActivity() != null) {
                        ChatActivity.this.createDeleteMessagesAlert(null, null);
                    }
                } else if (id == 11) {
                    args = new Bundle();
                    args.putBoolean("onlySelect", true);
                    args.putInt("dialogsType", 3);
                    BaseFragment dialogsActivity = new DialogsActivity(args);
                    dialogsActivity.setDelegate(ChatActivity.this);
                    ChatActivity.this.presentFragment(dialogsActivity);
                } else if (id == 13) {
                    if (ChatActivity.this.getParentActivity() != null) {
                        ChatActivity.this.showDialog(AlertsCreator.createTTLAlert(ChatActivity.this.getParentActivity(), ChatActivity.this.currentEncryptedChat).create());
                    }
                } else if (id == 15 || id == 16) {
                    if (ChatActivity.this.getParentActivity() != null) {
                        boolean z2;
                        boolean isChat = ((int) ChatActivity.this.dialog_id) < 0 && ((int) (ChatActivity.this.dialog_id >> 32)) != 1;
                        ChatActivity chatActivity2 = ChatActivity.this;
                        boolean z3 = id == 15;
                        Chat chat = ChatActivity.this.currentChat;
                        User user = ChatActivity.this.currentUser;
                        if (ChatActivity.this.currentEncryptedChat != null) {
                            z2 = true;
                        } else {
                            z2 = false;
                        }
                        AlertsCreator.createClearOrDeleteDialogAlert(chatActivity2, z3, chat, user, z2, new ChatActivity$5$$Lambda$0(this, id, isChat));
                    }
                } else if (id == 17) {
                    if (ChatActivity.this.currentUser != null && ChatActivity.this.getParentActivity() != null) {
                        if (ChatActivity.this.currentUser.phone == null || ChatActivity.this.currentUser.phone.length() == 0) {
                            ChatActivity.this.shareMyContact(ChatActivity.this.replyingMessageObject);
                            return;
                        }
                        args = new Bundle();
                        args.putInt("user_id", ChatActivity.this.currentUser.id);
                        args.putBoolean("addContact", true);
                        ChatActivity.this.presentFragment(new ContactAddActivity(args));
                    }
                } else if (id == 18) {
                    ChatActivity.this.toggleMute(false);
                } else if (id == 24) {
                    try {
                        DataQuery.getInstance(ChatActivity.this.currentAccount).installShortcut((long) ChatActivity.this.currentUser.id);
                    } catch (Exception e) {
                        FileLog.e(e);
                    }
                } else if (id == 21) {
                    AlertsCreator.createReportAlert(ChatActivity.this.getParentActivity(), ChatActivity.this.dialog_id, 0, ChatActivity.this);
                } else if (id == 19) {
                    messageObject = null;
                    a = 1;
                    while (a >= 0) {
                        if (messageObject == null && ChatActivity.this.selectedMessagesIds[a].size() == 1) {
                            ids = new ArrayList();
                            for (b = 0; b < ChatActivity.this.selectedMessagesIds[a].size(); b++) {
                                ids.add(Integer.valueOf(ChatActivity.this.selectedMessagesIds[a].keyAt(b)));
                            }
                            messageObject = (MessageObject) ChatActivity.this.messagesDict[a].get(((Integer) ids.get(0)).intValue());
                        }
                        ChatActivity.this.selectedMessagesIds[a].clear();
                        ChatActivity.this.selectedMessagesCanCopyIds[a].clear();
                        ChatActivity.this.selectedMessagesCanStarIds[a].clear();
                        a--;
                    }
                    if (messageObject != null && (messageObject.messageOwner.id > 0 || (messageObject.messageOwner.id < 0 && ChatActivity.this.currentEncryptedChat != null))) {
                        ChatActivity.this.showFieldPanelForReply(true, messageObject);
                    }
                    ChatActivity.this.cantDeleteMessagesCount = 0;
                    ChatActivity.this.canEditMessagesCount = 0;
                    ChatActivity.this.actionBar.hideActionMode();
                    ChatActivity.this.updatePinnedMessageView(true);
                    ChatActivity.this.updateVisibleRows();
                } else if (id == 22) {
                    for (a = 0; a < 2; a++) {
                        for (b = 0; b < ChatActivity.this.selectedMessagesCanStarIds[a].size(); b++) {
                            MessageObject msg = (MessageObject) ChatActivity.this.selectedMessagesCanStarIds[a].valueAt(b);
                            DataQuery.getInstance(ChatActivity.this.currentAccount).addRecentSticker(2, msg, msg.getDocument(), (int) (System.currentTimeMillis() / 1000), !ChatActivity.this.hasUnfavedSelected);
                        }
                    }
                    for (a = 1; a >= 0; a--) {
                        ChatActivity.this.selectedMessagesIds[a].clear();
                        ChatActivity.this.selectedMessagesCanCopyIds[a].clear();
                        ChatActivity.this.selectedMessagesCanStarIds[a].clear();
                    }
                    ChatActivity.this.cantDeleteMessagesCount = 0;
                    ChatActivity.this.canEditMessagesCount = 0;
                    ChatActivity.this.actionBar.hideActionMode();
                    ChatActivity.this.updatePinnedMessageView(true);
                    ChatActivity.this.updateVisibleRows();
                } else if (id == 23) {
                    messageObject = null;
                    a = 1;
                    while (a >= 0) {
                        if (messageObject == null && ChatActivity.this.selectedMessagesIds[a].size() == 1) {
                            ids = new ArrayList();
                            for (b = 0; b < ChatActivity.this.selectedMessagesIds[a].size(); b++) {
                                ids.add(Integer.valueOf(ChatActivity.this.selectedMessagesIds[a].keyAt(b)));
                            }
                            messageObject = (MessageObject) ChatActivity.this.messagesDict[a].get(((Integer) ids.get(0)).intValue());
                        }
                        ChatActivity.this.selectedMessagesIds[a].clear();
                        ChatActivity.this.selectedMessagesCanCopyIds[a].clear();
                        ChatActivity.this.selectedMessagesCanStarIds[a].clear();
                        a--;
                    }
                    ChatActivity.this.startReplyOnTextChange = false;
                    ChatActivity.this.startEditingMessageObject(messageObject);
                    ChatActivity.this.cantDeleteMessagesCount = 0;
                    ChatActivity.this.canEditMessagesCount = 0;
                    ChatActivity.this.actionBar.hideActionMode();
                    ChatActivity.this.updatePinnedMessageView(true);
                    ChatActivity.this.updateVisibleRows();
                } else if (id == 14) {
                    if (ChatActivity.this.chatAttachAlert != null) {
                        ChatActivity.this.chatAttachAlert.setEditingMessageObject(null);
                    }
                    ChatActivity.this.openAttachMenu();
                } else if (id == 30) {
                    SendMessagesHelper.getInstance(ChatActivity.this.currentAccount).sendMessage("/help", ChatActivity.this.dialog_id, null, null, false, null, null, null);
                } else if (id == 31) {
                    SendMessagesHelper.getInstance(ChatActivity.this.currentAccount).sendMessage("/settings", ChatActivity.this.dialog_id, null, null, false, null, null, null);
                } else if (id == 40) {
                    ChatActivity.this.openSearchWithText(null);
                } else if (id == 32) {
                    if (ChatActivity.this.currentUser != null && ChatActivity.this.getParentActivity() != null) {
                        VoIPHelper.startCall(ChatActivity.this.currentUser, ChatActivity.this.getParentActivity(), MessagesController.getInstance(ChatActivity.this.currentAccount).getUserFull(ChatActivity.this.currentUser.id));
                    }
                } else if (id == 50) {
                    if (ChatActivity.this.chatActivityEnterView != null) {
                        ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                        ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedBold();
                    }
                } else if (id == 51) {
                    if (ChatActivity.this.chatActivityEnterView != null) {
                        ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                        ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedItalic();
                    }
                } else if (id == 52) {
                    if (ChatActivity.this.chatActivityEnterView != null) {
                        ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                        ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedMono();
                    }
                } else if (id == 53) {
                    if (ChatActivity.this.chatActivityEnterView != null) {
                        ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                        ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedUrl();
                    }
                } else if (id == 54 && ChatActivity.this.chatActivityEnterView != null) {
                    ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                    ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedRegular();
                }
            }

            /* Access modifiers changed, original: final|synthetic */
            public final /* synthetic */ void lambda$onItemClick$2$ChatActivity$5(int id, boolean isChat, boolean param) {
                boolean z = true;
                if (id == 15 && ChatObject.isChannel(ChatActivity.this.currentChat) && (!ChatActivity.this.currentChat.megagroup || !TextUtils.isEmpty(ChatActivity.this.currentChat.username))) {
                    MessagesController.getInstance(ChatActivity.this.currentAccount).deleteDialog(ChatActivity.this.dialog_id, 2, param);
                } else if (id != 15) {
                    NotificationCenter.getInstance(ChatActivity.this.currentAccount).removeObserver(ChatActivity.this, NotificationCenter.closeChats);
                    NotificationCenter.getInstance(ChatActivity.this.currentAccount).postNotificationName(NotificationCenter.closeChats, new Object[0]);
                    NotificationCenter.getInstance(ChatActivity.this.currentAccount).postNotificationName(NotificationCenter.needDeleteDialog, Long.valueOf(ChatActivity.this.dialog_id), ChatActivity.this.currentUser, ChatActivity.this.currentChat, Boolean.valueOf(param));
                    ChatActivity.this.finishFragment();
                } else {
                    ChatActivity.this.clearingHistory = true;
                    UndoView access$4800 = ChatActivity.this.undoView;
                    long access$2300 = ChatActivity.this.dialog_id;
                    if (id != 15) {
                        z = false;
                    }
                    access$4800.showWithAction(access$2300, z, new ChatActivity$5$$Lambda$1(this, id, param, isChat), new ChatActivity$5$$Lambda$2(this));
                    ChatActivity.this.chatAdapter.notifyDataSetChanged();
                }
            }

            /* Access modifiers changed, original: final|synthetic */
            public final /* synthetic */ void lambda$null$0$ChatActivity$5(int id, boolean param, boolean isChat) {
                if (id == 15) {
                    if (ChatActivity.this.chatInfo != null && ChatActivity.this.chatInfo.pinned_msg_id != 0) {
                        MessagesController.getNotificationsSettings(ChatActivity.this.currentAccount).edit().putInt("pin_" + ChatActivity.this.dialog_id, ChatActivity.this.chatInfo.pinned_msg_id).commit();
                        ChatActivity.this.updatePinnedMessageView(true);
                    } else if (!(ChatActivity.this.userInfo == null || ChatActivity.this.userInfo.pinned_msg_id == 0)) {
                        MessagesController.getNotificationsSettings(ChatActivity.this.currentAccount).edit().putInt("pin_" + ChatActivity.this.dialog_id, ChatActivity.this.userInfo.pinned_msg_id).commit();
                        ChatActivity.this.updatePinnedMessageView(true);
                    }
                    MessagesController.getInstance(ChatActivity.this.currentAccount).deleteDialog(ChatActivity.this.dialog_id, 1, param);
                    ChatActivity.this.clearingHistory = false;
                    ChatActivity.this.clearHistory(false);
                    ChatActivity.this.chatAdapter.notifyDataSetChanged();
                    return;
                }
                if (!isChat) {
                    MessagesController.getInstance(ChatActivity.this.currentAccount).deleteDialog(ChatActivity.this.dialog_id, 0, param);
                } else if (ChatObject.isNotInChat(ChatActivity.this.currentChat)) {
                    MessagesController.getInstance(ChatActivity.this.currentAccount).deleteDialog(ChatActivity.this.dialog_id, 0, param);
                } else {
                    MessagesController.getInstance(ChatActivity.this.currentAccount).deleteUserFromChat((int) (-ChatActivity.this.dialog_id), MessagesController.getInstance(ChatActivity.this.currentAccount).getUser(Integer.valueOf(UserConfig.getInstance(ChatActivity.this.currentAccount).getClientUserId())), null);
                }
                ChatActivity.this.finishFragment();
            }

            /* Access modifiers changed, original: final|synthetic */
            public final /* synthetic */ void lambda$null$1$ChatActivity$5() {
                ChatActivity.this.clearingHistory = false;
                ChatActivity.this.chatAdapter.notifyDataSetChanged();
            }
        });
        this.avatarContainer = new ChatAvatarContainer(context, this, this.currentEncryptedChat != null);
        if (this.inPreviewMode) {
            this.avatarContainer.setOccupyStatusBar(false);
        }
        this.actionBar.addView(this.avatarContainer, 0, LayoutHelper.createFrame(-2, -1.0f, 51, !this.inPreviewMode ? 56.0f : 0.0f, 0.0f, 40.0f, 0.0f));
        if (!(this.currentChat == null || ChatObject.isChannel(this.currentChat))) {
            int count = this.currentChat.participants_count;
            if (this.chatInfo != null) {
                count = this.chatInfo.participants.participants.size();
            }
            if (count == 0 || this.currentChat.deactivated || this.currentChat.left || (this.currentChat instanceof TL_chatForbidden) || (this.chatInfo != null && (this.chatInfo.participants instanceof TL_chatParticipantsForbidden))) {
                this.avatarContainer.setEnabled(false);
            }
        }
        ActionBarMenu menu = this.actionBar.createMenu();
        if (this.currentEncryptedChat == null && !this.isBroadcast) {
            this.searchItem = menu.addItem(0, NUM).setIsSearchField(true).setActionBarMenuItemSearchListener(new ActionBarMenuItemSearchListener() {
                boolean searchWas;

                public void onSearchCollapse() {
                    ChatActivity.this.searchCalendarButton.setVisibility(0);
                    if (ChatActivity.this.searchUserButton != null) {
                        ChatActivity.this.searchUserButton.setVisibility(0);
                    }
                    if (ChatActivity.this.searchingForUser) {
                        ChatActivity.this.mentionsAdapter.searchUsernameOrHashtag(null, 0, null, false);
                        ChatActivity.this.searchingForUser = false;
                    }
                    ChatActivity.this.mentionLayoutManager.setReverseLayout(false);
                    ChatActivity.this.mentionsAdapter.setSearchingMentions(false);
                    ChatActivity.this.searchingUserMessages = null;
                    ChatActivity.this.searchItem.setSearchFieldHint(LocaleController.getString("Search", NUM));
                    ChatActivity.this.searchItem.setSearchFieldCaption(null);
                    ChatActivity.this.avatarContainer.setVisibility(0);
                    if (ChatActivity.this.editTextItem.getTag() != null) {
                        if (ChatActivity.this.headerItem != null) {
                            ChatActivity.this.headerItem.setVisibility(8);
                            ChatActivity.this.editTextItem.setVisibility(0);
                            ChatActivity.this.attachItem.setVisibility(8);
                        }
                    } else if (ChatActivity.this.chatActivityEnterView.hasText()) {
                        if (ChatActivity.this.headerItem != null) {
                            ChatActivity.this.headerItem.setVisibility(8);
                            ChatActivity.this.editTextItem.setVisibility(8);
                            ChatActivity.this.attachItem.setVisibility(0);
                        }
                    } else if (ChatActivity.this.headerItem != null) {
                        ChatActivity.this.headerItem.setVisibility(0);
                        ChatActivity.this.editTextItem.setVisibility(8);
                        ChatActivity.this.attachItem.setVisibility(8);
                    }
                    ChatActivity.this.searchItem.setVisibility(8);
                    ChatActivity.this.highlightMessageId = Integer.MAX_VALUE;
                    if (this.searchWas) {
                        ChatActivity.this.scrollToLastMessage(false);
                    }
                    ChatActivity.this.updateBottomOverlay();
                    ChatActivity.this.updatePinnedMessageView(true);
                    ChatActivity.this.updateVisibleRows();
                }

                public void onSearchExpand() {
                    if (ChatActivity.this.openSearchKeyboard) {
                        AndroidUtilities.runOnUIThread(new ChatActivity$6$$Lambda$0(this), 300);
                    }
                }

                /* Access modifiers changed, original: final|synthetic */
                public final /* synthetic */ void lambda$onSearchExpand$0$ChatActivity$6() {
                    this.searchWas = false;
                    ChatActivity.this.searchItem.getSearchField().requestFocus();
                    AndroidUtilities.showKeyboard(ChatActivity.this.searchItem.getSearchField());
                }

                public void onSearchPressed(EditText editText) {
                    this.searchWas = true;
                    ChatActivity.this.updateSearchButtons(0, 0, -1);
                    DataQuery.getInstance(ChatActivity.this.currentAccount).searchMessagesInChat(editText.getText().toString(), ChatActivity.this.dialog_id, ChatActivity.this.mergeDialogId, ChatActivity.this.classGuid, 0, ChatActivity.this.searchingUserMessages);
                }

                public void onTextChanged(EditText editText) {
                    if (ChatActivity.this.searchingForUser) {
                        ChatActivity.this.mentionsAdapter.searchUsernameOrHashtag("@" + editText.getText().toString(), 0, ChatActivity.this.messages, true);
                    } else if (!ChatActivity.this.searchingForUser && ChatActivity.this.searchingUserMessages == null && ChatActivity.this.searchUserButton != null && TextUtils.equals(editText.getText(), LocaleController.getString("SearchFrom", NUM))) {
                        ChatActivity.this.searchUserButton.callOnClick();
                    }
                }

                public void onCaptionCleared() {
                    if (ChatActivity.this.searchingUserMessages != null) {
                        ChatActivity.this.searchUserButton.callOnClick();
                        return;
                    }
                    if (ChatActivity.this.searchingForUser) {
                        ChatActivity.this.mentionsAdapter.searchUsernameOrHashtag(null, 0, null, false);
                        ChatActivity.this.searchingForUser = false;
                        ChatActivity.this.searchItem.setSearchFieldText("", true);
                    }
                    ChatActivity.this.searchItem.setSearchFieldHint(LocaleController.getString("Search", NUM));
                    ChatActivity.this.searchCalendarButton.setVisibility(0);
                    ChatActivity.this.searchUserButton.setVisibility(0);
                    ChatActivity.this.searchingUserMessages = null;
                }

                public boolean forceShowClear() {
                    return ChatActivity.this.searchingForUser;
                }
            });
            this.searchItem.setSearchFieldHint(LocaleController.getString("Search", NUM));
            this.searchItem.setVisibility(8);
        }
        this.headerItem = menu.addItem(0, NUM);
        this.headerItem.setContentDescription(LocaleController.getString("AccDescrMoreOptions", NUM));
        if (this.currentUser != null) {
            this.headerItem.addSubItem(32, LocaleController.getString("Call", NUM));
            TL_userFull userFull = MessagesController.getInstance(this.currentAccount).getUserFull(this.currentUser.id);
            if (userFull == null || !userFull.phone_calls_available) {
                this.headerItem.hideSubItem(32);
            } else {
                this.headerItem.showSubItem(32);
            }
        }
        this.editTextItem = menu.addItem(0, NUM);
        this.editTextItem.setTag(null);
        this.editTextItem.setVisibility(8);
        SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(LocaleController.getString("Bold", NUM));
        spannableStringBuilder.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface("fonts/rmedium.ttf")), 0, spannableStringBuilder.length(), 33);
        this.editTextItem.addSubItem(50, spannableStringBuilder);
        spannableStringBuilder = new SpannableStringBuilder(LocaleController.getString("Italic", NUM));
        spannableStringBuilder.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface("fonts/ritalic.ttf")), 0, spannableStringBuilder.length(), 33);
        this.editTextItem.addSubItem(51, spannableStringBuilder);
        spannableStringBuilder = new SpannableStringBuilder(LocaleController.getString("Mono", NUM));
        spannableStringBuilder.setSpan(new TypefaceSpan(Typeface.MONOSPACE), 0, spannableStringBuilder.length(), 33);
        this.editTextItem.addSubItem(52, spannableStringBuilder);
        this.editTextItem.addSubItem(53, LocaleController.getString("CreateLink", NUM));
        this.editTextItem.addSubItem(54, LocaleController.getString("Regular", NUM));
        if (this.searchItem != null) {
            this.headerItem.addSubItem(40, LocaleController.getString("Search", NUM));
        }
        if (!(this.currentChat == null || this.currentChat.creator)) {
            this.headerItem.addSubItem(21, LocaleController.getString("ReportChat", NUM));
        }
        if (this.currentUser != null) {
            this.addContactItem = this.headerItem.addSubItem(17, "");
        }
        if (this.currentEncryptedChat != null) {
            this.timeItem2 = this.headerItem.addSubItem(13, LocaleController.getString("SetTimer", NUM));
        }
        if (!ChatObject.isChannel(this.currentChat) || (this.currentChat != null && this.currentChat.megagroup && TextUtils.isEmpty(this.currentChat.username))) {
            this.headerItem.addSubItem(15, LocaleController.getString("ClearHistory", NUM));
        }
        if (this.currentUser == null || !this.currentUser.self) {
            this.muteItem = this.headerItem.addSubItem(18, null);
        }
        if (!ChatObject.isChannel(this.currentChat) || this.currentChat.creator) {
            if (!ChatObject.isChannel(this.currentChat)) {
                if (this.currentChat == null || this.isBroadcast) {
                    this.headerItem.addSubItem(16, LocaleController.getString("DeleteChatUser", NUM));
                } else {
                    this.headerItem.addSubItem(16, LocaleController.getString("DeleteAndExit", NUM));
                }
            }
        } else if (!ChatObject.isNotInChat(this.currentChat)) {
            if (this.currentChat.megagroup) {
                this.headerItem.addSubItem(16, LocaleController.getString("DeleteAndExit", NUM));
            } else {
                this.headerItem.addSubItem(16, LocaleController.getString("LeaveChannelMenu", NUM));
            }
        }
        if (this.currentUser != null && this.currentUser.self) {
            this.headerItem.addSubItem(24, LocaleController.getString("AddShortcut", NUM));
        }
        if (this.currentUser != null && this.currentEncryptedChat == null && this.currentUser.bot) {
            this.headerItem.addSubItem(31, LocaleController.getString("BotSettings", NUM));
            this.headerItem.addSubItem(30, LocaleController.getString("BotHelp", NUM));
            updateBotButtons();
        }
        updateTitle();
        this.avatarContainer.updateOnlineCount();
        this.avatarContainer.updateSubtitle();
        updateTitleIcons();
        this.attachItem = menu.addItem(14, NUM).setOverrideMenuClick(true).setAllowCloseAnimation(false);
        this.attachItem.setVisibility(8);
        this.actionModeViews.clear();
        if (this.inPreviewMode) {
            this.headerItem.setAlpha(0.0f);
            this.attachItem.setAlpha(0.0f);
        }
        ActionBarMenu actionMode = this.actionBar.createActionMode();
        this.selectedMessagesCountTextView = new NumberTextView(actionMode.getContext());
        this.selectedMessagesCountTextView.setTextSize(18);
        this.selectedMessagesCountTextView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        this.selectedMessagesCountTextView.setTextColor(Theme.getColor("actionBarActionModeDefaultIcon"));
        actionMode.addView(this.selectedMessagesCountTextView, LayoutHelper.createLinear(0, -1, 1.0f, 65, 0, 0, 0));
        this.selectedMessagesCountTextView.setOnTouchListener(ChatActivity$$Lambda$4.$instance);
        if (this.currentEncryptedChat == null) {
            this.actionModeViews.add(actionMode.addItemWithWidth(23, NUM, AndroidUtilities.dp(54.0f), LocaleController.getString("Edit", NUM)));
            if (!this.isBroadcast) {
                this.actionModeViews.add(actionMode.addItemWithWidth(19, NUM, AndroidUtilities.dp(54.0f), LocaleController.getString("Reply", NUM)));
            }
            this.actionModeViews.add(actionMode.addItemWithWidth(22, NUM, AndroidUtilities.dp(54.0f), LocaleController.getString("AddToFavorites", NUM)));
            this.actionModeViews.add(actionMode.addItemWithWidth(10, NUM, AndroidUtilities.dp(54.0f), LocaleController.getString("Copy", NUM)));
            this.actionModeViews.add(actionMode.addItemWithWidth(11, NUM, AndroidUtilities.dp(54.0f), LocaleController.getString("Forward", NUM)));
            this.actionModeViews.add(actionMode.addItemWithWidth(12, NUM, AndroidUtilities.dp(54.0f), LocaleController.getString("Delete", NUM)));
        } else {
            this.actionModeViews.add(actionMode.addItemWithWidth(23, NUM, AndroidUtilities.dp(54.0f), LocaleController.getString("Edit", NUM)));
            this.actionModeViews.add(actionMode.addItemWithWidth(19, NUM, AndroidUtilities.dp(54.0f), LocaleController.getString("Reply", NUM)));
            this.actionModeViews.add(actionMode.addItemWithWidth(22, NUM, AndroidUtilities.dp(54.0f), LocaleController.getString("AddToFavorites", NUM)));
            this.actionModeViews.add(actionMode.addItemWithWidth(10, NUM, AndroidUtilities.dp(54.0f), LocaleController.getString("Copy", NUM)));
            this.actionModeViews.add(actionMode.addItemWithWidth(12, NUM, AndroidUtilities.dp(54.0f), LocaleController.getString("Delete", NUM)));
        }
        ActionBarMenuItem item = actionMode.getItem(23);
        int i = (this.canEditMessagesCount == 1 && this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size() == 1) ? 0 : 8;
        item.setVisibility(i);
        actionMode.getItem(10).setVisibility(this.selectedMessagesCanCopyIds[0].size() + this.selectedMessagesCanCopyIds[1].size() != 0 ? 0 : 8);
        actionMode.getItem(22).setVisibility(this.selectedMessagesCanStarIds[0].size() + this.selectedMessagesCanStarIds[1].size() != 0 ? 0 : 8);
        actionMode.getItem(12).setVisibility(this.cantDeleteMessagesCount == 0 ? 0 : 8);
        checkActionBarMenu();
        this.fragmentView = new SizeNotifierFrameLayout(context) {
            int inputFieldHeight = 0;

            /* Access modifiers changed, original: protected */
            public void onAttachedToWindow() {
                super.onAttachedToWindow();
                MessageObject messageObject = MediaController.getInstance().getPlayingMessageObject();
                if (messageObject == null) {
                    return;
                }
                if ((messageObject.isRoundVideo() || messageObject.isVideo()) && messageObject.eventId == 0 && messageObject.getDialogId() == ChatActivity.this.dialog_id) {
                    MediaController.getInstance().setTextureView(ChatActivity.this.createTextureView(false), ChatActivity.this.aspectRatioFrameLayout, ChatActivity.this.videoPlayerContainer, true);
                }
            }

            public boolean dispatchTouchEvent(MotionEvent ev) {
                if (ChatActivity.this.chatActivityEnterView == null || !ChatActivity.this.chatActivityEnterView.isStickersExpanded() || ev.getY() >= ChatActivity.this.chatActivityEnterView.getY()) {
                    return super.dispatchTouchEvent(ev);
                }
                return false;
            }

            /* Access modifiers changed, original: protected */
            /* JADX WARNING: Removed duplicated region for block: B:39:0x0101  */
            /* JADX WARNING: Removed duplicated region for block: B:11:0x002c  */
            /* JADX WARNING: Removed duplicated region for block: B:59:0x01c6  */
            /* JADX WARNING: Removed duplicated region for block: B:26:0x00b6  */
            public boolean drawChild(android.graphics.Canvas r18, android.view.View r19, long r20) {
                /*
                r17 = this;
                r11 = org.telegram.messenger.MediaController.getInstance();
                r6 = r11.getPlayingMessageObject();
                r4 = 0;
                if (r6 == 0) goto L_0x00db;
            L_0x000b:
                r12 = r6.eventId;
                r14 = 0;
                r11 = (r12 > r14 ? 1 : (r12 == r14 ? 0 : -1));
                if (r11 != 0) goto L_0x00db;
            L_0x0013:
                r4 = r6.isRoundVideo();
                if (r4 != 0) goto L_0x001f;
            L_0x0019:
                r11 = r6.isVideo();
                if (r11 == 0) goto L_0x00db;
            L_0x001f:
                r5 = 1;
            L_0x0020:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.videoPlayerContainer;
                r0 = r19;
                if (r0 != r11) goto L_0x0101;
            L_0x002c:
                if (r6 == 0) goto L_0x00de;
            L_0x002e:
                r11 = r6.type;
                r12 = 5;
                if (r11 != r12) goto L_0x00de;
            L_0x0033:
                r11 = org.telegram.ui.ActionBar.Theme.chat_roundVideoShadow;
                if (r11 == 0) goto L_0x0086;
            L_0x0037:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.aspectRatioFrameLayout;
                r11 = r11.isDrawingReady();
                if (r11 == 0) goto L_0x0086;
            L_0x0045:
                r11 = r19.getX();
                r11 = (int) r11;
                r12 = NUM; // 0x40400000 float:3.0 double:5.325712093E-315;
                r12 = org.telegram.messenger.AndroidUtilities.dp(r12);
                r9 = r11 - r12;
                r11 = r19.getY();
                r11 = (int) r11;
                r12 = NUM; // 0x40000000 float:2.0 double:5.304989477E-315;
                r12 = org.telegram.messenger.AndroidUtilities.dp(r12);
                r10 = r11 - r12;
                r11 = org.telegram.ui.ActionBar.Theme.chat_roundVideoShadow;
                r12 = 255; // 0xff float:3.57E-43 double:1.26E-321;
                r11.setAlpha(r12);
                r11 = org.telegram.ui.ActionBar.Theme.chat_roundVideoShadow;
                r12 = org.telegram.messenger.AndroidUtilities.roundMessageSize;
                r12 = r12 + r9;
                r13 = NUM; // 0x40CLASSNAME float:6.0 double:5.367157323E-315;
                r13 = org.telegram.messenger.AndroidUtilities.dp(r13);
                r12 = r12 + r13;
                r13 = org.telegram.messenger.AndroidUtilities.roundMessageSize;
                r13 = r13 + r10;
                r14 = NUM; // 0x40CLASSNAME float:6.0 double:5.367157323E-315;
                r14 = org.telegram.messenger.AndroidUtilities.dp(r14);
                r13 = r13 + r14;
                r11.setBounds(r9, r10, r12, r13);
                r11 = org.telegram.ui.ActionBar.Theme.chat_roundVideoShadow;
                r0 = r18;
                r11.draw(r0);
            L_0x0086:
                r8 = super.drawChild(r18, r19, r20);
            L_0x008a:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.actionBar;
                r0 = r19;
                if (r0 != r11) goto L_0x00da;
            L_0x0096:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.parentLayout;
                if (r11 == 0) goto L_0x00da;
            L_0x00a0:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r12 = r11.parentLayout;
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.actionBar;
                r11 = r11.getVisibility();
                if (r11 != 0) goto L_0x01c6;
            L_0x00b6:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.actionBar;
                r13 = r11.getMeasuredHeight();
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.inPreviewMode;
                if (r11 == 0) goto L_0x01c3;
            L_0x00cc:
                r11 = android.os.Build.VERSION.SDK_INT;
                r14 = 21;
                if (r11 < r14) goto L_0x01c3;
            L_0x00d2:
                r11 = org.telegram.messenger.AndroidUtilities.statusBarHeight;
            L_0x00d4:
                r11 = r11 + r13;
            L_0x00d5:
                r0 = r18;
                r12.drawHeaderShadow(r0, r11);
            L_0x00da:
                return r8;
            L_0x00db:
                r5 = 0;
                goto L_0x0020;
            L_0x00de:
                r11 = r19.getTag();
                if (r11 != 0) goto L_0x00ff;
            L_0x00e4:
                r7 = r19.getTranslationY();
                r11 = NUM; // 0x447a0000 float:1000.0 double:5.676053805E-315;
                r11 = org.telegram.messenger.AndroidUtilities.dp(r11);
                r11 = -r11;
                r11 = (float) r11;
                r0 = r19;
                r0.setTranslationY(r11);
                r8 = super.drawChild(r18, r19, r20);
                r0 = r19;
                r0.setTranslationY(r7);
                goto L_0x008a;
            L_0x00ff:
                r8 = 0;
                goto L_0x008a;
            L_0x0101:
                r8 = super.drawChild(r18, r19, r20);
                if (r5 == 0) goto L_0x008a;
            L_0x0107:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.chatListView;
                r0 = r19;
                if (r0 != r11) goto L_0x008a;
            L_0x0113:
                r11 = r6.type;
                r12 = 5;
                if (r11 == r12) goto L_0x008a;
            L_0x0118:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.videoPlayerContainer;
                if (r11 == 0) goto L_0x008a;
            L_0x0122:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.videoPlayerContainer;
                r11 = r11.getTag();
                if (r11 == 0) goto L_0x008a;
            L_0x0130:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.videoPlayerContainer;
                r0 = r17;
                r1 = r18;
                r2 = r20;
                super.drawChild(r1, r11, r2);
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.drawLaterRoundProgressCell;
                if (r11 == 0) goto L_0x008a;
            L_0x014b:
                r18.save();
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.drawLaterRoundProgressCell;
                r11 = r11.getX();
                r0 = r17;
                r12 = org.telegram.ui.ChatActivity.this;
                r12 = r12.drawLaterRoundProgressCell;
                r12 = r12.getTop();
                r0 = r17;
                r13 = org.telegram.ui.ChatActivity.this;
                r13 = r13.chatListView;
                r13 = r13.getTop();
                r12 = r12 + r13;
                r12 = (float) r12;
                r0 = r18;
                r0.translate(r11, r12);
                if (r4 == 0) goto L_0x019a;
            L_0x017b:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.drawLaterRoundProgressCell;
                r0 = r18;
                r11.drawRoundProgress(r0);
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.drawLaterRoundProgressCell;
                r0 = r18;
                r11.drawOverlays(r0);
            L_0x0195:
                r18.restore();
                goto L_0x008a;
            L_0x019a:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.drawLaterRoundProgressCell;
                r0 = r18;
                r11.drawOverlays(r0);
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.drawLaterRoundProgressCell;
                r11 = r11.needDrawTime();
                if (r11 == 0) goto L_0x0195;
            L_0x01b5:
                r0 = r17;
                r11 = org.telegram.ui.ChatActivity.this;
                r11 = r11.drawLaterRoundProgressCell;
                r0 = r18;
                r11.drawTime(r0);
                goto L_0x0195;
            L_0x01c3:
                r11 = 0;
                goto L_0x00d4;
            L_0x01c6:
                r11 = 0;
                goto L_0x00d5;
                */
                throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity$AnonymousClass7.drawChild(android.graphics.Canvas, android.view.View, long):boolean");
            }

            /* Access modifiers changed, original: protected */
            public boolean isActionBarVisible() {
                return ChatActivity.this.actionBar.getVisibility() == 0;
            }

            /* Access modifiers changed, original: protected */
            public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
                int widthSize = MeasureSpec.getSize(widthMeasureSpec);
                int allHeight = MeasureSpec.getSize(heightMeasureSpec);
                int heightSize = allHeight;
                setMeasuredDimension(widthSize, heightSize);
                heightSize -= getPaddingTop();
                measureChildWithMargins(ChatActivity.this.actionBar, widthMeasureSpec, 0, heightMeasureSpec, 0);
                int actionBarHeight = ChatActivity.this.actionBar.getMeasuredHeight();
                if (ChatActivity.this.actionBar.getVisibility() == 0) {
                    heightSize -= actionBarHeight;
                }
                if (getKeyboardHeight() <= AndroidUtilities.dp(20.0f) && !AndroidUtilities.isInMultiwindow) {
                    heightSize -= ChatActivity.this.chatActivityEnterView.getEmojiPadding();
                    allHeight -= ChatActivity.this.chatActivityEnterView.getEmojiPadding();
                }
                int childCount = getChildCount();
                measureChildWithMargins(ChatActivity.this.chatActivityEnterView, widthMeasureSpec, 0, heightMeasureSpec, 0);
                if (ChatActivity.this.inPreviewMode) {
                    this.inputFieldHeight = 0;
                } else {
                    this.inputFieldHeight = ChatActivity.this.chatActivityEnterView.getMeasuredHeight();
                }
                for (int i = 0; i < childCount; i++) {
                    View child = getChildAt(i);
                    if (!(child == null || child.getVisibility() == 8 || child == ChatActivity.this.chatActivityEnterView || child == ChatActivity.this.actionBar)) {
                        int height;
                        if (child == ChatActivity.this.chatListView || child == ChatActivity.this.progressView) {
                            int contentWidthSpec = MeasureSpec.makeMeasureSpec(widthSize, NUM);
                            int dp = AndroidUtilities.dp(10.0f);
                            int i2 = heightSize - this.inputFieldHeight;
                            int i3 = (!ChatActivity.this.inPreviewMode || VERSION.SDK_INT < 21) ? 0 : AndroidUtilities.statusBarHeight;
                            child.measure(contentWidthSpec, MeasureSpec.makeMeasureSpec(Math.max(dp, AndroidUtilities.dp((float) ((ChatActivity.this.chatActivityEnterView.isTopViewVisible() ? 48 : 0) + 2)) + (i2 - i3)), NUM));
                        } else if (child == ChatActivity.this.instantCameraView || child == ChatActivity.this.overlayView) {
                            child.measure(MeasureSpec.makeMeasureSpec(widthSize, NUM), MeasureSpec.makeMeasureSpec((allHeight - this.inputFieldHeight) + AndroidUtilities.dp(3.0f), NUM));
                        } else if (child == ChatActivity.this.emptyViewContainer) {
                            child.measure(MeasureSpec.makeMeasureSpec(widthSize, NUM), MeasureSpec.makeMeasureSpec(heightSize, NUM));
                        } else if (ChatActivity.this.chatActivityEnterView.isPopupView(child)) {
                            if (!AndroidUtilities.isInMultiwindow) {
                                height = child.getLayoutParams().height;
                                child.measure(MeasureSpec.makeMeasureSpec(widthSize, NUM), MeasureSpec.makeMeasureSpec(child.getLayoutParams().height, NUM));
                            } else if (AndroidUtilities.isTablet()) {
                                child.measure(MeasureSpec.makeMeasureSpec(widthSize, NUM), MeasureSpec.makeMeasureSpec(Math.min(AndroidUtilities.dp(320.0f), (((heightSize - this.inputFieldHeight) + actionBarHeight) - AndroidUtilities.statusBarHeight) + getPaddingTop()), NUM));
                            } else {
                                child.measure(MeasureSpec.makeMeasureSpec(widthSize, NUM), MeasureSpec.makeMeasureSpec((((heightSize - this.inputFieldHeight) + actionBarHeight) - AndroidUtilities.statusBarHeight) + getPaddingTop(), NUM));
                            }
                        } else if (child == ChatActivity.this.mentionContainer) {
                            FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) ChatActivity.this.mentionContainer.getLayoutParams();
                            if (ChatActivity.this.mentionsAdapter.isBannedInline()) {
                                child.measure(MeasureSpec.makeMeasureSpec(widthSize, NUM), MeasureSpec.makeMeasureSpec(heightSize, Integer.MIN_VALUE));
                            } else {
                                ChatActivity.this.mentionListViewIgnoreLayout = true;
                                int maxHeight;
                                int padding;
                                if (ChatActivity.this.mentionsAdapter.isBotContext() && ChatActivity.this.mentionsAdapter.isMediaLayout()) {
                                    maxHeight = ChatActivity.this.mentionGridLayoutManager.getRowsCount(widthSize) * 102;
                                    if (ChatActivity.this.mentionsAdapter.isBotContext() && ChatActivity.this.mentionsAdapter.getBotContextSwitch() != null) {
                                        maxHeight += 34;
                                    }
                                    height = (heightSize - ChatActivity.this.chatActivityEnterView.getMeasuredHeight()) + (maxHeight != 0 ? AndroidUtilities.dp(2.0f) : 0);
                                    padding = Math.max(0, height - AndroidUtilities.dp(Math.min((float) maxHeight, 122.399994f)));
                                    if (ChatActivity.this.mentionLayoutManager.getReverseLayout()) {
                                        ChatActivity.this.mentionListView.setPadding(0, 0, 0, padding);
                                    } else {
                                        ChatActivity.this.mentionListView.setPadding(0, padding, 0, 0);
                                    }
                                } else {
                                    int size = ChatActivity.this.mentionsAdapter.getItemCount();
                                    maxHeight = 0;
                                    if (ChatActivity.this.mentionsAdapter.isBotContext()) {
                                        if (ChatActivity.this.mentionsAdapter.getBotContextSwitch() != null) {
                                            maxHeight = 0 + 36;
                                            size--;
                                        }
                                        maxHeight += size * 68;
                                    } else {
                                        maxHeight = 0 + (size * 36);
                                    }
                                    height = (heightSize - ChatActivity.this.chatActivityEnterView.getMeasuredHeight()) + (maxHeight != 0 ? AndroidUtilities.dp(2.0f) : 0);
                                    padding = Math.max(0, height - AndroidUtilities.dp(Math.min((float) maxHeight, 122.399994f)));
                                    if (ChatActivity.this.mentionLayoutManager.getReverseLayout()) {
                                        ChatActivity.this.mentionListView.setPadding(0, 0, 0, padding);
                                    } else {
                                        ChatActivity.this.mentionListView.setPadding(0, padding, 0, 0);
                                    }
                                }
                                layoutParams.height = height;
                                layoutParams.topMargin = 0;
                                ChatActivity.this.mentionListViewIgnoreLayout = false;
                                child.measure(MeasureSpec.makeMeasureSpec(widthSize, NUM), MeasureSpec.makeMeasureSpec(layoutParams.height, NUM));
                            }
                        } else {
                            measureChildWithMargins(child, widthMeasureSpec, 0, heightMeasureSpec, 0);
                        }
                    }
                }
                if (ChatActivity.this.fixPaddingsInLayout) {
                    ChatActivity.this.globalIgnoreLayout = true;
                    ChatActivity.this.checkListViewPaddingsInternal();
                    ChatActivity.this.fixPaddingsInLayout = false;
                    ChatActivity.this.chatListView.measure(MeasureSpec.makeMeasureSpec(ChatActivity.this.chatListView.getMeasuredWidth(), NUM), MeasureSpec.makeMeasureSpec(ChatActivity.this.chatListView.getMeasuredHeight(), NUM));
                    ChatActivity.this.globalIgnoreLayout = false;
                }
                if (ChatActivity.this.scrollToPositionOnRecreate != -1) {
                    AndroidUtilities.runOnUIThread(new ChatActivity$7$$Lambda$0(this, ChatActivity.this.scrollToPositionOnRecreate));
                    ChatActivity.this.globalIgnoreLayout = true;
                    ChatActivity.this.scrollToPositionOnRecreate = -1;
                    ChatActivity.this.globalIgnoreLayout = false;
                }
            }

            /* Access modifiers changed, original: final|synthetic */
            public final /* synthetic */ void lambda$onMeasure$0$ChatActivity$7(int scrollTo) {
                ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(scrollTo, ChatActivity.this.scrollToOffsetOnRecreate);
            }

            public void requestLayout() {
                if (!ChatActivity.this.globalIgnoreLayout) {
                    super.requestLayout();
                }
            }

            /* Access modifiers changed, original: protected */
            public void onLayout(boolean changed, int l, int t, int r, int b) {
                int count = getChildCount();
                int paddingBottom = (getKeyboardHeight() > AndroidUtilities.dp(20.0f) || AndroidUtilities.isInMultiwindow) ? 0 : ChatActivity.this.chatActivityEnterView.getEmojiPadding();
                setBottomClip(paddingBottom);
                for (int i = 0; i < count; i++) {
                    View child = getChildAt(i);
                    if (!(child == null || child.getVisibility() == 8)) {
                        int childLeft;
                        int childTop;
                        FrameLayout.LayoutParams lp = (FrameLayout.LayoutParams) child.getLayoutParams();
                        int width = child.getMeasuredWidth();
                        int height = child.getMeasuredHeight();
                        int gravity = lp.gravity;
                        if (gravity == -1) {
                            gravity = 51;
                        }
                        int verticalGravity = gravity & 112;
                        switch ((gravity & 7) & 7) {
                            case 1:
                                childLeft = ((((r - l) - width) / 2) + lp.leftMargin) - lp.rightMargin;
                                break;
                            case 5:
                                childLeft = (r - width) - lp.rightMargin;
                                break;
                            default:
                                childLeft = lp.leftMargin;
                                break;
                        }
                        switch (verticalGravity) {
                            case 16:
                                childTop = (((((b - paddingBottom) - t) - height) / 2) + lp.topMargin) - lp.bottomMargin;
                                break;
                            case 48:
                                childTop = lp.topMargin + getPaddingTop();
                                if (child != ChatActivity.this.actionBar && ChatActivity.this.actionBar.getVisibility() == 0) {
                                    childTop += ChatActivity.this.actionBar.getMeasuredHeight();
                                    if (ChatActivity.this.inPreviewMode && VERSION.SDK_INT >= 21) {
                                        childTop += AndroidUtilities.statusBarHeight;
                                        break;
                                    }
                                }
                            case 80:
                                childTop = (((b - paddingBottom) - t) - height) - lp.bottomMargin;
                                break;
                            default:
                                childTop = lp.topMargin;
                                break;
                        }
                        if (child == ChatActivity.this.mentionContainer) {
                            childTop -= ChatActivity.this.chatActivityEnterView.getMeasuredHeight() - AndroidUtilities.dp(2.0f);
                        } else if (child == ChatActivity.this.pagedownButton) {
                            if (!ChatActivity.this.inPreviewMode) {
                                childTop -= ChatActivity.this.chatActivityEnterView.getMeasuredHeight();
                            }
                        } else if (child == ChatActivity.this.mentiondownButton) {
                            if (!ChatActivity.this.inPreviewMode) {
                                childTop -= ChatActivity.this.chatActivityEnterView.getMeasuredHeight();
                            }
                        } else if (child == ChatActivity.this.emptyViewContainer) {
                            childTop -= (this.inputFieldHeight / 2) - (ChatActivity.this.actionBar.getVisibility() == 0 ? ChatActivity.this.actionBar.getMeasuredHeight() / 2 : 0);
                        } else if (ChatActivity.this.chatActivityEnterView.isPopupView(child)) {
                            if (AndroidUtilities.isInMultiwindow) {
                                childTop = (ChatActivity.this.chatActivityEnterView.getTop() - child.getMeasuredHeight()) + AndroidUtilities.dp(1.0f);
                            } else {
                                childTop = ChatActivity.this.chatActivityEnterView.getBottom();
                            }
                        } else if (child == ChatActivity.this.gifHintTextView || child == ChatActivity.this.voiceHintTextView || child == ChatActivity.this.mediaBanTooltip) {
                            childTop -= this.inputFieldHeight;
                        } else if (child == ChatActivity.this.chatListView || child == ChatActivity.this.progressView) {
                            if (ChatActivity.this.chatActivityEnterView.isTopViewVisible()) {
                                childTop -= AndroidUtilities.dp(48.0f);
                            }
                        } else if (child == ChatActivity.this.actionBar) {
                            if (ChatActivity.this.inPreviewMode && VERSION.SDK_INT >= 21) {
                                childTop += AndroidUtilities.statusBarHeight;
                            }
                            childTop -= getPaddingTop();
                        } else if (child == ChatActivity.this.videoPlayerContainer) {
                            childTop = ChatActivity.this.actionBar.getMeasuredHeight();
                        } else if (child == ChatActivity.this.instantCameraView || child == ChatActivity.this.overlayView) {
                            childTop = 0;
                        }
                        child.layout(childLeft, childTop, childLeft + width, childTop + height);
                    }
                }
                ChatActivity.this.updateMessagesVisiblePart(true);
                ChatActivity.this.updateTextureViewPosition(true);
                ChatActivity.this.checkAutoDownloadMessages(false);
                notifyHeightChanged();
            }
        };
        this.contentView = (SizeNotifierFrameLayout) this.fragmentView;
        this.contentView.setBackgroundImage(Theme.getCachedWallpaper(), Theme.isWallpaperMotion());
        this.emptyViewContainer = new FrameLayout(context);
        this.emptyViewContainer.setVisibility(4);
        this.contentView.addView(this.emptyViewContainer, LayoutHelper.createFrame(-1, -2, 17));
        this.emptyViewContainer.setOnTouchListener(ChatActivity$$Lambda$5.$instance);
        if (this.currentEncryptedChat != null) {
            this.bigEmptyView = new ChatBigEmptyView(context, 0);
            if (this.currentEncryptedChat.admin_id == UserConfig.getInstance(this.currentAccount).getClientUserId()) {
                this.bigEmptyView.setStatusText(LocaleController.formatString("EncryptedPlaceholderTitleOutgoing", NUM, UserObject.getFirstName(this.currentUser)));
            } else {
                this.bigEmptyView.setStatusText(LocaleController.formatString("EncryptedPlaceholderTitleIncoming", NUM, UserObject.getFirstName(this.currentUser)));
            }
            this.emptyViewContainer.addView(this.bigEmptyView, new FrameLayout.LayoutParams(-2, -2, 17));
        } else if ((this.currentUser == null || !this.currentUser.self) && (this.currentChat == null || !this.currentChat.creator)) {
            this.emptyView = new TextView(context);
            if (this.currentUser == null || this.currentUser.id == 777000 || this.currentUser.id == 429000 || this.currentUser.id == 4244000 || !MessagesController.isSupportUser(this.currentUser)) {
                this.emptyView.setText(LocaleController.getString("NoMessages", NUM));
            } else {
                this.emptyView.setText(LocaleController.getString("GotAQuestion", NUM));
            }
            this.emptyView.setTextSize(1, 14.0f);
            this.emptyView.setGravity(17);
            this.emptyView.setTextColor(Theme.getColor("chat_serviceText"));
            this.emptyView.setBackgroundResource(NUM);
            this.emptyView.getBackground().setColorFilter(Theme.colorFilter);
            this.emptyView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            this.emptyView.setPadding(AndroidUtilities.dp(10.0f), AndroidUtilities.dp(2.0f), AndroidUtilities.dp(10.0f), AndroidUtilities.dp(3.0f));
            this.emptyViewContainer.addView(this.emptyView, new FrameLayout.LayoutParams(-2, -2, 17));
        } else {
            this.bigEmptyView = new ChatBigEmptyView(context, this.currentChat != null ? 1 : 2);
            this.emptyViewContainer.addView(this.bigEmptyView, new FrameLayout.LayoutParams(-2, -2, 17));
            if (this.currentChat != null) {
                this.bigEmptyView.setStatusText(AndroidUtilities.replaceTags(LocaleController.getString("GroupEmptyTitle1", NUM)));
            }
        }
        if (this.chatActivityEnterView != null) {
            this.chatActivityEnterView.onDestroy();
            if (this.chatActivityEnterView.isEditingMessage()) {
                oldMessage = null;
            } else {
                oldMessage = this.chatActivityEnterView.getFieldText();
            }
        } else {
            oldMessage = null;
        }
        if (this.mentionsAdapter != null) {
            this.mentionsAdapter.onDestroy();
        }
        this.chatListView = new RecyclerListView(context) {
            ArrayList<ChatMessageCell> drawCaptionAfter = new ArrayList();
            ArrayList<ChatMessageCell> drawNamesAfter = new ArrayList();
            ArrayList<ChatMessageCell> drawTimeAfter = new ArrayList();
            private float endedTrackingX;
            private long lastReplyButtonAnimationTime;
            private long lastTrackingAnimationTime;
            private int lastWidth;
            private boolean maybeStartTracking;
            private float replyButtonProgress;
            private boolean slideAnimationInProgress;
            private ChatMessageCell slidingView;
            private boolean startedTracking;
            private int startedTrackingPointerId;
            private int startedTrackingX;
            private int startedTrackingY;
            private float trackAnimationProgress;
            private boolean wasTrackingVibrate;

            /* Access modifiers changed, original: protected */
            public void onLayout(boolean changed, int l, int t, int r, int b) {
                super.onLayout(changed, l, t, r, b);
                if (this.lastWidth != r - l) {
                    this.lastWidth = r - l;
                    if (ChatActivity.this.noSoundHintView != null) {
                        ChatActivity.this.noSoundHintView.hide();
                    }
                    if (ChatActivity.this.forwardHintView != null) {
                        ChatActivity.this.forwardHintView.hide();
                    }
                }
                ChatActivity.this.forceScrollToTop = false;
                if (ChatActivity.this.chatAdapter.isBot) {
                    int childCount = getChildCount();
                    for (int a = 0; a < childCount; a++) {
                        View child = getChildAt(a);
                        if (child instanceof BotHelpCell) {
                            int top = ((b - t) / 2) - (child.getMeasuredHeight() / 2);
                            if (child.getTop() > top) {
                                child.layout(0, top, r - l, child.getMeasuredHeight() + top);
                                return;
                            }
                            return;
                        }
                    }
                }
            }

            private void setGroupTranslationX(ChatMessageCell view, float dx) {
                GroupedMessages group = view.getCurrentMessagesGroup();
                if (group != null) {
                    int count = getChildCount();
                    for (int a = 0; a < count; a++) {
                        View child = getChildAt(a);
                        if (child != this && (child instanceof ChatMessageCell)) {
                            ChatMessageCell cell = (ChatMessageCell) child;
                            if (cell.getCurrentMessagesGroup() == group) {
                                cell.setTranslationX(dx);
                                cell.invalidate();
                            }
                        }
                    }
                    invalidate();
                }
            }

            public boolean onInterceptTouchEvent(MotionEvent e) {
                boolean result = super.onInterceptTouchEvent(e);
                if (!ChatActivity.this.actionBar.isActionModeShowed()) {
                    processTouchEvent(e);
                }
                return result;
            }

            private void drawReplyButton(Canvas canvas) {
                if (this.slidingView != null) {
                    float scale;
                    int alpha;
                    float translationX = this.slidingView.getTranslationX();
                    long newTime = System.currentTimeMillis();
                    long dt = Math.min(17, newTime - this.lastReplyButtonAnimationTime);
                    this.lastReplyButtonAnimationTime = newTime;
                    boolean showing = translationX <= ((float) (-AndroidUtilities.dp(50.0f)));
                    if (showing) {
                        if (this.replyButtonProgress < 1.0f) {
                            this.replyButtonProgress += ((float) dt) / 180.0f;
                            if (this.replyButtonProgress > 1.0f) {
                                this.replyButtonProgress = 1.0f;
                            } else {
                                invalidate();
                            }
                        }
                    } else if (this.replyButtonProgress > 0.0f) {
                        this.replyButtonProgress -= ((float) dt) / 180.0f;
                        if (this.replyButtonProgress < 0.0f) {
                            this.replyButtonProgress = 0.0f;
                        } else {
                            invalidate();
                        }
                    }
                    if (showing) {
                        if (this.replyButtonProgress <= 0.8f) {
                            scale = 1.2f * (this.replyButtonProgress / 0.8f);
                        } else {
                            scale = 1.2f - (0.2f * ((this.replyButtonProgress - 0.8f) / 0.2f));
                        }
                        alpha = (int) Math.min(255.0f, 255.0f * (this.replyButtonProgress / 0.8f));
                    } else {
                        scale = this.replyButtonProgress;
                        alpha = (int) Math.min(255.0f, 255.0f * this.replyButtonProgress);
                    }
                    Theme.chat_shareDrawable.setAlpha(alpha);
                    Theme.chat_replyIconDrawable.setAlpha(alpha);
                    float x = ((float) getMeasuredWidth()) + (this.slidingView.getTranslationX() / 2.0f);
                    float y = (float) (this.slidingView.getTop() + (this.slidingView.getMeasuredHeight() / 2));
                    if (!Theme.isCustomTheme() || Theme.hasThemeKey("chat_shareBackground")) {
                        Theme.chat_shareDrawable.setColorFilter(Theme.getShareColorFilter(Theme.getColor("chat_shareBackground"), false));
                    } else {
                        Theme.chat_shareDrawable.setColorFilter(Theme.colorFilter2);
                    }
                    Theme.chat_shareDrawable.setBounds((int) (x - (((float) AndroidUtilities.dp(14.0f)) * scale)), (int) (y - (((float) AndroidUtilities.dp(14.0f)) * scale)), (int) ((((float) AndroidUtilities.dp(14.0f)) * scale) + x), (int) ((((float) AndroidUtilities.dp(14.0f)) * scale) + y));
                    Theme.chat_shareDrawable.draw(canvas);
                    Theme.chat_replyIconDrawable.setBounds((int) (x - (((float) AndroidUtilities.dp(7.0f)) * scale)), (int) (y - (((float) AndroidUtilities.dp(6.0f)) * scale)), (int) ((((float) AndroidUtilities.dp(7.0f)) * scale) + x), (int) ((((float) AndroidUtilities.dp(5.0f)) * scale) + y));
                    Theme.chat_replyIconDrawable.draw(canvas);
                    Theme.chat_shareDrawable.setAlpha(255);
                    Theme.chat_replyIconDrawable.setAlpha(255);
                }
            }

            private void processTouchEvent(MotionEvent e) {
                ChatActivity.this.wasManualScroll = true;
                if (e.getAction() == 0 && !this.startedTracking && !this.maybeStartTracking) {
                    View view = getPressedChildView();
                    if (view instanceof ChatMessageCell) {
                        this.slidingView = (ChatMessageCell) view;
                        MessageObject message = this.slidingView.getMessageObject();
                        if ((ChatActivity.this.currentEncryptedChat == null || AndroidUtilities.getPeerLayerVersion(ChatActivity.this.currentEncryptedChat.layer) >= 46) && (!(ChatActivity.this.getMessageType(message) == 1 && (message.getDialogId() == ChatActivity.this.mergeDialogId || message.needDrawBluredPreview())) && ((ChatActivity.this.currentEncryptedChat != null || message.getId() >= 0) && ((ChatActivity.this.bottomOverlayChat == null || ChatActivity.this.bottomOverlayChat.getVisibility() != 0) && !ChatActivity.this.isBroadcast && (ChatActivity.this.currentChat == null || (!ChatObject.isNotInChat(ChatActivity.this.currentChat) && ((!ChatObject.isChannel(ChatActivity.this.currentChat) || ChatObject.canPost(ChatActivity.this.currentChat) || ChatActivity.this.currentChat.megagroup) && ChatObject.canSendMessages(ChatActivity.this.currentChat)))))))) {
                            this.startedTrackingPointerId = e.getPointerId(0);
                            this.maybeStartTracking = true;
                            this.startedTrackingX = (int) e.getX();
                            this.startedTrackingY = (int) e.getY();
                            return;
                        }
                        this.slidingView = null;
                    }
                } else if (this.slidingView != null && e.getAction() == 2 && e.getPointerId(0) == this.startedTrackingPointerId) {
                    int dx = Math.max(AndroidUtilities.dp(-80.0f), Math.min(0, (int) (e.getX() - ((float) this.startedTrackingX))));
                    int dy = Math.abs(((int) e.getY()) - this.startedTrackingY);
                    if (getScrollState() == 0 && this.maybeStartTracking && !this.startedTracking && ((float) dx) <= (-AndroidUtilities.getPixelsInCM(0.4f, true)) && Math.abs(dx) / 3 > dy) {
                        MotionEvent event = MotionEvent.obtain(0, 0, 3, 0.0f, 0.0f, 0);
                        this.slidingView.onTouchEvent(event);
                        super.onInterceptTouchEvent(event);
                        event.recycle();
                        ChatActivity.this.chatLayoutManager.setCanScrollVertically(false);
                        this.maybeStartTracking = false;
                        this.startedTracking = true;
                        this.startedTrackingX = (int) e.getX();
                        if (getParent() != null) {
                            getParent().requestDisallowInterceptTouchEvent(true);
                        }
                    } else if (this.startedTracking) {
                        if (Math.abs(dx) < AndroidUtilities.dp(50.0f)) {
                            this.wasTrackingVibrate = false;
                        } else if (!this.wasTrackingVibrate) {
                            try {
                                performHapticFeedback(3, 2);
                            } catch (Exception e2) {
                            }
                            this.wasTrackingVibrate = true;
                        }
                        this.slidingView.setTranslationX((float) dx);
                        MessageObject messageObject = this.slidingView.getMessageObject();
                        if (messageObject.isRoundVideo() || messageObject.isVideo()) {
                            ChatActivity.this.updateTextureViewPosition(false);
                        }
                        setGroupTranslationX(this.slidingView, (float) dx);
                        invalidate();
                    }
                } else if (this.slidingView != null && e.getPointerId(0) == this.startedTrackingPointerId) {
                    if (e.getAction() == 3 || e.getAction() == 1 || e.getAction() == 6) {
                        if (Math.abs(this.slidingView.getTranslationX()) >= ((float) AndroidUtilities.dp(50.0f))) {
                            ChatActivity.this.showFieldPanelForReply(true, this.slidingView.getMessageObject());
                        }
                        this.endedTrackingX = this.slidingView.getTranslationX();
                        this.lastTrackingAnimationTime = System.currentTimeMillis();
                        this.trackAnimationProgress = 0.0f;
                        invalidate();
                        this.maybeStartTracking = false;
                        this.startedTracking = false;
                        ChatActivity.this.chatLayoutManager.setCanScrollVertically(true);
                    }
                }
            }

            public boolean onTouchEvent(MotionEvent e) {
                boolean result = super.onTouchEvent(e);
                if (ChatActivity.this.actionBar.isActionModeShowed()) {
                    return result;
                }
                processTouchEvent(e);
                boolean z = this.startedTracking || result;
                return z;
            }

            public void requestDisallowInterceptTouchEvent(boolean disallowIntercept) {
                super.requestDisallowInterceptTouchEvent(disallowIntercept);
                if (this.slidingView != null) {
                    this.endedTrackingX = this.slidingView.getTranslationX();
                    this.lastTrackingAnimationTime = System.currentTimeMillis();
                    this.trackAnimationProgress = 0.0f;
                    invalidate();
                    this.maybeStartTracking = false;
                    this.startedTracking = false;
                    ChatActivity.this.chatLayoutManager.setCanScrollVertically(true);
                }
            }

            /* Access modifiers changed, original: protected */
            public void onChildPressed(View child, boolean pressed) {
                super.onChildPressed(child, pressed);
                if (child instanceof ChatMessageCell) {
                    GroupedMessages groupedMessages = ((ChatMessageCell) child).getCurrentMessagesGroup();
                    if (groupedMessages != null) {
                        int count = getChildCount();
                        for (int a = 0; a < count; a++) {
                            View item = getChildAt(a);
                            if (item != child && (item instanceof ChatMessageCell)) {
                                ChatMessageCell cell = (ChatMessageCell) item;
                                if (((ChatMessageCell) item).getCurrentMessagesGroup() == groupedMessages) {
                                    cell.setPressed(pressed);
                                }
                            }
                        }
                    }
                }
            }

            public void onDraw(Canvas c) {
                super.onDraw(c);
                if (this.slidingView != null) {
                    float translationX = this.slidingView.getTranslationX();
                    if (!(this.maybeStartTracking || this.startedTracking || this.endedTrackingX == 0.0f || translationX == 0.0f)) {
                        long newTime = System.currentTimeMillis();
                        this.trackAnimationProgress += ((float) (newTime - this.lastTrackingAnimationTime)) / 180.0f;
                        if (this.trackAnimationProgress > 1.0f) {
                            this.trackAnimationProgress = 1.0f;
                        }
                        this.lastTrackingAnimationTime = newTime;
                        translationX = this.endedTrackingX * (1.0f - AndroidUtilities.decelerateInterpolator.getInterpolation(this.trackAnimationProgress));
                        if (translationX == 0.0f) {
                            this.endedTrackingX = 0.0f;
                        }
                        setGroupTranslationX(this.slidingView, translationX);
                        this.slidingView.setTranslationX(translationX);
                        MessageObject messageObject = this.slidingView.getMessageObject();
                        if (messageObject.isRoundVideo() || messageObject.isVideo()) {
                            ChatActivity.this.updateTextureViewPosition(false);
                        }
                        invalidate();
                    }
                    drawReplyButton(c);
                }
            }

            /* Access modifiers changed, original: protected */
            public void dispatchDraw(Canvas canvas) {
                ChatActivity.this.drawLaterRoundProgressCell = null;
                super.dispatchDraw(canvas);
            }

            public boolean drawChild(Canvas canvas, View child, long drawingTime) {
                ChatMessageCell cell;
                GroupedMessagePosition position;
                int a;
                int size;
                int clipLeft = 0;
                int clipBottom = 0;
                if (child instanceof ChatMessageCell) {
                    cell = (ChatMessageCell) child;
                    position = cell.getCurrentPosition();
                    GroupedMessages group = cell.getCurrentMessagesGroup();
                    if (position != null) {
                        if (position.pw != position.spanSize && position.spanSize == 1000 && position.siblingHeights == null && group.hasSibling) {
                            clipLeft = cell.getBackgroundDrawableLeft();
                        } else if (position.siblingHeights != null) {
                            clipBottom = child.getBottom() - AndroidUtilities.dp((float) ((cell.isPinnedBottom() ? 1 : 0) + 1));
                        }
                    }
                    if (cell.needDelayRoundProgressDraw()) {
                        ChatActivity.this.drawLaterRoundProgressCell = cell;
                    }
                }
                if (clipLeft != 0) {
                    canvas.save();
                    canvas.clipRect(((float) clipLeft) + child.getTranslationX(), (float) child.getTop(), ((float) child.getRight()) + child.getTranslationX(), (float) child.getBottom());
                } else if (clipBottom != 0) {
                    canvas.save();
                    canvas.clipRect(((float) child.getLeft()) + child.getTranslationX(), (float) child.getTop(), ((float) child.getRight()) + child.getTranslationX(), (float) clipBottom);
                }
                boolean result = super.drawChild(canvas, child, drawingTime);
                if (!(clipLeft == 0 && clipBottom == 0)) {
                    canvas.restore();
                }
                int num = 0;
                int count = getChildCount();
                for (a = 0; a < count; a++) {
                    if (getChildAt(a) == child) {
                        num = a;
                        break;
                    }
                }
                if (num == count - 1) {
                    size = this.drawTimeAfter.size();
                    if (size > 0) {
                        for (a = 0; a < size; a++) {
                            cell = (ChatMessageCell) this.drawTimeAfter.get(a);
                            canvas.save();
                            canvas.translate(((float) cell.getLeft()) + cell.getTranslationX(), (float) cell.getTop());
                            cell.drawTime(canvas);
                            canvas.restore();
                        }
                        this.drawTimeAfter.clear();
                    }
                    size = this.drawNamesAfter.size();
                    if (size > 0) {
                        for (a = 0; a < size; a++) {
                            cell = (ChatMessageCell) this.drawNamesAfter.get(a);
                            canvas.save();
                            canvas.translate(((float) cell.getLeft()) + cell.getTranslationX(), (float) cell.getTop());
                            cell.drawNamesLayout(canvas);
                            canvas.restore();
                        }
                        this.drawNamesAfter.clear();
                    }
                    size = this.drawCaptionAfter.size();
                    if (size > 0) {
                        for (a = 0; a < size; a++) {
                            cell = (ChatMessageCell) this.drawCaptionAfter.get(a);
                            if (cell.getCurrentPosition() != null) {
                                canvas.save();
                                canvas.translate(((float) cell.getLeft()) + cell.getTranslationX(), (float) cell.getTop());
                                cell.drawCaptionLayout(canvas, (cell.getCurrentPosition().flags & 1) == 0);
                                canvas.restore();
                            }
                        }
                        this.drawCaptionAfter.clear();
                    }
                }
                if (child instanceof ChatMessageCell) {
                    ImageReceiver imageReceiver;
                    ChatMessageCell chatMessageCell = (ChatMessageCell) child;
                    position = chatMessageCell.getCurrentPosition();
                    if (position != null) {
                        if (position.last || (position.minX == (byte) 0 && position.minY == (byte) 0)) {
                            if (num == count - 1) {
                                canvas.save();
                                canvas.translate(((float) chatMessageCell.getLeft()) + chatMessageCell.getTranslationX(), (float) chatMessageCell.getTop());
                                if (position.last) {
                                    chatMessageCell.drawTime(canvas);
                                }
                                if (position.minX == (byte) 0 && position.minY == (byte) 0) {
                                    chatMessageCell.drawNamesLayout(canvas);
                                }
                                canvas.restore();
                            } else {
                                if (position.last) {
                                    this.drawTimeAfter.add(chatMessageCell);
                                }
                                if (position.minX == (byte) 0 && position.minY == (byte) 0 && chatMessageCell.hasNameLayout()) {
                                    this.drawNamesAfter.add(chatMessageCell);
                                }
                            }
                        }
                        if (num == count - 1) {
                            canvas.save();
                            canvas.translate(((float) chatMessageCell.getLeft()) + chatMessageCell.getTranslationX(), (float) chatMessageCell.getTop());
                            if (chatMessageCell.hasCaptionLayout() && (position.flags & 8) != 0) {
                                chatMessageCell.drawCaptionLayout(canvas, (position.flags & 1) == 0);
                            }
                            canvas.restore();
                        } else if (chatMessageCell.hasCaptionLayout() && (position.flags & 8) != 0) {
                            this.drawCaptionAfter.add(chatMessageCell);
                        }
                    }
                    MessageObject message = chatMessageCell.getMessageObject();
                    if (ChatActivity.this.videoPlayerContainer != null && ((message.isRoundVideo() || message.isVideo()) && MediaController.getInstance().isPlayingMessage(message))) {
                        imageReceiver = chatMessageCell.getPhotoImage();
                        float newX = ((float) imageReceiver.getImageX()) + chatMessageCell.getX();
                        float newY = (float) ((ChatActivity.this.inPreviewMode ? AndroidUtilities.statusBarHeight : 0) + (((ChatActivity.this.fragmentView.getPaddingTop() + chatMessageCell.getTop()) + imageReceiver.getImageY()) - (ChatActivity.this.chatActivityEnterView.isTopViewVisible() ? AndroidUtilities.dp(48.0f) : 0)));
                        if (!(ChatActivity.this.videoPlayerContainer.getTranslationX() == newX && ChatActivity.this.videoPlayerContainer.getTranslationY() == newY)) {
                            ChatActivity.this.videoPlayerContainer.setTranslationX(newX);
                            ChatActivity.this.videoPlayerContainer.setTranslationY(newY);
                            ChatActivity.this.fragmentView.invalidate();
                            ChatActivity.this.videoPlayerContainer.invalidate();
                        }
                    }
                    imageReceiver = chatMessageCell.getAvatarImage();
                    if (imageReceiver != null) {
                        ViewHolder holder;
                        int p;
                        int idx;
                        GroupedMessages groupedMessages = ChatActivity.this.getValidGroupedMessage(message);
                        int top = child.getTop();
                        if (chatMessageCell.isPinnedBottom()) {
                            holder = ChatActivity.this.chatListView.getChildViewHolder(child);
                            if (holder != null) {
                                int nextPosition;
                                p = holder.getAdapterPosition();
                                if (groupedMessages == null || position == null) {
                                    nextPosition = p - 1;
                                } else {
                                    idx = groupedMessages.posArray.indexOf(position);
                                    size = groupedMessages.posArray.size();
                                    if ((position.flags & 8) != 0) {
                                        nextPosition = (p - size) + idx;
                                    } else {
                                        nextPosition = p - 1;
                                        a = idx + 1;
                                        while (a < size && ((GroupedMessagePosition) groupedMessages.posArray.get(a)).minY <= position.maxY) {
                                            nextPosition--;
                                            a++;
                                        }
                                    }
                                }
                                if (ChatActivity.this.chatListView.findViewHolderForAdapterPosition(nextPosition) != null) {
                                    imageReceiver.setImageY(-AndroidUtilities.dp(1000.0f));
                                    imageReceiver.draw(canvas);
                                }
                            }
                        }
                        float tx = chatMessageCell.getTranslationX();
                        int y = child.getTop() + chatMessageCell.getLayoutHeight();
                        int maxY = ChatActivity.this.chatListView.getMeasuredHeight() - ChatActivity.this.chatListView.getPaddingBottom();
                        if (y > maxY) {
                            y = maxY;
                        }
                        if (chatMessageCell.isPinnedTop()) {
                            holder = ChatActivity.this.chatListView.getChildViewHolder(child);
                            if (holder != null) {
                                int tries = 0;
                                while (tries < 20) {
                                    int prevPosition;
                                    tries++;
                                    p = holder.getAdapterPosition();
                                    if (groupedMessages != null && position != null) {
                                        idx = groupedMessages.posArray.indexOf(position);
                                        if (idx < 0) {
                                            break;
                                        }
                                        size = groupedMessages.posArray.size();
                                        if ((position.flags & 4) != 0) {
                                            prevPosition = (p + idx) + 1;
                                        } else {
                                            prevPosition = p + 1;
                                            a = idx - 1;
                                            while (a >= 0 && ((GroupedMessagePosition) groupedMessages.posArray.get(a)).maxY >= position.minY) {
                                                prevPosition++;
                                                a--;
                                            }
                                        }
                                    } else {
                                        prevPosition = p + 1;
                                    }
                                    holder = ChatActivity.this.chatListView.findViewHolderForAdapterPosition(prevPosition);
                                    if (holder == null) {
                                        break;
                                    }
                                    top = holder.itemView.getTop();
                                    if (y - AndroidUtilities.dp(48.0f) < holder.itemView.getBottom()) {
                                        tx = Math.min(holder.itemView.getTranslationX(), tx);
                                    }
                                    if (holder.itemView instanceof ChatMessageCell) {
                                        if (!((ChatMessageCell) holder.itemView).isPinnedTop()) {
                                            break;
                                        }
                                    }
                                    break;
                                }
                            }
                        }
                        if (y - AndroidUtilities.dp(48.0f) < top) {
                            y = top + AndroidUtilities.dp(48.0f);
                        }
                        if (tx != 0.0f) {
                            canvas.save();
                            canvas.translate(tx, 0.0f);
                        }
                        imageReceiver.setImageY(y - AndroidUtilities.dp(44.0f));
                        imageReceiver.draw(canvas);
                        if (tx != 0.0f) {
                            canvas.restore();
                        }
                    }
                }
                return result;
            }

            public void onInitializeAccessibilityNodeInfo(AccessibilityNodeInfo info) {
                if (ChatActivity.this.currentEncryptedChat == null) {
                    super.onInitializeAccessibilityNodeInfo(info);
                    if (VERSION.SDK_INT >= 19) {
                        CollectionInfo collection = info.getCollectionInfo();
                        if (collection != null) {
                            info.setCollectionInfo(CollectionInfo.obtain(collection.getRowCount(), 1, false));
                        }
                    }
                }
            }

            public AccessibilityNodeInfo createAccessibilityNodeInfo() {
                if (ChatActivity.this.currentEncryptedChat != null) {
                    return null;
                }
                return super.createAccessibilityNodeInfo();
            }
        };
        if (this.currentEncryptedChat != null && VERSION.SDK_INT >= 19) {
            this.chatListView.setImportantForAccessibility(4);
        }
        this.chatListView.setTag(Integer.valueOf(1));
        this.chatListView.setVerticalScrollBarEnabled(true);
        RecyclerListView recyclerListView = this.chatListView;
        ChatActivityAdapter chatActivityAdapter = new ChatActivityAdapter(context);
        this.chatAdapter = chatActivityAdapter;
        recyclerListView.setAdapter(chatActivityAdapter);
        this.chatListView.setClipToPadding(false);
        this.chatListView.setPadding(0, AndroidUtilities.dp(4.0f), 0, AndroidUtilities.dp(3.0f));
        this.chatListView.setItemAnimator(null);
        this.chatListView.setLayoutAnimation(null);
        this.chatLayoutManager = new GridLayoutManagerFixed(context, 1000, 1, true) {
            public boolean supportsPredictiveItemAnimations() {
                return false;
            }

            public void smoothScrollToPosition(RecyclerView recyclerView, State state, int position) {
                LinearSmoothScrollerMiddle linearSmoothScroller = new LinearSmoothScrollerMiddle(recyclerView.getContext());
                linearSmoothScroller.setTargetPosition(position);
                startSmoothScroll(linearSmoothScroller);
            }

            public boolean shouldLayoutChildFromOpositeSide(View child) {
                if (!(child instanceof ChatMessageCell) || ((ChatMessageCell) child).getMessageObject().isOutOwner()) {
                    return false;
                }
                return true;
            }

            /* Access modifiers changed, original: protected */
            public boolean hasSiblingChild(int position) {
                if (position < ChatActivity.this.chatAdapter.messagesStartRow || position >= ChatActivity.this.chatAdapter.messagesEndRow) {
                    return false;
                }
                int index = position - ChatActivity.this.chatAdapter.messagesStartRow;
                if (index < 0 || index >= ChatActivity.this.messages.size()) {
                    return false;
                }
                MessageObject message = (MessageObject) ChatActivity.this.messages.get(index);
                GroupedMessages group = ChatActivity.this.getValidGroupedMessage(message);
                if (group == null) {
                    return false;
                }
                GroupedMessagePosition pos = (GroupedMessagePosition) group.positions.get(message);
                if (pos.minX == pos.maxX || pos.minY != pos.maxY || pos.minY == (byte) 0) {
                    return false;
                }
                int count = group.posArray.size();
                for (int a = 0; a < count; a++) {
                    GroupedMessagePosition p = (GroupedMessagePosition) group.posArray.get(a);
                    if (p != pos && p.minY <= pos.minY && p.maxY >= pos.minY) {
                        return true;
                    }
                }
                return false;
            }
        };
        this.chatLayoutManager.setSpanSizeLookup(new SpanSizeLookup() {
            public int getSpanSize(int position) {
                if (position >= ChatActivity.this.chatAdapter.messagesStartRow && position < ChatActivity.this.chatAdapter.messagesEndRow) {
                    int idx = position - ChatActivity.this.chatAdapter.messagesStartRow;
                    if (idx >= 0 && idx < ChatActivity.this.messages.size()) {
                        MessageObject message = (MessageObject) ChatActivity.this.messages.get(idx);
                        GroupedMessages groupedMessages = ChatActivity.this.getValidGroupedMessage(message);
                        if (groupedMessages != null) {
                            return ((GroupedMessagePosition) groupedMessages.positions.get(message)).spanSize;
                        }
                    }
                }
                return 1000;
            }
        });
        this.chatListView.setLayoutManager(this.chatLayoutManager);
        this.chatListView.addItemDecoration(new ItemDecoration() {
            public void getItemOffsets(Rect outRect, View view, RecyclerView parent, State state) {
                outRect.bottom = 0;
                if (view instanceof ChatMessageCell) {
                    ChatMessageCell cell = (ChatMessageCell) view;
                    GroupedMessages group = cell.getCurrentMessagesGroup();
                    if (group != null) {
                        GroupedMessagePosition position = cell.getCurrentPosition();
                        if (position != null && position.siblingHeights != null) {
                            int a;
                            float maxHeight = ((float) Math.max(AndroidUtilities.displaySize.x, AndroidUtilities.displaySize.y)) * 0.5f;
                            int h = cell.getCaptionHeight();
                            for (float f : position.siblingHeights) {
                                h += (int) Math.ceil((double) (f * maxHeight));
                            }
                            h += (position.maxY - position.minY) * AndroidUtilities.dp2(7.0f);
                            int count = group.posArray.size();
                            for (a = 0; a < count; a++) {
                                GroupedMessagePosition pos = (GroupedMessagePosition) group.posArray.get(a);
                                if (pos.minY == position.minY && ((pos.minX != position.minX || pos.maxX != position.maxX || pos.minY != position.minY || pos.maxY != position.maxY) && pos.minY == position.minY)) {
                                    h -= ((int) Math.ceil((double) (pos.ph * maxHeight))) - AndroidUtilities.dp(4.0f);
                                    break;
                                }
                            }
                            outRect.bottom = -h;
                        }
                    }
                }
            }
        });
        this.contentView.addView(this.chatListView, LayoutHelper.createFrame(-1, -1.0f));
        this.chatListView.setOnItemLongClickListener(this.onItemLongClickListener);
        this.chatListView.setOnItemClickListener(this.onItemClickListener);
        this.chatListView.setOnScrollListener(new OnScrollListener() {
            private boolean scrollUp;
            private final int scrollValue = AndroidUtilities.dp(100.0f);
            private float totalDy = 0.0f;

            public void onScrollStateChanged(RecyclerView recyclerView, int newState) {
                if (newState == 2) {
                    ChatActivity.this.wasManualScroll = true;
                    ChatActivity.this.scrollingChatListView = true;
                } else if (newState == 1) {
                    ChatActivity.this.wasManualScroll = true;
                    ChatActivity.this.scrollingFloatingDate = true;
                    ChatActivity.this.checkTextureViewPosition = true;
                    ChatActivity.this.scrollingChatListView = true;
                } else if (newState == 0) {
                    ChatActivity.this.scrollingFloatingDate = false;
                    ChatActivity.this.scrollingChatListView = false;
                    ChatActivity.this.checkTextureViewPosition = false;
                    ChatActivity.this.hideFloatingDateView(true);
                    ChatActivity.this.checkAutoDownloadMessages(this.scrollUp);
                }
            }

            public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
                boolean z;
                ChatActivity.this.chatListView.invalidate();
                if (dy < 0) {
                    z = true;
                } else {
                    z = false;
                }
                this.scrollUp = z;
                if (!(ChatActivity.this.wasManualScroll || dy == 0)) {
                    ChatActivity.this.wasManualScroll = true;
                }
                if (dy != 0) {
                    if (ChatActivity.this.noSoundHintView != null) {
                        ChatActivity.this.noSoundHintView.hide();
                    }
                    if (ChatActivity.this.forwardHintView != null) {
                        ChatActivity.this.forwardHintView.hide();
                    }
                }
                if (!(dy == 0 || !ChatActivity.this.scrollingFloatingDate || ChatActivity.this.currentFloatingTopIsNotMessage)) {
                    if (ChatActivity.this.highlightMessageId != Integer.MAX_VALUE) {
                        ChatActivity.this.highlightMessageId = Integer.MAX_VALUE;
                        ChatActivity.this.updateVisibleRows();
                    }
                    if (ChatActivity.this.floatingDateView.getTag() == null) {
                        if (ChatActivity.this.floatingDateAnimation != null) {
                            ChatActivity.this.floatingDateAnimation.cancel();
                        }
                        ChatActivity.this.floatingDateView.setTag(Integer.valueOf(1));
                        ChatActivity.this.floatingDateAnimation = new AnimatorSet();
                        ChatActivity.this.floatingDateAnimation.setDuration(150);
                        AnimatorSet access$14700 = ChatActivity.this.floatingDateAnimation;
                        Animator[] animatorArr = new Animator[1];
                        animatorArr[0] = ObjectAnimator.ofFloat(ChatActivity.this.floatingDateView, "alpha", new float[]{1.0f});
                        access$14700.playTogether(animatorArr);
                        ChatActivity.this.floatingDateAnimation.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animation) {
                                if (animation.equals(ChatActivity.this.floatingDateAnimation)) {
                                    ChatActivity.this.floatingDateAnimation = null;
                                }
                            }
                        });
                        ChatActivity.this.floatingDateAnimation.start();
                    }
                }
                ChatActivity.this.checkScrollForLoad(true);
                int firstVisibleItem = ChatActivity.this.chatLayoutManager.findFirstVisibleItemPosition();
                if (firstVisibleItem != -1) {
                    int totalItemCount = ChatActivity.this.chatAdapter.getItemCount();
                    if (firstVisibleItem == 0 && ChatActivity.this.forwardEndReached[0]) {
                        ChatActivity.this.showPagedownButton(false, true);
                    } else if (dy > 0) {
                        if (ChatActivity.this.pagedownButton.getTag() == null) {
                            this.totalDy += (float) dy;
                            if (this.totalDy > ((float) this.scrollValue)) {
                                this.totalDy = 0.0f;
                                ChatActivity.this.showPagedownButton(true, true);
                                ChatActivity.this.pagedownButtonShowedByScroll = true;
                            }
                        }
                    } else if (ChatActivity.this.pagedownButtonShowedByScroll && ChatActivity.this.pagedownButton.getTag() != null) {
                        this.totalDy += (float) dy;
                        if (this.totalDy < ((float) (-this.scrollValue))) {
                            ChatActivity.this.showPagedownButton(false, true);
                            this.totalDy = 0.0f;
                        }
                    }
                }
                ChatActivity.this.updateMessagesVisiblePart(true);
            }
        });
        this.progressView = new FrameLayout(context);
        this.progressView.setVisibility(4);
        this.contentView.addView(this.progressView, LayoutHelper.createFrame(-1, -1, 51));
        this.progressView2 = new View(context);
        this.progressView2.setBackgroundResource(NUM);
        this.progressView2.getBackground().setColorFilter(Theme.colorFilter);
        this.progressView.addView(this.progressView2, LayoutHelper.createFrame(36, 36, 17));
        this.progressBar = new RadialProgressView(context);
        this.progressBar.setSize(AndroidUtilities.dp(28.0f));
        this.progressBar.setProgressColor(Theme.getColor("chat_serviceText"));
        this.progressView.addView(this.progressBar, LayoutHelper.createFrame(32, 32, 17));
        this.floatingDateView = new ChatActionCell(context) {
            public boolean onInterceptTouchEvent(MotionEvent ev) {
                if (getAlpha() == 0.0f) {
                    return false;
                }
                return super.onInterceptTouchEvent(ev);
            }

            public boolean onTouchEvent(MotionEvent event) {
                if (getAlpha() == 0.0f) {
                    return false;
                }
                return super.onTouchEvent(event);
            }
        };
        this.floatingDateView.setAlpha(0.0f);
        this.contentView.addView(this.floatingDateView, LayoutHelper.createFrame(-2, -2.0f, 49, 0.0f, 4.0f, 0.0f, 0.0f));
        this.floatingDateView.setOnClickListener(new ChatActivity$$Lambda$6(this));
        if (this.currentEncryptedChat == null) {
            this.pinnedMessageView = new FrameLayout(context);
            this.pinnedMessageView.setTag(Integer.valueOf(1));
            this.pinnedMessageView.setTranslationY((float) (-AndroidUtilities.dp(50.0f)));
            this.pinnedMessageView.setVisibility(8);
            this.pinnedMessageView.setBackgroundResource(NUM);
            this.pinnedMessageView.getBackground().setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_topPanelBackground"), Mode.MULTIPLY));
            this.contentView.addView(this.pinnedMessageView, LayoutHelper.createFrame(-1, 50, 51));
            this.pinnedMessageView.setOnClickListener(new ChatActivity$$Lambda$7(this));
            this.pinnedLineView = new View(context);
            this.pinnedLineView.setBackgroundColor(Theme.getColor("chat_topPanelLine"));
            this.pinnedMessageView.addView(this.pinnedLineView, LayoutHelper.createFrame(2, 32.0f, 51, 8.0f, 8.0f, 0.0f, 0.0f));
            this.pinnedMessageImageView = new BackupImageView(context);
            this.pinnedMessageView.addView(this.pinnedMessageImageView, LayoutHelper.createFrame(32, 32.0f, 51, 17.0f, 8.0f, 0.0f, 0.0f));
            this.pinnedMessageNameTextView = new SimpleTextView(context);
            this.pinnedMessageNameTextView.setTextSize(14);
            this.pinnedMessageNameTextView.setTextColor(Theme.getColor("chat_topPanelTitle"));
            this.pinnedMessageNameTextView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
            this.pinnedMessageView.addView(this.pinnedMessageNameTextView, LayoutHelper.createFrame(-1, (float) AndroidUtilities.dp(18.0f), 51, 18.0f, 7.3f, 40.0f, 0.0f));
            this.pinnedMessageTextView = new SimpleTextView(context);
            this.pinnedMessageTextView.setTextSize(14);
            this.pinnedMessageTextView.setTextColor(Theme.getColor("chat_topPanelMessage"));
            this.pinnedMessageView.addView(this.pinnedMessageTextView, LayoutHelper.createFrame(-1, (float) AndroidUtilities.dp(18.0f), 51, 18.0f, 25.3f, 40.0f, 0.0f));
            this.closePinned = new ImageView(context);
            this.closePinned.setImageResource(NUM);
            this.closePinned.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_topPanelClose"), Mode.MULTIPLY));
            this.closePinned.setScaleType(ScaleType.CENTER);
            this.closePinned.setContentDescription(LocaleController.getString("Close", NUM));
            this.pinnedMessageView.addView(this.closePinned, LayoutHelper.createFrame(36, 48, 53));
            this.closePinned.setOnClickListener(new ChatActivity$$Lambda$8(this));
        }
        this.reportSpamView = new LinearLayout(context);
        this.reportSpamView.setTag(Integer.valueOf(1));
        this.reportSpamView.setTranslationY((float) (-AndroidUtilities.dp(50.0f)));
        this.reportSpamView.setVisibility(8);
        this.reportSpamView.setBackgroundResource(NUM);
        this.reportSpamView.getBackground().setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_topPanelBackground"), Mode.MULTIPLY));
        this.contentView.addView(this.reportSpamView, LayoutHelper.createFrame(-1, 50, 51));
        this.addToContactsButton = new TextView(context);
        this.addToContactsButton.setTextColor(Theme.getColor("chat_addContact"));
        this.addToContactsButton.setVisibility(8);
        this.addToContactsButton.setTextSize(1, 14.0f);
        this.addToContactsButton.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        this.addToContactsButton.setSingleLine(true);
        this.addToContactsButton.setMaxLines(1);
        this.addToContactsButton.setPadding(AndroidUtilities.dp(4.0f), 0, AndroidUtilities.dp(4.0f), 0);
        this.addToContactsButton.setGravity(17);
        this.addToContactsButton.setText(LocaleController.getString("AddContactChat", NUM));
        this.reportSpamView.addView(this.addToContactsButton, LayoutHelper.createLinear(-1, -1, 0.5f, 51, 0, 0, 0, AndroidUtilities.dp(1.0f)));
        this.addToContactsButton.setOnClickListener(new ChatActivity$$Lambda$9(this));
        this.reportSpamContainer = new FrameLayout(context);
        this.reportSpamView.addView(this.reportSpamContainer, LayoutHelper.createLinear(-1, -1, 1.0f, 51, 0, 0, 0, AndroidUtilities.dp(1.0f)));
        this.reportSpamButton = new TextView(context);
        this.reportSpamButton.setTextColor(Theme.getColor("chat_reportSpam"));
        this.reportSpamButton.setTextSize(1, 14.0f);
        this.reportSpamButton.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        this.reportSpamButton.setSingleLine(true);
        this.reportSpamButton.setMaxLines(1);
        if (this.currentChat != null) {
            this.reportSpamButton.setText(LocaleController.getString("ReportSpamAndLeave", NUM));
        } else {
            this.reportSpamButton.setText(LocaleController.getString("ReportSpam", NUM));
        }
        this.reportSpamButton.setGravity(17);
        this.reportSpamButton.setPadding(AndroidUtilities.dp(50.0f), 0, AndroidUtilities.dp(50.0f), 0);
        this.reportSpamContainer.addView(this.reportSpamButton, LayoutHelper.createFrame(-1, -1, 51));
        this.reportSpamButton.setOnClickListener(new ChatActivity$$Lambda$10(this));
        this.closeReportSpam = new ImageView(context);
        this.closeReportSpam.setImageResource(NUM);
        this.closeReportSpam.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_topPanelClose"), Mode.MULTIPLY));
        this.closeReportSpam.setScaleType(ScaleType.CENTER);
        this.reportSpamContainer.addView(this.closeReportSpam, LayoutHelper.createFrame(48, 48, 53));
        this.closeReportSpam.setOnClickListener(new ChatActivity$$Lambda$11(this));
        this.alertView = new FrameLayout(context);
        this.alertView.setTag(Integer.valueOf(1));
        this.alertView.setTranslationY((float) (-AndroidUtilities.dp(50.0f)));
        this.alertView.setVisibility(8);
        this.alertView.setBackgroundResource(NUM);
        this.alertView.getBackground().setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_topPanelBackground"), Mode.MULTIPLY));
        this.contentView.addView(this.alertView, LayoutHelper.createFrame(-1, 50, 51));
        this.alertNameTextView = new TextView(context);
        this.alertNameTextView.setTextSize(1, 14.0f);
        this.alertNameTextView.setTextColor(Theme.getColor("chat_topPanelTitle"));
        this.alertNameTextView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        this.alertNameTextView.setSingleLine(true);
        this.alertNameTextView.setEllipsize(TruncateAt.END);
        this.alertNameTextView.setMaxLines(1);
        this.alertView.addView(this.alertNameTextView, LayoutHelper.createFrame(-2, -2.0f, 51, 8.0f, 5.0f, 8.0f, 0.0f));
        this.alertTextView = new TextView(context);
        this.alertTextView.setTextSize(1, 14.0f);
        this.alertTextView.setTextColor(Theme.getColor("chat_topPanelMessage"));
        this.alertTextView.setSingleLine(true);
        this.alertTextView.setEllipsize(TruncateAt.END);
        this.alertTextView.setMaxLines(1);
        this.alertView.addView(this.alertTextView, LayoutHelper.createFrame(-2, -2.0f, 51, 8.0f, 23.0f, 8.0f, 0.0f));
        this.pagedownButton = new FrameLayout(context);
        this.pagedownButton.setVisibility(4);
        this.contentView.addView(this.pagedownButton, LayoutHelper.createFrame(66, 59.0f, 85, 0.0f, 0.0f, -3.0f, 5.0f));
        this.pagedownButton.setOnClickListener(new ChatActivity$$Lambda$12(this));
        this.mentiondownButton = new FrameLayout(context);
        this.mentiondownButton.setVisibility(4);
        this.contentView.addView(this.mentiondownButton, LayoutHelper.createFrame(46, 59.0f, 85, 0.0f, 0.0f, 7.0f, 5.0f));
        this.mentiondownButton.setOnClickListener(new OnClickListener() {
            private void loadLastUnreadMention() {
                ChatActivity.this.wasManualScroll = true;
                if (ChatActivity.this.hasAllMentionsLocal) {
                    MessagesStorage.getInstance(ChatActivity.this.currentAccount).getUnreadMention(ChatActivity.this.dialog_id, new ChatActivity$14$$Lambda$0(this));
                    return;
                }
                MessagesStorage messagesStorage = MessagesStorage.getInstance(ChatActivity.this.currentAccount);
                TL_messages_getUnreadMentions req = new TL_messages_getUnreadMentions();
                req.peer = MessagesController.getInstance(ChatActivity.this.currentAccount).getInputPeer((int) ChatActivity.this.dialog_id);
                req.limit = 1;
                req.add_offset = ChatActivity.this.newMentionsCount - 1;
                ConnectionsManager.getInstance(ChatActivity.this.currentAccount).sendRequest(req, new ChatActivity$14$$Lambda$1(this, messagesStorage));
            }

            /* Access modifiers changed, original: final|synthetic */
            public final /* synthetic */ void lambda$loadLastUnreadMention$0$ChatActivity$14(int param) {
                if (param == 0) {
                    ChatActivity.this.hasAllMentionsLocal = false;
                    loadLastUnreadMention();
                    return;
                }
                ChatActivity.this.scrollToMessageId(param, 0, false, 0, false);
            }

            /* Access modifiers changed, original: final|synthetic */
            public final /* synthetic */ void lambda$loadLastUnreadMention$2$ChatActivity$14(MessagesStorage messagesStorage, TLObject response, TL_error error) {
                AndroidUtilities.runOnUIThread(new ChatActivity$14$$Lambda$2(this, response, error, messagesStorage));
            }

            /* Access modifiers changed, original: final|synthetic */
            public final /* synthetic */ void lambda$null$1$ChatActivity$14(TLObject response, TL_error error, MessagesStorage messagesStorage) {
                messages_Messages res = (messages_Messages) response;
                if (error != null || res.messages.isEmpty()) {
                    if (res != null) {
                        ChatActivity.this.newMentionsCount = res.count;
                    } else {
                        ChatActivity.this.newMentionsCount = 0;
                    }
                    messagesStorage.resetMentionsCount(ChatActivity.this.dialog_id, ChatActivity.this.newMentionsCount);
                    if (ChatActivity.this.newMentionsCount == 0) {
                        ChatActivity.this.hasAllMentionsLocal = true;
                        ChatActivity.this.showMentionDownButton(false, true);
                        return;
                    }
                    ChatActivity.this.mentiondownButtonCounter.setText(String.format("%d", new Object[]{Integer.valueOf(ChatActivity.this.newMentionsCount)}));
                    loadLastUnreadMention();
                    return;
                }
                int id = ((Message) res.messages.get(0)).id;
                long mid = (long) id;
                if (ChatObject.isChannel(ChatActivity.this.currentChat)) {
                    mid |= ((long) ChatActivity.this.currentChat.id) << 32;
                }
                MessageObject object = (MessageObject) ChatActivity.this.messagesDict[0].get(id);
                messagesStorage.markMessageAsMention(mid);
                if (object != null) {
                    object.messageOwner.media_unread = true;
                    object.messageOwner.mentioned = true;
                }
                ChatActivity.this.scrollToMessageId(id, 0, false, 0, false);
            }

            public void onClick(View view) {
                loadLastUnreadMention();
            }
        });
        this.mentiondownButton.setOnLongClickListener(new ChatActivity$$Lambda$13(this));
        if (!this.isBroadcast) {
            this.mentionContainer = new FrameLayout(context) {
                public void onDraw(Canvas canvas) {
                    if (ChatActivity.this.mentionListView.getChildCount() > 0) {
                        int top;
                        if (ChatActivity.this.mentionLayoutManager.getReverseLayout()) {
                            top = ChatActivity.this.mentionListViewScrollOffsetY + AndroidUtilities.dp(2.0f);
                            Theme.chat_composeShadowDrawable.setBounds(0, top + Theme.chat_composeShadowDrawable.getIntrinsicHeight(), getMeasuredWidth(), top);
                            Theme.chat_composeShadowDrawable.draw(canvas);
                            canvas.drawRect(0.0f, 0.0f, (float) getMeasuredWidth(), (float) top, Theme.chat_composeBackgroundPaint);
                            return;
                        }
                        if (ChatActivity.this.mentionsAdapter.isBotContext() && ChatActivity.this.mentionsAdapter.isMediaLayout() && ChatActivity.this.mentionsAdapter.getBotContextSwitch() == null) {
                            top = ChatActivity.this.mentionListViewScrollOffsetY - AndroidUtilities.dp(4.0f);
                        } else {
                            top = ChatActivity.this.mentionListViewScrollOffsetY - AndroidUtilities.dp(2.0f);
                        }
                        int bottom = top + Theme.chat_composeShadowDrawable.getIntrinsicHeight();
                        Theme.chat_composeShadowDrawable.setBounds(0, top, getMeasuredWidth(), bottom);
                        Theme.chat_composeShadowDrawable.draw(canvas);
                        canvas.drawRect(0.0f, (float) bottom, (float) getMeasuredWidth(), (float) getMeasuredHeight(), Theme.chat_composeBackgroundPaint);
                    }
                }

                public void requestLayout() {
                    if (!ChatActivity.this.mentionListViewIgnoreLayout) {
                        super.requestLayout();
                    }
                }
            };
            this.mentionContainer.setVisibility(8);
            this.mentionContainer.setWillNotDraw(false);
            this.contentView.addView(this.mentionContainer, LayoutHelper.createFrame(-1, 110, 83));
            this.mentionListView = new RecyclerListView(context) {
                private int lastHeight;
                private int lastWidth;

                public boolean onInterceptTouchEvent(MotionEvent event) {
                    if (ChatActivity.this.mentionLayoutManager.getReverseLayout()) {
                        if (!(ChatActivity.this.mentionListViewIsScrolling || ChatActivity.this.mentionListViewScrollOffsetY == 0 || event.getY() <= ((float) ChatActivity.this.mentionListViewScrollOffsetY))) {
                            return false;
                        }
                    } else if (!(ChatActivity.this.mentionListViewIsScrolling || ChatActivity.this.mentionListViewScrollOffsetY == 0 || event.getY() >= ((float) ChatActivity.this.mentionListViewScrollOffsetY))) {
                        return false;
                    }
                    boolean result = ContentPreviewViewer.getInstance().onInterceptTouchEvent(event, ChatActivity.this.mentionListView, 0, null);
                    if (super.onInterceptTouchEvent(event) || result) {
                        return true;
                    }
                    return false;
                }

                public boolean onTouchEvent(MotionEvent event) {
                    if (ChatActivity.this.mentionLayoutManager.getReverseLayout()) {
                        if (!(ChatActivity.this.mentionListViewIsScrolling || ChatActivity.this.mentionListViewScrollOffsetY == 0 || event.getY() <= ((float) ChatActivity.this.mentionListViewScrollOffsetY))) {
                            return false;
                        }
                    } else if (!(ChatActivity.this.mentionListViewIsScrolling || ChatActivity.this.mentionListViewScrollOffsetY == 0 || event.getY() >= ((float) ChatActivity.this.mentionListViewScrollOffsetY))) {
                        return false;
                    }
                    return super.onTouchEvent(event);
                }

                public void requestLayout() {
                    if (!ChatActivity.this.mentionListViewIgnoreLayout) {
                        super.requestLayout();
                    }
                }

                /* Access modifiers changed, original: protected */
                public void onLayout(boolean changed, int l, int t, int r, int b) {
                    int width = r - l;
                    int height = b - t;
                    int newPosition = -1;
                    int newTop = 0;
                    if (!(ChatActivity.this.mentionLayoutManager.getReverseLayout() || ChatActivity.this.mentionListView == null || ChatActivity.this.mentionListViewLastViewPosition < 0 || width != this.lastWidth || height - this.lastHeight == 0)) {
                        newPosition = ChatActivity.this.mentionListViewLastViewPosition;
                        newTop = ((ChatActivity.this.mentionListViewLastViewTop + height) - this.lastHeight) - getPaddingTop();
                    }
                    super.onLayout(changed, l, t, r, b);
                    if (newPosition != -1) {
                        ChatActivity.this.mentionListViewIgnoreLayout = true;
                        if (ChatActivity.this.mentionsAdapter.isBotContext() && ChatActivity.this.mentionsAdapter.isMediaLayout()) {
                            ChatActivity.this.mentionGridLayoutManager.scrollToPositionWithOffset(newPosition, newTop);
                        } else {
                            ChatActivity.this.mentionLayoutManager.scrollToPositionWithOffset(newPosition, newTop);
                        }
                        super.onLayout(false, l, t, r, b);
                        ChatActivity.this.mentionListViewIgnoreLayout = false;
                    }
                    this.lastHeight = height;
                    this.lastWidth = width;
                    ChatActivity.this.mentionListViewUpdateLayout();
                }
            };
            this.mentionListView.setOnTouchListener(new ChatActivity$$Lambda$14(this));
            this.mentionListView.setTag(Integer.valueOf(2));
            this.mentionLayoutManager = new LinearLayoutManager(context) {
                public boolean supportsPredictiveItemAnimations() {
                    return false;
                }
            };
            this.mentionLayoutManager.setOrientation(1);
            this.mentionGridLayoutManager = new ExtendedGridLayoutManager(context, 100) {
                private Size size = new Size();

                /* Access modifiers changed, original: protected */
                public Size getSizeForItem(int i) {
                    float f = 100.0f;
                    if (ChatActivity.this.mentionsAdapter.getBotContextSwitch() != null) {
                        i++;
                    }
                    this.size.width = 0.0f;
                    this.size.height = 0.0f;
                    BotInlineResult object = ChatActivity.this.mentionsAdapter.getItem(i);
                    if (object instanceof BotInlineResult) {
                        BotInlineResult inlineResult = object;
                        int b;
                        DocumentAttribute attribute;
                        if (inlineResult.document != null) {
                            float f2;
                            PhotoSize thumb = FileLoader.getClosestPhotoSizeWithSize(inlineResult.document.thumbs, 90);
                            Size size = this.size;
                            if (thumb != null) {
                                f2 = (float) thumb.w;
                            } else {
                                f2 = 100.0f;
                            }
                            size.width = f2;
                            Size size2 = this.size;
                            if (thumb != null) {
                                f = (float) thumb.h;
                            }
                            size2.height = f;
                            for (b = 0; b < inlineResult.document.attributes.size(); b++) {
                                attribute = (DocumentAttribute) inlineResult.document.attributes.get(b);
                                if ((attribute instanceof TL_documentAttributeImageSize) || (attribute instanceof TL_documentAttributeVideo)) {
                                    this.size.width = (float) attribute.w;
                                    this.size.height = (float) attribute.h;
                                    break;
                                }
                            }
                        } else if (inlineResult.content != null) {
                            for (b = 0; b < inlineResult.content.attributes.size(); b++) {
                                attribute = (DocumentAttribute) inlineResult.content.attributes.get(b);
                                if ((attribute instanceof TL_documentAttributeImageSize) || (attribute instanceof TL_documentAttributeVideo)) {
                                    this.size.width = (float) attribute.w;
                                    this.size.height = (float) attribute.h;
                                    break;
                                }
                            }
                        } else if (inlineResult.thumb != null) {
                            for (b = 0; b < inlineResult.thumb.attributes.size(); b++) {
                                attribute = (DocumentAttribute) inlineResult.thumb.attributes.get(b);
                                if ((attribute instanceof TL_documentAttributeImageSize) || (attribute instanceof TL_documentAttributeVideo)) {
                                    this.size.width = (float) attribute.w;
                                    this.size.height = (float) attribute.h;
                                    break;
                                }
                            }
                        } else if (inlineResult.photo != null) {
                            PhotoSize photoSize = FileLoader.getClosestPhotoSizeWithSize(inlineResult.photo.sizes, AndroidUtilities.photoSize.intValue());
                            if (photoSize != null) {
                                this.size.width = (float) photoSize.w;
                                this.size.height = (float) photoSize.h;
                            }
                        }
                    }
                    return this.size;
                }

                /* Access modifiers changed, original: protected */
                public int getFlowItemCount() {
                    if (ChatActivity.this.mentionsAdapter.getBotContextSwitch() != null) {
                        return getItemCount() - 1;
                    }
                    return super.getFlowItemCount();
                }
            };
            this.mentionGridLayoutManager.setSpanSizeLookup(new SpanSizeLookup() {
                public int getSpanSize(int position) {
                    if (ChatActivity.this.mentionsAdapter.getItem(position) instanceof TL_inlineBotSwitchPM) {
                        return 100;
                    }
                    if (ChatActivity.this.mentionsAdapter.getBotContextSwitch() != null) {
                        position--;
                    }
                    return ChatActivity.this.mentionGridLayoutManager.getSpanSizeForItem(position);
                }
            });
            this.mentionListView.addItemDecoration(new ItemDecoration() {
                public void getItemOffsets(Rect outRect, View view, RecyclerView parent, State state) {
                    int i = 0;
                    outRect.left = 0;
                    outRect.right = 0;
                    outRect.top = 0;
                    outRect.bottom = 0;
                    if (parent.getLayoutManager() == ChatActivity.this.mentionGridLayoutManager) {
                        int position = parent.getChildAdapterPosition(view);
                        if (ChatActivity.this.mentionsAdapter.getBotContextSwitch() == null) {
                            outRect.top = AndroidUtilities.dp(2.0f);
                        } else if (position != 0) {
                            position--;
                            if (!ChatActivity.this.mentionGridLayoutManager.isFirstRow(position)) {
                                outRect.top = AndroidUtilities.dp(2.0f);
                            }
                        } else {
                            return;
                        }
                        if (!ChatActivity.this.mentionGridLayoutManager.isLastInRow(position)) {
                            i = AndroidUtilities.dp(2.0f);
                        }
                        outRect.right = i;
                    }
                }
            });
            this.mentionListView.setItemAnimator(null);
            this.mentionListView.setLayoutAnimation(null);
            this.mentionListView.setClipToPadding(false);
            this.mentionListView.setLayoutManager(this.mentionLayoutManager);
            this.mentionListView.setOverScrollMode(2);
            this.mentionContainer.addView(this.mentionListView, LayoutHelper.createFrame(-1, -1.0f));
            recyclerListView = this.mentionListView;
            MentionsAdapter mentionsAdapter = new MentionsAdapter(context, false, this.dialog_id, new MentionsAdapterDelegate() {
                public void needChangePanelVisibility(boolean show) {
                    if (ChatActivity.this.mentionsAdapter.isBotContext() && ChatActivity.this.mentionsAdapter.isMediaLayout()) {
                        ChatActivity.this.mentionListView.setLayoutManager(ChatActivity.this.mentionGridLayoutManager);
                    } else {
                        ChatActivity.this.mentionListView.setLayoutManager(ChatActivity.this.mentionLayoutManager);
                    }
                    if (show && ChatActivity.this.bottomOverlay.getVisibility() == 0) {
                        show = false;
                    }
                    if (show) {
                        if (ChatActivity.this.mentionListAnimation != null) {
                            ChatActivity.this.mentionListAnimation.cancel();
                            ChatActivity.this.mentionListAnimation = null;
                        }
                        if (ChatActivity.this.mentionContainer.getVisibility() == 0) {
                            ChatActivity.this.mentionContainer.setAlpha(1.0f);
                            return;
                        }
                        if (ChatActivity.this.mentionsAdapter.isBotContext() && ChatActivity.this.mentionsAdapter.isMediaLayout()) {
                            ChatActivity.this.mentionGridLayoutManager.scrollToPositionWithOffset(0, 10000);
                        } else {
                            ChatActivity.this.mentionLayoutManager.scrollToPositionWithOffset(0, 10000);
                        }
                        if (ChatActivity.this.allowStickersPanel && (!ChatActivity.this.mentionsAdapter.isBotContext() || ChatActivity.this.allowContextBotPanel || ChatActivity.this.allowContextBotPanelSecond)) {
                            if (ChatActivity.this.currentEncryptedChat != null && ChatActivity.this.mentionsAdapter.isBotContext()) {
                                SharedPreferences preferences = MessagesController.getGlobalMainSettings();
                                if (!preferences.getBoolean("secretbot", false)) {
                                    AlertDialog.Builder builder = new AlertDialog.Builder(ChatActivity.this.getParentActivity());
                                    builder.setTitle(LocaleController.getString("AppName", NUM));
                                    builder.setMessage(LocaleController.getString("SecretChatContextBotAlert", NUM));
                                    builder.setPositiveButton(LocaleController.getString("OK", NUM), null);
                                    ChatActivity.this.showDialog(builder.create());
                                    preferences.edit().putBoolean("secretbot", true).commit();
                                }
                            }
                            ChatActivity.this.mentionContainer.setVisibility(0);
                            ChatActivity.this.mentionContainer.setTag(null);
                            ChatActivity.this.mentionListAnimation = new AnimatorSet();
                            ChatActivity.this.mentionListAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(ChatActivity.this.mentionContainer, "alpha", new float[]{0.0f, 1.0f})});
                            ChatActivity.this.mentionListAnimation.addListener(new AnimatorListenerAdapter() {
                                public void onAnimationEnd(Animator animation) {
                                    if (ChatActivity.this.mentionListAnimation != null && ChatActivity.this.mentionListAnimation.equals(animation)) {
                                        ChatActivity.this.mentionListAnimation = null;
                                    }
                                }

                                public void onAnimationCancel(Animator animation) {
                                    if (ChatActivity.this.mentionListAnimation != null && ChatActivity.this.mentionListAnimation.equals(animation)) {
                                        ChatActivity.this.mentionListAnimation = null;
                                    }
                                }
                            });
                            ChatActivity.this.mentionListAnimation.setDuration(200);
                            ChatActivity.this.mentionListAnimation.start();
                            return;
                        }
                        ChatActivity.this.mentionContainer.setAlpha(1.0f);
                        ChatActivity.this.mentionContainer.setVisibility(4);
                        return;
                    }
                    if (ChatActivity.this.mentionListAnimation != null) {
                        ChatActivity.this.mentionListAnimation.cancel();
                        ChatActivity.this.mentionListAnimation = null;
                    }
                    if (ChatActivity.this.mentionContainer.getVisibility() == 8) {
                        return;
                    }
                    if (ChatActivity.this.allowStickersPanel) {
                        ChatActivity.this.mentionListAnimation = new AnimatorSet();
                        AnimatorSet access$16600 = ChatActivity.this.mentionListAnimation;
                        Animator[] animatorArr = new Animator[1];
                        animatorArr[0] = ObjectAnimator.ofFloat(ChatActivity.this.mentionContainer, "alpha", new float[]{0.0f});
                        access$16600.playTogether(animatorArr);
                        ChatActivity.this.mentionListAnimation.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animation) {
                                if (ChatActivity.this.mentionListAnimation != null && ChatActivity.this.mentionListAnimation.equals(animation)) {
                                    ChatActivity.this.mentionContainer.setVisibility(8);
                                    ChatActivity.this.mentionContainer.setTag(null);
                                    ChatActivity.this.mentionListAnimation = null;
                                }
                            }

                            public void onAnimationCancel(Animator animation) {
                                if (ChatActivity.this.mentionListAnimation != null && ChatActivity.this.mentionListAnimation.equals(animation)) {
                                    ChatActivity.this.mentionListAnimation = null;
                                }
                            }
                        });
                        ChatActivity.this.mentionListAnimation.setDuration(200);
                        ChatActivity.this.mentionListAnimation.start();
                        return;
                    }
                    ChatActivity.this.mentionContainer.setTag(null);
                    ChatActivity.this.mentionContainer.setVisibility(8);
                }

                public void onContextSearch(boolean searching) {
                    if (ChatActivity.this.chatActivityEnterView != null) {
                        ChatActivity.this.chatActivityEnterView.setCaption(ChatActivity.this.mentionsAdapter.getBotCaption());
                        ChatActivity.this.chatActivityEnterView.showContextProgress(searching);
                    }
                }

                public void onContextClick(BotInlineResult result) {
                    if (ChatActivity.this.getParentActivity() != null && result.content != null) {
                        if (result.type.equals("video") || result.type.equals("web_player_video")) {
                            int[] size = MessageObject.getInlineResultWidthAndHeight(result);
                            EmbedBottomSheet.show(ChatActivity.this.getParentActivity(), result.title != null ? result.title : "", result.description, result.content.url, result.content.url, size[0], size[1]);
                            return;
                        }
                        Browser.openUrl(ChatActivity.this.getParentActivity(), result.content.url);
                    }
                }
            });
            this.mentionsAdapter = mentionsAdapter;
            recyclerListView.setAdapter(mentionsAdapter);
            if (!ChatObject.isChannel(this.currentChat) || (this.currentChat != null && this.currentChat.megagroup)) {
                this.mentionsAdapter.setBotInfo(this.botInfo);
            }
            this.mentionsAdapter.setParentFragment(this);
            this.mentionsAdapter.setChatInfo(this.chatInfo);
            this.mentionsAdapter.setNeedUsernames(this.currentChat != null);
            mentionsAdapter = this.mentionsAdapter;
            z = this.currentEncryptedChat == null || AndroidUtilities.getPeerLayerVersion(this.currentEncryptedChat.layer) >= 46;
            mentionsAdapter.setNeedBotContext(z);
            this.mentionsAdapter.setBotsCount(this.currentChat != null ? this.botsCount : 1);
            recyclerListView = this.mentionListView;
            OnItemClickListener chatActivity$$Lambda$15 = new ChatActivity$$Lambda$15(this);
            this.mentionsOnItemClickListener = chatActivity$$Lambda$15;
            recyclerListView.setOnItemClickListener(chatActivity$$Lambda$15);
            this.mentionListView.setOnItemLongClickListener(new ChatActivity$$Lambda$16(this));
            this.mentionListView.setOnScrollListener(new OnScrollListener() {
                public void onScrollStateChanged(RecyclerView recyclerView, int newState) {
                    boolean z = true;
                    ChatActivity chatActivity = ChatActivity.this;
                    if (newState != 1) {
                        z = false;
                    }
                    chatActivity.mentionListViewIsScrolling = z;
                }

                public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
                    int lastVisibleItem;
                    int visibleItemCount;
                    if (ChatActivity.this.mentionsAdapter.isBotContext() && ChatActivity.this.mentionsAdapter.isMediaLayout()) {
                        lastVisibleItem = ChatActivity.this.mentionGridLayoutManager.findLastVisibleItemPosition();
                    } else {
                        lastVisibleItem = ChatActivity.this.mentionLayoutManager.findLastVisibleItemPosition();
                    }
                    if (lastVisibleItem == -1) {
                        visibleItemCount = 0;
                    } else {
                        visibleItemCount = lastVisibleItem;
                    }
                    if (visibleItemCount > 0 && lastVisibleItem > ChatActivity.this.mentionsAdapter.getItemCount() - 5) {
                        ChatActivity.this.mentionsAdapter.searchForContextBotForNextOffset();
                    }
                    ChatActivity.this.mentionListViewUpdateLayout();
                }
            });
        }
        this.pagedownButtonImage = new ImageView(context);
        this.pagedownButtonImage.setImageResource(NUM);
        this.pagedownButtonImage.setScaleType(ScaleType.CENTER);
        this.pagedownButtonImage.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_goDownButtonIcon"), Mode.MULTIPLY));
        this.pagedownButtonImage.setPadding(0, AndroidUtilities.dp(2.0f), 0, 0);
        Drawable drawable = Theme.createCircleDrawable(AndroidUtilities.dp(42.0f), Theme.getColor("chat_goDownButton"));
        Drawable shadowDrawable = context.getResources().getDrawable(NUM).mutate();
        shadowDrawable.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_goDownButtonShadow"), Mode.MULTIPLY));
        Drawable combinedDrawable = new CombinedDrawable(shadowDrawable, drawable, 0, 0);
        combinedDrawable.setIconSize(AndroidUtilities.dp(42.0f), AndroidUtilities.dp(42.0f));
        this.pagedownButtonImage.setBackgroundDrawable(combinedDrawable);
        this.pagedownButton.addView(this.pagedownButtonImage, LayoutHelper.createFrame(46, 46, 81));
        this.pagedownButton.setContentDescription(LocaleController.getString("AccDescrPageDown", NUM));
        this.pagedownButtonCounter = new TextView(context);
        this.pagedownButtonCounter.setVisibility(4);
        this.pagedownButtonCounter.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        this.pagedownButtonCounter.setTextSize(1, 13.0f);
        this.pagedownButtonCounter.setTextColor(Theme.getColor("chat_goDownButtonCounter"));
        this.pagedownButtonCounter.setGravity(17);
        this.pagedownButtonCounter.setBackgroundDrawable(Theme.createRoundRectDrawable(AndroidUtilities.dp(11.5f), Theme.getColor("chat_goDownButtonCounterBackground")));
        this.pagedownButtonCounter.setMinWidth(AndroidUtilities.dp(23.0f));
        this.pagedownButtonCounter.setPadding(AndroidUtilities.dp(8.0f), 0, AndroidUtilities.dp(8.0f), AndroidUtilities.dp(1.0f));
        this.pagedownButton.addView(this.pagedownButtonCounter, LayoutHelper.createFrame(-2, 23, 49));
        this.mentiondownButtonImage = new ImageView(context);
        this.mentiondownButtonImage.setImageResource(NUM);
        this.mentiondownButtonImage.setScaleType(ScaleType.CENTER);
        this.mentiondownButtonImage.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_goDownButtonIcon"), Mode.MULTIPLY));
        this.mentiondownButtonImage.setPadding(0, AndroidUtilities.dp(2.0f), 0, 0);
        drawable = Theme.createCircleDrawable(AndroidUtilities.dp(42.0f), Theme.getColor("chat_goDownButton"));
        shadowDrawable = context.getResources().getDrawable(NUM).mutate();
        shadowDrawable.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_goDownButtonShadow"), Mode.MULTIPLY));
        combinedDrawable = new CombinedDrawable(shadowDrawable, drawable, 0, 0);
        combinedDrawable.setIconSize(AndroidUtilities.dp(42.0f), AndroidUtilities.dp(42.0f));
        this.mentiondownButtonImage.setBackgroundDrawable(combinedDrawable);
        this.mentiondownButton.addView(this.mentiondownButtonImage, LayoutHelper.createFrame(46, 46, 83));
        this.mentiondownButtonCounter = new TextView(context);
        this.mentiondownButtonCounter.setVisibility(4);
        this.mentiondownButtonCounter.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        this.mentiondownButtonCounter.setTextSize(1, 13.0f);
        this.mentiondownButtonCounter.setTextColor(Theme.getColor("chat_goDownButtonCounter"));
        this.mentiondownButtonCounter.setGravity(17);
        this.mentiondownButtonCounter.setBackgroundDrawable(Theme.createRoundRectDrawable(AndroidUtilities.dp(11.5f), Theme.getColor("chat_goDownButtonCounterBackground")));
        this.mentiondownButtonCounter.setMinWidth(AndroidUtilities.dp(23.0f));
        this.mentiondownButtonCounter.setPadding(AndroidUtilities.dp(8.0f), 0, AndroidUtilities.dp(8.0f), AndroidUtilities.dp(1.0f));
        this.mentiondownButton.addView(this.mentiondownButtonCounter, LayoutHelper.createFrame(-2, 23, 49));
        this.mentiondownButton.setContentDescription(LocaleController.getString("AccDescrMentionDown", NUM));
        if (!AndroidUtilities.isTablet() || AndroidUtilities.isSmallTablet()) {
            fragmentContextView = new FragmentContextView(context, this, true);
            this.contentView.addView(fragmentContextView, LayoutHelper.createFrame(-1, 39.0f, 51, 0.0f, -36.0f, 0.0f, 0.0f));
            SizeNotifierFrameLayout sizeNotifierFrameLayout = this.contentView;
            fragmentContextView = new FragmentContextView(context, this, false);
            this.fragmentContextView = fragmentContextView;
            sizeNotifierFrameLayout.addView(fragmentContextView, LayoutHelper.createFrame(-1, 39.0f, 51, 0.0f, -36.0f, 0.0f, 0.0f));
            this.fragmentContextView.setAdditionalContextView(fragmentContextView);
            fragmentContextView.setAdditionalContextView(this.fragmentContextView);
        }
        this.contentView.addView(this.actionBar);
        this.overlayView = new View(context);
        this.overlayView.setOnTouchListener(new ChatActivity$$Lambda$17(this));
        this.contentView.addView(this.overlayView, LayoutHelper.createFrame(-1, -1, 51));
        this.overlayView.setVisibility(8);
        this.instantCameraView = new InstantCameraView(context, this);
        this.contentView.addView(this.instantCameraView, LayoutHelper.createFrame(-1, -1, 51));
        this.chatActivityEnterView = new ChatActivityEnterView(getParentActivity(), this.contentView, this, true);
        this.chatActivityEnterView.setDialogId(this.dialog_id, this.currentAccount);
        this.chatActivityEnterView.setId(1000);
        this.chatActivityEnterView.setBotsCount(this.botsCount, this.hasBotsCommands);
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        z = this.currentEncryptedChat == null || AndroidUtilities.getPeerLayerVersion(this.currentEncryptedChat.layer) >= 23;
        if (this.currentEncryptedChat == null || AndroidUtilities.getPeerLayerVersion(this.currentEncryptedChat.layer) >= 46) {
            z2 = true;
        } else {
            z2 = false;
        }
        chatActivityEnterView.setAllowStickersAndGifs(z, z2);
        if (this.inPreviewMode) {
            this.chatActivityEnterView.setVisibility(4);
        }
        this.contentView.addView(this.chatActivityEnterView, this.contentView.getChildCount() - 1, LayoutHelper.createFrame(-1, -2, 83));
        this.chatActivityEnterView.setDelegate(new ChatActivityEnterViewDelegate() {
            public void onMessageSend(CharSequence message) {
                ChatActivity.this.moveScrollToLastMessage();
                ChatActivity.this.hideFieldPanel();
                if (ChatActivity.this.mentionsAdapter != null) {
                    ChatActivity.this.mentionsAdapter.addHashtagsFromMessage(message);
                }
            }

            public void onSwitchRecordMode(boolean video) {
                ChatActivity.this.showVoiceHint(false, video);
            }

            public void onPreAudioVideoRecord() {
                ChatActivity.this.showVoiceHint(true, false);
            }

            public void onTextSelectionChanged(int start, int end) {
                if (ChatActivity.this.editTextItem != null) {
                    if (end - start > 0) {
                        if (ChatActivity.this.editTextItem.getTag() == null) {
                            ChatActivity.this.editTextItem.setTag(Integer.valueOf(1));
                            ChatActivity.this.editTextItem.setVisibility(0);
                            ChatActivity.this.headerItem.setVisibility(8);
                            ChatActivity.this.attachItem.setVisibility(8);
                        }
                        ChatActivity.this.editTextStart = start;
                        ChatActivity.this.editTextEnd = end;
                    } else if (ChatActivity.this.editTextItem.getTag() != null) {
                        ChatActivity.this.editTextItem.setTag(null);
                        ChatActivity.this.editTextItem.setVisibility(8);
                        if (ChatActivity.this.chatActivityEnterView.hasText()) {
                            ChatActivity.this.headerItem.setVisibility(8);
                            ChatActivity.this.attachItem.setVisibility(0);
                            return;
                        }
                        ChatActivity.this.headerItem.setVisibility(0);
                        ChatActivity.this.attachItem.setVisibility(8);
                    }
                }
            }

            public void onTextChanged(final CharSequence text, boolean bigChange) {
                if (ChatActivity.this.startReplyOnTextChange && text.length() > 0) {
                    ChatActivity.this.actionBar.getActionBarMenuOnItemClick().onItemClick(19);
                    ChatActivity.this.startReplyOnTextChange = false;
                }
                MediaController instance = MediaController.getInstance();
                boolean z = !TextUtils.isEmpty(text) || ChatActivity.this.chatActivityEnterView.isEditingMessage();
                instance.setInputFieldHasText(z);
                if (ChatActivity.this.stickersAdapter != null && ChatActivity.this.chatActivityEnterView != null && ChatActivity.this.chatActivityEnterView.getVisibility() == 0 && (ChatActivity.this.bottomOverlay == null || ChatActivity.this.bottomOverlay.getVisibility() != 0)) {
                    StickersAdapter access$17300 = ChatActivity.this.stickersAdapter;
                    if ((ChatActivity.this.currentChat == null || ChatObject.canSendStickers(ChatActivity.this.currentChat)) && !ChatActivity.this.chatActivityEnterView.isEditingMessage()) {
                        z = false;
                    } else {
                        z = true;
                    }
                    access$17300.loadStikersForEmoji(text, z);
                }
                if (ChatActivity.this.mentionsAdapter != null) {
                    ChatActivity.this.mentionsAdapter.searchUsernameOrHashtag(text.toString(), ChatActivity.this.chatActivityEnterView.getCursorPosition(), ChatActivity.this.messages, false);
                }
                if (ChatActivity.this.waitingForCharaterEnterRunnable != null) {
                    AndroidUtilities.cancelRunOnUIThread(ChatActivity.this.waitingForCharaterEnterRunnable);
                    ChatActivity.this.waitingForCharaterEnterRunnable = null;
                }
                if ((ChatActivity.this.currentChat != null && !ChatObject.canSendEmbed(ChatActivity.this.currentChat)) || !ChatActivity.this.chatActivityEnterView.isMessageWebPageSearchEnabled()) {
                    return;
                }
                if (!ChatActivity.this.chatActivityEnterView.isEditingMessage() || !ChatActivity.this.chatActivityEnterView.isEditingCaption()) {
                    if (bigChange) {
                        ChatActivity.this.searchLinks(text, true);
                        return;
                    }
                    ChatActivity.this.waitingForCharaterEnterRunnable = new Runnable() {
                        public void run() {
                            if (this == ChatActivity.this.waitingForCharaterEnterRunnable) {
                                ChatActivity.this.searchLinks(text, false);
                                ChatActivity.this.waitingForCharaterEnterRunnable = null;
                            }
                        }
                    };
                    AndroidUtilities.runOnUIThread(ChatActivity.this.waitingForCharaterEnterRunnable, AndroidUtilities.WEB_URL == null ? 3000 : 1000);
                }
            }

            public void onTextSpansChanged(CharSequence text) {
                ChatActivity.this.searchLinks(text, true);
            }

            public void needSendTyping() {
                MessagesController.getInstance(ChatActivity.this.currentAccount).sendTyping(ChatActivity.this.dialog_id, 0, ChatActivity.this.classGuid);
            }

            public void onAttachButtonHidden() {
                if (!ChatActivity.this.actionBar.isSearchFieldVisible() && ChatActivity.this.headerItem != null) {
                    ChatActivity.this.headerItem.setVisibility(8);
                    ChatActivity.this.editTextItem.setVisibility(8);
                    ChatActivity.this.attachItem.setVisibility(0);
                }
            }

            public void onAttachButtonShow() {
                if (!ChatActivity.this.actionBar.isSearchFieldVisible() && ChatActivity.this.headerItem != null) {
                    ChatActivity.this.headerItem.setVisibility(0);
                    ChatActivity.this.editTextItem.setVisibility(8);
                    ChatActivity.this.attachItem.setVisibility(8);
                }
            }

            public void onMessageEditEnd(boolean loading) {
                if (!loading) {
                    MentionsAdapter access$6200 = ChatActivity.this.mentionsAdapter;
                    boolean z = ChatActivity.this.currentEncryptedChat == null || AndroidUtilities.getPeerLayerVersion(ChatActivity.this.currentEncryptedChat.layer) >= 46;
                    access$6200.setNeedBotContext(z);
                    ChatActivity.this.chatListView.setOnItemLongClickListener(ChatActivity.this.onItemLongClickListener);
                    ChatActivity.this.chatListView.setOnItemClickListener(ChatActivity.this.onItemClickListener);
                    ChatActivity.this.chatListView.setClickable(true);
                    ChatActivity.this.chatListView.setLongClickable(true);
                    if (ChatActivity.this.editingMessageObject != null) {
                        ChatActivity.this.hideFieldPanel();
                    }
                    ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                    if (ChatActivity.this.currentEncryptedChat == null || AndroidUtilities.getPeerLayerVersion(ChatActivity.this.currentEncryptedChat.layer) >= 23) {
                        z = true;
                    } else {
                        z = false;
                    }
                    boolean z2 = ChatActivity.this.currentEncryptedChat == null || AndroidUtilities.getPeerLayerVersion(ChatActivity.this.currentEncryptedChat.layer) >= 46;
                    chatActivityEnterView.setAllowStickersAndGifs(z, z2);
                    if (ChatActivity.this.editingMessageObjectReqId != 0) {
                        ConnectionsManager.getInstance(ChatActivity.this.currentAccount).cancelRequest(ChatActivity.this.editingMessageObjectReqId, true);
                        ChatActivity.this.editingMessageObjectReqId = 0;
                    }
                    ChatActivity.this.updatePinnedMessageView(true);
                    ChatActivity.this.updateBottomOverlay();
                    ChatActivity.this.updateVisibleRows();
                }
            }

            public void onWindowSizeChanged(int size) {
                boolean z = true;
                if (size < AndroidUtilities.dp(72.0f) + ActionBar.getCurrentActionBarHeight()) {
                    ChatActivity.this.allowStickersPanel = false;
                    if (ChatActivity.this.stickersPanel.getVisibility() == 0) {
                        ChatActivity.this.stickersPanel.setVisibility(4);
                    }
                    if (ChatActivity.this.mentionContainer != null && ChatActivity.this.mentionContainer.getVisibility() == 0) {
                        ChatActivity.this.mentionContainer.setVisibility(4);
                    }
                } else {
                    ChatActivity.this.allowStickersPanel = true;
                    if (ChatActivity.this.stickersPanel.getVisibility() == 4) {
                        ChatActivity.this.stickersPanel.setVisibility(0);
                    }
                    if (ChatActivity.this.mentionContainer != null && ChatActivity.this.mentionContainer.getVisibility() == 4 && (!ChatActivity.this.mentionsAdapter.isBotContext() || ChatActivity.this.allowContextBotPanel || ChatActivity.this.allowContextBotPanelSecond)) {
                        ChatActivity.this.mentionContainer.setVisibility(0);
                        ChatActivity.this.mentionContainer.setTag(null);
                    }
                }
                ChatActivity chatActivity = ChatActivity.this;
                if (ChatActivity.this.chatActivityEnterView.isPopupShowing()) {
                    z = false;
                }
                chatActivity.allowContextBotPanel = z;
                ChatActivity.this.checkContextBotPanel();
            }

            public void onStickersTab(boolean opened) {
                if (ChatActivity.this.emojiButtonRed != null) {
                    ChatActivity.this.emojiButtonRed.setVisibility(8);
                }
                ChatActivity.this.allowContextBotPanelSecond = !opened;
                ChatActivity.this.checkContextBotPanel();
            }

            public void didPressedAttachButton() {
                if (ChatActivity.this.chatAttachAlert != null) {
                    ChatActivity.this.chatAttachAlert.setEditingMessageObject(null);
                }
                ChatActivity.this.openAttachMenu();
            }

            public void needStartRecordVideo(int state) {
                if (ChatActivity.this.instantCameraView == null) {
                    return;
                }
                if (state == 0) {
                    ChatActivity.this.instantCameraView.showCamera();
                } else if (state == 1 || state == 3 || state == 4) {
                    ChatActivity.this.instantCameraView.send(state);
                } else if (state == 2) {
                    ChatActivity.this.instantCameraView.cancel();
                }
            }

            public void needChangeVideoPreviewState(int state, float seekProgress) {
                if (ChatActivity.this.instantCameraView != null) {
                    ChatActivity.this.instantCameraView.changeVideoPreviewState(state, seekProgress);
                }
            }

            public void needStartRecordAudio(int state) {
                int visibility = state == 0 ? 8 : 0;
                if (ChatActivity.this.overlayView.getVisibility() != visibility) {
                    ChatActivity.this.overlayView.setVisibility(visibility);
                }
            }

            public void needShowMediaBanHint() {
                ChatActivity.this.showMediaBannedHint();
            }

            public void onStickersExpandedChange() {
                ChatActivity.this.checkRaiseSensors();
            }
        });
        fragmentContextView = new FrameLayout(context) {
            public void setTranslationY(float translationY) {
                super.setTranslationY(translationY);
                if (ChatActivity.this.chatActivityEnterView != null) {
                    ChatActivity.this.chatActivityEnterView.invalidate();
                }
                if (getVisibility() != 8) {
                    int height = getLayoutParams().height;
                    if (ChatActivity.this.chatListView != null) {
                        ChatActivity.this.chatListView.setTranslationY(translationY);
                    }
                    if (ChatActivity.this.progressView != null) {
                        ChatActivity.this.progressView.setTranslationY(translationY);
                    }
                    if (ChatActivity.this.mentionContainer != null) {
                        ChatActivity.this.mentionContainer.setTranslationY(translationY);
                    }
                    if (ChatActivity.this.pagedownButton != null) {
                        ChatActivity.this.pagedownButton.setTranslationY(translationY);
                    }
                    if (ChatActivity.this.mentiondownButton != null) {
                        FrameLayout access$11200 = ChatActivity.this.mentiondownButton;
                        if (ChatActivity.this.pagedownButton.getVisibility() == 0) {
                            translationY -= (float) AndroidUtilities.dp(72.0f);
                        }
                        access$11200.setTranslationY(translationY);
                    }
                }
            }

            public boolean hasOverlappingRendering() {
                return false;
            }

            public void setVisibility(int visibility) {
                float f = 0.0f;
                super.setVisibility(visibility);
                if (visibility == 8) {
                    FrameLayout access$11000;
                    if (ChatActivity.this.chatListView != null) {
                        ChatActivity.this.chatListView.setTranslationY(0.0f);
                    }
                    if (ChatActivity.this.progressView != null) {
                        ChatActivity.this.progressView.setTranslationY(0.0f);
                    }
                    if (ChatActivity.this.mentionContainer != null) {
                        ChatActivity.this.mentionContainer.setTranslationY(0.0f);
                    }
                    if (ChatActivity.this.pagedownButton != null) {
                        access$11000 = ChatActivity.this.pagedownButton;
                        if (ChatActivity.this.pagedownButton.getTag() == null) {
                            f = (float) AndroidUtilities.dp(100.0f);
                        }
                        access$11000.setTranslationY(f);
                    }
                    if (ChatActivity.this.mentiondownButton != null) {
                        access$11000 = ChatActivity.this.mentiondownButton;
                        if (ChatActivity.this.mentiondownButton.getTag() == null) {
                            f = (float) AndroidUtilities.dp(100.0f);
                        } else {
                            f = (float) (ChatActivity.this.pagedownButton.getVisibility() == 0 ? -AndroidUtilities.dp(72.0f) : 0);
                        }
                        access$11000.setTranslationY(f);
                    }
                }
            }
        };
        this.chatActivityEnterView.addTopView(fragmentContextView, 48);
        fragmentContextView.setOnClickListener(new ChatActivity$$Lambda$18(this));
        this.replyLineView = new View(context);
        this.replyLineView.setBackgroundColor(Theme.getColor("chat_replyPanelLine"));
        fragmentContextView.addView(this.replyLineView, LayoutHelper.createFrame(-1, 1, 83));
        this.replyIconImageView = new ImageView(context);
        this.replyIconImageView.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_replyPanelIcons"), Mode.MULTIPLY));
        this.replyIconImageView.setScaleType(ScaleType.CENTER);
        fragmentContextView.addView(this.replyIconImageView, LayoutHelper.createFrame(52, 46, 51));
        this.replyCloseImageView = new ImageView(context);
        this.replyCloseImageView.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_replyPanelClose"), Mode.MULTIPLY));
        this.replyCloseImageView.setImageResource(NUM);
        this.replyCloseImageView.setScaleType(ScaleType.CENTER);
        fragmentContextView.addView(this.replyCloseImageView, LayoutHelper.createFrame(52, 46.0f, 53, 0.0f, 0.5f, 0.0f, 0.0f));
        this.replyCloseImageView.setOnClickListener(new ChatActivity$$Lambda$19(this));
        this.replyNameTextView = new SimpleTextView(context);
        this.replyNameTextView.setTextSize(14);
        this.replyNameTextView.setTextColor(Theme.getColor("chat_replyPanelName"));
        this.replyNameTextView.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        fragmentContextView.addView(this.replyNameTextView, LayoutHelper.createFrame(-1, 18.0f, 51, 52.0f, 6.0f, 52.0f, 0.0f));
        this.replyObjectTextView = new SimpleTextView(context);
        this.replyObjectTextView.setTextSize(14);
        this.replyObjectTextView.setTextColor(Theme.getColor("chat_replyPanelMessage"));
        fragmentContextView.addView(this.replyObjectTextView, LayoutHelper.createFrame(-1, 18.0f, 51, 52.0f, 24.0f, 52.0f, 0.0f));
        this.replyImageView = new BackupImageView(context);
        fragmentContextView.addView(this.replyImageView, LayoutHelper.createFrame(34, 34.0f, 51, 52.0f, 6.0f, 0.0f, 0.0f));
        this.stickersPanel = new FrameLayout(context);
        this.stickersPanel.setVisibility(8);
        this.contentView.addView(this.stickersPanel, LayoutHelper.createFrame(-2, 81.5f, 83, 0.0f, 0.0f, 0.0f, 38.0f));
        final ContentPreviewViewerDelegate contentPreviewViewerDelegate = new ContentPreviewViewerDelegate() {
            public void gifAddedOrDeleted() {
                ContentPreviewViewer$ContentPreviewViewerDelegate$$CC.gifAddedOrDeleted(this);
            }

            public boolean needOpen() {
                return ContentPreviewViewer$ContentPreviewViewerDelegate$$CC.needOpen(this);
            }

            public void sendGif(Document document) {
                ContentPreviewViewer$ContentPreviewViewerDelegate$$CC.sendGif(this, document);
            }

            public void sendSticker(Document sticker, Object parent) {
            }

            public boolean needSend() {
                return false;
            }

            public void openSet(InputStickerSet set) {
                if (set != null && ChatActivity.this.getParentActivity() != null) {
                    TL_inputStickerSetID inputStickerSet = new TL_inputStickerSetID();
                    inputStickerSet.access_hash = set.access_hash;
                    inputStickerSet.id = set.id;
                    ChatActivity.this.showDialog(new StickersAlert(ChatActivity.this.getParentActivity(), ChatActivity.this, inputStickerSet, null, ChatActivity.this.chatActivityEnterView));
                }
            }
        };
        this.stickersListView = new RecyclerListView(context) {
            public boolean onInterceptTouchEvent(MotionEvent event) {
                boolean result = ContentPreviewViewer.getInstance().onInterceptTouchEvent(event, ChatActivity.this.stickersListView, 0, contentPreviewViewerDelegate);
                if (super.onInterceptTouchEvent(event) || result) {
                    return true;
                }
                return false;
            }
        };
        this.stickersListView.setTag(Integer.valueOf(3));
        this.stickersListView.setOnTouchListener(new ChatActivity$$Lambda$20(this, contentPreviewViewerDelegate));
        this.stickersListView.setDisallowInterceptTouchEvents(true);
        LayoutManager linearLayoutManager = new LinearLayoutManager(context);
        linearLayoutManager.setOrientation(0);
        this.stickersListView.setLayoutManager(linearLayoutManager);
        this.stickersListView.setClipToPadding(false);
        this.stickersListView.setOverScrollMode(2);
        this.stickersPanel.addView(this.stickersListView, LayoutHelper.createFrame(-1, 78.0f));
        initStickers();
        this.stickersPanelArrow = new ImageView(context);
        this.stickersPanelArrow.setImageResource(NUM);
        this.stickersPanelArrow.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_stickersHintPanel"), Mode.MULTIPLY));
        this.stickersPanel.addView(this.stickersPanelArrow, LayoutHelper.createFrame(-2, -2.0f, 83, 53.0f, 0.0f, 53.0f, 0.0f));
        this.searchContainer = new FrameLayout(context) {
            public void onDraw(Canvas canvas) {
                int bottom = Theme.chat_composeShadowDrawable.getIntrinsicHeight();
                Theme.chat_composeShadowDrawable.setBounds(0, 0, getMeasuredWidth(), bottom);
                Theme.chat_composeShadowDrawable.draw(canvas);
                canvas.drawRect(0.0f, (float) bottom, (float) getMeasuredWidth(), (float) getMeasuredHeight(), Theme.chat_composeBackgroundPaint);
            }
        };
        this.searchContainer.setOnTouchListener(ChatActivity$$Lambda$21.$instance);
        this.searchContainer.setWillNotDraw(false);
        this.searchContainer.setVisibility(4);
        this.searchContainer.setFocusable(true);
        this.searchContainer.setFocusableInTouchMode(true);
        this.searchContainer.setClickable(true);
        this.searchContainer.setPadding(0, AndroidUtilities.dp(3.0f), 0, 0);
        this.searchUpButton = new ImageView(context);
        this.searchUpButton.setScaleType(ScaleType.CENTER);
        this.searchUpButton.setImageResource(NUM);
        this.searchUpButton.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_searchPanelIcons"), Mode.MULTIPLY));
        this.searchContainer.addView(this.searchUpButton, LayoutHelper.createFrame(48, 48.0f, 53, 0.0f, 0.0f, 48.0f, 0.0f));
        this.searchUpButton.setOnClickListener(new ChatActivity$$Lambda$22(this));
        this.searchDownButton = new ImageView(context);
        this.searchDownButton.setScaleType(ScaleType.CENTER);
        this.searchDownButton.setImageResource(NUM);
        this.searchDownButton.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_searchPanelIcons"), Mode.MULTIPLY));
        this.searchContainer.addView(this.searchDownButton, LayoutHelper.createFrame(48, 48.0f, 53, 0.0f, 0.0f, 0.0f, 0.0f));
        this.searchDownButton.setOnClickListener(new ChatActivity$$Lambda$23(this));
        if (this.currentChat != null && (!ChatObject.isChannel(this.currentChat) || this.currentChat.megagroup)) {
            this.searchUserButton = new ImageView(context);
            this.searchUserButton.setScaleType(ScaleType.CENTER);
            this.searchUserButton.setImageResource(NUM);
            this.searchUserButton.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_searchPanelIcons"), Mode.MULTIPLY));
            this.searchContainer.addView(this.searchUserButton, LayoutHelper.createFrame(48, 48.0f, 51, 48.0f, 0.0f, 0.0f, 0.0f));
            this.searchUserButton.setOnClickListener(new ChatActivity$$Lambda$24(this));
        }
        this.searchCalendarButton = new ImageView(context);
        this.searchCalendarButton.setScaleType(ScaleType.CENTER);
        this.searchCalendarButton.setImageResource(NUM);
        this.searchCalendarButton.setColorFilter(new PorterDuffColorFilter(Theme.getColor("chat_searchPanelIcons"), Mode.MULTIPLY));
        this.searchContainer.addView(this.searchCalendarButton, LayoutHelper.createFrame(48, 48, 51));
        this.searchCalendarButton.setOnClickListener(new ChatActivity$$Lambda$25(this));
        this.searchCountText = new SimpleTextView(context);
        this.searchCountText.setTextColor(Theme.getColor("chat_searchPanelText"));
        this.searchCountText.setTextSize(15);
        this.searchCountText.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        this.searchCountText.setGravity(5);
        this.searchContainer.addView(this.searchCountText, LayoutHelper.createFrame(-2, -2.0f, 21, 0.0f, 0.0f, 108.0f, 0.0f));
        this.bottomOverlay = new FrameLayout(context) {
            public void onDraw(Canvas canvas) {
                int bottom = Theme.chat_composeShadowDrawable.getIntrinsicHeight();
                Theme.chat_composeShadowDrawable.setBounds(0, 0, getMeasuredWidth(), bottom);
                Theme.chat_composeShadowDrawable.draw(canvas);
                canvas.drawRect(0.0f, (float) bottom, (float) getMeasuredWidth(), (float) getMeasuredHeight(), Theme.chat_composeBackgroundPaint);
            }
        };
        this.bottomOverlay.setWillNotDraw(false);
        this.bottomOverlay.setVisibility(4);
        this.bottomOverlay.setFocusable(true);
        this.bottomOverlay.setFocusableInTouchMode(true);
        this.bottomOverlay.setClickable(true);
        this.bottomOverlay.setPadding(0, AndroidUtilities.dp(2.0f), 0, 0);
        this.contentView.addView(this.bottomOverlay, LayoutHelper.createFrame(-1, 51, 80));
        this.bottomOverlayText = new TextView(context);
        this.bottomOverlayText.setTextSize(1, 14.0f);
        this.bottomOverlayText.setGravity(17);
        this.bottomOverlayText.setMaxLines(2);
        this.bottomOverlayText.setEllipsize(TruncateAt.END);
        this.bottomOverlayText.setLineSpacing((float) AndroidUtilities.dp(2.0f), 1.0f);
        this.bottomOverlayText.setTextColor(Theme.getColor("chat_secretChatStatusText"));
        this.bottomOverlay.addView(this.bottomOverlayText, LayoutHelper.createFrame(-2, -2.0f, 17, 14.0f, 0.0f, 14.0f, 0.0f));
        this.bottomOverlayChat = new FrameLayout(context) {
            public void onDraw(Canvas canvas) {
                int bottom = Theme.chat_composeShadowDrawable.getIntrinsicHeight();
                Theme.chat_composeShadowDrawable.setBounds(0, 0, getMeasuredWidth(), bottom);
                Theme.chat_composeShadowDrawable.draw(canvas);
                canvas.drawRect(0.0f, (float) bottom, (float) getMeasuredWidth(), (float) getMeasuredHeight(), Theme.chat_composeBackgroundPaint);
            }
        };
        this.bottomOverlayChat.setWillNotDraw(false);
        this.bottomOverlayChat.setPadding(0, AndroidUtilities.dp(3.0f), 0, 0);
        this.bottomOverlayChat.setVisibility(4);
        this.contentView.addView(this.bottomOverlayChat, LayoutHelper.createFrame(-1, 51, 80));
        this.bottomOverlayChat.setOnClickListener(new ChatActivity$$Lambda$26(this));
        this.bottomOverlayChatText = new TextView(context);
        this.bottomOverlayChatText.setTextSize(1, 15.0f);
        this.bottomOverlayChatText.setTypeface(AndroidUtilities.getTypeface("fonts/rmedium.ttf"));
        this.bottomOverlayChatText.setTextColor(Theme.getColor("chat_fieldOverlayText"));
        this.bottomOverlayChat.addView(this.bottomOverlayChatText, LayoutHelper.createFrame(-2, -2, 17));
        this.bottomOverlayProgress = new RadialProgressView(context);
        this.bottomOverlayProgress.setSize(AndroidUtilities.dp(22.0f));
        this.bottomOverlayProgress.setProgressColor(Theme.getColor("chat_fieldOverlayText"));
        this.bottomOverlayProgress.setVisibility(4);
        this.bottomOverlayProgress.setScaleX(0.1f);
        this.bottomOverlayProgress.setScaleY(0.1f);
        this.bottomOverlayProgress.setAlpha(1.0f);
        this.bottomOverlayChat.addView(this.bottomOverlayProgress, LayoutHelper.createFrame(30, 30, 17));
        this.contentView.addView(this.searchContainer, LayoutHelper.createFrame(-1, 51, 80));
        this.undoView = new UndoView(context);
        this.contentView.addView(this.undoView, LayoutHelper.createFrame(-1, -2, 83));
        this.chatAdapter.updateRows();
        if (this.loading && this.messages.isEmpty()) {
            this.progressView.setVisibility(this.chatAdapter.botInfoRow == -1 ? 0 : 4);
            this.chatListView.setEmptyView(null);
        } else {
            this.progressView.setVisibility(4);
            this.chatListView.setEmptyView(this.emptyViewContainer);
        }
        checkBotKeyboard();
        updateContactStatus();
        updateBottomOverlay();
        updateSecretStatus();
        updateSpamView();
        updatePinnedMessageView(true);
        try {
            if (this.currentEncryptedChat != null && VERSION.SDK_INT >= 23 && (SharedConfig.passcodeHash.length() == 0 || SharedConfig.allowScreenCapture)) {
                MediaController.getInstance().setFlagSecure(this, true);
            }
        } catch (Throwable e2) {
            FileLog.e(e2);
        }
        if (oldMessage != null) {
            this.chatActivityEnterView.setFieldText(oldMessage);
        }
        fixLayoutInternal();
        return this.fragmentView;
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$6$ChatActivity(View view) {
        if (this.floatingDateView.getAlpha() != 0.0f) {
            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(((long) this.floatingDateView.getCustomDate()) * 1000);
            int year = calendar.get(1);
            int monthOfYear = calendar.get(2);
            int dayOfMonth = calendar.get(5);
            calendar.clear();
            calendar.set(year, monthOfYear, dayOfMonth);
            jumpToDate((int) (calendar.getTime().getTime() / 1000));
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$7$ChatActivity(View v) {
        this.wasManualScroll = true;
        if (this.chatInfo != null) {
            scrollToMessageId(this.chatInfo.pinned_msg_id, 0, true, 0, false);
        } else if (this.userInfo != null) {
            scrollToMessageId(this.userInfo.pinned_msg_id, 0, true, 0, false);
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$9$ChatActivity(View v) {
        if (getParentActivity() != null) {
            boolean allowPin;
            if (this.currentChat != null) {
                allowPin = ChatObject.canPinMessages(this.currentChat);
            } else if (this.currentEncryptedChat != null) {
                allowPin = false;
            } else if (this.userInfo != null) {
                allowPin = this.userInfo.can_pin_message;
            } else {
                allowPin = false;
            }
            if (allowPin) {
                AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
                builder.setMessage(LocaleController.getString("UnpinMessageAlert", NUM));
                builder.setPositiveButton(LocaleController.getString("OK", NUM), new ChatActivity$$Lambda$83(this));
                builder.setTitle(LocaleController.getString("AppName", NUM));
                builder.setNegativeButton(LocaleController.getString("Cancel", NUM), null);
                showDialog(builder.create());
                return;
            }
            SharedPreferences preferences = MessagesController.getNotificationsSettings(this.currentAccount);
            if (this.chatInfo != null) {
                preferences.edit().putInt("pin_" + this.dialog_id, this.chatInfo.pinned_msg_id).commit();
            } else if (this.userInfo != null) {
                preferences.edit().putInt("pin_" + this.dialog_id, this.userInfo.pinned_msg_id).commit();
            }
            updatePinnedMessageView(true);
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$8$ChatActivity(DialogInterface dialogInterface, int i) {
        MessagesController.getInstance(this.currentAccount).pinMessage(this.currentChat, this.currentUser, 0, false);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$10$ChatActivity(View v) {
        Bundle args = new Bundle();
        args.putInt("user_id", this.currentUser.id);
        args.putBoolean("addContact", true);
        presentFragment(new ContactAddActivity(args));
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$12$ChatActivity(View v) {
        if (getParentActivity() != null) {
            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
            if (ChatObject.isChannel(this.currentChat) && !this.currentChat.megagroup) {
                builder.setMessage(LocaleController.getString("ReportSpamAlertChannel", NUM));
            } else if (this.currentChat != null) {
                builder.setMessage(LocaleController.getString("ReportSpamAlertGroup", NUM));
            } else {
                builder.setMessage(LocaleController.getString("ReportSpamAlert", NUM));
            }
            builder.setTitle(LocaleController.getString("AppName", NUM));
            builder.setPositiveButton(LocaleController.getString("OK", NUM), new ChatActivity$$Lambda$82(this));
            builder.setNegativeButton(LocaleController.getString("Cancel", NUM), null);
            showDialog(builder.create());
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$11$ChatActivity(DialogInterface dialogInterface, int i) {
        if (this.currentUser != null) {
            MessagesController.getInstance(this.currentAccount).blockUser(this.currentUser.id);
        }
        MessagesController.getInstance(this.currentAccount).reportSpam(this.dialog_id, this.currentUser, this.currentChat, this.currentEncryptedChat);
        updateSpamView();
        if (this.currentChat == null) {
            MessagesController.getInstance(this.currentAccount).deleteDialog(this.dialog_id, 0);
        } else if (ChatObject.isNotInChat(this.currentChat)) {
            MessagesController.getInstance(this.currentAccount).deleteDialog(this.dialog_id, 0);
        } else {
            MessagesController.getInstance(this.currentAccount).deleteUserFromChat((int) (-this.dialog_id), MessagesController.getInstance(this.currentAccount).getUser(Integer.valueOf(UserConfig.getInstance(this.currentAccount).getClientUserId())), null);
        }
        finishFragment();
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$13$ChatActivity(View v) {
        MessagesController.getInstance(this.currentAccount).hideReportSpam(this.dialog_id, this.currentUser, this.currentChat);
        updateSpamView();
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$14$ChatActivity(View view) {
        this.wasManualScroll = true;
        this.checkTextureViewPosition = true;
        if (this.createUnreadMessageAfterId != 0) {
            scrollToMessageId(this.createUnreadMessageAfterId, 0, false, this.returnToLoadIndex, false);
        } else if (this.returnToMessageId > 0) {
            scrollToMessageId(this.returnToMessageId, 0, true, this.returnToLoadIndex, false);
        } else {
            scrollToLastMessage(true);
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ boolean lambda$createView$15$ChatActivity(View view) {
        for (int a = 0; a < this.messages.size(); a++) {
            MessageObject messageObject = (MessageObject) this.messages.get(a);
            if (messageObject.messageOwner.mentioned && !messageObject.isContentUnread()) {
                messageObject.setContentIsRead();
            }
        }
        this.newMentionsCount = 0;
        MessagesController.getInstance(this.currentAccount).markMentionsAsRead(this.dialog_id);
        this.hasAllMentionsLocal = true;
        showMentionDownButton(false, true);
        return true;
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ boolean lambda$createView$16$ChatActivity(View v, MotionEvent event) {
        return ContentPreviewViewer.getInstance().onTouch(event, this.mentionListView, 0, this.mentionsOnItemClickListener, null);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$17$ChatActivity(View view, int position) {
        if (!this.mentionsAdapter.isBannedInline()) {
            TLObject object = this.mentionsAdapter.getItem(position);
            int start = this.mentionsAdapter.getResultStartPosition();
            int len = this.mentionsAdapter.getResultLength();
            if (object instanceof User) {
                Spannable spannableString;
                if (this.searchingForUser && this.searchContainer.getVisibility() == 0) {
                    this.searchingUserMessages = (User) object;
                    if (this.searchingUserMessages != null) {
                        String name = this.searchingUserMessages.first_name;
                        if (TextUtils.isEmpty(name)) {
                            name = this.searchingUserMessages.last_name;
                        }
                        this.searchingForUser = false;
                        String from = LocaleController.getString("SearchFrom", NUM);
                        spannableString = new SpannableString(from + " " + name);
                        spannableString.setSpan(new ForegroundColorSpan(Theme.getColor("actionBarDefaultSubtitle")), from.length() + 1, spannableString.length(), 33);
                        this.searchItem.setSearchFieldCaption(spannableString);
                        this.mentionsAdapter.searchUsernameOrHashtag(null, 0, null, false);
                        this.searchItem.setSearchFieldHint(null);
                        this.searchItem.clearSearchText();
                        DataQuery.getInstance(this.currentAccount).searchMessagesInChat("", this.dialog_id, this.mergeDialogId, this.classGuid, 0, this.searchingUserMessages);
                        return;
                    }
                    return;
                }
                User user = (User) object;
                if (user == null) {
                    return;
                }
                if (user.username != null) {
                    this.chatActivityEnterView.replaceWithText(start, len, "@" + user.username + " ", false);
                    return;
                }
                spannableString = new SpannableString(UserObject.getFirstName(user, false) + " ");
                spannableString.setSpan(new URLSpanUserMention("" + user.id, 1), 0, spannableString.length(), 33);
                this.chatActivityEnterView.replaceWithText(start, len, spannableString, false);
            } else if (object instanceof String) {
                if (this.mentionsAdapter.isBotCommands()) {
                    SendMessagesHelper.getInstance(this.currentAccount).sendMessage((String) object, this.dialog_id, this.replyingMessageObject, null, false, null, null, null);
                    this.chatActivityEnterView.setFieldText("");
                    hideFieldPanel();
                    return;
                }
                this.chatActivityEnterView.replaceWithText(start, len, object + " ", false);
            } else if (object instanceof BotInlineResult) {
                if (this.chatActivityEnterView.getFieldText() != null) {
                    BotInlineResult result = (BotInlineResult) object;
                    if ((!result.type.equals("photo") || (result.photo == null && result.content == null)) && ((!result.type.equals("gif") || (result.document == null && result.content == null)) && (!result.type.equals("video") || result.document == null))) {
                        sendBotInlineResult(result);
                        return;
                    }
                    ArrayList<Object> arrayList = new ArrayList(this.mentionsAdapter.getSearchResultBotContext());
                    this.botContextResults = arrayList;
                    PhotoViewer.getInstance().setParentActivity(getParentActivity());
                    PhotoViewer.getInstance().openPhotoForSelect(arrayList, this.mentionsAdapter.getItemPosition(position), 3, this.botContextProvider, null);
                }
            } else if (object instanceof TL_inlineBotSwitchPM) {
                processInlineBotContextPM((TL_inlineBotSwitchPM) object);
            } else if (object instanceof EmojiSuggestion) {
                String code = ((EmojiSuggestion) object).emoji;
                this.chatActivityEnterView.addEmojiToRecent(code);
                this.chatActivityEnterView.replaceWithText(start, len, code, true);
            }
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ boolean lambda$createView$19$ChatActivity(View view, int position) {
        boolean z = false;
        if (getParentActivity() == null || !this.mentionsAdapter.isLongClickEnabled()) {
            return false;
        }
        Object object = this.mentionsAdapter.getItem(position);
        if (!(object instanceof String)) {
            return false;
        }
        if (!this.mentionsAdapter.isBotCommands()) {
            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
            builder.setTitle(LocaleController.getString("AppName", NUM));
            builder.setMessage(LocaleController.getString("ClearSearch", NUM));
            builder.setPositiveButton(LocaleController.getString("ClearButton", NUM).toUpperCase(), new ChatActivity$$Lambda$81(this));
            builder.setNegativeButton(LocaleController.getString("Cancel", NUM), null);
            showDialog(builder.create());
            return true;
        } else if (!URLSpanBotCommand.enabled) {
            return false;
        } else {
            this.chatActivityEnterView.setFieldText("");
            ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
            String str = (String) object;
            if (this.currentChat != null && this.currentChat.megagroup) {
                z = true;
            }
            chatActivityEnterView.setCommand(null, str, true, z);
            return true;
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$18$ChatActivity(DialogInterface dialogInterface, int i) {
        this.mentionsAdapter.clearRecentHashtags();
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ boolean lambda$createView$20$ChatActivity(View v, MotionEvent event) {
        if (event.getAction() == 0) {
            checkRecordLocked();
        }
        this.overlayView.getParent().requestDisallowInterceptTouchEvent(true);
        return true;
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$21$ChatActivity(View v) {
        if (this.forwardingMessages != null && !this.forwardingMessages.isEmpty()) {
            int N = this.forwardingMessages.size();
            for (int a = 0; a < N; a++) {
                MessageObject messageObject = (MessageObject) this.forwardingMessages.get(a);
                this.selectedMessagesIds[0].put(messageObject.getId(), messageObject);
            }
            Bundle args = new Bundle();
            args.putBoolean("onlySelect", true);
            args.putInt("dialogsType", 3);
            DialogsActivity fragment = new DialogsActivity(args);
            fragment.setDelegate(this);
            presentFragment(fragment);
        } else if (this.replyingMessageObject != null) {
            scrollToMessageId(this.replyingMessageObject.getId(), 0, true, 0, false);
        } else if (this.editingMessageObject != null && this.editingMessageObject.canEditMedia() && this.editingMessageObjectReqId == 0) {
            if (this.chatAttachAlert == null) {
                createChatAttachView();
            }
            this.chatAttachAlert.setEditingMessageObject(this.editingMessageObject);
            openAttachMenu();
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$22$ChatActivity(View v) {
        if (this.forwardingMessages != null) {
            this.forwardingMessages.clear();
        }
        showFieldPanel(false, null, null, null, this.foundWebPage, true);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ boolean lambda$createView$23$ChatActivity(ContentPreviewViewerDelegate contentPreviewViewerDelegate, View v, MotionEvent event) {
        return ContentPreviewViewer.getInstance().onTouch(event, this.stickersListView, 0, this.stickersOnItemClickListener, contentPreviewViewerDelegate);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$25$ChatActivity(View view) {
        DataQuery.getInstance(this.currentAccount).searchMessagesInChat(null, this.dialog_id, this.mergeDialogId, this.classGuid, 1, this.searchingUserMessages);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$26$ChatActivity(View view) {
        DataQuery.getInstance(this.currentAccount).searchMessagesInChat(null, this.dialog_id, this.mergeDialogId, this.classGuid, 2, this.searchingUserMessages);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$27$ChatActivity(View view) {
        this.mentionLayoutManager.setReverseLayout(true);
        this.mentionsAdapter.setSearchingMentions(true);
        this.searchCalendarButton.setVisibility(8);
        this.searchUserButton.setVisibility(8);
        this.searchingForUser = true;
        this.searchingUserMessages = null;
        this.searchItem.setSearchFieldHint(LocaleController.getString("SearchMembers", NUM));
        this.searchItem.setSearchFieldCaption(LocaleController.getString("SearchFrom", NUM));
        AndroidUtilities.showKeyboard(this.searchItem.getSearchField());
        this.searchItem.clearSearchText();
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$31$ChatActivity(View view) {
        if (getParentActivity() != null) {
            AndroidUtilities.hideKeyboard(this.searchItem.getSearchField());
            Calendar calendar = Calendar.getInstance();
            try {
                DatePickerDialog dialog = new DatePickerDialog(getParentActivity(), new ChatActivity$$Lambda$78(this), calendar.get(1), calendar.get(2), calendar.get(5));
                DatePicker datePicker = dialog.getDatePicker();
                datePicker.setMinDate(1375315200000L);
                datePicker.setMaxDate(System.currentTimeMillis());
                dialog.setButton(-1, LocaleController.getString("JumpToDate", NUM), dialog);
                dialog.setButton(-2, LocaleController.getString("Cancel", NUM), ChatActivity$$Lambda$79.$instance);
                if (VERSION.SDK_INT >= 21) {
                    dialog.setOnShowListener(new ChatActivity$$Lambda$80(datePicker));
                }
                showDialog(dialog);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$28$ChatActivity(DatePicker view1, int year1, int month, int dayOfMonth1) {
        Calendar calendar1 = Calendar.getInstance();
        calendar1.clear();
        calendar1.set(year1, month, dayOfMonth1);
        int date = (int) (calendar1.getTime().getTime() / 1000);
        clearChatData();
        this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
        MessagesController instance = MessagesController.getInstance(this.currentAccount);
        long j = this.dialog_id;
        int i = this.classGuid;
        boolean isChannel = ChatObject.isChannel(this.currentChat);
        int i2 = this.lastLoadIndex;
        this.lastLoadIndex = i2 + 1;
        instance.loadMessages(j, 30, 0, date, true, 0, i, 4, 0, isChannel, i2);
    }

    static final /* synthetic */ void lambda$null$29$ChatActivity(DialogInterface dialog1, int which) {
    }

    static final /* synthetic */ void lambda$null$30$ChatActivity(DatePicker datePicker, DialogInterface dialog12) {
        int count = datePicker.getChildCount();
        for (int a = 0; a < count; a++) {
            View child = datePicker.getChildAt(a);
            ViewGroup.LayoutParams layoutParams = child.getLayoutParams();
            layoutParams.width = -1;
            child.setLayoutParams(layoutParams);
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createView$34$ChatActivity(View view) {
        if (getParentActivity() != null) {
            if (this.currentUser == null || !this.userBlocked) {
                if (this.currentUser != null && this.currentUser.bot && this.botUser != null) {
                    if (this.botUser.length() != 0) {
                        MessagesController.getInstance(this.currentAccount).sendBotStart(this.currentUser, this.botUser);
                    } else {
                        SendMessagesHelper.getInstance(this.currentAccount).sendMessage("/start", this.dialog_id, null, null, false, null, null, null);
                    }
                    this.botUser = null;
                    updateBottomOverlay();
                } else if (!ChatObject.isChannel(this.currentChat) || (this.currentChat instanceof TL_channelForbidden)) {
                    AlertsCreator.createClearOrDeleteDialogAlert(this, false, this.currentChat, this.currentUser, this.currentEncryptedChat != null, new ChatActivity$$Lambda$77(this));
                } else if (ChatObject.isNotInChat(this.currentChat)) {
                    showBottomOverlayProgress(true, true);
                    MessagesController.getInstance(this.currentAccount).addUserToChat(this.currentChat.id, UserConfig.getInstance(this.currentAccount).getCurrentUser(), null, 0, null, this, null);
                    NotificationCenter.getGlobalInstance().postNotificationName(NotificationCenter.closeSearchByActiveAction, new Object[0]);
                } else {
                    toggleMute(true);
                }
            } else if (this.currentUser.bot) {
                String botUserLast = this.botUser;
                this.botUser = null;
                MessagesController.getInstance(this.currentAccount).unblockUser(this.currentUser.id);
                if (botUserLast == null || botUserLast.length() == 0) {
                    SendMessagesHelper.getInstance(this.currentAccount).sendMessage("/start", this.dialog_id, null, null, false, null, null, null);
                } else {
                    MessagesController.getInstance(this.currentAccount).sendBotStart(this.currentUser, botUserLast);
                }
            } else {
                AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
                builder.setMessage(LocaleController.getString("AreYouSureUnblockContact", NUM));
                builder.setPositiveButton(LocaleController.getString("OK", NUM), new ChatActivity$$Lambda$76(this));
                builder.setTitle(LocaleController.getString("AppName", NUM));
                builder.setNegativeButton(LocaleController.getString("Cancel", NUM), null);
                showDialog(builder.create());
            }
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$32$ChatActivity(DialogInterface dialogInterface, int i) {
        MessagesController.getInstance(this.currentAccount).unblockUser(this.currentUser.id);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$33$ChatActivity(boolean param) {
        NotificationCenter.getInstance(this.currentAccount).removeObserver(this, NotificationCenter.closeChats);
        NotificationCenter.getInstance(this.currentAccount).postNotificationName(NotificationCenter.closeChats, new Object[0]);
        NotificationCenter.getInstance(this.currentAccount).postNotificationName(NotificationCenter.needDeleteDialog, Long.valueOf(this.dialog_id), this.currentUser, this.currentChat, Boolean.valueOf(param));
        finishFragment();
    }

    private TextureView createTextureView(boolean add) {
        if (this.parentLayout == null) {
            return null;
        }
        if (this.videoPlayerContainer == null) {
            if (VERSION.SDK_INT >= 21) {
                this.videoPlayerContainer = new FrameLayout(getParentActivity()) {
                    public void setTranslationY(float translationY) {
                        super.setTranslationY(translationY);
                        ChatActivity.this.contentView.invalidate();
                    }
                };
                this.videoPlayerContainer.setOutlineProvider(new ViewOutlineProvider() {
                    @TargetApi(21)
                    public void getOutline(View view, Outline outline) {
                        if (view.getTag(NUM) != null) {
                            outline.setRoundRect(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight(), (float) AndroidUtilities.dp(4.0f));
                            return;
                        }
                        outline.setOval(0, 0, AndroidUtilities.roundMessageSize, AndroidUtilities.roundMessageSize);
                    }
                });
                this.videoPlayerContainer.setClipToOutline(true);
            } else {
                this.videoPlayerContainer = new FrameLayout(getParentActivity()) {
                    RectF rect = new RectF();

                    /* Access modifiers changed, original: protected */
                    public void onSizeChanged(int w, int h, int oldw, int oldh) {
                        super.onSizeChanged(w, h, oldw, oldh);
                        ChatActivity.this.aspectPath.reset();
                        if (getTag(NUM) != null) {
                            this.rect.set(0.0f, 0.0f, (float) w, (float) h);
                            ChatActivity.this.aspectPath.addRoundRect(this.rect, (float) AndroidUtilities.dp(4.0f), (float) AndroidUtilities.dp(4.0f), Direction.CW);
                        } else {
                            ChatActivity.this.aspectPath.addCircle((float) (w / 2), (float) (h / 2), (float) (w / 2), Direction.CW);
                        }
                        ChatActivity.this.aspectPath.toggleInverseFillType();
                    }

                    public void setTranslationY(float translationY) {
                        super.setTranslationY(translationY);
                        ChatActivity.this.contentView.invalidate();
                    }

                    public void setVisibility(int visibility) {
                        super.setVisibility(visibility);
                        if (visibility == 0) {
                            setLayerType(2, null);
                        }
                    }

                    /* Access modifiers changed, original: protected */
                    public void dispatchDraw(Canvas canvas) {
                        super.dispatchDraw(canvas);
                        if (getTag() == null) {
                            canvas.drawPath(ChatActivity.this.aspectPath, ChatActivity.this.aspectPaint);
                        }
                    }
                };
                this.aspectPath = new Path();
                this.aspectPaint = new Paint(1);
                this.aspectPaint.setColor(-16777216);
                this.aspectPaint.setXfermode(new PorterDuffXfermode(Mode.CLEAR));
            }
            this.videoPlayerContainer.setWillNotDraw(false);
            this.aspectRatioFrameLayout = new AspectRatioFrameLayout(getParentActivity());
            this.aspectRatioFrameLayout.setBackgroundColor(0);
            if (add) {
                this.videoPlayerContainer.addView(this.aspectRatioFrameLayout, LayoutHelper.createFrame(-1, -1, 17));
            }
            this.videoTextureView = new TextureView(getParentActivity());
            this.videoTextureView.setOpaque(false);
            this.aspectRatioFrameLayout.addView(this.videoTextureView, LayoutHelper.createFrame(-1, -1.0f));
        }
        ViewGroup parent = (ViewGroup) this.videoPlayerContainer.getParent();
        if (!(parent == null || parent == this.contentView)) {
            parent.removeView(this.videoPlayerContainer);
            parent = null;
        }
        if (parent == null) {
            this.contentView.addView(this.videoPlayerContainer, 1, new FrameLayout.LayoutParams(AndroidUtilities.roundMessageSize, AndroidUtilities.roundMessageSize));
        }
        this.videoPlayerContainer.setTag(null);
        this.aspectRatioFrameLayout.setDrawingReady(false);
        return this.videoTextureView;
    }

    private void destroyTextureView() {
        if (this.videoPlayerContainer != null && this.videoPlayerContainer.getParent() != null) {
            this.contentView.removeView(this.videoPlayerContainer);
            this.aspectRatioFrameLayout.setDrawingReady(false);
            this.videoPlayerContainer.setTag(null);
            if (VERSION.SDK_INT < 21) {
                this.videoPlayerContainer.setLayerType(0, null);
            }
        }
    }

    private void showBottomOverlayProgress(final boolean show, boolean animated) {
        int i = 4;
        float f = 0.1f;
        float f2 = 1.0f;
        if (show && this.bottomOverlayProgress.getTag() != null) {
            return;
        }
        if (show || this.bottomOverlayProgress.getTag() != null) {
            if (this.bottomOverlayAnimation != null) {
                this.bottomOverlayAnimation.cancel();
                this.bottomOverlayAnimation = null;
            }
            this.bottomOverlayProgress.setTag(show ? Integer.valueOf(1) : null);
            if (animated) {
                this.bottomOverlayAnimation = new AnimatorSet();
                AnimatorSet animatorSet;
                Animator[] animatorArr;
                if (show) {
                    this.bottomOverlayProgress.setVisibility(0);
                    animatorSet = this.bottomOverlayAnimation;
                    animatorArr = new Animator[6];
                    animatorArr[0] = ObjectAnimator.ofFloat(this.bottomOverlayChatText, "scaleX", new float[]{0.1f});
                    animatorArr[1] = ObjectAnimator.ofFloat(this.bottomOverlayChatText, "scaleY", new float[]{0.1f});
                    animatorArr[2] = ObjectAnimator.ofFloat(this.bottomOverlayChatText, "alpha", new float[]{0.0f});
                    animatorArr[3] = ObjectAnimator.ofFloat(this.bottomOverlayProgress, "scaleX", new float[]{1.0f});
                    animatorArr[4] = ObjectAnimator.ofFloat(this.bottomOverlayProgress, "scaleY", new float[]{1.0f});
                    animatorArr[5] = ObjectAnimator.ofFloat(this.bottomOverlayProgress, "alpha", new float[]{1.0f});
                    animatorSet.playTogether(animatorArr);
                } else {
                    this.bottomOverlayChatText.setVisibility(0);
                    animatorSet = this.bottomOverlayAnimation;
                    animatorArr = new Animator[6];
                    animatorArr[0] = ObjectAnimator.ofFloat(this.bottomOverlayProgress, "scaleX", new float[]{0.1f});
                    animatorArr[1] = ObjectAnimator.ofFloat(this.bottomOverlayProgress, "scaleY", new float[]{0.1f});
                    animatorArr[2] = ObjectAnimator.ofFloat(this.bottomOverlayProgress, "alpha", new float[]{0.0f});
                    animatorArr[3] = ObjectAnimator.ofFloat(this.bottomOverlayChatText, "scaleX", new float[]{1.0f});
                    animatorArr[4] = ObjectAnimator.ofFloat(this.bottomOverlayChatText, "scaleY", new float[]{1.0f});
                    animatorArr[5] = ObjectAnimator.ofFloat(this.bottomOverlayChatText, "alpha", new float[]{1.0f});
                    animatorSet.playTogether(animatorArr);
                }
                this.bottomOverlayAnimation.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        if (ChatActivity.this.bottomOverlayAnimation != null && ChatActivity.this.bottomOverlayAnimation.equals(animation)) {
                            if (show) {
                                ChatActivity.this.bottomOverlayChatText.setVisibility(4);
                            } else {
                                ChatActivity.this.bottomOverlayProgress.setVisibility(4);
                            }
                        }
                    }

                    public void onAnimationCancel(Animator animation) {
                        if (ChatActivity.this.bottomOverlayAnimation != null && ChatActivity.this.bottomOverlayAnimation.equals(animation)) {
                            ChatActivity.this.bottomOverlayAnimation = null;
                        }
                    }
                });
                this.bottomOverlayAnimation.setDuration(150);
                this.bottomOverlayAnimation.start();
                return;
            }
            float f3;
            this.bottomOverlayProgress.setVisibility(show ? 0 : 4);
            RadialProgressView radialProgressView = this.bottomOverlayProgress;
            if (show) {
                f3 = 1.0f;
            } else {
                f3 = 0.1f;
            }
            radialProgressView.setScaleX(f3);
            radialProgressView = this.bottomOverlayProgress;
            if (show) {
                f3 = 1.0f;
            } else {
                f3 = 0.1f;
            }
            radialProgressView.setScaleY(f3);
            RadialProgressView radialProgressView2 = this.bottomOverlayProgress;
            if (show) {
            }
            radialProgressView2.setAlpha(1.0f);
            TextView textView = this.bottomOverlayChatText;
            if (!show) {
                i = 0;
            }
            textView.setVisibility(i);
            TextView textView2 = this.bottomOverlayChatText;
            if (show) {
                f3 = 0.1f;
            } else {
                f3 = 1.0f;
            }
            textView2.setScaleX(f3);
            textView = this.bottomOverlayChatText;
            if (!show) {
                f = 1.0f;
            }
            textView.setScaleY(f);
            textView = this.bottomOverlayChatText;
            if (show) {
                f2 = 0.0f;
            }
            textView.setAlpha(f2);
        }
    }

    private void sendBotInlineResult(BotInlineResult result) {
        int uid = this.mentionsAdapter.getContextBotId();
        HashMap<String, String> params = new HashMap();
        params.put("id", result.id);
        params.put("query_id", "" + result.query_id);
        params.put("bot", "" + uid);
        params.put("bot_name", this.mentionsAdapter.getContextBotName());
        SendMessagesHelper.prepareSendingBotContextResult(result, params, this.dialog_id, this.replyingMessageObject);
        this.chatActivityEnterView.setFieldText("");
        hideFieldPanel();
        DataQuery.getInstance(this.currentAccount).increaseInlineRaiting(uid);
    }

    private void mentionListViewUpdateLayout() {
        if (this.mentionListView.getChildCount() <= 0) {
            this.mentionListViewScrollOffsetY = 0;
            this.mentionListViewLastViewPosition = -1;
            return;
        }
        View child = this.mentionListView.getChildAt(this.mentionListView.getChildCount() - 1);
        Holder holder = (Holder) this.mentionListView.findContainingViewHolder(child);
        int newOffset;
        RecyclerListView recyclerListView;
        if (this.mentionLayoutManager.getReverseLayout()) {
            if (holder != null) {
                this.mentionListViewLastViewPosition = holder.getAdapterPosition();
                this.mentionListViewLastViewTop = child.getBottom();
            } else {
                this.mentionListViewLastViewPosition = -1;
            }
            child = this.mentionListView.getChildAt(0);
            holder = (Holder) this.mentionListView.findContainingViewHolder(child);
            newOffset = (child.getBottom() >= this.mentionListView.getMeasuredHeight() || holder == null || holder.getAdapterPosition() != 0) ? this.mentionListView.getMeasuredHeight() : child.getBottom();
            if (this.mentionListViewScrollOffsetY != newOffset) {
                recyclerListView = this.mentionListView;
                this.mentionListViewScrollOffsetY = newOffset;
                recyclerListView.setBottomGlowOffset(newOffset);
                this.mentionListView.setTopGlowOffset(0);
                this.mentionListView.invalidate();
                this.mentionContainer.invalidate();
                return;
            }
            return;
        }
        if (holder != null) {
            this.mentionListViewLastViewPosition = holder.getAdapterPosition();
            this.mentionListViewLastViewTop = child.getTop();
        } else {
            this.mentionListViewLastViewPosition = -1;
        }
        child = this.mentionListView.getChildAt(0);
        holder = (Holder) this.mentionListView.findContainingViewHolder(child);
        if (child.getTop() <= 0 || holder == null || holder.getAdapterPosition() != 0) {
            newOffset = 0;
        } else {
            newOffset = child.getTop();
        }
        if (this.mentionListViewScrollOffsetY != newOffset) {
            recyclerListView = this.mentionListView;
            this.mentionListViewScrollOffsetY = newOffset;
            recyclerListView.setTopGlowOffset(newOffset);
            this.mentionListView.setBottomGlowOffset(0);
            this.mentionListView.invalidate();
            this.mentionContainer.invalidate();
        }
    }

    private void checkBotCommands() {
        boolean z = true;
        URLSpanBotCommand.enabled = false;
        if (this.currentUser != null && this.currentUser.bot) {
            URLSpanBotCommand.enabled = true;
        } else if (this.chatInfo instanceof TL_chatFull) {
            int a = 0;
            while (a < this.chatInfo.participants.participants.size()) {
                User user = MessagesController.getInstance(this.currentAccount).getUser(Integer.valueOf(((ChatParticipant) this.chatInfo.participants.participants.get(a)).user_id));
                if (user == null || !user.bot) {
                    a++;
                } else {
                    URLSpanBotCommand.enabled = true;
                    return;
                }
            }
        } else if (this.chatInfo instanceof TL_channelFull) {
            if (this.chatInfo.bot_info.isEmpty() || this.currentChat == null || !this.currentChat.megagroup) {
                z = false;
            }
            URLSpanBotCommand.enabled = z;
        }
    }

    private GroupedMessages getValidGroupedMessage(MessageObject message) {
        if (message.getGroupId() == 0) {
            return null;
        }
        GroupedMessages groupedMessages = (GroupedMessages) this.groupedMessagesMap.get(message.getGroupId());
        if (groupedMessages == null) {
            return groupedMessages;
        }
        if (groupedMessages.messages.size() <= 1 || groupedMessages.positions.get(message) == null) {
            return null;
        }
        return groupedMessages;
    }

    private void jumpToDate(int date) {
        if (!this.messages.isEmpty()) {
            MessageObject lastMessage = (MessageObject) this.messages.get(this.messages.size() - 1);
            if (((MessageObject) this.messages.get(0)).messageOwner.date >= date && lastMessage.messageOwner.date <= date) {
                int a = this.messages.size() - 1;
                while (a >= 0) {
                    MessageObject message = (MessageObject) this.messages.get(a);
                    if (message.messageOwner.date < date || message.getId() == 0) {
                        a--;
                    } else {
                        scrollToMessageId(message.getId(), 0, false, message.getDialogId() == this.mergeDialogId ? 1 : 0, false);
                        return;
                    }
                }
            } else if (((int) this.dialog_id) != 0) {
                clearChatData();
                this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                MessagesController instance = MessagesController.getInstance(this.currentAccount);
                long j = this.dialog_id;
                int i = this.classGuid;
                boolean isChannel = ChatObject.isChannel(this.currentChat);
                int i2 = this.lastLoadIndex;
                this.lastLoadIndex = i2 + 1;
                instance.loadMessages(j, 30, 0, date, true, 0, i, 4, 0, isChannel, i2);
                this.floatingDateView.setAlpha(0.0f);
                this.floatingDateView.setTag(null);
            }
        }
    }

    public void processInlineBotContextPM(TL_inlineBotSwitchPM object) {
        if (object != null) {
            User user = this.mentionsAdapter.getContextBotUser();
            if (user != null) {
                this.chatActivityEnterView.setFieldText("");
                if (this.dialog_id == ((long) user.id)) {
                    this.inlineReturn = this.dialog_id;
                    MessagesController.getInstance(this.currentAccount).sendBotStart(this.currentUser, object.start_param);
                    return;
                }
                Bundle args = new Bundle();
                args.putInt("user_id", user.id);
                args.putString("inline_query", object.start_param);
                args.putLong("inline_return", this.dialog_id);
                if (MessagesController.getInstance(this.currentAccount).checkCanOpenChat(args, this)) {
                    presentFragment(new ChatActivity(args));
                }
            }
        }
    }

    private void createChatAttachView() {
        if (getParentActivity() != null && this.chatAttachAlert == null) {
            this.chatAttachAlert = new ChatAttachAlert(getParentActivity(), this);
            this.chatAttachAlert.setDelegate(new ChatAttachViewDelegate() {
                public void didPressedButton(int button) {
                    boolean z = false;
                    if (ChatActivity.this.getParentActivity() != null && ChatActivity.this.chatAttachAlert != null) {
                        if (ChatActivity.this.chatAttachAlert != null) {
                            ChatActivity.this.editingMessageObject = ChatActivity.this.chatAttachAlert.getEditingMessageObject();
                        } else {
                            ChatActivity.this.editingMessageObject = null;
                        }
                        if (button == 8 || button == 7 || (button == 4 && !ChatActivity.this.chatAttachAlert.getSelectedPhotos().isEmpty())) {
                            if (button != 8) {
                                ChatActivity.this.chatAttachAlert.dismiss();
                            }
                            HashMap<Object, Object> selectedPhotos = ChatActivity.this.chatAttachAlert.getSelectedPhotos();
                            ArrayList<Object> selectedPhotosOrder = ChatActivity.this.chatAttachAlert.getSelectedPhotosOrder();
                            if (!selectedPhotos.isEmpty()) {
                                ArrayList<SendingMediaInfo> photos = new ArrayList();
                                for (int a = 0; a < selectedPhotosOrder.size(); a++) {
                                    String charSequence;
                                    ArrayList arrayList;
                                    PhotoEntry photoEntry = (PhotoEntry) selectedPhotos.get(selectedPhotosOrder.get(a));
                                    SendingMediaInfo info = new SendingMediaInfo();
                                    if (photoEntry.imagePath != null) {
                                        info.path = photoEntry.imagePath;
                                    } else if (photoEntry.path != null) {
                                        info.path = photoEntry.path;
                                    }
                                    info.isVideo = photoEntry.isVideo;
                                    if (photoEntry.caption != null) {
                                        charSequence = photoEntry.caption.toString();
                                    } else {
                                        charSequence = null;
                                    }
                                    info.caption = charSequence;
                                    info.entities = photoEntry.entities;
                                    if (photoEntry.stickers.isEmpty()) {
                                        arrayList = null;
                                    } else {
                                        arrayList = new ArrayList(photoEntry.stickers);
                                    }
                                    info.masks = arrayList;
                                    info.ttl = photoEntry.ttl;
                                    info.videoEditedInfo = photoEntry.editedInfo;
                                    info.canDeleteAfter = photoEntry.canDeleteAfter;
                                    photos.add(info);
                                    photoEntry.reset();
                                }
                                ChatActivity.this.fillEditingMediaWithCaption(((SendingMediaInfo) photos.get(0)).caption, ((SendingMediaInfo) photos.get(0)).entities);
                                long access$2300 = ChatActivity.this.dialog_id;
                                MessageObject access$2400 = ChatActivity.this.replyingMessageObject;
                                if (button == 4) {
                                    z = true;
                                }
                                SendMessagesHelper.prepareSendingMedia(photos, access$2300, access$2400, null, z, SharedConfig.groupPhotosEnabled, ChatActivity.this.editingMessageObject);
                                ChatActivity.this.hideFieldPanel();
                                DataQuery.getInstance(ChatActivity.this.currentAccount).cleanDraft(ChatActivity.this.dialog_id, true);
                                return;
                            }
                            return;
                        }
                        if (ChatActivity.this.chatAttachAlert != null) {
                            ChatActivity.this.chatAttachAlert.dismissWithButtonClick(button);
                        }
                        ChatActivity.this.processSelectedAttach(button);
                    }
                }

                public View getRevealView() {
                    return ChatActivity.this.chatActivityEnterView.getAttachButton();
                }

                public void didSelectBot(User user) {
                    if (ChatActivity.this.chatActivityEnterView != null && !TextUtils.isEmpty(user.username)) {
                        ChatActivity.this.chatActivityEnterView.setFieldText("@" + user.username + " ");
                        ChatActivity.this.chatActivityEnterView.openKeyboard();
                    }
                }

                public void onCameraOpened() {
                    ChatActivity.this.chatActivityEnterView.closeKeyboard();
                }

                public boolean allowGroupPhotos() {
                    return ChatActivity.this.allowGroupPhotos();
                }
            });
        }
    }

    public long getDialogId() {
        return this.dialog_id;
    }

    public void setBotUser(String value) {
        if (this.inlineReturn != 0) {
            MessagesController.getInstance(this.currentAccount).sendBotStart(this.currentUser, value);
            return;
        }
        this.botUser = value;
        updateBottomOverlay();
    }

    public boolean playFirstUnreadVoiceMessage() {
        if (this.chatActivityEnterView != null && this.chatActivityEnterView.isRecordingAudioVideo()) {
            return true;
        }
        for (int a = this.messages.size() - 1; a >= 0; a--) {
            MessageObject messageObject = (MessageObject) this.messages.get(a);
            if ((messageObject.isVoice() || messageObject.isRoundVideo()) && messageObject.isContentUnread() && !messageObject.isOut()) {
                MediaController.getInstance().setVoiceMessagesPlaylist(MediaController.getInstance().playMessage(messageObject) ? createVoiceMessagesPlaylist(messageObject, true) : null, true);
                return true;
            }
        }
        if (VERSION.SDK_INT < 23 || getParentActivity() == null || getParentActivity().checkSelfPermission("android.permission.RECORD_AUDIO") == 0) {
            return false;
        }
        getParentActivity().requestPermissions(new String[]{"android.permission.RECORD_AUDIO"}, 3);
        return true;
    }

    private void initStickers() {
        if (this.chatActivityEnterView != null && getParentActivity() != null && this.stickersAdapter == null) {
            if (this.currentEncryptedChat == null || AndroidUtilities.getPeerLayerVersion(this.currentEncryptedChat.layer) >= 23) {
                this.stickersListView.setPadding(AndroidUtilities.dp(18.0f), 0, AndroidUtilities.dp(18.0f), 0);
                RecyclerListView recyclerListView = this.stickersListView;
                StickersAdapter stickersAdapter = new StickersAdapter(getParentActivity(), new ChatActivity$$Lambda$27(this));
                this.stickersAdapter = stickersAdapter;
                recyclerListView.setAdapter(stickersAdapter);
                recyclerListView = this.stickersListView;
                OnItemClickListener chatActivity$$Lambda$28 = new ChatActivity$$Lambda$28(this);
                this.stickersOnItemClickListener = chatActivity$$Lambda$28;
                recyclerListView.setOnItemClickListener(chatActivity$$Lambda$28);
            }
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$initStickers$35$ChatActivity(final boolean show) {
        float f = 1.0f;
        if (show && this.stickersPanel.getTag() != null) {
            return;
        }
        if (show || this.stickersPanel.getTag() != null) {
            if (show) {
                this.stickersListView.setPadding(AndroidUtilities.dp(18.0f), this.stickersAdapter.isShowingKeywords() ? AndroidUtilities.dp(24.0f) : 0, AndroidUtilities.dp(18.0f), 0);
                this.stickersListView.scrollToPosition(0);
                this.stickersPanel.setVisibility(this.allowStickersPanel ? 0 : 4);
                this.stickersPanel.setTag(Integer.valueOf(1));
                ((FrameLayout.LayoutParams) this.stickersPanelArrow.getLayoutParams()).gravity = (this.chatActivityEnterView.isRtlText() ? 5 : 3) | 80;
                this.stickersPanelArrow.requestLayout();
            } else {
                this.stickersPanel.setTag(null);
            }
            if (this.runningAnimation != null) {
                this.runningAnimation.cancel();
                this.runningAnimation = null;
            }
            if (this.stickersPanel.getVisibility() != 4) {
                float f2;
                this.runningAnimation = new AnimatorSet();
                AnimatorSet animatorSet = this.runningAnimation;
                Animator[] animatorArr = new Animator[1];
                FrameLayout frameLayout = this.stickersPanel;
                String str = "alpha";
                float[] fArr = new float[2];
                if (show) {
                    f2 = 0.0f;
                } else {
                    f2 = 1.0f;
                }
                fArr[0] = f2;
                if (!show) {
                    f = 0.0f;
                }
                fArr[1] = f;
                animatorArr[0] = ObjectAnimator.ofFloat(frameLayout, str, fArr);
                animatorSet.playTogether(animatorArr);
                this.runningAnimation.setDuration(150);
                this.runningAnimation.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        if (ChatActivity.this.runningAnimation != null && ChatActivity.this.runningAnimation.equals(animation)) {
                            if (!show) {
                                ChatActivity.this.stickersAdapter.clearStickers();
                                ChatActivity.this.stickersPanel.setVisibility(8);
                                if (ContentPreviewViewer.getInstance().isVisible()) {
                                    ContentPreviewViewer.getInstance().close();
                                }
                                ContentPreviewViewer.getInstance().reset();
                            }
                            ChatActivity.this.runningAnimation = null;
                        }
                    }

                    public void onAnimationCancel(Animator animation) {
                        if (ChatActivity.this.runningAnimation != null && ChatActivity.this.runningAnimation.equals(animation)) {
                            ChatActivity.this.runningAnimation = null;
                        }
                    }
                });
                this.runningAnimation.start();
            } else if (!show) {
                this.stickersPanel.setVisibility(8);
            }
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$initStickers$36$ChatActivity(View view, int position) {
        TL_document item = this.stickersAdapter.getItem(position);
        Object parent = this.stickersAdapter.getItemParent(position);
        if (item instanceof TL_document) {
            TL_document document = item;
            SendMessagesHelper.getInstance(this.currentAccount).sendSticker(document, this.dialog_id, this.replyingMessageObject, parent);
            hideFieldPanel();
            this.chatActivityEnterView.addStickerToRecent(document);
            this.chatActivityEnterView.setFieldText("");
        } else if (item instanceof String) {
            SpannableString string = new SpannableString((String) item);
            Emoji.replaceEmoji(string, this.chatActivityEnterView.getEditField().getPaint().getFontMetricsInt(), AndroidUtilities.dp(20.0f), false);
            this.stickersAdapter.loadStikersForEmoji("", false);
            this.chatActivityEnterView.setFieldText(string, false);
        }
    }

    public void shareMyContact(MessageObject messageObject) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
        builder.setTitle(LocaleController.getString("ShareYouPhoneNumberTitle", NUM));
        if (this.currentUser == null) {
            builder.setMessage(LocaleController.getString("AreYouSureShareMyContactInfo", NUM));
        } else if (this.currentUser.bot) {
            builder.setMessage(LocaleController.getString("AreYouSureShareMyContactInfoBot", NUM));
        } else {
            builder.setMessage(AndroidUtilities.replaceTags(LocaleController.formatString("AreYouSureShareMyContactInfoUser", NUM, PhoneFormat.getInstance().format("+" + UserConfig.getInstance(this.currentAccount).getCurrentUser().phone), ContactsController.formatName(this.currentUser.first_name, this.currentUser.last_name))));
        }
        builder.setPositiveButton(LocaleController.getString("OK", NUM), new ChatActivity$$Lambda$29(this, messageObject));
        builder.setNegativeButton(LocaleController.getString("Cancel", NUM), null);
        showDialog(builder.create());
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$shareMyContact$37$ChatActivity(MessageObject messageObject, DialogInterface dialogInterface, int i) {
        SendMessagesHelper.getInstance(this.currentAccount).sendMessage(UserConfig.getInstance(this.currentAccount).getCurrentUser(), this.dialog_id, messageObject, null, null);
        moveScrollToLastMessage();
        hideFieldPanel();
    }

    private void hideVoiceHint() {
        this.voiceHintAnimation = new AnimatorSet();
        AnimatorSet animatorSet = this.voiceHintAnimation;
        Animator[] animatorArr = new Animator[1];
        animatorArr[0] = ObjectAnimator.ofFloat(this.voiceHintTextView, "alpha", new float[]{0.0f});
        animatorSet.playTogether(animatorArr);
        this.voiceHintAnimation.addListener(new AnimatorListenerAdapter() {
            public void onAnimationEnd(Animator animation) {
                if (animation.equals(ChatActivity.this.voiceHintAnimation)) {
                    ChatActivity.this.voiceHintAnimation = null;
                    ChatActivity.this.voiceHintHideRunnable = null;
                    if (ChatActivity.this.voiceHintTextView != null) {
                        ChatActivity.this.voiceHintTextView.setVisibility(8);
                    }
                }
            }

            public void onAnimationCancel(Animator animation) {
                if (animation.equals(ChatActivity.this.voiceHintAnimation)) {
                    ChatActivity.this.voiceHintHideRunnable = null;
                    ChatActivity.this.voiceHintHideRunnable = null;
                }
            }
        });
        this.voiceHintAnimation.setDuration(300);
        this.voiceHintAnimation.start();
    }

    private void showVoiceHint(boolean hide, boolean video) {
        if (getParentActivity() != null && this.fragmentView != null) {
            if (!hide || this.voiceHintTextView != null) {
                if (this.voiceHintTextView == null) {
                    SizeNotifierFrameLayout frameLayout = this.fragmentView;
                    int index = frameLayout.indexOfChild(this.chatActivityEnterView);
                    if (index != -1) {
                        this.voiceHintTextView = new TextView(getParentActivity());
                        this.voiceHintTextView.setBackgroundDrawable(Theme.createRoundRectDrawable(AndroidUtilities.dp(3.0f), Theme.getColor("chat_gifSaveHintBackground")));
                        this.voiceHintTextView.setTextColor(Theme.getColor("chat_gifSaveHintText"));
                        this.voiceHintTextView.setTextSize(1, 14.0f);
                        this.voiceHintTextView.setPadding(AndroidUtilities.dp(8.0f), AndroidUtilities.dp(7.0f), AndroidUtilities.dp(8.0f), AndroidUtilities.dp(7.0f));
                        this.voiceHintTextView.setGravity(16);
                        this.voiceHintTextView.setAlpha(0.0f);
                        frameLayout.addView(this.voiceHintTextView, index + 1, LayoutHelper.createFrame(-2, -2.0f, 85, 5.0f, 0.0f, 5.0f, 3.0f));
                    } else {
                        return;
                    }
                }
                if (hide) {
                    if (this.voiceHintAnimation != null) {
                        this.voiceHintAnimation.cancel();
                        this.voiceHintAnimation = null;
                    }
                    AndroidUtilities.cancelRunOnUIThread(this.voiceHintHideRunnable);
                    this.voiceHintHideRunnable = null;
                    if (this.voiceHintTextView.getVisibility() == 0) {
                        hideVoiceHint();
                        return;
                    }
                    return;
                }
                this.voiceHintTextView.setText(video ? LocaleController.getString("HoldToVideo", NUM) : LocaleController.getString("HoldToAudio", NUM));
                if (this.voiceHintHideRunnable != null) {
                    if (this.voiceHintAnimation != null) {
                        this.voiceHintAnimation.cancel();
                        this.voiceHintAnimation = null;
                    } else {
                        AndroidUtilities.cancelRunOnUIThread(this.voiceHintHideRunnable);
                        ChatActivity$$Lambda$30 chatActivity$$Lambda$30 = new ChatActivity$$Lambda$30(this);
                        this.voiceHintHideRunnable = chatActivity$$Lambda$30;
                        AndroidUtilities.runOnUIThread(chatActivity$$Lambda$30, 2000);
                        return;
                    }
                } else if (this.voiceHintAnimation != null) {
                    return;
                }
                this.voiceHintTextView.setVisibility(0);
                this.voiceHintAnimation = new AnimatorSet();
                AnimatorSet animatorSet = this.voiceHintAnimation;
                Animator[] animatorArr = new Animator[1];
                animatorArr[0] = ObjectAnimator.ofFloat(this.voiceHintTextView, "alpha", new float[]{1.0f});
                animatorSet.playTogether(animatorArr);
                this.voiceHintAnimation.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        if (animation.equals(ChatActivity.this.voiceHintAnimation)) {
                            ChatActivity.this.voiceHintAnimation = null;
                            AndroidUtilities.runOnUIThread(ChatActivity.this.voiceHintHideRunnable = new ChatActivity$37$$Lambda$0(this), 2000);
                        }
                    }

                    /* Access modifiers changed, original: final|synthetic */
                    public final /* synthetic */ void lambda$onAnimationEnd$0$ChatActivity$37() {
                        ChatActivity.this.hideVoiceHint();
                    }

                    public void onAnimationCancel(Animator animation) {
                        if (animation.equals(ChatActivity.this.voiceHintAnimation)) {
                            ChatActivity.this.voiceHintAnimation = null;
                        }
                    }
                });
                this.voiceHintAnimation.setDuration(300);
                this.voiceHintAnimation.start();
            }
        }
    }

    private void showMediaBannedHint() {
        if (getParentActivity() != null && this.currentChat != null && this.fragmentView != null) {
            if (this.mediaBanTooltip == null || this.mediaBanTooltip.getVisibility() != 0) {
                SizeNotifierFrameLayout frameLayout = this.fragmentView;
                int index = frameLayout.indexOfChild(this.chatActivityEnterView);
                if (index != -1) {
                    if (this.mediaBanTooltip == null) {
                        this.mediaBanTooltip = new CorrectlyMeasuringTextView(getParentActivity());
                        this.mediaBanTooltip.setBackgroundDrawable(Theme.createRoundRectDrawable(AndroidUtilities.dp(3.0f), Theme.getColor("chat_gifSaveHintBackground")));
                        this.mediaBanTooltip.setTextColor(Theme.getColor("chat_gifSaveHintText"));
                        this.mediaBanTooltip.setPadding(AndroidUtilities.dp(8.0f), AndroidUtilities.dp(7.0f), AndroidUtilities.dp(8.0f), AndroidUtilities.dp(7.0f));
                        this.mediaBanTooltip.setGravity(16);
                        this.mediaBanTooltip.setTextSize(1, 14.0f);
                        this.mediaBanTooltip.setVisibility(8);
                        frameLayout.addView(this.mediaBanTooltip, index + 1, LayoutHelper.createFrame(-2, -2.0f, 85, 30.0f, 0.0f, 5.0f, 3.0f));
                    }
                    if (ChatObject.isActionBannedByDefault(this.currentChat, 7)) {
                        this.mediaBanTooltip.setText(LocaleController.getString("GlobalAttachMediaRestricted", NUM));
                    } else if (this.currentChat.banned_rights == null) {
                        return;
                    } else {
                        if (AndroidUtilities.isBannedForever(this.currentChat.banned_rights)) {
                            this.mediaBanTooltip.setText(LocaleController.getString("AttachMediaRestrictedForever", NUM));
                        } else {
                            this.mediaBanTooltip.setText(LocaleController.formatString("AttachMediaRestricted", NUM, LocaleController.formatDateForBan((long) this.currentChat.banned_rights.until_date)));
                        }
                    }
                    this.mediaBanTooltip.setVisibility(0);
                    AnimatorSet AnimatorSet = new AnimatorSet();
                    AnimatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this.mediaBanTooltip, "alpha", new float[]{0.0f, 1.0f})});
                    AnimatorSet.addListener(new AnimatorListenerAdapter() {
                        public void onAnimationEnd(Animator animation) {
                            AndroidUtilities.runOnUIThread(new ChatActivity$38$$Lambda$0(this), 5000);
                        }

                        /* Access modifiers changed, original: final|synthetic */
                        public final /* synthetic */ void lambda$onAnimationEnd$0$ChatActivity$38() {
                            if (ChatActivity.this.mediaBanTooltip != null) {
                                AnimatorSet AnimatorSet = new AnimatorSet();
                                Animator[] animatorArr = new Animator[1];
                                animatorArr[0] = ObjectAnimator.ofFloat(ChatActivity.this.mediaBanTooltip, "alpha", new float[]{0.0f});
                                AnimatorSet.playTogether(animatorArr);
                                AnimatorSet.addListener(new AnimatorListenerAdapter() {
                                    public void onAnimationEnd(Animator animation) {
                                        if (ChatActivity.this.mediaBanTooltip != null) {
                                            ChatActivity.this.mediaBanTooltip.setVisibility(8);
                                        }
                                    }
                                });
                                AnimatorSet.setDuration(300);
                                AnimatorSet.start();
                            }
                        }
                    });
                    AnimatorSet.setDuration(300);
                    AnimatorSet.start();
                }
            }
        }
    }

    private void showNoSoundHint() {
        if (!this.scrollingChatListView && !SharedConfig.noSoundHintShowed && this.chatListView != null && getParentActivity() != null && this.fragmentView != null) {
            if (this.noSoundHintView == null || this.noSoundHintView.getTag() == null) {
                if (this.noSoundHintView == null) {
                    SizeNotifierFrameLayout frameLayout = this.fragmentView;
                    int index = frameLayout.indexOfChild(this.chatActivityEnterView);
                    if (index != -1) {
                        this.noSoundHintView = new HintView(getParentActivity(), 0);
                        frameLayout.addView(this.noSoundHintView, index + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 19.0f, 0.0f, 19.0f, 0.0f));
                        this.noSoundHintView.setAlpha(0.0f);
                        this.noSoundHintView.setVisibility(4);
                    } else {
                        return;
                    }
                }
                int count = this.chatListView.getChildCount();
                for (int a = 0; a < count; a++) {
                    View child = this.chatListView.getChildAt(a);
                    if (child instanceof ChatMessageCell) {
                        ChatMessageCell messageCell = (ChatMessageCell) child;
                        MessageObject messageObject = messageCell.getMessageObject();
                        if (messageObject != null && messageObject.isVideo()) {
                            AnimatedFileDrawable animation = messageCell.getPhotoImage().getAnimation();
                            if (animation != null && animation.getCurrentProgressMs() >= 3000 && this.noSoundHintView.showForMessageCell(messageCell, true)) {
                                SharedConfig.setNoSoundHintShowed(true);
                                return;
                            }
                        }
                    }
                }
            }
        }
    }

    private void showForwardHint(ChatMessageCell cell) {
        if (!this.scrollingChatListView && this.chatListView != null && getParentActivity() != null && this.fragmentView != null) {
            if (this.forwardHintView == null) {
                SizeNotifierFrameLayout frameLayout = this.fragmentView;
                int index = frameLayout.indexOfChild(this.chatActivityEnterView);
                if (index != -1) {
                    this.forwardHintView = new HintView(getParentActivity(), 1);
                    frameLayout.addView(this.forwardHintView, index + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 19.0f, 0.0f, 19.0f, 0.0f));
                    this.forwardHintView.setAlpha(0.0f);
                    this.forwardHintView.setVisibility(4);
                } else {
                    return;
                }
            }
            this.forwardHintView.showForMessageCell(cell, true);
        }
    }

    private void showGifHint() {
        SharedPreferences preferences = MessagesController.getGlobalMainSettings();
        if (!preferences.getBoolean("gifhint", false)) {
            preferences.edit().putBoolean("gifhint", true).commit();
            if (getParentActivity() != null && this.fragmentView != null && this.gifHintTextView == null) {
                if (this.allowContextBotPanelSecond) {
                    SizeNotifierFrameLayout frameLayout = this.fragmentView;
                    int index = frameLayout.indexOfChild(this.chatActivityEnterView);
                    if (index != -1) {
                        this.chatActivityEnterView.setOpenGifsTabFirst();
                        this.emojiButtonRed = new View(getParentActivity());
                        this.emojiButtonRed.setBackgroundResource(NUM);
                        frameLayout.addView(this.emojiButtonRed, index + 1, LayoutHelper.createFrame(10, 10.0f, 83, 30.0f, 0.0f, 0.0f, 27.0f));
                        this.gifHintTextView = new TextView(getParentActivity());
                        this.gifHintTextView.setBackgroundDrawable(Theme.createRoundRectDrawable(AndroidUtilities.dp(3.0f), Theme.getColor("chat_gifSaveHintBackground")));
                        this.gifHintTextView.setTextColor(Theme.getColor("chat_gifSaveHintText"));
                        this.gifHintTextView.setTextSize(1, 14.0f);
                        this.gifHintTextView.setPadding(AndroidUtilities.dp(8.0f), AndroidUtilities.dp(7.0f), AndroidUtilities.dp(8.0f), AndroidUtilities.dp(7.0f));
                        this.gifHintTextView.setText(LocaleController.getString("TapHereGifs", NUM));
                        this.gifHintTextView.setGravity(16);
                        frameLayout.addView(this.gifHintTextView, index + 1, LayoutHelper.createFrame(-2, -2.0f, 83, 5.0f, 0.0f, 5.0f, 3.0f));
                        AnimatorSet AnimatorSet = new AnimatorSet();
                        AnimatorSet.playTogether(new Animator[]{ObjectAnimator.ofFloat(this.gifHintTextView, "alpha", new float[]{0.0f, 1.0f}), ObjectAnimator.ofFloat(this.emojiButtonRed, "alpha", new float[]{0.0f, 1.0f})});
                        AnimatorSet.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animation) {
                                AndroidUtilities.runOnUIThread(new ChatActivity$39$$Lambda$0(this), 2000);
                            }

                            /* Access modifiers changed, original: final|synthetic */
                            public final /* synthetic */ void lambda$onAnimationEnd$0$ChatActivity$39() {
                                if (ChatActivity.this.gifHintTextView != null) {
                                    AnimatorSet AnimatorSet = new AnimatorSet();
                                    Animator[] animatorArr = new Animator[1];
                                    animatorArr[0] = ObjectAnimator.ofFloat(ChatActivity.this.gifHintTextView, "alpha", new float[]{0.0f});
                                    AnimatorSet.playTogether(animatorArr);
                                    AnimatorSet.addListener(new AnimatorListenerAdapter() {
                                        public void onAnimationEnd(Animator animation) {
                                            if (ChatActivity.this.gifHintTextView != null) {
                                                ChatActivity.this.gifHintTextView.setVisibility(8);
                                            }
                                        }
                                    });
                                    AnimatorSet.setDuration(300);
                                    AnimatorSet.start();
                                }
                            }
                        });
                        AnimatorSet.setDuration(300);
                        AnimatorSet.start();
                    }
                } else if (this.chatActivityEnterView != null) {
                    this.chatActivityEnterView.setOpenGifsTabFirst();
                }
            }
        }
    }

    private void openAttachMenu() {
        if (getParentActivity() != null) {
            createChatAttachView();
            this.chatAttachAlert.loadGalleryPhotos();
            if (VERSION.SDK_INT == 21 || VERSION.SDK_INT == 22) {
                this.chatActivityEnterView.closeKeyboard();
            }
            this.chatAttachAlert.init();
            showDialog(this.chatAttachAlert);
        }
    }

    private void checkContextBotPanel() {
        if (!this.allowStickersPanel || this.mentionsAdapter == null || !this.mentionsAdapter.isBotContext()) {
            return;
        }
        if (this.allowContextBotPanel || this.allowContextBotPanelSecond) {
            if (this.mentionContainer.getVisibility() == 4 || this.mentionContainer.getTag() != null) {
                if (this.mentionListAnimation != null) {
                    this.mentionListAnimation.cancel();
                }
                this.mentionContainer.setTag(null);
                this.mentionContainer.setVisibility(0);
                this.mentionListAnimation = new AnimatorSet();
                this.mentionListAnimation.playTogether(new Animator[]{ObjectAnimator.ofFloat(this.mentionContainer, "alpha", new float[]{0.0f, 1.0f})});
                this.mentionListAnimation.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        if (ChatActivity.this.mentionListAnimation != null && ChatActivity.this.mentionListAnimation.equals(animation)) {
                            ChatActivity.this.mentionListAnimation = null;
                        }
                    }

                    public void onAnimationCancel(Animator animation) {
                        if (ChatActivity.this.mentionListAnimation != null && ChatActivity.this.mentionListAnimation.equals(animation)) {
                            ChatActivity.this.mentionListAnimation = null;
                        }
                    }
                });
                this.mentionListAnimation.setDuration(200);
                this.mentionListAnimation.start();
            }
        } else if (this.mentionContainer.getVisibility() == 0 && this.mentionContainer.getTag() == null) {
            if (this.mentionListAnimation != null) {
                this.mentionListAnimation.cancel();
            }
            this.mentionContainer.setTag(Integer.valueOf(1));
            this.mentionListAnimation = new AnimatorSet();
            AnimatorSet animatorSet = this.mentionListAnimation;
            Animator[] animatorArr = new Animator[1];
            animatorArr[0] = ObjectAnimator.ofFloat(this.mentionContainer, "alpha", new float[]{0.0f});
            animatorSet.playTogether(animatorArr);
            this.mentionListAnimation.addListener(new AnimatorListenerAdapter() {
                public void onAnimationEnd(Animator animation) {
                    if (ChatActivity.this.mentionListAnimation != null && ChatActivity.this.mentionListAnimation.equals(animation)) {
                        ChatActivity.this.mentionContainer.setVisibility(4);
                        ChatActivity.this.mentionListAnimation = null;
                    }
                }

                public void onAnimationCancel(Animator animation) {
                    if (ChatActivity.this.mentionListAnimation != null && ChatActivity.this.mentionListAnimation.equals(animation)) {
                        ChatActivity.this.mentionListAnimation = null;
                    }
                }
            });
            this.mentionListAnimation.setDuration(200);
            this.mentionListAnimation.start();
        }
    }

    private void checkAutoDownloadMessages(boolean scrollUp) {
        if (this.chatListView != null) {
            int a;
            int count = this.chatListView.getChildCount();
            int firstMessagePosition = -1;
            int lastMessagePosition = -1;
            for (a = 0; a < count; a++) {
                View child = this.chatListView.getChildAt(a);
                if (child instanceof ChatMessageCell) {
                    ViewHolder holder = this.chatListView.findContainingViewHolder(child);
                    if (holder != null) {
                        int p = holder.getAdapterPosition();
                        if (firstMessagePosition == -1) {
                            firstMessagePosition = p;
                        }
                        lastMessagePosition = p;
                    }
                    ChatMessageCell cell = (ChatMessageCell) child;
                    Object object = cell.getMessageObject();
                    if (!(object == null || object.mediaExists || !object.isSent())) {
                        Document document = object.getDocument();
                        if (!(document == null || MessageObject.isStickerDocument(document) || MessageObject.isGifDocument(document) || MessageObject.isRoundVideoDocument(document))) {
                            int canDownload = DownloadController.getInstance(this.currentAccount).canDownloadMedia(object.messageOwner);
                            if (canDownload != 0) {
                                if (canDownload != 2) {
                                    FileLoader instance = FileLoader.getInstance(this.currentAccount);
                                    int i = (MessageObject.isVideoDocument(document) && object.shouldEncryptPhotoOrVideo()) ? 2 : 0;
                                    instance.loadFile(document, object, 0, i);
                                    cell.updateButtonState(false, true, false);
                                } else if (this.currentEncryptedChat == null && !object.shouldEncryptPhotoOrVideo() && object.canStreamVideo()) {
                                    FileLoader.getInstance(this.currentAccount).loadFile(document, object, 0, 10);
                                }
                            }
                        }
                    }
                }
            }
            if (firstMessagePosition != -1) {
                int lastPosition;
                int N;
                int n;
                if (scrollUp) {
                    lastPosition = lastMessagePosition;
                    firstMessagePosition = lastMessagePosition;
                    if (firstMessagePosition + 10 >= this.chatAdapter.messagesEndRow) {
                        firstMessagePosition = this.chatAdapter.messagesEndRow;
                    } else {
                        firstMessagePosition += 10;
                    }
                    N = this.messages.size();
                    for (a = lastPosition; a < firstMessagePosition; a++) {
                        n = a - this.chatAdapter.messagesStartRow;
                        if (n >= 0 && n < N) {
                            checkAutoDownloadMessage((MessageObject) this.messages.get(n));
                        }
                    }
                } else {
                    if (firstMessagePosition - 20 <= this.chatAdapter.messagesStartRow) {
                        lastPosition = this.chatAdapter.messagesStartRow;
                    } else {
                        lastPosition = firstMessagePosition - 20;
                    }
                    N = this.messages.size();
                    for (a = firstMessagePosition - 1; a >= lastPosition; a--) {
                        n = a - this.chatAdapter.messagesStartRow;
                        if (n >= 0 && n < N) {
                            checkAutoDownloadMessage((MessageObject) this.messages.get(n));
                        }
                    }
                }
            }
            showNoSoundHint();
        }
    }

    private void checkAutoDownloadMessage(MessageObject object) {
        int i = 2;
        if (!object.mediaExists) {
            int canDownload = DownloadController.getInstance(this.currentAccount).canDownloadMedia(object.messageOwner);
            if (canDownload != 0) {
                PhotoSize photo;
                Document document = object.getDocument();
                if (document == null) {
                    photo = FileLoader.getClosestPhotoSizeWithSize(object.photoThumbs, AndroidUtilities.getPhotoSize());
                } else {
                    photo = null;
                }
                if (document != null || photo != null) {
                    if (canDownload == 2 || (canDownload == 1 && object.isVideo())) {
                        if (document != null && this.currentEncryptedChat == null && !object.shouldEncryptPhotoOrVideo() && object.canStreamVideo()) {
                            FileLoader.getInstance(this.currentAccount).loadFile(document, (Object) object, 0, 10);
                        }
                    } else if (document != null) {
                        FileLoader instance = FileLoader.getInstance(this.currentAccount);
                        if (!(MessageObject.isVideoDocument(document) && object.shouldEncryptPhotoOrVideo())) {
                            i = 0;
                        }
                        instance.loadFile(document, (Object) object, 0, i);
                    } else {
                        FileLoader instance2 = FileLoader.getInstance(this.currentAccount);
                        if (!object.shouldEncryptPhotoOrVideo()) {
                            i = 0;
                        }
                        instance2.loadFile(photo, (Object) object, null, i);
                    }
                }
            }
        }
    }

    private void hideFloatingDateView(boolean animated) {
        if (this.floatingDateView.getTag() != null && !this.currentFloatingDateOnScreen) {
            if (!this.scrollingFloatingDate || this.currentFloatingTopIsNotMessage) {
                this.floatingDateView.setTag(null);
                if (animated) {
                    this.floatingDateAnimation = new AnimatorSet();
                    this.floatingDateAnimation.setDuration(150);
                    AnimatorSet animatorSet = this.floatingDateAnimation;
                    Animator[] animatorArr = new Animator[1];
                    animatorArr[0] = ObjectAnimator.ofFloat(this.floatingDateView, "alpha", new float[]{0.0f});
                    animatorSet.playTogether(animatorArr);
                    this.floatingDateAnimation.addListener(new AnimatorListenerAdapter() {
                        public void onAnimationEnd(Animator animation) {
                            if (animation.equals(ChatActivity.this.floatingDateAnimation)) {
                                ChatActivity.this.floatingDateAnimation = null;
                            }
                        }
                    });
                    this.floatingDateAnimation.setStartDelay(500);
                    this.floatingDateAnimation.start();
                    return;
                }
                if (this.floatingDateAnimation != null) {
                    this.floatingDateAnimation.cancel();
                    this.floatingDateAnimation = null;
                }
                this.floatingDateView.setAlpha(0.0f);
            }
        }
    }

    /* Access modifiers changed, original: protected */
    public void onRemoveFromParent() {
        MessageObject messageObject = MediaController.getInstance().getPlayingMessageObject();
        if (messageObject == null || !messageObject.isVideo()) {
            MediaController.getInstance().setTextureView(this.videoTextureView, null, null, false);
        } else {
            MediaController.getInstance().cleanupPlayer(true, true);
        }
    }

    /* Access modifiers changed, original: protected */
    public void setIgnoreAttachOnPause(boolean value) {
        this.ignoreAttachOnPause = value;
    }

    private void checkScrollForLoad(boolean scroll) {
        if (this.chatLayoutManager != null && !this.paused) {
            int checkLoadCount;
            MessagesController instance;
            long j;
            int i;
            int i2;
            int i3;
            boolean isChannel;
            int i4;
            int firstVisibleItem = this.chatLayoutManager.findFirstVisibleItemPosition();
            int visibleItemCount = firstVisibleItem == -1 ? 0 : Math.abs(this.chatLayoutManager.findLastVisibleItemPosition() - firstVisibleItem) + 1;
            int totalItemCount = this.chatAdapter.getItemCount();
            if (scroll) {
                checkLoadCount = 25;
            } else {
                checkLoadCount = 5;
            }
            if ((totalItemCount - firstVisibleItem) - visibleItemCount <= checkLoadCount && !this.loading) {
                boolean z;
                if (!this.endReached[0]) {
                    this.loading = true;
                    this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                    if (this.messagesByDays.size() != 0) {
                        instance = MessagesController.getInstance(this.currentAccount);
                        j = this.dialog_id;
                        i = this.maxMessageId[0];
                        z = !this.cacheEndReached[0];
                        i2 = this.minDate[0];
                        i3 = this.classGuid;
                        isChannel = ChatObject.isChannel(this.currentChat);
                        i4 = this.lastLoadIndex;
                        this.lastLoadIndex = i4 + 1;
                        instance.loadMessages(j, 50, i, 0, z, i2, i3, 0, 0, isChannel, i4);
                    } else {
                        instance = MessagesController.getInstance(this.currentAccount);
                        j = this.dialog_id;
                        z = !this.cacheEndReached[0];
                        i2 = this.minDate[0];
                        i3 = this.classGuid;
                        isChannel = ChatObject.isChannel(this.currentChat);
                        i4 = this.lastLoadIndex;
                        this.lastLoadIndex = i4 + 1;
                        instance.loadMessages(j, 50, 0, 0, z, i2, i3, 0, 0, isChannel, i4);
                    }
                } else if (!(this.mergeDialogId == 0 || this.endReached[1])) {
                    this.loading = true;
                    this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                    instance = MessagesController.getInstance(this.currentAccount);
                    j = this.mergeDialogId;
                    i = this.maxMessageId[1];
                    z = !this.cacheEndReached[1];
                    i2 = this.minDate[1];
                    i3 = this.classGuid;
                    isChannel = ChatObject.isChannel(this.currentChat);
                    i4 = this.lastLoadIndex;
                    this.lastLoadIndex = i4 + 1;
                    instance.loadMessages(j, 50, i, 0, z, i2, i3, 0, 0, isChannel, i4);
                }
            }
            if (visibleItemCount > 0 && !this.loadingForward && firstVisibleItem <= 10) {
                if (this.mergeDialogId != 0 && !this.forwardEndReached[1]) {
                    this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                    instance = MessagesController.getInstance(this.currentAccount);
                    j = this.mergeDialogId;
                    i = this.minMessageId[1];
                    i2 = this.maxDate[1];
                    i3 = this.classGuid;
                    isChannel = ChatObject.isChannel(this.currentChat);
                    i4 = this.lastLoadIndex;
                    this.lastLoadIndex = i4 + 1;
                    instance.loadMessages(j, 50, i, 0, true, i2, i3, 1, 0, isChannel, i4);
                    this.loadingForward = true;
                } else if (!this.forwardEndReached[0]) {
                    this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                    instance = MessagesController.getInstance(this.currentAccount);
                    j = this.dialog_id;
                    i = this.minMessageId[0];
                    i2 = this.maxDate[0];
                    i3 = this.classGuid;
                    isChannel = ChatObject.isChannel(this.currentChat);
                    i4 = this.lastLoadIndex;
                    this.lastLoadIndex = i4 + 1;
                    instance.loadMessages(j, 50, i, 0, true, i2, i3, 1, 0, isChannel, i4);
                    this.loadingForward = true;
                }
            }
        }
    }

    private void processSelectedAttach(int which) {
        int i = 1;
        if (which == 0) {
            if (VERSION.SDK_INT < 23 || getParentActivity().checkSelfPermission("android.permission.CAMERA") == 0) {
                try {
                    Intent takePictureIntent = new Intent("android.media.action.IMAGE_CAPTURE");
                    File image = AndroidUtilities.generatePicturePath();
                    if (image != null) {
                        if (VERSION.SDK_INT >= 24) {
                            takePictureIntent.putExtra("output", FileProvider.getUriForFile(getParentActivity(), "org.telegram.messenger.beta.provider", image));
                            takePictureIntent.addFlags(2);
                            takePictureIntent.addFlags(1);
                        } else {
                            takePictureIntent.putExtra("output", Uri.fromFile(image));
                        }
                        this.currentPicturePath = image.getAbsolutePath();
                    }
                    startActivityForResult(takePictureIntent, 0);
                    return;
                } catch (Exception e) {
                    FileLog.e(e);
                    return;
                }
            }
            getParentActivity().requestPermissions(new String[]{"android.permission.CAMERA"}, 19);
        } else if (which == 1) {
            if (VERSION.SDK_INT < 23 || getParentActivity().checkSelfPermission("android.permission.READ_EXTERNAL_STORAGE") == 0) {
                boolean allowGifs = (ChatObject.isChannel(this.currentChat) && this.currentChat.banned_rights != null && this.currentChat.banned_rights.send_gifs) ? false : this.currentEncryptedChat == null || AndroidUtilities.getPeerLayerVersion(this.currentEncryptedChat.layer) >= 46;
                PhotoAlbumPickerActivity fragment = new PhotoAlbumPickerActivity(0, allowGifs, true, this);
                if (this.editingMessageObject == null) {
                    i = 0;
                }
                fragment.setMaxSelectedPhotos(i);
                fragment.setDelegate(new PhotoAlbumPickerActivityDelegate() {
                    public void didSelectPhotos(ArrayList<SendingMediaInfo> photos) {
                        if (!photos.isEmpty()) {
                            ChatActivity.this.fillEditingMediaWithCaption(((SendingMediaInfo) photos.get(0)).caption, ((SendingMediaInfo) photos.get(0)).entities);
                            SendMessagesHelper.prepareSendingMedia(photos, ChatActivity.this.dialog_id, ChatActivity.this.replyingMessageObject, null, false, SharedConfig.groupPhotosEnabled, ChatActivity.this.editingMessageObject);
                            ChatActivity.this.hideFieldPanel();
                            DataQuery.getInstance(ChatActivity.this.currentAccount).cleanDraft(ChatActivity.this.dialog_id, true);
                        }
                    }

                    public void startPhotoSelectActivity() {
                        try {
                            Intent videoPickerIntent = new Intent();
                            videoPickerIntent.setType("video/*");
                            videoPickerIntent.setAction("android.intent.action.GET_CONTENT");
                            videoPickerIntent.putExtra("android.intent.extra.sizeLimit", NUM);
                            Intent photoPickerIntent = new Intent("android.intent.action.PICK");
                            photoPickerIntent.setType("image/*");
                            Intent chooserIntent = Intent.createChooser(photoPickerIntent, null);
                            chooserIntent.putExtra("android.intent.extra.INITIAL_INTENTS", new Intent[]{videoPickerIntent});
                            ChatActivity.this.startActivityForResult(chooserIntent, 1);
                        } catch (Exception e) {
                            FileLog.e(e);
                        }
                    }
                });
                presentFragment(fragment);
                return;
            }
            try {
                getParentActivity().requestPermissions(new String[]{"android.permission.READ_EXTERNAL_STORAGE"}, 4);
            } catch (Throwable th) {
            }
        } else if (which == 2) {
            if (VERSION.SDK_INT < 23 || getParentActivity().checkSelfPermission("android.permission.CAMERA") == 0) {
                try {
                    Intent takeVideoIntent = new Intent("android.media.action.VIDEO_CAPTURE");
                    File video = AndroidUtilities.generateVideoPath();
                    if (video != null) {
                        if (VERSION.SDK_INT >= 24) {
                            takeVideoIntent.putExtra("output", FileProvider.getUriForFile(getParentActivity(), "org.telegram.messenger.beta.provider", video));
                            takeVideoIntent.addFlags(2);
                            takeVideoIntent.addFlags(1);
                        } else if (VERSION.SDK_INT >= 18) {
                            takeVideoIntent.putExtra("output", Uri.fromFile(video));
                        }
                        takeVideoIntent.putExtra("android.intent.extra.sizeLimit", NUM);
                        this.currentPicturePath = video.getAbsolutePath();
                    }
                    startActivityForResult(takeVideoIntent, 2);
                    return;
                } catch (Exception e2) {
                    FileLog.e(e2);
                    return;
                }
            }
            try {
                getParentActivity().requestPermissions(new String[]{"android.permission.CAMERA"}, 20);
            } catch (Throwable th2) {
            }
        } else if (which == 6) {
            if (AndroidUtilities.isGoogleMapsInstalled(this)) {
                if (this.currentEncryptedChat != null) {
                    i = 0;
                }
                LocationActivity fragment2 = new LocationActivity(i);
                fragment2.setDialogId(this.dialog_id);
                fragment2.setDelegate(this);
                presentFragment(fragment2);
            }
        } else if (which == 4) {
            if (VERSION.SDK_INT < 23 || getParentActivity().checkSelfPermission("android.permission.READ_EXTERNAL_STORAGE") == 0) {
                DocumentSelectActivity fragment3 = new DocumentSelectActivity(true);
                if (this.editingMessageObject == null) {
                    i = -1;
                }
                fragment3.setMaxSelectedFiles(i);
                fragment3.setDelegate(new DocumentSelectActivityDelegate() {
                    public void didSelectFiles(DocumentSelectActivity activity, ArrayList<String> files) {
                        activity.finishFragment();
                        ChatActivity.this.fillEditingMediaWithCaption(null, null);
                        SendMessagesHelper.prepareSendingDocuments(files, files, null, null, null, ChatActivity.this.dialog_id, ChatActivity.this.replyingMessageObject, null, ChatActivity.this.editingMessageObject);
                        ChatActivity.this.hideFieldPanel();
                        DataQuery.getInstance(ChatActivity.this.currentAccount).cleanDraft(ChatActivity.this.dialog_id, true);
                    }

                    public void startDocumentSelectActivity() {
                        try {
                            Intent photoPickerIntent = new Intent("android.intent.action.GET_CONTENT");
                            if (VERSION.SDK_INT >= 18) {
                                photoPickerIntent.putExtra("android.intent.extra.ALLOW_MULTIPLE", true);
                            }
                            photoPickerIntent.setType("*/*");
                            ChatActivity.this.startActivityForResult(photoPickerIntent, 21);
                        } catch (Exception e) {
                            FileLog.e(e);
                        }
                    }

                    public void startMusicSelectActivity(BaseFragment parentFragment) {
                        AudioSelectActivity fragment = new AudioSelectActivity();
                        fragment.setDelegate(new ChatActivity$44$$Lambda$0(this, parentFragment));
                        ChatActivity.this.presentFragment(fragment);
                    }

                    /* Access modifiers changed, original: final|synthetic */
                    public final /* synthetic */ void lambda$startMusicSelectActivity$0$ChatActivity$44(BaseFragment parentFragment, ArrayList audios) {
                        parentFragment.removeSelfFromStack();
                        ChatActivity.this.fillEditingMediaWithCaption(null, null);
                        SendMessagesHelper.prepareSendingAudioDocuments(audios, ChatActivity.this.dialog_id, ChatActivity.this.replyingMessageObject, ChatActivity.this.editingMessageObject);
                        ChatActivity.this.hideFieldPanel();
                        DataQuery.getInstance(ChatActivity.this.currentAccount).cleanDraft(ChatActivity.this.dialog_id, true);
                    }
                });
                presentFragment(fragment3);
                return;
            }
            try {
                getParentActivity().requestPermissions(new String[]{"android.permission.READ_EXTERNAL_STORAGE"}, 4);
            } catch (Throwable th3) {
            }
        } else if (which == 3) {
            if (VERSION.SDK_INT < 23 || getParentActivity().checkSelfPermission("android.permission.READ_EXTERNAL_STORAGE") == 0) {
                AudioSelectActivity fragment4 = new AudioSelectActivity();
                fragment4.setDelegate(new ChatActivity$$Lambda$31(this));
                presentFragment(fragment4);
                return;
            }
            getParentActivity().requestPermissions(new String[]{"android.permission.READ_EXTERNAL_STORAGE"}, 4);
        } else if (which == 5) {
            if (VERSION.SDK_INT < 23 || getParentActivity().checkSelfPermission("android.permission.READ_CONTACTS") == 0) {
                PhonebookSelectActivity activity = new PhonebookSelectActivity();
                activity.setDelegate(new ChatActivity$$Lambda$32(this));
                presentFragment(activity);
                return;
            }
            getParentActivity().requestPermissions(new String[]{"android.permission.READ_CONTACTS"}, 5);
        } else if (which == 9 && this.currentChat != null && ChatObject.canSendPolls(this.currentChat)) {
            PollCreateActivity pollCreateActivity = new PollCreateActivity();
            pollCreateActivity.setDelegate(new ChatActivity$$Lambda$33(this));
            presentFragment(pollCreateActivity);
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$processSelectedAttach$38$ChatActivity(ArrayList audios) {
        fillEditingMediaWithCaption(null, null);
        SendMessagesHelper.prepareSendingAudioDocuments(audios, this.dialog_id, this.replyingMessageObject, this.editingMessageObject);
        hideFieldPanel();
        DataQuery.getInstance(this.currentAccount).cleanDraft(this.dialog_id, true);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$processSelectedAttach$39$ChatActivity(User user) {
        SendMessagesHelper.getInstance(this.currentAccount).sendMessage(user, this.dialog_id, this.replyingMessageObject, null, null);
        hideFieldPanel();
        DataQuery.getInstance(this.currentAccount).cleanDraft(this.dialog_id, true);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$processSelectedAttach$40$ChatActivity(TL_messageMediaPoll poll) {
        SendMessagesHelper.getInstance(this.currentAccount).sendMessage(poll, this.dialog_id, this.replyingMessageObject, null, null);
        hideFieldPanel();
        DataQuery.getInstance(this.currentAccount).cleanDraft(this.dialog_id, true);
    }

    public boolean dismissDialogOnPause(Dialog dialog) {
        return dialog != this.chatAttachAlert && super.dismissDialogOnPause(dialog);
    }

    private void searchLinks(CharSequence charSequence, boolean force) {
        if (this.currentEncryptedChat == null || (MessagesController.getInstance(this.currentAccount).secretWebpagePreview != 0 && AndroidUtilities.getPeerLayerVersion(this.currentEncryptedChat.layer) >= 46)) {
            if (force && this.foundWebPage != null) {
                if (this.foundWebPage.url != null) {
                    int index = TextUtils.indexOf(charSequence, this.foundWebPage.url);
                    char lastChar = 0;
                    boolean lenEqual = false;
                    if (index != -1) {
                        if (this.foundWebPage.url.length() + index == charSequence.length()) {
                            lenEqual = true;
                        } else {
                            lenEqual = false;
                        }
                        if (lenEqual) {
                            lastChar = 0;
                        } else {
                            lastChar = charSequence.charAt(this.foundWebPage.url.length() + index);
                        }
                    } else if (this.foundWebPage.display_url != null) {
                        index = TextUtils.indexOf(charSequence, this.foundWebPage.display_url);
                        if (index == -1 || this.foundWebPage.display_url.length() + index != charSequence.length()) {
                            lenEqual = false;
                        } else {
                            lenEqual = true;
                        }
                        if (index == -1 || lenEqual) {
                            lastChar = 0;
                        } else {
                            lastChar = charSequence.charAt(this.foundWebPage.display_url.length() + index);
                        }
                    }
                    if (index != -1 && (lenEqual || lastChar == ' ' || lastChar == ',' || lastChar == '.' || lastChar == '!' || lastChar == '/')) {
                        return;
                    }
                }
                this.pendingLinkSearchString = null;
                this.foundUrls = null;
                showFieldPanelForWebPage(false, this.foundWebPage, false);
            }
            Utilities.searchQueue.postRunnable(new ChatActivity$$Lambda$34(this, charSequence, MessagesController.getInstance(this.currentAccount), force));
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    /* JADX WARNING: Removed duplicated region for block: B:42:0x00af A:{Catch:{ Exception -> 0x00dd }} */
    /* JADX WARNING: Removed duplicated region for block: B:82:? A:{SYNTHETIC, RETURN, ORIG_RETURN, Catch:{ Exception -> 0x00dd }} */
    /* JADX WARNING: Removed duplicated region for block: B:58:0x010e A:{SYNTHETIC, Splitter:B:58:0x010e} */
    /* JADX WARNING: Removed duplicated region for block: B:49:0x00d2 A:{Catch:{ Exception -> 0x00dd }} */
    /* JADX WARNING: Removed duplicated region for block: B:70:0x0171  */
    /* JADX WARNING: Removed duplicated region for block: B:68:0x013f  */
    public final /* synthetic */ void lambda$searchLinks$47$ChatActivity(java.lang.CharSequence r19, org.telegram.messenger.MessagesController r20, boolean r21) {
        /*
        r18 = this;
        r0 = r18;
        r14 = r0.linkSearchRequestId;
        if (r14 == 0) goto L_0x001c;
    L_0x0006:
        r0 = r18;
        r14 = r0.currentAccount;
        r14 = org.telegram.tgnet.ConnectionsManager.getInstance(r14);
        r0 = r18;
        r15 = r0.linkSearchRequestId;
        r16 = 1;
        r14.cancelRequest(r15, r16);
        r14 = 0;
        r0 = r18;
        r0.linkSearchRequestId = r14;
    L_0x001c:
        r12 = 0;
        r14 = org.telegram.messenger.AndroidUtilities.WEB_URL;	 Catch:{ Exception -> 0x00dd }
        r0 = r19;
        r7 = r14.matcher(r0);	 Catch:{ Exception -> 0x00dd }
        r13 = r12;
    L_0x0026:
        r14 = r7.find();	 Catch:{ Exception -> 0x0178 }
        if (r14 == 0) goto L_0x005c;
    L_0x002c:
        r14 = r7.start();	 Catch:{ Exception -> 0x0178 }
        if (r14 <= 0) goto L_0x0042;
    L_0x0032:
        r14 = r7.start();	 Catch:{ Exception -> 0x0178 }
        r14 = r14 + -1;
        r0 = r19;
        r14 = r0.charAt(r14);	 Catch:{ Exception -> 0x0178 }
        r15 = 64;
        if (r14 == r15) goto L_0x0026;
    L_0x0042:
        if (r13 != 0) goto L_0x017f;
    L_0x0044:
        r12 = new java.util.ArrayList;	 Catch:{ Exception -> 0x0178 }
        r12.<init>();	 Catch:{ Exception -> 0x0178 }
    L_0x0049:
        r14 = r7.start();	 Catch:{ Exception -> 0x00dd }
        r15 = r7.end();	 Catch:{ Exception -> 0x00dd }
        r0 = r19;
        r14 = r0.subSequence(r14, r15);	 Catch:{ Exception -> 0x00dd }
        r12.add(r14);	 Catch:{ Exception -> 0x00dd }
        r13 = r12;
        goto L_0x0026;
    L_0x005c:
        r0 = r19;
        r14 = r0 instanceof android.text.Spannable;	 Catch:{ Exception -> 0x0178 }
        if (r14 == 0) goto L_0x0090;
    L_0x0062:
        r0 = r19;
        r0 = (android.text.Spannable) r0;	 Catch:{ Exception -> 0x0178 }
        r14 = r0;
        r15 = 0;
        r16 = r19.length();	 Catch:{ Exception -> 0x0178 }
        r17 = org.telegram.ui.Components.URLSpanReplacement.class;
        r9 = r14.getSpans(r15, r16, r17);	 Catch:{ Exception -> 0x0178 }
        r9 = (org.telegram.ui.Components.URLSpanReplacement[]) r9;	 Catch:{ Exception -> 0x0178 }
        if (r9 == 0) goto L_0x0090;
    L_0x0076:
        r14 = r9.length;	 Catch:{ Exception -> 0x0178 }
        if (r14 <= 0) goto L_0x0090;
    L_0x0079:
        if (r13 != 0) goto L_0x017c;
    L_0x007b:
        r12 = new java.util.ArrayList;	 Catch:{ Exception -> 0x0178 }
        r12.<init>();	 Catch:{ Exception -> 0x0178 }
    L_0x0080:
        r4 = 0;
    L_0x0081:
        r14 = r9.length;	 Catch:{ Exception -> 0x00dd }
        if (r4 >= r14) goto L_0x0091;
    L_0x0084:
        r14 = r9[r4];	 Catch:{ Exception -> 0x00dd }
        r14 = r14.getURL();	 Catch:{ Exception -> 0x00dd }
        r12.add(r14);	 Catch:{ Exception -> 0x00dd }
        r4 = r4 + 1;
        goto L_0x0081;
    L_0x0090:
        r12 = r13;
    L_0x0091:
        if (r12 == 0) goto L_0x00cc;
    L_0x0093:
        r0 = r18;
        r14 = r0.foundUrls;	 Catch:{ Exception -> 0x00dd }
        if (r14 == 0) goto L_0x00cc;
    L_0x0099:
        r14 = r12.size();	 Catch:{ Exception -> 0x00dd }
        r0 = r18;
        r15 = r0.foundUrls;	 Catch:{ Exception -> 0x00dd }
        r15 = r15.size();	 Catch:{ Exception -> 0x00dd }
        if (r14 != r15) goto L_0x00cc;
    L_0x00a7:
        r5 = 1;
        r4 = 0;
    L_0x00a9:
        r14 = r12.size();	 Catch:{ Exception -> 0x00dd }
        if (r4 >= r14) goto L_0x00c9;
    L_0x00af:
        r14 = r12.get(r4);	 Catch:{ Exception -> 0x00dd }
        r14 = (java.lang.CharSequence) r14;	 Catch:{ Exception -> 0x00dd }
        r0 = r18;
        r15 = r0.foundUrls;	 Catch:{ Exception -> 0x00dd }
        r15 = r15.get(r4);	 Catch:{ Exception -> 0x00dd }
        r15 = (java.lang.CharSequence) r15;	 Catch:{ Exception -> 0x00dd }
        r14 = android.text.TextUtils.equals(r14, r15);	 Catch:{ Exception -> 0x00dd }
        if (r14 != 0) goto L_0x00c6;
    L_0x00c5:
        r5 = 0;
    L_0x00c6:
        r4 = r4 + 1;
        goto L_0x00a9;
    L_0x00c9:
        if (r5 == 0) goto L_0x00cc;
    L_0x00cb:
        return;
    L_0x00cc:
        r0 = r18;
        r0.foundUrls = r12;	 Catch:{ Exception -> 0x00dd }
        if (r12 != 0) goto L_0x010e;
    L_0x00d2:
        r14 = new org.telegram.ui.ChatActivity$$Lambda$70;	 Catch:{ Exception -> 0x00dd }
        r0 = r18;
        r14.<init>(r0);	 Catch:{ Exception -> 0x00dd }
        org.telegram.messenger.AndroidUtilities.runOnUIThread(r14);	 Catch:{ Exception -> 0x00dd }
        goto L_0x00cb;
    L_0x00dd:
        r6 = move-exception;
    L_0x00de:
        org.telegram.messenger.FileLog.e(r6);
        r14 = r19.toString();
        r10 = r14.toLowerCase();
        r14 = r19.length();
        r15 = 13;
        if (r14 < r15) goto L_0x0103;
    L_0x00f1:
        r14 = "http://";
        r14 = r10.contains(r14);
        if (r14 != 0) goto L_0x0133;
    L_0x00fa:
        r14 = "https://";
        r14 = r10.contains(r14);
        if (r14 != 0) goto L_0x0133;
    L_0x0103:
        r14 = new org.telegram.ui.ChatActivity$$Lambda$71;
        r0 = r18;
        r14.<init>(r0);
        org.telegram.messenger.AndroidUtilities.runOnUIThread(r14);
        goto L_0x00cb;
    L_0x010e:
        r14 = " ";
        r11 = android.text.TextUtils.join(r14, r12);	 Catch:{ Exception -> 0x00dd }
    L_0x0115:
        r0 = r18;
        r14 = r0.currentEncryptedChat;
        if (r14 == 0) goto L_0x0136;
    L_0x011b:
        r0 = r20;
        r14 = r0.secretWebpagePreview;
        r15 = 2;
        if (r14 != r15) goto L_0x0136;
    L_0x0122:
        r14 = new org.telegram.ui.ChatActivity$$Lambda$72;
        r0 = r18;
        r1 = r20;
        r2 = r19;
        r3 = r21;
        r14.<init>(r0, r1, r2, r3);
        org.telegram.messenger.AndroidUtilities.runOnUIThread(r14);
        goto L_0x00cb;
    L_0x0133:
        r11 = r19;
        goto L_0x0115;
    L_0x0136:
        r8 = new org.telegram.tgnet.TLRPC$TL_messages_getWebPagePreview;
        r8.<init>();
        r14 = r11 instanceof java.lang.String;
        if (r14 == 0) goto L_0x0171;
    L_0x013f:
        r11 = (java.lang.String) r11;
        r8.message = r11;
    L_0x0143:
        r0 = r18;
        r14 = r0.currentAccount;
        r14 = org.telegram.tgnet.ConnectionsManager.getInstance(r14);
        r15 = new org.telegram.ui.ChatActivity$$Lambda$73;
        r0 = r18;
        r15.<init>(r0, r8);
        r14 = r14.sendRequest(r8, r15);
        r0 = r18;
        r0.linkSearchRequestId = r14;
        r0 = r18;
        r14 = r0.currentAccount;
        r14 = org.telegram.tgnet.ConnectionsManager.getInstance(r14);
        r0 = r18;
        r15 = r0.linkSearchRequestId;
        r0 = r18;
        r0 = r0.classGuid;
        r16 = r0;
        r14.bindRequestToGuid(r15, r16);
        goto L_0x00cb;
    L_0x0171:
        r14 = r11.toString();
        r8.message = r14;
        goto L_0x0143;
    L_0x0178:
        r6 = move-exception;
        r12 = r13;
        goto L_0x00de;
    L_0x017c:
        r12 = r13;
        goto L_0x0080;
    L_0x017f:
        r12 = r13;
        goto L_0x0049;
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.lambda$searchLinks$47$ChatActivity(java.lang.CharSequence, org.telegram.messenger.MessagesController, boolean):void");
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$41$ChatActivity() {
        if (this.foundWebPage != null) {
            showFieldPanelForWebPage(false, this.foundWebPage, false);
            this.foundWebPage = null;
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$42$ChatActivity() {
        if (this.foundWebPage != null) {
            showFieldPanelForWebPage(false, this.foundWebPage, false);
            this.foundWebPage = null;
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$44$ChatActivity(MessagesController messagesController, CharSequence charSequence, boolean force) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
        builder.setTitle(LocaleController.getString("AppName", NUM));
        builder.setPositiveButton(LocaleController.getString("OK", NUM), new ChatActivity$$Lambda$75(this, messagesController, charSequence, force));
        builder.setNegativeButton(LocaleController.getString("Cancel", NUM), null);
        builder.setMessage(LocaleController.getString("SecretLinkPreviewAlert", NUM));
        showDialog(builder.create());
        messagesController.secretWebpagePreview = 0;
        MessagesController.getGlobalMainSettings().edit().putInt("secretWebpage2", messagesController.secretWebpagePreview).commit();
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$43$ChatActivity(MessagesController messagesController, CharSequence charSequence, boolean force, DialogInterface dialog, int which) {
        messagesController.secretWebpagePreview = 1;
        MessagesController.getGlobalMainSettings().edit().putInt("secretWebpage2", MessagesController.getInstance(this.currentAccount).secretWebpagePreview).commit();
        this.foundUrls = null;
        searchLinks(charSequence, force);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$46$ChatActivity(TL_messages_getWebPagePreview req, TLObject response, TL_error error) {
        AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$74(this, error, response, req));
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$45$ChatActivity(TL_error error, TLObject response, TL_messages_getWebPagePreview req) {
        this.linkSearchRequestId = 0;
        if (error != null) {
            return;
        }
        if (response instanceof TL_messageMediaWebPage) {
            this.foundWebPage = ((TL_messageMediaWebPage) response).webpage;
            if ((this.foundWebPage instanceof TL_webPage) || (this.foundWebPage instanceof TL_webPagePending)) {
                if (this.foundWebPage instanceof TL_webPagePending) {
                    this.pendingLinkSearchString = req.message;
                }
                if (this.currentEncryptedChat != null && (this.foundWebPage instanceof TL_webPagePending)) {
                    this.foundWebPage.url = req.message;
                }
                showFieldPanelForWebPage(true, this.foundWebPage, false);
            } else if (this.foundWebPage != null) {
                showFieldPanelForWebPage(false, this.foundWebPage, false);
                this.foundWebPage = null;
            }
        } else if (this.foundWebPage != null) {
            showFieldPanelForWebPage(false, this.foundWebPage, false);
            this.foundWebPage = null;
        }
    }

    private void forwardMessages(ArrayList<MessageObject> arrayList, boolean fromMyName) {
        if (arrayList != null && !arrayList.isEmpty()) {
            if (fromMyName) {
                Iterator it = arrayList.iterator();
                while (it.hasNext()) {
                    SendMessagesHelper.getInstance(this.currentAccount).processForwardFromMyName((MessageObject) it.next(), this.dialog_id);
                }
                return;
            }
            AlertsCreator.showSendMediaAlert(SendMessagesHelper.getInstance(this.currentAccount).sendMessage(arrayList, this.dialog_id), this);
        }
    }

    private void checkBotKeyboard() {
        if (this.chatActivityEnterView != null && this.botButtons != null && !this.userBlocked) {
            if (!(this.botButtons.messageOwner.reply_markup instanceof TL_replyKeyboardForceReply)) {
                if (this.replyingMessageObject != null && this.botReplyButtons == this.replyingMessageObject) {
                    this.botReplyButtons = null;
                    hideFieldPanel();
                }
                this.chatActivityEnterView.setButtons(this.botButtons);
            } else if (MessagesController.getMainSettings(this.currentAccount).getInt("answered_" + this.dialog_id, 0) == this.botButtons.getId()) {
            } else {
                if (this.replyingMessageObject == null || this.chatActivityEnterView.getFieldText() == null) {
                    this.botReplyButtons = this.botButtons;
                    this.chatActivityEnterView.setButtons(this.botButtons);
                    showFieldPanelForReply(true, this.botButtons);
                }
            }
        }
    }

    public void hideFieldPanel() {
        showFieldPanel(false, null, null, null, null, false);
    }

    public void showFieldPanelForWebPage(boolean show, WebPage webPage, boolean cancel) {
        showFieldPanel(show, null, null, null, webPage, cancel);
    }

    public void showFieldPanelForForward(boolean show, ArrayList<MessageObject> messageObjectsToForward) {
        showFieldPanel(show, null, null, messageObjectsToForward, null, false);
    }

    public void showFieldPanelForReply(boolean show, MessageObject messageObjectToReply) {
        showFieldPanel(show, messageObjectToReply, null, null, null, false);
    }

    public void showFieldPanelForEdit(boolean show, MessageObject messageObjectToEdit) {
        showFieldPanel(show, null, messageObjectToEdit, null, null, false);
    }

    public void showFieldPanel(boolean show, MessageObject messageObjectToReply, MessageObject messageObjectToEdit, ArrayList<MessageObject> messageObjectsToForward, WebPage webPage, boolean cancel) {
        if (this.chatActivityEnterView != null) {
            if (show) {
                if (messageObjectToReply != null || messageObjectsToForward != null || messageObjectToEdit != null || webPage != null) {
                    MessageObject thumbMediaMessageObject;
                    if (this.searchItem != null && this.actionBar.isSearchFieldVisible()) {
                        this.actionBar.closeSearchField(false);
                        this.chatActivityEnterView.setFieldFocused();
                        AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$35(this), 100);
                    }
                    boolean openKeyboard = false;
                    if (!(messageObjectToReply == null || messageObjectToReply.getDialogId() == this.dialog_id)) {
                        messageObjectsToForward = new ArrayList();
                        messageObjectsToForward.add(messageObjectToReply);
                        messageObjectToReply = null;
                        openKeyboard = true;
                    }
                    String mess;
                    User user;
                    String name;
                    Chat chat;
                    if (messageObjectToEdit != null) {
                        this.forwardingMessages = null;
                        this.replyingMessageObject = null;
                        this.editingMessageObject = messageObjectToEdit;
                        this.chatActivityEnterView.setReplyingMessageObject(null);
                        this.chatActivityEnterView.setEditingMessageObject(messageObjectToEdit, !messageObjectToEdit.isMediaEmpty());
                        if (this.foundWebPage == null) {
                            this.chatActivityEnterView.setForceShowSendButton(false, false);
                            this.replyIconImageView.setImageResource(NUM);
                            this.replyIconImageView.setContentDescription(LocaleController.getString("AccDescrEditing", NUM));
                            this.replyCloseImageView.setContentDescription(LocaleController.getString("AccDescrCancelEdit", NUM));
                            if (messageObjectToEdit.isMediaEmpty()) {
                                this.replyNameTextView.setText(LocaleController.getString("EditMessage", NUM));
                            } else {
                                this.replyNameTextView.setText(LocaleController.getString("EditCaption", NUM));
                            }
                            if (messageObjectToEdit.canEditMedia()) {
                                this.replyObjectTextView.setText(LocaleController.getString("EditMessageMedia", NUM));
                            } else if (messageObjectToEdit.messageText != null) {
                                mess = messageObjectToEdit.messageText.toString();
                                if (mess.length() > 150) {
                                    mess = mess.substring(0, 150);
                                }
                                this.replyObjectTextView.setText(Emoji.replaceEmoji(mess.replace(10, ' '), this.replyObjectTextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(14.0f), false));
                            }
                        } else {
                            return;
                        }
                    } else if (messageObjectToReply != null) {
                        this.forwardingMessages = null;
                        this.editingMessageObject = null;
                        this.replyingMessageObject = messageObjectToReply;
                        this.chatActivityEnterView.setReplyingMessageObject(messageObjectToReply);
                        this.chatActivityEnterView.setEditingMessageObject(null, false);
                        if (this.foundWebPage == null) {
                            this.chatActivityEnterView.setForceShowSendButton(false, false);
                            if (messageObjectToReply.isFromUser()) {
                                user = MessagesController.getInstance(this.currentAccount).getUser(Integer.valueOf(messageObjectToReply.messageOwner.from_id));
                                if (user != null) {
                                    name = UserObject.getUserName(user);
                                } else {
                                    return;
                                }
                            }
                            chat = MessagesController.getInstance(this.currentAccount).getChat(Integer.valueOf(messageObjectToReply.messageOwner.to_id.channel_id));
                            if (chat != null) {
                                name = chat.title;
                            } else {
                                return;
                            }
                            this.replyIconImageView.setImageResource(NUM);
                            this.replyNameTextView.setText(name);
                            this.replyIconImageView.setContentDescription(LocaleController.getString("AccDescrReplying", NUM));
                            this.replyCloseImageView.setContentDescription(LocaleController.getString("AccDescrCancelReply", NUM));
                            if (messageObjectToReply.messageOwner.media instanceof TL_messageMediaGame) {
                                this.replyObjectTextView.setText(Emoji.replaceEmoji(messageObjectToReply.messageOwner.media.game.title, this.replyObjectTextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(14.0f), false));
                            } else if (messageObjectToReply.messageText != null) {
                                mess = messageObjectToReply.messageText.toString();
                                if (mess.length() > 150) {
                                    mess = mess.substring(0, 150);
                                }
                                this.replyObjectTextView.setText(Emoji.replaceEmoji(mess.replace(10, ' '), this.replyObjectTextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(14.0f), false));
                            }
                        } else {
                            return;
                        }
                    } else if (messageObjectsToForward == null) {
                        this.replyIconImageView.setImageResource(NUM);
                        if (webPage instanceof TL_webPagePending) {
                            this.replyNameTextView.setText(LocaleController.getString("GettingLinkInfo", NUM));
                            this.replyObjectTextView.setText(this.pendingLinkSearchString);
                        } else {
                            if (webPage.site_name != null) {
                                this.replyNameTextView.setText(webPage.site_name);
                            } else if (webPage.title != null) {
                                this.replyNameTextView.setText(webPage.title);
                            } else {
                                this.replyNameTextView.setText(LocaleController.getString("LinkPreview", NUM));
                            }
                            if (webPage.title != null) {
                                this.replyObjectTextView.setText(webPage.title);
                            } else if (webPage.description != null) {
                                this.replyObjectTextView.setText(webPage.description);
                            } else if (webPage.author != null) {
                                this.replyObjectTextView.setText(webPage.author);
                            } else {
                                this.replyObjectTextView.setText(webPage.display_url);
                            }
                            this.chatActivityEnterView.setWebPage(webPage, true);
                        }
                    } else if (!messageObjectsToForward.isEmpty()) {
                        this.replyingMessageObject = null;
                        this.editingMessageObject = null;
                        this.chatActivityEnterView.setReplyingMessageObject(null);
                        this.chatActivityEnterView.setEditingMessageObject(null, false);
                        this.forwardingMessages = messageObjectsToForward;
                        if (this.foundWebPage == null) {
                            int a;
                            Integer uid;
                            this.chatActivityEnterView.setForceShowSendButton(true, false);
                            ArrayList<Integer> uids = new ArrayList();
                            this.replyIconImageView.setImageResource(NUM);
                            this.replyIconImageView.setContentDescription(LocaleController.getString("AccDescrForwarding", NUM));
                            this.replyCloseImageView.setContentDescription(LocaleController.getString("AccDescrCancelForward", NUM));
                            MessageObject object = (MessageObject) messageObjectsToForward.get(0);
                            if (object.isFromUser()) {
                                uids.add(Integer.valueOf(object.messageOwner.from_id));
                            } else {
                                uids.add(Integer.valueOf(-object.messageOwner.to_id.channel_id));
                            }
                            int type = ((MessageObject) messageObjectsToForward.get(0)).type;
                            for (a = 1; a < messageObjectsToForward.size(); a++) {
                                object = (MessageObject) messageObjectsToForward.get(a);
                                if (object.isFromUser()) {
                                    uid = Integer.valueOf(object.messageOwner.from_id);
                                } else {
                                    uid = Integer.valueOf(-object.messageOwner.to_id.channel_id);
                                }
                                if (!uids.contains(uid)) {
                                    uids.add(uid);
                                }
                                if (((MessageObject) messageObjectsToForward.get(a)).type != type) {
                                    type = -1;
                                }
                            }
                            StringBuilder userNames = new StringBuilder();
                            for (a = 0; a < uids.size(); a++) {
                                uid = (Integer) uids.get(a);
                                chat = null;
                                user = null;
                                if (uid.intValue() > 0) {
                                    user = MessagesController.getInstance(this.currentAccount).getUser(uid);
                                } else {
                                    chat = MessagesController.getInstance(this.currentAccount).getChat(Integer.valueOf(-uid.intValue()));
                                }
                                if (user != null || chat != null) {
                                    if (uids.size() != 1) {
                                        if (uids.size() != 2 && userNames.length() != 0) {
                                            userNames.append(" ");
                                            userNames.append(LocaleController.formatPluralString("AndOther", uids.size() - 1));
                                            break;
                                        }
                                        if (userNames.length() > 0) {
                                            userNames.append(", ");
                                        }
                                        if (user == null) {
                                            userNames.append(chat.title);
                                        } else if (!TextUtils.isEmpty(user.first_name)) {
                                            userNames.append(user.first_name);
                                        } else if (TextUtils.isEmpty(user.last_name)) {
                                            userNames.append(" ");
                                        } else {
                                            userNames.append(user.last_name);
                                        }
                                    } else if (user != null) {
                                        userNames.append(UserObject.getUserName(user));
                                    } else {
                                        userNames.append(chat.title);
                                    }
                                }
                            }
                            this.replyNameTextView.setText(userNames);
                            if (type == -1 || type == 0 || type == 10 || type == 11) {
                                if (messageObjectsToForward.size() != 1 || ((MessageObject) messageObjectsToForward.get(0)).messageText == null) {
                                    this.replyObjectTextView.setText(LocaleController.formatPluralString("ForwardedMessageCount", messageObjectsToForward.size()));
                                } else {
                                    MessageObject messageObject = (MessageObject) messageObjectsToForward.get(0);
                                    if (messageObject.messageOwner.media instanceof TL_messageMediaGame) {
                                        this.replyObjectTextView.setText(Emoji.replaceEmoji(messageObject.messageOwner.media.game.title, this.replyObjectTextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(14.0f), false));
                                    } else {
                                        mess = messageObject.messageText.toString();
                                        if (mess.length() > 150) {
                                            mess = mess.substring(0, 150);
                                        }
                                        this.replyObjectTextView.setText(Emoji.replaceEmoji(mess.replace(10, ' '), this.replyObjectTextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(14.0f), false));
                                    }
                                }
                            } else if (type == 1) {
                                this.replyObjectTextView.setText(LocaleController.formatPluralString("ForwardedPhoto", messageObjectsToForward.size()));
                                if (messageObjectsToForward.size() == 1) {
                                    messageObjectToReply = (MessageObject) messageObjectsToForward.get(0);
                                }
                            } else if (type == 4) {
                                this.replyObjectTextView.setText(LocaleController.formatPluralString("ForwardedLocation", messageObjectsToForward.size()));
                            } else if (type == 3) {
                                this.replyObjectTextView.setText(LocaleController.formatPluralString("ForwardedVideo", messageObjectsToForward.size()));
                                if (messageObjectsToForward.size() == 1) {
                                    messageObjectToReply = (MessageObject) messageObjectsToForward.get(0);
                                }
                            } else if (type == 12) {
                                this.replyObjectTextView.setText(LocaleController.formatPluralString("ForwardedContact", messageObjectsToForward.size()));
                            } else if (type == 2) {
                                this.replyObjectTextView.setText(LocaleController.formatPluralString("ForwardedAudio", messageObjectsToForward.size()));
                            } else if (type == 5) {
                                this.replyObjectTextView.setText(LocaleController.formatPluralString("ForwardedRound", messageObjectsToForward.size()));
                            } else if (type == 14) {
                                this.replyObjectTextView.setText(LocaleController.formatPluralString("ForwardedMusic", messageObjectsToForward.size()));
                            } else if (type == 13) {
                                this.replyObjectTextView.setText(LocaleController.formatPluralString("ForwardedSticker", messageObjectsToForward.size()));
                            } else if (type == 17) {
                                this.replyObjectTextView.setText(LocaleController.formatPluralString("ForwardedPoll", messageObjectsToForward.size()));
                            } else if (type == 8 || type == 9) {
                                if (messageObjectsToForward.size() != 1) {
                                    this.replyObjectTextView.setText(LocaleController.formatPluralString("ForwardedFile", messageObjectsToForward.size()));
                                } else if (type == 8) {
                                    this.replyObjectTextView.setText(LocaleController.getString("AttachGif", NUM));
                                } else {
                                    name = FileLoader.getDocumentFileName(((MessageObject) messageObjectsToForward.get(0)).getDocument());
                                    if (name.length() != 0) {
                                        this.replyObjectTextView.setText(name);
                                    }
                                    messageObjectToReply = (MessageObject) messageObjectsToForward.get(0);
                                }
                            }
                        } else {
                            return;
                        }
                    } else {
                        return;
                    }
                    if (messageObjectToReply != null) {
                        thumbMediaMessageObject = messageObjectToReply;
                    } else if (messageObjectToEdit != null) {
                        thumbMediaMessageObject = messageObjectToEdit;
                    } else {
                        thumbMediaMessageObject = null;
                    }
                    FrameLayout.LayoutParams layoutParams1 = (FrameLayout.LayoutParams) this.replyNameTextView.getLayoutParams();
                    FrameLayout.LayoutParams layoutParams2 = (FrameLayout.LayoutParams) this.replyObjectTextView.getLayoutParams();
                    PhotoSize photoSize = null;
                    if (thumbMediaMessageObject != null) {
                        photoSize = FileLoader.getClosestPhotoSizeWithSize(thumbMediaMessageObject.photoThumbs2, 320);
                        if (photoSize == null) {
                            photoSize = FileLoader.getClosestPhotoSizeWithSize(thumbMediaMessageObject.photoThumbs, 320);
                        }
                    }
                    int dp;
                    if (photoSize == null || (photoSize instanceof TL_photoSizeEmpty) || (photoSize.location instanceof TL_fileLocationUnavailable) || thumbMediaMessageObject.type == 13 || (thumbMediaMessageObject != null && thumbMediaMessageObject.isSecretMedia())) {
                        this.replyImageView.setImageBitmap(null);
                        this.replyImageLocation = null;
                        this.replyImageView.setVisibility(4);
                        dp = AndroidUtilities.dp(52.0f);
                        layoutParams2.leftMargin = dp;
                        layoutParams1.leftMargin = dp;
                    } else {
                        if (thumbMediaMessageObject == null || !thumbMediaMessageObject.isRoundVideo()) {
                            this.replyImageView.setRoundRadius(0);
                        } else {
                            this.replyImageView.setRoundRadius(AndroidUtilities.dp(17.0f));
                        }
                        this.replyImageLocation = photoSize;
                        this.replyImageView.setImage(this.replyImageLocation, "50_50", (Drawable) null, (Object) thumbMediaMessageObject);
                        this.replyImageView.setVisibility(0);
                        dp = AndroidUtilities.dp(96.0f);
                        layoutParams2.leftMargin = dp;
                        layoutParams1.leftMargin = dp;
                    }
                    this.replyNameTextView.setLayoutParams(layoutParams1);
                    this.replyObjectTextView.setLayoutParams(layoutParams2);
                    this.chatActivityEnterView.showTopView(false, openKeyboard);
                }
            } else if (this.replyingMessageObject != null || this.forwardingMessages != null || this.foundWebPage != null || this.editingMessageObject != null) {
                if (this.replyingMessageObject != null && (this.replyingMessageObject.messageOwner.reply_markup instanceof TL_replyKeyboardForceReply)) {
                    MessagesController.getMainSettings(this.currentAccount).edit().putInt("answered_" + this.dialog_id, this.replyingMessageObject.getId()).commit();
                }
                if (this.foundWebPage != null) {
                    this.foundWebPage = null;
                    this.chatActivityEnterView.setWebPage(null, !cancel);
                    if (!(webPage == null || (this.replyingMessageObject == null && this.forwardingMessages == null && this.editingMessageObject == null))) {
                        showFieldPanel(true, this.replyingMessageObject, this.editingMessageObject, this.forwardingMessages, null, false);
                        return;
                    }
                }
                if (this.forwardingMessages != null) {
                    forwardMessages(this.forwardingMessages, false);
                }
                this.chatActivityEnterView.setForceShowSendButton(false, false);
                this.chatActivityEnterView.hideTopView(false);
                this.chatActivityEnterView.setReplyingMessageObject(null);
                this.chatActivityEnterView.setEditingMessageObject(null, false);
                this.replyingMessageObject = null;
                this.editingMessageObject = null;
                this.forwardingMessages = null;
                this.replyImageLocation = null;
            }
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$showFieldPanel$48$ChatActivity() {
        if (this.chatActivityEnterView != null) {
            this.chatActivityEnterView.openKeyboard();
        }
    }

    private void moveScrollToLastMessage() {
        if (this.chatListView != null && !this.messages.isEmpty()) {
            this.chatLayoutManager.scrollToPositionWithOffset(0, 0);
        }
    }

    private boolean sendSecretMessageRead(MessageObject messageObject) {
        int i = 0;
        if (messageObject == null || messageObject.isOut() || !messageObject.isSecretMedia() || messageObject.messageOwner.destroyTime != 0 || messageObject.messageOwner.ttl <= 0) {
            return false;
        }
        if (this.currentEncryptedChat != null) {
            MessagesController.getInstance(this.currentAccount).markMessageAsRead(this.dialog_id, messageObject.messageOwner.random_id, messageObject.messageOwner.ttl);
        } else {
            MessagesController instance = MessagesController.getInstance(this.currentAccount);
            int id = messageObject.getId();
            if (ChatObject.isChannel(this.currentChat)) {
                i = this.currentChat.id;
            }
            instance.markMessageAsRead(id, i, null, messageObject.messageOwner.ttl, 0);
        }
        messageObject.messageOwner.destroyTime = messageObject.messageOwner.ttl + ConnectionsManager.getInstance(this.currentAccount).getCurrentTime();
        return true;
    }

    private void clearChatData() {
        this.messages.clear();
        this.messagesByDays.clear();
        this.waitingForLoad.clear();
        this.groupedMessagesMap.clear();
        this.progressView.setVisibility(this.chatAdapter.botInfoRow == -1 ? 0 : 4);
        this.chatListView.setEmptyView(null);
        for (int a = 0; a < 2; a++) {
            this.messagesDict[a].clear();
            if (this.currentEncryptedChat == null) {
                this.maxMessageId[a] = Integer.MAX_VALUE;
                this.minMessageId[a] = Integer.MIN_VALUE;
            } else {
                this.maxMessageId[a] = Integer.MIN_VALUE;
                this.minMessageId[a] = Integer.MAX_VALUE;
            }
            this.maxDate[a] = Integer.MIN_VALUE;
            this.minDate[a] = 0;
            this.endReached[a] = false;
            this.cacheEndReached[a] = false;
            this.forwardEndReached[a] = true;
        }
        this.first = true;
        this.firstLoading = true;
        this.loading = true;
        this.loadingForward = false;
        this.waitingForReplyMessageLoad = false;
        this.startLoadFromMessageId = 0;
        this.last_message_id = 0;
        this.unreadMessageObject = null;
        this.createUnreadMessageAfterId = 0;
        this.createUnreadMessageAfterIdLoading = false;
        this.needSelectFromMessageId = false;
        this.chatAdapter.notifyDataSetChanged();
    }

    private void scrollToLastMessage(boolean pagedown) {
        if (!this.forwardEndReached[0] || this.first_unread_id != 0 || this.startLoadFromMessageId != 0) {
            clearChatData();
            this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
            MessagesController instance = MessagesController.getInstance(this.currentAccount);
            long j = this.dialog_id;
            int i = this.classGuid;
            boolean isChannel = ChatObject.isChannel(this.currentChat);
            int i2 = this.lastLoadIndex;
            this.lastLoadIndex = i2 + 1;
            instance.loadMessages(j, 30, 0, 0, true, 0, i, 0, 0, isChannel, i2);
        } else if (pagedown && this.chatLayoutManager.findFirstCompletelyVisibleItemPosition() == 0) {
            showPagedownButton(false, true);
            this.highlightMessageId = Integer.MAX_VALUE;
            updateVisibleRows();
        } else {
            this.chatLayoutManager.scrollToPositionWithOffset(0, 0);
        }
    }

    public void updateTextureViewPosition(boolean inLayout) {
        if (this.fragmentView != null && !this.paused) {
            boolean foundTextureViewMessage = false;
            int count = this.chatListView.getChildCount();
            int additionalTop = this.chatActivityEnterView.isTopViewVisible() ? AndroidUtilities.dp(48.0f) : 0;
            for (int a = 0; a < count; a++) {
                View view = this.chatListView.getChildAt(a);
                if (view instanceof ChatMessageCell) {
                    ChatMessageCell messageCell = (ChatMessageCell) view;
                    MessageObject messageObject = messageCell.getMessageObject();
                    if (this.videoPlayerContainer != null && ((messageObject.isRoundVideo() || messageObject.isVideo()) && MediaController.getInstance().isPlayingMessage(messageObject))) {
                        ImageReceiver imageReceiver = messageCell.getPhotoImage();
                        this.videoPlayerContainer.setTranslationX(((float) imageReceiver.getImageX()) + messageCell.getX());
                        this.videoPlayerContainer.setTranslationY((float) ((this.inPreviewMode ? AndroidUtilities.statusBarHeight : 0) + (((this.fragmentView.getPaddingTop() + messageCell.getTop()) + imageReceiver.getImageY()) - additionalTop)));
                        FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) this.videoPlayerContainer.getLayoutParams();
                        if (messageObject.isRoundVideo()) {
                            this.videoPlayerContainer.setTag(NUM, null);
                            if (!(layoutParams.width == AndroidUtilities.roundMessageSize && layoutParams.height == AndroidUtilities.roundMessageSize)) {
                                int i = AndroidUtilities.roundMessageSize;
                                layoutParams.height = i;
                                layoutParams.width = i;
                                this.aspectRatioFrameLayout.setResizeMode(0);
                                this.videoPlayerContainer.setLayoutParams(layoutParams);
                            }
                        } else {
                            this.videoPlayerContainer.setTag(NUM, Integer.valueOf(1));
                            if (!(layoutParams.width == imageReceiver.getImageWidth() && layoutParams.height == imageReceiver.getImageHeight())) {
                                this.aspectRatioFrameLayout.setResizeMode(3);
                                layoutParams.width = imageReceiver.getImageWidth();
                                layoutParams.height = imageReceiver.getImageHeight();
                                this.videoPlayerContainer.setLayoutParams(layoutParams);
                            }
                        }
                        this.fragmentView.invalidate();
                        this.videoPlayerContainer.invalidate();
                        foundTextureViewMessage = true;
                        if (!inLayout && this.videoPlayerContainer != null) {
                            messageObject = MediaController.getInstance().getPlayingMessageObject();
                            if (messageObject != null && messageObject.eventId == 0) {
                                if (foundTextureViewMessage) {
                                    MediaController.getInstance().setCurrentVideoVisible(true);
                                    if (messageObject.isRoundVideo() || this.scrollToVideo) {
                                        scrollToMessageId(messageObject.getId(), 0, false, 0, true);
                                        return;
                                    } else {
                                        this.chatListView.invalidate();
                                        return;
                                    }
                                } else if (this.checkTextureViewPosition && messageObject.isVideo()) {
                                    MediaController.getInstance().cleanupPlayer(true, true);
                                    return;
                                } else {
                                    this.videoPlayerContainer.setTranslationY((float) ((-AndroidUtilities.roundMessageSize) - 100));
                                    this.fragmentView.invalidate();
                                    if (messageObject == null) {
                                        return;
                                    }
                                    if (!messageObject.isRoundVideo() && !messageObject.isVideo()) {
                                        return;
                                    }
                                    if (this.checkTextureViewPosition || PipRoundVideoView.getInstance() != null) {
                                        MediaController.getInstance().setCurrentVideoVisible(false);
                                        return;
                                    } else {
                                        scrollToMessageId(messageObject.getId(), 0, false, 0, true);
                                        return;
                                    }
                                }
                            }
                            return;
                        }
                    }
                }
            }
            if (!inLayout) {
            }
        }
    }

    private void updateMessagesVisiblePart(boolean inLayout) {
        if (this.chatListView != null) {
            int a;
            MessageObject messageObject;
            int id;
            int count = this.chatListView.getChildCount();
            int additionalTop = this.chatActivityEnterView.isTopViewVisible() ? AndroidUtilities.dp(48.0f) : 0;
            int height = this.chatListView.getMeasuredHeight();
            int minPositionHolder = Integer.MAX_VALUE;
            int minPositionDateHolder = Integer.MAX_VALUE;
            View minDateChild = null;
            View minChild = null;
            View minMessageChild = null;
            boolean foundTextureViewMessage = false;
            int maxPositiveUnreadId = Integer.MIN_VALUE;
            int maxNegativeUnreadId = Integer.MAX_VALUE;
            int maxUnreadDate = Integer.MIN_VALUE;
            if (this.currentEncryptedChat != null) {
            }
            this.pollsToCheck.clear();
            for (a = 0; a < count; a++) {
                View view = this.chatListView.getChildAt(a);
                messageObject = null;
                if (view instanceof ChatMessageCell) {
                    ChatMessageCell messageCell = (ChatMessageCell) view;
                    int top = messageCell.getTop();
                    int bottom = messageCell.getBottom();
                    int viewTop = top >= 0 ? 0 : -top;
                    int viewBottom = messageCell.getMeasuredHeight();
                    if (viewBottom > height) {
                        viewBottom = viewTop + height;
                    }
                    messageCell.setVisiblePart(viewTop, viewBottom - viewTop);
                    messageObject = messageCell.getMessageObject();
                    if (this.videoPlayerContainer != null) {
                        boolean isVideo = messageObject.isVideo() || messageObject.isRoundVideo();
                        if (isVideo && MediaController.getInstance().isPlayingMessage(messageObject)) {
                            ImageReceiver imageReceiver = messageCell.getPhotoImage();
                            if (!isVideo || imageReceiver.getImageY2() + top >= 0) {
                                this.videoPlayerContainer.setTranslationX(((float) imageReceiver.getImageX()) + messageCell.getX());
                                this.videoPlayerContainer.setTranslationY((float) ((this.inPreviewMode ? AndroidUtilities.statusBarHeight : 0) + (((this.fragmentView.getPaddingTop() + top) + imageReceiver.getImageY()) - additionalTop)));
                                this.fragmentView.invalidate();
                                this.videoPlayerContainer.invalidate();
                                foundTextureViewMessage = true;
                            } else {
                                foundTextureViewMessage = false;
                            }
                        }
                    }
                } else if (view instanceof ChatActionCell) {
                    messageObject = ((ChatActionCell) view).getMessageObject();
                }
                if (messageObject != null) {
                    if (!messageObject.isOut() && messageObject.isUnread()) {
                        id = messageObject.getId();
                        if (id > 0) {
                            maxPositiveUnreadId = Math.max(maxPositiveUnreadId, messageObject.getId());
                        }
                        if (id < 0) {
                            maxNegativeUnreadId = Math.min(maxNegativeUnreadId, messageObject.getId());
                        }
                        maxUnreadDate = Math.max(maxUnreadDate, messageObject.messageOwner.date);
                    }
                    if (messageObject.type == 17) {
                        this.pollsToCheck.add(messageObject);
                    }
                }
                if (view.getBottom() > this.chatListView.getPaddingTop()) {
                    int position = view.getBottom();
                    if (position < minPositionHolder) {
                        minPositionHolder = position;
                        if ((view instanceof ChatMessageCell) || (view instanceof ChatActionCell)) {
                            minMessageChild = view;
                        }
                        minChild = view;
                    }
                    if ((view instanceof ChatActionCell) && messageObject.isDateObject) {
                        if (view.getAlpha() != 1.0f) {
                            view.setAlpha(1.0f);
                        }
                        if (position < minPositionDateHolder) {
                            minPositionDateHolder = position;
                            minDateChild = view;
                        }
                    }
                }
            }
            MessagesController.getInstance(this.currentAccount).addToPollsQueue(this.dialog_id, this.pollsToCheck);
            if (this.videoPlayerContainer != null) {
                if (foundTextureViewMessage) {
                    MediaController.getInstance().setCurrentVideoVisible(true);
                } else {
                    messageObject = MediaController.getInstance().getPlayingMessageObject();
                    if (messageObject != null) {
                        if (this.checkTextureViewPosition && messageObject.isVideo()) {
                            MediaController.getInstance().cleanupPlayer(true, true);
                        } else {
                            this.videoPlayerContainer.setTranslationY((float) ((-AndroidUtilities.roundMessageSize) - 100));
                            this.fragmentView.invalidate();
                            if ((messageObject.isRoundVideo() || messageObject.isVideo()) && messageObject.eventId == 0 && this.checkTextureViewPosition) {
                                MediaController.getInstance().setCurrentVideoVisible(false);
                            }
                        }
                    }
                }
            }
            if (minMessageChild != null) {
                if (minMessageChild instanceof ChatMessageCell) {
                    messageObject = ((ChatMessageCell) minMessageChild).getMessageObject();
                } else {
                    messageObject = ((ChatActionCell) minMessageChild).getMessageObject();
                }
                this.floatingDateView.setCustomDate(messageObject.messageOwner.date);
            }
            this.currentFloatingDateOnScreen = false;
            boolean z = ((minChild instanceof ChatMessageCell) || (minChild instanceof ChatActionCell)) ? false : true;
            this.currentFloatingTopIsNotMessage = z;
            if (minDateChild != null) {
                if (minDateChild.getTop() > this.chatListView.getPaddingTop() || this.currentFloatingTopIsNotMessage) {
                    if (minDateChild.getAlpha() != 1.0f) {
                        minDateChild.setAlpha(1.0f);
                    }
                    if (this.currentFloatingTopIsNotMessage) {
                        z = false;
                    } else {
                        z = true;
                    }
                    hideFloatingDateView(z);
                } else {
                    if (minDateChild.getAlpha() != 0.0f) {
                        minDateChild.setAlpha(0.0f);
                    }
                    if (this.floatingDateAnimation != null) {
                        this.floatingDateAnimation.cancel();
                        this.floatingDateAnimation = null;
                    }
                    if (this.floatingDateView.getTag() == null) {
                        this.floatingDateView.setTag(Integer.valueOf(1));
                    }
                    if (this.floatingDateView.getAlpha() != 1.0f) {
                        this.floatingDateView.setAlpha(1.0f);
                    }
                    this.currentFloatingDateOnScreen = true;
                }
                int offset = minDateChild.getBottom() - this.chatListView.getPaddingTop();
                if (offset <= this.floatingDateView.getMeasuredHeight() || offset >= this.floatingDateView.getMeasuredHeight() * 2) {
                    this.floatingDateView.setTranslationY(0.0f);
                } else {
                    this.floatingDateView.setTranslationY((float) (((-this.floatingDateView.getMeasuredHeight()) * 2) + offset));
                }
            } else {
                hideFloatingDateView(true);
                this.floatingDateView.setTranslationY(0.0f);
            }
            if (!this.firstLoading && !this.paused && !this.inPreviewMode) {
                if (maxPositiveUnreadId != Integer.MIN_VALUE || maxNegativeUnreadId != Integer.MAX_VALUE) {
                    int counterDicrement = 0;
                    for (a = 0; a < this.messages.size(); a++) {
                        messageObject = (MessageObject) this.messages.get(a);
                        id = messageObject.getId();
                        if (maxPositiveUnreadId != Integer.MIN_VALUE && id > 0 && id <= maxPositiveUnreadId && messageObject.isUnread()) {
                            messageObject.setIsRead();
                            counterDicrement++;
                        }
                        if (maxNegativeUnreadId != Integer.MAX_VALUE && id < 0 && id >= maxNegativeUnreadId && messageObject.isUnread()) {
                            messageObject.setIsRead();
                            counterDicrement++;
                        }
                    }
                    if ((this.forwardEndReached[0] && maxPositiveUnreadId == this.minMessageId[0]) || maxNegativeUnreadId == this.minMessageId[0]) {
                        this.newUnreadMessageCount = 0;
                    } else {
                        this.newUnreadMessageCount -= counterDicrement;
                        if (this.newUnreadMessageCount < 0) {
                            this.newUnreadMessageCount = 0;
                        }
                    }
                    if (inLayout) {
                        AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$36(this));
                    } else {
                        inlineUpdate1();
                    }
                    MessagesController instance = MessagesController.getInstance(this.currentAccount);
                    long j = this.dialog_id;
                    boolean z2 = maxPositiveUnreadId == this.minMessageId[0] || maxNegativeUnreadId == this.minMessageId[0];
                    instance.markDialogAsRead(j, maxPositiveUnreadId, maxNegativeUnreadId, maxUnreadDate, false, counterDicrement, z2);
                    this.firstUnreadSent = true;
                } else if (!this.firstUnreadSent && this.chatLayoutManager.findFirstVisibleItemPosition() == 0) {
                    this.newUnreadMessageCount = 0;
                    if (inLayout) {
                        AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$37(this));
                    } else {
                        inlineUpdate2();
                    }
                    MessagesController.getInstance(this.currentAccount).markDialogAsRead(this.dialog_id, this.minMessageId[0], this.minMessageId[0], this.maxDate[0], false, 0, true);
                    this.firstUnreadSent = true;
                }
            }
        }
    }

    private void inlineUpdate1() {
        if (this.prevSetUnreadCount != this.newUnreadMessageCount) {
            this.prevSetUnreadCount = this.newUnreadMessageCount;
            this.pagedownButtonCounter.setText(String.format("%d", new Object[]{Integer.valueOf(this.newUnreadMessageCount)}));
        }
        if (this.newUnreadMessageCount <= 0) {
            if (this.pagedownButtonCounter.getVisibility() != 4) {
                this.pagedownButtonCounter.setVisibility(4);
            }
        } else if (this.pagedownButtonCounter.getVisibility() != 0) {
            this.pagedownButtonCounter.setVisibility(0);
        }
    }

    private void inlineUpdate2() {
        if (this.prevSetUnreadCount != this.newUnreadMessageCount) {
            this.prevSetUnreadCount = this.newUnreadMessageCount;
            this.pagedownButtonCounter.setText(String.format("%d", new Object[]{Integer.valueOf(this.newUnreadMessageCount)}));
        }
        if (this.pagedownButtonCounter.getVisibility() != 4) {
            this.pagedownButtonCounter.setVisibility(4);
        }
    }

    private void toggleMute(boolean instant) {
        Editor editor;
        TL_dialog dialog;
        if (MessagesController.getInstance(this.currentAccount).isDialogMuted(this.dialog_id)) {
            editor = MessagesController.getNotificationsSettings(this.currentAccount).edit();
            editor.putInt("notify2_" + this.dialog_id, 0);
            MessagesStorage.getInstance(this.currentAccount).setDialogFlags(this.dialog_id, 0);
            editor.commit();
            dialog = (TL_dialog) MessagesController.getInstance(this.currentAccount).dialogs_dict.get(this.dialog_id);
            if (dialog != null) {
                dialog.notify_settings = new TL_peerNotifySettings();
            }
            NotificationsController.getInstance(this.currentAccount).updateServerNotificationsSettings(this.dialog_id);
        } else if (instant) {
            editor = MessagesController.getNotificationsSettings(this.currentAccount).edit();
            editor.putInt("notify2_" + this.dialog_id, 2);
            MessagesStorage.getInstance(this.currentAccount).setDialogFlags(this.dialog_id, 1);
            editor.commit();
            dialog = (TL_dialog) MessagesController.getInstance(this.currentAccount).dialogs_dict.get(this.dialog_id);
            if (dialog != null) {
                dialog.notify_settings = new TL_peerNotifySettings();
                dialog.notify_settings.mute_until = Integer.MAX_VALUE;
            }
            NotificationsController.getInstance(this.currentAccount).updateServerNotificationsSettings(this.dialog_id);
            NotificationsController.getInstance(this.currentAccount).removeNotificationsForDialog(this.dialog_id);
        } else {
            showDialog(AlertsCreator.createMuteAlert(getParentActivity(), this.dialog_id));
        }
    }

    private int getScrollOffsetForMessage(MessageObject object) {
        int offset = Integer.MAX_VALUE;
        GroupedMessages groupedMessages = getValidGroupedMessage(object);
        if (groupedMessages != null) {
            float itemHeight;
            GroupedMessagePosition currentPosition = (GroupedMessagePosition) groupedMessages.positions.get(object);
            float maxH = ((float) Math.max(AndroidUtilities.displaySize.x, AndroidUtilities.displaySize.y)) * 0.5f;
            if (currentPosition.siblingHeights != null) {
                itemHeight = currentPosition.siblingHeights[0];
            } else {
                itemHeight = currentPosition.ph;
            }
            float totalHeight = 0.0f;
            float moveDiff = 0.0f;
            SparseBooleanArray array = new SparseBooleanArray();
            for (int a = 0; a < groupedMessages.posArray.size(); a++) {
                GroupedMessagePosition pos = (GroupedMessagePosition) groupedMessages.posArray.get(a);
                if (array.indexOfKey(pos.minY) < 0 && pos.siblingHeights == null) {
                    array.put(pos.minY, true);
                    if (pos.minY < currentPosition.minY) {
                        moveDiff -= pos.ph;
                    } else if (pos.minY > currentPosition.minY) {
                        moveDiff += pos.ph;
                    }
                    totalHeight += pos.ph;
                }
            }
            if (Math.abs(totalHeight - itemHeight) < 0.02f) {
                offset = ((((int) (((float) this.chatListView.getMeasuredHeight()) - (totalHeight * maxH))) / 2) - this.chatListView.getPaddingTop()) - AndroidUtilities.dp(7.0f);
            } else {
                offset = ((((int) (((float) this.chatListView.getMeasuredHeight()) - ((itemHeight + moveDiff) * maxH))) / 2) - this.chatListView.getPaddingTop()) - AndroidUtilities.dp(7.0f);
            }
        }
        if (offset == Integer.MAX_VALUE) {
            offset = (this.chatListView.getMeasuredHeight() - object.getApproximateHeight()) / 2;
        }
        return Math.max(0, offset);
    }

    public void scrollToMessageId(int id, int fromMessageId, boolean select, int loadIndex, boolean smooth) {
        this.wasManualScroll = true;
        MessageObject object = (MessageObject) this.messagesDict[loadIndex].get(id);
        boolean query = false;
        if (object == null) {
            query = true;
        } else if (this.messages.indexOf(object) != -1) {
            if (select) {
                this.highlightMessageId = id;
            } else {
                this.highlightMessageId = Integer.MAX_VALUE;
            }
            int yOffset = getScrollOffsetForMessage(object);
            if (smooth) {
                if (this.messages.get(this.messages.size() - 1) == object) {
                    this.chatListView.smoothScrollToPosition(this.chatAdapter.getItemCount() - 1);
                } else {
                    this.chatListView.smoothScrollToPosition(this.chatAdapter.messagesStartRow + this.messages.indexOf(object));
                }
            } else if (this.messages.get(this.messages.size() - 1) == object) {
                this.chatLayoutManager.scrollToPositionWithOffset(this.chatAdapter.getItemCount() - 1, yOffset, false);
            } else {
                this.chatLayoutManager.scrollToPositionWithOffset(this.chatAdapter.messagesStartRow + this.messages.indexOf(object), yOffset, false);
            }
            updateVisibleRows();
            boolean found = false;
            int count = this.chatListView.getChildCount();
            for (int a = 0; a < count; a++) {
                View view = this.chatListView.getChildAt(a);
                MessageObject messageObject;
                if (view instanceof ChatMessageCell) {
                    messageObject = ((ChatMessageCell) view).getMessageObject();
                    if (messageObject != null && messageObject.getId() == object.getId()) {
                        found = true;
                        view.sendAccessibilityEvent(8);
                        break;
                    }
                } else if (view instanceof ChatActionCell) {
                    messageObject = ((ChatActionCell) view).getMessageObject();
                    if (messageObject != null && messageObject.getId() == object.getId()) {
                        found = true;
                        view.sendAccessibilityEvent(8);
                        break;
                    }
                } else {
                    continue;
                }
            }
            if (!found) {
                showPagedownButton(true, true);
            }
        } else {
            query = true;
        }
        if (query) {
            if (this.currentEncryptedChat == null || MessagesStorage.getInstance(this.currentAccount).checkMessageId(this.dialog_id, this.startLoadFromMessageId)) {
                this.waitingForLoad.clear();
                this.waitingForReplyMessageLoad = true;
                this.highlightMessageId = Integer.MAX_VALUE;
                this.scrollToMessagePosition = -10000;
                this.startLoadFromMessageId = id;
                if (id == this.createUnreadMessageAfterId) {
                    this.createUnreadMessageAfterIdLoading = true;
                }
                this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                MessagesController instance = MessagesController.getInstance(this.currentAccount);
                long j = loadIndex == 0 ? this.dialog_id : this.mergeDialogId;
                int i = AndroidUtilities.isTablet() ? 30 : 20;
                int i2 = this.startLoadFromMessageId;
                int i3 = this.classGuid;
                boolean isChannel = ChatObject.isChannel(this.currentChat);
                int i4 = this.lastLoadIndex;
                this.lastLoadIndex = i4 + 1;
                instance.loadMessages(j, i, i2, 0, true, 0, i3, 3, 0, isChannel, i4);
            } else {
                return;
            }
        }
        this.returnToMessageId = fromMessageId;
        this.returnToLoadIndex = loadIndex;
        this.needSelectFromMessageId = select;
    }

    private void showPagedownButton(boolean show, boolean animated) {
        if (this.pagedownButton != null) {
            AnimatorSet animatorSet;
            Animator[] animatorArr;
            if (show) {
                this.pagedownButtonShowedByScroll = false;
                if (this.pagedownButton.getTag() == null) {
                    if (this.pagedownButtonAnimation != null) {
                        this.pagedownButtonAnimation.cancel();
                        this.pagedownButtonAnimation = null;
                    }
                    if (animated) {
                        if (this.pagedownButton.getTranslationY() == 0.0f) {
                            this.pagedownButton.setTranslationY((float) AndroidUtilities.dp(100.0f));
                        }
                        this.pagedownButton.setVisibility(0);
                        this.pagedownButton.setTag(Integer.valueOf(1));
                        this.pagedownButtonAnimation = new AnimatorSet();
                        if (this.mentiondownButton.getVisibility() == 0) {
                            animatorSet = this.pagedownButtonAnimation;
                            animatorArr = new Animator[2];
                            animatorArr[0] = ObjectAnimator.ofFloat(this.pagedownButton, "translationY", new float[]{0.0f});
                            animatorArr[1] = ObjectAnimator.ofFloat(this.mentiondownButton, "translationY", new float[]{(float) (-AndroidUtilities.dp(72.0f))});
                            animatorSet.playTogether(animatorArr);
                        } else {
                            animatorSet = this.pagedownButtonAnimation;
                            animatorArr = new Animator[1];
                            animatorArr[0] = ObjectAnimator.ofFloat(this.pagedownButton, "translationY", new float[]{0.0f});
                            animatorSet.playTogether(animatorArr);
                        }
                        this.pagedownButtonAnimation.setDuration(200);
                        this.pagedownButtonAnimation.start();
                        return;
                    }
                    this.pagedownButton.setVisibility(0);
                    return;
                }
                return;
            }
            this.returnToMessageId = 0;
            this.newUnreadMessageCount = 0;
            if (this.pagedownButton.getTag() != null) {
                this.pagedownButton.setTag(null);
                if (this.pagedownButtonAnimation != null) {
                    this.pagedownButtonAnimation.cancel();
                    this.pagedownButtonAnimation = null;
                }
                if (animated) {
                    this.pagedownButtonAnimation = new AnimatorSet();
                    if (this.mentiondownButton.getVisibility() == 0) {
                        animatorSet = this.pagedownButtonAnimation;
                        animatorArr = new Animator[2];
                        animatorArr[0] = ObjectAnimator.ofFloat(this.pagedownButton, "translationY", new float[]{(float) AndroidUtilities.dp(100.0f)});
                        animatorArr[1] = ObjectAnimator.ofFloat(this.mentiondownButton, "translationY", new float[]{0.0f});
                        animatorSet.playTogether(animatorArr);
                    } else {
                        animatorSet = this.pagedownButtonAnimation;
                        animatorArr = new Animator[1];
                        animatorArr[0] = ObjectAnimator.ofFloat(this.pagedownButton, "translationY", new float[]{(float) AndroidUtilities.dp(100.0f)});
                        animatorSet.playTogether(animatorArr);
                    }
                    this.pagedownButtonAnimation.setDuration(200);
                    this.pagedownButtonAnimation.addListener(new AnimatorListenerAdapter() {
                        public void onAnimationEnd(Animator animation) {
                            ChatActivity.this.pagedownButtonCounter.setVisibility(4);
                            ChatActivity.this.pagedownButton.setVisibility(4);
                        }
                    });
                    this.pagedownButtonAnimation.start();
                    return;
                }
                this.pagedownButton.setVisibility(4);
            }
        }
    }

    private void showMentionDownButton(boolean show, boolean animated) {
        if (this.mentiondownButton != null) {
            if (!show) {
                this.returnToMessageId = 0;
                if (this.mentiondownButton.getTag() != null) {
                    this.mentiondownButton.setTag(null);
                    if (this.mentiondownButtonAnimation != null) {
                        this.mentiondownButtonAnimation.cancel();
                        this.mentiondownButtonAnimation = null;
                    }
                    if (animated) {
                        if (this.pagedownButton.getVisibility() == 0) {
                            this.mentiondownButtonAnimation = ObjectAnimator.ofFloat(this.mentiondownButton, "alpha", new float[]{1.0f, 0.0f}).setDuration(200);
                        } else {
                            this.mentiondownButtonAnimation = ObjectAnimator.ofFloat(this.mentiondownButton, "translationY", new float[]{(float) AndroidUtilities.dp(100.0f)}).setDuration(200);
                        }
                        this.mentiondownButtonAnimation.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animation) {
                                ChatActivity.this.mentiondownButtonCounter.setVisibility(4);
                                ChatActivity.this.mentiondownButton.setVisibility(4);
                            }
                        });
                        this.mentiondownButtonAnimation.start();
                        return;
                    }
                    this.mentiondownButton.setVisibility(4);
                }
            } else if (this.mentiondownButton.getTag() == null) {
                if (this.mentiondownButtonAnimation != null) {
                    this.mentiondownButtonAnimation.cancel();
                    this.mentiondownButtonAnimation = null;
                }
                if (animated) {
                    this.mentiondownButton.setVisibility(0);
                    this.mentiondownButton.setTag(Integer.valueOf(1));
                    if (this.pagedownButton.getVisibility() == 0) {
                        this.mentiondownButton.setTranslationY((float) (-AndroidUtilities.dp(72.0f)));
                        this.mentiondownButtonAnimation = ObjectAnimator.ofFloat(this.mentiondownButton, "alpha", new float[]{0.0f, 1.0f}).setDuration(200);
                    } else {
                        if (this.mentiondownButton.getTranslationY() == 0.0f) {
                            this.mentiondownButton.setTranslationY((float) AndroidUtilities.dp(100.0f));
                        }
                        this.mentiondownButtonAnimation = ObjectAnimator.ofFloat(this.mentiondownButton, "translationY", new float[]{0.0f}).setDuration(200);
                    }
                    this.mentiondownButtonAnimation.start();
                    return;
                }
                this.mentiondownButton.setVisibility(0);
            }
        }
    }

    private void updateSecretStatus() {
        if (this.bottomOverlay != null) {
            boolean hideKeyboard = false;
            if (this.currentChat != null && !ChatObject.canSendMessages(this.currentChat) && (!ChatObject.isChannel(this.currentChat) || this.currentChat.megagroup)) {
                if (this.currentChat.default_banned_rights != null && this.currentChat.default_banned_rights.send_messages) {
                    this.bottomOverlayText.setText(LocaleController.getString("GlobalSendMessageRestricted", NUM));
                } else if (AndroidUtilities.isBannedForever(this.currentChat.banned_rights)) {
                    this.bottomOverlayText.setText(LocaleController.getString("SendMessageRestrictedForever", NUM));
                } else {
                    this.bottomOverlayText.setText(LocaleController.formatString("SendMessageRestricted", NUM, LocaleController.formatDateForBan((long) this.currentChat.banned_rights.until_date)));
                }
                this.bottomOverlay.setVisibility(0);
                if (this.mentionListAnimation != null) {
                    this.mentionListAnimation.cancel();
                    this.mentionListAnimation = null;
                }
                this.mentionContainer.setVisibility(8);
                this.mentionContainer.setTag(null);
                hideKeyboard = true;
                if (this.stickersAdapter != null) {
                    this.stickersAdapter.hide();
                }
            } else if (this.currentEncryptedChat == null || this.bigEmptyView == null) {
                this.bottomOverlay.setVisibility(4);
                if (this.stickersAdapter != null && this.chatActivityEnterView != null && this.chatActivityEnterView.hasText()) {
                    this.stickersAdapter.loadStikersForEmoji(this.chatActivityEnterView.getFieldText(), false);
                    return;
                }
                return;
            } else {
                if (this.currentEncryptedChat instanceof TL_encryptedChatRequested) {
                    this.bottomOverlayText.setText(LocaleController.getString("EncryptionProcessing", NUM));
                    this.bottomOverlay.setVisibility(0);
                    hideKeyboard = true;
                } else if (this.currentEncryptedChat instanceof TL_encryptedChatWaiting) {
                    this.bottomOverlayText.setText(AndroidUtilities.replaceTags(LocaleController.formatString("AwaitingEncryption", NUM, "<b>" + this.currentUser.first_name + "</b>")));
                    this.bottomOverlay.setVisibility(0);
                    hideKeyboard = true;
                } else if (this.currentEncryptedChat instanceof TL_encryptedChatDiscarded) {
                    this.bottomOverlayText.setText(LocaleController.getString("EncryptionRejected", NUM));
                    this.bottomOverlay.setVisibility(0);
                    this.chatActivityEnterView.setFieldText("");
                    DataQuery.getInstance(this.currentAccount).cleanDraft(this.dialog_id, false);
                    hideKeyboard = true;
                } else if (this.currentEncryptedChat instanceof TL_encryptedChat) {
                    this.bottomOverlay.setVisibility(4);
                }
                checkRaiseSensors();
                checkActionBarMenu();
            }
            if (this.inPreviewMode) {
                this.bottomOverlay.setVisibility(4);
            }
            if (hideKeyboard) {
                this.chatActivityEnterView.hidePopup(false);
                if (getParentActivity() != null) {
                    AndroidUtilities.hideKeyboard(getParentActivity().getCurrentFocus());
                }
            }
        }
    }

    public void onRequestPermissionsResultFragment(int requestCode, String[] permissions, int[] grantResults) {
        if (this.chatActivityEnterView != null) {
            this.chatActivityEnterView.onRequestPermissionsResultFragment(requestCode, permissions, grantResults);
        }
        if (this.mentionsAdapter != null) {
            this.mentionsAdapter.onRequestPermissionsResultFragment(requestCode, permissions, grantResults);
        }
        if (requestCode == 17 && this.chatAttachAlert != null) {
            this.chatAttachAlert.checkCamera(false);
        } else if (requestCode == 21) {
            if (getParentActivity() != null && grantResults != null && grantResults.length != 0 && grantResults[0] != 0) {
                AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
                builder.setTitle(LocaleController.getString("AppName", NUM));
                builder.setMessage(LocaleController.getString("PermissionNoAudioVideo", NUM));
                builder.setNegativeButton(LocaleController.getString("PermissionOpenSettings", NUM), new ChatActivity$$Lambda$38(this));
                builder.setPositiveButton(LocaleController.getString("OK", NUM), null);
                builder.show();
            }
        } else if (requestCode == 19 && grantResults != null && grantResults.length > 0 && grantResults[0] == 0) {
            processSelectedAttach(0);
        } else if (requestCode == 20 && grantResults != null && grantResults.length > 0 && grantResults[0] == 0) {
            processSelectedAttach(2);
        } else if (requestCode == 101 && this.currentUser != null) {
            if (grantResults.length <= 0 || grantResults[0] != 0) {
                VoIPHelper.permissionDenied(getParentActivity(), null);
            } else {
                VoIPHelper.startCall(this.currentUser, getParentActivity(), MessagesController.getInstance(this.currentAccount).getUserFull(this.currentUser.id));
            }
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$onRequestPermissionsResultFragment$49$ChatActivity(DialogInterface dialog, int which) {
        try {
            Intent intent = new Intent("android.settings.APPLICATION_DETAILS_SETTINGS");
            intent.setData(Uri.parse("package:" + ApplicationLoader.applicationContext.getPackageName()));
            getParentActivity().startActivity(intent);
        } catch (Exception e) {
            FileLog.e(e);
        }
    }

    private void checkActionBarMenu() {
        if ((this.currentEncryptedChat == null || (this.currentEncryptedChat instanceof TL_encryptedChat)) && ((this.currentChat == null || !ChatObject.isNotInChat(this.currentChat)) && (this.currentUser == null || !UserObject.isDeleted(this.currentUser)))) {
            if (this.timeItem2 != null) {
                this.timeItem2.setVisibility(0);
            }
            if (this.avatarContainer != null) {
                this.avatarContainer.showTimeItem();
            }
        } else {
            if (this.timeItem2 != null) {
                this.timeItem2.setVisibility(8);
            }
            if (this.avatarContainer != null) {
                this.avatarContainer.hideTimeItem();
            }
        }
        if (!(this.avatarContainer == null || this.currentEncryptedChat == null)) {
            this.avatarContainer.setTime(this.currentEncryptedChat.ttl);
        }
        checkAndUpdateAvatar();
    }

    private int getMessageType(MessageObject messageObject) {
        if (messageObject == null) {
            return -1;
        }
        InputStickerSet inputStickerSet;
        boolean canSave;
        String mime;
        if (this.currentEncryptedChat == null) {
            boolean isBroadcastError;
            if (this.isBroadcast && messageObject.getId() <= 0 && messageObject.isSendError()) {
                isBroadcastError = true;
            } else {
                isBroadcastError = false;
            }
            if (messageObject.isEditing()) {
                return -1;
            }
            if ((this.isBroadcast || messageObject.getId() > 0 || !messageObject.isOut()) && !isBroadcastError) {
                if (messageObject.type == 6) {
                    return -1;
                }
                if (messageObject.type == 10 || messageObject.type == 11 || messageObject.type == 16) {
                    if (messageObject.getId() == 0) {
                        return -1;
                    }
                    return 1;
                } else if (messageObject.isVoice()) {
                    return 2;
                } else {
                    if (messageObject.isSticker()) {
                        inputStickerSet = messageObject.getInputStickerSet();
                        if (inputStickerSet instanceof TL_inputStickerSetID) {
                            if (!DataQuery.getInstance(this.currentAccount).isStickerPackInstalled(inputStickerSet.id)) {
                                return 7;
                            }
                        } else if ((inputStickerSet instanceof TL_inputStickerSetShortName) && !DataQuery.getInstance(this.currentAccount).isStickerPackInstalled(inputStickerSet.short_name)) {
                            return 7;
                        }
                        return 9;
                    }
                    if (!messageObject.isRoundVideo() && ((messageObject.messageOwner.media instanceof TL_messageMediaPhoto) || messageObject.getDocument() != null || messageObject.isMusic() || messageObject.isVideo())) {
                        canSave = false;
                        if (!TextUtils.isEmpty(messageObject.messageOwner.attachPath) && new File(messageObject.messageOwner.attachPath).exists()) {
                            canSave = true;
                        }
                        if (!canSave && FileLoader.getPathToMessage(messageObject.messageOwner).exists()) {
                            canSave = true;
                        }
                        if (canSave) {
                            if (messageObject.getDocument() != null) {
                                mime = messageObject.getDocument().mime_type;
                                if (mime != null) {
                                    if (messageObject.getDocumentName().toLowerCase().endsWith("attheme")) {
                                        return 10;
                                    }
                                    if (mime.endsWith("/xml")) {
                                        return 5;
                                    }
                                    if (mime.endsWith("/png") || mime.endsWith("/jpg") || mime.endsWith("/jpeg")) {
                                        return 6;
                                    }
                                }
                            }
                            return 4;
                        }
                    } else if (messageObject.type == 12) {
                        return 8;
                    } else {
                        if (messageObject.isMediaEmpty()) {
                            return 3;
                        }
                    }
                    return 2;
                }
            } else if (!messageObject.isSendError()) {
                return -1;
            } else {
                if (messageObject.isMediaEmpty()) {
                    return 20;
                }
                return 0;
            }
        } else if (messageObject.isSending()) {
            return -1;
        } else {
            if (messageObject.type == 6) {
                return -1;
            }
            if (messageObject.isSendError()) {
                if (messageObject.isMediaEmpty()) {
                    return 20;
                }
                return 0;
            } else if (messageObject.type == 10 || messageObject.type == 11) {
                if (messageObject.getId() == 0 || messageObject.isSending()) {
                    return -1;
                }
                return 1;
            } else if (messageObject.isVoice()) {
                return 2;
            } else {
                if (messageObject.isSticker()) {
                    inputStickerSet = messageObject.getInputStickerSet();
                    if ((inputStickerSet instanceof TL_inputStickerSetShortName) && !DataQuery.getInstance(this.currentAccount).isStickerPackInstalled(inputStickerSet.short_name)) {
                        return 7;
                    }
                } else if (!messageObject.isRoundVideo() && ((messageObject.messageOwner.media instanceof TL_messageMediaPhoto) || messageObject.getDocument() != null || messageObject.isMusic() || messageObject.isVideo())) {
                    canSave = false;
                    if (!TextUtils.isEmpty(messageObject.messageOwner.attachPath) && new File(messageObject.messageOwner.attachPath).exists()) {
                        canSave = true;
                    }
                    if (!canSave && FileLoader.getPathToMessage(messageObject.messageOwner).exists()) {
                        canSave = true;
                    }
                    if (canSave) {
                        if (messageObject.getDocument() != null) {
                            mime = messageObject.getDocument().mime_type;
                            if (mime != null && mime.endsWith("text/xml")) {
                                return 5;
                            }
                        }
                        if (messageObject.messageOwner.ttl <= 0) {
                            return 4;
                        }
                    }
                } else if (messageObject.type == 12) {
                    return 8;
                } else {
                    if (messageObject.isMediaEmpty()) {
                        return 3;
                    }
                }
                return 2;
            }
        }
    }

    private void addToSelectedMessages(MessageObject messageObject, boolean outside) {
        addToSelectedMessages(messageObject, outside, true);
    }

    private void addToSelectedMessages(MessageObject messageObject, boolean outside, boolean last) {
        int a;
        if (messageObject != null) {
            int index = messageObject.getDialogId() == this.dialog_id ? 0 : 1;
            GroupedMessages groupedMessages;
            if (outside && messageObject.getGroupId() != 0) {
                boolean hasUnselected = false;
                groupedMessages = (GroupedMessages) this.groupedMessagesMap.get(messageObject.getGroupId());
                if (groupedMessages != null) {
                    int lastNum = 0;
                    for (a = 0; a < groupedMessages.messages.size(); a++) {
                        if (this.selectedMessagesIds[index].indexOfKey(((MessageObject) groupedMessages.messages.get(a)).getId()) < 0) {
                            hasUnselected = true;
                            lastNum = a;
                        }
                    }
                    a = 0;
                    while (a < groupedMessages.messages.size()) {
                        MessageObject message = (MessageObject) groupedMessages.messages.get(a);
                        if (!hasUnselected) {
                            addToSelectedMessages(message, false, a == groupedMessages.messages.size() + -1);
                        } else if (this.selectedMessagesIds[index].indexOfKey(message.getId()) < 0) {
                            addToSelectedMessages(message, false, a == lastNum);
                        }
                        a++;
                    }
                    return;
                }
                return;
            } else if (this.selectedMessagesIds[index].indexOfKey(messageObject.getId()) >= 0) {
                this.selectedMessagesIds[index].remove(messageObject.getId());
                if (messageObject.type == 0 || messageObject.caption != null) {
                    this.selectedMessagesCanCopyIds[index].remove(messageObject.getId());
                }
                if (messageObject.isSticker()) {
                    this.selectedMessagesCanStarIds[index].remove(messageObject.getId());
                }
                if (messageObject.canEditMessage(this.currentChat) && messageObject.getGroupId() != 0) {
                    groupedMessages = (GroupedMessages) this.groupedMessagesMap.get(messageObject.getGroupId());
                    if (groupedMessages != null && groupedMessages.messages.size() > 1) {
                        this.canEditMessagesCount--;
                    }
                }
                if (!messageObject.canDeleteMessage(this.currentChat)) {
                    this.cantDeleteMessagesCount--;
                }
            } else if (this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size() < 100) {
                this.selectedMessagesIds[index].put(messageObject.getId(), messageObject);
                if (messageObject.type == 0 || messageObject.caption != null) {
                    this.selectedMessagesCanCopyIds[index].put(messageObject.getId(), messageObject);
                }
                if (messageObject.isSticker()) {
                    this.selectedMessagesCanStarIds[index].put(messageObject.getId(), messageObject);
                }
                if (messageObject.canEditMessage(this.currentChat) && messageObject.getGroupId() != 0) {
                    groupedMessages = (GroupedMessages) this.groupedMessagesMap.get(messageObject.getGroupId());
                    if (groupedMessages != null && groupedMessages.messages.size() > 1) {
                        this.canEditMessagesCount++;
                    }
                }
                if (!messageObject.canDeleteMessage(this.currentChat)) {
                    this.cantDeleteMessagesCount++;
                }
            } else {
                return;
            }
        }
        if (last && this.actionBar.isActionModeShowed()) {
            int selectedCount = this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size();
            if (selectedCount == 0) {
                this.actionBar.hideActionMode();
                updatePinnedMessageView(true);
                this.startReplyOnTextChange = false;
                return;
            }
            ActionBarMenuItem copyItem = this.actionBar.createActionMode().getItem(10);
            ActionBarMenuItem starItem = this.actionBar.createActionMode().getItem(22);
            ActionBarMenuItem editItem = this.actionBar.createActionMode().getItem(23);
            ActionBarMenuItem replyItem = this.actionBar.createActionMode().getItem(19);
            int copyVisible = copyItem.getVisibility();
            int starVisible = starItem.getVisibility();
            copyItem.setVisibility(this.selectedMessagesCanCopyIds[0].size() + this.selectedMessagesCanCopyIds[1].size() != 0 ? 0 : 8);
            int i = (DataQuery.getInstance(this.currentAccount).canAddStickerToFavorites() && this.selectedMessagesCanStarIds[0].size() + this.selectedMessagesCanStarIds[1].size() == selectedCount) ? 0 : 8;
            starItem.setVisibility(i);
            int newCopyVisible = copyItem.getVisibility();
            int newStarVisible = starItem.getVisibility();
            this.actionBar.createActionMode().getItem(12).setVisibility(this.cantDeleteMessagesCount == 0 ? 0 : 8);
            if (editItem != null) {
                i = (this.canEditMessagesCount == 1 && this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size() == 1) ? 0 : 8;
                editItem.setVisibility(i);
            }
            this.hasUnfavedSelected = false;
            for (a = 0; a < 2; a++) {
                for (int b = 0; b < this.selectedMessagesCanStarIds[a].size(); b++) {
                    if (!DataQuery.getInstance(this.currentAccount).isStickerInFavorites(((MessageObject) this.selectedMessagesCanStarIds[a].valueAt(b)).getDocument())) {
                        this.hasUnfavedSelected = true;
                        break;
                    }
                }
                if (this.hasUnfavedSelected) {
                    break;
                }
            }
            starItem.setIcon(this.hasUnfavedSelected ? NUM : NUM);
            if (replyItem != null) {
                boolean allowChatActions = true;
                if ((this.currentEncryptedChat != null && AndroidUtilities.getPeerLayerVersion(this.currentEncryptedChat.layer) < 46) || this.isBroadcast || ((this.bottomOverlayChat != null && this.bottomOverlayChat.getVisibility() == 0) || (this.currentChat != null && (ChatObject.isNotInChat(this.currentChat) || !((!ChatObject.isChannel(this.currentChat) || ChatObject.canPost(this.currentChat) || this.currentChat.megagroup) && ChatObject.canSendMessages(this.currentChat)))))) {
                    allowChatActions = false;
                }
                int newVisibility = (allowChatActions && this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size() == 1) ? 0 : 8;
                boolean z = newVisibility == 0 && !this.chatActivityEnterView.hasText();
                this.startReplyOnTextChange = z;
                if (replyItem.getVisibility() != newVisibility) {
                    if (this.replyButtonAnimation != null) {
                        this.replyButtonAnimation.cancel();
                    }
                    if (copyVisible == newCopyVisible && starVisible == newStarVisible) {
                        this.replyButtonAnimation = new AnimatorSet();
                        replyItem.setPivotX((float) AndroidUtilities.dp(54.0f));
                        editItem.setPivotX((float) AndroidUtilities.dp(54.0f));
                        AnimatorSet animatorSet;
                        Animator[] animatorArr;
                        if (newVisibility == 0) {
                            replyItem.setVisibility(newVisibility);
                            animatorSet = this.replyButtonAnimation;
                            animatorArr = new Animator[4];
                            animatorArr[0] = ObjectAnimator.ofFloat(replyItem, "alpha", new float[]{1.0f});
                            animatorArr[1] = ObjectAnimator.ofFloat(replyItem, "scaleX", new float[]{1.0f});
                            animatorArr[2] = ObjectAnimator.ofFloat(editItem, "alpha", new float[]{1.0f});
                            animatorArr[3] = ObjectAnimator.ofFloat(editItem, "scaleX", new float[]{1.0f});
                            animatorSet.playTogether(animatorArr);
                        } else {
                            animatorSet = this.replyButtonAnimation;
                            animatorArr = new Animator[4];
                            animatorArr[0] = ObjectAnimator.ofFloat(replyItem, "alpha", new float[]{0.0f});
                            animatorArr[1] = ObjectAnimator.ofFloat(replyItem, "scaleX", new float[]{0.0f});
                            animatorArr[2] = ObjectAnimator.ofFloat(editItem, "alpha", new float[]{0.0f});
                            animatorArr[3] = ObjectAnimator.ofFloat(editItem, "scaleX", new float[]{0.0f});
                            animatorSet.playTogether(animatorArr);
                        }
                        this.replyButtonAnimation.setDuration(100);
                        final int i2 = newVisibility;
                        final ActionBarMenuItem actionBarMenuItem = replyItem;
                        this.replyButtonAnimation.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animation) {
                                if (ChatActivity.this.replyButtonAnimation != null && ChatActivity.this.replyButtonAnimation.equals(animation) && i2 == 8) {
                                    actionBarMenuItem.setVisibility(8);
                                }
                            }

                            public void onAnimationCancel(Animator animation) {
                                if (ChatActivity.this.replyButtonAnimation != null && ChatActivity.this.replyButtonAnimation.equals(animation)) {
                                    ChatActivity.this.replyButtonAnimation = null;
                                }
                            }
                        });
                        this.replyButtonAnimation.start();
                        return;
                    }
                    if (newVisibility == 0) {
                        replyItem.setAlpha(1.0f);
                        replyItem.setScaleX(1.0f);
                    } else {
                        replyItem.setAlpha(0.0f);
                        replyItem.setScaleX(0.0f);
                    }
                    replyItem.setVisibility(newVisibility);
                }
            }
        }
    }

    private void processRowSelect(View view, boolean outside) {
        MessageObject message = null;
        if (view instanceof ChatMessageCell) {
            message = ((ChatMessageCell) view).getMessageObject();
        } else if (view instanceof ChatActionCell) {
            message = ((ChatActionCell) view).getMessageObject();
        }
        int type = getMessageType(message);
        if (type >= 2 && type != 20) {
            addToSelectedMessages(message, outside);
            updateActionModeTitle();
            updateVisibleRows();
        }
    }

    private void updateActionModeTitle() {
        if (!this.actionBar.isActionModeShowed()) {
            return;
        }
        if (this.selectedMessagesIds[0].size() != 0 || this.selectedMessagesIds[1].size() != 0) {
            this.selectedMessagesCountTextView.setNumber(this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size(), true);
        }
    }

    private void updateTitle() {
        if (this.avatarContainer != null) {
            if (this.currentChat != null) {
                this.avatarContainer.setTitle(this.currentChat.title);
            } else if (this.currentUser != null) {
                if (this.currentUser.self) {
                    this.avatarContainer.setTitle(LocaleController.getString("SavedMessages", NUM));
                } else if (MessagesController.isSupportUser(this.currentUser) || ContactsController.getInstance(this.currentAccount).contactsDict.get(Integer.valueOf(this.currentUser.id)) != null || (ContactsController.getInstance(this.currentAccount).contactsDict.size() == 0 && ContactsController.getInstance(this.currentAccount).isLoadingContacts())) {
                    this.avatarContainer.setTitle(UserObject.getUserName(this.currentUser));
                } else if (TextUtils.isEmpty(this.currentUser.phone)) {
                    this.avatarContainer.setTitle(UserObject.getUserName(this.currentUser));
                } else {
                    this.avatarContainer.setTitle(PhoneFormat.getInstance().format("+" + this.currentUser.phone));
                }
            }
            setParentActivityTitle(this.avatarContainer.getTitleTextView().getText());
        }
    }

    private void updateBotButtons() {
        if (this.headerItem != null && this.currentUser != null && this.currentEncryptedChat == null && this.currentUser.bot) {
            boolean hasHelp = false;
            boolean hasSettings = false;
            if (this.botInfo.size() != 0) {
                for (int b = 0; b < this.botInfo.size(); b++) {
                    BotInfo info = (BotInfo) this.botInfo.valueAt(b);
                    for (int a = 0; a < info.commands.size(); a++) {
                        TL_botCommand command = (TL_botCommand) info.commands.get(a);
                        if (command.command.toLowerCase().equals("help")) {
                            hasHelp = true;
                        } else if (command.command.toLowerCase().equals("settings")) {
                            hasSettings = true;
                        }
                        if (hasSettings && hasHelp) {
                            break;
                        }
                    }
                }
            }
            if (hasHelp) {
                this.headerItem.showSubItem(30);
            } else {
                this.headerItem.hideSubItem(30);
            }
            if (hasSettings) {
                this.headerItem.showSubItem(31);
            } else {
                this.headerItem.hideSubItem(31);
            }
        }
    }

    private void updateTitleIcons() {
        Drawable drawable = null;
        if (this.avatarContainer != null) {
            Drawable rightIcon;
            if (MessagesController.getInstance(this.currentAccount).isDialogMuted(this.dialog_id)) {
                rightIcon = Theme.chat_muteIconDrawable;
            } else {
                rightIcon = null;
            }
            ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
            if (this.currentEncryptedChat != null) {
                drawable = Theme.chat_lockIconDrawable;
            }
            chatAvatarContainer.setTitleIcons(drawable, rightIcon);
            if (this.muteItem == null) {
                return;
            }
            if (rightIcon != null) {
                this.muteItem.setText(LocaleController.getString("UnmuteNotifications", NUM));
            } else {
                this.muteItem.setText(LocaleController.getString("MuteNotifications", NUM));
            }
        }
    }

    private void checkAndUpdateAvatar() {
        if (this.currentUser != null) {
            User user = MessagesController.getInstance(this.currentAccount).getUser(Integer.valueOf(this.currentUser.id));
            if (user != null) {
                this.currentUser = user;
            } else {
                return;
            }
        } else if (this.currentChat != null) {
            Chat chat = MessagesController.getInstance(this.currentAccount).getChat(Integer.valueOf(this.currentChat.id));
            if (chat != null) {
                this.currentChat = chat;
            } else {
                return;
            }
        }
        if (this.avatarContainer != null) {
            this.avatarContainer.checkAndUpdateAvatar();
        }
    }

    public void openVideoEditor(String videoPath, String caption) {
        if (getParentActivity() != null) {
            Bitmap thumb = ThumbnailUtils.createVideoThumbnail(videoPath, 1);
            PhotoViewer.getInstance().setParentActivity(getParentActivity());
            final ArrayList<Object> cameraPhoto = new ArrayList();
            PhotoEntry entry = new PhotoEntry(0, 0, 0, videoPath, 0, true);
            entry.caption = caption;
            cameraPhoto.add(entry);
            final Bitmap bitmap = thumb;
            PhotoViewer.getInstance().openPhotoForSelect(cameraPhoto, 0, 2, new EmptyPhotoViewerProvider() {
                public BitmapHolder getThumbForPhoto(MessageObject messageObject, FileLocation fileLocation, int index) {
                    return new BitmapHolder(bitmap, null);
                }

                public void sendButtonPressed(int index, VideoEditedInfo videoEditedInfo) {
                    ChatActivity.this.sendMedia((PhotoEntry) cameraPhoto.get(0), videoEditedInfo);
                }

                public boolean canScrollAway() {
                    return false;
                }
            }, this);
            return;
        }
        fillEditingMediaWithCaption(caption, null);
        SendMessagesHelper.prepareSendingVideo(videoPath, 0, 0, 0, 0, null, this.dialog_id, this.replyingMessageObject, null, null, 0, this.editingMessageObject);
        hideFieldPanel();
        DataQuery.getInstance(this.currentAccount).cleanDraft(this.dialog_id, true);
    }

    private void showAttachmentError() {
        if (getParentActivity() != null) {
            Toast.makeText(getParentActivity(), LocaleController.getString("UnsupportedAttachment", NUM), 0).show();
        }
    }

    private void fillEditingMediaWithCaption(CharSequence caption, ArrayList<MessageEntity> entities) {
        if (this.editingMessageObject != null) {
            if (!TextUtils.isEmpty(caption)) {
                this.editingMessageObject.editingMessage = caption;
                this.editingMessageObject.editingMessageEntities = entities;
            } else if (this.chatActivityEnterView != null) {
                this.editingMessageObject.editingMessage = this.chatActivityEnterView.getFieldText();
                if (this.editingMessageObject.editingMessage == null && !TextUtils.isEmpty(this.editingMessageObject.messageOwner.message)) {
                    this.editingMessageObject.editingMessage = "";
                }
            }
        }
    }

    private void sendUriAsDocument(Uri uri) {
        if (uri != null) {
            String extractUriFrom = uri.toString();
            if (extractUriFrom.contains("com.google.android.apps.photos.contentprovider")) {
                try {
                    String firstExtraction = extractUriFrom.split("/1/")[1];
                    int index = firstExtraction.indexOf("/ACTUAL");
                    if (index != -1) {
                        uri = Uri.parse(URLDecoder.decode(firstExtraction.substring(0, index), "UTF-8"));
                    }
                } catch (Exception e) {
                    FileLog.e(e);
                }
            }
            String tempPath = AndroidUtilities.getPath(uri);
            String originalPath = tempPath;
            if (tempPath == null) {
                originalPath = uri.toString();
                tempPath = MediaController.copyFileToCache(uri, "file");
            }
            if (tempPath == null) {
                showAttachmentError();
                return;
            }
            fillEditingMediaWithCaption(null, null);
            SendMessagesHelper.prepareSendingDocument(tempPath, originalPath, null, null, null, this.dialog_id, this.replyingMessageObject, null, this.editingMessageObject);
            hideFieldPanel();
        }
    }

    public void onActivityResultFragment(int requestCode, int resultCode, Intent data) {
        if (resultCode != -1) {
            return;
        }
        if (requestCode == 0 || requestCode == 2) {
            createChatAttachView();
            if (this.chatAttachAlert != null) {
                this.chatAttachAlert.onActivityResultFragment(requestCode, data, this.currentPicturePath);
            }
            this.currentPicturePath = null;
        } else if (requestCode == 1) {
            if (data == null || data.getData() == null) {
                showAttachmentError();
                return;
            }
            Uri uri = data.getData();
            if (uri.toString().contains("video")) {
                String videoPath = null;
                try {
                    videoPath = AndroidUtilities.getPath(uri);
                } catch (Exception e) {
                    FileLog.e(e);
                }
                if (videoPath == null) {
                    showAttachmentError();
                }
                if (this.paused) {
                    this.startVideoEdit = videoPath;
                } else {
                    openVideoEditor(videoPath, null);
                }
            } else {
                fillEditingMediaWithCaption(null, null);
                SendMessagesHelper.prepareSendingPhoto(null, uri, this.dialog_id, this.replyingMessageObject, null, null, null, null, 0, this.editingMessageObject);
            }
            hideFieldPanel();
            DataQuery.getInstance(this.currentAccount).cleanDraft(this.dialog_id, true);
        } else if (requestCode != 21) {
        } else {
            if (data == null) {
                showAttachmentError();
                return;
            }
            if (data.getData() != null) {
                sendUriAsDocument(data.getData());
            } else if (data.getClipData() != null) {
                ClipData clipData = data.getClipData();
                for (int i = 0; i < clipData.getItemCount(); i++) {
                    sendUriAsDocument(clipData.getItemAt(i).getUri());
                }
            } else {
                showAttachmentError();
            }
            hideFieldPanel();
            DataQuery.getInstance(this.currentAccount).cleanDraft(this.dialog_id, true);
        }
    }

    public void saveSelfArgs(Bundle args) {
        if (this.currentPicturePath != null) {
            args.putString("path", this.currentPicturePath);
        }
    }

    public void restoreSelfArgs(Bundle args) {
        this.currentPicturePath = args.getString("path");
    }

    private void removeUnreadPlane(boolean scrollToEnd) {
        if (this.unreadMessageObject != null) {
            if (scrollToEnd) {
                boolean[] zArr = this.forwardEndReached;
                this.forwardEndReached[1] = true;
                zArr[0] = true;
                this.first_unread_id = 0;
                this.last_message_id = 0;
            }
            this.createUnreadMessageAfterId = 0;
            this.createUnreadMessageAfterIdLoading = false;
            removeMessageObject(this.unreadMessageObject);
            this.unreadMessageObject = null;
        }
    }

    public boolean processSendingText(String text) {
        return this.chatActivityEnterView.processSendingText(text);
    }

    /* JADX WARNING: Missing block: B:291:0x0843, code skipped:
            if (r124.indexOfKey(r130.getGroupId()) < 0) goto L_0x0845;
     */
    public void didReceivedNotification(int r182, int r183, java.lang.Object... r184) {
        /*
        r181 = this;
        r4 = org.telegram.messenger.NotificationCenter.messagesDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x0ebd;
    L_0x0006:
        r4 = 10;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r81 = r4.intValue();
        r0 = r181;
        r4 = r0.classGuid;
        r0 = r81;
        if (r0 != r4) goto L_0x0072;
    L_0x0018:
        r4 = 0;
        r0 = r181;
        r0.setItemAnimationsEnabled(r4);
        r0 = r181;
        r4 = r0.openAnimationEnded;
        if (r4 != 0) goto L_0x004b;
    L_0x0024:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.NotificationCenter.getInstance(r4);
        r6 = 5;
        r6 = new int[r6];
        r7 = 0;
        r8 = org.telegram.messenger.NotificationCenter.chatInfoDidLoad;
        r6[r7] = r8;
        r7 = 1;
        r8 = org.telegram.messenger.NotificationCenter.dialogsNeedReload;
        r6[r7] = r8;
        r7 = 2;
        r8 = org.telegram.messenger.NotificationCenter.closeChats;
        r6[r7] = r8;
        r7 = 3;
        r8 = org.telegram.messenger.NotificationCenter.botKeyboardDidLoad;
        r6[r7] = r8;
        r7 = 4;
        r8 = org.telegram.messenger.NotificationCenter.userInfoDidLoad;
        r6[r7] = r8;
        r4.setAllowedNotificationsDutingAnimation(r6);
    L_0x004b:
        r4 = 11;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r149 = r4.intValue();
        r0 = r181;
        r4 = r0.waitingForLoad;
        r6 = java.lang.Integer.valueOf(r149);
        r88 = r4.indexOf(r6);
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.UserConfig.getInstance(r4);
        r54 = r4.getClientUserId();
        r4 = -1;
        r0 = r88;
        if (r0 != r4) goto L_0x0073;
    L_0x0072:
        return;
    L_0x0073:
        r0 = r181;
        r4 = r0.waitingForLoad;
        r0 = r88;
        r4.remove(r0);
        r4 = 2;
        r110 = r184[r4];
        r110 = (java.util.ArrayList) r110;
        r47 = 0;
        r0 = r181;
        r4 = r0.waitingForReplyMessageLoad;
        if (r4 == 0) goto L_0x011a;
    L_0x0089:
        r0 = r181;
        r4 = r0.createUnreadMessageAfterIdLoading;
        if (r4 != 0) goto L_0x00ed;
    L_0x008f:
        r75 = 0;
        r19 = 0;
    L_0x0093:
        r4 = r110.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x00b1;
    L_0x009b:
        r0 = r110;
        r1 = r19;
        r130 = r0.get(r1);
        r130 = (org.telegram.messenger.MessageObject) r130;
        r4 = r130.getId();
        r0 = r181;
        r6 = r0.startLoadFromMessageId;
        if (r4 != r6) goto L_0x00b9;
    L_0x00af:
        r75 = 1;
    L_0x00b1:
        if (r75 != 0) goto L_0x00ed;
    L_0x00b3:
        r4 = 0;
        r0 = r181;
        r0.startLoadFromMessageId = r4;
        goto L_0x0072;
    L_0x00b9:
        r4 = r19 + 1;
        r6 = r110.size();
        if (r4 >= r6) goto L_0x00ea;
    L_0x00c1:
        r4 = r19 + 1;
        r0 = r110;
        r131 = r0.get(r4);
        r131 = (org.telegram.messenger.MessageObject) r131;
        r4 = r130.getId();
        r0 = r181;
        r6 = r0.startLoadFromMessageId;
        if (r4 < r6) goto L_0x00ea;
    L_0x00d5:
        r4 = r131.getId();
        r0 = r181;
        r6 = r0.startLoadFromMessageId;
        if (r4 >= r6) goto L_0x00ea;
    L_0x00df:
        r4 = r130.getId();
        r0 = r181;
        r0.startLoadFromMessageId = r4;
        r75 = 1;
        goto L_0x00b1;
    L_0x00ea:
        r19 = r19 + 1;
        goto L_0x0093;
    L_0x00ed:
        r0 = r181;
        r0 = r0.startLoadFromMessageId;
        r160 = r0;
        r0 = r181;
        r0 = r0.needSelectFromMessageId;
        r121 = r0;
        r0 = r181;
        r0 = r0.createUnreadMessageAfterId;
        r166 = r0;
        r0 = r181;
        r0 = r0.createUnreadMessageAfterIdLoading;
        r47 = r0;
        r181.clearChatData();
        r0 = r166;
        r1 = r181;
        r1.createUnreadMessageAfterId = r0;
        r0 = r160;
        r1 = r181;
        r1.startLoadFromMessageId = r0;
        r0 = r121;
        r1 = r181;
        r1.needSelectFromMessageId = r0;
    L_0x011a:
        r0 = r181;
        r4 = r0.loadsCount;
        r4 = r4 + 1;
        r0 = r181;
        r0.loadsCount = r4;
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r60 = r4.longValue();
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 != 0) goto L_0x02b2;
    L_0x0135:
        r101 = 0;
    L_0x0137:
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r46 = r4.intValue();
        r4 = 3;
        r4 = r184[r4];
        r4 = (java.lang.Boolean) r4;
        r93 = r4.booleanValue();
        r4 = 4;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r74 = r4.intValue();
        r4 = 7;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r100 = r4.intValue();
        r4 = 8;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r102 = r4.intValue();
        r4 = 12;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r103 = r4.intValue();
        r4 = 13;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r104 = r4.intValue();
        if (r104 >= 0) goto L_0x02b6;
    L_0x017b:
        r104 = r104 * -1;
        r4 = 0;
        r0 = r181;
        r0.hasAllMentionsLocal = r4;
    L_0x0182:
        r4 = 4;
        r0 = r102;
        if (r0 != r4) goto L_0x01c1;
    L_0x0187:
        r0 = r103;
        r1 = r181;
        r1.startLoadFromMessageId = r0;
        r4 = r110.size();
        r19 = r4 + -1;
    L_0x0193:
        if (r19 <= 0) goto L_0x01c1;
    L_0x0195:
        r0 = r110;
        r1 = r19;
        r130 = r0.get(r1);
        r130 = (org.telegram.messenger.MessageObject) r130;
        r0 = r130;
        r4 = r0.type;
        if (r4 >= 0) goto L_0x02c3;
    L_0x01a5:
        r4 = r130.getId();
        r0 = r181;
        r6 = r0.startLoadFromMessageId;
        if (r4 != r6) goto L_0x02c3;
    L_0x01af:
        r4 = r19 + -1;
        r0 = r110;
        r4 = r0.get(r4);
        r4 = (org.telegram.messenger.MessageObject) r4;
        r4 = r4.getId();
        r0 = r181;
        r0.startLoadFromMessageId = r4;
    L_0x01c1:
        r167 = 0;
        if (r74 == 0) goto L_0x02d8;
    L_0x01c5:
        r4 = 5;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r4 = r4.intValue();
        r0 = r181;
        r0.last_message_id = r4;
        r4 = 3;
        r0 = r102;
        if (r0 != r4) goto L_0x02c7;
    L_0x01d7:
        r0 = r181;
        r4 = r0.loadingFromOldPosition;
        if (r4 == 0) goto L_0x01f3;
    L_0x01dd:
        r4 = 6;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r167 = r4.intValue();
        if (r167 == 0) goto L_0x01ee;
    L_0x01e8:
        r0 = r74;
        r1 = r181;
        r1.createUnreadMessageAfterId = r0;
    L_0x01ee:
        r4 = 0;
        r0 = r181;
        r0.loadingFromOldPosition = r4;
    L_0x01f3:
        r4 = 0;
        r0 = r181;
        r0.first_unread_id = r4;
    L_0x01f8:
        r127 = 0;
        if (r102 == 0) goto L_0x020f;
    L_0x01fc:
        r0 = r181;
        r4 = r0.startLoadFromMessageId;
        if (r4 != 0) goto L_0x0208;
    L_0x0202:
        r0 = r181;
        r4 = r0.last_message_id;
        if (r4 == 0) goto L_0x020f;
    L_0x0208:
        r0 = r181;
        r4 = r0.forwardEndReached;
        r6 = 0;
        r4[r101] = r6;
    L_0x020f:
        r4 = 1;
        r0 = r102;
        if (r0 == r4) goto L_0x0219;
    L_0x0214:
        r4 = 3;
        r0 = r102;
        if (r0 != r4) goto L_0x023d;
    L_0x0219:
        r4 = 1;
        r0 = r101;
        if (r0 != r4) goto L_0x023d;
    L_0x021e:
        r0 = r181;
        r4 = r0.endReached;
        r6 = 0;
        r0 = r181;
        r7 = r0.cacheEndReached;
        r8 = 0;
        r9 = 1;
        r7[r8] = r9;
        r4[r6] = r9;
        r0 = r181;
        r4 = r0.forwardEndReached;
        r6 = 0;
        r7 = 0;
        r4[r6] = r7;
        r0 = r181;
        r4 = r0.minMessageId;
        r6 = 0;
        r7 = 0;
        r4[r6] = r7;
    L_0x023d:
        r0 = r181;
        r4 = r0.loadsCount;
        r6 = 1;
        if (r4 != r6) goto L_0x0256;
    L_0x0244:
        r4 = r110.size();
        r6 = 20;
        if (r4 <= r6) goto L_0x0256;
    L_0x024c:
        r0 = r181;
        r4 = r0.loadsCount;
        r4 = r4 + 1;
        r0 = r181;
        r0.loadsCount = r4;
    L_0x0256:
        r0 = r181;
        r4 = r0.firstLoading;
        if (r4 == 0) goto L_0x0318;
    L_0x025c:
        r0 = r181;
        r4 = r0.forwardEndReached;
        r4 = r4[r101];
        if (r4 != 0) goto L_0x0309;
    L_0x0264:
        r0 = r181;
        r4 = r0.messages;
        r4.clear();
        r0 = r181;
        r4 = r0.messagesByDays;
        r4.clear();
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r4.clear();
        r19 = 0;
    L_0x027b:
        r4 = 2;
        r0 = r19;
        if (r0 >= r4) goto L_0x0309;
    L_0x0280:
        r0 = r181;
        r4 = r0.messagesDict;
        r4 = r4[r19];
        r4.clear();
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x02f7;
    L_0x028f:
        r0 = r181;
        r4 = r0.maxMessageId;
        r6 = NUM; // 0x7fffffff float:NaN double:1.060997895E-314;
        r4[r19] = r6;
        r0 = r181;
        r4 = r0.minMessageId;
        r6 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r4[r19] = r6;
    L_0x02a0:
        r0 = r181;
        r4 = r0.maxDate;
        r6 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r4[r19] = r6;
        r0 = r181;
        r4 = r0.minDate;
        r6 = 0;
        r4[r19] = r6;
        r19 = r19 + 1;
        goto L_0x027b;
    L_0x02b2:
        r101 = 1;
        goto L_0x0137;
    L_0x02b6:
        r0 = r181;
        r4 = r0.first;
        if (r4 == 0) goto L_0x0182;
    L_0x02bc:
        r4 = 1;
        r0 = r181;
        r0.hasAllMentionsLocal = r4;
        goto L_0x0182;
    L_0x02c3:
        r19 = r19 + -1;
        goto L_0x0193;
    L_0x02c7:
        r0 = r74;
        r1 = r181;
        r1.first_unread_id = r0;
        r4 = 6;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r167 = r4.intValue();
        goto L_0x01f8;
    L_0x02d8:
        r0 = r181;
        r4 = r0.startLoadFromMessageId;
        if (r4 == 0) goto L_0x01f8;
    L_0x02de:
        r4 = 3;
        r0 = r102;
        if (r0 == r4) goto L_0x02e8;
    L_0x02e3:
        r4 = 4;
        r0 = r102;
        if (r0 != r4) goto L_0x01f8;
    L_0x02e8:
        r4 = 5;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r4 = r4.intValue();
        r0 = r181;
        r0.last_message_id = r4;
        goto L_0x01f8;
    L_0x02f7:
        r0 = r181;
        r4 = r0.maxMessageId;
        r6 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r4[r19] = r6;
        r0 = r181;
        r4 = r0.minMessageId;
        r6 = NUM; // 0x7fffffff float:NaN double:1.060997895E-314;
        r4[r19] = r6;
        goto L_0x02a0;
    L_0x0309:
        r4 = 0;
        r0 = r181;
        r0.firstLoading = r4;
        r4 = new org.telegram.ui.ChatActivity$$Lambda$39;
        r0 = r181;
        r4.<init>(r0);
        org.telegram.messenger.AndroidUtilities.runOnUIThread(r4);
    L_0x0318:
        r4 = 1;
        r0 = r102;
        if (r0 != r4) goto L_0x0320;
    L_0x031d:
        java.util.Collections.reverse(r110);
    L_0x0320:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x0337;
    L_0x0326:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.DataQuery.getInstance(r4);
        r0 = r181;
        r6 = r0.dialog_id;
        r0 = r110;
        r4.loadReplyMessagesForMessages(r0, r6);
    L_0x0337:
        r22 = 0;
        r4 = 2;
        r0 = r102;
        if (r0 != r4) goto L_0x034e;
    L_0x033e:
        r4 = r110.isEmpty();
        if (r4 == 0) goto L_0x034e;
    L_0x0344:
        if (r93 != 0) goto L_0x034e;
    L_0x0346:
        r0 = r181;
        r4 = r0.forwardEndReached;
        r6 = 0;
        r7 = 1;
        r4[r6] = r7;
    L_0x034e:
        r124 = 0;
        r39 = 0;
        r108 = org.telegram.messenger.MediaController.getInstance();
        r64 = 0;
        r48 = 0;
        r19 = 0;
        r18 = r110.size();
    L_0x0360:
        r0 = r19;
        r1 = r18;
        if (r0 >= r1) goto L_0x0389;
    L_0x0366:
        r4 = r18 - r19;
        r4 = r4 + -1;
        r0 = r110;
        r130 = r0.get(r4);
        r130 = (org.telegram.messenger.MessageObject) r130;
        r0 = r130;
        r4 = r0.messageOwner;
        r0 = r4.action;
        r20 = r0;
        if (r19 != 0) goto L_0x0387;
    L_0x037c:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatCreate;
        if (r4 == 0) goto L_0x0387;
    L_0x0382:
        r48 = 1;
    L_0x0384:
        r19 = r19 + 1;
        goto L_0x0360;
    L_0x0387:
        if (r48 != 0) goto L_0x03e6;
    L_0x0389:
        r19 = 0;
    L_0x038b:
        r4 = r110.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x0923;
    L_0x0393:
        r0 = r110;
        r1 = r19;
        r130 = r0.get(r1);
        r130 = (org.telegram.messenger.MessageObject) r130;
        r4 = r130.getApproximateHeight();
        r22 = r22 + r4;
        r0 = r181;
        r4 = r0.currentUser;
        if (r4 == 0) goto L_0x03d3;
    L_0x03a9:
        r0 = r181;
        r4 = r0.currentUser;
        r4 = r4.self;
        if (r4 == 0) goto L_0x03b8;
    L_0x03b1:
        r0 = r130;
        r4 = r0.messageOwner;
        r6 = 1;
        r4.out = r6;
    L_0x03b8:
        r0 = r181;
        r4 = r0.currentUser;
        r4 = r4.bot;
        if (r4 == 0) goto L_0x03c6;
    L_0x03c0:
        r4 = r130.isOut();
        if (r4 != 0) goto L_0x03d0;
    L_0x03c6:
        r0 = r181;
        r4 = r0.currentUser;
        r4 = r4.id;
        r0 = r54;
        if (r4 != r0) goto L_0x03d3;
    L_0x03d0:
        r130.setIsRead();
    L_0x03d3:
        r0 = r181;
        r4 = r0.messagesDict;
        r4 = r4[r101];
        r6 = r130.getId();
        r4 = r4.indexOfKey(r6);
        if (r4 < 0) goto L_0x03f4;
    L_0x03e3:
        r19 = r19 + 1;
        goto L_0x038b;
    L_0x03e6:
        r4 = 2;
        r0 = r19;
        if (r0 >= r4) goto L_0x0384;
    L_0x03eb:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatEditPhoto;
        if (r4 == 0) goto L_0x0384;
    L_0x03f1:
        r64 = r20;
        goto L_0x0384;
    L_0x03f4:
        r4 = 0;
        r0 = r181;
        r1 = r130;
        r0.addToPolls(r1, r4);
        r4 = r181.isSecretChat();
        if (r4 == 0) goto L_0x0409;
    L_0x0402:
        r0 = r181;
        r1 = r130;
        r0.checkSecretMessageForLocation(r1);
    L_0x0409:
        r0 = r108;
        r1 = r130;
        r4 = r0.isPlayingMessage(r1);
        if (r4 == 0) goto L_0x042f;
    L_0x0413:
        r141 = r108.getPlayingMessageObject();
        r0 = r141;
        r4 = r0.audioProgress;
        r0 = r130;
        r0.audioProgress = r4;
        r0 = r141;
        r4 = r0.audioProgressSec;
        r0 = r130;
        r0.audioProgressSec = r4;
        r0 = r141;
        r4 = r0.audioPlayerDuration;
        r0 = r130;
        r0.audioPlayerDuration = r4;
    L_0x042f:
        if (r101 != 0) goto L_0x0450;
    L_0x0431:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x0450;
    L_0x043b:
        r4 = r130.getId();
        r6 = 1;
        if (r4 != r6) goto L_0x0450;
    L_0x0442:
        r0 = r181;
        r4 = r0.endReached;
        r6 = 1;
        r4[r101] = r6;
        r0 = r181;
        r4 = r0.cacheEndReached;
        r6 = 1;
        r4[r101] = r6;
    L_0x0450:
        r4 = r130.getId();
        if (r4 <= 0) goto L_0x07cc;
    L_0x0456:
        r0 = r181;
        r4 = r0.maxMessageId;
        r6 = r130.getId();
        r0 = r181;
        r7 = r0.maxMessageId;
        r7 = r7[r101];
        r6 = java.lang.Math.min(r6, r7);
        r4[r101] = r6;
        r0 = r181;
        r4 = r0.minMessageId;
        r6 = r130.getId();
        r0 = r181;
        r7 = r0.minMessageId;
        r7 = r7[r101];
        r6 = java.lang.Math.max(r6, r7);
        r4[r101] = r6;
    L_0x047e:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.date;
        if (r4 == 0) goto L_0x04be;
    L_0x0486:
        r0 = r181;
        r4 = r0.maxDate;
        r0 = r181;
        r6 = r0.maxDate;
        r6 = r6[r101];
        r0 = r130;
        r7 = r0.messageOwner;
        r7 = r7.date;
        r6 = java.lang.Math.max(r6, r7);
        r4[r101] = r6;
        r0 = r181;
        r4 = r0.minDate;
        r4 = r4[r101];
        if (r4 == 0) goto L_0x04b2;
    L_0x04a4:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.date;
        r0 = r181;
        r6 = r0.minDate;
        r6 = r6[r101];
        if (r4 >= r6) goto L_0x04be;
    L_0x04b2:
        r0 = r181;
        r4 = r0.minDate;
        r0 = r130;
        r6 = r0.messageOwner;
        r6 = r6.date;
        r4[r101] = r6;
    L_0x04be:
        r4 = r130.getId();
        r0 = r181;
        r6 = r0.last_message_id;
        if (r4 != r6) goto L_0x04cf;
    L_0x04c8:
        r0 = r181;
        r4 = r0.forwardEndReached;
        r6 = 1;
        r4[r101] = r6;
    L_0x04cf:
        r0 = r130;
        r4 = r0.messageOwner;
        r0 = r4.action;
        r20 = r0;
        r0 = r130;
        r4 = r0.type;
        if (r4 < 0) goto L_0x03e3;
    L_0x04dd:
        r4 = 1;
        r0 = r101;
        if (r0 != r4) goto L_0x04e8;
    L_0x04e2:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatMigrateTo;
        if (r4 != 0) goto L_0x03e3;
    L_0x04e8:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x0504;
    L_0x04ee:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.creator;
        if (r4 == 0) goto L_0x0504;
    L_0x04f6:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatCreate;
        if (r4 != 0) goto L_0x03e3;
    L_0x04fc:
        if (r64 == 0) goto L_0x0504;
    L_0x04fe:
        r0 = r20;
        r1 = r64;
        if (r0 == r1) goto L_0x03e3;
    L_0x0504:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChannelMigrateFrom;
        if (r4 != 0) goto L_0x03e3;
    L_0x050e:
        r0 = r181;
        r4 = r0.needAnimateToMessage;
        if (r4 == 0) goto L_0x0543;
    L_0x0514:
        r0 = r181;
        r4 = r0.needAnimateToMessage;
        r4 = r4.getId();
        r6 = r130.getId();
        if (r4 != r6) goto L_0x0543;
    L_0x0522:
        r4 = r130.getId();
        if (r4 >= 0) goto L_0x0543;
    L_0x0528:
        r0 = r130;
        r4 = r0.type;
        r6 = 5;
        if (r4 != r6) goto L_0x0543;
    L_0x052f:
        r0 = r181;
        r0 = r0.needAnimateToMessage;
        r130 = r0;
        r0 = r181;
        r4 = r0.animatingMessageObjects;
        r0 = r130;
        r4.add(r0);
        r4 = 0;
        r0 = r181;
        r0.needAnimateToMessage = r4;
    L_0x0543:
        r0 = r181;
        r4 = r0.messagesDict;
        r4 = r4[r101];
        r6 = r130.getId();
        r0 = r130;
        r4.put(r6, r0);
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r130;
        r6 = r0.dateKey;
        r59 = r4.get(r6);
        r59 = (java.util.ArrayList) r59;
        if (r59 != 0) goto L_0x05c6;
    L_0x0562:
        r59 = new java.util.ArrayList;
        r59.<init>();
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r130;
        r6 = r0.dateKey;
        r0 = r59;
        r4.put(r6, r0);
        r56 = new org.telegram.tgnet.TLRPC$TL_message;
        r56.<init>();
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.date;
        r6 = (long) r4;
        r4 = org.telegram.messenger.LocaleController.formatDateChat(r6);
        r0 = r56;
        r0.message = r4;
        r4 = 0;
        r0 = r56;
        r0.id = r4;
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.date;
        r0 = r56;
        r0.date = r4;
        r57 = new org.telegram.messenger.MessageObject;
        r0 = r181;
        r4 = r0.currentAccount;
        r6 = 0;
        r0 = r57;
        r1 = r56;
        r0.<init>(r4, r1, r6);
        r4 = 10;
        r0 = r57;
        r0.type = r4;
        r4 = 1;
        r0 = r57;
        r0.contentType = r4;
        r4 = 1;
        r0 = r57;
        r0.isDateObject = r4;
        r4 = 1;
        r0 = r102;
        if (r0 != r4) goto L_0x07fc;
    L_0x05ba:
        r0 = r181;
        r4 = r0.messages;
        r6 = 0;
        r0 = r57;
        r4.add(r6, r0);
    L_0x05c4:
        r127 = r127 + 1;
    L_0x05c6:
        r4 = r130.hasValidGroupId();
        if (r4 == 0) goto L_0x0865;
    L_0x05cc:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r6 = r130.getGroupIdForUse();
        r79 = r4.get(r6);
        r79 = (org.telegram.messenger.MessageObject.GroupedMessages) r79;
        if (r79 == 0) goto L_0x0623;
    L_0x05dc:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.size();
        r6 = 1;
        if (r4 <= r6) goto L_0x0623;
    L_0x05e7:
        r4 = 1;
        r0 = r102;
        if (r0 != r4) goto L_0x0807;
    L_0x05ec:
        r0 = r181;
        r4 = r0.messages;
        r6 = 0;
        r148 = r4.get(r6);
        r148 = (org.telegram.messenger.MessageObject) r148;
    L_0x05f7:
        r6 = r148.getGroupIdForUse();
        r8 = r130.getGroupIdForUse();
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 != 0) goto L_0x081d;
    L_0x0603:
        r0 = r148;
        r6 = r0.localGroupId;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x0623;
    L_0x060d:
        r0 = r148;
        r6 = r0.localGroupId;
        r0 = r130;
        r0.localGroupId = r6;
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r0 = r148;
        r6 = r0.localGroupId;
        r79 = r4.get(r6);
        r79 = (org.telegram.messenger.MessageObject.GroupedMessages) r79;
    L_0x0623:
        if (r79 != 0) goto L_0x0837;
    L_0x0625:
        r79 = new org.telegram.messenger.MessageObject$GroupedMessages;
        r79.<init>();
        r6 = r130.getGroupId();
        r0 = r79;
        r0.groupId = r6;
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r0 = r79;
        r6 = r0.groupId;
        r0 = r79;
        r4.put(r6, r0);
    L_0x063f:
        if (r124 != 0) goto L_0x0646;
    L_0x0641:
        r124 = new android.util.LongSparseArray;
        r124.<init>();
    L_0x0646:
        r0 = r79;
        r6 = r0.groupId;
        r0 = r124;
        r1 = r79;
        r0.put(r6, r1);
        r4 = 1;
        r0 = r102;
        if (r0 != r4) goto L_0x0859;
    L_0x0656:
        r0 = r79;
        r4 = r0.messages;
        r0 = r130;
        r4.add(r0);
    L_0x065f:
        r127 = r127 + 1;
        r0 = r59;
        r1 = r130;
        r0.add(r1);
        r4 = 1;
        r0 = r102;
        if (r0 != r4) goto L_0x087f;
    L_0x066d:
        r0 = r181;
        r4 = r0.messages;
        r6 = 0;
        r0 = r130;
        r4.add(r6, r0);
    L_0x0677:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x0898;
    L_0x067d:
        r0 = r181;
        r4 = r0.createUnreadMessageAfterId;
        if (r4 == 0) goto L_0x0894;
    L_0x0683:
        r4 = 1;
        r0 = r102;
        if (r0 == r4) goto L_0x0894;
    L_0x0688:
        r4 = r19 + 1;
        r6 = r110.size();
        if (r4 >= r6) goto L_0x0894;
    L_0x0690:
        r4 = r19 + 1;
        r0 = r110;
        r147 = r0.get(r4);
        r147 = (org.telegram.messenger.MessageObject) r147;
        r4 = r130.isOut();
        if (r4 != 0) goto L_0x06aa;
    L_0x06a0:
        r4 = r147.getId();
        r0 = r181;
        r6 = r0.createUnreadMessageAfterId;
        if (r4 < r6) goto L_0x06ac;
    L_0x06aa:
        r147 = 0;
    L_0x06ac:
        r4 = 2;
        r0 = r102;
        if (r0 != r4) goto L_0x08c9;
    L_0x06b1:
        r4 = r130.getId();
        r0 = r181;
        r6 = r0.first_unread_id;
        if (r4 != r6) goto L_0x08c9;
    L_0x06bb:
        r4 = org.telegram.messenger.AndroidUtilities.displaySize;
        r4 = r4.y;
        r4 = r4 / 2;
        r0 = r22;
        if (r0 > r4) goto L_0x06ce;
    L_0x06c5:
        r0 = r181;
        r4 = r0.forwardEndReached;
        r6 = 0;
        r4 = r4[r6];
        if (r4 != 0) goto L_0x0720;
    L_0x06ce:
        r56 = new org.telegram.tgnet.TLRPC$TL_message;
        r56.<init>();
        r4 = "";
        r0 = r56;
        r0.message = r4;
        r4 = 0;
        r0 = r56;
        r0.id = r4;
        r57 = new org.telegram.messenger.MessageObject;
        r0 = r181;
        r4 = r0.currentAccount;
        r6 = 0;
        r0 = r57;
        r1 = r56;
        r0.<init>(r4, r1, r6);
        r4 = 6;
        r0 = r57;
        r0.type = r4;
        r4 = 2;
        r0 = r57;
        r0.contentType = r4;
        r0 = r181;
        r4 = r0.messages;
        r0 = r181;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -1;
        r0 = r57;
        r4.add(r6, r0);
        r0 = r57;
        r1 = r181;
        r1.unreadMessageObject = r0;
        r0 = r181;
        r4 = r0.unreadMessageObject;
        r0 = r181;
        r0.scrollToMessage = r4;
        r4 = -10000; // 0xffffffffffffd8f0 float:NaN double:NaN;
        r0 = r181;
        r0.scrollToMessagePosition = r4;
        r127 = r127 + 1;
    L_0x0720:
        r4 = 2;
        r0 = r102;
        if (r0 == r4) goto L_0x03e3;
    L_0x0725:
        r0 = r181;
        r4 = r0.unreadMessageObject;
        if (r4 != 0) goto L_0x03e3;
    L_0x072b:
        r0 = r181;
        r4 = r0.createUnreadMessageAfterId;
        if (r4 == 0) goto L_0x03e3;
    L_0x0731:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x0747;
    L_0x0737:
        r4 = r130.isOut();
        if (r4 != 0) goto L_0x0747;
    L_0x073d:
        r4 = r130.getId();
        r0 = r181;
        r6 = r0.createUnreadMessageAfterId;
        if (r4 >= r6) goto L_0x075d;
    L_0x0747:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x03e3;
    L_0x074d:
        r4 = r130.isOut();
        if (r4 != 0) goto L_0x03e3;
    L_0x0753:
        r4 = r130.getId();
        r0 = r181;
        r6 = r0.createUnreadMessageAfterId;
        if (r4 > r6) goto L_0x03e3;
    L_0x075d:
        r4 = 1;
        r0 = r102;
        if (r0 == r4) goto L_0x0772;
    L_0x0762:
        if (r147 != 0) goto L_0x0772;
    L_0x0764:
        if (r147 != 0) goto L_0x03e3;
    L_0x0766:
        if (r47 == 0) goto L_0x03e3;
    L_0x0768:
        r4 = r110.size();
        r4 = r4 + -1;
        r0 = r19;
        if (r0 != r4) goto L_0x03e3;
    L_0x0772:
        r56 = new org.telegram.tgnet.TLRPC$TL_message;
        r56.<init>();
        r4 = "";
        r0 = r56;
        r0.message = r4;
        r4 = 0;
        r0 = r56;
        r0.id = r4;
        r57 = new org.telegram.messenger.MessageObject;
        r0 = r181;
        r4 = r0.currentAccount;
        r6 = 0;
        r0 = r57;
        r1 = r56;
        r0.<init>(r4, r1, r6);
        r4 = 6;
        r0 = r57;
        r0.type = r4;
        r4 = 2;
        r0 = r57;
        r0.contentType = r4;
        r4 = 1;
        r0 = r102;
        if (r0 != r4) goto L_0x090e;
    L_0x07a0:
        r0 = r181;
        r4 = r0.messages;
        r6 = 1;
        r0 = r57;
        r4.add(r6, r0);
    L_0x07aa:
        r0 = r57;
        r1 = r181;
        r1.unreadMessageObject = r0;
        r4 = 3;
        r0 = r102;
        if (r0 != r4) goto L_0x07c8;
    L_0x07b5:
        r0 = r181;
        r4 = r0.unreadMessageObject;
        r0 = r181;
        r0.scrollToMessage = r4;
        r4 = 0;
        r0 = r181;
        r0.startLoadFromMessageId = r4;
        r4 = -9000; // 0xffffffffffffdcd8 float:NaN double:NaN;
        r0 = r181;
        r0.scrollToMessagePosition = r4;
    L_0x07c8:
        r127 = r127 + 1;
        goto L_0x03e3;
    L_0x07cc:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x047e;
    L_0x07d2:
        r0 = r181;
        r4 = r0.maxMessageId;
        r6 = r130.getId();
        r0 = r181;
        r7 = r0.maxMessageId;
        r7 = r7[r101];
        r6 = java.lang.Math.max(r6, r7);
        r4[r101] = r6;
        r0 = r181;
        r4 = r0.minMessageId;
        r6 = r130.getId();
        r0 = r181;
        r7 = r0.minMessageId;
        r7 = r7[r101];
        r6 = java.lang.Math.min(r6, r7);
        r4[r101] = r6;
        goto L_0x047e;
    L_0x07fc:
        r0 = r181;
        r4 = r0.messages;
        r0 = r57;
        r4.add(r0);
        goto L_0x05c4;
    L_0x0807:
        r0 = r181;
        r4 = r0.messages;
        r0 = r181;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -2;
        r148 = r4.get(r6);
        r148 = (org.telegram.messenger.MessageObject) r148;
        goto L_0x05f7;
    L_0x081d:
        r6 = r148.getGroupIdForUse();
        r8 = r130.getGroupIdForUse();
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x0623;
    L_0x0829:
        r4 = org.telegram.messenger.Utilities.random;
        r6 = r4.nextLong();
        r0 = r130;
        r0.localGroupId = r6;
        r79 = 0;
        goto L_0x0623;
    L_0x0837:
        if (r124 == 0) goto L_0x0845;
    L_0x0839:
        r6 = r130.getGroupId();
        r0 = r124;
        r4 = r0.indexOfKey(r6);
        if (r4 >= 0) goto L_0x063f;
    L_0x0845:
        if (r39 != 0) goto L_0x084c;
    L_0x0847:
        r39 = new android.util.LongSparseArray;
        r39.<init>();
    L_0x084c:
        r6 = r130.getGroupId();
        r0 = r39;
        r1 = r79;
        r0.put(r6, r1);
        goto L_0x063f;
    L_0x0859:
        r0 = r79;
        r4 = r0.messages;
        r6 = 0;
        r0 = r130;
        r4.add(r6, r0);
        goto L_0x065f;
    L_0x0865:
        r6 = r130.getGroupIdForUse();
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x065f;
    L_0x086f:
        r0 = r130;
        r4 = r0.messageOwner;
        r6 = 0;
        r4.grouped_id = r6;
        r6 = 0;
        r0 = r130;
        r0.localSentGroupId = r6;
        goto L_0x065f;
    L_0x087f:
        r0 = r181;
        r4 = r0.messages;
        r0 = r181;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -1;
        r0 = r130;
        r4.add(r6, r0);
        goto L_0x0677;
    L_0x0894:
        r147 = 0;
        goto L_0x06ac;
    L_0x0898:
        r0 = r181;
        r4 = r0.createUnreadMessageAfterId;
        if (r4 == 0) goto L_0x08c5;
    L_0x089e:
        r4 = 1;
        r0 = r102;
        if (r0 == r4) goto L_0x08c5;
    L_0x08a3:
        r4 = r19 + -1;
        if (r4 < 0) goto L_0x08c5;
    L_0x08a7:
        r4 = r19 + -1;
        r0 = r110;
        r147 = r0.get(r4);
        r147 = (org.telegram.messenger.MessageObject) r147;
        r4 = r130.isOut();
        if (r4 != 0) goto L_0x08c1;
    L_0x08b7:
        r4 = r147.getId();
        r0 = r181;
        r6 = r0.createUnreadMessageAfterId;
        if (r4 < r6) goto L_0x06ac;
    L_0x08c1:
        r147 = 0;
        goto L_0x06ac;
    L_0x08c5:
        r147 = 0;
        goto L_0x06ac;
    L_0x08c9:
        r4 = 3;
        r0 = r102;
        if (r0 == r4) goto L_0x08d3;
    L_0x08ce:
        r4 = 4;
        r0 = r102;
        if (r0 != r4) goto L_0x0720;
    L_0x08d3:
        r4 = r130.getId();
        r0 = r181;
        r6 = r0.startLoadFromMessageId;
        if (r4 != r6) goto L_0x0720;
    L_0x08dd:
        r0 = r181;
        r4 = r0.needSelectFromMessageId;
        if (r4 == 0) goto L_0x0906;
    L_0x08e3:
        r4 = r130.getId();
        r0 = r181;
        r0.highlightMessageId = r4;
    L_0x08eb:
        r0 = r130;
        r1 = r181;
        r1.scrollToMessage = r0;
        r4 = 0;
        r0 = r181;
        r0.startLoadFromMessageId = r4;
        r0 = r181;
        r4 = r0.scrollToMessagePosition;
        r6 = -10000; // 0xffffffffffffd8f0 float:NaN double:NaN;
        if (r4 != r6) goto L_0x0720;
    L_0x08fe:
        r4 = -9000; // 0xffffffffffffdcd8 float:NaN double:NaN;
        r0 = r181;
        r0.scrollToMessagePosition = r4;
        goto L_0x0720;
    L_0x0906:
        r4 = NUM; // 0x7fffffff float:NaN double:1.060997895E-314;
        r0 = r181;
        r0.highlightMessageId = r4;
        goto L_0x08eb;
    L_0x090e:
        r0 = r181;
        r4 = r0.messages;
        r0 = r181;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -1;
        r0 = r57;
        r4.add(r6, r0);
        goto L_0x07aa;
    L_0x0923:
        if (r47 == 0) goto L_0x092a;
    L_0x0925:
        r4 = 0;
        r0 = r181;
        r0.createUnreadMessageAfterId = r4;
    L_0x092a:
        if (r102 != 0) goto L_0x0938;
    L_0x092c:
        if (r127 != 0) goto L_0x0938;
    L_0x092e:
        r0 = r181;
        r4 = r0.loadsCount;
        r4 = r4 + -1;
        r0 = r181;
        r0.loadsCount = r4;
    L_0x0938:
        r0 = r181;
        r4 = r0.forwardEndReached;
        r4 = r4[r101];
        if (r4 == 0) goto L_0x0954;
    L_0x0940:
        r4 = 1;
        r0 = r101;
        if (r0 == r4) goto L_0x0954;
    L_0x0945:
        r4 = 0;
        r0 = r181;
        r0.first_unread_id = r4;
        r4 = 0;
        r0 = r181;
        r0.last_message_id = r4;
        r4 = 0;
        r0 = r181;
        r0.createUnreadMessageAfterId = r4;
    L_0x0954:
        r4 = 1;
        r0 = r102;
        if (r0 != r4) goto L_0x0aa5;
    L_0x0959:
        r155 = 0;
        r4 = r110.size();
        r0 = r46;
        if (r4 == r0) goto L_0x09a4;
    L_0x0963:
        if (r93 == 0) goto L_0x0973;
    L_0x0965:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x0973;
    L_0x096b:
        r0 = r181;
        r4 = r0.forwardEndReached;
        r4 = r4[r101];
        if (r4 == 0) goto L_0x09a4;
    L_0x0973:
        r0 = r181;
        r4 = r0.forwardEndReached;
        r6 = 1;
        r4[r101] = r6;
        r4 = 1;
        r0 = r101;
        if (r0 == r4) goto L_0x099f;
    L_0x097f:
        r4 = 0;
        r0 = r181;
        r0.first_unread_id = r4;
        r4 = 0;
        r0 = r181;
        r0.last_message_id = r4;
        r4 = 0;
        r0 = r181;
        r0.createUnreadMessageAfterId = r4;
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.loadingDownRow;
        r4.notifyItemRemoved(r6);
        r155 = r155 + 1;
    L_0x099f:
        r4 = 0;
        r0 = r181;
        r0.startLoadFromMessageId = r4;
    L_0x09a4:
        if (r127 <= 0) goto L_0x0a0e;
    L_0x09a6:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r72 = r4.findFirstVisibleItemPosition();
        if (r72 != 0) goto L_0x09b2;
    L_0x09b0:
        r72 = r72 + 1;
    L_0x09b2:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r0 = r72;
        r73 = r4.findViewByPosition(r0);
        r162 = r72;
        r163 = r73;
        r78 = 0;
        r77 = -1;
        if (r163 == 0) goto L_0x09ee;
    L_0x09c6:
        if (r78 != 0) goto L_0x09ee;
    L_0x09c8:
        r0 = r163;
        r4 = r0 instanceof org.telegram.ui.Cells.ChatMessageCell;
        if (r4 == 0) goto L_0x0a86;
    L_0x09ce:
        r4 = r163;
        r4 = (org.telegram.ui.Cells.ChatMessageCell) r4;
        r114 = r4.getMessageObject();
        r4 = r114.hasValidGroupId();
        if (r4 == 0) goto L_0x0a80;
    L_0x09dc:
        r162 = r162 + 1;
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r0 = r162;
        r163 = r4.findViewByPosition(r0);
        if (r163 != 0) goto L_0x09c6;
    L_0x09ea:
        r77 = r72;
        r78 = r73;
    L_0x09ee:
        if (r78 != 0) goto L_0x0a8c;
    L_0x09f0:
        r164 = 0;
    L_0x09f2:
        r0 = r181;
        r4 = r0.chatAdapter;
        r6 = 1;
        r0 = r127;
        r4.notifyItemRangeInserted(r6, r0);
        r4 = -1;
        r0 = r77;
        if (r0 == r4) goto L_0x0a0e;
    L_0x0a01:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r6 = r77 + r127;
        r6 = r6 - r155;
        r0 = r164;
        r4.scrollToPositionWithOffset(r6, r0);
    L_0x0a0e:
        r4 = 0;
        r0 = r181;
        r0.loadingForward = r4;
    L_0x0a13:
        if (r124 == 0) goto L_0x0de5;
    L_0x0a15:
        r19 = 0;
    L_0x0a17:
        r4 = r124.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x0de5;
    L_0x0a1f:
        r0 = r124;
        r1 = r19;
        r79 = r0.valueAt(r1);
        r79 = (org.telegram.messenger.MessageObject.GroupedMessages) r79;
        r79.calculate();
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x0a7d;
    L_0x0a32:
        if (r39 == 0) goto L_0x0a7d;
    L_0x0a34:
        r0 = r124;
        r1 = r19;
        r6 = r0.keyAt(r1);
        r0 = r39;
        r4 = r0.indexOfKey(r6);
        if (r4 < 0) goto L_0x0a7d;
    L_0x0a44:
        r0 = r79;
        r4 = r0.messages;
        r0 = r79;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -1;
        r114 = r4.get(r6);
        r114 = (org.telegram.messenger.MessageObject) r114;
        r0 = r181;
        r4 = r0.messages;
        r0 = r114;
        r86 = r4.indexOf(r0);
        if (r86 < 0) goto L_0x0a7d;
    L_0x0a64:
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.messagesStartRow;
        r6 = r6 + r86;
        r0 = r79;
        r7 = r0.messages;
        r7 = r7.size();
        r4.notifyItemRangeChanged(r6, r7);
    L_0x0a7d:
        r19 = r19 + 1;
        goto L_0x0a17;
    L_0x0a80:
        r77 = r162;
        r78 = r163;
        goto L_0x09ee;
    L_0x0a86:
        r77 = r162;
        r78 = r163;
        goto L_0x09ee;
    L_0x0a8c:
        r0 = r181;
        r4 = r0.chatListView;
        r4 = r4.getMeasuredHeight();
        r6 = r78.getBottom();
        r4 = r4 - r6;
        r0 = r181;
        r6 = r0.chatListView;
        r6 = r6.getPaddingBottom();
        r164 = r4 - r6;
        goto L_0x09f2;
    L_0x0aa5:
        r4 = r110.size();
        r0 = r46;
        if (r4 >= r0) goto L_0x0ad8;
    L_0x0aad:
        r4 = 3;
        r0 = r102;
        if (r0 == r4) goto L_0x0ad8;
    L_0x0ab2:
        r4 = 4;
        r0 = r102;
        if (r0 == r4) goto L_0x0ad8;
    L_0x0ab7:
        if (r93 == 0) goto L_0x0c4d;
    L_0x0ab9:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x0ac5;
    L_0x0abf:
        r0 = r181;
        r4 = r0.isBroadcast;
        if (r4 == 0) goto L_0x0acc;
    L_0x0ac5:
        r0 = r181;
        r4 = r0.endReached;
        r6 = 1;
        r4[r101] = r6;
    L_0x0acc:
        r4 = 2;
        r0 = r102;
        if (r0 == r4) goto L_0x0ad8;
    L_0x0ad1:
        r0 = r181;
        r4 = r0.cacheEndReached;
        r6 = 1;
        r4[r101] = r6;
    L_0x0ad8:
        r4 = 0;
        r0 = r181;
        r0.loading = r4;
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x0dd3;
    L_0x0ae3:
        r0 = r181;
        r4 = r0.first;
        if (r4 != 0) goto L_0x0af5;
    L_0x0ae9:
        r0 = r181;
        r4 = r0.scrollToTopOnResume;
        if (r4 != 0) goto L_0x0af5;
    L_0x0aef:
        r0 = r181;
        r4 = r0.forceScrollToTop;
        if (r4 == 0) goto L_0x0cc5;
    L_0x0af5:
        r4 = 0;
        r0 = r181;
        r0.forceScrollToTop = r4;
        r0 = r181;
        r4 = r0.chatAdapter;
        r4.notifyDataSetChanged();
        r0 = r181;
        r4 = r0.scrollToMessage;
        if (r4 == 0) goto L_0x0cc0;
    L_0x0b07:
        r32 = 1;
        r0 = r181;
        r4 = r0.startLoadFromMessageOffset;
        r6 = NUM; // 0x7fffffff float:NaN double:1.060997895E-314;
        if (r4 == r6) goto L_0x0c6b;
    L_0x0b12:
        r0 = r181;
        r4 = r0.startLoadFromMessageOffset;
        r4 = -r4;
        r0 = r181;
        r6 = r0.chatListView;
        r6 = r6.getPaddingBottom();
        r180 = r4 - r6;
        r4 = NUM; // 0x7fffffff float:NaN double:1.060997895E-314;
        r0 = r181;
        r0.startLoadFromMessageOffset = r4;
    L_0x0b28:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.isEmpty();
        if (r4 != 0) goto L_0x0b80;
    L_0x0b32:
        r0 = r181;
        r4 = r0.chatAdapter;
        r4 = r4.loadingUpRow;
        r6 = -1;
        if (r4 == r6) goto L_0x0c9e;
    L_0x0b3d:
        r0 = r181;
        r4 = r0.messages;
        r0 = r181;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -1;
        r4 = r4.get(r6);
        r0 = r181;
        r6 = r0.scrollToMessage;
        if (r4 == r6) goto L_0x0b6d;
    L_0x0b55:
        r0 = r181;
        r4 = r0.messages;
        r0 = r181;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -2;
        r4 = r4.get(r6);
        r0 = r181;
        r6 = r0.scrollToMessage;
        if (r4 != r6) goto L_0x0c9e;
    L_0x0b6d:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.loadingUpRow;
        r0 = r180;
        r1 = r32;
        r4.scrollToPositionWithOffset(r6, r0, r1);
    L_0x0b80:
        r0 = r181;
        r4 = r0.chatListView;
        r4.invalidate();
        r0 = r181;
        r4 = r0.scrollToMessagePosition;
        r6 = -10000; // 0xffffffffffffd8f0 float:NaN double:NaN;
        if (r4 == r6) goto L_0x0b97;
    L_0x0b8f:
        r0 = r181;
        r4 = r0.scrollToMessagePosition;
        r6 = -9000; // 0xffffffffffffdcd8 float:NaN double:NaN;
        if (r4 != r6) goto L_0x0bde;
    L_0x0b97:
        r4 = 1;
        r6 = 1;
        r0 = r181;
        r0.showPagedownButton(r4, r6);
        if (r167 == 0) goto L_0x0bde;
    L_0x0ba0:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        if (r4 == 0) goto L_0x0bde;
    L_0x0ba6:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r6 = 0;
        r4.setVisibility(r6);
        r0 = r181;
        r4 = r0.prevSetUnreadCount;
        r0 = r181;
        r6 = r0.newUnreadMessageCount;
        if (r4 == r6) goto L_0x0bde;
    L_0x0bb8:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r6 = "%d";
        r7 = 1;
        r7 = new java.lang.Object[r7];
        r8 = 0;
        r0 = r167;
        r1 = r181;
        r1.newUnreadMessageCount = r0;
        r9 = java.lang.Integer.valueOf(r167);
        r7[r8] = r9;
        r6 = java.lang.String.format(r6, r7);
        r4.setText(r6);
        r0 = r181;
        r4 = r0.newUnreadMessageCount;
        r0 = r181;
        r0.prevSetUnreadCount = r4;
    L_0x0bde:
        r4 = -10000; // 0xffffffffffffd8f0 float:NaN double:NaN;
        r0 = r181;
        r0.scrollToMessagePosition = r4;
        r4 = 0;
        r0 = r181;
        r0.scrollToMessage = r4;
    L_0x0be9:
        if (r104 == 0) goto L_0x0c1e;
    L_0x0beb:
        r4 = 1;
        r6 = 1;
        r0 = r181;
        r0.showMentionDownButton(r4, r6);
        r0 = r181;
        r4 = r0.mentiondownButtonCounter;
        if (r4 == 0) goto L_0x0c1e;
    L_0x0bf8:
        r0 = r181;
        r4 = r0.mentiondownButtonCounter;
        r6 = 0;
        r4.setVisibility(r6);
        r0 = r181;
        r4 = r0.mentiondownButtonCounter;
        r6 = "%d";
        r7 = 1;
        r7 = new java.lang.Object[r7];
        r8 = 0;
        r0 = r104;
        r1 = r181;
        r1.newMentionsCount = r0;
        r9 = java.lang.Integer.valueOf(r104);
        r7[r8] = r9;
        r6 = java.lang.String.format(r6, r7);
        r4.setText(r6);
    L_0x0c1e:
        r0 = r181;
        r4 = r0.paused;
        if (r4 == 0) goto L_0x0CLASSNAME;
    L_0x0CLASSNAME:
        r4 = 1;
        r0 = r181;
        r0.scrollToTopOnResume = r4;
        r0 = r181;
        r4 = r0.scrollToMessage;
        if (r4 == 0) goto L_0x0CLASSNAME;
    L_0x0c2f:
        r4 = 1;
        r0 = r181;
        r0.scrollToTopUnReadOnResume = r4;
    L_0x0CLASSNAME:
        r0 = r181;
        r4 = r0.first;
        if (r4 == 0) goto L_0x0a13;
    L_0x0c3a:
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x0a13;
    L_0x0CLASSNAME:
        r0 = r181;
        r4 = r0.chatListView;
        r0 = r181;
        r6 = r0.emptyViewContainer;
        r4.setEmptyView(r6);
        goto L_0x0a13;
    L_0x0c4d:
        r4 = 2;
        r0 = r102;
        if (r0 != r4) goto L_0x0CLASSNAME;
    L_0x0CLASSNAME:
        r4 = r110.size();
        if (r4 != 0) goto L_0x0ad8;
    L_0x0CLASSNAME:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.isEmpty();
        if (r4 == 0) goto L_0x0ad8;
    L_0x0CLASSNAME:
        r0 = r181;
        r4 = r0.endReached;
        r6 = 1;
        r4[r101] = r6;
        goto L_0x0ad8;
    L_0x0c6b:
        r0 = r181;
        r4 = r0.scrollToMessagePosition;
        r6 = -9000; // 0xffffffffffffdcd8 float:NaN double:NaN;
        if (r4 != r6) goto L_0x0CLASSNAME;
    L_0x0CLASSNAME:
        r0 = r181;
        r4 = r0.scrollToMessage;
        r0 = r181;
        r180 = r0.getScrollOffsetForMessage(r4);
        r32 = 0;
        goto L_0x0b28;
    L_0x0CLASSNAME:
        r0 = r181;
        r4 = r0.scrollToMessagePosition;
        r6 = -10000; // 0xffffffffffffd8f0 float:NaN double:NaN;
        if (r4 != r6) goto L_0x0CLASSNAME;
    L_0x0CLASSNAME:
        r4 = NUM; // 0x41300000 float:11.0 double:5.4034219E-315;
        r4 = org.telegram.messenger.AndroidUtilities.dp(r4);
        r0 = -r4;
        r180 = r0;
        r32 = 0;
        goto L_0x0b28;
    L_0x0CLASSNAME:
        r0 = r181;
        r0 = r0.scrollToMessagePosition;
        r180 = r0;
        goto L_0x0b28;
    L_0x0c9e:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.messagesStartRow;
        r0 = r181;
        r7 = r0.messages;
        r0 = r181;
        r8 = r0.scrollToMessage;
        r7 = r7.indexOf(r8);
        r6 = r6 + r7;
        r0 = r180;
        r1 = r32;
        r4.scrollToPositionWithOffset(r6, r0, r1);
        goto L_0x0b80;
    L_0x0cc0:
        r181.moveScrollToLastMessage();
        goto L_0x0be9;
    L_0x0cc5:
        if (r127 == 0) goto L_0x0da9;
    L_0x0cc7:
        r67 = 0;
        r0 = r181;
        r4 = r0.endReached;
        r4 = r4[r101];
        if (r4 == 0) goto L_0x0cfd;
    L_0x0cd1:
        if (r101 != 0) goto L_0x0cdd;
    L_0x0cd3:
        r0 = r181;
        r6 = r0.mergeDialogId;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x0ce2;
    L_0x0cdd:
        r4 = 1;
        r0 = r101;
        if (r0 != r4) goto L_0x0cfd;
    L_0x0ce2:
        r67 = 1;
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.loadingUpRow;
        r6 = r6 + -1;
        r7 = 2;
        r4.notifyItemRangeChanged(r6, r7);
        r0 = r181;
        r4 = r0.chatAdapter;
        r4.updateRows();
    L_0x0cfd:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r72 = r4.findFirstVisibleItemPosition();
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r0 = r72;
        r73 = r4.findViewByPosition(r0);
        r162 = r72;
        r163 = r73;
        r78 = 0;
        r77 = -1;
        if (r163 == 0) goto L_0x0d41;
    L_0x0d19:
        if (r78 != 0) goto L_0x0d41;
    L_0x0d1b:
        r0 = r163;
        r4 = r0 instanceof org.telegram.ui.Cells.ChatMessageCell;
        if (r4 == 0) goto L_0x0d88;
    L_0x0d21:
        r4 = r163;
        r4 = (org.telegram.ui.Cells.ChatMessageCell) r4;
        r114 = r4.getMessageObject();
        r4 = r114.hasValidGroupId();
        if (r4 == 0) goto L_0x0d83;
    L_0x0d2f:
        r162 = r162 + 1;
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r0 = r162;
        r163 = r4.findViewByPosition(r0);
        if (r163 != 0) goto L_0x0d19;
    L_0x0d3d:
        r77 = r72;
        r78 = r73;
    L_0x0d41:
        if (r78 != 0) goto L_0x0d8d;
    L_0x0d43:
        r164 = 0;
    L_0x0d45:
        if (r67 == 0) goto L_0x0da5;
    L_0x0d47:
        r4 = 1;
    L_0x0d48:
        r4 = r127 - r4;
        if (r4 <= 0) goto L_0x0d71;
    L_0x0d4c:
        r0 = r181;
        r4 = r0.chatAdapter;
        r92 = r4.messagesEndRow;
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.loadingUpRow;
        r4.notifyItemChanged(r6);
        r0 = r181;
        r6 = r0.chatAdapter;
        if (r67 == 0) goto L_0x0da7;
    L_0x0d69:
        r4 = 1;
    L_0x0d6a:
        r4 = r127 - r4;
        r0 = r92;
        r6.notifyItemRangeInserted(r0, r4);
    L_0x0d71:
        r4 = -1;
        r0 = r77;
        if (r0 == r4) goto L_0x0c1e;
    L_0x0d76:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r0 = r77;
        r1 = r164;
        r4.scrollToPositionWithOffset(r0, r1);
        goto L_0x0c1e;
    L_0x0d83:
        r77 = r162;
        r78 = r163;
        goto L_0x0d41;
    L_0x0d88:
        r77 = r162;
        r78 = r163;
        goto L_0x0d41;
    L_0x0d8d:
        r0 = r181;
        r4 = r0.chatListView;
        r4 = r4.getMeasuredHeight();
        r6 = r78.getBottom();
        r4 = r4 - r6;
        r0 = r181;
        r6 = r0.chatListView;
        r6 = r6.getPaddingBottom();
        r164 = r4 - r6;
        goto L_0x0d45;
    L_0x0da5:
        r4 = 0;
        goto L_0x0d48;
    L_0x0da7:
        r4 = 0;
        goto L_0x0d6a;
    L_0x0da9:
        r0 = r181;
        r4 = r0.endReached;
        r4 = r4[r101];
        if (r4 == 0) goto L_0x0c1e;
    L_0x0db1:
        if (r101 != 0) goto L_0x0dbd;
    L_0x0db3:
        r0 = r181;
        r6 = r0.mergeDialogId;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x0dc2;
    L_0x0dbd:
        r4 = 1;
        r0 = r101;
        if (r0 != r4) goto L_0x0c1e;
    L_0x0dc2:
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.loadingUpRow;
        r4.notifyItemRemoved(r6);
        goto L_0x0c1e;
    L_0x0dd3:
        r4 = 1;
        r0 = r181;
        r0.scrollToTopOnResume = r4;
        r0 = r181;
        r4 = r0.scrollToMessage;
        if (r4 == 0) goto L_0x0a13;
    L_0x0dde:
        r4 = 1;
        r0 = r181;
        r0.scrollToTopUnReadOnResume = r4;
        goto L_0x0a13;
    L_0x0de5:
        r0 = r181;
        r4 = r0.first;
        if (r4 == 0) goto L_0x0dfa;
    L_0x0deb:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.size();
        if (r4 <= 0) goto L_0x0dfa;
    L_0x0df5:
        r4 = 0;
        r0 = r181;
        r0.first = r4;
    L_0x0dfa:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.isEmpty();
        if (r4 == 0) goto L_0x0e28;
    L_0x0e04:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x0e28;
    L_0x0e0a:
        r0 = r181;
        r4 = r0.currentUser;
        if (r4 == 0) goto L_0x0e28;
    L_0x0e10:
        r0 = r181;
        r4 = r0.currentUser;
        r4 = r4.bot;
        if (r4 == 0) goto L_0x0e28;
    L_0x0e18:
        r0 = r181;
        r4 = r0.botUser;
        if (r4 != 0) goto L_0x0e28;
    L_0x0e1e:
        r4 = "";
        r0 = r181;
        r0.botUser = r4;
        r181.updateBottomOverlay();
    L_0x0e28:
        if (r127 != 0) goto L_0x0eae;
    L_0x0e2a:
        r0 = r181;
        r6 = r0.mergeDialogId;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x0e36;
    L_0x0e34:
        if (r101 == 0) goto L_0x0e45;
    L_0x0e36:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x0eae;
    L_0x0e3c:
        r0 = r181;
        r4 = r0.endReached;
        r6 = 0;
        r4 = r4[r6];
        if (r4 != 0) goto L_0x0eae;
    L_0x0e45:
        r4 = 1;
        r0 = r181;
        r0.first = r4;
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x0e58;
    L_0x0e50:
        r0 = r181;
        r4 = r0.chatListView;
        r6 = 0;
        r4.setEmptyView(r6);
    L_0x0e58:
        r0 = r181;
        r4 = r0.emptyViewContainer;
        if (r4 == 0) goto L_0x0e66;
    L_0x0e5e:
        r0 = r181;
        r4 = r0.emptyViewContainer;
        r6 = 4;
        r4.setVisibility(r6);
    L_0x0e66:
        if (r127 != 0) goto L_0x0ea0;
    L_0x0e68:
        r0 = r181;
        r6 = r0.mergeDialogId;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x0ea0;
    L_0x0e72:
        if (r101 != 0) goto L_0x0ea0;
    L_0x0e74:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.NotificationCenter.getInstance(r4);
        r6 = 6;
        r6 = new int[r6];
        r7 = 0;
        r8 = org.telegram.messenger.NotificationCenter.chatInfoDidLoad;
        r6[r7] = r8;
        r7 = 1;
        r8 = org.telegram.messenger.NotificationCenter.dialogsNeedReload;
        r6[r7] = r8;
        r7 = 2;
        r8 = org.telegram.messenger.NotificationCenter.closeChats;
        r6[r7] = r8;
        r7 = 3;
        r8 = org.telegram.messenger.NotificationCenter.messagesDidLoad;
        r6[r7] = r8;
        r7 = 4;
        r8 = org.telegram.messenger.NotificationCenter.botKeyboardDidLoad;
        r6[r7] = r8;
        r7 = 5;
        r8 = org.telegram.messenger.NotificationCenter.userInfoDidLoad;
        r6[r7] = r8;
        r4.setAllowedNotificationsDutingAnimation(r6);
    L_0x0ea0:
        r4 = 0;
        r0 = r181;
        r0.checkScrollForLoad(r4);
        r4 = 1;
        r0 = r181;
        r0.setItemAnimationsEnabled(r4);
        goto L_0x0072;
    L_0x0eae:
        r0 = r181;
        r4 = r0.progressView;
        if (r4 == 0) goto L_0x0e66;
    L_0x0eb4:
        r0 = r181;
        r4 = r0.progressView;
        r6 = 4;
        r4.setVisibility(r6);
        goto L_0x0e66;
    L_0x0ebd:
        r4 = org.telegram.messenger.NotificationCenter.emojiDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x0var_;
    L_0x0ec3:
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x0ed0;
    L_0x0ec9:
        r0 = r181;
        r4 = r0.chatListView;
        r4.invalidateViews();
    L_0x0ed0:
        r0 = r181;
        r4 = r0.replyObjectTextView;
        if (r4 == 0) goto L_0x0edd;
    L_0x0ed6:
        r0 = r181;
        r4 = r0.replyObjectTextView;
        r4.invalidate();
    L_0x0edd:
        r0 = r181;
        r4 = r0.alertTextView;
        if (r4 == 0) goto L_0x0eea;
    L_0x0ee3:
        r0 = r181;
        r4 = r0.alertTextView;
        r4.invalidate();
    L_0x0eea:
        r0 = r181;
        r4 = r0.pinnedMessageTextView;
        if (r4 == 0) goto L_0x0ef7;
    L_0x0ef0:
        r0 = r181;
        r4 = r0.pinnedMessageTextView;
        r4.invalidate();
    L_0x0ef7:
        r0 = r181;
        r4 = r0.mentionListView;
        if (r4 == 0) goto L_0x0var_;
    L_0x0efd:
        r0 = r181;
        r4 = r0.mentionListView;
        r4.invalidateViews();
    L_0x0var_:
        r0 = r181;
        r4 = r0.stickersListView;
        if (r4 == 0) goto L_0x0072;
    L_0x0f0a:
        r0 = r181;
        r4 = r0.stickersListView;
        r4.invalidateViews();
        goto L_0x0072;
    L_0x0var_:
        r4 = org.telegram.messenger.NotificationCenter.didUpdateConnectionState;
        r0 = r182;
        if (r0 != r4) goto L_0x0f2e;
    L_0x0var_:
        r4 = org.telegram.tgnet.ConnectionsManager.getInstance(r183);
        r161 = r4.getConnectionState();
        r4 = 3;
        r0 = r161;
        if (r0 != r4) goto L_0x0072;
    L_0x0var_:
        r4 = 0;
        r0 = r181;
        r0.checkAutoDownloadMessages(r4);
        goto L_0x0072;
    L_0x0f2e:
        r4 = org.telegram.messenger.NotificationCenter.chatOnlineCountDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x0var_;
    L_0x0var_:
        r4 = 0;
        r44 = r184[r4];
        r44 = (java.lang.Integer) r44;
        r0 = r181;
        r4 = r0.chatInfo;
        if (r4 == 0) goto L_0x0072;
    L_0x0f3f:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x0072;
    L_0x0var_:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.id;
        r6 = r44.intValue();
        if (r4 != r6) goto L_0x0072;
    L_0x0var_:
        r0 = r181;
        r6 = r0.chatInfo;
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r4 = r4.intValue();
        r6.online_count = r4;
        r0 = r181;
        r4 = r0.avatarContainer;
        if (r4 == 0) goto L_0x0072;
    L_0x0var_:
        r0 = r181;
        r4 = r0.avatarContainer;
        r4.updateOnlineCount();
        r0 = r181;
        r4 = r0.avatarContainer;
        r4.updateSubtitle();
        goto L_0x0072;
    L_0x0var_:
        r4 = org.telegram.messenger.NotificationCenter.updateInterfaces;
        r0 = r182;
        if (r0 != r4) goto L_0x106f;
    L_0x0f7c:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r170 = r4.intValue();
        r4 = r170 & 1;
        if (r4 != 0) goto L_0x0f8d;
    L_0x0var_:
        r4 = r170 & 16;
        if (r4 == 0) goto L_0x0fb4;
    L_0x0f8d:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x1049;
    L_0x0var_:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r181;
        r6 = r0.currentChat;
        r6 = r6.id;
        r6 = java.lang.Integer.valueOf(r6);
        r42 = r4.getChat(r6);
        if (r42 == 0) goto L_0x0fb1;
    L_0x0fab:
        r0 = r42;
        r1 = r181;
        r1.currentChat = r0;
    L_0x0fb1:
        r181.updateTitle();
    L_0x0fb4:
        r171 = 0;
        r4 = r170 & 32;
        if (r4 != 0) goto L_0x0fbe;
    L_0x0fba:
        r4 = r170 & 4;
        if (r4 == 0) goto L_0x0fd3;
    L_0x0fbe:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x0fd1;
    L_0x0fc4:
        r0 = r181;
        r4 = r0.avatarContainer;
        if (r4 == 0) goto L_0x0fd1;
    L_0x0fca:
        r0 = r181;
        r4 = r0.avatarContainer;
        r4.updateOnlineCount();
    L_0x0fd1:
        r171 = 1;
    L_0x0fd3:
        r4 = r170 & 2;
        if (r4 != 0) goto L_0x0fdf;
    L_0x0fd7:
        r4 = r170 & 8;
        if (r4 != 0) goto L_0x0fdf;
    L_0x0fdb:
        r4 = r170 & 1;
        if (r4 == 0) goto L_0x0fe5;
    L_0x0fdf:
        r181.checkAndUpdateAvatar();
        r181.updateVisibleRows();
    L_0x0fe5:
        r4 = r170 & 64;
        if (r4 == 0) goto L_0x0feb;
    L_0x0fe9:
        r171 = 1;
    L_0x0feb:
        r0 = r170;
        r4 = r0 & 8192;
        if (r4 == 0) goto L_0x102f;
    L_0x0ff1:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x102f;
    L_0x0ff7:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r181;
        r6 = r0.currentChat;
        r6 = r6.id;
        r6 = java.lang.Integer.valueOf(r6);
        r42 = r4.getChat(r6);
        if (r42 == 0) goto L_0x0072;
    L_0x100f:
        r0 = r42;
        r1 = r181;
        r1.currentChat = r0;
        r171 = 1;
        r181.updateBottomOverlay();
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        if (r4 == 0) goto L_0x102f;
    L_0x1020:
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        r0 = r181;
        r6 = r0.dialog_id;
        r0 = r181;
        r8 = r0.currentAccount;
        r4.setDialogId(r6, r8);
    L_0x102f:
        r0 = r181;
        r4 = r0.avatarContainer;
        if (r4 == 0) goto L_0x103e;
    L_0x1035:
        if (r171 == 0) goto L_0x103e;
    L_0x1037:
        r0 = r181;
        r4 = r0.avatarContainer;
        r4.updateSubtitle();
    L_0x103e:
        r0 = r170;
        r4 = r0 & 128;
        if (r4 == 0) goto L_0x0072;
    L_0x1044:
        r181.updateContactStatus();
        goto L_0x0072;
    L_0x1049:
        r0 = r181;
        r4 = r0.currentUser;
        if (r4 == 0) goto L_0x0fb1;
    L_0x104f:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r181;
        r6 = r0.currentUser;
        r6 = r6.id;
        r6 = java.lang.Integer.valueOf(r6);
        r176 = r4.getUser(r6);
        if (r176 == 0) goto L_0x0fb1;
    L_0x1067:
        r0 = r176;
        r1 = r181;
        r1.currentUser = r0;
        goto L_0x0fb1;
    L_0x106f:
        r4 = org.telegram.messenger.NotificationCenter.didReceiveNewMessages;
        r0 = r182;
        if (r0 != r4) goto L_0x1bfe;
    L_0x1075:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r60 = r4.longValue();
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x1086:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.UserConfig.getInstance(r4);
        r54 = r4.getClientUserId();
        r168 = 0;
        r82 = 0;
        r4 = 1;
        r24 = r184[r4];
        r24 = (java.util.ArrayList) r24;
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x1150;
    L_0x10a1:
        r4 = r24.size();
        r6 = 1;
        if (r4 != r6) goto L_0x1150;
    L_0x10a8:
        r4 = 0;
        r0 = r24;
        r130 = r0.get(r4);
        r130 = (org.telegram.messenger.MessageObject) r130;
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x1150;
    L_0x10b7:
        r4 = r130.isOut();
        if (r4 == 0) goto L_0x1150;
    L_0x10bd:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageEncryptedAction;
        if (r4 == 0) goto L_0x1150;
    L_0x10c7:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4.encryptedAction;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_decryptedMessageActionSetMessageTTL;
        if (r4 == 0) goto L_0x1150;
    L_0x10d3:
        r4 = r181.getParentActivity();
        if (r4 == 0) goto L_0x1150;
    L_0x10d9:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        r4 = r4.layer;
        r4 = org.telegram.messenger.AndroidUtilities.getPeerLayerVersion(r4);
        r6 = 17;
        if (r4 >= r6) goto L_0x1150;
    L_0x10e7:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        r4 = r4.ttl;
        if (r4 <= 0) goto L_0x1150;
    L_0x10ef:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        r4 = r4.ttl;
        r6 = 60;
        if (r4 > r6) goto L_0x1150;
    L_0x10f9:
        r33 = new org.telegram.ui.ActionBar.AlertDialog$Builder;
        r4 = r181.getParentActivity();
        r0 = r33;
        r0.<init>(r4);
        r4 = "AppName";
        r6 = NUM; // 0x7f0CLASSNAMEe0 float:1.8609646E38 double:1.053097509E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r6);
        r0 = r33;
        r0.setTitle(r4);
        r4 = "OK";
        r6 = NUM; // 0x7f0CLASSNAME float:1.8612388E38 double:1.053098177E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r6);
        r6 = 0;
        r0 = r33;
        r0.setPositiveButton(r4, r6);
        r4 = "CompatibilityChat";
        r6 = NUM; // 0x7f0CLASSNAME float:1.8610522E38 double:1.0530977226E-314;
        r7 = 2;
        r7 = new java.lang.Object[r7];
        r8 = 0;
        r0 = r181;
        r9 = r0.currentUser;
        r9 = r9.first_name;
        r7[r8] = r9;
        r8 = 1;
        r0 = r181;
        r9 = r0.currentUser;
        r9 = r9.first_name;
        r7[r8] = r9;
        r4 = org.telegram.messenger.LocaleController.formatString(r4, r6, r7);
        r0 = r33;
        r0.setMessage(r4);
        r4 = r33.create();
        r0 = r181;
        r0.showDialog(r4);
    L_0x1150:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 != 0) goto L_0x1160;
    L_0x1156:
        r0 = r181;
        r6 = r0.inlineReturn;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x12d6;
    L_0x1160:
        r129 = 0;
        r19 = 0;
    L_0x1164:
        r4 = r24.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x12d6;
    L_0x116c:
        r0 = r24;
        r1 = r19;
        r114 = r0.get(r1);
        r114 = (org.telegram.messenger.MessageObject) r114;
        if (r129 != 0) goto L_0x118c;
    L_0x1178:
        r4 = r114.isOut();
        if (r4 == 0) goto L_0x118c;
    L_0x117e:
        r129 = 1;
        r4 = org.telegram.messenger.NotificationCenter.getGlobalInstance();
        r6 = org.telegram.messenger.NotificationCenter.closeSearchByActiveAction;
        r7 = 0;
        r7 = new java.lang.Object[r7];
        r4.postNotificationName(r6, r7);
    L_0x118c:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x1273;
    L_0x1192:
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatDeleteUser;
        if (r4 == 0) goto L_0x11a8;
    L_0x119c:
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4.user_id;
        r0 = r54;
        if (r4 == r0) goto L_0x11c4;
    L_0x11a8:
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatAddUser;
        if (r4 == 0) goto L_0x11f9;
    L_0x11b2:
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4.users;
        r6 = java.lang.Integer.valueOf(r54);
        r4 = r4.contains(r6);
        if (r4 == 0) goto L_0x11f9;
    L_0x11c4:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r181;
        r6 = r0.currentChat;
        r6 = r6.id;
        r6 = java.lang.Integer.valueOf(r6);
        r122 = r4.getChat(r6);
        if (r122 == 0) goto L_0x11f5;
    L_0x11dc:
        r0 = r122;
        r1 = r181;
        r1.currentChat = r0;
        r181.checkActionBarMenu();
        r181.updateBottomOverlay();
        r0 = r181;
        r4 = r0.avatarContainer;
        if (r4 == 0) goto L_0x11f5;
    L_0x11ee:
        r0 = r181;
        r4 = r0.avatarContainer;
        r4.updateSubtitle();
    L_0x11f5:
        r19 = r19 + 1;
        goto L_0x1164;
    L_0x11f9:
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.reply_to_msg_id;
        if (r4 == 0) goto L_0x11f5;
    L_0x1201:
        r0 = r114;
        r4 = r0.replyMessageObject;
        if (r4 != 0) goto L_0x11f5;
    L_0x1207:
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r0 = r114;
        r6 = r0.messageOwner;
        r6 = r6.reply_to_msg_id;
        r4 = r4.get(r6);
        r4 = (org.telegram.messenger.MessageObject) r4;
        r0 = r114;
        r0.replyMessageObject = r4;
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionPinMessage;
        if (r4 == 0) goto L_0x1251;
    L_0x1228:
        r4 = 0;
        r6 = 0;
        r0 = r114;
        r0.generatePinMessageText(r4, r6);
    L_0x122f:
        r4 = r114.isMegagroup();
        if (r4 == 0) goto L_0x11f5;
    L_0x1235:
        r0 = r114;
        r4 = r0.replyMessageObject;
        if (r4 == 0) goto L_0x11f5;
    L_0x123b:
        r0 = r114;
        r4 = r0.replyMessageObject;
        r4 = r4.messageOwner;
        if (r4 == 0) goto L_0x11f5;
    L_0x1243:
        r0 = r114;
        r4 = r0.replyMessageObject;
        r4 = r4.messageOwner;
        r6 = r4.flags;
        r7 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r6 = r6 | r7;
        r4.flags = r6;
        goto L_0x11f5;
    L_0x1251:
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionGameScore;
        if (r4 == 0) goto L_0x1262;
    L_0x125b:
        r4 = 0;
        r0 = r114;
        r0.generateGameMessageText(r4);
        goto L_0x122f;
    L_0x1262:
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionPaymentSent;
        if (r4 == 0) goto L_0x122f;
    L_0x126c:
        r4 = 0;
        r0 = r114;
        r0.generatePaymentSentMessageText(r4);
        goto L_0x122f;
    L_0x1273:
        r0 = r181;
        r6 = r0.inlineReturn;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x11f5;
    L_0x127d:
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.reply_markup;
        if (r4 == 0) goto L_0x11f5;
    L_0x1285:
        r29 = 0;
    L_0x1287:
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.reply_markup;
        r4 = r4.rows;
        r4 = r4.size();
        r0 = r29;
        if (r0 >= r4) goto L_0x11f5;
    L_0x1297:
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.reply_markup;
        r4 = r4.rows;
        r0 = r29;
        r154 = r4.get(r0);
        r154 = (org.telegram.tgnet.TLRPC.TL_keyboardButtonRow) r154;
        r35 = 0;
    L_0x12a9:
        r0 = r154;
        r4 = r0.buttons;
        r4 = r4.size();
        r0 = r35;
        if (r0 >= r4) goto L_0x12d0;
    L_0x12b5:
        r0 = r154;
        r4 = r0.buttons;
        r0 = r35;
        r34 = r4.get(r0);
        r34 = (org.telegram.tgnet.TLRPC.KeyboardButton) r34;
        r0 = r34;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_keyboardButtonSwitchInline;
        if (r4 == 0) goto L_0x12d3;
    L_0x12c7:
        r34 = (org.telegram.tgnet.TLRPC.TL_keyboardButtonSwitchInline) r34;
        r0 = r181;
        r1 = r34;
        r0.processSwitchButton(r1);
    L_0x12d0:
        r29 = r29 + 1;
        goto L_0x1287;
    L_0x12d3:
        r35 = r35 + 1;
        goto L_0x12a9;
    L_0x12d6:
        r151 = 0;
        r0 = r181;
        r4 = r0.forwardEndReached;
        r6 = 0;
        r4 = r4[r6];
        if (r4 != 0) goto L_0x153b;
    L_0x12e1:
        r50 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r52 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x12ee;
    L_0x12eb:
        r52 = NUM; // 0x7fffffff float:NaN double:1.060997895E-314;
    L_0x12ee:
        r19 = 0;
    L_0x12f0:
        r4 = r24.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x147e;
    L_0x12f8:
        r0 = r24;
        r1 = r19;
        r130 = r0.get(r1);
        r130 = (org.telegram.messenger.MessageObject) r130;
        r0 = r181;
        r4 = r0.currentUser;
        if (r4 == 0) goto L_0x1323;
    L_0x1308:
        r0 = r181;
        r4 = r0.currentUser;
        r4 = r4.bot;
        if (r4 == 0) goto L_0x1316;
    L_0x1310:
        r4 = r130.isOut();
        if (r4 != 0) goto L_0x1320;
    L_0x1316:
        r0 = r181;
        r4 = r0.currentUser;
        r4 = r4.id;
        r0 = r54;
        if (r4 != r0) goto L_0x1323;
    L_0x1320:
        r130.setIsRead();
    L_0x1323:
        r0 = r130;
        r4 = r0.messageOwner;
        r0 = r4.action;
        r20 = r0;
        r0 = r181;
        r4 = r0.avatarContainer;
        if (r4 == 0) goto L_0x1354;
    L_0x1331:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x1354;
    L_0x1337:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageEncryptedAction;
        if (r4 == 0) goto L_0x1354;
    L_0x133d:
        r0 = r20;
        r4 = r0.encryptedAction;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_decryptedMessageActionSetMessageTTL;
        if (r4 == 0) goto L_0x1354;
    L_0x1345:
        r0 = r181;
        r6 = r0.avatarContainer;
        r0 = r20;
        r4 = r0.encryptedAction;
        r4 = (org.telegram.tgnet.TLRPC.TL_decryptedMessageActionSetMessageTTL) r4;
        r4 = r4.ttl_seconds;
        r6.setTime(r4);
    L_0x1354:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatMigrateTo;
        if (r4 == 0) goto L_0x1363;
    L_0x135a:
        r0 = r181;
        r1 = r130;
        r0.migrateToNewChat(r1);
        goto L_0x0072;
    L_0x1363:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x137f;
    L_0x1369:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.megagroup;
        if (r4 == 0) goto L_0x137f;
    L_0x1371:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatAddUser;
        if (r4 != 0) goto L_0x137d;
    L_0x1377:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatDeleteUser;
        if (r4 == 0) goto L_0x137f;
    L_0x137d:
        r151 = 1;
    L_0x137f:
        if (r19 != 0) goto L_0x1396;
    L_0x1381:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.id;
        if (r4 >= 0) goto L_0x1396;
    L_0x1389:
        r0 = r130;
        r4 = r0.type;
        r6 = 5;
        if (r4 != r6) goto L_0x1396;
    L_0x1390:
        r0 = r130;
        r1 = r181;
        r1.needAnimateToMessage = r0;
    L_0x1396:
        r4 = r130.isOut();
        if (r4 == 0) goto L_0x13aa;
    L_0x139c:
        r4 = r130.isSending();
        if (r4 == 0) goto L_0x13aa;
    L_0x13a2:
        r4 = 0;
        r0 = r181;
        r0.scrollToLastMessage(r4);
        goto L_0x0072;
    L_0x13aa:
        r0 = r130;
        r4 = r0.type;
        if (r4 < 0) goto L_0x13c1;
    L_0x13b0:
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r130.getId();
        r4 = r4.indexOfKey(r6);
        if (r4 < 0) goto L_0x13c5;
    L_0x13c1:
        r19 = r19 + 1;
        goto L_0x12f0;
    L_0x13c5:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x13ea;
    L_0x13cb:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.creator;
        if (r4 == 0) goto L_0x13ea;
    L_0x13d3:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatCreate;
        if (r4 != 0) goto L_0x13c1;
    L_0x13d9:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatEditPhoto;
        if (r4 == 0) goto L_0x13ea;
    L_0x13df:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.size();
        r6 = 4;
        if (r4 < r6) goto L_0x13c1;
    L_0x13ea:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChannelMigrateFrom;
        if (r4 != 0) goto L_0x13c1;
    L_0x13f0:
        r4 = 0;
        r0 = r181;
        r1 = r130;
        r0.addToPolls(r1, r4);
        r130.checkLayout();
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.date;
        r0 = r50;
        r50 = java.lang.Math.max(r0, r4);
        r4 = r130.getId();
        if (r4 <= 0) goto L_0x145d;
    L_0x140d:
        r4 = r130.getId();
        r0 = r52;
        r52 = java.lang.Math.max(r4, r0);
        r0 = r181;
        r4 = r0.last_message_id;
        r6 = r130.getId();
        r4 = java.lang.Math.max(r4, r6);
        r0 = r181;
        r0.last_message_id = r4;
    L_0x1427:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.mentioned;
        if (r4 == 0) goto L_0x143f;
    L_0x142f:
        r4 = r130.isContentUnread();
        if (r4 == 0) goto L_0x143f;
    L_0x1435:
        r0 = r181;
        r4 = r0.newMentionsCount;
        r4 = r4 + 1;
        r0 = r181;
        r0.newMentionsCount = r4;
    L_0x143f:
        r0 = r181;
        r4 = r0.newUnreadMessageCount;
        r4 = r4 + 1;
        r0 = r181;
        r0.newUnreadMessageCount = r4;
        r0 = r130;
        r4 = r0.type;
        r6 = 10;
        if (r4 == r6) goto L_0x1459;
    L_0x1451:
        r0 = r130;
        r4 = r0.type;
        r6 = 11;
        if (r4 != r6) goto L_0x13c1;
    L_0x1459:
        r168 = 1;
        goto L_0x13c1;
    L_0x145d:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x1427;
    L_0x1463:
        r4 = r130.getId();
        r0 = r52;
        r52 = java.lang.Math.min(r4, r0);
        r0 = r181;
        r4 = r0.last_message_id;
        r6 = r130.getId();
        r4 = java.lang.Math.min(r4, r6);
        r0 = r181;
        r0.last_message_id = r4;
        goto L_0x1427;
    L_0x147e:
        r0 = r181;
        r4 = r0.newUnreadMessageCount;
        if (r4 == 0) goto L_0x14c0;
    L_0x1484:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        if (r4 == 0) goto L_0x14c0;
    L_0x148a:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r6 = 0;
        r4.setVisibility(r6);
        r0 = r181;
        r4 = r0.prevSetUnreadCount;
        r0 = r181;
        r6 = r0.newUnreadMessageCount;
        if (r4 == r6) goto L_0x14c0;
    L_0x149c:
        r0 = r181;
        r4 = r0.newUnreadMessageCount;
        r0 = r181;
        r0.prevSetUnreadCount = r4;
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r6 = "%d";
        r7 = 1;
        r7 = new java.lang.Object[r7];
        r8 = 0;
        r0 = r181;
        r9 = r0.newUnreadMessageCount;
        r9 = java.lang.Integer.valueOf(r9);
        r7[r8] = r9;
        r6 = java.lang.String.format(r6, r7);
        r4.setText(r6);
    L_0x14c0:
        r0 = r181;
        r4 = r0.newMentionsCount;
        if (r4 == 0) goto L_0x14f7;
    L_0x14c6:
        r0 = r181;
        r4 = r0.mentiondownButtonCounter;
        if (r4 == 0) goto L_0x14f7;
    L_0x14cc:
        r0 = r181;
        r4 = r0.mentiondownButtonCounter;
        r6 = 0;
        r4.setVisibility(r6);
        r0 = r181;
        r4 = r0.mentiondownButtonCounter;
        r6 = "%d";
        r7 = 1;
        r7 = new java.lang.Object[r7];
        r8 = 0;
        r0 = r181;
        r9 = r0.newMentionsCount;
        r9 = java.lang.Integer.valueOf(r9);
        r7[r8] = r9;
        r6 = java.lang.String.format(r6, r7);
        r4.setText(r6);
        r4 = 1;
        r6 = 1;
        r0 = r181;
        r0.showMentionDownButton(r4, r6);
    L_0x14f7:
        r181.updateVisibleRows();
    L_0x14fa:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.isEmpty();
        if (r4 != 0) goto L_0x151c;
    L_0x1504:
        r0 = r181;
        r4 = r0.botUser;
        if (r4 == 0) goto L_0x151c;
    L_0x150a:
        r0 = r181;
        r4 = r0.botUser;
        r4 = r4.length();
        if (r4 != 0) goto L_0x151c;
    L_0x1514:
        r4 = 0;
        r0 = r181;
        r0.botUser = r4;
        r181.updateBottomOverlay();
    L_0x151c:
        if (r168 == 0) goto L_0x1524;
    L_0x151e:
        r181.updateTitle();
        r181.checkAndUpdateAvatar();
    L_0x1524:
        if (r151 == 0) goto L_0x0072;
    L_0x1526:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r181;
        r6 = r0.currentChat;
        r6 = r6.id;
        r7 = 0;
        r8 = 1;
        r4.loadFullChat(r6, r7, r8);
        goto L_0x0072;
    L_0x153b:
        r124 = 0;
        r179 = 0;
        r4 = org.telegram.messenger.BuildVars.LOGS_ENABLED;
        if (r4 == 0) goto L_0x156d;
    L_0x1543:
        r4 = new java.lang.StringBuilder;
        r4.<init>();
        r6 = "received new messages ";
        r4 = r4.append(r6);
        r6 = r24.size();
        r4 = r4.append(r6);
        r6 = " in dialog ";
        r4 = r4.append(r6);
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = r4.append(r6);
        r4 = r4.toString();
        org.telegram.messenger.FileLog.d(r4);
    L_0x156d:
        r19 = 0;
    L_0x156f:
        r4 = r24.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x1a85;
    L_0x1577:
        r140 = -1;
        r0 = r24;
        r1 = r19;
        r130 = r0.get(r1);
        r130 = (org.telegram.messenger.MessageObject) r130;
        r4 = r181.isSecretChat();
        if (r4 == 0) goto L_0x1590;
    L_0x1589:
        r0 = r181;
        r1 = r130;
        r0.checkSecretMessageForLocation(r1);
    L_0x1590:
        r0 = r181;
        r4 = r0.currentUser;
        if (r4 == 0) goto L_0x15b1;
    L_0x1596:
        r0 = r181;
        r4 = r0.currentUser;
        r4 = r4.bot;
        if (r4 == 0) goto L_0x15a4;
    L_0x159e:
        r4 = r130.isOut();
        if (r4 != 0) goto L_0x15ae;
    L_0x15a4:
        r0 = r181;
        r4 = r0.currentUser;
        r4 = r4.id;
        r0 = r54;
        if (r4 != r0) goto L_0x15b1;
    L_0x15ae:
        r130.setIsRead();
    L_0x15b1:
        r0 = r130;
        r4 = r0.messageOwner;
        r0 = r4.action;
        r20 = r0;
        r0 = r181;
        r4 = r0.avatarContainer;
        if (r4 == 0) goto L_0x15e2;
    L_0x15bf:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x15e2;
    L_0x15c5:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageEncryptedAction;
        if (r4 == 0) goto L_0x15e2;
    L_0x15cb:
        r0 = r20;
        r4 = r0.encryptedAction;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_decryptedMessageActionSetMessageTTL;
        if (r4 == 0) goto L_0x15e2;
    L_0x15d3:
        r0 = r181;
        r6 = r0.avatarContainer;
        r0 = r20;
        r4 = r0.encryptedAction;
        r4 = (org.telegram.tgnet.TLRPC.TL_decryptedMessageActionSetMessageTTL) r4;
        r4 = r4.ttl_seconds;
        r6.setTime(r4);
    L_0x15e2:
        r0 = r130;
        r4 = r0.type;
        if (r4 < 0) goto L_0x15f9;
    L_0x15e8:
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r130.getId();
        r4 = r4.indexOfKey(r6);
        if (r4 < 0) goto L_0x15fd;
    L_0x15f9:
        r19 = r19 + 1;
        goto L_0x156f;
    L_0x15fd:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x1622;
    L_0x1603:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.creator;
        if (r4 == 0) goto L_0x1622;
    L_0x160b:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatCreate;
        if (r4 != 0) goto L_0x15f9;
    L_0x1611:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatEditPhoto;
        if (r4 == 0) goto L_0x1622;
    L_0x1617:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.size();
        r6 = 4;
        if (r4 < r6) goto L_0x15f9;
    L_0x1622:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChannelMigrateFrom;
        if (r4 != 0) goto L_0x15f9;
    L_0x1628:
        r4 = 0;
        r0 = r181;
        r1 = r130;
        r0.addToPolls(r1, r4);
        if (r19 != 0) goto L_0x164a;
    L_0x1632:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.id;
        if (r4 >= 0) goto L_0x164a;
    L_0x163a:
        r0 = r130;
        r4 = r0.type;
        r6 = 5;
        if (r4 != r6) goto L_0x164a;
    L_0x1641:
        r0 = r181;
        r4 = r0.animatingMessageObjects;
        r0 = r130;
        r4.add(r0);
    L_0x164a:
        r4 = r130.hasValidGroupId();
        if (r4 == 0) goto L_0x175f;
    L_0x1650:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r6 = r130.getGroupId();
        r79 = r4.get(r6);
        r79 = (org.telegram.messenger.MessageObject.GroupedMessages) r79;
        if (r79 != 0) goto L_0x167a;
    L_0x1660:
        r79 = new org.telegram.messenger.MessageObject$GroupedMessages;
        r79.<init>();
        r6 = r130.getGroupId();
        r0 = r79;
        r0.groupId = r6;
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r0 = r79;
        r6 = r0.groupId;
        r0 = r79;
        r4.put(r6, r0);
    L_0x167a:
        if (r124 != 0) goto L_0x1681;
    L_0x167c:
        r124 = new android.util.LongSparseArray;
        r124.<init>();
    L_0x1681:
        r0 = r79;
        r6 = r0.groupId;
        r0 = r124;
        r1 = r79;
        r0.put(r6, r1);
        r0 = r79;
        r4 = r0.messages;
        r0 = r130;
        r4.add(r0);
    L_0x1695:
        if (r79 == 0) goto L_0x16c6;
    L_0x1697:
        r0 = r79;
        r4 = r0.messages;
        r156 = r4.size();
        r4 = 1;
        r0 = r156;
        if (r0 <= r4) goto L_0x1763;
    L_0x16a4:
        r0 = r79;
        r4 = r0.messages;
        r0 = r79;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -2;
        r4 = r4.get(r6);
        r4 = (org.telegram.messenger.MessageObject) r4;
        r114 = r4;
    L_0x16ba:
        if (r114 == 0) goto L_0x16c6;
    L_0x16bc:
        r0 = r181;
        r4 = r0.messages;
        r0 = r114;
        r140 = r4.indexOf(r0);
    L_0x16c6:
        r4 = -1;
        r0 = r140;
        if (r0 != r4) goto L_0x16df;
    L_0x16cb:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.id;
        if (r4 < 0) goto L_0x16dd;
    L_0x16d3:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.isEmpty();
        if (r4 == 0) goto L_0x1767;
    L_0x16dd:
        r140 = 0;
    L_0x16df:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x1733;
    L_0x16e5:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.media;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageMediaWebPage;
        if (r4 == 0) goto L_0x1733;
    L_0x16ef:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.media;
        r4 = r4.webpage;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_webPageUrlPending;
        if (r4 == 0) goto L_0x1733;
    L_0x16fb:
        if (r179 != 0) goto L_0x1702;
    L_0x16fd:
        r179 = new java.util.HashMap;
        r179.<init>();
    L_0x1702:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.media;
        r4 = r4.webpage;
        r4 = r4.url;
        r0 = r179;
        r27 = r0.get(r4);
        r27 = (java.util.ArrayList) r27;
        if (r27 != 0) goto L_0x172c;
    L_0x1716:
        r27 = new java.util.ArrayList;
        r27.<init>();
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.media;
        r4 = r4.webpage;
        r4 = r4.url;
        r0 = r179;
        r1 = r27;
        r0.put(r4, r1);
    L_0x172c:
        r0 = r27;
        r1 = r130;
        r0.add(r1);
    L_0x1733:
        r130.checkLayout();
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatMigrateTo;
        if (r4 == 0) goto L_0x1824;
    L_0x173c:
        r0 = r181;
        r1 = r130;
        r0.migrateToNewChat(r1);
        if (r124 == 0) goto L_0x0072;
    L_0x1745:
        r29 = 0;
    L_0x1747:
        r4 = r124.size();
        r0 = r29;
        if (r0 >= r4) goto L_0x0072;
    L_0x174f:
        r0 = r124;
        r1 = r29;
        r4 = r0.valueAt(r1);
        r4 = (org.telegram.messenger.MessageObject.GroupedMessages) r4;
        r4.calculate();
        r29 = r29 + 1;
        goto L_0x1747;
    L_0x175f:
        r79 = 0;
        goto L_0x1695;
    L_0x1763:
        r114 = 0;
        goto L_0x16ba;
    L_0x1767:
        r0 = r181;
        r4 = r0.messages;
        r156 = r4.size();
        r29 = 0;
    L_0x1771:
        r0 = r29;
        r1 = r156;
        if (r0 >= r1) goto L_0x17e7;
    L_0x1777:
        r0 = r181;
        r4 = r0.messages;
        r0 = r29;
        r98 = r4.get(r0);
        r98 = (org.telegram.messenger.MessageObject) r98;
        r0 = r98;
        r4 = r0.type;
        if (r4 < 0) goto L_0x1820;
    L_0x1789:
        r0 = r98;
        r4 = r0.messageOwner;
        r4 = r4.date;
        if (r4 <= 0) goto L_0x1820;
    L_0x1791:
        r0 = r98;
        r4 = r0.messageOwner;
        r4 = r4.id;
        if (r4 <= 0) goto L_0x17af;
    L_0x1799:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.id;
        if (r4 <= 0) goto L_0x17af;
    L_0x17a1:
        r0 = r98;
        r4 = r0.messageOwner;
        r4 = r4.id;
        r0 = r130;
        r6 = r0.messageOwner;
        r6 = r6.id;
        if (r4 < r6) goto L_0x17bd;
    L_0x17af:
        r0 = r98;
        r4 = r0.messageOwner;
        r4 = r4.date;
        r0 = r130;
        r6 = r0.messageOwner;
        r6 = r6.date;
        if (r4 >= r6) goto L_0x1820;
    L_0x17bd:
        r6 = r98.getGroupId();
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x1802;
    L_0x17c7:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r6 = r98.getGroupId();
        r97 = r4.get(r6);
        r97 = (org.telegram.messenger.MessageObject.GroupedMessages) r97;
        if (r97 == 0) goto L_0x17e3;
    L_0x17d7:
        r0 = r97;
        r4 = r0.messages;
        r4 = r4.size();
        if (r4 != 0) goto L_0x17e3;
    L_0x17e1:
        r97 = 0;
    L_0x17e3:
        if (r97 != 0) goto L_0x1805;
    L_0x17e5:
        r140 = r29;
    L_0x17e7:
        r4 = -1;
        r0 = r140;
        if (r0 == r4) goto L_0x17f8;
    L_0x17ec:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.size();
        r0 = r140;
        if (r0 <= r4) goto L_0x16df;
    L_0x17f8:
        r0 = r181;
        r4 = r0.messages;
        r140 = r4.size();
        goto L_0x16df;
    L_0x1802:
        r97 = 0;
        goto L_0x17e3;
    L_0x1805:
        r0 = r181;
        r4 = r0.messages;
        r0 = r97;
        r6 = r0.messages;
        r0 = r97;
        r7 = r0.messages;
        r7 = r7.size();
        r7 = r7 + -1;
        r6 = r6.get(r7);
        r140 = r4.indexOf(r6);
        goto L_0x17e7;
    L_0x1820:
        r29 = r29 + 1;
        goto L_0x1771;
    L_0x1824:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x1840;
    L_0x182a:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.megagroup;
        if (r4 == 0) goto L_0x1840;
    L_0x1832:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatAddUser;
        if (r4 != 0) goto L_0x183e;
    L_0x1838:
        r0 = r20;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChatDeleteUser;
        if (r4 == 0) goto L_0x1840;
    L_0x183e:
        r151 = 1;
    L_0x1840:
        r0 = r181;
        r4 = r0.minDate;
        r6 = 0;
        r4 = r4[r6];
        if (r4 == 0) goto L_0x1858;
    L_0x1849:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.date;
        r0 = r181;
        r6 = r0.minDate;
        r7 = 0;
        r6 = r6[r7];
        if (r4 >= r6) goto L_0x1865;
    L_0x1858:
        r0 = r181;
        r4 = r0.minDate;
        r6 = 0;
        r0 = r130;
        r7 = r0.messageOwner;
        r7 = r7.date;
        r4[r6] = r7;
    L_0x1865:
        r4 = r130.isOut();
        if (r4 == 0) goto L_0x1873;
    L_0x186b:
        r4 = 1;
        r0 = r181;
        r0.removeUnreadPlane(r4);
        r82 = 1;
    L_0x1873:
        r4 = r130.getId();
        if (r4 <= 0) goto L_0x1a51;
    L_0x1879:
        r0 = r181;
        r4 = r0.maxMessageId;
        r6 = 0;
        r7 = r130.getId();
        r0 = r181;
        r8 = r0.maxMessageId;
        r9 = 0;
        r8 = r8[r9];
        r7 = java.lang.Math.min(r7, r8);
        r4[r6] = r7;
        r0 = r181;
        r4 = r0.minMessageId;
        r6 = 0;
        r7 = r130.getId();
        r0 = r181;
        r8 = r0.minMessageId;
        r9 = 0;
        r8 = r8[r9];
        r7 = java.lang.Math.max(r7, r8);
        r4[r6] = r7;
    L_0x18a5:
        r0 = r181;
        r4 = r0.maxDate;
        r6 = 0;
        r0 = r181;
        r7 = r0.maxDate;
        r8 = 0;
        r7 = r7[r8];
        r0 = r130;
        r8 = r0.messageOwner;
        r8 = r8.date;
        r7 = java.lang.Math.max(r7, r8);
        r4[r6] = r7;
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r130.getId();
        r0 = r130;
        r4.put(r6, r0);
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r130;
        r6 = r0.dateKey;
        r59 = r4.get(r6);
        r59 = (java.util.ArrayList) r59;
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.size();
        r0 = r140;
        if (r0 <= r4) goto L_0x18ef;
    L_0x18e7:
        r0 = r181;
        r4 = r0.messages;
        r140 = r4.size();
    L_0x18ef:
        if (r59 != 0) goto L_0x195e;
    L_0x18f1:
        r59 = new java.util.ArrayList;
        r59.<init>();
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r130;
        r6 = r0.dateKey;
        r0 = r59;
        r4.put(r6, r0);
        r56 = new org.telegram.tgnet.TLRPC$TL_message;
        r56.<init>();
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.date;
        r6 = (long) r4;
        r4 = org.telegram.messenger.LocaleController.formatDateChat(r6);
        r0 = r56;
        r0.message = r4;
        r4 = 0;
        r0 = r56;
        r0.id = r4;
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.date;
        r0 = r56;
        r0.date = r4;
        r57 = new org.telegram.messenger.MessageObject;
        r0 = r181;
        r4 = r0.currentAccount;
        r6 = 0;
        r0 = r57;
        r1 = r56;
        r0.<init>(r4, r1, r6);
        r4 = 10;
        r0 = r57;
        r0.type = r4;
        r4 = 1;
        r0 = r57;
        r0.contentType = r4;
        r4 = 1;
        r0 = r57;
        r0.isDateObject = r4;
        r0 = r181;
        r4 = r0.messages;
        r0 = r140;
        r1 = r57;
        r4.add(r0, r1);
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x195e;
    L_0x1955:
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r140;
        r4.notifyItemInserted(r0);
    L_0x195e:
        r4 = r130.isOut();
        if (r4 != 0) goto L_0x19ea;
    L_0x1964:
        r0 = r181;
        r4 = r0.paused;
        if (r4 == 0) goto L_0x19ea;
    L_0x196a:
        if (r140 != 0) goto L_0x19ea;
    L_0x196c:
        r0 = r181;
        r4 = r0.scrollToTopUnReadOnResume;
        if (r4 != 0) goto L_0x198a;
    L_0x1972:
        r0 = r181;
        r4 = r0.unreadMessageObject;
        if (r4 == 0) goto L_0x198a;
    L_0x1978:
        r0 = r181;
        r4 = r0.unreadMessageObject;
        r0 = r181;
        r0.removeMessageObject(r4);
        if (r140 <= 0) goto L_0x1985;
    L_0x1983:
        r140 = r140 + -1;
    L_0x1985:
        r4 = 0;
        r0 = r181;
        r0.unreadMessageObject = r4;
    L_0x198a:
        r0 = r181;
        r4 = r0.unreadMessageObject;
        if (r4 != 0) goto L_0x19ea;
    L_0x1990:
        r56 = new org.telegram.tgnet.TLRPC$TL_message;
        r56.<init>();
        r4 = "";
        r0 = r56;
        r0.message = r4;
        r4 = 0;
        r0 = r56;
        r0.id = r4;
        r57 = new org.telegram.messenger.MessageObject;
        r0 = r181;
        r4 = r0.currentAccount;
        r6 = 0;
        r0 = r57;
        r1 = r56;
        r0.<init>(r4, r1, r6);
        r4 = 6;
        r0 = r57;
        r0.type = r4;
        r4 = 2;
        r0 = r57;
        r0.contentType = r4;
        r0 = r181;
        r4 = r0.messages;
        r6 = 0;
        r0 = r57;
        r4.add(r6, r0);
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x19d1;
    L_0x19c9:
        r0 = r181;
        r4 = r0.chatAdapter;
        r6 = 0;
        r4.notifyItemInserted(r6);
    L_0x19d1:
        r0 = r57;
        r1 = r181;
        r1.unreadMessageObject = r0;
        r0 = r181;
        r4 = r0.unreadMessageObject;
        r0 = r181;
        r0.scrollToMessage = r4;
        r4 = -10000; // 0xffffffffffffd8f0 float:NaN double:NaN;
        r0 = r181;
        r0.scrollToMessagePosition = r4;
        r4 = 1;
        r0 = r181;
        r0.scrollToTopUnReadOnResume = r4;
    L_0x19ea:
        r4 = 0;
        r0 = r59;
        r1 = r130;
        r0.add(r4, r1);
        r0 = r181;
        r4 = r0.messages;
        r0 = r140;
        r1 = r130;
        r4.add(r0, r1);
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x1a15;
    L_0x1a03:
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r140;
        r4.notifyItemChanged(r0);
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r140;
        r4.notifyItemInserted(r0);
    L_0x1a15:
        r4 = r130.isOut();
        if (r4 != 0) goto L_0x1a33;
    L_0x1a1b:
        r0 = r130;
        r4 = r0.messageOwner;
        r4 = r4.mentioned;
        if (r4 == 0) goto L_0x1a33;
    L_0x1a23:
        r4 = r130.isContentUnread();
        if (r4 == 0) goto L_0x1a33;
    L_0x1a29:
        r0 = r181;
        r4 = r0.newMentionsCount;
        r4 = r4 + 1;
        r0 = r181;
        r0.newMentionsCount = r4;
    L_0x1a33:
        r0 = r181;
        r4 = r0.newUnreadMessageCount;
        r4 = r4 + 1;
        r0 = r181;
        r0.newUnreadMessageCount = r4;
        r0 = r130;
        r4 = r0.type;
        r6 = 10;
        if (r4 == r6) goto L_0x1a4d;
    L_0x1a45:
        r0 = r130;
        r4 = r0.type;
        r6 = 11;
        if (r4 != r6) goto L_0x15f9;
    L_0x1a4d:
        r168 = 1;
        goto L_0x15f9;
    L_0x1a51:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x18a5;
    L_0x1a57:
        r0 = r181;
        r4 = r0.maxMessageId;
        r6 = 0;
        r7 = r130.getId();
        r0 = r181;
        r8 = r0.maxMessageId;
        r9 = 0;
        r8 = r8[r9];
        r7 = java.lang.Math.max(r7, r8);
        r4[r6] = r7;
        r0 = r181;
        r4 = r0.minMessageId;
        r6 = 0;
        r7 = r130.getId();
        r0 = r181;
        r8 = r0.minMessageId;
        r9 = 0;
        r8 = r8[r9];
        r7 = java.lang.Math.min(r7, r8);
        r4[r6] = r7;
        goto L_0x18a5;
    L_0x1a85:
        if (r179 == 0) goto L_0x1a98;
    L_0x1a87:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r181;
        r6 = r0.dialog_id;
        r0 = r179;
        r4.reloadWebPages(r6, r0);
    L_0x1a98:
        if (r124 == 0) goto L_0x1af5;
    L_0x1a9a:
        r19 = 0;
    L_0x1a9c:
        r4 = r124.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x1af5;
    L_0x1aa4:
        r0 = r124;
        r1 = r19;
        r79 = r0.valueAt(r1);
        r79 = (org.telegram.messenger.MessageObject.GroupedMessages) r79;
        r0 = r79;
        r4 = r0.posArray;
        r134 = r4.size();
        r79.calculate();
        r0 = r79;
        r4 = r0.posArray;
        r123 = r4.size();
        r4 = r123 - r134;
        if (r4 <= 0) goto L_0x1af2;
    L_0x1ac5:
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x1af2;
    L_0x1acb:
        r0 = r181;
        r4 = r0.messages;
        r0 = r79;
        r6 = r0.messages;
        r0 = r79;
        r7 = r0.messages;
        r7 = r7.size();
        r7 = r7 + -1;
        r6 = r6.get(r7);
        r88 = r4.indexOf(r6);
        if (r88 < 0) goto L_0x1af2;
    L_0x1ae7:
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r88;
        r1 = r123;
        r4.notifyItemRangeChanged(r0, r1);
    L_0x1af2:
        r19 = r19 + 1;
        goto L_0x1a9c;
    L_0x1af5:
        r0 = r181;
        r4 = r0.progressView;
        if (r4 == 0) goto L_0x1b03;
    L_0x1afb:
        r0 = r181;
        r4 = r0.progressView;
        r6 = 4;
        r4.setVisibility(r6);
    L_0x1b03:
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 != 0) goto L_0x1b0e;
    L_0x1b09:
        r4 = 1;
        r0 = r181;
        r0.scrollToTopOnResume = r4;
    L_0x1b0e:
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x1bf7;
    L_0x1b14:
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x1bf7;
    L_0x1b1a:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r99 = r4.findFirstVisibleItemPosition();
        r4 = -1;
        r0 = r99;
        if (r0 != r4) goto L_0x1b29;
    L_0x1b27:
        r99 = 0;
    L_0x1b29:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r0 = r99;
        r45 = r4.findViewByPosition(r0);
        if (r45 == 0) goto L_0x1ba0;
    L_0x1b35:
        r4 = r45.getBottom();
        r0 = r181;
        r6 = r0.chatListView;
        r6 = r6.getMeasuredHeight();
        r62 = r4 - r6;
    L_0x1b43:
        if (r99 != 0) goto L_0x1b4f;
    L_0x1b45:
        r4 = NUM; // 0x40a00000 float:5.0 double:5.356796015E-315;
        r4 = org.telegram.messenger.AndroidUtilities.dp(r4);
        r0 = r62;
        if (r0 <= r4) goto L_0x1b51;
    L_0x1b4f:
        if (r82 == 0) goto L_0x1bac;
    L_0x1b51:
        r4 = 0;
        r0 = r181;
        r0.newUnreadMessageCount = r4;
        r0 = r181;
        r4 = r0.firstLoading;
        if (r4 != 0) goto L_0x1b67;
    L_0x1b5c:
        r0 = r181;
        r4 = r0.paused;
        if (r4 == 0) goto L_0x1ba3;
    L_0x1b62:
        r4 = 1;
        r0 = r181;
        r0.scrollToTopOnResume = r4;
    L_0x1b67:
        r0 = r181;
        r4 = r0.newMentionsCount;
        if (r4 == 0) goto L_0x14fa;
    L_0x1b6d:
        r0 = r181;
        r4 = r0.mentiondownButtonCounter;
        if (r4 == 0) goto L_0x14fa;
    L_0x1b73:
        r0 = r181;
        r4 = r0.mentiondownButtonCounter;
        r6 = 0;
        r4.setVisibility(r6);
        r0 = r181;
        r4 = r0.mentiondownButtonCounter;
        r6 = "%d";
        r7 = 1;
        r7 = new java.lang.Object[r7];
        r8 = 0;
        r0 = r181;
        r9 = r0.newMentionsCount;
        r9 = java.lang.Integer.valueOf(r9);
        r7[r8] = r9;
        r6 = java.lang.String.format(r6, r7);
        r4.setText(r6);
        r4 = 1;
        r6 = 1;
        r0 = r181;
        r0.showMentionDownButton(r4, r6);
        goto L_0x14fa;
    L_0x1ba0:
        r62 = 0;
        goto L_0x1b43;
    L_0x1ba3:
        r4 = 1;
        r0 = r181;
        r0.forceScrollToTop = r4;
        r181.moveScrollToLastMessage();
        goto L_0x1b67;
    L_0x1bac:
        r0 = r181;
        r4 = r0.newUnreadMessageCount;
        if (r4 == 0) goto L_0x1bee;
    L_0x1bb2:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        if (r4 == 0) goto L_0x1bee;
    L_0x1bb8:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r6 = 0;
        r4.setVisibility(r6);
        r0 = r181;
        r4 = r0.prevSetUnreadCount;
        r0 = r181;
        r6 = r0.newUnreadMessageCount;
        if (r4 == r6) goto L_0x1bee;
    L_0x1bca:
        r0 = r181;
        r4 = r0.newUnreadMessageCount;
        r0 = r181;
        r0.prevSetUnreadCount = r4;
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r6 = "%d";
        r7 = 1;
        r7 = new java.lang.Object[r7];
        r8 = 0;
        r0 = r181;
        r9 = r0.newUnreadMessageCount;
        r9 = java.lang.Integer.valueOf(r9);
        r7[r8] = r9;
        r6 = java.lang.String.format(r6, r7);
        r4.setText(r6);
    L_0x1bee:
        r4 = 1;
        r6 = 1;
        r0 = r181;
        r0.showPagedownButton(r4, r6);
        goto L_0x1b67;
    L_0x1bf7:
        r4 = 1;
        r0 = r181;
        r0.scrollToTopOnResume = r4;
        goto L_0x14fa;
    L_0x1bfe:
        r4 = org.telegram.messenger.NotificationCenter.closeChats;
        r0 = r182;
        if (r0 != r4) goto L_0x1CLASSNAME;
    L_0x1CLASSNAME:
        if (r184 == 0) goto L_0x1CLASSNAME;
    L_0x1CLASSNAME:
        r0 = r184;
        r4 = r0.length;
        if (r4 <= 0) goto L_0x1CLASSNAME;
    L_0x1c0b:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r60 = r4.longValue();
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x1c1c:
        r181.finishFragment();
        goto L_0x0072;
    L_0x1CLASSNAME:
        r181.removeSelfFromStack();
        goto L_0x0072;
    L_0x1CLASSNAME:
        r4 = org.telegram.messenger.NotificationCenter.messagesRead;
        r0 = r182;
        if (r0 != r4) goto L_0x1d91;
    L_0x1c2c:
        r4 = 0;
        r87 = r184[r4];
        r87 = (org.telegram.messenger.support.SparseLongArray) r87;
        r4 = 1;
        r138 = r184[r4];
        r138 = (org.telegram.messenger.support.SparseLongArray) r138;
        r172 = 0;
        if (r87 == 0) goto L_0x1ca1;
    L_0x1c3a:
        r29 = 0;
        r156 = r87.size();
    L_0x1CLASSNAME:
        r0 = r29;
        r1 = r156;
        if (r0 >= r1) goto L_0x1ca1;
    L_0x1CLASSNAME:
        r0 = r87;
        r1 = r29;
        r95 = r0.keyAt(r1);
        r0 = r87;
        r1 = r95;
        r112 = r0.get(r1);
        r0 = r95;
        r6 = (long) r0;
        r0 = r181;
        r8 = r0.dialog_id;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x1CLASSNAME;
    L_0x1CLASSNAME:
        r29 = r29 + 1;
        goto L_0x1CLASSNAME;
    L_0x1CLASSNAME:
        r19 = 0;
        r0 = r181;
        r4 = r0.messages;
        r157 = r4.size();
    L_0x1c6e:
        r0 = r19;
        r1 = r157;
        if (r0 >= r1) goto L_0x1c9b;
    L_0x1CLASSNAME:
        r0 = r181;
        r4 = r0.messages;
        r0 = r19;
        r130 = r4.get(r0);
        r130 = (org.telegram.messenger.MessageObject) r130;
        r4 = r130.isOut();
        if (r4 != 0) goto L_0x1d37;
    L_0x1CLASSNAME:
        r4 = r130.getId();
        if (r4 <= 0) goto L_0x1d37;
    L_0x1c8c:
        r4 = r130.getId();
        r0 = r112;
        r6 = (int) r0;
        if (r4 > r6) goto L_0x1d37;
    L_0x1CLASSNAME:
        r4 = r130.isUnread();
        if (r4 != 0) goto L_0x1d28;
    L_0x1c9b:
        r4 = 0;
        r0 = r181;
        r0.removeUnreadPlane(r4);
    L_0x1ca1:
        if (r172 == 0) goto L_0x1cfb;
    L_0x1ca3:
        r0 = r181;
        r4 = r0.newUnreadMessageCount;
        if (r4 >= 0) goto L_0x1cae;
    L_0x1ca9:
        r4 = 0;
        r0 = r181;
        r0.newUnreadMessageCount = r4;
    L_0x1cae:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        if (r4 == 0) goto L_0x1cfb;
    L_0x1cb4:
        r0 = r181;
        r4 = r0.prevSetUnreadCount;
        r0 = r181;
        r6 = r0.newUnreadMessageCount;
        if (r4 == r6) goto L_0x1ce2;
    L_0x1cbe:
        r0 = r181;
        r4 = r0.newUnreadMessageCount;
        r0 = r181;
        r0.prevSetUnreadCount = r4;
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r6 = "%d";
        r7 = 1;
        r7 = new java.lang.Object[r7];
        r8 = 0;
        r0 = r181;
        r9 = r0.newUnreadMessageCount;
        r9 = java.lang.Integer.valueOf(r9);
        r7[r8] = r9;
        r6 = java.lang.String.format(r6, r7);
        r4.setText(r6);
    L_0x1ce2:
        r0 = r181;
        r4 = r0.newUnreadMessageCount;
        if (r4 > 0) goto L_0x1d3b;
    L_0x1ce8:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r4 = r4.getVisibility();
        r6 = 4;
        if (r4 == r6) goto L_0x1cfb;
    L_0x1cf3:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r6 = 4;
        r4.setVisibility(r6);
    L_0x1cfb:
        if (r138 == 0) goto L_0x1d82;
    L_0x1cfd:
        r29 = 0;
        r156 = r138.size();
    L_0x1d03:
        r0 = r29;
        r1 = r156;
        if (r0 >= r1) goto L_0x1d82;
    L_0x1d09:
        r0 = r138;
        r1 = r29;
        r95 = r0.keyAt(r1);
        r0 = r138;
        r1 = r95;
        r6 = r0.get(r1);
        r5 = (int) r6;
        r0 = r95;
        r6 = (long) r0;
        r0 = r181;
        r8 = r0.dialog_id;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x1d4e;
    L_0x1d25:
        r29 = r29 + 1;
        goto L_0x1d03;
    L_0x1d28:
        r130.setIsRead();
        r172 = 1;
        r0 = r181;
        r4 = r0.newUnreadMessageCount;
        r4 = r4 + -1;
        r0 = r181;
        r0.newUnreadMessageCount = r4;
    L_0x1d37:
        r19 = r19 + 1;
        goto L_0x1c6e;
    L_0x1d3b:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r4 = r4.getVisibility();
        if (r4 == 0) goto L_0x1cfb;
    L_0x1d45:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r6 = 0;
        r4.setVisibility(r6);
        goto L_0x1cfb;
    L_0x1d4e:
        r19 = 0;
        r0 = r181;
        r4 = r0.messages;
        r157 = r4.size();
    L_0x1d58:
        r0 = r19;
        r1 = r157;
        if (r0 >= r1) goto L_0x1d82;
    L_0x1d5e:
        r0 = r181;
        r4 = r0.messages;
        r0 = r19;
        r130 = r4.get(r0);
        r130 = (org.telegram.messenger.MessageObject) r130;
        r4 = r130.isOut();
        if (r4 == 0) goto L_0x1d8e;
    L_0x1d70:
        r4 = r130.getId();
        if (r4 <= 0) goto L_0x1d8e;
    L_0x1d76:
        r4 = r130.getId();
        if (r4 > r5) goto L_0x1d8e;
    L_0x1d7c:
        r4 = r130.isUnread();
        if (r4 != 0) goto L_0x1d89;
    L_0x1d82:
        if (r172 == 0) goto L_0x0072;
    L_0x1d84:
        r181.updateVisibleRows();
        goto L_0x0072;
    L_0x1d89:
        r130.setIsRead();
        r172 = 1;
    L_0x1d8e:
        r19 = r19 + 1;
        goto L_0x1d58;
    L_0x1d91:
        r4 = org.telegram.messenger.NotificationCenter.historyCleared;
        r0 = r182;
        if (r0 != r4) goto L_0x1ff9;
    L_0x1d97:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r60 = r4.longValue();
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x1da8:
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r106 = r4.intValue();
        r172 = 0;
        r29 = 0;
    L_0x1db5:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.size();
        r0 = r29;
        if (r0 >= r4) goto L_0x1ea2;
    L_0x1dc1:
        r0 = r181;
        r4 = r0.messages;
        r0 = r29;
        r130 = r4.get(r0);
        r130 = (org.telegram.messenger.MessageObject) r130;
        r118 = r130.getId();
        if (r118 <= 0) goto L_0x1dd9;
    L_0x1dd3:
        r0 = r118;
        r1 = r106;
        if (r0 <= r1) goto L_0x1ddc;
    L_0x1dd9:
        r29 = r29 + 1;
        goto L_0x1db5;
    L_0x1ddc:
        r0 = r181;
        r4 = r0.chatInfo;
        if (r4 == 0) goto L_0x1e6c;
    L_0x1de2:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.pinned_msg_id;
        r0 = r118;
        if (r4 != r0) goto L_0x1e6c;
    L_0x1dec:
        r4 = 0;
        r0 = r181;
        r0.pinnedMessageObject = r4;
        r0 = r181;
        r4 = r0.chatInfo;
        r6 = 0;
        r4.pinned_msg_id = r6;
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesStorage.getInstance(r4);
        r0 = r181;
        r6 = r0.chatInfo;
        r6 = r6.id;
        r7 = 0;
        r4.updateChatPinnedMessage(r6, r7);
        r4 = 1;
        r0 = r181;
        r0.updatePinnedMessageView(r4);
    L_0x1e10:
        r0 = r181;
        r4 = r0.messages;
        r0 = r29;
        r4.remove(r0);
        r29 = r29 + -1;
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r0 = r118;
        r4.remove(r0);
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r130;
        r6 = r0.dateKey;
        r58 = r4.get(r6);
        r58 = (java.util.ArrayList) r58;
        if (r58 == 0) goto L_0x1e68;
    L_0x1e37:
        r0 = r58;
        r1 = r130;
        r0.remove(r1);
        r4 = r58.isEmpty();
        if (r4 == 0) goto L_0x1e68;
    L_0x1e44:
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r130;
        r6 = r0.dateKey;
        r4.remove(r6);
        if (r29 < 0) goto L_0x1e68;
    L_0x1e51:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.size();
        r0 = r29;
        if (r0 >= r4) goto L_0x1e68;
    L_0x1e5d:
        r0 = r181;
        r4 = r0.messages;
        r0 = r29;
        r4.remove(r0);
        r29 = r29 + -1;
    L_0x1e68:
        r172 = 1;
        goto L_0x1dd9;
    L_0x1e6c:
        r0 = r181;
        r4 = r0.userInfo;
        if (r4 == 0) goto L_0x1e10;
    L_0x1e72:
        r0 = r181;
        r4 = r0.userInfo;
        r4 = r4.pinned_msg_id;
        r0 = r118;
        if (r4 != r0) goto L_0x1e10;
    L_0x1e7c:
        r4 = 0;
        r0 = r181;
        r0.pinnedMessageObject = r4;
        r0 = r181;
        r4 = r0.userInfo;
        r6 = 0;
        r4.pinned_msg_id = r6;
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesStorage.getInstance(r4);
        r0 = r181;
        r6 = r0.chatInfo;
        r6 = r6.id;
        r7 = 0;
        r4.updateUserPinnedMessage(r6, r7);
        r4 = 1;
        r0 = r181;
        r0.updatePinnedMessageView(r4);
        goto L_0x1e10;
    L_0x1ea2:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.isEmpty();
        if (r4 == 0) goto L_0x1f6f;
    L_0x1eac:
        r0 = r181;
        r4 = r0.endReached;
        r6 = 0;
        r4 = r4[r6];
        if (r4 != 0) goto L_0x1fb9;
    L_0x1eb5:
        r0 = r181;
        r4 = r0.loading;
        if (r4 != 0) goto L_0x1fb9;
    L_0x1ebb:
        r0 = r181;
        r4 = r0.progressView;
        if (r4 == 0) goto L_0x1ec9;
    L_0x1ec1:
        r0 = r181;
        r4 = r0.progressView;
        r6 = 4;
        r4.setVisibility(r6);
    L_0x1ec9:
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x1ed7;
    L_0x1ecf:
        r0 = r181;
        r4 = r0.chatListView;
        r6 = 0;
        r4.setEmptyView(r6);
    L_0x1ed7:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x1var_;
    L_0x1edd:
        r0 = r181;
        r4 = r0.maxMessageId;
        r6 = 0;
        r0 = r181;
        r7 = r0.maxMessageId;
        r8 = 1;
        r9 = NUM; // 0x7fffffff float:NaN double:1.060997895E-314;
        r7[r8] = r9;
        r4[r6] = r9;
        r0 = r181;
        r4 = r0.minMessageId;
        r6 = 0;
        r0 = r181;
        r7 = r0.minMessageId;
        r8 = 1;
        r9 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r7[r8] = r9;
        r4[r6] = r9;
    L_0x1efe:
        r0 = r181;
        r4 = r0.maxDate;
        r6 = 0;
        r0 = r181;
        r7 = r0.maxDate;
        r8 = 1;
        r9 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r7[r8] = r9;
        r4[r6] = r9;
        r0 = r181;
        r4 = r0.minDate;
        r6 = 0;
        r0 = r181;
        r7 = r0.minDate;
        r8 = 1;
        r9 = 0;
        r7[r8] = r9;
        r4[r6] = r9;
        r0 = r181;
        r4 = r0.waitingForLoad;
        r0 = r181;
        r6 = r0.lastLoadIndex;
        r6 = java.lang.Integer.valueOf(r6);
        r4.add(r6);
        r0 = r181;
        r4 = r0.currentAccount;
        r5 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r181;
        r6 = r0.dialog_id;
        r8 = 30;
        r9 = 0;
        r10 = 0;
        r0 = r181;
        r4 = r0.cacheEndReached;
        r11 = 0;
        r4 = r4[r11];
        if (r4 != 0) goto L_0x1fb7;
    L_0x1var_:
        r11 = 1;
    L_0x1var_:
        r0 = r181;
        r4 = r0.minDate;
        r12 = 0;
        r12 = r4[r12];
        r0 = r181;
        r13 = r0.classGuid;
        r14 = 0;
        r15 = 0;
        r0 = r181;
        r4 = r0.currentChat;
        r16 = org.telegram.messenger.ChatObject.isChannel(r4);
        r0 = r181;
        r0 = r0.lastLoadIndex;
        r17 = r0;
        r4 = r17 + 1;
        r0 = r181;
        r0.lastLoadIndex = r4;
        r5.loadMessages(r6, r8, r9, r10, r11, r12, r13, r14, r15, r16, r17);
        r4 = 1;
        r0 = r181;
        r0.loading = r4;
    L_0x1f6f:
        r4 = 0;
        r6 = 1;
        r0 = r181;
        r0.showPagedownButton(r4, r6);
        r4 = 0;
        r6 = 1;
        r0 = r181;
        r0.showMentionDownButton(r4, r6);
        if (r172 == 0) goto L_0x0072;
    L_0x1f7f:
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x0072;
    L_0x1var_:
        r4 = 1;
        r0 = r181;
        r0.removeUnreadPlane(r4);
        r0 = r181;
        r4 = r0.chatAdapter;
        r4.notifyDataSetChanged();
        goto L_0x0072;
    L_0x1var_:
        r0 = r181;
        r4 = r0.maxMessageId;
        r6 = 0;
        r0 = r181;
        r7 = r0.maxMessageId;
        r8 = 1;
        r9 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r7[r8] = r9;
        r4[r6] = r9;
        r0 = r181;
        r4 = r0.minMessageId;
        r6 = 0;
        r0 = r181;
        r7 = r0.minMessageId;
        r8 = 1;
        r9 = NUM; // 0x7fffffff float:NaN double:1.060997895E-314;
        r7[r8] = r9;
        r4[r6] = r9;
        goto L_0x1efe;
    L_0x1fb7:
        r11 = 0;
        goto L_0x1var_;
    L_0x1fb9:
        r0 = r181;
        r4 = r0.botButtons;
        if (r4 == 0) goto L_0x1fd3;
    L_0x1fbf:
        r4 = 0;
        r0 = r181;
        r0.botButtons = r4;
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        if (r4 == 0) goto L_0x1fd3;
    L_0x1fca:
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        r6 = 0;
        r7 = 0;
        r4.setButtons(r6, r7);
    L_0x1fd3:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x1f6f;
    L_0x1fd9:
        r0 = r181;
        r4 = r0.currentUser;
        if (r4 == 0) goto L_0x1f6f;
    L_0x1fdf:
        r0 = r181;
        r4 = r0.currentUser;
        r4 = r4.bot;
        if (r4 == 0) goto L_0x1f6f;
    L_0x1fe7:
        r0 = r181;
        r4 = r0.botUser;
        if (r4 != 0) goto L_0x1f6f;
    L_0x1fed:
        r4 = "";
        r0 = r181;
        r0.botUser = r4;
        r181.updateBottomOverlay();
        goto L_0x1f6f;
    L_0x1ff9:
        r4 = org.telegram.messenger.NotificationCenter.messagesDeleted;
        r0 = r182;
        if (r0 != r4) goto L_0x240e;
    L_0x1fff:
        r4 = 0;
        r105 = r184[r4];
        r105 = (java.util.ArrayList) r105;
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r40 = r4.intValue();
        r101 = 0;
        r0 = r181;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x2177;
    L_0x2019:
        if (r40 != 0) goto L_0x2169;
    L_0x201b:
        r0 = r181;
        r6 = r0.mergeDialogId;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x2169;
    L_0x2025:
        r101 = 1;
    L_0x2027:
        r172 = 0;
        r124 = 0;
        r156 = r105.size();
        r174 = 0;
        r175 = 0;
        r19 = 0;
    L_0x2035:
        r0 = r19;
        r1 = r156;
        if (r0 >= r1) goto L_0x218e;
    L_0x203b:
        r0 = r105;
        r1 = r19;
        r85 = r0.get(r1);
        r85 = (java.lang.Integer) r85;
        r0 = r181;
        r4 = r0.messagesDict;
        r4 = r4[r101];
        r6 = r85.intValue();
        r130 = r4.get(r6);
        r130 = (org.telegram.messenger.MessageObject) r130;
        if (r101 != 0) goto L_0x20a1;
    L_0x2057:
        r0 = r181;
        r4 = r0.chatInfo;
        if (r4 == 0) goto L_0x2069;
    L_0x205d:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.pinned_msg_id;
        r6 = r85.intValue();
        if (r4 == r6) goto L_0x207b;
    L_0x2069:
        r0 = r181;
        r4 = r0.userInfo;
        if (r4 == 0) goto L_0x20a1;
    L_0x206f:
        r0 = r181;
        r4 = r0.userInfo;
        r4 = r4.pinned_msg_id;
        r6 = r85.intValue();
        if (r4 != r6) goto L_0x20a1;
    L_0x207b:
        r4 = 0;
        r0 = r181;
        r0.pinnedMessageObject = r4;
        r0 = r181;
        r4 = r0.chatInfo;
        if (r4 == 0) goto L_0x217b;
    L_0x2086:
        r0 = r181;
        r4 = r0.chatInfo;
        r6 = 0;
        r4.pinned_msg_id = r6;
    L_0x208d:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesStorage.getInstance(r4);
        r6 = 0;
        r0 = r40;
        r4.updateChatPinnedMessage(r0, r6);
        r4 = 1;
        r0 = r181;
        r0.updatePinnedMessageView(r4);
    L_0x20a1:
        if (r130 == 0) goto L_0x2165;
    L_0x20a3:
        r0 = r181;
        r4 = r0.messages;
        r0 = r130;
        r88 = r4.indexOf(r0);
        r4 = -1;
        r0 = r88;
        if (r0 == r4) goto L_0x2165;
    L_0x20b2:
        r0 = r181;
        r4 = r0.selectedMessagesIds;
        r4 = r4[r101];
        r6 = r85.intValue();
        r4 = r4.indexOfKey(r6);
        if (r4 < 0) goto L_0x20d6;
    L_0x20c2:
        r174 = 1;
        r4 = 0;
        r6 = r156 + -1;
        r0 = r19;
        if (r0 != r6) goto L_0x218a;
    L_0x20cb:
        r175 = 1;
    L_0x20cd:
        r0 = r181;
        r1 = r130;
        r2 = r175;
        r0.addToSelectedMessages(r1, r4, r2);
    L_0x20d6:
        r0 = r181;
        r4 = r0.messages;
        r0 = r88;
        r152 = r4.remove(r0);
        r152 = (org.telegram.messenger.MessageObject) r152;
        r6 = r152.getGroupId();
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x2117;
    L_0x20ec:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r6 = r152.getGroupId();
        r79 = r4.get(r6);
        r79 = (org.telegram.messenger.MessageObject.GroupedMessages) r79;
        if (r79 == 0) goto L_0x2117;
    L_0x20fc:
        if (r124 != 0) goto L_0x2103;
    L_0x20fe:
        r124 = new android.util.LongSparseArray;
        r124.<init>();
    L_0x2103:
        r0 = r79;
        r6 = r0.groupId;
        r0 = r124;
        r1 = r79;
        r0.put(r6, r1);
        r0 = r79;
        r4 = r0.messages;
        r0 = r130;
        r4.remove(r0);
    L_0x2117:
        r0 = r181;
        r4 = r0.messagesDict;
        r4 = r4[r101];
        r6 = r85.intValue();
        r4.remove(r6);
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r130;
        r6 = r0.dateKey;
        r58 = r4.get(r6);
        r58 = (java.util.ArrayList) r58;
        if (r58 == 0) goto L_0x2163;
    L_0x2134:
        r0 = r58;
        r1 = r130;
        r0.remove(r1);
        r4 = r58.isEmpty();
        if (r4 == 0) goto L_0x2163;
    L_0x2141:
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r130;
        r6 = r0.dateKey;
        r4.remove(r6);
        if (r88 < 0) goto L_0x2163;
    L_0x214e:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.size();
        r0 = r88;
        if (r0 >= r4) goto L_0x2163;
    L_0x215a:
        r0 = r181;
        r4 = r0.messages;
        r0 = r88;
        r4.remove(r0);
    L_0x2163:
        r172 = 1;
    L_0x2165:
        r19 = r19 + 1;
        goto L_0x2035;
    L_0x2169:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.id;
        r0 = r40;
        if (r0 != r4) goto L_0x0072;
    L_0x2173:
        r101 = 0;
        goto L_0x2027;
    L_0x2177:
        if (r40 == 0) goto L_0x2027;
    L_0x2179:
        goto L_0x0072;
    L_0x217b:
        r0 = r181;
        r4 = r0.userInfo;
        if (r4 == 0) goto L_0x208d;
    L_0x2181:
        r0 = r181;
        r4 = r0.userInfo;
        r6 = 0;
        r4.pinned_msg_id = r6;
        goto L_0x208d;
    L_0x218a:
        r175 = 0;
        goto L_0x20cd;
    L_0x218e:
        if (r174 == 0) goto L_0x219a;
    L_0x2190:
        if (r175 != 0) goto L_0x219a;
    L_0x2192:
        r4 = 0;
        r6 = 0;
        r7 = 1;
        r0 = r181;
        r0.addToSelectedMessages(r4, r6, r7);
    L_0x219a:
        if (r124 == 0) goto L_0x220b;
    L_0x219c:
        r19 = 0;
    L_0x219e:
        r4 = r124.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x220b;
    L_0x21a6:
        r0 = r124;
        r1 = r19;
        r79 = r0.valueAt(r1);
        r79 = (org.telegram.messenger.MessageObject.GroupedMessages) r79;
        r0 = r79;
        r4 = r0.messages;
        r4 = r4.isEmpty();
        if (r4 == 0) goto L_0x21c8;
    L_0x21ba:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r0 = r79;
        r6 = r0.groupId;
        r4.remove(r6);
    L_0x21c5:
        r19 = r19 + 1;
        goto L_0x219e;
    L_0x21c8:
        r79.calculate();
        r0 = r79;
        r4 = r0.messages;
        r0 = r79;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -1;
        r114 = r4.get(r6);
        r114 = (org.telegram.messenger.MessageObject) r114;
        r0 = r181;
        r4 = r0.messages;
        r0 = r114;
        r88 = r4.indexOf(r0);
        if (r88 < 0) goto L_0x21c5;
    L_0x21eb:
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x21c5;
    L_0x21f1:
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.messagesStartRow;
        r6 = r6 + r88;
        r0 = r79;
        r7 = r0.messages;
        r7 = r7.size();
        r4.notifyItemRangeChanged(r6, r7);
        goto L_0x21c5;
    L_0x220b:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.isEmpty();
        if (r4 == 0) goto L_0x22e6;
    L_0x2215:
        r0 = r181;
        r4 = r0.endReached;
        r6 = 0;
        r4 = r4[r6];
        if (r4 != 0) goto L_0x2359;
    L_0x221e:
        r0 = r181;
        r4 = r0.loading;
        if (r4 != 0) goto L_0x2359;
    L_0x2224:
        r0 = r181;
        r4 = r0.progressView;
        if (r4 == 0) goto L_0x2232;
    L_0x222a:
        r0 = r181;
        r4 = r0.progressView;
        r6 = 4;
        r4.setVisibility(r6);
    L_0x2232:
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x2240;
    L_0x2238:
        r0 = r181;
        r4 = r0.chatListView;
        r6 = 0;
        r4.setEmptyView(r6);
    L_0x2240:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x2333;
    L_0x2246:
        r0 = r181;
        r4 = r0.maxMessageId;
        r6 = 0;
        r0 = r181;
        r7 = r0.maxMessageId;
        r8 = 1;
        r9 = NUM; // 0x7fffffff float:NaN double:1.060997895E-314;
        r7[r8] = r9;
        r4[r6] = r9;
        r0 = r181;
        r4 = r0.minMessageId;
        r6 = 0;
        r0 = r181;
        r7 = r0.minMessageId;
        r8 = 1;
        r9 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r7[r8] = r9;
        r4[r6] = r9;
    L_0x2267:
        r0 = r181;
        r4 = r0.maxDate;
        r6 = 0;
        r0 = r181;
        r7 = r0.maxDate;
        r8 = 1;
        r9 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r7[r8] = r9;
        r4[r6] = r9;
        r0 = r181;
        r4 = r0.minDate;
        r6 = 0;
        r0 = r181;
        r7 = r0.minDate;
        r8 = 1;
        r9 = 0;
        r7[r8] = r9;
        r4[r6] = r9;
        r0 = r181;
        r4 = r0.waitingForLoad;
        r0 = r181;
        r6 = r0.lastLoadIndex;
        r6 = java.lang.Integer.valueOf(r6);
        r4.add(r6);
        r0 = r181;
        r4 = r0.currentAccount;
        r5 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r181;
        r6 = r0.dialog_id;
        r8 = 30;
        r9 = 0;
        r10 = 0;
        r0 = r181;
        r4 = r0.cacheEndReached;
        r11 = 0;
        r4 = r4[r11];
        if (r4 != 0) goto L_0x2356;
    L_0x22ae:
        r11 = 1;
    L_0x22af:
        r0 = r181;
        r4 = r0.minDate;
        r12 = 0;
        r12 = r4[r12];
        r0 = r181;
        r13 = r0.classGuid;
        r14 = 0;
        r15 = 0;
        r0 = r181;
        r4 = r0.currentChat;
        r16 = org.telegram.messenger.ChatObject.isChannel(r4);
        r0 = r181;
        r0 = r0.lastLoadIndex;
        r17 = r0;
        r4 = r17 + 1;
        r0 = r181;
        r0.lastLoadIndex = r4;
        r5.loadMessages(r6, r8, r9, r10, r11, r12, r13, r14, r15, r16, r17);
        r4 = 1;
        r0 = r181;
        r0.loading = r4;
    L_0x22d8:
        r4 = 0;
        r6 = 1;
        r0 = r181;
        r0.showPagedownButton(r4, r6);
        r4 = 0;
        r6 = 1;
        r0 = r181;
        r0.showMentionDownButton(r4, r6);
    L_0x22e6:
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x0072;
    L_0x22ec:
        if (r172 == 0) goto L_0x23e1;
    L_0x22ee:
        r4 = 0;
        r0 = r181;
        r0.removeUnreadPlane(r4);
        r0 = r181;
        r4 = r0.chatListView;
        r46 = r4.getChildCount();
        r146 = -1;
        r32 = 0;
        r19 = 0;
    L_0x2302:
        r0 = r19;
        r1 = r46;
        if (r0 >= r1) goto L_0x23b7;
    L_0x2308:
        r0 = r181;
        r4 = r0.chatListView;
        r0 = r19;
        r45 = r4.getChildAt(r0);
        r114 = 0;
        r0 = r45;
        r4 = r0 instanceof org.telegram.ui.Cells.ChatMessageCell;
        if (r4 == 0) goto L_0x2399;
    L_0x231a:
        r4 = r45;
        r4 = (org.telegram.ui.Cells.ChatMessageCell) r4;
        r114 = r4.getMessageObject();
    L_0x2322:
        if (r114 == 0) goto L_0x2330;
    L_0x2324:
        r0 = r181;
        r4 = r0.messages;
        r0 = r114;
        r86 = r4.indexOf(r0);
        if (r86 >= 0) goto L_0x23a9;
    L_0x2330:
        r19 = r19 + 1;
        goto L_0x2302;
    L_0x2333:
        r0 = r181;
        r4 = r0.maxMessageId;
        r6 = 0;
        r0 = r181;
        r7 = r0.maxMessageId;
        r8 = 1;
        r9 = -NUM; // 0xfffffffvar_ float:-0.0 double:NaN;
        r7[r8] = r9;
        r4[r6] = r9;
        r0 = r181;
        r4 = r0.minMessageId;
        r6 = 0;
        r0 = r181;
        r7 = r0.minMessageId;
        r8 = 1;
        r9 = NUM; // 0x7fffffff float:NaN double:1.060997895E-314;
        r7[r8] = r9;
        r4[r6] = r9;
        goto L_0x2267;
    L_0x2356:
        r11 = 0;
        goto L_0x22af;
    L_0x2359:
        r0 = r181;
        r4 = r0.botButtons;
        if (r4 == 0) goto L_0x2373;
    L_0x235f:
        r4 = 0;
        r0 = r181;
        r0.botButtons = r4;
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        if (r4 == 0) goto L_0x2373;
    L_0x236a:
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        r6 = 0;
        r7 = 0;
        r4.setButtons(r6, r7);
    L_0x2373:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x22d8;
    L_0x2379:
        r0 = r181;
        r4 = r0.currentUser;
        if (r4 == 0) goto L_0x22d8;
    L_0x237f:
        r0 = r181;
        r4 = r0.currentUser;
        r4 = r4.bot;
        if (r4 == 0) goto L_0x22d8;
    L_0x2387:
        r0 = r181;
        r4 = r0.botUser;
        if (r4 != 0) goto L_0x22d8;
    L_0x238d:
        r4 = "";
        r0 = r181;
        r0.botUser = r4;
        r181.updateBottomOverlay();
        goto L_0x22d8;
    L_0x2399:
        r0 = r45;
        r4 = r0 instanceof org.telegram.ui.Cells.ChatActionCell;
        if (r4 == 0) goto L_0x2322;
    L_0x239f:
        r4 = r45;
        r4 = (org.telegram.ui.Cells.ChatActionCell) r4;
        r114 = r4.getMessageObject();
        goto L_0x2322;
    L_0x23a9:
        r0 = r181;
        r4 = r0.chatAdapter;
        r4 = r4.messagesStartRow;
        r146 = r4 + r86;
        r32 = r45.getBottom();
    L_0x23b7:
        r0 = r181;
        r4 = r0.chatAdapter;
        r4.notifyDataSetChanged();
        r4 = -1;
        r0 = r146;
        if (r0 == r4) goto L_0x0072;
    L_0x23c3:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r0 = r181;
        r6 = r0.chatListView;
        r6 = r6.getMeasuredHeight();
        r6 = r6 - r32;
        r0 = r181;
        r7 = r0.chatListView;
        r7 = r7.getPaddingBottom();
        r6 = r6 - r7;
        r0 = r146;
        r4.scrollToPositionWithOffset(r0, r6);
        goto L_0x0072;
    L_0x23e1:
        r4 = 0;
        r0 = r181;
        r0.first_unread_id = r4;
        r4 = 0;
        r0 = r181;
        r0.last_message_id = r4;
        r4 = 0;
        r0 = r181;
        r0.createUnreadMessageAfterId = r4;
        r0 = r181;
        r4 = r0.unreadMessageObject;
        r0 = r181;
        r0.removeMessageObject(r4);
        r4 = 0;
        r0 = r181;
        r0.unreadMessageObject = r4;
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        if (r4 == 0) goto L_0x0072;
    L_0x2404:
        r0 = r181;
        r4 = r0.pagedownButtonCounter;
        r6 = 4;
        r4.setVisibility(r6);
        goto L_0x0072;
    L_0x240e:
        r4 = org.telegram.messenger.NotificationCenter.messageReceivedByServer;
        r0 = r182;
        if (r0 != r4) goto L_0x268d;
    L_0x2414:
        r4 = 0;
        r120 = r184[r4];
        r120 = (java.lang.Integer) r120;
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r120.intValue();
        r130 = r4.get(r6);
        r130 = (org.telegram.messenger.MessageObject) r130;
        if (r130 == 0) goto L_0x0072;
    L_0x242c:
        r4 = 1;
        r125 = r184[r4];
        r125 = (java.lang.Integer) r125;
        r0 = r125;
        r1 = r120;
        r4 = r0.equals(r1);
        if (r4 != 0) goto L_0x24cc;
    L_0x243b:
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r125.intValue();
        r4 = r4.indexOfKey(r6);
        if (r4 < 0) goto L_0x24cc;
    L_0x244c:
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r120.intValue();
        r152 = r4.get(r6);
        r152 = (org.telegram.messenger.MessageObject) r152;
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r120.intValue();
        r4.remove(r6);
        if (r152 == 0) goto L_0x0072;
    L_0x246d:
        r0 = r181;
        r4 = r0.messages;
        r0 = r152;
        r88 = r4.indexOf(r0);
        r0 = r181;
        r4 = r0.messages;
        r0 = r88;
        r4.remove(r0);
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r152;
        r6 = r0.dateKey;
        r58 = r4.get(r6);
        r58 = (java.util.ArrayList) r58;
        r0 = r58;
        r1 = r130;
        r0.remove(r1);
        r4 = r58.isEmpty();
        if (r4 == 0) goto L_0x24bd;
    L_0x249b:
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r130;
        r6 = r0.dateKey;
        r4.remove(r6);
        if (r88 < 0) goto L_0x24bd;
    L_0x24a8:
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.size();
        r0 = r88;
        if (r0 >= r4) goto L_0x24bd;
    L_0x24b4:
        r0 = r181;
        r4 = r0.messages;
        r0 = r88;
        r4.remove(r0);
    L_0x24bd:
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x0072;
    L_0x24c3:
        r0 = r181;
        r4 = r0.chatAdapter;
        r4.notifyDataSetChanged();
        goto L_0x0072;
    L_0x24cc:
        r4 = 2;
        r126 = r184[r4];
        r126 = (org.telegram.tgnet.TLRPC.Message) r126;
        r0 = r184;
        r4 = r0.length;
        r6 = 4;
        if (r4 < r6) goto L_0x2677;
    L_0x24d7:
        r4 = 4;
        r80 = r184[r4];
        r80 = (java.lang.Long) r80;
    L_0x24dc:
        r109 = 0;
        r173 = 0;
        if (r126 == 0) goto L_0x25cc;
    L_0x24e2:
        r4 = r130.isForwarded();	 Catch:{ Exception -> 0x2687 }
        if (r4 == 0) goto L_0x267f;
    L_0x24e8:
        r0 = r130;
        r4 = r0.messageOwner;	 Catch:{ Exception -> 0x2687 }
        r4 = r4.reply_markup;	 Catch:{ Exception -> 0x2687 }
        if (r4 != 0) goto L_0x24f6;
    L_0x24f0:
        r0 = r126;
        r4 = r0.reply_markup;	 Catch:{ Exception -> 0x2687 }
        if (r4 != 0) goto L_0x2506;
    L_0x24f6:
        r0 = r130;
        r4 = r0.messageOwner;	 Catch:{ Exception -> 0x2687 }
        r4 = r4.message;	 Catch:{ Exception -> 0x2687 }
        r0 = r126;
        r6 = r0.message;	 Catch:{ Exception -> 0x2687 }
        r4 = r4.equals(r6);	 Catch:{ Exception -> 0x2687 }
        if (r4 != 0) goto L_0x267f;
    L_0x2506:
        r173 = 1;
    L_0x2508:
        if (r173 != 0) goto L_0x2547;
    L_0x250a:
        r0 = r130;
        r4 = r0.messageOwner;	 Catch:{ Exception -> 0x2687 }
        r4 = r4.params;	 Catch:{ Exception -> 0x2687 }
        if (r4 == 0) goto L_0x2521;
    L_0x2512:
        r0 = r130;
        r4 = r0.messageOwner;	 Catch:{ Exception -> 0x2687 }
        r4 = r4.params;	 Catch:{ Exception -> 0x2687 }
        r6 = "query_id";
        r4 = r4.containsKey(r6);	 Catch:{ Exception -> 0x2687 }
        if (r4 != 0) goto L_0x2547;
    L_0x2521:
        r0 = r126;
        r4 = r0.media;	 Catch:{ Exception -> 0x2687 }
        if (r4 == 0) goto L_0x2683;
    L_0x2527:
        r0 = r130;
        r4 = r0.messageOwner;	 Catch:{ Exception -> 0x2687 }
        r4 = r4.media;	 Catch:{ Exception -> 0x2687 }
        if (r4 == 0) goto L_0x2683;
    L_0x252f:
        r0 = r126;
        r4 = r0.media;	 Catch:{ Exception -> 0x2687 }
        r4 = r4.getClass();	 Catch:{ Exception -> 0x2687 }
        r0 = r130;
        r6 = r0.messageOwner;	 Catch:{ Exception -> 0x2687 }
        r6 = r6.media;	 Catch:{ Exception -> 0x2687 }
        r6 = r6.getClass();	 Catch:{ Exception -> 0x2687 }
        r4 = r4.equals(r6);	 Catch:{ Exception -> 0x2687 }
        if (r4 != 0) goto L_0x2683;
    L_0x2547:
        r109 = 1;
    L_0x2549:
        r6 = r130.getGroupId();
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x258e;
    L_0x2553:
        r0 = r126;
        r6 = r0.grouped_id;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x258e;
    L_0x255d:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r6 = r130.getGroupId();
        r135 = r4.get(r6);
        r135 = (org.telegram.messenger.MessageObject.GroupedMessages) r135;
        if (r135 == 0) goto L_0x257a;
    L_0x256d:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r0 = r126;
        r6 = r0.grouped_id;
        r0 = r135;
        r4.put(r6, r0);
    L_0x257a:
        r0 = r130;
        r4 = r0.messageOwner;
        r6 = r4.grouped_id;
        r0 = r130;
        r0.localSentGroupId = r6;
        r0 = r130;
        r4 = r0.messageOwner;
        r6 = r80.longValue();
        r4.grouped_id = r6;
    L_0x258e:
        r0 = r130;
        r4 = r0.messageOwner;
        r0 = r4.fwd_from;
        r76 = r0;
        r0 = r126;
        r1 = r130;
        r1.messageOwner = r0;
        if (r76 == 0) goto L_0x25b8;
    L_0x259e:
        r0 = r126;
        r4 = r0.fwd_from;
        if (r4 == 0) goto L_0x25b8;
    L_0x25a4:
        r0 = r126;
        r4 = r0.fwd_from;
        r4 = r4.from_name;
        r4 = android.text.TextUtils.isEmpty(r4);
        if (r4 != 0) goto L_0x25b8;
    L_0x25b0:
        r0 = r130;
        r4 = r0.messageOwner;
        r0 = r76;
        r4.fwd_from = r0;
    L_0x25b8:
        r4 = 1;
        r0 = r130;
        r0.generateThumbs(r4);
        r130.setType();
        r0 = r126;
        r4 = r0.media;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageMediaGame;
        if (r4 == 0) goto L_0x25cc;
    L_0x25c9:
        r130.applyNewText();
    L_0x25cc:
        if (r173 == 0) goto L_0x25d1;
    L_0x25ce:
        r130.measureInlineBotButtons();
    L_0x25d1:
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r120.intValue();
        r4.remove(r6);
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r125.intValue();
        r0 = r130;
        r4.put(r6, r0);
        r0 = r130;
        r4 = r0.messageOwner;
        r6 = r125.intValue();
        r4.id = r6;
        r0 = r130;
        r4 = r0.messageOwner;
        r6 = 0;
        r4.send_state = r6;
        r0 = r109;
        r1 = r130;
        r1.forceUpdate = r0;
        r0 = r184;
        r4 = r0.length;
        r6 = 6;
        if (r4 < r6) goto L_0x261a;
    L_0x260c:
        r4 = 5;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r4 = r4.intValue();
        r0 = r130;
        r0.applyMediaExistanceFlags(r4);
    L_0x261a:
        r4 = 0;
        r0 = r181;
        r1 = r130;
        r0.addToPolls(r1, r4);
        r110 = new java.util.ArrayList;
        r110.<init>();
        r0 = r110;
        r1 = r130;
        r0.add(r1);
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x2645;
    L_0x2634:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.DataQuery.getInstance(r4);
        r0 = r181;
        r6 = r0.dialog_id;
        r0 = r110;
        r4.loadReplyMessagesForMessages(r0, r6);
    L_0x2645:
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x2655;
    L_0x264b:
        r0 = r181;
        r4 = r0.chatAdapter;
        r6 = 1;
        r0 = r130;
        r4.updateRowWithMessageObject(r0, r6);
    L_0x2655:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        if (r4 == 0) goto L_0x266a;
    L_0x265b:
        if (r109 == 0) goto L_0x266a;
    L_0x265d:
        r0 = r181;
        r4 = r0.chatLayoutManager;
        r4 = r4.findFirstVisibleItemPosition();
        if (r4 != 0) goto L_0x266a;
    L_0x2667:
        r181.moveScrollToLastMessage();
    L_0x266a:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.NotificationsController.getInstance(r4);
        r4.playOutChatSound();
        goto L_0x0072;
    L_0x2677:
        r6 = 0;
        r80 = java.lang.Long.valueOf(r6);
        goto L_0x24dc;
    L_0x267f:
        r173 = 0;
        goto L_0x2508;
    L_0x2683:
        r109 = 0;
        goto L_0x2549;
    L_0x2687:
        r65 = move-exception;
        org.telegram.messenger.FileLog.e(r65);
        goto L_0x2549;
    L_0x268d:
        r4 = org.telegram.messenger.NotificationCenter.messageReceivedByAck;
        r0 = r182;
        if (r0 != r4) goto L_0x26c4;
    L_0x2693:
        r4 = 0;
        r120 = r184[r4];
        r120 = (java.lang.Integer) r120;
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r120.intValue();
        r130 = r4.get(r6);
        r130 = (org.telegram.messenger.MessageObject) r130;
        if (r130 == 0) goto L_0x0072;
    L_0x26ab:
        r0 = r130;
        r4 = r0.messageOwner;
        r6 = 0;
        r4.send_state = r6;
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x0072;
    L_0x26b8:
        r0 = r181;
        r4 = r0.chatAdapter;
        r6 = 1;
        r0 = r130;
        r4.updateRowWithMessageObject(r0, r6);
        goto L_0x0072;
    L_0x26c4:
        r4 = org.telegram.messenger.NotificationCenter.messageSendError;
        r0 = r182;
        if (r0 != r4) goto L_0x26ee;
    L_0x26ca:
        r4 = 0;
        r120 = r184[r4];
        r120 = (java.lang.Integer) r120;
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r120.intValue();
        r130 = r4.get(r6);
        r130 = (org.telegram.messenger.MessageObject) r130;
        if (r130 == 0) goto L_0x0072;
    L_0x26e2:
        r0 = r130;
        r4 = r0.messageOwner;
        r6 = 2;
        r4.send_state = r6;
        r181.updateVisibleRows();
        goto L_0x0072;
    L_0x26ee:
        r4 = org.telegram.messenger.NotificationCenter.chatInfoDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x29dc;
    L_0x26f4:
        r4 = 0;
        r43 = r184[r4];
        r43 = (org.telegram.tgnet.TLRPC.ChatFull) r43;
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x0072;
    L_0x26ff:
        r0 = r43;
        r4 = r0.id;
        r0 = r181;
        r6 = r0.currentChat;
        r6 = r6.id;
        if (r4 != r6) goto L_0x0072;
    L_0x270b:
        r0 = r43;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_channelFull;
        if (r4 == 0) goto L_0x278c;
    L_0x2711:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.megagroup;
        if (r4 == 0) goto L_0x2776;
    L_0x2719:
        r96 = 0;
        r0 = r43;
        r4 = r0.participants;
        if (r4 == 0) goto L_0x274a;
    L_0x2721:
        r19 = 0;
    L_0x2723:
        r0 = r43;
        r4 = r0.participants;
        r4 = r4.participants;
        r4 = r4.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x274a;
    L_0x2731:
        r0 = r43;
        r4 = r0.participants;
        r4 = r4.participants;
        r0 = r19;
        r4 = r4.get(r0);
        r4 = (org.telegram.tgnet.TLRPC.ChatParticipant) r4;
        r4 = r4.date;
        r0 = r96;
        r96 = java.lang.Math.max(r4, r0);
        r19 = r19 + 1;
        goto L_0x2723;
    L_0x274a:
        if (r96 == 0) goto L_0x2761;
    L_0x274c:
        r6 = java.lang.System.currentTimeMillis();
        r8 = 1000; // 0x3e8 float:1.401E-42 double:4.94E-321;
        r6 = r6 / r8;
        r0 = r96;
        r8 = (long) r0;
        r6 = r6 - r8;
        r6 = java.lang.Math.abs(r6);
        r8 = 3600; // 0xe10 float:5.045E-42 double:1.7786E-320;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 <= 0) goto L_0x2776;
    L_0x2761:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r181;
        r6 = r0.currentChat;
        r6 = r6.id;
        r6 = java.lang.Integer.valueOf(r6);
        r4.loadChannelParticipants(r6);
    L_0x2776:
        r0 = r43;
        r4 = r0.participants;
        if (r4 != 0) goto L_0x278c;
    L_0x277c:
        r0 = r181;
        r4 = r0.chatInfo;
        if (r4 == 0) goto L_0x278c;
    L_0x2782:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.participants;
        r0 = r43;
        r0.participants = r4;
    L_0x278c:
        r0 = r43;
        r1 = r181;
        r1.chatInfo = r0;
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        if (r4 == 0) goto L_0x27a3;
    L_0x2798:
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        r0 = r181;
        r6 = r0.chatInfo;
        r4.setChatInfo(r6);
    L_0x27a3:
        r0 = r181;
        r4 = r0.mentionsAdapter;
        if (r4 == 0) goto L_0x27b4;
    L_0x27a9:
        r0 = r181;
        r4 = r0.mentionsAdapter;
        r0 = r181;
        r6 = r0.chatInfo;
        r4.setChatInfo(r6);
    L_0x27b4:
        r4 = 3;
        r4 = r184[r4];
        r4 = r4 instanceof org.telegram.messenger.MessageObject;
        if (r4 == 0) goto L_0x2871;
    L_0x27bb:
        r4 = 3;
        r4 = r184[r4];
        r4 = (org.telegram.messenger.MessageObject) r4;
        r0 = r181;
        r0.pinnedMessageObject = r4;
        r4 = 0;
        r0 = r181;
        r0.updatePinnedMessageView(r4);
    L_0x27ca:
        r0 = r181;
        r4 = r0.avatarContainer;
        if (r4 == 0) goto L_0x27de;
    L_0x27d0:
        r0 = r181;
        r4 = r0.avatarContainer;
        r4.updateOnlineCount();
        r0 = r181;
        r4 = r0.avatarContainer;
        r4.updateSubtitle();
    L_0x27de:
        r0 = r181;
        r4 = r0.isBroadcast;
        if (r4 == 0) goto L_0x27f3;
    L_0x27e4:
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.SendMessagesHelper.getInstance(r4);
        r0 = r181;
        r6 = r0.chatInfo;
        r4.setCurrentChatInfo(r6);
    L_0x27f3:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_chatFull;
        if (r4 == 0) goto L_0x2909;
    L_0x27fb:
        r4 = 0;
        r0 = r181;
        r0.hasBotsCommands = r4;
        r0 = r181;
        r4 = r0.botInfo;
        r4.clear();
        r4 = 0;
        r0 = r181;
        r0.botsCount = r4;
        r4 = 0;
        org.telegram.ui.Components.URLSpanBotCommand.enabled = r4;
        r19 = 0;
    L_0x2811:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.participants;
        r4 = r4.participants;
        r4 = r4.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x2879;
    L_0x2821:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.participants;
        r4 = r4.participants;
        r0 = r19;
        r139 = r4.get(r0);
        r139 = (org.telegram.tgnet.TLRPC.ChatParticipant) r139;
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r139;
        r6 = r0.user_id;
        r6 = java.lang.Integer.valueOf(r6);
        r176 = r4.getUser(r6);
        if (r176 == 0) goto L_0x286e;
    L_0x2847:
        r0 = r176;
        r4 = r0.bot;
        if (r4 == 0) goto L_0x286e;
    L_0x284d:
        r4 = 1;
        org.telegram.ui.Components.URLSpanBotCommand.enabled = r4;
        r0 = r181;
        r4 = r0.botsCount;
        r4 = r4 + 1;
        r0 = r181;
        r0.botsCount = r4;
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.DataQuery.getInstance(r4);
        r0 = r176;
        r6 = r0.id;
        r7 = 1;
        r0 = r181;
        r8 = r0.classGuid;
        r4.loadBotInfo(r6, r7, r8);
    L_0x286e:
        r19 = r19 + 1;
        goto L_0x2811;
    L_0x2871:
        r4 = 1;
        r0 = r181;
        r0.updatePinnedMessageView(r4);
        goto L_0x27ca;
    L_0x2879:
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x2886;
    L_0x287f:
        r0 = r181;
        r4 = r0.chatListView;
        r4.invalidateViews();
    L_0x2886:
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        if (r4 == 0) goto L_0x289b;
    L_0x288c:
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        r0 = r181;
        r6 = r0.botsCount;
        r0 = r181;
        r7 = r0.hasBotsCommands;
        r4.setBotsCount(r6, r7);
    L_0x289b:
        r0 = r181;
        r4 = r0.mentionsAdapter;
        if (r4 == 0) goto L_0x28ac;
    L_0x28a1:
        r0 = r181;
        r4 = r0.mentionsAdapter;
        r0 = r181;
        r6 = r0.botsCount;
        r4.setBotsCount(r6);
    L_0x28ac:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x0072;
    L_0x28b6:
        r0 = r181;
        r6 = r0.mergeDialogId;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x28c0:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.migrated_from_chat_id;
        if (r4 == 0) goto L_0x0072;
    L_0x28c8:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.migrated_from_chat_id;
        r4 = -r4;
        r6 = (long) r4;
        r0 = r181;
        r0.mergeDialogId = r6;
        r0 = r181;
        r4 = r0.maxMessageId;
        r6 = 1;
        r0 = r181;
        r7 = r0.chatInfo;
        r7 = r7.migrated_from_max_id;
        r4[r6] = r7;
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x28ee;
    L_0x28e7:
        r0 = r181;
        r4 = r0.chatAdapter;
        r4.notifyDataSetChanged();
    L_0x28ee:
        r0 = r181;
        r6 = r0.mergeDialogId;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x0072;
    L_0x28f8:
        r0 = r181;
        r4 = r0.endReached;
        r6 = 0;
        r4 = r4[r6];
        if (r4 == 0) goto L_0x0072;
    L_0x2901:
        r4 = 0;
        r0 = r181;
        r0.checkScrollForLoad(r4);
        goto L_0x0072;
    L_0x2909:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_channelFull;
        if (r4 == 0) goto L_0x2886;
    L_0x2911:
        r4 = 0;
        r0 = r181;
        r0.hasBotsCommands = r4;
        r0 = r181;
        r4 = r0.botInfo;
        r4.clear();
        r4 = 0;
        r0 = r181;
        r0.botsCount = r4;
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.bot_info;
        r4 = r4.isEmpty();
        if (r4 != 0) goto L_0x29a2;
    L_0x292e:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x29a2;
    L_0x2934:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.megagroup;
        if (r4 == 0) goto L_0x29a2;
    L_0x293c:
        r4 = 1;
    L_0x293d:
        org.telegram.ui.Components.URLSpanBotCommand.enabled = r4;
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.bot_info;
        r4 = r4.size();
        r0 = r181;
        r0.botsCount = r4;
        r19 = 0;
    L_0x294f:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.bot_info;
        r4 = r4.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x29a4;
    L_0x295d:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.bot_info;
        r0 = r19;
        r31 = r4.get(r0);
        r31 = (org.telegram.tgnet.TLRPC.BotInfo) r31;
        r0 = r31;
        r4 = r0.commands;
        r4 = r4.isEmpty();
        if (r4 != 0) goto L_0x2992;
    L_0x2975:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x298d;
    L_0x297f:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x2992;
    L_0x2985:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.megagroup;
        if (r4 == 0) goto L_0x2992;
    L_0x298d:
        r4 = 1;
        r0 = r181;
        r0.hasBotsCommands = r4;
    L_0x2992:
        r0 = r181;
        r4 = r0.botInfo;
        r0 = r31;
        r6 = r0.user_id;
        r0 = r31;
        r4.put(r6, r0);
        r19 = r19 + 1;
        goto L_0x294f;
    L_0x29a2:
        r4 = 0;
        goto L_0x293d;
    L_0x29a4:
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x29b1;
    L_0x29aa:
        r0 = r181;
        r4 = r0.chatListView;
        r4.invalidateViews();
    L_0x29b1:
        r0 = r181;
        r4 = r0.mentionsAdapter;
        if (r4 == 0) goto L_0x2886;
    L_0x29b7:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x29cf;
    L_0x29c1:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x2886;
    L_0x29c7:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.megagroup;
        if (r4 == 0) goto L_0x2886;
    L_0x29cf:
        r0 = r181;
        r4 = r0.mentionsAdapter;
        r0 = r181;
        r6 = r0.botInfo;
        r4.setBotInfo(r6);
        goto L_0x2886;
    L_0x29dc:
        r4 = org.telegram.messenger.NotificationCenter.chatInfoCantLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x2aa4;
    L_0x29e2:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r44 = r4.intValue();
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x0072;
    L_0x29f1:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.id;
        r0 = r44;
        if (r4 != r0) goto L_0x0072;
    L_0x29fb:
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r150 = r4.intValue();
        r4 = r181.getParentActivity();
        if (r4 == 0) goto L_0x0072;
    L_0x2a0a:
        r0 = r181;
        r4 = r0.closeChatDialog;
        if (r4 != 0) goto L_0x0072;
    L_0x2a10:
        r33 = new org.telegram.ui.ActionBar.AlertDialog$Builder;
        r4 = r181.getParentActivity();
        r0 = r33;
        r0.<init>(r4);
        r4 = "AppName";
        r6 = NUM; // 0x7f0CLASSNAMEe0 float:1.8609646E38 double:1.053097509E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r6);
        r0 = r33;
        r0.setTitle(r4);
        if (r150 != 0) goto L_0x2a7a;
    L_0x2a2c:
        r4 = "ChannelCantOpenPrivate";
        r6 = NUM; // 0x7f0CLASSNAMEf3 float:1.8610204E38 double:1.053097645E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r6);
        r0 = r33;
        r0.setMessage(r4);
    L_0x2a3b:
        r4 = "OK";
        r6 = NUM; // 0x7f0CLASSNAME float:1.8612388E38 double:1.053098177E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r6);
        r6 = 0;
        r0 = r33;
        r0.setPositiveButton(r4, r6);
        r4 = r33.create();
        r0 = r181;
        r0.closeChatDialog = r4;
        r0 = r181;
        r0.showDialog(r4);
        r4 = 0;
        r0 = r181;
        r0.loading = r4;
        r0 = r181;
        r4 = r0.progressView;
        if (r4 == 0) goto L_0x2a6b;
    L_0x2a63:
        r0 = r181;
        r4 = r0.progressView;
        r6 = 4;
        r4.setVisibility(r6);
    L_0x2a6b:
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x0072;
    L_0x2a71:
        r0 = r181;
        r4 = r0.chatAdapter;
        r4.notifyDataSetChanged();
        goto L_0x0072;
    L_0x2a7a:
        r4 = 1;
        r0 = r150;
        if (r0 != r4) goto L_0x2a8f;
    L_0x2a7f:
        r4 = "ChannelCantOpenNa";
        r6 = NUM; // 0x7f0CLASSNAMEf2 float:1.8610202E38 double:1.0530976445E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r6);
        r0 = r33;
        r0.setMessage(r4);
        goto L_0x2a3b;
    L_0x2a8f:
        r4 = 2;
        r0 = r150;
        if (r0 != r4) goto L_0x2a3b;
    L_0x2a94:
        r4 = "ChannelCantOpenBanned";
        r6 = NUM; // 0x7f0CLASSNAMEf1 float:1.86102E38 double:1.053097644E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r6);
        r0 = r33;
        r0.setMessage(r4);
        goto L_0x2a3b;
    L_0x2aa4:
        r4 = org.telegram.messenger.NotificationCenter.contactsDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x2ac5;
    L_0x2aaa:
        r181.updateContactStatus();
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x2ab6;
    L_0x2ab3:
        r181.updateSpamView();
    L_0x2ab6:
        r0 = r181;
        r4 = r0.avatarContainer;
        if (r4 == 0) goto L_0x0072;
    L_0x2abc:
        r0 = r181;
        r4 = r0.avatarContainer;
        r4.updateSubtitle();
        goto L_0x0072;
    L_0x2ac5:
        r4 = org.telegram.messenger.NotificationCenter.encryptedChatUpdated;
        r0 = r182;
        if (r0 != r4) goto L_0x2b63;
    L_0x2acb:
        r4 = 0;
        r42 = r184[r4];
        r42 = (org.telegram.tgnet.TLRPC.EncryptedChat) r42;
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x0072;
    L_0x2ad6:
        r0 = r42;
        r4 = r0.id;
        r0 = r181;
        r6 = r0.currentEncryptedChat;
        r6 = r6.id;
        if (r4 != r6) goto L_0x0072;
    L_0x2ae2:
        r0 = r42;
        r1 = r181;
        r1.currentEncryptedChat = r0;
        r181.updateContactStatus();
        r181.updateSecretStatus();
        r181.initStickers();
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        if (r4 == 0) goto L_0x2b2f;
    L_0x2af7:
        r0 = r181;
        r7 = r0.chatActivityEnterView;
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x2b0f;
    L_0x2b01:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        r4 = r4.layer;
        r4 = org.telegram.messenger.AndroidUtilities.getPeerLayerVersion(r4);
        r6 = 23;
        if (r4 < r6) goto L_0x2b5d;
    L_0x2b0f:
        r4 = 1;
    L_0x2b10:
        r0 = r181;
        r6 = r0.currentEncryptedChat;
        if (r6 == 0) goto L_0x2b24;
    L_0x2b16:
        r0 = r181;
        r6 = r0.currentEncryptedChat;
        r6 = r6.layer;
        r6 = org.telegram.messenger.AndroidUtilities.getPeerLayerVersion(r6);
        r8 = 46;
        if (r6 < r8) goto L_0x2b5f;
    L_0x2b24:
        r6 = 1;
    L_0x2b25:
        r7.setAllowStickersAndGifs(r4, r6);
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        r4.checkRoundVideo();
    L_0x2b2f:
        r0 = r181;
        r4 = r0.mentionsAdapter;
        if (r4 == 0) goto L_0x0072;
    L_0x2b35:
        r0 = r181;
        r6 = r0.mentionsAdapter;
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        r4 = r4.isEditingMessage();
        if (r4 != 0) goto L_0x2b61;
    L_0x2b43:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x2b57;
    L_0x2b49:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        r4 = r4.layer;
        r4 = org.telegram.messenger.AndroidUtilities.getPeerLayerVersion(r4);
        r7 = 46;
        if (r4 < r7) goto L_0x2b61;
    L_0x2b57:
        r4 = 1;
    L_0x2b58:
        r6.setNeedBotContext(r4);
        goto L_0x0072;
    L_0x2b5d:
        r4 = 0;
        goto L_0x2b10;
    L_0x2b5f:
        r6 = 0;
        goto L_0x2b25;
    L_0x2b61:
        r4 = 0;
        goto L_0x2b58;
    L_0x2b63:
        r4 = org.telegram.messenger.NotificationCenter.messagesReadEncrypted;
        r0 = r182;
        if (r0 != r4) goto L_0x2bc6;
    L_0x2b69:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r66 = r4.intValue();
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x0072;
    L_0x2b78:
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        r4 = r4.id;
        r0 = r66;
        if (r4 != r0) goto L_0x0072;
    L_0x2b82:
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r55 = r4.intValue();
        r0 = r181;
        r4 = r0.messages;
        r4 = r4.iterator();
    L_0x2b93:
        r6 = r4.hasNext();
        if (r6 == 0) goto L_0x2bb1;
    L_0x2b99:
        r130 = r4.next();
        r130 = (org.telegram.messenger.MessageObject) r130;
        r6 = r130.isOut();
        if (r6 == 0) goto L_0x2b93;
    L_0x2ba5:
        r6 = r130.isOut();
        if (r6 == 0) goto L_0x2bb6;
    L_0x2bab:
        r6 = r130.isUnread();
        if (r6 != 0) goto L_0x2bb6;
    L_0x2bb1:
        r181.updateVisibleRows();
        goto L_0x0072;
    L_0x2bb6:
        r0 = r130;
        r6 = r0.messageOwner;
        r6 = r6.date;
        r6 = r6 + -1;
        r0 = r55;
        if (r6 > r0) goto L_0x2b93;
    L_0x2bc2:
        r130.setIsRead();
        goto L_0x2b93;
    L_0x2bc6:
        r4 = org.telegram.messenger.NotificationCenter.removeAllMessagesFromDialog;
        r0 = r182;
        if (r0 != r4) goto L_0x2bed;
    L_0x2bcc:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r60 = r4.longValue();
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (r6 > r60 ? 1 : (r6 == r60 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x2bdd:
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Boolean) r4;
        r4 = r4.booleanValue();
        r0 = r181;
        r0.clearHistory(r4);
        goto L_0x0072;
    L_0x2bed:
        r4 = org.telegram.messenger.NotificationCenter.screenshotTook;
        r0 = r182;
        if (r0 != r4) goto L_0x2bf8;
    L_0x2bf3:
        r181.updateInformationForScreenshotDetector();
        goto L_0x0072;
    L_0x2bf8:
        r4 = org.telegram.messenger.NotificationCenter.blockedUsersDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x2CLASSNAME;
    L_0x2bfe:
        r0 = r181;
        r4 = r0.currentUser;
        if (r4 == 0) goto L_0x0072;
    L_0x2CLASSNAME:
        r0 = r181;
        r0 = r0.userBlocked;
        r137 = r0;
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesController.getInstance(r4);
        r4 = r4.blockedUsers;
        r0 = r181;
        r6 = r0.currentUser;
        r6 = r6.id;
        r4 = r4.indexOfKey(r6);
        if (r4 < 0) goto L_0x2CLASSNAME;
    L_0x2CLASSNAME:
        r4 = 1;
    L_0x2CLASSNAME:
        r0 = r181;
        r0.userBlocked = r4;
        r0 = r181;
        r4 = r0.userBlocked;
        r0 = r137;
        if (r0 == r4) goto L_0x0072;
    L_0x2c2d:
        r181.updateBottomOverlay();
        goto L_0x0072;
    L_0x2CLASSNAME:
        r4 = 0;
        goto L_0x2CLASSNAME;
    L_0x2CLASSNAME:
        r4 = org.telegram.messenger.NotificationCenter.fileNewChunkAvailable;
        r0 = r182;
        if (r0 != r4) goto L_0x2CLASSNAME;
    L_0x2c3a:
        r4 = 0;
        r114 = r184[r4];
        r114 = (org.telegram.messenger.MessageObject) r114;
        r4 = 3;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r70 = r4.longValue();
        r6 = 0;
        r4 = (r70 > r6 ? 1 : (r70 == r6 ? 0 : -1));
        if (r4 == 0) goto L_0x0072;
    L_0x2c4e:
        r0 = r181;
        r6 = r0.dialog_id;
        r8 = r114.getDialogId();
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x2c5a:
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r6 = r114.getId();
        r53 = r4.get(r6);
        r53 = (org.telegram.messenger.MessageObject) r53;
        if (r53 == 0) goto L_0x0072;
    L_0x2c6d:
        r0 = r53;
        r4 = r0.messageOwner;
        r4 = r4.media;
        r4 = r4.document;
        if (r4 == 0) goto L_0x0072;
    L_0x2CLASSNAME:
        r0 = r53;
        r4 = r0.messageOwner;
        r4 = r4.media;
        r4 = r4.document;
        r0 = r70;
        r6 = (int) r0;
        r4.size = r6;
        r181.updateVisibleRows();
        goto L_0x0072;
    L_0x2CLASSNAME:
        r4 = org.telegram.messenger.NotificationCenter.didCreatedNewDeleteTask;
        r0 = r182;
        if (r0 != r4) goto L_0x2d16;
    L_0x2c8f:
        r4 = 0;
        r117 = r184[r4];
        r117 = (android.util.SparseArray) r117;
        r38 = 0;
        r84 = 0;
    L_0x2CLASSNAME:
        r4 = r117.size();
        r0 = r84;
        if (r0 >= r4) goto L_0x2d0f;
    L_0x2ca0:
        r0 = r117;
        r1 = r84;
        r95 = r0.keyAt(r1);
        r0 = r117;
        r1 = r95;
        r23 = r0.get(r1);
        r23 = (java.util.ArrayList) r23;
        r19 = 0;
    L_0x2cb4:
        r4 = r23.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x2d0c;
    L_0x2cbc:
        r0 = r23;
        r1 = r19;
        r4 = r0.get(r1);
        r4 = (java.lang.Long) r4;
        r118 = r4.longValue();
        if (r19 != 0) goto L_0x2ceb;
    L_0x2ccc:
        r4 = 32;
        r6 = r118 >> r4;
        r0 = (int) r6;
        r40 = r0;
        if (r40 >= 0) goto L_0x2cd7;
    L_0x2cd5:
        r40 = 0;
    L_0x2cd7:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x2d0a;
    L_0x2ce1:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.id;
    L_0x2ce7:
        r0 = r40;
        if (r0 != r4) goto L_0x0072;
    L_0x2ceb:
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r0 = r118;
        r6 = (int) r0;
        r114 = r4.get(r6);
        r114 = (org.telegram.messenger.MessageObject) r114;
        if (r114 == 0) goto L_0x2d07;
    L_0x2cfd:
        r0 = r114;
        r4 = r0.messageOwner;
        r0 = r95;
        r4.destroyTime = r0;
        r38 = 1;
    L_0x2d07:
        r19 = r19 + 1;
        goto L_0x2cb4;
    L_0x2d0a:
        r4 = 0;
        goto L_0x2ce7;
    L_0x2d0c:
        r84 = r84 + 1;
        goto L_0x2CLASSNAME;
    L_0x2d0f:
        if (r38 == 0) goto L_0x0072;
    L_0x2d11:
        r181.updateVisibleRows();
        goto L_0x0072;
    L_0x2d16:
        r4 = org.telegram.messenger.NotificationCenter.messagePlayingDidStart;
        r0 = r182;
        if (r0 != r4) goto L_0x2e46;
    L_0x2d1c:
        r4 = 0;
        r114 = r184[r4];
        r114 = (org.telegram.messenger.MessageObject) r114;
        r0 = r114;
        r6 = r0.eventId;
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x2d2b:
        r0 = r181;
        r1 = r114;
        r0.sendSecretMessageRead(r1);
        r4 = r114.isRoundVideo();
        if (r4 != 0) goto L_0x2d3e;
    L_0x2d38:
        r4 = r114.isVideo();
        if (r4 == 0) goto L_0x2d6b;
    L_0x2d3e:
        r0 = r181;
        r4 = r0.fragmentView;
        if (r4 == 0) goto L_0x2d6b;
    L_0x2d44:
        r0 = r181;
        r4 = r0.fragmentView;
        r4 = r4.getParent();
        if (r4 == 0) goto L_0x2d6b;
    L_0x2d4e:
        r4 = org.telegram.messenger.MediaController.getInstance();
        r6 = 1;
        r0 = r181;
        r6 = r0.createTextureView(r6);
        r0 = r181;
        r7 = r0.aspectRatioFrameLayout;
        r0 = r181;
        r8 = r0.videoPlayerContainer;
        r9 = 1;
        r4.setTextureView(r6, r7, r8, r9);
        r4 = 0;
        r0 = r181;
        r0.updateTextureViewPosition(r4);
    L_0x2d6b:
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x0072;
    L_0x2d71:
        r0 = r181;
        r4 = r0.chatListView;
        r46 = r4.getChildCount();
        r19 = 0;
    L_0x2d7b:
        r0 = r19;
        r1 = r46;
        if (r0 >= r1) goto L_0x2e06;
    L_0x2d81:
        r0 = r181;
        r4 = r0.chatListView;
        r0 = r19;
        r177 = r4.getChildAt(r0);
        r0 = r177;
        r4 = r0 instanceof org.telegram.ui.Cells.ChatMessageCell;
        if (r4 == 0) goto L_0x2de3;
    L_0x2d91:
        r37 = r177;
        r37 = (org.telegram.ui.Cells.ChatMessageCell) r37;
        r115 = r37.getMessageObject();
        if (r115 == 0) goto L_0x2de3;
    L_0x2d9b:
        r94 = r115.isVideo();
        r4 = r115.isRoundVideo();
        if (r4 != 0) goto L_0x2da7;
    L_0x2da5:
        if (r94 == 0) goto L_0x2df1;
    L_0x2da7:
        r4 = 0;
        r0 = r37;
        r0.checkVideoPlayback(r4);
        r4 = org.telegram.messenger.MediaController.getInstance();
        r0 = r115;
        r4 = r4.isPlayingMessage(r0);
        if (r4 != 0) goto L_0x2de6;
    L_0x2db9:
        if (r94 == 0) goto L_0x2dd4;
    L_0x2dbb:
        r4 = org.telegram.messenger.MediaController.getInstance();
        r0 = r115;
        r4 = r4.isGoingToShowMessageObject(r0);
        if (r4 != 0) goto L_0x2dd4;
    L_0x2dc7:
        r4 = r37.getPhotoImage();
        r21 = r4.getAnimation();
        if (r21 == 0) goto L_0x2dd4;
    L_0x2dd1:
        r21.start();
    L_0x2dd4:
        r0 = r115;
        r4 = r0.audioProgress;
        r6 = 0;
        r4 = (r4 > r6 ? 1 : (r4 == r6 ? 0 : -1));
        if (r4 == 0) goto L_0x2de3;
    L_0x2ddd:
        r115.resetPlayingProgress();
        r37.invalidate();
    L_0x2de3:
        r19 = r19 + 1;
        goto L_0x2d7b;
    L_0x2de6:
        if (r94 == 0) goto L_0x2de3;
    L_0x2de8:
        r4 = 0;
        r6 = 1;
        r7 = 0;
        r0 = r37;
        r0.updateButtonState(r4, r6, r7);
        goto L_0x2de3;
    L_0x2df1:
        r4 = r115.isVoice();
        if (r4 != 0) goto L_0x2dfd;
    L_0x2df7:
        r4 = r115.isMusic();
        if (r4 == 0) goto L_0x2de3;
    L_0x2dfd:
        r4 = 0;
        r6 = 1;
        r7 = 0;
        r0 = r37;
        r0.updateButtonState(r4, r6, r7);
        goto L_0x2de3;
    L_0x2e06:
        r0 = r181;
        r4 = r0.mentionListView;
        r46 = r4.getChildCount();
        r19 = 0;
    L_0x2e10:
        r0 = r19;
        r1 = r46;
        if (r0 >= r1) goto L_0x0072;
    L_0x2e16:
        r0 = r181;
        r4 = r0.mentionListView;
        r0 = r19;
        r177 = r4.getChildAt(r0);
        r0 = r177;
        r4 = r0 instanceof org.telegram.ui.Cells.ContextLinkCell;
        if (r4 == 0) goto L_0x2e43;
    L_0x2e26:
        r37 = r177;
        r37 = (org.telegram.ui.Cells.ContextLinkCell) r37;
        r115 = r37.getMessageObject();
        if (r115 == 0) goto L_0x2e43;
    L_0x2e30:
        r4 = r115.isVoice();
        if (r4 != 0) goto L_0x2e3c;
    L_0x2e36:
        r4 = r115.isMusic();
        if (r4 == 0) goto L_0x2e43;
    L_0x2e3c:
        r4 = 0;
        r6 = 1;
        r0 = r37;
        r0.updateButtonState(r4, r6);
    L_0x2e43:
        r19 = r19 + 1;
        goto L_0x2e10;
    L_0x2e46:
        r4 = org.telegram.messenger.NotificationCenter.messagePlayingGoingToStop;
        r0 = r182;
        if (r0 != r4) goto L_0x2f1d;
    L_0x2e4c:
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Boolean) r4;
        r91 = r4.booleanValue();
        if (r91 == 0) goto L_0x2e73;
    L_0x2e57:
        r0 = r181;
        r4 = r0.contentView;
        r0 = r181;
        r6 = r0.videoPlayerContainer;
        r4.removeView(r6);
        r4 = 0;
        r0 = r181;
        r0.videoPlayerContainer = r4;
        r4 = 0;
        r0 = r181;
        r0.videoTextureView = r4;
        r4 = 0;
        r0 = r181;
        r0.aspectRatioFrameLayout = r4;
        goto L_0x0072;
    L_0x2e73:
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x0072;
    L_0x2e79:
        r0 = r181;
        r4 = r0.videoPlayerContainer;
        if (r4 == 0) goto L_0x0072;
    L_0x2e7f:
        r0 = r181;
        r4 = r0.videoPlayerContainer;
        r4 = r4.getTag();
        if (r4 == 0) goto L_0x0072;
    L_0x2e89:
        r4 = 0;
        r114 = r184[r4];
        r114 = (org.telegram.messenger.MessageObject) r114;
        r0 = r181;
        r4 = r0.chatListView;
        r46 = r4.getChildCount();
        r19 = 0;
    L_0x2e98:
        r0 = r19;
        r1 = r46;
        if (r0 >= r1) goto L_0x0072;
    L_0x2e9e:
        r0 = r181;
        r4 = r0.chatListView;
        r0 = r19;
        r177 = r4.getChildAt(r0);
        r0 = r177;
        r4 = r0 instanceof org.telegram.ui.Cells.ChatMessageCell;
        if (r4 == 0) goto L_0x2var_;
    L_0x2eae:
        r37 = r177;
        r37 = (org.telegram.ui.Cells.ChatMessageCell) r37;
        r115 = r37.getMessageObject();
        r0 = r114;
        r1 = r115;
        if (r0 != r1) goto L_0x2var_;
    L_0x2ebc:
        r4 = r37.getPhotoImage();
        r21 = r4.getAnimation();
        if (r21 == 0) goto L_0x0072;
    L_0x2ec6:
        r30 = r21.getAnimatedBitmap();
        if (r30 == 0) goto L_0x2ef2;
    L_0x2ecc:
        r0 = r181;
        r4 = r0.videoTextureView;	 Catch:{ Throwable -> 0x2var_ }
        r6 = r30.getWidth();	 Catch:{ Throwable -> 0x2var_ }
        r7 = r30.getHeight();	 Catch:{ Throwable -> 0x2var_ }
        r159 = r4.getBitmap(r6, r7);	 Catch:{ Throwable -> 0x2var_ }
        r36 = new android.graphics.Canvas;	 Catch:{ Throwable -> 0x2var_ }
        r0 = r36;
        r1 = r30;
        r0.<init>(r1);	 Catch:{ Throwable -> 0x2var_ }
        r4 = 0;
        r6 = 0;
        r7 = 0;
        r0 = r36;
        r1 = r159;
        r0.drawBitmap(r1, r4, r6, r7);	 Catch:{ Throwable -> 0x2var_ }
        r159.recycle();	 Catch:{ Throwable -> 0x2var_ }
    L_0x2ef2:
        r0 = r114;
        r4 = r0.audioProgressMs;
        r6 = (long) r4;
        r0 = r181;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.FileLoader.getInstance(r4);
        r8 = r114.getDocument();
        r9 = 1;
        r4 = r4.isLoadingVideo(r8, r9);
        if (r4 != 0) goto L_0x2var_;
    L_0x2f0a:
        r4 = 1;
    L_0x2f0b:
        r0 = r21;
        r0.seekTo(r6, r4);
        goto L_0x0072;
    L_0x2var_:
        r65 = move-exception;
        org.telegram.messenger.FileLog.e(r65);
        goto L_0x2ef2;
    L_0x2var_:
        r4 = 0;
        goto L_0x2f0b;
    L_0x2var_:
        r19 = r19 + 1;
        goto L_0x2e98;
    L_0x2f1d:
        r4 = org.telegram.messenger.NotificationCenter.messagePlayingDidReset;
        r0 = r182;
        if (r0 == r4) goto L_0x2var_;
    L_0x2var_:
        r4 = org.telegram.messenger.NotificationCenter.messagePlayingPlayStateChanged;
        r0 = r182;
        if (r0 != r4) goto L_0x3006;
    L_0x2var_:
        r4 = org.telegram.messenger.NotificationCenter.messagePlayingDidReset;
        r0 = r182;
        if (r0 != r4) goto L_0x2var_;
    L_0x2f2f:
        r181.destroyTextureView();
    L_0x2var_:
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x0072;
    L_0x2var_:
        r0 = r181;
        r4 = r0.chatListView;
        r46 = r4.getChildCount();
        r19 = 0;
    L_0x2var_:
        r0 = r19;
        r1 = r46;
        if (r0 >= r1) goto L_0x2fc6;
    L_0x2var_:
        r0 = r181;
        r4 = r0.chatListView;
        r0 = r19;
        r177 = r4.getChildAt(r0);
        r0 = r177;
        r4 = r0 instanceof org.telegram.ui.Cells.ChatMessageCell;
        if (r4 == 0) goto L_0x2var_;
    L_0x2var_:
        r37 = r177;
        r37 = (org.telegram.ui.Cells.ChatMessageCell) r37;
        r114 = r37.getMessageObject();
        if (r114 == 0) goto L_0x2var_;
    L_0x2var_:
        r4 = r114.isVoice();
        if (r4 != 0) goto L_0x2f6e;
    L_0x2var_:
        r4 = r114.isMusic();
        if (r4 == 0) goto L_0x2var_;
    L_0x2f6e:
        r4 = 0;
        r6 = 1;
        r7 = 0;
        r0 = r37;
        r0.updateButtonState(r4, r6, r7);
    L_0x2var_:
        r19 = r19 + 1;
        goto L_0x2var_;
    L_0x2var_:
        r4 = r114.isVideo();
        if (r4 == 0) goto L_0x2fad;
    L_0x2f7f:
        r4 = 0;
        r6 = 1;
        r7 = 0;
        r0 = r37;
        r0.updateButtonState(r4, r6, r7);
        r4 = org.telegram.messenger.MediaController.getInstance();
        r0 = r114;
        r4 = r4.isPlayingMessage(r0);
        if (r4 != 0) goto L_0x2var_;
    L_0x2var_:
        r4 = org.telegram.messenger.MediaController.getInstance();
        r0 = r114;
        r4 = r4.isGoingToShowMessageObject(r0);
        if (r4 != 0) goto L_0x2var_;
    L_0x2f9f:
        r4 = r37.getPhotoImage();
        r21 = r4.getAnimation();
        if (r21 == 0) goto L_0x2var_;
    L_0x2fa9:
        r21.start();
        goto L_0x2var_;
    L_0x2fad:
        r4 = r114.isRoundVideo();
        if (r4 == 0) goto L_0x2var_;
    L_0x2fb3:
        r4 = org.telegram.messenger.MediaController.getInstance();
        r0 = r114;
        r4 = r4.isPlayingMessage(r0);
        if (r4 != 0) goto L_0x2var_;
    L_0x2fbf:
        r4 = 1;
        r0 = r37;
        r0.checkVideoPlayback(r4);
        goto L_0x2var_;
    L_0x2fc6:
        r0 = r181;
        r4 = r0.mentionListView;
        r46 = r4.getChildCount();
        r19 = 0;
    L_0x2fd0:
        r0 = r19;
        r1 = r46;
        if (r0 >= r1) goto L_0x0072;
    L_0x2fd6:
        r0 = r181;
        r4 = r0.mentionListView;
        r0 = r19;
        r177 = r4.getChildAt(r0);
        r0 = r177;
        r4 = r0 instanceof org.telegram.ui.Cells.ContextLinkCell;
        if (r4 == 0) goto L_0x3003;
    L_0x2fe6:
        r37 = r177;
        r37 = (org.telegram.ui.Cells.ContextLinkCell) r37;
        r114 = r37.getMessageObject();
        if (r114 == 0) goto L_0x3003;
    L_0x2ff0:
        r4 = r114.isVoice();
        if (r4 != 0) goto L_0x2ffc;
    L_0x2ff6:
        r4 = r114.isMusic();
        if (r4 == 0) goto L_0x3003;
    L_0x2ffc:
        r4 = 0;
        r6 = 1;
        r0 = r37;
        r0.updateButtonState(r4, r6);
    L_0x3003:
        r19 = r19 + 1;
        goto L_0x2fd0;
    L_0x3006:
        r4 = org.telegram.messenger.NotificationCenter.messagePlayingProgressDidChanged;
        r0 = r182;
        if (r0 != r4) goto L_0x3084;
    L_0x300c:
        r4 = 0;
        r118 = r184[r4];
        r118 = (java.lang.Integer) r118;
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x0072;
    L_0x3017:
        r0 = r181;
        r4 = r0.chatListView;
        r46 = r4.getChildCount();
        r19 = 0;
    L_0x3021:
        r0 = r19;
        r1 = r46;
        if (r0 >= r1) goto L_0x0072;
    L_0x3027:
        r0 = r181;
        r4 = r0.chatListView;
        r0 = r19;
        r177 = r4.getChildAt(r0);
        r0 = r177;
        r4 = r0 instanceof org.telegram.ui.Cells.ChatMessageCell;
        if (r4 == 0) goto L_0x3081;
    L_0x3037:
        r37 = r177;
        r37 = (org.telegram.ui.Cells.ChatMessageCell) r37;
        r142 = r37.getMessageObject();
        if (r142 == 0) goto L_0x3081;
    L_0x3041:
        r4 = r142.getId();
        r6 = r118.intValue();
        if (r4 != r6) goto L_0x3081;
    L_0x304b:
        r4 = org.telegram.messenger.MediaController.getInstance();
        r141 = r4.getPlayingMessageObject();
        if (r141 == 0) goto L_0x0072;
    L_0x3055:
        r0 = r141;
        r4 = r0.audioProgress;
        r0 = r142;
        r0.audioProgress = r4;
        r0 = r141;
        r4 = r0.audioProgressSec;
        r0 = r142;
        r0.audioProgressSec = r4;
        r0 = r141;
        r4 = r0.audioPlayerDuration;
        r0 = r142;
        r0.audioPlayerDuration = r4;
        r37.updatePlayingMessageProgress();
        r0 = r181;
        r4 = r0.drawLaterRoundProgressCell;
        r0 = r37;
        if (r4 != r0) goto L_0x0072;
    L_0x3078:
        r0 = r181;
        r4 = r0.fragmentView;
        r4.invalidate();
        goto L_0x0072;
    L_0x3081:
        r19 = r19 + 1;
        goto L_0x3021;
    L_0x3084:
        r4 = org.telegram.messenger.NotificationCenter.didUpdatePollResults;
        r0 = r182;
        if (r0 != r4) goto L_0x30e7;
    L_0x308a:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r144 = r4.longValue();
        r0 = r181;
        r4 = r0.polls;
        r0 = r144;
        r27 = r4.get(r0);
        r27 = (java.util.ArrayList) r27;
        if (r27 == 0) goto L_0x0072;
    L_0x30a1:
        r4 = 1;
        r143 = r184[r4];
        r143 = (org.telegram.tgnet.TLRPC.TL_poll) r143;
        r4 = 2;
        r153 = r184[r4];
        r153 = (org.telegram.tgnet.TLRPC.TL_pollResults) r153;
        r19 = 0;
        r18 = r27.size();
    L_0x30b1:
        r0 = r19;
        r1 = r18;
        if (r0 >= r1) goto L_0x0072;
    L_0x30b7:
        r0 = r27;
        r1 = r19;
        r132 = r0.get(r1);
        r132 = (org.telegram.messenger.MessageObject) r132;
        r0 = r132;
        r4 = r0.messageOwner;
        r0 = r4.media;
        r107 = r0;
        r107 = (org.telegram.tgnet.TLRPC.TL_messageMediaPoll) r107;
        if (r143 == 0) goto L_0x30d3;
    L_0x30cd:
        r0 = r143;
        r1 = r107;
        r1.poll = r0;
    L_0x30d3:
        r0 = r107;
        r1 = r153;
        org.telegram.messenger.MessageObject.updatePollResults(r0, r1);
        r0 = r181;
        r4 = r0.chatAdapter;
        r6 = 1;
        r0 = r132;
        r4.updateRowWithMessageObject(r0, r6);
        r19 = r19 + 1;
        goto L_0x30b1;
    L_0x30e7:
        r4 = org.telegram.messenger.NotificationCenter.updateMessageMedia;
        r0 = r182;
        if (r0 != r4) goto L_0x327a;
    L_0x30ed:
        r4 = 0;
        r111 = r184[r4];
        r111 = (org.telegram.tgnet.TLRPC.Message) r111;
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r0 = r111;
        r6 = r0.id;
        r68 = r4.get(r6);
        r68 = (org.telegram.messenger.MessageObject) r68;
        if (r68 == 0) goto L_0x0072;
    L_0x3105:
        r0 = r68;
        r4 = r0.messageOwner;
        r0 = r111;
        r6 = r0.media;
        r4.media = r6;
        r0 = r68;
        r4 = r0.messageOwner;
        r0 = r111;
        r6 = r0.attachPath;
        r4.attachPath = r6;
        r4 = 0;
        r0 = r68;
        r0.generateThumbs(r4);
        r6 = r68.getGroupId();
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x3205;
    L_0x3129:
        r0 = r68;
        r4 = r0.photoThumbs;
        if (r4 == 0) goto L_0x3139;
    L_0x312f:
        r0 = r68;
        r4 = r0.photoThumbs;
        r4 = r4.isEmpty();
        if (r4 == 0) goto L_0x3205;
    L_0x3139:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r6 = r68.getGroupId();
        r79 = r4.get(r6);
        r79 = (org.telegram.messenger.MessageObject.GroupedMessages) r79;
        if (r79 == 0) goto L_0x3205;
    L_0x3149:
        r0 = r79;
        r4 = r0.messages;
        r0 = r68;
        r86 = r4.indexOf(r0);
        if (r86 < 0) goto L_0x3205;
    L_0x3155:
        r0 = r79;
        r4 = r0.messages;
        r169 = r4.size();
        r114 = 0;
        if (r86 <= 0) goto L_0x31e7;
    L_0x3161:
        r0 = r79;
        r4 = r0.messages;
        r4 = r4.size();
        r4 = r4 + -1;
        r0 = r86;
        if (r0 >= r4) goto L_0x31e7;
    L_0x316f:
        r158 = new org.telegram.messenger.MessageObject$GroupedMessages;
        r158.<init>();
        r4 = org.telegram.messenger.Utilities.random;
        r6 = r4.nextLong();
        r0 = r158;
        r0.groupId = r6;
        r0 = r158;
        r4 = r0.messages;
        r0 = r79;
        r6 = r0.messages;
        r7 = r86 + 1;
        r0 = r79;
        r8 = r0.messages;
        r8 = r8.size();
        r6 = r6.subList(r7, r8);
        r4.addAll(r6);
        r29 = 0;
    L_0x3199:
        r0 = r158;
        r4 = r0.messages;
        r4 = r4.size();
        r0 = r29;
        if (r0 >= r4) goto L_0x31c3;
    L_0x31a5:
        r0 = r158;
        r4 = r0.messages;
        r0 = r29;
        r4 = r4.get(r0);
        r4 = (org.telegram.messenger.MessageObject) r4;
        r0 = r158;
        r6 = r0.groupId;
        r4.localGroupId = r6;
        r0 = r79;
        r4 = r0.messages;
        r6 = r86 + 1;
        r4.remove(r6);
        r29 = r29 + 1;
        goto L_0x3199;
    L_0x31c3:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r0 = r158;
        r6 = r0.groupId;
        r0 = r158;
        r4.put(r6, r0);
        r0 = r158;
        r4 = r0.messages;
        r0 = r158;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -1;
        r114 = r4.get(r6);
        r114 = (org.telegram.messenger.MessageObject) r114;
        r158.calculate();
    L_0x31e7:
        r0 = r79;
        r4 = r0.messages;
        r0 = r86;
        r4.remove(r0);
        r0 = r79;
        r4 = r0.messages;
        r4 = r4.isEmpty();
        if (r4 == 0) goto L_0x3236;
    L_0x31fa:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r0 = r79;
        r6 = r0.groupId;
        r4.remove(r6);
    L_0x3205:
        r0 = r111;
        r4 = r0.media;
        r4 = r4.ttl_seconds;
        if (r4 == 0) goto L_0x3275;
    L_0x320d:
        r0 = r111;
        r4 = r0.media;
        r4 = r4.photo;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_photoEmpty;
        if (r4 != 0) goto L_0x3221;
    L_0x3217:
        r0 = r111;
        r4 = r0.media;
        r4 = r4.document;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_documentEmpty;
        if (r4 == 0) goto L_0x3275;
    L_0x3221:
        r68.setType();
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x0072;
    L_0x322a:
        r0 = r181;
        r4 = r0.chatAdapter;
        r6 = 0;
        r0 = r68;
        r4.updateRowWithMessageObject(r0, r6);
        goto L_0x0072;
    L_0x3236:
        if (r114 != 0) goto L_0x324c;
    L_0x3238:
        r0 = r79;
        r4 = r0.messages;
        r0 = r79;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -1;
        r114 = r4.get(r6);
        r114 = (org.telegram.messenger.MessageObject) r114;
    L_0x324c:
        r79.calculate();
        r0 = r181;
        r4 = r0.messages;
        r0 = r114;
        r88 = r4.indexOf(r0);
        if (r88 < 0) goto L_0x3205;
    L_0x325b:
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x3205;
    L_0x3261:
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.messagesStartRow;
        r6 = r6 + r88;
        r0 = r169;
        r4.notifyItemRangeChanged(r6, r0);
        goto L_0x3205;
    L_0x3275:
        r181.updateVisibleRows();
        goto L_0x0072;
    L_0x327a:
        r4 = org.telegram.messenger.NotificationCenter.replaceMessagesObjects;
        r0 = r182;
        if (r0 != r4) goto L_0x35c5;
    L_0x3280:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r60 = r4.longValue();
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 == 0) goto L_0x3299;
    L_0x3291:
        r0 = r181;
        r6 = r0.mergeDialogId;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x3299:
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 != 0) goto L_0x3447;
    L_0x32a1:
        r101 = 0;
    L_0x32a3:
        r4 = 1;
        r116 = r184[r4];
        r116 = (java.util.ArrayList) r116;
        r124 = 0;
        r19 = 0;
    L_0x32ac:
        r4 = r116.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x3554;
    L_0x32b4:
        r0 = r116;
        r1 = r19;
        r114 = r0.get(r1);
        r114 = (org.telegram.messenger.MessageObject) r114;
        r0 = r181;
        r4 = r0.messagesDict;
        r4 = r4[r101];
        r6 = r114.getId();
        r133 = r4.get(r6);
        r133 = (org.telegram.messenger.MessageObject) r133;
        r0 = r181;
        r4 = r0.pinnedMessageObject;
        if (r4 == 0) goto L_0x32ee;
    L_0x32d4:
        r0 = r181;
        r4 = r0.pinnedMessageObject;
        r4 = r4.getId();
        r6 = r114.getId();
        if (r4 != r6) goto L_0x32ee;
    L_0x32e2:
        r0 = r114;
        r1 = r181;
        r1.pinnedMessageObject = r0;
        r4 = 1;
        r0 = r181;
        r0.updatePinnedMessageView(r4);
    L_0x32ee:
        if (r133 == 0) goto L_0x34c5;
    L_0x32f0:
        r0 = r181;
        r1 = r114;
        r2 = r133;
        r0.addToPolls(r1, r2);
        r0 = r114;
        r4 = r0.type;
        if (r4 < 0) goto L_0x3462;
    L_0x32ff:
        r0 = r133;
        r4 = r0.replyMessageObject;
        if (r4 == 0) goto L_0x331d;
    L_0x3305:
        r0 = r133;
        r4 = r0.replyMessageObject;
        r0 = r114;
        r0.replyMessageObject = r4;
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionGameScore;
        if (r4 == 0) goto L_0x344b;
    L_0x3317:
        r4 = 0;
        r0 = r114;
        r0.generateGameMessageText(r4);
    L_0x331d:
        r4 = r133.isEditing();
        if (r4 != 0) goto L_0x334d;
    L_0x3323:
        r4 = r133.getFileName();
        r6 = r114.getFileName();
        r4 = r4.equals(r6);
        if (r4 == 0) goto L_0x345d;
    L_0x3331:
        r0 = r114;
        r4 = r0.messageOwner;
        r0 = r133;
        r6 = r0.messageOwner;
        r6 = r6.attachPath;
        r4.attachPath = r6;
        r0 = r133;
        r4 = r0.attachPathExists;
        r0 = r114;
        r0.attachPathExists = r4;
        r0 = r133;
        r4 = r0.mediaExists;
        r0 = r114;
        r0.mediaExists = r4;
    L_0x334d:
        r0 = r181;
        r4 = r0.messagesDict;
        r4 = r4[r101];
        r6 = r133.getId();
        r0 = r114;
        r4.put(r6, r0);
    L_0x335c:
        r0 = r181;
        r4 = r0.messages;
        r0 = r133;
        r88 = r4.indexOf(r0);
        if (r88 < 0) goto L_0x34c5;
    L_0x3368:
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r133;
        r6 = r0.dateKey;
        r58 = r4.get(r6);
        r58 = (java.util.ArrayList) r58;
        r89 = -1;
        if (r58 == 0) goto L_0x3382;
    L_0x337a:
        r0 = r58;
        r1 = r133;
        r89 = r0.indexOf(r1);
    L_0x3382:
        r6 = r133.getGroupId();
        r8 = 0;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x3492;
    L_0x338c:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r6 = r133.getGroupId();
        r79 = r4.get(r6);
        r79 = (org.telegram.messenger.MessageObject.GroupedMessages) r79;
        if (r79 == 0) goto L_0x3492;
    L_0x339c:
        r0 = r79;
        r4 = r0.messages;
        r0 = r133;
        r86 = r4.indexOf(r0);
        if (r86 < 0) goto L_0x3492;
    L_0x33a8:
        r6 = r133.getGroupId();
        r8 = r114.getGroupId();
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 == 0) goto L_0x33c1;
    L_0x33b4:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r6 = r114.getGroupId();
        r0 = r79;
        r4.put(r6, r0);
    L_0x33c1:
        r0 = r114;
        r4 = r0.photoThumbs;
        if (r4 == 0) goto L_0x33d1;
    L_0x33c7:
        r0 = r114;
        r4 = r0.photoThumbs;
        r4 = r4.isEmpty();
        if (r4 == 0) goto L_0x34c9;
    L_0x33d1:
        if (r124 != 0) goto L_0x33d8;
    L_0x33d3:
        r124 = new android.util.LongSparseArray;
        r124.<init>();
    L_0x33d8:
        r0 = r79;
        r6 = r0.groupId;
        r0 = r124;
        r1 = r79;
        r0.put(r6, r1);
        if (r86 <= 0) goto L_0x3489;
    L_0x33e5:
        r0 = r79;
        r4 = r0.messages;
        r4 = r4.size();
        r4 = r4 + -1;
        r0 = r86;
        if (r0 >= r4) goto L_0x3489;
    L_0x33f3:
        r158 = new org.telegram.messenger.MessageObject$GroupedMessages;
        r158.<init>();
        r4 = org.telegram.messenger.Utilities.random;
        r6 = r4.nextLong();
        r0 = r158;
        r0.groupId = r6;
        r0 = r158;
        r4 = r0.messages;
        r0 = r79;
        r6 = r0.messages;
        r7 = r86 + 1;
        r0 = r79;
        r8 = r0.messages;
        r8 = r8.size();
        r6 = r6.subList(r7, r8);
        r4.addAll(r6);
        r29 = 0;
    L_0x341d:
        r0 = r158;
        r4 = r0.messages;
        r4 = r4.size();
        r0 = r29;
        if (r0 >= r4) goto L_0x3471;
    L_0x3429:
        r0 = r158;
        r4 = r0.messages;
        r0 = r29;
        r4 = r4.get(r0);
        r4 = (org.telegram.messenger.MessageObject) r4;
        r0 = r158;
        r6 = r0.groupId;
        r4.localGroupId = r6;
        r0 = r79;
        r4 = r0.messages;
        r6 = r86 + 1;
        r4.remove(r6);
        r29 = r29 + 1;
        goto L_0x341d;
    L_0x3447:
        r101 = 1;
        goto L_0x32a3;
    L_0x344b:
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionPaymentSent;
        if (r4 == 0) goto L_0x331d;
    L_0x3455:
        r4 = 0;
        r0 = r114;
        r0.generatePaymentSentMessageText(r4);
        goto L_0x331d;
    L_0x345d:
        r114.checkMediaExistance();
        goto L_0x334d;
    L_0x3462:
        r0 = r181;
        r4 = r0.messagesDict;
        r4 = r4[r101];
        r6 = r133.getId();
        r4.remove(r6);
        goto L_0x335c;
    L_0x3471:
        r0 = r158;
        r6 = r0.groupId;
        r0 = r124;
        r1 = r158;
        r0.put(r6, r1);
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r0 = r158;
        r6 = r0.groupId;
        r0 = r158;
        r4.put(r6, r0);
    L_0x3489:
        r0 = r79;
        r4 = r0.messages;
        r0 = r86;
        r4.remove(r0);
    L_0x3492:
        r0 = r114;
        r4 = r0.type;
        if (r4 < 0) goto L_0x3500;
    L_0x3498:
        r0 = r181;
        r4 = r0.messages;
        r0 = r88;
        r1 = r114;
        r4.set(r0, r1);
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x34ba;
    L_0x34a9:
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.messagesStartRow;
        r6 = r6 + r88;
        r4.updateRowAtPosition(r6);
    L_0x34ba:
        if (r89 < 0) goto L_0x34c5;
    L_0x34bc:
        r0 = r58;
        r1 = r89;
        r2 = r114;
        r0.set(r1, r2);
    L_0x34c5:
        r19 = r19 + 1;
        goto L_0x32ac;
    L_0x34c9:
        r0 = r79;
        r4 = r0.messages;
        r0 = r86;
        r1 = r114;
        r4.set(r0, r1);
        r0 = r79;
        r4 = r0.positions;
        r0 = r133;
        r136 = r4.remove(r0);
        r136 = (org.telegram.messenger.MessageObject.GroupedMessagePosition) r136;
        if (r136 == 0) goto L_0x34ed;
    L_0x34e2:
        r0 = r79;
        r4 = r0.positions;
        r0 = r114;
        r1 = r136;
        r4.put(r0, r1);
    L_0x34ed:
        if (r124 != 0) goto L_0x34f4;
    L_0x34ef:
        r124 = new android.util.LongSparseArray;
        r124.<init>();
    L_0x34f4:
        r0 = r79;
        r6 = r0.groupId;
        r0 = r124;
        r1 = r79;
        r0.put(r6, r1);
        goto L_0x3492;
    L_0x3500:
        r0 = r181;
        r4 = r0.messages;
        r0 = r88;
        r4.remove(r0);
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x3520;
    L_0x350f:
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.messagesStartRow;
        r6 = r6 + r88;
        r4.notifyItemRemoved(r6);
    L_0x3520:
        if (r89 < 0) goto L_0x34c5;
    L_0x3522:
        r0 = r58;
        r1 = r89;
        r0.remove(r1);
        r4 = r58.isEmpty();
        if (r4 == 0) goto L_0x34c5;
    L_0x352f:
        r0 = r181;
        r4 = r0.messagesByDays;
        r0 = r133;
        r6 = r0.dateKey;
        r4.remove(r6);
        r0 = r181;
        r4 = r0.messages;
        r0 = r88;
        r4.remove(r0);
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.messagesStartRow;
        r4.notifyItemRemoved(r6);
        goto L_0x34c5;
    L_0x3554:
        if (r124 == 0) goto L_0x0072;
    L_0x3556:
        r29 = 0;
    L_0x3558:
        r4 = r124.size();
        r0 = r29;
        if (r0 >= r4) goto L_0x0072;
    L_0x3560:
        r0 = r124;
        r1 = r29;
        r79 = r0.valueAt(r1);
        r79 = (org.telegram.messenger.MessageObject.GroupedMessages) r79;
        r0 = r79;
        r4 = r0.messages;
        r4 = r4.isEmpty();
        if (r4 == 0) goto L_0x3582;
    L_0x3574:
        r0 = r181;
        r4 = r0.groupedMessagesMap;
        r0 = r79;
        r6 = r0.groupId;
        r4.remove(r6);
    L_0x357f:
        r29 = r29 + 1;
        goto L_0x3558;
    L_0x3582:
        r79.calculate();
        r0 = r79;
        r4 = r0.messages;
        r0 = r79;
        r6 = r0.messages;
        r6 = r6.size();
        r6 = r6 + -1;
        r114 = r4.get(r6);
        r114 = (org.telegram.messenger.MessageObject) r114;
        r0 = r181;
        r4 = r0.messages;
        r0 = r114;
        r88 = r4.indexOf(r0);
        if (r88 < 0) goto L_0x357f;
    L_0x35a5:
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x357f;
    L_0x35ab:
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.messagesStartRow;
        r6 = r6 + r88;
        r0 = r79;
        r7 = r0.messages;
        r7 = r7.size();
        r4.notifyItemRangeChanged(r6, r7);
        goto L_0x357f;
    L_0x35c5:
        r4 = org.telegram.messenger.NotificationCenter.notificationsSettingsUpdated;
        r0 = r182;
        if (r0 != r4) goto L_0x35dd;
    L_0x35cb:
        r181.updateTitleIcons();
        r0 = r181;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x0072;
    L_0x35d8:
        r181.updateBottomOverlay();
        goto L_0x0072;
    L_0x35dd:
        r4 = org.telegram.messenger.NotificationCenter.replyMessagesDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x35f9;
    L_0x35e3:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r60 = r4.longValue();
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x35f4:
        r181.updateVisibleRows();
        goto L_0x0072;
    L_0x35f9:
        r4 = org.telegram.messenger.NotificationCenter.pinnedMessageDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x3647;
    L_0x35ff:
        r4 = 0;
        r111 = r184[r4];
        r111 = (org.telegram.messenger.MessageObject) r111;
        r6 = r111.getDialogId();
        r0 = r181;
        r8 = r0.dialog_id;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x3610:
        r0 = r181;
        r4 = r0.chatInfo;
        if (r4 == 0) goto L_0x3622;
    L_0x3616:
        r0 = r181;
        r4 = r0.chatInfo;
        r4 = r4.pinned_msg_id;
        r6 = r111.getId();
        if (r4 == r6) goto L_0x3634;
    L_0x3622:
        r0 = r181;
        r4 = r0.userInfo;
        if (r4 == 0) goto L_0x0072;
    L_0x3628:
        r0 = r181;
        r4 = r0.userInfo;
        r4 = r4.pinned_msg_id;
        r6 = r111.getId();
        if (r4 != r6) goto L_0x0072;
    L_0x3634:
        r0 = r111;
        r1 = r181;
        r1.pinnedMessageObject = r0;
        r4 = 0;
        r0 = r181;
        r0.loadingPinnedMessage = r4;
        r4 = 1;
        r0 = r181;
        r0.updatePinnedMessageView(r4);
        goto L_0x0072;
    L_0x3647:
        r4 = org.telegram.messenger.NotificationCenter.didReceivedWebpages;
        r0 = r182;
        if (r0 != r4) goto L_0x36c5;
    L_0x364d:
        r4 = 0;
        r28 = r184[r4];
        r28 = (java.util.ArrayList) r28;
        r172 = 0;
        r19 = 0;
    L_0x3656:
        r4 = r28.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x36be;
    L_0x365e:
        r0 = r28;
        r1 = r19;
        r111 = r0.get(r1);
        r111 = (org.telegram.tgnet.TLRPC.Message) r111;
        r60 = org.telegram.messenger.MessageObject.getDialogId(r111);
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 == 0) goto L_0x367f;
    L_0x3674:
        r0 = r181;
        r6 = r0.mergeDialogId;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 == 0) goto L_0x367f;
    L_0x367c:
        r19 = r19 + 1;
        goto L_0x3656;
    L_0x367f:
        r0 = r181;
        r6 = r0.messagesDict;
        r0 = r181;
        r8 = r0.dialog_id;
        r4 = (r60 > r8 ? 1 : (r60 == r8 ? 0 : -1));
        if (r4 != 0) goto L_0x36bc;
    L_0x368b:
        r4 = 0;
    L_0x368c:
        r4 = r6[r4];
        r0 = r111;
        r6 = r0.id;
        r51 = r4.get(r6);
        r51 = (org.telegram.messenger.MessageObject) r51;
        if (r51 == 0) goto L_0x367c;
    L_0x369a:
        r0 = r51;
        r4 = r0.messageOwner;
        r6 = new org.telegram.tgnet.TLRPC$TL_messageMediaWebPage;
        r6.<init>();
        r4.media = r6;
        r0 = r51;
        r4 = r0.messageOwner;
        r4 = r4.media;
        r0 = r111;
        r6 = r0.media;
        r6 = r6.webpage;
        r4.webpage = r6;
        r4 = 1;
        r0 = r51;
        r0.generateThumbs(r4);
        r172 = 1;
        goto L_0x367c;
    L_0x36bc:
        r4 = 1;
        goto L_0x368c;
    L_0x36be:
        if (r172 == 0) goto L_0x0072;
    L_0x36c0:
        r181.updateVisibleRows();
        goto L_0x0072;
    L_0x36c5:
        r4 = org.telegram.messenger.NotificationCenter.didReceivedWebpagesInUpdates;
        r0 = r182;
        if (r0 != r4) goto L_0x370e;
    L_0x36cb:
        r0 = r181;
        r4 = r0.foundWebPage;
        if (r4 == 0) goto L_0x0072;
    L_0x36d1:
        r4 = 0;
        r83 = r184[r4];
        r83 = (android.util.LongSparseArray) r83;
        r19 = 0;
    L_0x36d8:
        r4 = r83.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x0072;
    L_0x36e0:
        r0 = r83;
        r1 = r19;
        r178 = r0.valueAt(r1);
        r178 = (org.telegram.tgnet.TLRPC.WebPage) r178;
        r0 = r178;
        r6 = r0.id;
        r0 = r181;
        r4 = r0.foundWebPage;
        r8 = r4.id;
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 != 0) goto L_0x370b;
    L_0x36f8:
        r0 = r178;
        r4 = r0 instanceof org.telegram.tgnet.TLRPC.TL_webPageEmpty;
        if (r4 != 0) goto L_0x3709;
    L_0x36fe:
        r4 = 1;
    L_0x36ff:
        r6 = 0;
        r0 = r181;
        r1 = r178;
        r0.showFieldPanelForWebPage(r4, r1, r6);
        goto L_0x0072;
    L_0x3709:
        r4 = 0;
        goto L_0x36ff;
    L_0x370b:
        r19 = r19 + 1;
        goto L_0x36d8;
    L_0x370e:
        r4 = org.telegram.messenger.NotificationCenter.messagesReadContent;
        r0 = r182;
        if (r0 != r4) goto L_0x37c1;
    L_0x3714:
        r4 = 0;
        r26 = r184[r4];
        r26 = (java.util.ArrayList) r26;
        r172 = 0;
        r0 = r181;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x3759;
    L_0x3725:
        r0 = r181;
        r4 = r0.currentChat;
        r0 = r4.id;
        r49 = r0;
    L_0x372d:
        r19 = 0;
    L_0x372f:
        r4 = r26.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x37ba;
    L_0x3737:
        r0 = r26;
        r1 = r19;
        r4 = r0.get(r1);
        r4 = (java.lang.Long) r4;
        r118 = r4.longValue();
        r4 = 32;
        r6 = r118 >> r4;
        r0 = (int) r6;
        r40 = r0;
        if (r40 >= 0) goto L_0x3750;
    L_0x374e:
        r40 = 0;
    L_0x3750:
        r0 = r40;
        r1 = r49;
        if (r0 == r1) goto L_0x375c;
    L_0x3756:
        r19 = r19 + 1;
        goto L_0x372f;
    L_0x3759:
        r49 = 0;
        goto L_0x372d;
    L_0x375c:
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r0 = r118;
        r6 = (int) r0;
        r51 = r4.get(r6);
        r51 = (org.telegram.messenger.MessageObject) r51;
        if (r51 == 0) goto L_0x3756;
    L_0x376e:
        r51.setContentIsRead();
        r172 = 1;
        r0 = r51;
        r4 = r0.messageOwner;
        r4 = r4.mentioned;
        if (r4 == 0) goto L_0x3756;
    L_0x377b:
        r0 = r181;
        r4 = r0.newMentionsCount;
        r4 = r4 + -1;
        r0 = r181;
        r0.newMentionsCount = r4;
        r0 = r181;
        r4 = r0.newMentionsCount;
        if (r4 > 0) goto L_0x379d;
    L_0x378b:
        r4 = 0;
        r0 = r181;
        r0.newMentionsCount = r4;
        r4 = 1;
        r0 = r181;
        r0.hasAllMentionsLocal = r4;
        r4 = 0;
        r6 = 1;
        r0 = r181;
        r0.showMentionDownButton(r4, r6);
        goto L_0x3756;
    L_0x379d:
        r0 = r181;
        r4 = r0.mentiondownButtonCounter;
        r6 = "%d";
        r7 = 1;
        r7 = new java.lang.Object[r7];
        r8 = 0;
        r0 = r181;
        r9 = r0.newMentionsCount;
        r9 = java.lang.Integer.valueOf(r9);
        r7[r8] = r9;
        r6 = java.lang.String.format(r6, r7);
        r4.setText(r6);
        goto L_0x3756;
    L_0x37ba:
        if (r172 == 0) goto L_0x0072;
    L_0x37bc:
        r181.updateVisibleRows();
        goto L_0x0072;
    L_0x37c1:
        r4 = org.telegram.messenger.NotificationCenter.botInfoDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x3861;
    L_0x37c7:
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r81 = r4.intValue();
        r0 = r181;
        r4 = r0.classGuid;
        r0 = r81;
        if (r4 != r0) goto L_0x0072;
    L_0x37d8:
        r4 = 0;
        r90 = r184[r4];
        r90 = (org.telegram.tgnet.TLRPC.BotInfo) r90;
        r0 = r181;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x385c;
    L_0x37e3:
        r0 = r90;
        r4 = r0.commands;
        r4 = r4.isEmpty();
        if (r4 != 0) goto L_0x37fc;
    L_0x37ed:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 != 0) goto L_0x37fc;
    L_0x37f7:
        r4 = 1;
        r0 = r181;
        r0.hasBotsCommands = r4;
    L_0x37fc:
        r0 = r181;
        r4 = r0.botInfo;
        r0 = r90;
        r6 = r0.user_id;
        r0 = r90;
        r4.put(r6, r0);
        r0 = r181;
        r4 = r0.chatAdapter;
        if (r4 == 0) goto L_0x381e;
    L_0x380f:
        r0 = r181;
        r4 = r0.chatAdapter;
        r0 = r181;
        r6 = r0.chatAdapter;
        r6 = r6.botInfoRow;
        r4.notifyItemChanged(r6);
    L_0x381e:
        r0 = r181;
        r4 = r0.mentionsAdapter;
        if (r4 == 0) goto L_0x3847;
    L_0x3824:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x383c;
    L_0x382e:
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x3847;
    L_0x3834:
        r0 = r181;
        r4 = r0.currentChat;
        r4 = r4.megagroup;
        if (r4 == 0) goto L_0x3847;
    L_0x383c:
        r0 = r181;
        r4 = r0.mentionsAdapter;
        r0 = r181;
        r6 = r0.botInfo;
        r4.setBotInfo(r6);
    L_0x3847:
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        if (r4 == 0) goto L_0x385c;
    L_0x384d:
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        r0 = r181;
        r6 = r0.botsCount;
        r0 = r181;
        r7 = r0.hasBotsCommands;
        r4.setBotsCount(r6, r7);
    L_0x385c:
        r181.updateBotButtons();
        goto L_0x0072;
    L_0x3861:
        r4 = org.telegram.messenger.NotificationCenter.botKeyboardDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x38ca;
    L_0x3867:
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r8 = r4.longValue();
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x3878:
        r4 = 0;
        r111 = r184[r4];
        r111 = (org.telegram.tgnet.TLRPC.Message) r111;
        if (r111 == 0) goto L_0x389a;
    L_0x387f:
        r0 = r181;
        r4 = r0.userBlocked;
        if (r4 != 0) goto L_0x389a;
    L_0x3885:
        r4 = new org.telegram.messenger.MessageObject;
        r0 = r181;
        r6 = r0.currentAccount;
        r7 = 0;
        r0 = r111;
        r4.<init>(r6, r0, r7);
        r0 = r181;
        r0.botButtons = r4;
        r181.checkBotKeyboard();
        goto L_0x0072;
    L_0x389a:
        r4 = 0;
        r0 = r181;
        r0.botButtons = r4;
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        if (r4 == 0) goto L_0x0072;
    L_0x38a5:
        r0 = r181;
        r4 = r0.replyingMessageObject;
        if (r4 == 0) goto L_0x38bd;
    L_0x38ab:
        r0 = r181;
        r4 = r0.botReplyButtons;
        r0 = r181;
        r6 = r0.replyingMessageObject;
        if (r4 != r6) goto L_0x38bd;
    L_0x38b5:
        r4 = 0;
        r0 = r181;
        r0.botReplyButtons = r4;
        r181.hideFieldPanel();
    L_0x38bd:
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        r0 = r181;
        r6 = r0.botButtons;
        r4.setButtons(r6);
        goto L_0x0072;
    L_0x38ca:
        r4 = org.telegram.messenger.NotificationCenter.chatSearchResultsAvailable;
        r0 = r182;
        if (r0 != r4) goto L_0x3936;
    L_0x38d0:
        r0 = r181;
        r6 = r0.classGuid;
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r4 = r4.intValue();
        if (r6 != r4) goto L_0x0072;
    L_0x38df:
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r5 = r4.intValue();
        r4 = 3;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r60 = r4.longValue();
        if (r5 == 0) goto L_0x3904;
    L_0x38f3:
        r6 = 0;
        r7 = 1;
        r0 = r181;
        r8 = r0.dialog_id;
        r4 = (r60 > r8 ? 1 : (r60 == r8 ? 0 : -1));
        if (r4 != 0) goto L_0x3934;
    L_0x38fd:
        r8 = 0;
    L_0x38fe:
        r9 = 0;
        r4 = r181;
        r4.scrollToMessageId(r5, r6, r7, r8, r9);
    L_0x3904:
        r4 = 2;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r6 = r4.intValue();
        r4 = 4;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r7 = r4.intValue();
        r4 = 5;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r4 = r4.intValue();
        r0 = r181;
        r0.updateSearchButtons(r6, r7, r4);
        r0 = r181;
        r4 = r0.searchItem;
        if (r4 == 0) goto L_0x0072;
    L_0x392a:
        r0 = r181;
        r4 = r0.searchItem;
        r6 = 0;
        r4.setShowSearchProgress(r6);
        goto L_0x0072;
    L_0x3934:
        r8 = 1;
        goto L_0x38fe;
    L_0x3936:
        r4 = org.telegram.messenger.NotificationCenter.chatSearchResultsLoading;
        r0 = r182;
        if (r0 != r4) goto L_0x395b;
    L_0x393c:
        r0 = r181;
        r6 = r0.classGuid;
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r4 = r4.intValue();
        if (r6 != r4) goto L_0x0072;
    L_0x394b:
        r0 = r181;
        r4 = r0.searchItem;
        if (r4 == 0) goto L_0x0072;
    L_0x3951:
        r0 = r181;
        r4 = r0.searchItem;
        r6 = 1;
        r4.setShowSearchProgress(r6);
        goto L_0x0072;
    L_0x395b:
        r4 = org.telegram.messenger.NotificationCenter.didUpdatedMessagesViews;
        r0 = r182;
        if (r0 != r4) goto L_0x39bc;
    L_0x3961:
        r4 = 0;
        r41 = r184[r4];
        r41 = (android.util.SparseArray) r41;
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (int) r6;
        r0 = r41;
        r25 = r0.get(r4);
        r25 = (android.util.SparseIntArray) r25;
        if (r25 == 0) goto L_0x0072;
    L_0x3975:
        r172 = 0;
        r19 = 0;
    L_0x3979:
        r4 = r25.size();
        r0 = r19;
        if (r0 >= r4) goto L_0x39b5;
    L_0x3981:
        r0 = r25;
        r1 = r19;
        r5 = r0.keyAt(r1);
        r0 = r181;
        r4 = r0.messagesDict;
        r6 = 0;
        r4 = r4[r6];
        r114 = r4.get(r5);
        r114 = (org.telegram.messenger.MessageObject) r114;
        if (r114 == 0) goto L_0x39b2;
    L_0x3998:
        r0 = r25;
        r128 = r0.get(r5);
        r0 = r114;
        r4 = r0.messageOwner;
        r4 = r4.views;
        r0 = r128;
        if (r0 <= r4) goto L_0x39b2;
    L_0x39a8:
        r0 = r114;
        r4 = r0.messageOwner;
        r0 = r128;
        r4.views = r0;
        r172 = 1;
    L_0x39b2:
        r19 = r19 + 1;
        goto L_0x3979;
    L_0x39b5:
        if (r172 == 0) goto L_0x0072;
    L_0x39b7:
        r181.updateVisibleRows();
        goto L_0x0072;
    L_0x39bc:
        r4 = org.telegram.messenger.NotificationCenter.peerSettingsDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x39d8;
    L_0x39c2:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r60 = r4.longValue();
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x39d3:
        r181.updateSpamView();
        goto L_0x0072;
    L_0x39d8:
        r4 = org.telegram.messenger.NotificationCenter.newDraftReceived;
        r0 = r182;
        if (r0 != r4) goto L_0x39f7;
    L_0x39de:
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r60 = r4.longValue();
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = (r60 > r6 ? 1 : (r60 == r6 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x39ef:
        r4 = 1;
        r0 = r181;
        r0.applyDraftMaybe(r4);
        goto L_0x0072;
    L_0x39f7:
        r4 = org.telegram.messenger.NotificationCenter.userInfoDidLoad;
        r0 = r182;
        if (r0 != r4) goto L_0x3a5e;
    L_0x39fd:
        r4 = 0;
        r165 = r184[r4];
        r165 = (java.lang.Integer) r165;
        r0 = r181;
        r4 = r0.currentUser;
        if (r4 == 0) goto L_0x0072;
    L_0x3a08:
        r0 = r181;
        r4 = r0.currentUser;
        r4 = r4.id;
        r6 = r165.intValue();
        if (r4 != r6) goto L_0x0072;
    L_0x3a14:
        r4 = 1;
        r4 = r184[r4];
        r4 = (org.telegram.tgnet.TLRPC.TL_userFull) r4;
        r0 = r181;
        r0.userInfo = r4;
        r0 = r181;
        r4 = r0.headerItem;
        if (r4 == 0) goto L_0x3a34;
    L_0x3a23:
        r0 = r181;
        r4 = r0.userInfo;
        r4 = r4.phone_calls_available;
        if (r4 == 0) goto L_0x3a4c;
    L_0x3a2b:
        r0 = r181;
        r4 = r0.headerItem;
        r6 = 32;
        r4.showSubItem(r6);
    L_0x3a34:
        r4 = 2;
        r4 = r184[r4];
        r4 = r4 instanceof org.telegram.messenger.MessageObject;
        if (r4 == 0) goto L_0x3a56;
    L_0x3a3b:
        r4 = 2;
        r4 = r184[r4];
        r4 = (org.telegram.messenger.MessageObject) r4;
        r0 = r181;
        r0.pinnedMessageObject = r4;
        r4 = 0;
        r0 = r181;
        r0.updatePinnedMessageView(r4);
        goto L_0x0072;
    L_0x3a4c:
        r0 = r181;
        r4 = r0.headerItem;
        r6 = 32;
        r4.hideSubItem(r6);
        goto L_0x3a34;
    L_0x3a56:
        r4 = 1;
        r0 = r181;
        r0.updatePinnedMessageView(r4);
        goto L_0x0072;
    L_0x3a5e:
        r4 = org.telegram.messenger.NotificationCenter.didSetNewWallpapper;
        r0 = r182;
        if (r0 != r4) goto L_0x3ab5;
    L_0x3a64:
        r0 = r181;
        r4 = r0.fragmentView;
        if (r4 == 0) goto L_0x0072;
    L_0x3a6a:
        r0 = r181;
        r4 = r0.contentView;
        r6 = org.telegram.ui.ActionBar.Theme.getCachedWallpaper();
        r7 = org.telegram.ui.ActionBar.Theme.isWallpaperMotion();
        r4.setBackgroundImage(r6, r7);
        r0 = r181;
        r4 = r0.progressView2;
        r4 = r4.getBackground();
        r6 = org.telegram.ui.ActionBar.Theme.colorFilter;
        r4.setColorFilter(r6);
        r0 = r181;
        r4 = r0.emptyView;
        if (r4 == 0) goto L_0x3a99;
    L_0x3a8c:
        r0 = r181;
        r4 = r0.emptyView;
        r4 = r4.getBackground();
        r6 = org.telegram.ui.ActionBar.Theme.colorFilter;
        r4.setColorFilter(r6);
    L_0x3a99:
        r0 = r181;
        r4 = r0.bigEmptyView;
        if (r4 == 0) goto L_0x3aac;
    L_0x3a9f:
        r0 = r181;
        r4 = r0.bigEmptyView;
        r4 = r4.getBackground();
        r6 = org.telegram.ui.ActionBar.Theme.colorFilter;
        r4.setColorFilter(r6);
    L_0x3aac:
        r0 = r181;
        r4 = r0.chatListView;
        r4.invalidateViews();
        goto L_0x0072;
    L_0x3ab5:
        r4 = org.telegram.messenger.NotificationCenter.channelRightsUpdated;
        r0 = r182;
        if (r0 != r4) goto L_0x3aed;
    L_0x3abb:
        r4 = 0;
        r42 = r184[r4];
        r42 = (org.telegram.tgnet.TLRPC.Chat) r42;
        r0 = r181;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x0072;
    L_0x3ac6:
        r0 = r42;
        r4 = r0.id;
        r0 = r181;
        r6 = r0.currentChat;
        r6 = r6.id;
        if (r4 != r6) goto L_0x0072;
    L_0x3ad2:
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        if (r4 == 0) goto L_0x0072;
    L_0x3ad8:
        r0 = r42;
        r1 = r181;
        r1.currentChat = r0;
        r0 = r181;
        r4 = r0.chatActivityEnterView;
        r4.checkChannelRights();
        r181.checkRaiseSensors();
        r181.updateSecretStatus();
        goto L_0x0072;
    L_0x3aed:
        r4 = org.telegram.messenger.NotificationCenter.updateMentionsCount;
        r0 = r182;
        if (r0 != r4) goto L_0x3b52;
    L_0x3af3:
        r0 = r181;
        r6 = r0.dialog_id;
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Long) r4;
        r8 = r4.longValue();
        r4 = (r6 > r8 ? 1 : (r6 == r8 ? 0 : -1));
        if (r4 != 0) goto L_0x0072;
    L_0x3b04:
        r4 = 1;
        r4 = r184[r4];
        r4 = (java.lang.Integer) r4;
        r46 = r4.intValue();
        r0 = r181;
        r4 = r0.newMentionsCount;
        r0 = r46;
        if (r4 <= r0) goto L_0x0072;
    L_0x3b15:
        r0 = r46;
        r1 = r181;
        r1.newMentionsCount = r0;
        r0 = r181;
        r4 = r0.newMentionsCount;
        if (r4 > 0) goto L_0x3b34;
    L_0x3b21:
        r4 = 0;
        r0 = r181;
        r0.newMentionsCount = r4;
        r4 = 1;
        r0 = r181;
        r0.hasAllMentionsLocal = r4;
        r4 = 0;
        r6 = 1;
        r0 = r181;
        r0.showMentionDownButton(r4, r6);
        goto L_0x0072;
    L_0x3b34:
        r0 = r181;
        r4 = r0.mentiondownButtonCounter;
        r6 = "%d";
        r7 = 1;
        r7 = new java.lang.Object[r7];
        r8 = 0;
        r0 = r181;
        r9 = r0.newMentionsCount;
        r9 = java.lang.Integer.valueOf(r9);
        r7[r8] = r9;
        r6 = java.lang.String.format(r6, r7);
        r4.setText(r6);
        goto L_0x0072;
    L_0x3b52:
        r4 = org.telegram.messenger.NotificationCenter.audioRecordTooShort;
        r0 = r182;
        if (r0 != r4) goto L_0x3b69;
    L_0x3b58:
        r6 = 0;
        r4 = 0;
        r4 = r184[r4];
        r4 = (java.lang.Boolean) r4;
        r4 = r4.booleanValue();
        r0 = r181;
        r0.showVoiceHint(r6, r4);
        goto L_0x0072;
    L_0x3b69:
        r4 = org.telegram.messenger.NotificationCenter.videoLoadingStateChanged;
        r0 = r182;
        if (r0 != r4) goto L_0x0072;
    L_0x3b6f:
        r0 = r181;
        r4 = r0.chatListView;
        if (r4 == 0) goto L_0x0072;
    L_0x3b75:
        r4 = 0;
        r69 = r184[r4];
        r69 = (java.lang.String) r69;
        r0 = r181;
        r4 = r0.chatListView;
        r46 = r4.getChildCount();
        r19 = 0;
    L_0x3b84:
        r0 = r19;
        r1 = r46;
        if (r0 >= r1) goto L_0x0072;
    L_0x3b8a:
        r0 = r181;
        r4 = r0.chatListView;
        r0 = r19;
        r45 = r4.getChildAt(r0);
        r0 = r45;
        r4 = r0 instanceof org.telegram.ui.Cells.ChatMessageCell;
        if (r4 != 0) goto L_0x3b9d;
    L_0x3b9a:
        r19 = r19 + 1;
        goto L_0x3b84;
    L_0x3b9d:
        r37 = r45;
        r37 = (org.telegram.ui.Cells.ChatMessageCell) r37;
        r63 = r37.getStreamingMedia();
        if (r63 == 0) goto L_0x3b9a;
    L_0x3ba7:
        r4 = org.telegram.messenger.FileLoader.getAttachFileName(r63);
        r0 = r69;
        r4 = r4.equals(r0);
        if (r4 == 0) goto L_0x3b9a;
    L_0x3bb3:
        r4 = 0;
        r6 = 1;
        r7 = 0;
        r0 = r37;
        r0.updateButtonState(r4, r6, r7);
        goto L_0x3b9a;
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.didReceivedNotification(int, int, java.lang.Object[]):void");
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$didReceivedNotification$50$ChatActivity() {
        if (this.parentLayout != null) {
            this.parentLayout.resumeDelayedFragmentAnimation();
        }
    }

    private void checkSecretMessageForLocation(MessageObject messageObject) {
        if (messageObject.type == 4 && !this.locationAlertShown && !SharedConfig.isSecretMapPreviewSet()) {
            this.locationAlertShown = true;
            AlertsCreator.showSecretLocationAlert(getParentActivity(), this.currentAccount, new ChatActivity$$Lambda$40(this), true);
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$checkSecretMessageForLocation$51$ChatActivity() {
        int count = this.chatListView.getChildCount();
        for (int a = 0; a < count; a++) {
            View view = this.chatListView.getChildAt(a);
            if (view instanceof ChatMessageCell) {
                ChatMessageCell cell = (ChatMessageCell) view;
                if (cell.getMessageObject().type == 4) {
                    cell.forceResetMessageObject();
                }
            }
        }
    }

    private void clearHistory(boolean overwrite) {
        int a;
        this.messages.clear();
        this.waitingForLoad.clear();
        this.messagesByDays.clear();
        this.groupedMessagesMap.clear();
        for (a = 1; a >= 0; a--) {
            this.messagesDict[a].clear();
            if (this.currentEncryptedChat == null) {
                this.maxMessageId[a] = Integer.MAX_VALUE;
                this.minMessageId[a] = Integer.MIN_VALUE;
            } else {
                this.maxMessageId[a] = Integer.MIN_VALUE;
                this.minMessageId[a] = Integer.MAX_VALUE;
            }
            this.maxDate[a] = Integer.MIN_VALUE;
            this.minDate[a] = 0;
            this.selectedMessagesIds[a].clear();
            this.selectedMessagesCanCopyIds[a].clear();
            this.selectedMessagesCanStarIds[a].clear();
        }
        this.cantDeleteMessagesCount = 0;
        this.canEditMessagesCount = 0;
        this.actionBar.hideActionMode();
        updatePinnedMessageView(true);
        if (this.botButtons != null) {
            this.botButtons = null;
            if (this.chatActivityEnterView != null) {
                this.chatActivityEnterView.setButtons(null, false);
            }
        }
        if (overwrite) {
            if (this.chatAdapter != null) {
                this.progressView.setVisibility(this.chatAdapter.botInfoRow == -1 ? 0 : 4);
                this.chatListView.setEmptyView(null);
            }
            for (a = 0; a < 2; a++) {
                this.endReached[a] = false;
                this.cacheEndReached[a] = false;
                this.forwardEndReached[a] = true;
            }
            this.first = true;
            this.firstLoading = true;
            this.loading = true;
            this.startLoadFromMessageId = 0;
            this.needSelectFromMessageId = false;
            this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
            MessagesController instance = MessagesController.getInstance(this.currentAccount);
            long j = this.dialog_id;
            int i = AndroidUtilities.isTablet() ? 30 : 20;
            int i2 = this.classGuid;
            boolean isChannel = ChatObject.isChannel(this.currentChat);
            int i3 = this.lastLoadIndex;
            this.lastLoadIndex = i3 + 1;
            instance.loadMessages(j, i, 0, 0, true, 0, i2, 2, 0, isChannel, i3);
        } else if (this.progressView != null) {
            this.progressView.setVisibility(4);
            this.chatListView.setEmptyView(this.emptyViewContainer);
        }
        if (this.chatAdapter != null) {
            this.chatAdapter.notifyDataSetChanged();
        }
        if (this.currentEncryptedChat == null && this.currentUser != null && this.currentUser.bot && this.botUser == null) {
            this.botUser = "";
            updateBottomOverlay();
        }
    }

    public boolean processSwitchButton(TL_keyboardButtonSwitchInline button) {
        if (this.inlineReturn == 0 || button.same_peer || this.parentLayout == null) {
            return false;
        }
        String query = "@" + this.currentUser.username + " " + button.query;
        if (this.inlineReturn == this.dialog_id) {
            this.inlineReturn = 0;
            this.chatActivityEnterView.setFieldText(query);
        } else {
            DataQuery.getInstance(this.currentAccount).saveDraft(this.inlineReturn, query, null, null, false);
            if (this.parentLayout.fragmentsStack.size() > 1) {
                BaseFragment prevFragment = (BaseFragment) this.parentLayout.fragmentsStack.get(this.parentLayout.fragmentsStack.size() - 2);
                if ((prevFragment instanceof ChatActivity) && ((ChatActivity) prevFragment).dialog_id == this.inlineReturn) {
                    finishFragment();
                } else {
                    Bundle bundle = new Bundle();
                    int lower_part = (int) this.inlineReturn;
                    int high_part = (int) (this.inlineReturn >> 32);
                    if (lower_part == 0) {
                        bundle.putInt("enc_id", high_part);
                    } else if (lower_part > 0) {
                        bundle.putInt("user_id", lower_part);
                    } else if (lower_part < 0) {
                        bundle.putInt("chat_id", -lower_part);
                    }
                    presentFragment(new ChatActivity(bundle), true);
                }
            }
        }
        return true;
    }

    private void migrateToNewChat(MessageObject obj) {
        if (this.parentLayout != null) {
            int channelId = obj.messageOwner.action.channel_id;
            BaseFragment lastFragment = this.parentLayout.fragmentsStack.size() > 0 ? (BaseFragment) this.parentLayout.fragmentsStack.get(this.parentLayout.fragmentsStack.size() - 1) : null;
            int index = this.parentLayout.fragmentsStack.indexOf(this);
            ActionBarLayout actionBarLayout = this.parentLayout;
            if (index <= 0 || (lastFragment instanceof ChatActivity) || (lastFragment instanceof ProfileActivity) || !this.currentChat.creator) {
                AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$41(this, lastFragment, obj, actionBarLayout));
            } else {
                int N = actionBarLayout.fragmentsStack.size() - 1;
                for (int a = index; a < N; a++) {
                    BaseFragment fragment = (BaseFragment) actionBarLayout.fragmentsStack.get(a);
                    Bundle args;
                    if (fragment instanceof ChatActivity) {
                        Bundle bundle = new Bundle();
                        bundle.putInt("chat_id", channelId);
                        actionBarLayout.addFragmentToStack(new ChatActivity(bundle), a);
                        fragment.removeSelfFromStack();
                    } else if (fragment instanceof ProfileActivity) {
                        args = new Bundle();
                        args.putInt("chat_id", channelId);
                        actionBarLayout.addFragmentToStack(new ProfileActivity(args), a);
                        fragment.removeSelfFromStack();
                    } else if (fragment instanceof ChatEditActivity) {
                        args = new Bundle();
                        args.putInt("chat_id", channelId);
                        actionBarLayout.addFragmentToStack(new ChatEditActivity(args), a);
                        fragment.removeSelfFromStack();
                    } else if (fragment instanceof ChatUsersActivity) {
                        if (!((ChatUsersActivity) fragment).hasSelectType()) {
                            args = fragment.getArguments();
                            args.putInt("chat_id", channelId);
                            actionBarLayout.addFragmentToStack(new ChatUsersActivity(args), a);
                        }
                        fragment.removeSelfFromStack();
                    }
                }
            }
            AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$42(this, channelId), 1000);
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$migrateToNewChat$52$ChatActivity(BaseFragment lastFragment, MessageObject obj, ActionBarLayout actionBarLayout) {
        if (lastFragment != null) {
            NotificationCenter.getInstance(this.currentAccount).removeObserver(lastFragment, NotificationCenter.closeChats);
        }
        NotificationCenter.getInstance(this.currentAccount).postNotificationName(NotificationCenter.closeChats, new Object[0]);
        Bundle bundle = new Bundle();
        bundle.putInt("chat_id", obj.messageOwner.action.channel_id);
        actionBarLayout.presentFragment(new ChatActivity(bundle), true);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$migrateToNewChat$53$ChatActivity(int channelId) {
        MessagesController.getInstance(this.currentAccount).loadFullChat(channelId, 0, true);
    }

    private void addToPolls(MessageObject obj, MessageObject old) {
        long pollId = obj.getPollId();
        if (pollId != 0) {
            ArrayList<MessageObject> arrayList = (ArrayList) this.polls.get(pollId);
            if (arrayList == null) {
                arrayList = new ArrayList();
                this.polls.put(pollId, arrayList);
            }
            arrayList.add(obj);
            if (old != null) {
                arrayList.remove(old);
            }
        }
    }

    private void updateSearchButtons(int mask, int num, int count) {
        float f = 1.0f;
        if (this.searchUpButton != null) {
            boolean z;
            float f2;
            this.searchUpButton.setEnabled((mask & 1) != 0);
            ImageView imageView = this.searchDownButton;
            if ((mask & 2) != 0) {
                z = true;
            } else {
                z = false;
            }
            imageView.setEnabled(z);
            imageView = this.searchUpButton;
            if (this.searchUpButton.isEnabled()) {
                f2 = 1.0f;
            } else {
                f2 = 0.5f;
            }
            imageView.setAlpha(f2);
            ImageView imageView2 = this.searchDownButton;
            if (!this.searchDownButton.isEnabled()) {
                f = 0.5f;
            }
            imageView2.setAlpha(f);
            if (count < 0) {
                this.searchCountText.setText("");
            } else if (count == 0) {
                this.searchCountText.setText(LocaleController.getString("NoResult", NUM));
            } else {
                this.searchCountText.setText(LocaleController.formatString("Of", NUM, Integer.valueOf(num + 1), Integer.valueOf(count)));
            }
        }
    }

    public boolean needDelayOpenAnimation() {
        return this.firstLoading;
    }

    /* Access modifiers changed, original: protected */
    public void onBecomeFullyHidden() {
        if (this.undoView != null) {
            this.undoView.hide(true, false);
        }
    }

    public void onTransitionAnimationStart(boolean isOpen, boolean backward) {
        NotificationCenter.getInstance(this.currentAccount).setAllowedNotificationsDutingAnimation(new int[]{NotificationCenter.chatInfoDidLoad, NotificationCenter.dialogsNeedReload, NotificationCenter.closeChats, NotificationCenter.messagesDidLoad, NotificationCenter.botKeyboardDidLoad, NotificationCenter.userInfoDidLoad});
        NotificationCenter.getInstance(this.currentAccount).setAnimationInProgress(true);
        if (isOpen) {
            this.openAnimationEnded = false;
        }
    }

    public void onTransitionAnimationEnd(boolean isOpen, boolean backward) {
        NotificationCenter.getInstance(this.currentAccount).setAnimationInProgress(false);
        if (isOpen) {
            this.openAnimationEnded = true;
            if (VERSION.SDK_INT >= 21) {
                createChatAttachView();
            }
            if (this.chatActivityEnterView.hasRecordVideo() && !this.chatActivityEnterView.isSendButtonVisible()) {
                boolean isChannel = false;
                if (this.currentChat != null) {
                    if (!ChatObject.isChannel(this.currentChat) || this.currentChat.megagroup) {
                        isChannel = false;
                    } else {
                        isChannel = true;
                    }
                }
                SharedPreferences preferences = MessagesController.getGlobalMainSettings();
                String key = isChannel ? "needShowRoundHintChannel" : "needShowRoundHint";
                if (preferences.getBoolean(key, true) && Utilities.random.nextFloat() < 0.2f) {
                    showVoiceHint(false, this.chatActivityEnterView.isInVideoMode());
                    preferences.edit().putBoolean(key, false).commit();
                }
            }
            if (!backward && this.parentLayout != null) {
                int N = this.parentLayout.fragmentsStack.size() - 1;
                for (int a = 0; a < N; a++) {
                    BaseFragment fragment = (BaseFragment) this.parentLayout.fragmentsStack.get(a);
                    if (fragment != this && (fragment instanceof ChatActivity) && ((ChatActivity) fragment).dialog_id == this.dialog_id) {
                        fragment.removeSelfFromStack();
                        return;
                    }
                }
            }
        }
    }

    /* Access modifiers changed, original: protected */
    public void onDialogDismiss(Dialog dialog) {
        if (this.closeChatDialog != null && dialog == this.closeChatDialog) {
            MessagesController.getInstance(this.currentAccount).deleteDialog(this.dialog_id, 0);
            if (this.parentLayout == null || this.parentLayout.fragmentsStack.isEmpty() || this.parentLayout.fragmentsStack.get(this.parentLayout.fragmentsStack.size() - 1) == this) {
                finishFragment();
                return;
            }
            BaseFragment fragment = (BaseFragment) this.parentLayout.fragmentsStack.get(this.parentLayout.fragmentsStack.size() - 1);
            removeSelfFromStack();
            fragment.finishFragment();
        }
    }

    public boolean extendActionMode(Menu menu) {
        if (PhotoViewer.hasInstance() && PhotoViewer.getInstance().isVisible() ? PhotoViewer.getInstance().getSelectiongLength() == 0 || menu.findItem(16908321) == null : this.chatActivityEnterView.getSelectionLength() == 0 || menu.findItem(16908321) == null) {
            if (VERSION.SDK_INT >= 23) {
                menu.removeItem(16908341);
            }
            SpannableStringBuilder stringBuilder = new SpannableStringBuilder(LocaleController.getString("Bold", NUM));
            stringBuilder.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface("fonts/rmedium.ttf")), 0, stringBuilder.length(), 33);
            menu.add(NUM, NUM, 6, stringBuilder);
            stringBuilder = new SpannableStringBuilder(LocaleController.getString("Italic", NUM));
            stringBuilder.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface("fonts/ritalic.ttf")), 0, stringBuilder.length(), 33);
            menu.add(NUM, NUM, 7, stringBuilder);
            stringBuilder = new SpannableStringBuilder(LocaleController.getString("Mono", NUM));
            stringBuilder.setSpan(new TypefaceSpan(Typeface.MONOSPACE), 0, stringBuilder.length(), 33);
            menu.add(NUM, NUM, 8, stringBuilder);
            menu.add(NUM, NUM, 9, LocaleController.getString("CreateLink", NUM));
            menu.add(NUM, NUM, 10, LocaleController.getString("Regular", NUM));
        }
        return true;
    }

    private void updateBottomOverlay() {
        if (this.bottomOverlayChatText != null) {
            if (this.currentChat == null) {
                showBottomOverlayProgress(false, false);
                if (this.userBlocked) {
                    if (this.currentUser.bot) {
                        this.bottomOverlayChatText.setText(LocaleController.getString("BotUnblock", NUM));
                    } else {
                        this.bottomOverlayChatText.setText(LocaleController.getString("Unblock", NUM));
                    }
                    if (this.botButtons != null) {
                        this.botButtons = null;
                        if (this.chatActivityEnterView != null) {
                            if (this.replyingMessageObject != null && this.botReplyButtons == this.replyingMessageObject) {
                                this.botReplyButtons = null;
                                hideFieldPanel();
                            }
                            this.chatActivityEnterView.setButtons(this.botButtons, false);
                        }
                    }
                } else if (this.botUser == null || !this.currentUser.bot) {
                    this.bottomOverlayChatText.setText(LocaleController.getString("DeleteThisChat", NUM));
                } else {
                    this.bottomOverlayChatText.setText(LocaleController.getString("BotStart", NUM));
                    this.chatActivityEnterView.hidePopup(false);
                    if (getParentActivity() != null) {
                        AndroidUtilities.hideKeyboard(getParentActivity().getCurrentFocus());
                    }
                }
            } else if (!ChatObject.isChannel(this.currentChat) || (this.currentChat instanceof TL_channelForbidden)) {
                this.bottomOverlayChatText.setText(LocaleController.getString("DeleteThisGroup", NUM));
            } else if (!ChatObject.isNotInChat(this.currentChat)) {
                boolean z;
                if (MessagesController.getInstance(this.currentAccount).isDialogMuted(this.dialog_id)) {
                    this.bottomOverlayChatText.setText(LocaleController.getString("ChannelUnmute", NUM));
                } else {
                    this.bottomOverlayChatText.setText(LocaleController.getString("ChannelMute", NUM));
                }
                if (this.bottomOverlayProgress.getTag() != null) {
                    z = true;
                } else {
                    z = false;
                }
                showBottomOverlayProgress(false, z);
            } else if (MessagesController.getInstance(this.currentAccount).isJoiningChannel(this.currentChat.id)) {
                showBottomOverlayProgress(true, false);
            } else {
                this.bottomOverlayChatText.setText(LocaleController.getString("ChannelJoin", NUM));
                showBottomOverlayProgress(false, false);
            }
            if (this.inPreviewMode) {
                this.searchContainer.setVisibility(4);
                this.bottomOverlayChat.setVisibility(4);
                this.chatActivityEnterView.setFieldFocused(false);
                this.chatActivityEnterView.setVisibility(4);
            } else if (this.searchItem == null || this.searchItem.getVisibility() != 0) {
                this.searchContainer.setVisibility(4);
                if (this.muteItem != null) {
                    if (this.currentChat == null || !ChatObject.isNotInChat(this.currentChat)) {
                        this.muteItem.setVisibility(0);
                    } else {
                        this.muteItem.setVisibility(8);
                    }
                }
                if ((this.currentChat != null && (ChatObject.isNotInChat(this.currentChat) || !ChatObject.canWriteToChat(this.currentChat))) || (this.currentUser != null && (UserObject.isDeleted(this.currentUser) || this.userBlocked))) {
                    if (this.chatActivityEnterView.isEditingMessage()) {
                        this.chatActivityEnterView.setVisibility(0);
                        this.bottomOverlayChat.setVisibility(4);
                        this.chatActivityEnterView.setFieldFocused();
                        AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$43(this), 100);
                    } else {
                        this.bottomOverlayChat.setVisibility(0);
                        this.chatActivityEnterView.setFieldFocused(false);
                        this.chatActivityEnterView.setVisibility(4);
                        this.chatActivityEnterView.closeKeyboard();
                        if (this.stickersAdapter != null) {
                            this.stickersAdapter.hide();
                        }
                    }
                    this.attachItem.setVisibility(8);
                    this.editTextItem.setVisibility(8);
                    this.headerItem.setVisibility(0);
                } else if (this.botUser == null || !this.currentUser.bot) {
                    this.chatActivityEnterView.setVisibility(0);
                    this.bottomOverlayChat.setVisibility(4);
                } else {
                    this.bottomOverlayChat.setVisibility(0);
                    this.chatActivityEnterView.setVisibility(4);
                }
                if (this.topViewWasVisible == 1) {
                    this.chatActivityEnterView.showTopView(false, false);
                    this.topViewWasVisible = 0;
                }
            } else {
                this.searchContainer.setVisibility(0);
                this.bottomOverlayChat.setVisibility(4);
                this.chatActivityEnterView.setFieldFocused(false);
                this.chatActivityEnterView.setVisibility(4);
                if (this.chatActivityEnterView.isTopViewVisible()) {
                    this.topViewWasVisible = 1;
                    this.chatActivityEnterView.hideTopView(false);
                } else {
                    this.topViewWasVisible = 2;
                }
            }
            checkRaiseSensors();
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$updateBottomOverlay$54$ChatActivity() {
        this.chatActivityEnterView.openKeyboard();
    }

    public void showAlert(String name, String message) {
        if (this.alertView != null && name != null && message != null) {
            if (this.alertView.getTag() != null) {
                this.alertView.setTag(null);
                if (this.alertViewAnimator != null) {
                    this.alertViewAnimator.cancel();
                    this.alertViewAnimator = null;
                }
                this.alertView.setVisibility(0);
                this.alertViewAnimator = new AnimatorSet();
                AnimatorSet animatorSet = this.alertViewAnimator;
                Animator[] animatorArr = new Animator[1];
                animatorArr[0] = ObjectAnimator.ofFloat(this.alertView, "translationY", new float[]{0.0f});
                animatorSet.playTogether(animatorArr);
                this.alertViewAnimator.setDuration(200);
                this.alertViewAnimator.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        if (ChatActivity.this.alertViewAnimator != null && ChatActivity.this.alertViewAnimator.equals(animation)) {
                            ChatActivity.this.alertViewAnimator = null;
                        }
                    }

                    public void onAnimationCancel(Animator animation) {
                        if (ChatActivity.this.alertViewAnimator != null && ChatActivity.this.alertViewAnimator.equals(animation)) {
                            ChatActivity.this.alertViewAnimator = null;
                        }
                    }
                });
                this.alertViewAnimator.start();
            }
            this.alertNameTextView.setText(name);
            this.alertTextView.setText(Emoji.replaceEmoji(message.replace(10, ' '), this.alertTextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(14.0f), false));
            if (this.hideAlertViewRunnable != null) {
                AndroidUtilities.cancelRunOnUIThread(this.hideAlertViewRunnable);
            }
            AnonymousClass50 anonymousClass50 = new Runnable() {
                public void run() {
                    if (ChatActivity.this.hideAlertViewRunnable == this && ChatActivity.this.alertView.getTag() == null) {
                        ChatActivity.this.alertView.setTag(Integer.valueOf(1));
                        if (ChatActivity.this.alertViewAnimator != null) {
                            ChatActivity.this.alertViewAnimator.cancel();
                            ChatActivity.this.alertViewAnimator = null;
                        }
                        ChatActivity.this.alertViewAnimator = new AnimatorSet();
                        AnimatorSet access$20900 = ChatActivity.this.alertViewAnimator;
                        Animator[] animatorArr = new Animator[1];
                        animatorArr[0] = ObjectAnimator.ofFloat(ChatActivity.this.alertView, "translationY", new float[]{(float) (-AndroidUtilities.dp(50.0f))});
                        access$20900.playTogether(animatorArr);
                        ChatActivity.this.alertViewAnimator.setDuration(200);
                        ChatActivity.this.alertViewAnimator.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animation) {
                                if (ChatActivity.this.alertViewAnimator != null && ChatActivity.this.alertViewAnimator.equals(animation)) {
                                    ChatActivity.this.alertView.setVisibility(8);
                                    ChatActivity.this.alertViewAnimator = null;
                                }
                            }

                            public void onAnimationCancel(Animator animation) {
                                if (ChatActivity.this.alertViewAnimator != null && ChatActivity.this.alertViewAnimator.equals(animation)) {
                                    ChatActivity.this.alertViewAnimator = null;
                                }
                            }
                        });
                        ChatActivity.this.alertViewAnimator.start();
                    }
                }
            };
            this.hideAlertViewRunnable = anonymousClass50;
            AndroidUtilities.runOnUIThread(anonymousClass50, 3000);
        }
    }

    private void hidePinnedMessageView(boolean animated) {
        if (this.pinnedMessageView.getTag() == null) {
            this.pinnedMessageView.setTag(Integer.valueOf(1));
            if (this.pinnedMessageViewAnimator != null) {
                this.pinnedMessageViewAnimator.cancel();
                this.pinnedMessageViewAnimator = null;
            }
            if (animated) {
                this.pinnedMessageViewAnimator = new AnimatorSet();
                AnimatorSet animatorSet = this.pinnedMessageViewAnimator;
                Animator[] animatorArr = new Animator[1];
                animatorArr[0] = ObjectAnimator.ofFloat(this.pinnedMessageView, "translationY", new float[]{(float) (-AndroidUtilities.dp(50.0f))});
                animatorSet.playTogether(animatorArr);
                this.pinnedMessageViewAnimator.setDuration(200);
                this.pinnedMessageViewAnimator.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        if (ChatActivity.this.pinnedMessageViewAnimator != null && ChatActivity.this.pinnedMessageViewAnimator.equals(animation)) {
                            ChatActivity.this.pinnedMessageView.setVisibility(8);
                            ChatActivity.this.pinnedMessageViewAnimator = null;
                        }
                    }

                    public void onAnimationCancel(Animator animation) {
                        if (ChatActivity.this.pinnedMessageViewAnimator != null && ChatActivity.this.pinnedMessageViewAnimator.equals(animation)) {
                            ChatActivity.this.pinnedMessageViewAnimator = null;
                        }
                    }
                });
                this.pinnedMessageViewAnimator.start();
                return;
            }
            this.pinnedMessageView.setTranslationY((float) (-AndroidUtilities.dp(50.0f)));
            this.pinnedMessageView.setVisibility(8);
        }
    }

    private void updatePinnedMessageView(boolean animated) {
        if (this.pinnedMessageView != null) {
            int pinned_msg_id;
            if (this.chatInfo != null) {
                if (!(this.pinnedMessageObject == null || this.chatInfo.pinned_msg_id == this.pinnedMessageObject.getId())) {
                    this.pinnedMessageObject = null;
                }
                if (this.chatInfo.pinned_msg_id != 0 && this.pinnedMessageObject == null) {
                    this.pinnedMessageObject = (MessageObject) this.messagesDict[0].get(this.chatInfo.pinned_msg_id);
                }
                pinned_msg_id = this.chatInfo.pinned_msg_id;
            } else if (this.userInfo != null) {
                if (!(this.pinnedMessageObject == null || this.userInfo.pinned_msg_id == this.pinnedMessageObject.getId())) {
                    this.pinnedMessageObject = null;
                }
                if (this.userInfo.pinned_msg_id != 0 && this.pinnedMessageObject == null) {
                    this.pinnedMessageObject = (MessageObject) this.messagesDict[0].get(this.userInfo.pinned_msg_id);
                }
                pinned_msg_id = this.userInfo.pinned_msg_id;
            } else {
                pinned_msg_id = 0;
            }
            SharedPreferences preferences = MessagesController.getNotificationsSettings(this.currentAccount);
            if ((this.chatInfo == null && this.userInfo == null) || pinned_msg_id == 0 || pinned_msg_id == preferences.getInt("pin_" + this.dialog_id, 0) || (this.actionBar != null && (this.actionBar.isActionModeShowed() || this.actionBar.isSearchFieldVisible()))) {
                hidePinnedMessageView(animated);
            } else if (this.pinnedMessageObject != null) {
                if (this.pinnedMessageView.getTag() != null) {
                    this.pinnedMessageView.setTag(null);
                    if (this.pinnedMessageViewAnimator != null) {
                        this.pinnedMessageViewAnimator.cancel();
                        this.pinnedMessageViewAnimator = null;
                    }
                    if (animated) {
                        this.pinnedMessageView.setVisibility(0);
                        this.pinnedMessageViewAnimator = new AnimatorSet();
                        AnimatorSet animatorSet = this.pinnedMessageViewAnimator;
                        Animator[] animatorArr = new Animator[1];
                        animatorArr[0] = ObjectAnimator.ofFloat(this.pinnedMessageView, "translationY", new float[]{0.0f});
                        animatorSet.playTogether(animatorArr);
                        this.pinnedMessageViewAnimator.setDuration(200);
                        this.pinnedMessageViewAnimator.addListener(new AnimatorListenerAdapter() {
                            public void onAnimationEnd(Animator animation) {
                                if (ChatActivity.this.pinnedMessageViewAnimator != null && ChatActivity.this.pinnedMessageViewAnimator.equals(animation)) {
                                    ChatActivity.this.pinnedMessageViewAnimator = null;
                                }
                            }

                            public void onAnimationCancel(Animator animation) {
                                if (ChatActivity.this.pinnedMessageViewAnimator != null && ChatActivity.this.pinnedMessageViewAnimator.equals(animation)) {
                                    ChatActivity.this.pinnedMessageViewAnimator = null;
                                }
                            }
                        });
                        this.pinnedMessageViewAnimator.start();
                    } else {
                        this.pinnedMessageView.setTranslationY(0.0f);
                        this.pinnedMessageView.setVisibility(0);
                    }
                }
                FrameLayout.LayoutParams layoutParams1 = (FrameLayout.LayoutParams) this.pinnedMessageNameTextView.getLayoutParams();
                FrameLayout.LayoutParams layoutParams2 = (FrameLayout.LayoutParams) this.pinnedMessageTextView.getLayoutParams();
                PhotoSize photoSize = FileLoader.getClosestPhotoSizeWithSize(this.pinnedMessageObject.photoThumbs2, AndroidUtilities.dp(320.0f));
                if (photoSize == null) {
                    photoSize = FileLoader.getClosestPhotoSizeWithSize(this.pinnedMessageObject.photoThumbs, AndroidUtilities.dp(320.0f));
                }
                int dp;
                if (photoSize == null || (photoSize instanceof TL_photoSizeEmpty) || (photoSize.location instanceof TL_fileLocationUnavailable) || this.pinnedMessageObject.type == 13) {
                    this.pinnedMessageImageView.setImageBitmap(null);
                    this.pinnedImageLocation = null;
                    this.pinnedMessageImageView.setVisibility(4);
                    dp = AndroidUtilities.dp(18.0f);
                    layoutParams2.leftMargin = dp;
                    layoutParams1.leftMargin = dp;
                } else {
                    if (this.pinnedMessageObject.isRoundVideo()) {
                        this.pinnedMessageImageView.setRoundRadius(AndroidUtilities.dp(16.0f));
                    } else {
                        this.pinnedMessageImageView.setRoundRadius(0);
                    }
                    this.pinnedImageLocation = photoSize;
                    this.pinnedMessageImageView.setImage(this.pinnedImageLocation, "50_50", (Drawable) null, this.pinnedMessageObject);
                    this.pinnedMessageImageView.setVisibility(0);
                    dp = AndroidUtilities.dp(55.0f);
                    layoutParams2.leftMargin = dp;
                    layoutParams1.leftMargin = dp;
                }
                this.pinnedMessageNameTextView.setLayoutParams(layoutParams1);
                this.pinnedMessageTextView.setLayoutParams(layoutParams2);
                if (this.pinnedMessageObject.type == 17) {
                    this.pinnedMessageNameTextView.setText(LocaleController.getString("PinnedPoll", NUM));
                } else {
                    this.pinnedMessageNameTextView.setText(LocaleController.getString("PinnedMessage", NUM));
                }
                String mess;
                if (this.pinnedMessageObject.type == 14) {
                    this.pinnedMessageTextView.setText(String.format("%s - %s", new Object[]{this.pinnedMessageObject.getMusicAuthor(), this.pinnedMessageObject.getMusicTitle()}));
                } else if (this.pinnedMessageObject.type == 17) {
                    mess = this.pinnedMessageObject.messageOwner.media.poll.question;
                    if (mess.length() > 150) {
                        mess = mess.substring(0, 150);
                    }
                    this.pinnedMessageTextView.setText(mess.replace(10, ' '));
                } else if (this.pinnedMessageObject.messageOwner.media instanceof TL_messageMediaGame) {
                    this.pinnedMessageTextView.setText(Emoji.replaceEmoji(this.pinnedMessageObject.messageOwner.media.game.title, this.pinnedMessageTextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(14.0f), false));
                } else if (this.pinnedMessageObject.messageText != null) {
                    mess = this.pinnedMessageObject.messageText.toString();
                    if (mess.length() > 150) {
                        mess = mess.substring(0, 150);
                    }
                    this.pinnedMessageTextView.setText(Emoji.replaceEmoji(mess.replace(10, ' '), this.pinnedMessageTextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(14.0f), false));
                }
            } else {
                this.pinnedImageLocation = null;
                hidePinnedMessageView(animated);
                if (this.loadingPinnedMessage != pinned_msg_id) {
                    this.loadingPinnedMessage = pinned_msg_id;
                    DataQuery.getInstance(this.currentAccount).loadPinnedMessage(this.dialog_id, ChatObject.isChannel(this.currentChat) ? this.currentChat.id : 0, pinned_msg_id, true);
                }
            }
            checkListViewPaddings();
        }
    }

    private void updateSpamView() {
        if (this.reportSpamView != null) {
            boolean show;
            SharedPreferences preferences = MessagesController.getNotificationsSettings(this.currentAccount);
            if (this.currentEncryptedChat != null) {
                if (this.currentEncryptedChat.admin_id == UserConfig.getInstance(this.currentAccount).getClientUserId() || ContactsController.getInstance(this.currentAccount).isLoadingContacts() || ContactsController.getInstance(this.currentAccount).contactsDict.get(Integer.valueOf(this.currentUser.id)) != null) {
                    show = false;
                } else {
                    show = true;
                }
                if (show && preferences.getInt("spam3_" + this.dialog_id, 0) == 1) {
                    show = false;
                }
            } else {
                show = preferences.getInt(new StringBuilder().append("spam3_").append(this.dialog_id).toString(), 0) == 2;
            }
            AnimatorSet animatorSet;
            Animator[] animatorArr;
            if (show) {
                if (this.reportSpamView.getTag() != null) {
                    if (BuildVars.LOGS_ENABLED) {
                        FileLog.d("show spam button");
                    }
                    this.reportSpamView.setTag(null);
                    this.reportSpamView.setVisibility(0);
                    if (this.reportSpamViewAnimator != null) {
                        this.reportSpamViewAnimator.cancel();
                    }
                    this.reportSpamViewAnimator = new AnimatorSet();
                    animatorSet = this.reportSpamViewAnimator;
                    animatorArr = new Animator[1];
                    animatorArr[0] = ObjectAnimator.ofFloat(this.reportSpamView, "translationY", new float[]{0.0f});
                    animatorSet.playTogether(animatorArr);
                    this.reportSpamViewAnimator.setDuration(200);
                    this.reportSpamViewAnimator.addListener(new AnimatorListenerAdapter() {
                        public void onAnimationEnd(Animator animation) {
                            if (ChatActivity.this.reportSpamViewAnimator != null && ChatActivity.this.reportSpamViewAnimator.equals(animation)) {
                                ChatActivity.this.reportSpamViewAnimator = null;
                            }
                        }

                        public void onAnimationCancel(Animator animation) {
                            if (ChatActivity.this.reportSpamViewAnimator != null && ChatActivity.this.reportSpamViewAnimator.equals(animation)) {
                                ChatActivity.this.reportSpamViewAnimator = null;
                            }
                        }
                    });
                    this.reportSpamViewAnimator.start();
                }
            } else if (this.reportSpamView.getTag() == null) {
                if (BuildVars.LOGS_ENABLED) {
                    FileLog.d("hide spam button");
                }
                this.reportSpamView.setTag(Integer.valueOf(1));
                if (this.reportSpamViewAnimator != null) {
                    this.reportSpamViewAnimator.cancel();
                }
                this.reportSpamViewAnimator = new AnimatorSet();
                animatorSet = this.reportSpamViewAnimator;
                animatorArr = new Animator[1];
                animatorArr[0] = ObjectAnimator.ofFloat(this.reportSpamView, "translationY", new float[]{(float) (-AndroidUtilities.dp(50.0f))});
                animatorSet.playTogether(animatorArr);
                this.reportSpamViewAnimator.setDuration(200);
                this.reportSpamViewAnimator.addListener(new AnimatorListenerAdapter() {
                    public void onAnimationEnd(Animator animation) {
                        if (ChatActivity.this.reportSpamViewAnimator != null && ChatActivity.this.reportSpamViewAnimator.equals(animation)) {
                            ChatActivity.this.reportSpamView.setVisibility(8);
                            ChatActivity.this.reportSpamViewAnimator = null;
                        }
                    }

                    public void onAnimationCancel(Animator animation) {
                        if (ChatActivity.this.reportSpamViewAnimator != null && ChatActivity.this.reportSpamViewAnimator.equals(animation)) {
                            ChatActivity.this.reportSpamViewAnimator = null;
                        }
                    }
                });
                this.reportSpamViewAnimator.start();
            }
            checkListViewPaddings();
        } else if (BuildVars.LOGS_ENABLED) {
            FileLog.d("no spam view found");
        }
    }

    private void updateContactStatus() {
        if (this.addContactItem != null) {
            if (this.currentUser == null) {
                this.addContactItem.setVisibility(8);
            } else {
                User user = MessagesController.getInstance(this.currentAccount).getUser(Integer.valueOf(this.currentUser.id));
                if (user != null) {
                    this.currentUser = user;
                }
                if ((this.currentEncryptedChat != null && !(this.currentEncryptedChat instanceof TL_encryptedChat)) || MessagesController.isSupportUser(this.currentUser) || UserObject.isDeleted(this.currentUser) || ContactsController.getInstance(this.currentAccount).isLoadingContacts() || (!TextUtils.isEmpty(this.currentUser.phone) && ContactsController.getInstance(this.currentAccount).contactsDict.get(Integer.valueOf(this.currentUser.id)) != null && (ContactsController.getInstance(this.currentAccount).contactsDict.size() != 0 || !ContactsController.getInstance(this.currentAccount).isLoadingContacts()))) {
                    this.addContactItem.setVisibility(8);
                } else {
                    this.addContactItem.setVisibility(0);
                    if (TextUtils.isEmpty(this.currentUser.phone)) {
                        this.addContactItem.setText(LocaleController.getString("ShareMyContactInfo", NUM));
                        this.addToContactsButton.setVisibility(8);
                        this.reportSpamButton.setPadding(AndroidUtilities.dp(50.0f), 0, AndroidUtilities.dp(50.0f), 0);
                        this.reportSpamContainer.setLayoutParams(LayoutHelper.createLinear(-1, -1, 1.0f, 51, 0, 0, 0, AndroidUtilities.dp(1.0f)));
                    } else {
                        this.addContactItem.setText(LocaleController.getString("AddToContacts", NUM));
                        this.reportSpamButton.setPadding(AndroidUtilities.dp(4.0f), 0, AndroidUtilities.dp(50.0f), 0);
                        this.addToContactsButton.setVisibility(0);
                        this.reportSpamContainer.setLayoutParams(LayoutHelper.createLinear(-1, -1, 0.5f, 51, 0, 0, 0, AndroidUtilities.dp(1.0f)));
                    }
                }
            }
            checkListViewPaddings();
        }
    }

    private void checkListViewPaddingsInternal() {
        if (this.chatLayoutManager != null) {
            try {
                int firstVisPos = this.chatLayoutManager.findFirstVisibleItemPosition();
                int lastVisPos = -1;
                if (!(this.wasManualScroll || this.unreadMessageObject == null)) {
                    int pos = this.messages.indexOf(this.unreadMessageObject);
                    if (pos >= 0) {
                        lastVisPos = pos + this.chatAdapter.messagesStartRow;
                        firstVisPos = -1;
                    }
                }
                int top = 0;
                if (firstVisPos != -1) {
                    View firstVisView = this.chatLayoutManager.findViewByPosition(firstVisPos);
                    top = firstVisView == null ? 0 : (this.chatListView.getMeasuredHeight() - firstVisView.getBottom()) - this.chatListView.getPaddingBottom();
                }
                FrameLayout.LayoutParams layoutParams;
                if (this.chatListView.getPaddingTop() != AndroidUtilities.dp(52.0f) && ((this.pinnedMessageView != null && this.pinnedMessageView.getTag() == null) || (this.reportSpamView != null && this.reportSpamView.getTag() == null))) {
                    this.chatListView.setPadding(0, AndroidUtilities.dp(52.0f), 0, AndroidUtilities.dp(3.0f));
                    layoutParams = (FrameLayout.LayoutParams) this.floatingDateView.getLayoutParams();
                    layoutParams.topMargin = AndroidUtilities.dp(52.0f);
                    this.floatingDateView.setLayoutParams(layoutParams);
                    this.chatListView.setTopGlowOffset(AndroidUtilities.dp(48.0f));
                } else if (this.chatListView.getPaddingTop() == AndroidUtilities.dp(4.0f) || ((this.pinnedMessageView != null && this.pinnedMessageView.getTag() == null) || (this.reportSpamView != null && this.reportSpamView.getTag() == null))) {
                    firstVisPos = -1;
                } else {
                    this.chatListView.setPadding(0, AndroidUtilities.dp(4.0f), 0, AndroidUtilities.dp(3.0f));
                    layoutParams = (FrameLayout.LayoutParams) this.floatingDateView.getLayoutParams();
                    layoutParams.topMargin = AndroidUtilities.dp(4.0f);
                    this.floatingDateView.setLayoutParams(layoutParams);
                    this.chatListView.setTopGlowOffset(0);
                }
                if (firstVisPos != -1) {
                    this.chatLayoutManager.scrollToPositionWithOffset(firstVisPos, top);
                } else if (lastVisPos != -1) {
                    this.chatLayoutManager.scrollToPositionWithOffset(lastVisPos, ((this.chatListView.getMeasuredHeight() - this.chatListView.getPaddingBottom()) - this.chatListView.getPaddingTop()) - AndroidUtilities.dp(29.0f));
                }
            } catch (Exception e) {
                FileLog.e(e);
            }
        }
    }

    private void checkListViewPaddings() {
        if (this.wasManualScroll || this.unreadMessageObject == null) {
            AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$44(this));
        } else if (this.messages.indexOf(this.unreadMessageObject) >= 0) {
            this.fixPaddingsInLayout = true;
            if (this.fragmentView != null) {
                this.fragmentView.requestLayout();
            }
        }
    }

    private void checkRaiseSensors() {
        if (this.chatActivityEnterView != null && this.chatActivityEnterView.isStickersExpanded()) {
            MediaController.getInstance().setAllowStartRecord(false);
        } else if (this.currentChat != null && !ChatObject.canSendMedia(this.currentChat)) {
            MediaController.getInstance().setAllowStartRecord(false);
        } else if (ApplicationLoader.mainInterfacePaused || ((this.bottomOverlayChat != null && this.bottomOverlayChat.getVisibility() == 0) || ((this.bottomOverlay != null && this.bottomOverlay.getVisibility() == 0) || (this.searchContainer != null && this.searchContainer.getVisibility() == 0)))) {
            MediaController.getInstance().setAllowStartRecord(false);
        } else {
            MediaController.getInstance().setAllowStartRecord(true);
        }
    }

    public void dismissCurrentDialig() {
        if (this.chatAttachAlert == null || this.visibleDialog != this.chatAttachAlert) {
            super.dismissCurrentDialig();
            return;
        }
        this.chatAttachAlert.closeCamera(false);
        this.chatAttachAlert.dismissInternal();
        this.chatAttachAlert.hideCamera(true);
    }

    /* Access modifiers changed, original: protected */
    public void setInPreviewMode(boolean value) {
        super.setInPreviewMode(value);
        if (this.avatarContainer != null) {
            this.avatarContainer.setOccupyStatusBar(!value);
            this.avatarContainer.setLayoutParams(LayoutHelper.createFrame(-2, -1.0f, 51, !value ? 56.0f : 0.0f, 0.0f, 40.0f, 0.0f));
        }
        if (this.chatActivityEnterView != null) {
            this.chatActivityEnterView.setVisibility(!value ? 0 : 4);
        }
        if (this.actionBar != null) {
            this.actionBar.setBackButtonDrawable(!value ? new BackDrawable(false) : null);
            this.headerItem.setAlpha(!value ? 1.0f : 0.0f);
            this.attachItem.setAlpha(!value ? 1.0f : 0.0f);
        }
        if (this.chatListView != null) {
            int count = this.chatListView.getChildCount();
            for (int a = 0; a < count; a++) {
                View view = this.chatListView.getChildAt(a);
                MessageObject message = null;
                if (view instanceof ChatMessageCell) {
                    message = ((ChatMessageCell) view).getMessageObject();
                } else if (view instanceof ChatActionCell) {
                    message = ((ChatActionCell) view).getMessageObject();
                }
                if (message != null && message.messageOwner != null && message.messageOwner.media_unread && message.messageOwner.mentioned) {
                    if (!(message.isVoice() || message.isRoundVideo())) {
                        this.newMentionsCount--;
                        if (this.newMentionsCount <= 0) {
                            this.newMentionsCount = 0;
                            this.hasAllMentionsLocal = true;
                            showMentionDownButton(false, true);
                        } else {
                            this.mentiondownButtonCounter.setText(String.format("%d", new Object[]{Integer.valueOf(this.newMentionsCount)}));
                        }
                        MessagesController.getInstance(this.currentAccount).markMentionMessageAsRead(message.getId(), ChatObject.isChannel(this.currentChat) ? this.currentChat.id : 0, this.dialog_id);
                        message.setContentIsRead();
                    }
                    if (view instanceof ChatMessageCell) {
                        ((ChatMessageCell) view).setHighlighted(false);
                        ((ChatMessageCell) view).setHighlightedAnimated();
                    }
                }
            }
        }
        updateBottomOverlay();
        updateSecretStatus();
    }

    public void onResume() {
        super.onResume();
        AndroidUtilities.requestAdjustResize(getParentActivity(), this.classGuid);
        MediaController.getInstance().startRaiseToEarSensors(this);
        checkRaiseSensors();
        if (this.chatAttachAlert != null) {
            this.chatAttachAlert.onResume();
        }
        if (this.contentView != null) {
            this.contentView.onResume();
        }
        if (this.firstOpen && MessagesController.getInstance(this.currentAccount).isProxyDialog(this.dialog_id)) {
            SharedPreferences preferences = MessagesController.getGlobalNotificationsSettings();
            if (preferences.getLong("proxychannel", 0) != this.dialog_id) {
                preferences.edit().putLong("proxychannel", this.dialog_id).commit();
                AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
                builder.setTitle(LocaleController.getString("AppName", NUM));
                builder.setMessage(LocaleController.getString("UseProxySponsorInfo", NUM));
                builder.setPositiveButton(LocaleController.getString("OK", NUM), null);
                showDialog(builder.create());
            }
        }
        checkActionBarMenu();
        if (!(this.replyImageLocation == null || this.replyImageView == null)) {
            this.replyImageView.setImage(this.replyImageLocation, "50_50", (Drawable) null, this.replyingMessageObject);
        }
        if (!(this.pinnedImageLocation == null || this.pinnedMessageImageView == null)) {
            this.pinnedMessageImageView.setImage(this.pinnedImageLocation, "50_50", (Drawable) null, this.pinnedMessageObject);
        }
        NotificationsController.getInstance(this.currentAccount).setOpenedDialogId(this.dialog_id);
        MessagesController.getInstance(this.currentAccount).setLastVisibleDialogId(this.dialog_id, true);
        if (this.scrollToTopOnResume) {
            if (!this.scrollToTopUnReadOnResume || this.scrollToMessage == null) {
                moveScrollToLastMessage();
            } else if (this.chatListView != null) {
                int yOffset;
                boolean bottom = true;
                if (this.scrollToMessagePosition == -9000) {
                    yOffset = getScrollOffsetForMessage(this.scrollToMessage);
                    bottom = false;
                } else if (this.scrollToMessagePosition == -10000) {
                    yOffset = -AndroidUtilities.dp(11.0f);
                    bottom = false;
                } else {
                    yOffset = this.scrollToMessagePosition;
                }
                this.chatLayoutManager.scrollToPositionWithOffset(this.chatAdapter.messagesStartRow + this.messages.indexOf(this.scrollToMessage), yOffset, bottom);
            }
            this.scrollToTopUnReadOnResume = false;
            this.scrollToTopOnResume = false;
            this.scrollToMessage = null;
        }
        this.paused = false;
        this.pausedOnLastMessage = false;
        checkScrollForLoad(false);
        if (this.wasPaused) {
            this.wasPaused = false;
            if (this.chatAdapter != null) {
                this.chatAdapter.notifyDataSetChanged();
            }
        }
        fixLayout();
        applyDraftMaybe(false);
        if (!(this.bottomOverlayChat == null || this.bottomOverlayChat.getVisibility() == 0 || this.actionBar.isSearchFieldVisible())) {
            this.chatActivityEnterView.setFieldFocused(true);
        }
        if (this.chatActivityEnterView != null) {
            this.chatActivityEnterView.onResume();
        }
        if (this.currentUser != null) {
            this.chatEnterTime = System.currentTimeMillis();
            this.chatLeaveTime = 0;
        }
        if (this.startVideoEdit != null) {
            AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$45(this));
        }
        if (this.chatListView != null && (this.chatActivityEnterView == null || !this.chatActivityEnterView.isEditingMessage())) {
            this.chatListView.setOnItemLongClickListener(this.onItemLongClickListener);
            this.chatListView.setOnItemClickListener(this.onItemClickListener);
            this.chatListView.setLongClickable(true);
        }
        checkBotCommands();
        updateTitle();
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$onResume$55$ChatActivity() {
        openVideoEditor(this.startVideoEdit, null);
        this.startVideoEdit = null;
    }

    /* JADX WARNING: Removed duplicated region for block: B:80:0x0267  */
    /* JADX WARNING: Removed duplicated region for block: B:61:0x01b5  */
    public void onPause() {
        /*
        r23 = this;
        super.onPause();
        r0 = r23;
        r3 = r0.currentAccount;
        r3 = org.telegram.messenger.MessagesController.getInstance(r3);
        r0 = r23;
        r4 = r0.dialog_id;
        r3.markDialogAsReadNow(r4);
        r3 = org.telegram.messenger.MediaController.getInstance();
        r4 = 1;
        r0 = r23;
        r3.stopRaiseToEarSensors(r0, r4);
        r3 = 1;
        r0 = r23;
        r0.paused = r3;
        r3 = 1;
        r0 = r23;
        r0.wasPaused = r3;
        r0 = r23;
        r3 = r0.currentAccount;
        r3 = org.telegram.messenger.NotificationsController.getInstance(r3);
        r4 = 0;
        r3.setOpenedDialogId(r4);
        r0 = r23;
        r3 = r0.currentAccount;
        r3 = org.telegram.messenger.MessagesController.getInstance(r3);
        r0 = r23;
        r4 = r0.dialog_id;
        r6 = 0;
        r3.setLastVisibleDialogId(r4, r6);
        r10 = 0;
        r21 = 0;
        r22 = 1;
        r0 = r23;
        r3 = r0.ignoreAttachOnPause;
        if (r3 != 0) goto L_0x0091;
    L_0x004e:
        r0 = r23;
        r3 = r0.chatActivityEnterView;
        if (r3 == 0) goto L_0x0091;
    L_0x0054:
        r0 = r23;
        r3 = r0.bottomOverlayChat;
        r3 = r3.getVisibility();
        if (r3 == 0) goto L_0x0091;
    L_0x005e:
        r0 = r23;
        r3 = r0.chatActivityEnterView;
        r3.onPause();
        r0 = r23;
        r0 = r0.replyingMessageObject;
        r21 = r0;
        r0 = r23;
        r3 = r0.chatActivityEnterView;
        r3 = r3.isEditingMessage();
        if (r3 != 0) goto L_0x0081;
    L_0x0075:
        r0 = r23;
        r3 = r0.chatActivityEnterView;
        r3 = r3.getFieldText();
        r10 = org.telegram.messenger.AndroidUtilities.getTrimmedString(r3);
    L_0x0081:
        r0 = r23;
        r3 = r0.chatActivityEnterView;
        r22 = r3.isMessageWebPageSearchEnabled();
        r0 = r23;
        r3 = r0.chatActivityEnterView;
        r4 = 0;
        r3.setFieldFocused(r4);
    L_0x0091:
        r0 = r23;
        r3 = r0.chatAttachAlert;
        if (r3 == 0) goto L_0x00a4;
    L_0x0097:
        r0 = r23;
        r3 = r0.ignoreAttachOnPause;
        if (r3 != 0) goto L_0x016b;
    L_0x009d:
        r0 = r23;
        r3 = r0.chatAttachAlert;
        r3.onPause();
    L_0x00a4:
        r0 = r23;
        r3 = r0.contentView;
        if (r3 == 0) goto L_0x00b1;
    L_0x00aa:
        r0 = r23;
        r3 = r0.contentView;
        r3.onPause();
    L_0x00b1:
        r3 = 1;
        r14 = new java.lang.CharSequence[r3];
        r3 = 0;
        r14[r3] = r10;
        r0 = r23;
        r3 = r0.currentAccount;
        r3 = org.telegram.messenger.DataQuery.getInstance(r3);
        r7 = r3.getEntities(r14);
        r0 = r23;
        r3 = r0.currentAccount;
        r3 = org.telegram.messenger.DataQuery.getInstance(r3);
        r0 = r23;
        r4 = r0.dialog_id;
        r6 = 0;
        r6 = r14[r6];
        if (r21 == 0) goto L_0x0172;
    L_0x00d4:
        r0 = r21;
        r8 = r0.messageOwner;
    L_0x00d8:
        if (r22 != 0) goto L_0x0175;
    L_0x00da:
        r9 = 1;
    L_0x00db:
        r3.saveDraft(r4, r6, r7, r8, r9);
        r0 = r23;
        r3 = r0.currentAccount;
        r3 = org.telegram.messenger.MessagesController.getInstance(r3);
        r4 = 0;
        r0 = r23;
        r8 = r0.dialog_id;
        r3.cancelTyping(r4, r8);
        r0 = r23;
        r3 = r0.pausedOnLastMessage;
        if (r3 != 0) goto L_0x0246;
    L_0x00f4:
        r0 = r23;
        r3 = r0.currentAccount;
        r3 = org.telegram.messenger.MessagesController.getNotificationsSettings(r3);
        r11 = r3.edit();
        r15 = 0;
        r19 = 0;
        r0 = r23;
        r3 = r0.chatLayoutManager;
        if (r3 == 0) goto L_0x0209;
    L_0x0109:
        r0 = r23;
        r3 = r0.chatLayoutManager;
        r20 = r3.findFirstVisibleItemPosition();
        if (r20 == 0) goto L_0x0209;
    L_0x0113:
        r0 = r23;
        r3 = r0.chatListView;
        r0 = r20;
        r12 = r3.findViewHolderForAdapterPosition(r0);
        r12 = (org.telegram.ui.Components.RecyclerListView.Holder) r12;
        if (r12 == 0) goto L_0x0209;
    L_0x0121:
        r17 = 0;
        r3 = r12.itemView;
        r3 = r3 instanceof org.telegram.ui.Cells.ChatMessageCell;
        if (r3 == 0) goto L_0x0178;
    L_0x0129:
        r3 = r12.itemView;
        r3 = (org.telegram.ui.Cells.ChatMessageCell) r3;
        r3 = r3.getMessageObject();
        r17 = r3.getId();
    L_0x0135:
        if (r17 != 0) goto L_0x0143;
    L_0x0137:
        r0 = r23;
        r3 = r0.chatListView;
        r4 = r20 + 1;
        r12 = r3.findViewHolderForAdapterPosition(r4);
        r12 = (org.telegram.ui.Components.RecyclerListView.Holder) r12;
    L_0x0143:
        r13 = 0;
        r2 = r20 + -1;
    L_0x0146:
        r0 = r23;
        r3 = r0.chatAdapter;
        r3 = r3.messagesStartRow;
        if (r2 < r3) goto L_0x01ab;
    L_0x0150:
        r0 = r23;
        r3 = r0.chatAdapter;
        r3 = r3.messagesStartRow;
        r18 = r2 - r3;
        if (r18 < 0) goto L_0x0168;
    L_0x015c:
        r0 = r23;
        r3 = r0.messages;
        r3 = r3.size();
        r0 = r18;
        if (r0 < r3) goto L_0x018b;
    L_0x0168:
        r2 = r2 + -1;
        goto L_0x0146;
    L_0x016b:
        r3 = 0;
        r0 = r23;
        r0.ignoreAttachOnPause = r3;
        goto L_0x00a4;
    L_0x0172:
        r8 = 0;
        goto L_0x00d8;
    L_0x0175:
        r9 = 0;
        goto L_0x00db;
    L_0x0178:
        r3 = r12.itemView;
        r3 = r3 instanceof org.telegram.ui.Cells.ChatActionCell;
        if (r3 == 0) goto L_0x0135;
    L_0x017e:
        r3 = r12.itemView;
        r3 = (org.telegram.ui.Cells.ChatActionCell) r3;
        r3 = r3.getMessageObject();
        r17 = r3.getId();
        goto L_0x0135;
    L_0x018b:
        r0 = r23;
        r3 = r0.messages;
        r0 = r18;
        r16 = r3.get(r0);
        r16 = (org.telegram.messenger.MessageObject) r16;
        r3 = r16.getId();
        if (r3 == 0) goto L_0x0168;
    L_0x019d:
        r3 = r16.isOut();
        if (r3 != 0) goto L_0x01ab;
    L_0x01a3:
        r3 = r16.isUnread();
        if (r3 == 0) goto L_0x01ab;
    L_0x01a9:
        r13 = 1;
        r15 = 0;
    L_0x01ab:
        if (r12 == 0) goto L_0x0209;
    L_0x01ad:
        if (r13 != 0) goto L_0x0209;
    L_0x01af:
        r3 = r12.itemView;
        r3 = r3 instanceof org.telegram.ui.Cells.ChatMessageCell;
        if (r3 == 0) goto L_0x0267;
    L_0x01b5:
        r3 = r12.itemView;
        r3 = (org.telegram.ui.Cells.ChatMessageCell) r3;
        r3 = r3.getMessageObject();
        r15 = r3.getId();
    L_0x01c1:
        if (r15 <= 0) goto L_0x01c9;
    L_0x01c3:
        r0 = r23;
        r3 = r0.currentEncryptedChat;
        if (r3 == 0) goto L_0x01d1;
    L_0x01c9:
        if (r15 >= 0) goto L_0x027b;
    L_0x01cb:
        r0 = r23;
        r3 = r0.currentEncryptedChat;
        if (r3 == 0) goto L_0x027b;
    L_0x01d1:
        r3 = r12.itemView;
        r3 = r3.getBottom();
        r0 = r23;
        r4 = r0.chatListView;
        r4 = r4.getMeasuredHeight();
        r19 = r3 - r4;
        r3 = org.telegram.messenger.BuildVars.LOGS_ENABLED;
        if (r3 == 0) goto L_0x0209;
    L_0x01e5:
        r3 = new java.lang.StringBuilder;
        r3.<init>();
        r4 = "save offset = ";
        r3 = r3.append(r4);
        r0 = r19;
        r3 = r3.append(r0);
        r4 = " for mid ";
        r3 = r3.append(r4);
        r3 = r3.append(r15);
        r3 = r3.toString();
        org.telegram.messenger.FileLog.d(r3);
    L_0x0209:
        if (r15 == 0) goto L_0x027d;
    L_0x020b:
        r3 = new java.lang.StringBuilder;
        r3.<init>();
        r4 = "diditem";
        r3 = r3.append(r4);
        r0 = r23;
        r4 = r0.dialog_id;
        r3 = r3.append(r4);
        r3 = r3.toString();
        r11.putInt(r3, r15);
        r3 = new java.lang.StringBuilder;
        r3.<init>();
        r4 = "diditemo";
        r3 = r3.append(r4);
        r0 = r23;
        r4 = r0.dialog_id;
        r3 = r3.append(r4);
        r3 = r3.toString();
        r0 = r19;
        r11.putInt(r3, r0);
    L_0x0243:
        r11.commit();
    L_0x0246:
        r0 = r23;
        r3 = r0.currentUser;
        if (r3 == 0) goto L_0x0257;
    L_0x024c:
        r4 = java.lang.System.currentTimeMillis();
        r0 = r23;
        r0.chatLeaveTime = r4;
        r23.updateInformationForScreenshotDetector();
    L_0x0257:
        r0 = r23;
        r3 = r0.undoView;
        if (r3 == 0) goto L_0x0266;
    L_0x025d:
        r0 = r23;
        r3 = r0.undoView;
        r4 = 1;
        r5 = 0;
        r3.hide(r4, r5);
    L_0x0266:
        return;
    L_0x0267:
        r3 = r12.itemView;
        r3 = r3 instanceof org.telegram.ui.Cells.ChatActionCell;
        if (r3 == 0) goto L_0x01c1;
    L_0x026d:
        r3 = r12.itemView;
        r3 = (org.telegram.ui.Cells.ChatActionCell) r3;
        r3 = r3.getMessageObject();
        r15 = r3.getId();
        goto L_0x01c1;
    L_0x027b:
        r15 = 0;
        goto L_0x0209;
    L_0x027d:
        r3 = 1;
        r0 = r23;
        r0.pausedOnLastMessage = r3;
        r3 = new java.lang.StringBuilder;
        r3.<init>();
        r4 = "diditem";
        r3 = r3.append(r4);
        r0 = r23;
        r4 = r0.dialog_id;
        r3 = r3.append(r4);
        r3 = r3.toString();
        r11.remove(r3);
        r3 = new java.lang.StringBuilder;
        r3.<init>();
        r4 = "diditemo";
        r3 = r3.append(r4);
        r0 = r23;
        r4 = r0.dialog_id;
        r3 = r3.append(r4);
        r3 = r3.toString();
        r11.remove(r3);
        goto L_0x0243;
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.onPause():void");
    }

    private void applyDraftMaybe(boolean canClear) {
        if (this.chatActivityEnterView != null) {
            DraftMessage draftMessage = DataQuery.getInstance(this.currentAccount).getDraft(this.dialog_id);
            Message draftReplyMessage = (draftMessage == null || draftMessage.reply_to_msg_id == 0) ? null : DataQuery.getInstance(this.currentAccount).getDraftMessage(this.dialog_id);
            if (this.chatActivityEnterView.getFieldText() == null) {
                if (draftMessage != null) {
                    CharSequence message;
                    this.chatActivityEnterView.setWebPage(null, !draftMessage.no_webpage);
                    if (draftMessage.entities.isEmpty()) {
                        message = draftMessage.message;
                    } else {
                        SpannableStringBuilder stringBuilder = SpannableStringBuilder.valueOf(draftMessage.message);
                        DataQuery.sortEntities(draftMessage.entities);
                        int addToOffset = 0;
                        for (int a = 0; a < draftMessage.entities.size(); a++) {
                            MessageEntity entity = (MessageEntity) draftMessage.entities.get(a);
                            if ((entity instanceof TL_inputMessageEntityMentionName) || (entity instanceof TL_messageEntityMentionName)) {
                                int user_id;
                                if (entity instanceof TL_inputMessageEntityMentionName) {
                                    user_id = ((TL_inputMessageEntityMentionName) entity).user_id.user_id;
                                } else {
                                    user_id = ((TL_messageEntityMentionName) entity).user_id;
                                }
                                if ((entity.offset + addToOffset) + entity.length < stringBuilder.length() && stringBuilder.charAt((entity.offset + addToOffset) + entity.length) == ' ') {
                                    entity.length++;
                                }
                                stringBuilder.setSpan(new URLSpanUserMention("" + user_id, 1), entity.offset + addToOffset, (entity.offset + addToOffset) + entity.length, 33);
                            } else if (entity instanceof TL_messageEntityCode) {
                                stringBuilder.insert((entity.offset + entity.length) + addToOffset, "`");
                                stringBuilder.insert(entity.offset + addToOffset, "`");
                                addToOffset += 2;
                            } else if (entity instanceof TL_messageEntityPre) {
                                stringBuilder.insert((entity.offset + entity.length) + addToOffset, "```");
                                stringBuilder.insert(entity.offset + addToOffset, "```");
                                addToOffset += 6;
                            } else if (entity instanceof TL_messageEntityBold) {
                                stringBuilder.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface("fonts/rmedium.ttf")), entity.offset + addToOffset, (entity.offset + entity.length) + addToOffset, 33);
                            } else if (entity instanceof TL_messageEntityItalic) {
                                stringBuilder.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface("fonts/ritalic.ttf")), entity.offset + addToOffset, (entity.offset + entity.length) + addToOffset, 33);
                            } else if (entity instanceof TL_messageEntityTextUrl) {
                                stringBuilder.setSpan(new URLSpanReplacement(entity.url), entity.offset + addToOffset, (entity.offset + entity.length) + addToOffset, 33);
                            }
                        }
                        message = stringBuilder;
                    }
                    this.chatActivityEnterView.setFieldText(message);
                    if (getArguments().getBoolean("hasUrl", false)) {
                        this.chatActivityEnterView.setSelection(draftMessage.message.indexOf(10) + 1);
                        AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$46(this), 700);
                    }
                }
            } else if (canClear && draftMessage == null) {
                this.chatActivityEnterView.setFieldText("");
                hideFieldPanel();
            }
            if (this.replyingMessageObject == null && draftReplyMessage != null) {
                this.replyingMessageObject = new MessageObject(this.currentAccount, draftReplyMessage, MessagesController.getInstance(this.currentAccount).getUsers(), false);
                showFieldPanelForReply(true, this.replyingMessageObject);
            }
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$applyDraftMaybe$56$ChatActivity() {
        if (this.chatActivityEnterView != null) {
            this.chatActivityEnterView.setFieldFocused(true);
            this.chatActivityEnterView.openKeyboard();
        }
    }

    private void updateInformationForScreenshotDetector() {
        if (this.currentUser != null) {
            if (this.currentEncryptedChat != null) {
                ArrayList<Long> visibleMessages = new ArrayList();
                if (this.chatListView != null) {
                    int count = this.chatListView.getChildCount();
                    for (int a = 0; a < count; a++) {
                        View view = this.chatListView.getChildAt(a);
                        MessageObject object = null;
                        if (view instanceof ChatMessageCell) {
                            object = ((ChatMessageCell) view).getMessageObject();
                        }
                        if (!(object == null || object.getId() >= 0 || object.messageOwner.random_id == 0)) {
                            visibleMessages.add(Long.valueOf(object.messageOwner.random_id));
                        }
                    }
                }
                MediaController.getInstance().setLastVisibleMessageIds(this.currentAccount, this.chatEnterTime, this.chatLeaveTime, this.currentUser, this.currentEncryptedChat, visibleMessages, 0);
                return;
            }
            SecretMediaViewer viewer = SecretMediaViewer.getInstance();
            MessageObject messageObject = viewer.getCurrentMessageObject();
            if (messageObject != null && !messageObject.isOut()) {
                MediaController.getInstance().setLastVisibleMessageIds(this.currentAccount, viewer.getOpenTime(), viewer.getCloseTime(), this.currentUser, null, null, messageObject.getId());
            }
        }
    }

    private boolean fixLayoutInternal() {
        if (AndroidUtilities.isTablet() || ApplicationLoader.applicationContext.getResources().getConfiguration().orientation != 2) {
            this.selectedMessagesCountTextView.setTextSize(20);
        } else {
            this.selectedMessagesCountTextView.setTextSize(18);
        }
        HashMap<Long, GroupedMessages> newGroups = null;
        int count = this.chatListView.getChildCount();
        for (int a = 0; a < count; a++) {
            View child = this.chatListView.getChildAt(a);
            if (child instanceof ChatMessageCell) {
                GroupedMessages groupedMessages = ((ChatMessageCell) child).getCurrentMessagesGroup();
                if (groupedMessages != null && groupedMessages.hasSibling) {
                    if (newGroups == null) {
                        newGroups = new HashMap();
                    }
                    if (!newGroups.containsKey(Long.valueOf(groupedMessages.groupId))) {
                        newGroups.put(Long.valueOf(groupedMessages.groupId), groupedMessages);
                        int idx = this.messages.indexOf((MessageObject) groupedMessages.messages.get(groupedMessages.messages.size() - 1));
                        if (idx >= 0) {
                            this.chatAdapter.notifyItemRangeChanged(this.chatAdapter.messagesStartRow + idx, groupedMessages.messages.size());
                        }
                    }
                }
            }
        }
        if (!AndroidUtilities.isTablet()) {
            return true;
        }
        if (AndroidUtilities.isSmallTablet() && ApplicationLoader.applicationContext.getResources().getConfiguration().orientation == 1) {
            this.actionBar.setBackButtonDrawable(new BackDrawable(false));
            if (this.fragmentContextView != null && this.fragmentContextView.getParent() == null) {
                ((ViewGroup) this.fragmentView).addView(this.fragmentContextView, LayoutHelper.createFrame(-1, 39.0f, 51, 0.0f, -36.0f, 0.0f, 0.0f));
            }
        } else {
            ActionBar actionBar = this.actionBar;
            boolean z = this.parentLayout == null || this.parentLayout.fragmentsStack.isEmpty() || this.parentLayout.fragmentsStack.get(0) == this || this.parentLayout.fragmentsStack.size() == 1;
            actionBar.setBackButtonDrawable(new BackDrawable(z));
            if (!(this.fragmentContextView == null || this.fragmentContextView.getParent() == null)) {
                this.fragmentView.setPadding(0, 0, 0, 0);
                ((ViewGroup) this.fragmentView).removeView(this.fragmentContextView);
            }
        }
        return false;
    }

    private void fixLayout() {
        if (this.avatarContainer != null) {
            this.avatarContainer.getViewTreeObserver().addOnPreDrawListener(new OnPreDrawListener() {
                public boolean onPreDraw() {
                    if (ChatActivity.this.avatarContainer != null) {
                        ChatActivity.this.avatarContainer.getViewTreeObserver().removeOnPreDrawListener(this);
                    }
                    return ChatActivity.this.fixLayoutInternal();
                }
            });
        }
    }

    public boolean maybePlayVisibleVideo() {
        if (this.chatListView == null) {
            return false;
        }
        MessageObject playingMessage = MediaController.getInstance().getPlayingMessageObject();
        if (playingMessage != null && !playingMessage.isVideo()) {
            return false;
        }
        ImageReceiver imageReceiver;
        MessageObject visibleMessage = null;
        AnimatedFileDrawable visibleAnimation = null;
        if (!(this.noSoundHintView == null || this.noSoundHintView.getTag() == null)) {
            ChatMessageCell cell = this.noSoundHintView.getMessageCell();
            imageReceiver = cell.getPhotoImage();
            visibleAnimation = imageReceiver.getAnimation();
            if (visibleAnimation != null) {
                visibleMessage = cell.getMessageObject();
                this.scrollToVideo = cell.getTop() + imageReceiver.getImageY2() > this.chatListView.getMeasuredHeight();
            }
        }
        if (visibleMessage == null) {
            int count = this.chatListView.getChildCount();
            for (int a = 0; a < count; a++) {
                View child = this.chatListView.getChildAt(a);
                if (child instanceof ChatMessageCell) {
                    ChatMessageCell messageCell = (ChatMessageCell) child;
                    MessageObject messageObject = messageCell.getMessageObject();
                    boolean isRoundVideo = messageObject.isRoundVideo();
                    if (messageObject.isVideo() || isRoundVideo) {
                        imageReceiver = messageCell.getPhotoImage();
                        AnimatedFileDrawable animation = imageReceiver.getAnimation();
                        if (animation != null) {
                            int top = child.getTop() + imageReceiver.getImageY();
                            int bottom = top + imageReceiver.getImageHeight();
                            if (bottom >= 0 && top <= this.chatListView.getMeasuredHeight()) {
                                if (visibleMessage != null && top < 0) {
                                    break;
                                }
                                visibleMessage = messageObject;
                                visibleAnimation = animation;
                                boolean z = top < 0 || bottom > this.chatListView.getMeasuredHeight();
                                this.scrollToVideo = z;
                                if (top >= 0 && bottom <= this.chatListView.getMeasuredHeight()) {
                                    break;
                                }
                            }
                        }
                        continue;
                    }
                }
            }
        }
        if (visibleMessage == null) {
            return false;
        }
        if (MediaController.getInstance().isPlayingMessage(visibleMessage)) {
            return false;
        }
        if (this.noSoundHintView != null) {
            this.noSoundHintView.hide();
        }
        if (this.forwardHintView != null) {
            this.forwardHintView.hide();
        }
        if (visibleMessage.isRoundVideo()) {
            boolean result = MediaController.getInstance().playMessage(visibleMessage);
            MediaController.getInstance().setVoiceMessagesPlaylist(result ? createVoiceMessagesPlaylist(visibleMessage, false) : null, false);
            return result;
        }
        SharedConfig.setNoSoundHintShowed(true);
        visibleMessage.audioProgress = visibleAnimation.getCurrentProgress();
        visibleMessage.audioProgressMs = visibleAnimation.getCurrentProgressMs();
        visibleAnimation.stop();
        if (PhotoViewer.isPlayingMessageInPip(visibleMessage)) {
            PhotoViewer.getPipInstance().destroyPhotoViewer();
        }
        return MediaController.getInstance().playMessage(visibleMessage);
    }

    public void onConfigurationChanged(Configuration newConfig) {
        long j = 0;
        fixLayout();
        if (this.visibleDialog instanceof DatePickerDialog) {
            this.visibleDialog.dismiss();
        }
        if (!AndroidUtilities.isTablet()) {
            if (newConfig.orientation == 2) {
                if (!PhotoViewer.hasInstance() || !PhotoViewer.getInstance().isVisible()) {
                    MessageObject message = MediaController.getInstance().getPlayingMessageObject();
                    if (message != null && message.isVideo()) {
                        PhotoViewer.getInstance().setParentActivity(getParentActivity());
                        FileLoader.getInstance(this.currentAccount).setLoadingVideoForPlayer(message.getDocument(), false);
                        MediaController.getInstance().cleanupPlayer(true, true, false, true);
                        PhotoViewer instance = PhotoViewer.getInstance();
                        long j2 = message.type != 0 ? this.dialog_id : 0;
                        if (message.type != 0) {
                            j = this.mergeDialogId;
                        }
                        if (instance.openPhoto(message, j2, j, this.photoViewerProvider, false)) {
                            PhotoViewer.getInstance().setParentChatActivity(this);
                        }
                        if (this.noSoundHintView != null) {
                            this.noSoundHintView.hide();
                        }
                        if (this.forwardHintView != null) {
                            this.forwardHintView.hide();
                        }
                        MediaController.getInstance().resetGoingToShowMessageObject();
                    }
                }
            } else if (PhotoViewer.hasInstance() && PhotoViewer.getInstance().isOpenedFullScreenVideo()) {
                PhotoViewer.getInstance().injectVideoPlayerToMediaController();
                PhotoViewer.getInstance().closePhoto(false, true);
            }
        }
    }

    private void createDeleteMessagesAlert(MessageObject finalSelectedObject, GroupedMessages selectedGroup) {
        createDeleteMessagesAlert(finalSelectedObject, selectedGroup, 1);
    }

    private void createDeleteMessagesAlert(MessageObject finalSelectedObject, GroupedMessages finalSelectedGroup, int loadParticipant) {
        AlertsCreator.createDeleteMessagesAlert(this, this.currentUser, this.currentChat, this.currentEncryptedChat, this.chatInfo, this.mergeDialogId, finalSelectedObject, this.selectedMessagesIds, finalSelectedGroup, loadParticipant, new ChatActivity$$Lambda$47(this));
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createDeleteMessagesAlert$57$ChatActivity() {
        if (this.actionBar != null) {
            this.actionBar.hideActionMode();
        }
        updatePinnedMessageView(true);
    }

    private void createMenu(View v, boolean single, boolean listView) {
        createMenu(v, single, listView, true);
    }

    /* JADX WARNING: Removed duplicated region for block: B:382:? A:{SYNTHETIC, RETURN} */
    /* JADX WARNING: Removed duplicated region for block: B:101:0x01e5  */
    private void createMenu(android.view.View r30, boolean r31, boolean r32, boolean r33) {
        /*
        r29 = this;
        r0 = r29;
        r4 = r0.actionBar;
        r4 = r4.isActionModeShowed();
        if (r4 == 0) goto L_0x000b;
    L_0x000a:
        return;
    L_0x000b:
        r24 = 0;
        r0 = r30;
        r4 = r0 instanceof org.telegram.ui.Cells.ChatMessageCell;
        if (r4 == 0) goto L_0x0044;
    L_0x0013:
        r30 = (org.telegram.ui.Cells.ChatMessageCell) r30;
        r24 = r30.getMessageObject();
    L_0x0019:
        if (r24 == 0) goto L_0x000a;
    L_0x001b:
        r0 = r29;
        r1 = r24;
        r26 = r0.getMessageType(r1);
        if (r31 == 0) goto L_0x0051;
    L_0x0025:
        r0 = r24;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionPinMessage;
        if (r4 == 0) goto L_0x0051;
    L_0x002f:
        r0 = r24;
        r4 = r0.messageOwner;
        r5 = r4.reply_to_msg_id;
        r0 = r24;
        r4 = r0.messageOwner;
        r6 = r4.id;
        r7 = 1;
        r8 = 0;
        r9 = 0;
        r4 = r29;
        r4.scrollToMessageId(r5, r6, r7, r8, r9);
        goto L_0x000a;
    L_0x0044:
        r0 = r30;
        r4 = r0 instanceof org.telegram.ui.Cells.ChatActionCell;
        if (r4 == 0) goto L_0x0019;
    L_0x004a:
        r30 = (org.telegram.ui.Cells.ChatActionCell) r30;
        r24 = r30.getMessageObject();
        goto L_0x0019;
    L_0x0051:
        r4 = 0;
        r0 = r29;
        r0.selectedObject = r4;
        r4 = 0;
        r0 = r29;
        r0.selectedObjectGroup = r4;
        r4 = 0;
        r0 = r29;
        r0.forwardingMessage = r4;
        r4 = 0;
        r0 = r29;
        r0.forwardingMessageGroup = r4;
        r10 = 1;
    L_0x0066:
        if (r10 < 0) goto L_0x0086;
    L_0x0068:
        r0 = r29;
        r4 = r0.selectedMessagesCanCopyIds;
        r4 = r4[r10];
        r4.clear();
        r0 = r29;
        r4 = r0.selectedMessagesCanStarIds;
        r4 = r4[r10];
        r4.clear();
        r0 = r29;
        r4 = r0.selectedMessagesIds;
        r4 = r4[r10];
        r4.clear();
        r10 = r10 + -1;
        goto L_0x0066;
    L_0x0086:
        r4 = 0;
        r0 = r29;
        r0.cantDeleteMessagesCount = r4;
        r4 = 0;
        r0 = r29;
        r0.canEditMessagesCount = r4;
        r0 = r29;
        r4 = r0.actionBar;
        r4.hideActionMode();
        r4 = 1;
        r0 = r29;
        r0.updatePinnedMessageView(r4);
        if (r33 == 0) goto L_0x027b;
    L_0x009f:
        r0 = r29;
        r1 = r24;
        r21 = r0.getValidGroupedMessage(r1);
    L_0x00a7:
        r12 = 1;
        r0 = r29;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x0282;
    L_0x00ae:
        r4 = r24.getDialogId();
        r0 = r29;
        r6 = r0.mergeDialogId;
        r4 = (r4 > r6 ? 1 : (r4 == r6 ? 0 : -1));
        if (r4 == 0) goto L_0x027f;
    L_0x00ba:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.canPinMessages(r4);
        if (r4 == 0) goto L_0x027f;
    L_0x00c4:
        r14 = 1;
    L_0x00c5:
        if (r14 == 0) goto L_0x029c;
    L_0x00c7:
        r4 = r24.getId();
        if (r4 <= 0) goto L_0x029c;
    L_0x00cd:
        r0 = r24;
        r4 = r0.messageOwner;
        r4 = r4.action;
        if (r4 == 0) goto L_0x00df;
    L_0x00d5:
        r0 = r24;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionEmpty;
        if (r4 == 0) goto L_0x029c;
    L_0x00df:
        r14 = 1;
    L_0x00e0:
        r4 = r24.getDialogId();
        r0 = r29;
        r6 = r0.mergeDialogId;
        r4 = (r4 > r6 ? 1 : (r4 == r6 ? 0 : -1));
        if (r4 == 0) goto L_0x029f;
    L_0x00ec:
        if (r14 == 0) goto L_0x029f;
    L_0x00ee:
        r0 = r29;
        r4 = r0.chatInfo;
        if (r4 == 0) goto L_0x0100;
    L_0x00f4:
        r0 = r29;
        r4 = r0.chatInfo;
        r4 = r4.pinned_msg_id;
        r5 = r24.getId();
        if (r4 == r5) goto L_0x0112;
    L_0x0100:
        r0 = r29;
        r4 = r0.userInfo;
        if (r4 == 0) goto L_0x029f;
    L_0x0106:
        r0 = r29;
        r4 = r0.userInfo;
        r4 = r4.pinned_msg_id;
        r5 = r24.getId();
        if (r4 != r5) goto L_0x029f;
    L_0x0112:
        r15 = 1;
    L_0x0113:
        if (r21 != 0) goto L_0x02a2;
    L_0x0115:
        r0 = r29;
        r4 = r0.currentChat;
        r0 = r24;
        r4 = r0.canEditMessage(r4);
        if (r4 == 0) goto L_0x02a2;
    L_0x0121:
        r0 = r29;
        r4 = r0.chatActivityEnterView;
        r4 = r4.hasAudioToSend();
        if (r4 != 0) goto L_0x02a2;
    L_0x012b:
        r4 = r24.getDialogId();
        r0 = r29;
        r6 = r0.mergeDialogId;
        r4 = (r4 > r6 ? 1 : (r4 == r6 ? 0 : -1));
        if (r4 == 0) goto L_0x02a2;
    L_0x0137:
        r13 = 1;
    L_0x0138:
        r0 = r29;
        r4 = r0.currentEncryptedChat;
        if (r4 == 0) goto L_0x014c;
    L_0x013e:
        r0 = r29;
        r4 = r0.currentEncryptedChat;
        r4 = r4.layer;
        r4 = org.telegram.messenger.AndroidUtilities.getPeerLayerVersion(r4);
        r5 = 46;
        if (r4 < r5) goto L_0x01c5;
    L_0x014c:
        r4 = 1;
        r0 = r26;
        if (r0 != r4) goto L_0x0163;
    L_0x0151:
        r4 = r24.getDialogId();
        r0 = r29;
        r6 = r0.mergeDialogId;
        r4 = (r4 > r6 ? 1 : (r4 == r6 ? 0 : -1));
        if (r4 == 0) goto L_0x01c5;
    L_0x015d:
        r4 = r24.needDrawBluredPreview();
        if (r4 != 0) goto L_0x01c5;
    L_0x0163:
        r0 = r24;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionSecureValuesSent;
        if (r4 != 0) goto L_0x01c5;
    L_0x016d:
        r0 = r29;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x0179;
    L_0x0173:
        r4 = r24.getId();
        if (r4 < 0) goto L_0x01c5;
    L_0x0179:
        r0 = r29;
        r4 = r0.bottomOverlayChat;
        if (r4 == 0) goto L_0x0189;
    L_0x017f:
        r0 = r29;
        r4 = r0.bottomOverlayChat;
        r4 = r4.getVisibility();
        if (r4 == 0) goto L_0x01c5;
    L_0x0189:
        r0 = r29;
        r4 = r0.isBroadcast;
        if (r4 != 0) goto L_0x01c5;
    L_0x018f:
        r0 = r29;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x01c6;
    L_0x0195:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isNotInChat(r4);
        if (r4 != 0) goto L_0x01c5;
    L_0x019f:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x01bb;
    L_0x01a9:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.canPost(r4);
        if (r4 != 0) goto L_0x01bb;
    L_0x01b3:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = r4.megagroup;
        if (r4 == 0) goto L_0x01c5;
    L_0x01bb:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.canSendMessages(r4);
        if (r4 != 0) goto L_0x01c6;
    L_0x01c5:
        r12 = 0;
    L_0x01c6:
        if (r31 != 0) goto L_0x01df;
    L_0x01c8:
        r4 = 2;
        r0 = r26;
        if (r0 < r4) goto L_0x01df;
    L_0x01cd:
        r4 = 20;
        r0 = r26;
        if (r0 == r4) goto L_0x01df;
    L_0x01d3:
        r4 = r24.needDrawBluredPreview();
        if (r4 != 0) goto L_0x01df;
    L_0x01d9:
        r4 = r24.isLiveLocation();
        if (r4 == 0) goto L_0x0d3e;
    L_0x01df:
        r4 = r29.getParentActivity();
        if (r4 == 0) goto L_0x000a;
    L_0x01e5:
        r23 = new java.util.ArrayList;
        r23.<init>();
        r25 = new java.util.ArrayList;
        r25.<init>();
        if (r26 >= 0) goto L_0x020a;
    L_0x01f1:
        r4 = -1;
        r0 = r26;
        if (r0 != r4) goto L_0x0235;
    L_0x01f6:
        if (r31 == 0) goto L_0x0235;
    L_0x01f8:
        r4 = r24.isSending();
        if (r4 != 0) goto L_0x0204;
    L_0x01fe:
        r4 = r24.isEditing();
        if (r4 == 0) goto L_0x0235;
    L_0x0204:
        r0 = r29;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x0235;
    L_0x020a:
        r0 = r24;
        r1 = r29;
        r1.selectedObject = r0;
        r0 = r21;
        r1 = r29;
        r1.selectedObjectGroup = r0;
        r4 = -1;
        r0 = r26;
        if (r0 != r4) goto L_0x02a5;
    L_0x021b:
        r4 = "CancelSending";
        r5 = NUM; // 0x7f0CLASSNAMEce float:1.861013E38 double:1.0530976267E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 24;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0235:
        r4 = r25.isEmpty();
        if (r4 != 0) goto L_0x000a;
    L_0x023b:
        r18 = new org.telegram.ui.ActionBar.AlertDialog$Builder;
        r4 = r29.getParentActivity();
        r0 = r18;
        r0.<init>(r4);
        r4 = 0;
        r4 = new java.lang.CharSequence[r4];
        r0 = r23;
        r20 = r0.toArray(r4);
        r20 = (java.lang.CharSequence[]) r20;
        r4 = new org.telegram.ui.ChatActivity$$Lambda$48;
        r0 = r29;
        r1 = r25;
        r4.<init>(r0, r1);
        r0 = r18;
        r1 = r20;
        r0.setItems(r1, r4);
        r4 = "Message";
        r5 = NUM; // 0x7f0CLASSNAME float:1.8611885E38 double:1.0530980546E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r18;
        r0.setTitle(r4);
        r4 = r18.create();
        r0 = r29;
        r0.showDialog(r4);
        goto L_0x000a;
    L_0x027b:
        r21 = 0;
        goto L_0x00a7;
    L_0x027f:
        r14 = 0;
        goto L_0x00c5;
    L_0x0282:
        r0 = r29;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x0299;
    L_0x0288:
        r0 = r29;
        r4 = r0.userInfo;
        if (r4 == 0) goto L_0x0296;
    L_0x028e:
        r0 = r29;
        r4 = r0.userInfo;
        r14 = r4.can_pin_message;
        goto L_0x00c5;
    L_0x0296:
        r14 = 0;
        goto L_0x00c5;
    L_0x0299:
        r14 = 0;
        goto L_0x00c5;
    L_0x029c:
        r14 = 0;
        goto L_0x00e0;
    L_0x029f:
        r15 = 0;
        goto L_0x0113;
    L_0x02a2:
        r13 = 0;
        goto L_0x0138;
    L_0x02a5:
        if (r26 != 0) goto L_0x02db;
    L_0x02a7:
        r4 = "Retry";
        r5 = NUM; // 0x7f0CLASSNAMEd float:1.8613405E38 double:1.0530984246E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 0;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "Delete";
        r5 = NUM; // 0x7f0CLASSNAMEeb float:1.8610707E38 double:1.0530977675E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 1;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0235;
    L_0x02db:
        r4 = 1;
        r0 = r26;
        if (r0 != r4) goto L_0x0498;
    L_0x02e0:
        r0 = r29;
        r4 = r0.currentChat;
        if (r4 == 0) goto L_0x03d9;
    L_0x02e6:
        r0 = r29;
        r4 = r0.isBroadcast;
        if (r4 != 0) goto L_0x03d9;
    L_0x02ec:
        if (r12 == 0) goto L_0x0308;
    L_0x02ee:
        r4 = "Reply";
        r5 = NUM; // 0x7f0CLASSNAMEef float:1.8613311E38 double:1.053098402E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 8;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0308:
        if (r15 == 0) goto L_0x03bb;
    L_0x030a:
        r4 = "UnpinMessage";
        r5 = NUM; // 0x7f0CLASSNAMEb float:1.861405E38 double:1.0530985817E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 14;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0324:
        if (r13 == 0) goto L_0x0340;
    L_0x0326:
        r4 = "Edit";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8610813E38 double:1.053097793E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 12;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0340:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.contentType;
        if (r4 != 0) goto L_0x0394;
    L_0x0348:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.isMediaEmptyWebpage();
        if (r4 != 0) goto L_0x0394;
    L_0x0352:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.getId();
        if (r4 <= 0) goto L_0x0394;
    L_0x035c:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.isOut();
        if (r4 != 0) goto L_0x0394;
    L_0x0366:
        r0 = r29;
        r4 = r0.currentChat;
        if (r4 != 0) goto L_0x037a;
    L_0x036c:
        r0 = r29;
        r4 = r0.currentUser;
        if (r4 == 0) goto L_0x0394;
    L_0x0372:
        r0 = r29;
        r4 = r0.currentUser;
        r4 = r4.bot;
        if (r4 == 0) goto L_0x0394;
    L_0x037a:
        r4 = "ReportChat";
        r5 = NUM; // 0x7f0CLASSNAMEf2 float:1.8613317E38 double:1.0530984034E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 23;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0394:
        r0 = r29;
        r4 = r0.currentChat;
        r0 = r24;
        r4 = r0.canDeleteMessage(r4);
        if (r4 == 0) goto L_0x0235;
    L_0x03a0:
        r4 = "Delete";
        r5 = NUM; // 0x7f0CLASSNAMEeb float:1.8610707E38 double:1.0530977675E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 1;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0235;
    L_0x03bb:
        if (r14 == 0) goto L_0x0324;
    L_0x03bd:
        r4 = "PinMessage";
        r5 = NUM; // 0x7f0CLASSNAMEd float:1.861308E38 double:1.0530983456E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 13;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0324;
    L_0x03d9:
        r0 = r24;
        r4 = r0.messageOwner;
        r4 = r4.action;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageActionPhoneCall;
        if (r4 == 0) goto L_0x043d;
    L_0x03e3:
        r0 = r24;
        r4 = r0.messageOwner;
        r0 = r4.action;
        r19 = r0;
        r19 = (org.telegram.tgnet.TLRPC.TL_messageActionPhoneCall) r19;
        r0 = r19;
        r4 = r0.reason;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_phoneCallDiscardReasonMissed;
        if (r4 != 0) goto L_0x03fd;
    L_0x03f5:
        r0 = r19;
        r4 = r0.reason;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_phoneCallDiscardReasonBusy;
        if (r4 == 0) goto L_0x048c;
    L_0x03fd:
        r4 = r24.isOutOwner();
        if (r4 != 0) goto L_0x048c;
    L_0x0403:
        r4 = "CallBack";
        r5 = NUM; // 0x7f0CLASSNAMEb0 float:1.8610068E38 double:1.053097612E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
    L_0x040d:
        r0 = r23;
        r0.add(r4);
        r4 = 18;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = org.telegram.ui.Components.voip.VoIPHelper.canRateCall(r19);
        if (r4 == 0) goto L_0x043d;
    L_0x0423:
        r4 = "CallMessageReportProblem";
        r5 = NUM; // 0x7f0CLASSNAMEb7 float:1.8610082E38 double:1.0530976154E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 19;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x043d:
        if (r31 == 0) goto L_0x0465;
    L_0x043f:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.getId();
        if (r4 <= 0) goto L_0x0465;
    L_0x0449:
        if (r12 == 0) goto L_0x0465;
    L_0x044b:
        r4 = "Reply";
        r5 = NUM; // 0x7f0CLASSNAMEef float:1.8613311E38 double:1.053098402E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 8;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0465:
        r0 = r29;
        r4 = r0.currentChat;
        r0 = r24;
        r4 = r0.canDeleteMessage(r4);
        if (r4 == 0) goto L_0x0235;
    L_0x0471:
        r4 = "Delete";
        r5 = NUM; // 0x7f0CLASSNAMEeb float:1.8610707E38 double:1.0530977675E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 1;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0235;
    L_0x048c:
        r4 = "CallAgain";
        r5 = NUM; // 0x7f0CLASSNAMEaf float:1.8610066E38 double:1.0530976114E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        goto L_0x040d;
    L_0x0498:
        r4 = 20;
        r0 = r26;
        if (r0 != r4) goto L_0x04eb;
    L_0x049e:
        r4 = "Retry";
        r5 = NUM; // 0x7f0CLASSNAMEd float:1.8613405E38 double:1.0530984246E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 0;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "Copy";
        r5 = NUM; // 0x7f0CLASSNAMEad float:1.8610581E38 double:1.053097737E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 3;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "Delete";
        r5 = NUM; // 0x7f0CLASSNAMEeb float:1.8610707E38 double:1.0530977675E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 1;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0235;
    L_0x04eb:
        r0 = r29;
        r4 = r0.currentEncryptedChat;
        if (r4 != 0) goto L_0x0aed;
    L_0x04f1:
        if (r12 == 0) goto L_0x050d;
    L_0x04f3:
        r4 = "Reply";
        r5 = NUM; // 0x7f0CLASSNAMEef float:1.8613311E38 double:1.053098402E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 8;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x050d:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.type;
        if (r4 == 0) goto L_0x051d;
    L_0x0515:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.caption;
        if (r4 == 0) goto L_0x0536;
    L_0x051d:
        r4 = "Copy";
        r5 = NUM; // 0x7f0CLASSNAMEad float:1.8610581E38 double:1.053097737E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 3;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0536:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x056e;
    L_0x0540:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = r4.megagroup;
        if (r4 == 0) goto L_0x056e;
    L_0x0548:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = r4.username;
        r4 = android.text.TextUtils.isEmpty(r4);
        if (r4 != 0) goto L_0x056e;
    L_0x0554:
        r4 = "CopyLink";
        r5 = NUM; // 0x7f0CLASSNAMEae float:1.8610583E38 double:1.0530977374E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 22;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x056e:
        r4 = 2;
        r0 = r26;
        if (r0 != r4) goto L_0x06dd;
    L_0x0573:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.type;
        r5 = 17;
        if (r4 != r5) goto L_0x0607;
    L_0x057d:
        r4 = r24.isPollClosed();
        if (r4 != 0) goto L_0x0607;
    L_0x0583:
        r4 = r24.isVoted();
        if (r4 == 0) goto L_0x05a3;
    L_0x0589:
        r4 = "Unvote";
        r5 = NUM; // 0x7f0CLASSNAME float:1.861406E38 double:1.053098584E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 25;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x05a3:
        r4 = r24.isForwarded();
        if (r4 != 0) goto L_0x0607;
    L_0x05a9:
        r4 = r24.isOut();
        if (r4 == 0) goto L_0x05c1;
    L_0x05af:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x05ed;
    L_0x05b9:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = r4.megagroup;
        if (r4 != 0) goto L_0x05ed;
    L_0x05c1:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = org.telegram.messenger.ChatObject.isChannel(r4);
        if (r4 == 0) goto L_0x0607;
    L_0x05cb:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = r4.megagroup;
        if (r4 != 0) goto L_0x0607;
    L_0x05d3:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = r4.creator;
        if (r4 != 0) goto L_0x05ed;
    L_0x05db:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = r4.admin_rights;
        if (r4 == 0) goto L_0x0607;
    L_0x05e3:
        r0 = r29;
        r4 = r0.currentChat;
        r4 = r4.admin_rights;
        r4 = r4.edit_messages;
        if (r4 == 0) goto L_0x0607;
    L_0x05ed:
        r4 = "StopPoll";
        r5 = NUM; // 0x7f0CLASSNAMEed float:1.8613826E38 double:1.0530985274E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 26;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0607:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.needDrawBluredPreview();
        if (r4 != 0) goto L_0x0634;
    L_0x0611:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.isLiveLocation();
        if (r4 != 0) goto L_0x0634;
    L_0x061b:
        r4 = "Forward";
        r5 = NUM; // 0x7f0CLASSNAMEe6 float:1.8611216E38 double:1.0530978915E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 2;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0634:
        if (r15 == 0) goto L_0x0acf;
    L_0x0636:
        r4 = "UnpinMessage";
        r5 = NUM; // 0x7f0CLASSNAMEb float:1.861405E38 double:1.0530985817E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 14;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0650:
        if (r13 == 0) goto L_0x066c;
    L_0x0652:
        r4 = "Edit";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8610813E38 double:1.053097793E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 12;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x066c:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.contentType;
        if (r4 != 0) goto L_0x06b6;
    L_0x0674:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.getId();
        if (r4 <= 0) goto L_0x06b6;
    L_0x067e:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.isOut();
        if (r4 != 0) goto L_0x06b6;
    L_0x0688:
        r0 = r29;
        r4 = r0.currentChat;
        if (r4 != 0) goto L_0x069c;
    L_0x068e:
        r0 = r29;
        r4 = r0.currentUser;
        if (r4 == 0) goto L_0x06b6;
    L_0x0694:
        r0 = r29;
        r4 = r0.currentUser;
        r4 = r4.bot;
        if (r4 == 0) goto L_0x06b6;
    L_0x069c:
        r4 = "ReportChat";
        r5 = NUM; // 0x7f0CLASSNAMEf2 float:1.8613317E38 double:1.0530984034E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 23;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x06b6:
        r0 = r29;
        r4 = r0.currentChat;
        r0 = r24;
        r4 = r0.canDeleteMessage(r4);
        if (r4 == 0) goto L_0x0235;
    L_0x06c2:
        r4 = "Delete";
        r5 = NUM; // 0x7f0CLASSNAMEeb float:1.8610707E38 double:1.0530977675E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 1;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0235;
    L_0x06dd:
        r4 = 3;
        r0 = r26;
        if (r0 != r4) goto L_0x071c;
    L_0x06e2:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.messageOwner;
        r4 = r4.media;
        r4 = r4 instanceof org.telegram.tgnet.TLRPC.TL_messageMediaWebPage;
        if (r4 == 0) goto L_0x0607;
    L_0x06ee:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.messageOwner;
        r4 = r4.media;
        r4 = r4.webpage;
        r4 = r4.document;
        r4 = org.telegram.messenger.MessageObject.isNewGifDocument(r4);
        if (r4 == 0) goto L_0x0607;
    L_0x0700:
        r4 = "SaveToGIFs";
        r5 = NUM; // 0x7f0CLASSNAMEc float:1.8613435E38 double:1.053098432E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 11;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x071c:
        r4 = 4;
        r0 = r26;
        if (r0 != r4) goto L_0x0834;
    L_0x0721:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.isVideo();
        if (r4 == 0) goto L_0x0769;
    L_0x072b:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.needDrawBluredPreview();
        if (r4 != 0) goto L_0x0607;
    L_0x0735:
        r4 = "SaveToGallery";
        r5 = NUM; // 0x7f0CLASSNAMEd float:1.8613437E38 double:1.0530984325E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 4;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "ShareFile";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8613668E38 double:1.053098489E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 6;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x0769:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.isMusic();
        if (r4 == 0) goto L_0x07a8;
    L_0x0773:
        r4 = "SaveToMusic";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8613441E38 double:1.0530984335E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 10;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "ShareFile";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8613668E38 double:1.053098489E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 6;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x07a8:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.getDocument();
        if (r4 == 0) goto L_0x080f;
    L_0x07b2:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.getDocument();
        r4 = org.telegram.messenger.MessageObject.isNewGifDocument(r4);
        if (r4 == 0) goto L_0x07da;
    L_0x07c0:
        r4 = "SaveToGIFs";
        r5 = NUM; // 0x7f0CLASSNAMEc float:1.8613435E38 double:1.053098432E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 11;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x07da:
        r4 = "SaveToDownloads";
        r5 = NUM; // 0x7f0CLASSNAMEb float:1.8613433E38 double:1.0530984315E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 10;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "ShareFile";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8613668E38 double:1.053098489E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 6;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x080f:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.needDrawBluredPreview();
        if (r4 != 0) goto L_0x0607;
    L_0x0819:
        r4 = "SaveToGallery";
        r5 = NUM; // 0x7f0CLASSNAMEd float:1.8613437E38 double:1.0530984325E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 4;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x0834:
        r4 = 5;
        r0 = r26;
        if (r0 != r4) goto L_0x0887;
    L_0x0839:
        r4 = "ApplyLocalizationFile";
        r5 = NUM; // 0x7f0CLASSNAMEe3 float:1.8609652E38 double:1.0530975106E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 5;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "SaveToDownloads";
        r5 = NUM; // 0x7f0CLASSNAMEb float:1.8613433E38 double:1.0530984315E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 10;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "ShareFile";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8613668E38 double:1.053098489E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 6;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x0887:
        r4 = 10;
        r0 = r26;
        if (r0 != r4) goto L_0x08db;
    L_0x088d:
        r4 = "ApplyThemeFile";
        r5 = NUM; // 0x7f0CLASSNAMEe5 float:1.8609656E38 double:1.0530975116E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 5;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "SaveToDownloads";
        r5 = NUM; // 0x7f0CLASSNAMEb float:1.8613433E38 double:1.0530984315E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 10;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "ShareFile";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8613668E38 double:1.053098489E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 6;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x08db:
        r4 = 6;
        r0 = r26;
        if (r0 != r4) goto L_0x092e;
    L_0x08e0:
        r4 = "SaveToGallery";
        r5 = NUM; // 0x7f0CLASSNAMEd float:1.8613437E38 double:1.0530984325E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 7;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "SaveToDownloads";
        r5 = NUM; // 0x7f0CLASSNAMEb float:1.8613433E38 double:1.0530984315E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 10;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "ShareFile";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8613668E38 double:1.053098489E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 6;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x092e:
        r4 = 7;
        r0 = r26;
        if (r0 != r4) goto L_0x09cf;
    L_0x0933:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.isMask();
        if (r4 == 0) goto L_0x0959;
    L_0x093d:
        r4 = "AddToMasks";
        r5 = NUM; // 0x7f0CLASSNAMEb3 float:1.8609555E38 double:1.053097487E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 9;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x0959:
        r4 = "AddToStickers";
        r5 = NUM; // 0x7f0CLASSNAMEb4 float:1.8609557E38 double:1.0530974874E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 9;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r0 = r29;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.DataQuery.getInstance(r4);
        r0 = r29;
        r5 = r0.selectedObject;
        r5 = r5.getDocument();
        r4 = r4.isStickerInFavorites(r5);
        if (r4 != 0) goto L_0x09b3;
    L_0x0989:
        r0 = r29;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.DataQuery.getInstance(r4);
        r4 = r4.canAddStickerToFavorites();
        if (r4 == 0) goto L_0x0607;
    L_0x0997:
        r4 = "AddToFavorites";
        r5 = NUM; // 0x7f0CLASSNAMEb2 float:1.8609553E38 double:1.0530974864E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 20;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x09b3:
        r4 = "DeleteFromFavorites";
        r5 = NUM; // 0x7f0CLASSNAMEfa float:1.8610737E38 double:1.053097775E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 21;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x09cf:
        r4 = 8;
        r0 = r26;
        if (r0 != r4) goto L_0x0a7b;
    L_0x09d5:
        r0 = r29;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r29;
        r5 = r0.selectedObject;
        r5 = r5.messageOwner;
        r5 = r5.media;
        r5 = r5.user_id;
        r5 = java.lang.Integer.valueOf(r5);
        r27 = r4.getUser(r5);
        if (r27 == 0) goto L_0x0a35;
    L_0x09f1:
        r0 = r27;
        r4 = r0.id;
        r0 = r29;
        r5 = r0.currentAccount;
        r5 = org.telegram.messenger.UserConfig.getInstance(r5);
        r5 = r5.getClientUserId();
        if (r4 == r5) goto L_0x0a35;
    L_0x0a03:
        r0 = r29;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.ContactsController.getInstance(r4);
        r4 = r4.contactsDict;
        r0 = r27;
        r5 = r0.id;
        r5 = java.lang.Integer.valueOf(r5);
        r4 = r4.get(r5);
        if (r4 != 0) goto L_0x0a35;
    L_0x0a1b:
        r4 = "AddContactTitle";
        r5 = NUM; // 0x7f0CLASSNAMEa3 float:1.8609523E38 double:1.053097479E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 15;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0a35:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.messageOwner;
        r4 = r4.media;
        r4 = r4.phone_number;
        r4 = android.text.TextUtils.isEmpty(r4);
        if (r4 != 0) goto L_0x0607;
    L_0x0a45:
        r4 = "Copy";
        r5 = NUM; // 0x7f0CLASSNAMEad float:1.8610581E38 double:1.053097737E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 16;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "Call";
        r5 = NUM; // 0x7f0CLASSNAMEae float:1.8610064E38 double:1.053097611E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 17;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x0a7b:
        r4 = 9;
        r0 = r26;
        if (r0 != r4) goto L_0x0607;
    L_0x0a81:
        r0 = r29;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.DataQuery.getInstance(r4);
        r0 = r29;
        r5 = r0.selectedObject;
        r5 = r5.getDocument();
        r4 = r4.isStickerInFavorites(r5);
        if (r4 != 0) goto L_0x0ab3;
    L_0x0a97:
        r4 = "AddToFavorites";
        r5 = NUM; // 0x7f0CLASSNAMEb2 float:1.8609553E38 double:1.0530974864E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 20;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x0ab3:
        r4 = "DeleteFromFavorites";
        r5 = NUM; // 0x7f0CLASSNAMEfa float:1.8610737E38 double:1.053097775E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 21;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0607;
    L_0x0acf:
        if (r14 == 0) goto L_0x0650;
    L_0x0ad1:
        r4 = "PinMessage";
        r5 = NUM; // 0x7f0CLASSNAMEd float:1.861308E38 double:1.0530983456E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 13;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0650;
    L_0x0aed:
        if (r12 == 0) goto L_0x0b09;
    L_0x0aef:
        r4 = "Reply";
        r5 = NUM; // 0x7f0CLASSNAMEef float:1.8613311E38 double:1.053098402E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 8;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0b09:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.type;
        if (r4 == 0) goto L_0x0b19;
    L_0x0b11:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.caption;
        if (r4 == 0) goto L_0x0b32;
    L_0x0b19:
        r4 = "Copy";
        r5 = NUM; // 0x7f0CLASSNAMEad float:1.8610581E38 double:1.053097737E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 3;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0b32:
        r4 = 4;
        r0 = r26;
        if (r0 != r4) goto L_0x0CLASSNAME;
    L_0x0b37:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.isVideo();
        if (r4 == 0) goto L_0x0b8e;
    L_0x0b41:
        r4 = "SaveToGallery";
        r5 = NUM; // 0x7f0CLASSNAMEd float:1.8613437E38 double:1.0530984325E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 4;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "ShareFile";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8613668E38 double:1.053098489E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 6;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0b73:
        r4 = "Delete";
        r5 = NUM; // 0x7f0CLASSNAMEeb float:1.8610707E38 double:1.0530977675E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 1;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0235;
    L_0x0b8e:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.isMusic();
        if (r4 == 0) goto L_0x0bcc;
    L_0x0b98:
        r4 = "SaveToMusic";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8613441E38 double:1.0530984335E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 10;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "ShareFile";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8613668E38 double:1.053098489E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 6;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0b73;
    L_0x0bcc:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.isVideo();
        if (r4 != 0) goto L_0x0CLASSNAME;
    L_0x0bd6:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.getDocument();
        if (r4 == 0) goto L_0x0CLASSNAME;
    L_0x0be0:
        r4 = "SaveToDownloads";
        r5 = NUM; // 0x7f0CLASSNAMEb float:1.8613433E38 double:1.0530984315E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 10;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "ShareFile";
        r5 = NUM; // 0x7f0CLASSNAMEf float:1.8613668E38 double:1.053098489E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 6;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0b73;
    L_0x0CLASSNAME:
        r4 = "SaveToGallery";
        r5 = NUM; // 0x7f0CLASSNAMEd float:1.8613437E38 double:1.0530984325E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 4;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0b73;
    L_0x0CLASSNAME:
        r4 = 5;
        r0 = r26;
        if (r0 != r4) goto L_0x0CLASSNAME;
    L_0x0CLASSNAME:
        r4 = "ApplyLocalizationFile";
        r5 = NUM; // 0x7f0CLASSNAMEe3 float:1.8609652E38 double:1.0530975106E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 5;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0b73;
    L_0x0CLASSNAME:
        r4 = 10;
        r0 = r26;
        if (r0 != r4) goto L_0x0CLASSNAME;
    L_0x0CLASSNAME:
        r4 = "ApplyThemeFile";
        r5 = NUM; // 0x7f0CLASSNAMEe5 float:1.8609656E38 double:1.0530975116E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 5;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0b73;
    L_0x0CLASSNAME:
        r4 = 7;
        r0 = r26;
        if (r0 != r4) goto L_0x0CLASSNAME;
    L_0x0CLASSNAME:
        r4 = "AddToStickers";
        r5 = NUM; // 0x7f0CLASSNAMEb4 float:1.8609557E38 double:1.0530974874E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 9;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0b73;
    L_0x0CLASSNAME:
        r4 = 8;
        r0 = r26;
        if (r0 != r4) goto L_0x0b73;
    L_0x0CLASSNAME:
        r0 = r29;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.MessagesController.getInstance(r4);
        r0 = r29;
        r5 = r0.selectedObject;
        r5 = r5.messageOwner;
        r5 = r5.media;
        r5 = r5.user_id;
        r5 = java.lang.Integer.valueOf(r5);
        r27 = r4.getUser(r5);
        if (r27 == 0) goto L_0x0cf8;
    L_0x0cb4:
        r0 = r27;
        r4 = r0.id;
        r0 = r29;
        r5 = r0.currentAccount;
        r5 = org.telegram.messenger.UserConfig.getInstance(r5);
        r5 = r5.getClientUserId();
        if (r4 == r5) goto L_0x0cf8;
    L_0x0cc6:
        r0 = r29;
        r4 = r0.currentAccount;
        r4 = org.telegram.messenger.ContactsController.getInstance(r4);
        r4 = r4.contactsDict;
        r0 = r27;
        r5 = r0.id;
        r5 = java.lang.Integer.valueOf(r5);
        r4 = r4.get(r5);
        if (r4 != 0) goto L_0x0cf8;
    L_0x0cde:
        r4 = "AddContactTitle";
        r5 = NUM; // 0x7f0CLASSNAMEa3 float:1.8609523E38 double:1.053097479E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 15;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
    L_0x0cf8:
        r0 = r29;
        r4 = r0.selectedObject;
        r4 = r4.messageOwner;
        r4 = r4.media;
        r4 = r4.phone_number;
        r4 = android.text.TextUtils.isEmpty(r4);
        if (r4 != 0) goto L_0x0b73;
    L_0x0d08:
        r4 = "Copy";
        r5 = NUM; // 0x7f0CLASSNAMEad float:1.8610581E38 double:1.053097737E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 16;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        r4 = "Call";
        r5 = NUM; // 0x7f0CLASSNAMEae float:1.8610064E38 double:1.053097611E-314;
        r4 = org.telegram.messenger.LocaleController.getString(r4, r5);
        r0 = r23;
        r0.add(r4);
        r4 = 17;
        r4 = java.lang.Integer.valueOf(r4);
        r0 = r25;
        r0.add(r4);
        goto L_0x0b73;
    L_0x0d3e:
        r0 = r29;
        r4 = r0.actionBar;
        r11 = r4.createActionMode();
        r4 = 11;
        r22 = r11.getItem(r4);
        if (r22 == 0) goto L_0x0d54;
    L_0x0d4e:
        r4 = 0;
        r0 = r22;
        r0.setVisibility(r4);
    L_0x0d54:
        r4 = 12;
        r22 = r11.getItem(r4);
        if (r22 == 0) goto L_0x0d62;
    L_0x0d5c:
        r4 = 0;
        r0 = r22;
        r0.setVisibility(r4);
    L_0x0d62:
        r0 = r29;
        r4 = r0.actionBar;
        r4.showActionMode();
        r4 = 1;
        r0 = r29;
        r0.updatePinnedMessageView(r4);
        r16 = new android.animation.AnimatorSet;
        r16.<init>();
        r17 = new java.util.ArrayList;
        r17.<init>();
        r10 = 0;
    L_0x0d7a:
        r0 = r29;
        r4 = r0.actionModeViews;
        r4 = r4.size();
        if (r10 >= r4) goto L_0x0db4;
    L_0x0d84:
        r0 = r29;
        r4 = r0.actionModeViews;
        r28 = r4.get(r10);
        r28 = (android.view.View) r28;
        r4 = org.telegram.ui.ActionBar.ActionBar.getCurrentActionBarHeight();
        r4 = r4 / 2;
        r4 = (float) r4;
        r0 = r28;
        r0.setPivotY(r4);
        org.telegram.messenger.AndroidUtilities.clearDrawableAnimation(r28);
        r4 = "scaleY";
        r5 = 2;
        r5 = new float[r5];
        r5 = {NUM, NUM};
        r0 = r28;
        r4 = android.animation.ObjectAnimator.ofFloat(r0, r4, r5);
        r0 = r17;
        r0.add(r4);
        r10 = r10 + 1;
        goto L_0x0d7a;
    L_0x0db4:
        r16.playTogether(r17);
        r4 = 250; // 0xfa float:3.5E-43 double:1.235E-321;
        r0 = r16;
        r0.setDuration(r4);
        r16.start();
        r0 = r29;
        r1 = r24;
        r2 = r32;
        r0.addToSelectedMessages(r1, r2);
        r0 = r29;
        r4 = r0.selectedMessagesCountTextView;
        r0 = r29;
        r5 = r0.selectedMessagesIds;
        r6 = 0;
        r5 = r5[r6];
        r5 = r5.size();
        r0 = r29;
        r6 = r0.selectedMessagesIds;
        r7 = 1;
        r6 = r6[r7];
        r6 = r6.size();
        r5 = r5 + r6;
        r6 = 0;
        r4.setNumber(r5, r6);
        r29.updateVisibleRows();
        goto L_0x000a;
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.createMenu(android.view.View, boolean, boolean, boolean):void");
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$createMenu$58$ChatActivity(ArrayList options, DialogInterface dialogInterface, int i) {
        if (this.selectedObject != null && i >= 0 && i < options.size()) {
            processSelectedOption(((Integer) options.get(i)).intValue());
        }
    }

    private void startEditingMessageObject(MessageObject messageObject) {
        if (messageObject != null && getParentActivity() != null) {
            if (this.searchItem != null && this.actionBar.isSearchFieldVisible()) {
                this.actionBar.closeSearchField();
                this.chatActivityEnterView.setFieldFocused();
            }
            this.mentionsAdapter.setNeedBotContext(false);
            this.chatListView.setOnItemLongClickListener((OnItemLongClickListenerExtended) null);
            this.chatListView.setOnItemClickListener((OnItemClickListenerExtended) null);
            this.chatListView.setClickable(false);
            this.chatListView.setLongClickable(false);
            this.chatActivityEnterView.setVisibility(0);
            showFieldPanelForEdit(true, messageObject);
            updateBottomOverlay();
            checkEditTimer();
            this.chatActivityEnterView.setAllowStickersAndGifs(false, false);
            updatePinnedMessageView(true);
            updateVisibleRows();
            TL_messages_getMessageEditData req = new TL_messages_getMessageEditData();
            req.peer = MessagesController.getInstance(this.currentAccount).getInputPeer((int) this.dialog_id);
            req.id = messageObject.getId();
            this.editingMessageObjectReqId = ConnectionsManager.getInstance(this.currentAccount).sendRequest(req, new ChatActivity$$Lambda$49(this));
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$startEditingMessageObject$60$ChatActivity(TLObject response, TL_error error) {
        AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$69(this, response));
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$59$ChatActivity(TLObject response) {
        this.editingMessageObjectReqId = 0;
        if (response == null) {
            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
            builder.setTitle(LocaleController.getString("AppName", NUM));
            builder.setMessage(LocaleController.getString("EditMessageError", NUM));
            builder.setPositiveButton(LocaleController.getString("OK", NUM), null);
            showDialog(builder.create());
            if (this.chatActivityEnterView != null) {
                this.chatActivityEnterView.setEditingMessageObject(null, false);
                hideFieldPanel();
            }
        } else if (this.chatActivityEnterView != null) {
            this.chatActivityEnterView.showEditDoneProgress(false, true);
        }
    }

    private String getMessageContent(MessageObject messageObject, int previousUid, boolean name) {
        String str = "";
        if (name && previousUid != messageObject.messageOwner.from_id) {
            if (messageObject.messageOwner.from_id > 0) {
                User user = MessagesController.getInstance(this.currentAccount).getUser(Integer.valueOf(messageObject.messageOwner.from_id));
                if (user != null) {
                    str = ContactsController.formatName(user.first_name, user.last_name) + ":\n";
                }
            } else if (messageObject.messageOwner.from_id < 0) {
                Chat chat = MessagesController.getInstance(this.currentAccount).getChat(Integer.valueOf(-messageObject.messageOwner.from_id));
                if (chat != null) {
                    str = chat.title + ":\n";
                }
            }
        }
        if (messageObject.type == 0 && messageObject.messageOwner.message != null) {
            return str + messageObject.messageOwner.message;
        }
        if (messageObject.messageOwner.media == null || messageObject.messageOwner.message == null) {
            return str + messageObject.messageText;
        }
        return str + messageObject.messageOwner.message;
    }

    private void saveMessageToGallery(MessageObject messageObject) {
        String path = messageObject.messageOwner.attachPath;
        if (!(TextUtils.isEmpty(path) || new File(path).exists())) {
            path = null;
        }
        if (TextUtils.isEmpty(path)) {
            path = FileLoader.getPathToMessage(messageObject.messageOwner).toString();
        }
        MediaController.saveFile(path, getParentActivity(), messageObject.isVideo() ? 1 : 0, null, null);
    }

    private void processSelectedOption(int option) {
        if (this.selectedObject != null && getParentActivity() != null) {
            int a;
            Bundle args;
            File file;
            AlertDialog.Builder builder;
            String path;
            Intent intent;
            switch (option) {
                case 0:
                    if (this.selectedObjectGroup == null) {
                        if (SendMessagesHelper.getInstance(this.currentAccount).retrySendMessage(this.selectedObject, false)) {
                            updateVisibleRows();
                            moveScrollToLastMessage();
                            break;
                        }
                    }
                    boolean success = true;
                    for (a = 0; a < this.selectedObjectGroup.messages.size(); a++) {
                        if (!SendMessagesHelper.getInstance(this.currentAccount).retrySendMessage((MessageObject) this.selectedObjectGroup.messages.get(a), false)) {
                            success = false;
                        }
                    }
                    if (success) {
                        moveScrollToLastMessage();
                        break;
                    }
                    break;
                case 1:
                    if (getParentActivity() != null) {
                        createDeleteMessagesAlert(this.selectedObject, this.selectedObjectGroup);
                        break;
                    }
                    this.selectedObject = null;
                    this.selectedObjectGroup = null;
                    return;
                case 2:
                    this.forwardingMessage = this.selectedObject;
                    this.forwardingMessageGroup = this.selectedObjectGroup;
                    args = new Bundle();
                    args.putBoolean("onlySelect", true);
                    args.putInt("dialogsType", 3);
                    BaseFragment dialogsActivity = new DialogsActivity(args);
                    dialogsActivity.setDelegate(this);
                    presentFragment(dialogsActivity);
                    break;
                case 3:
                    AndroidUtilities.addToClipboard(getMessageContent(this.selectedObject, 0, false));
                    break;
                case 4:
                    if (VERSION.SDK_INT < 23 || getParentActivity().checkSelfPermission("android.permission.WRITE_EXTERNAL_STORAGE") == 0) {
                        if (this.selectedObjectGroup == null) {
                            saveMessageToGallery(this.selectedObject);
                            break;
                        }
                        for (a = 0; a < this.selectedObjectGroup.messages.size(); a++) {
                            saveMessageToGallery((MessageObject) this.selectedObjectGroup.messages.get(a));
                        }
                        break;
                    }
                    getParentActivity().requestPermissions(new String[]{"android.permission.WRITE_EXTERNAL_STORAGE"}, 4);
                    this.selectedObject = null;
                    this.selectedObjectGroup = null;
                    return;
                case 5:
                    File locFile = null;
                    if (!TextUtils.isEmpty(this.selectedObject.messageOwner.attachPath)) {
                        file = new File(this.selectedObject.messageOwner.attachPath);
                        if (file.exists()) {
                            locFile = file;
                        }
                    }
                    if (locFile == null) {
                        File f = FileLoader.getPathToMessage(this.selectedObject.messageOwner);
                        if (f.exists()) {
                            locFile = f;
                        }
                    }
                    if (locFile != null) {
                        if (!locFile.getName().toLowerCase().endsWith("attheme")) {
                            if (!LocaleController.getInstance().applyLanguageFile(locFile, this.currentAccount)) {
                                if (getParentActivity() != null) {
                                    builder = new AlertDialog.Builder(getParentActivity());
                                    builder.setTitle(LocaleController.getString("AppName", NUM));
                                    builder.setMessage(LocaleController.getString("IncorrectLocalization", NUM));
                                    builder.setPositiveButton(LocaleController.getString("OK", NUM), null);
                                    showDialog(builder.create());
                                    break;
                                }
                                this.selectedObject = null;
                                this.selectedObjectGroup = null;
                                return;
                            }
                            presentFragment(new LanguageSelectActivity());
                            break;
                        }
                        if (this.chatLayoutManager != null) {
                            int lastPosition = this.chatLayoutManager.findFirstVisibleItemPosition();
                            if (lastPosition != 0) {
                                this.scrollToPositionOnRecreate = lastPosition;
                                Holder holder = (Holder) this.chatListView.findViewHolderForAdapterPosition(this.scrollToPositionOnRecreate);
                                if (holder != null) {
                                    this.scrollToOffsetOnRecreate = (this.chatListView.getMeasuredHeight() - holder.itemView.getBottom()) - this.chatListView.getPaddingBottom();
                                } else {
                                    this.scrollToPositionOnRecreate = -1;
                                }
                            } else {
                                this.scrollToPositionOnRecreate = -1;
                            }
                        }
                        ThemeInfo themeInfo = Theme.applyThemeFile(locFile, this.selectedObject.getDocumentName(), true);
                        if (themeInfo == null) {
                            this.scrollToPositionOnRecreate = -1;
                            if (getParentActivity() != null) {
                                builder = new AlertDialog.Builder(getParentActivity());
                                builder.setTitle(LocaleController.getString("AppName", NUM));
                                builder.setMessage(LocaleController.getString("IncorrectTheme", NUM));
                                builder.setPositiveButton(LocaleController.getString("OK", NUM), null);
                                showDialog(builder.create());
                                break;
                            }
                            this.selectedObject = null;
                            this.selectedObjectGroup = null;
                            return;
                        }
                        presentFragment(new ThemePreviewActivity(locFile, themeInfo));
                        break;
                    }
                    break;
                case 6:
                    path = this.selectedObject.messageOwner.attachPath;
                    if (!(path == null || path.length() <= 0 || new File(path).exists())) {
                        path = null;
                    }
                    if (path == null || path.length() == 0) {
                        path = FileLoader.getPathToMessage(this.selectedObject.messageOwner).toString();
                    }
                    intent = new Intent("android.intent.action.SEND");
                    intent.setType(this.selectedObject.getDocument().mime_type);
                    file = new File(path);
                    if (VERSION.SDK_INT >= 24) {
                        try {
                            intent.putExtra("android.intent.extra.STREAM", FileProvider.getUriForFile(getParentActivity(), "org.telegram.messenger.beta.provider", file));
                            intent.setFlags(1);
                        } catch (Exception e) {
                            intent.putExtra("android.intent.extra.STREAM", Uri.fromFile(file));
                        }
                    } else {
                        intent.putExtra("android.intent.extra.STREAM", Uri.fromFile(file));
                    }
                    try {
                        getParentActivity().startActivityForResult(Intent.createChooser(intent, LocaleController.getString("ShareFile", NUM)), 500);
                        break;
                    } catch (Throwable th) {
                        break;
                    }
                case 7:
                    path = this.selectedObject.messageOwner.attachPath;
                    if (!(path == null || path.length() <= 0 || new File(path).exists())) {
                        path = null;
                    }
                    if (path == null || path.length() == 0) {
                        path = FileLoader.getPathToMessage(this.selectedObject.messageOwner).toString();
                    }
                    if (VERSION.SDK_INT < 23 || getParentActivity().checkSelfPermission("android.permission.WRITE_EXTERNAL_STORAGE") == 0) {
                        MediaController.saveFile(path, getParentActivity(), 0, null, null);
                        break;
                    }
                    getParentActivity().requestPermissions(new String[]{"android.permission.WRITE_EXTERNAL_STORAGE"}, 4);
                    this.selectedObject = null;
                    this.selectedObjectGroup = null;
                    return;
                case 8:
                    showFieldPanelForReply(true, this.selectedObject);
                    break;
                case 9:
                    Activity parentActivity = getParentActivity();
                    InputStickerSet inputStickerSet = this.selectedObject.getInputStickerSet();
                    StickersAlertDelegate stickersAlertDelegate = (this.bottomOverlayChat.getVisibility() == 0 || !(this.currentChat == null || ChatObject.canSendStickers(this.currentChat))) ? null : this.chatActivityEnterView;
                    showDialog(new StickersAlert(parentActivity, this, inputStickerSet, null, stickersAlertDelegate));
                    break;
                case 10:
                    if (VERSION.SDK_INT < 23 || getParentActivity().checkSelfPermission("android.permission.WRITE_EXTERNAL_STORAGE") == 0) {
                        String fileName = FileLoader.getDocumentFileName(this.selectedObject.getDocument());
                        if (TextUtils.isEmpty(fileName)) {
                            fileName = this.selectedObject.getFileName();
                        }
                        path = this.selectedObject.messageOwner.attachPath;
                        if (!(path == null || path.length() <= 0 || new File(path).exists())) {
                            path = null;
                        }
                        if (path == null || path.length() == 0) {
                            path = FileLoader.getPathToMessage(this.selectedObject.messageOwner).toString();
                        }
                        MediaController.saveFile(path, getParentActivity(), this.selectedObject.isMusic() ? 3 : 2, fileName, this.selectedObject.getDocument() != null ? this.selectedObject.getDocument().mime_type : "");
                        break;
                    }
                    getParentActivity().requestPermissions(new String[]{"android.permission.WRITE_EXTERNAL_STORAGE"}, 4);
                    this.selectedObject = null;
                    this.selectedObjectGroup = null;
                    return;
                    break;
                case 11:
                    Document document = this.selectedObject.getDocument();
                    MessagesController.getInstance(this.currentAccount).saveGif(this.selectedObject, document);
                    showGifHint();
                    this.chatActivityEnterView.addRecentGif(document);
                    break;
                case 12:
                    startEditingMessageObject(this.selectedObject);
                    this.selectedObject = null;
                    this.selectedObjectGroup = null;
                    break;
                case 13:
                    boolean[] checks;
                    int mid = this.selectedObject.getId();
                    builder = new AlertDialog.Builder(getParentActivity());
                    if (this.currentUser != null) {
                        builder.setMessage(LocaleController.getString("PinMessageAlertChat", NUM));
                        checks = new boolean[]{false};
                    } else if (!(ChatObject.isChannel(this.currentChat) && this.currentChat.megagroup) && (this.currentChat == null || ChatObject.isChannel(this.currentChat))) {
                        builder.setMessage(LocaleController.getString("PinMessageAlertChannel", NUM));
                        checks = new boolean[]{false};
                    } else {
                        builder.setMessage(LocaleController.getString("PinMessageAlert", NUM));
                        checks = new boolean[]{true};
                        View frameLayout = new FrameLayout(getParentActivity());
                        CheckBoxCell cell = new CheckBoxCell(getParentActivity(), 1);
                        cell.setBackgroundDrawable(Theme.getSelectorDrawable(false));
                        cell.setText(LocaleController.getString("PinNotify", NUM), "", true, false);
                        cell.setPadding(LocaleController.isRTL ? AndroidUtilities.dp(8.0f) : 0, 0, LocaleController.isRTL ? 0 : AndroidUtilities.dp(8.0f), 0);
                        frameLayout.addView(cell, LayoutHelper.createFrame(-1, 48.0f, 51, 8.0f, 0.0f, 8.0f, 0.0f));
                        cell.setOnClickListener(new ChatActivity$$Lambda$50(checks));
                        builder.setView(frameLayout);
                    }
                    builder.setPositiveButton(LocaleController.getString("OK", NUM), new ChatActivity$$Lambda$51(this, mid, checks));
                    builder.setTitle(LocaleController.getString("AppName", NUM));
                    builder.setNegativeButton(LocaleController.getString("Cancel", NUM), null);
                    showDialog(builder.create());
                    break;
                case 14:
                    builder = new AlertDialog.Builder(getParentActivity());
                    builder.setMessage(LocaleController.getString("UnpinMessageAlert", NUM));
                    builder.setPositiveButton(LocaleController.getString("OK", NUM), new ChatActivity$$Lambda$52(this));
                    builder.setTitle(LocaleController.getString("AppName", NUM));
                    builder.setNegativeButton(LocaleController.getString("Cancel", NUM), null);
                    showDialog(builder.create());
                    break;
                case 15:
                    args = new Bundle();
                    args.putInt("user_id", this.selectedObject.messageOwner.media.user_id);
                    args.putString("phone", this.selectedObject.messageOwner.media.phone_number);
                    args.putBoolean("addContact", true);
                    presentFragment(new ContactAddActivity(args));
                    break;
                case 16:
                    AndroidUtilities.addToClipboard(this.selectedObject.messageOwner.media.phone_number);
                    break;
                case 17:
                    try {
                        intent = new Intent("android.intent.action.DIAL", Uri.parse("tel:" + this.selectedObject.messageOwner.media.phone_number));
                        intent.addFlags(NUM);
                        getParentActivity().startActivityForResult(intent, 500);
                        break;
                    } catch (Exception e2) {
                        FileLog.e(e2);
                        break;
                    }
                case 18:
                    if (this.currentUser != null) {
                        VoIPHelper.startCall(this.currentUser, getParentActivity(), MessagesController.getInstance(this.currentAccount).getUserFull(this.currentUser.id));
                        break;
                    }
                    break;
                case 19:
                    VoIPHelper.showRateAlert(getParentActivity(), (TL_messageActionPhoneCall) this.selectedObject.messageOwner.action);
                    break;
                case 20:
                    DataQuery.getInstance(this.currentAccount).addRecentSticker(2, this.selectedObject, this.selectedObject.getDocument(), (int) (System.currentTimeMillis() / 1000), false);
                    break;
                case 21:
                    DataQuery.getInstance(this.currentAccount).addRecentSticker(2, this.selectedObject, this.selectedObject.getDocument(), (int) (System.currentTimeMillis() / 1000), true);
                    break;
                case 22:
                    TLObject req = new TL_channels_exportMessageLink();
                    req.id = this.selectedObject.getId();
                    req.channel = MessagesController.getInputChannel(this.currentChat);
                    ConnectionsManager.getInstance(this.currentAccount).sendRequest(req, ChatActivity$$Lambda$53.$instance);
                    break;
                case 23:
                    AlertsCreator.createReportAlert(getParentActivity(), this.dialog_id, this.selectedObject.getId(), this);
                    break;
                case 24:
                    if (!this.selectedObject.isEditing() && (!this.selectedObject.isSending() || this.selectedObjectGroup != null)) {
                        if (this.selectedObject.isSending() && this.selectedObjectGroup != null) {
                            for (a = 0; a < this.selectedObjectGroup.messages.size(); a++) {
                                SendMessagesHelper.getInstance(this.currentAccount).cancelSendingMessage(new ArrayList(this.selectedObjectGroup.messages));
                            }
                            break;
                        }
                    }
                    SendMessagesHelper.getInstance(this.currentAccount).cancelSendingMessage(this.selectedObject);
                    break;
                    break;
                case 25:
                    AlertDialog[] progressDialog = new AlertDialog[]{new AlertDialog(getParentActivity(), 3)};
                    int requestId = SendMessagesHelper.getInstance(this.currentAccount).sendVote(this.selectedObject, null, new ChatActivity$$Lambda$54(progressDialog));
                    if (requestId != 0) {
                        AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$55(this, progressDialog, requestId), 500);
                        break;
                    }
                    break;
                case 26:
                    MessageObject object = this.selectedObject;
                    builder = new AlertDialog.Builder(getParentActivity());
                    builder.setTitle(LocaleController.getString("StopPollAlertTitle", NUM));
                    builder.setMessage(LocaleController.getString("StopPollAlertText", NUM));
                    builder.setPositiveButton(LocaleController.getString("Stop", NUM), new ChatActivity$$Lambda$56(this, object));
                    builder.setNegativeButton(LocaleController.getString("Cancel", NUM), null);
                    showDialog(builder.create());
                    break;
            }
            this.selectedObject = null;
            this.selectedObjectGroup = null;
        }
    }

    static final /* synthetic */ void lambda$processSelectedOption$61$ChatActivity(boolean[] checks, View v) {
        boolean z;
        CheckBoxCell cell1 = (CheckBoxCell) v;
        if (checks[0]) {
            z = false;
        } else {
            z = true;
        }
        checks[0] = z;
        cell1.setChecked(checks[0], true);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$processSelectedOption$62$ChatActivity(int mid, boolean[] checks, DialogInterface dialogInterface, int i) {
        MessagesController.getInstance(this.currentAccount).pinMessage(this.currentChat, this.currentUser, mid, checks[0]);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$processSelectedOption$63$ChatActivity(DialogInterface dialogInterface, int i) {
        MessagesController.getInstance(this.currentAccount).pinMessage(this.currentChat, this.currentUser, 0, false);
    }

    static final /* synthetic */ void lambda$null$64$ChatActivity(TLObject response) {
        if (response != null) {
            try {
                ((ClipboardManager) ApplicationLoader.applicationContext.getSystemService("clipboard")).setPrimaryClip(ClipData.newPlainText("label", ((TL_exportedMessageLink) response).link));
                Toast.makeText(ApplicationLoader.applicationContext, LocaleController.getString("LinkCopied", NUM), 0).show();
            } catch (Exception e) {
                FileLog.e(e);
            }
        }
    }

    static final /* synthetic */ void lambda$processSelectedOption$66$ChatActivity(AlertDialog[] progressDialog) {
        try {
            progressDialog[0].dismiss();
        } catch (Throwable th) {
        }
        progressDialog[0] = null;
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$processSelectedOption$68$ChatActivity(AlertDialog[] progressDialog, int requestId) {
        if (progressDialog[0] != null) {
            progressDialog[0].setOnCancelListener(new ChatActivity$$Lambda$67(this, requestId));
            showDialog(progressDialog[0]);
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$67$ChatActivity(int requestId, DialogInterface dialog) {
        ConnectionsManager.getInstance(this.currentAccount).cancelRequest(requestId, true);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$processSelectedOption$74$ChatActivity(MessageObject object, DialogInterface dialogInterface, int i) {
        AlertDialog[] progressDialog = new AlertDialog[]{new AlertDialog(getParentActivity(), 3)};
        TL_messages_editMessage req = new TL_messages_editMessage();
        TL_messageMediaPoll mediaPoll = object.messageOwner.media;
        TL_inputMediaPoll poll = new TL_inputMediaPoll();
        poll.poll = new TL_poll();
        poll.poll.id = mediaPoll.poll.id;
        poll.poll.question = mediaPoll.poll.question;
        poll.poll.answers = mediaPoll.poll.answers;
        poll.poll.closed = true;
        req.media = poll;
        req.peer = MessagesController.getInstance(this.currentAccount).getInputPeer((int) this.dialog_id);
        req.id = object.getId();
        req.flags |= 16384;
        AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$63(this, progressDialog, ConnectionsManager.getInstance(this.currentAccount).sendRequest(req, new ChatActivity$$Lambda$62(this, progressDialog, req))), 500);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$71$ChatActivity(AlertDialog[] progressDialog, TL_messages_editMessage req, TLObject response, TL_error error) {
        AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$65(progressDialog));
        if (error == null) {
            MessagesController.getInstance(this.currentAccount).processUpdates((Updates) response, false);
        } else {
            AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$66(this, error, req));
        }
    }

    static final /* synthetic */ void lambda$null$69$ChatActivity(AlertDialog[] progressDialog) {
        try {
            progressDialog[0].dismiss();
        } catch (Throwable th) {
        }
        progressDialog[0] = null;
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$70$ChatActivity(TL_error error, TL_messages_editMessage req) {
        AlertsCreator.processError(this.currentAccount, error, this, req, new Object[0]);
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$73$ChatActivity(AlertDialog[] progressDialog, int requestId) {
        if (progressDialog[0] != null) {
            progressDialog[0].setOnCancelListener(new ChatActivity$$Lambda$64(this, requestId));
            showDialog(progressDialog[0]);
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$null$72$ChatActivity(int requestId, DialogInterface dialog) {
        ConnectionsManager.getInstance(this.currentAccount).cancelRequest(requestId, true);
    }

    public void didSelectDialogs(DialogsActivity fragment, ArrayList<Long> dids, CharSequence message, boolean param) {
        if (this.forwardingMessage != null || this.selectedMessagesIds[0].size() != 0 || this.selectedMessagesIds[1].size() != 0) {
            int a;
            ArrayList<MessageObject> fmessages = new ArrayList();
            if (this.forwardingMessage != null) {
                if (this.forwardingMessageGroup != null) {
                    fmessages.addAll(this.forwardingMessageGroup.messages);
                } else {
                    fmessages.add(this.forwardingMessage);
                }
                this.forwardingMessage = null;
                this.forwardingMessageGroup = null;
            } else {
                for (a = 1; a >= 0; a--) {
                    int b;
                    ArrayList<Integer> ids = new ArrayList();
                    for (b = 0; b < this.selectedMessagesIds[a].size(); b++) {
                        ids.add(Integer.valueOf(this.selectedMessagesIds[a].keyAt(b)));
                    }
                    Collections.sort(ids);
                    for (b = 0; b < ids.size(); b++) {
                        MessageObject messageObject = (MessageObject) this.selectedMessagesIds[a].get(((Integer) ids.get(b)).intValue());
                        if (messageObject != null) {
                            fmessages.add(messageObject);
                        }
                    }
                    this.selectedMessagesCanCopyIds[a].clear();
                    this.selectedMessagesCanStarIds[a].clear();
                    this.selectedMessagesIds[a].clear();
                }
                this.cantDeleteMessagesCount = 0;
                this.canEditMessagesCount = 0;
                this.actionBar.hideActionMode();
                updatePinnedMessageView(true);
            }
            long did;
            if (dids.size() > 1 || ((Long) dids.get(0)).longValue() == ((long) UserConfig.getInstance(this.currentAccount).getClientUserId()) || message != null) {
                for (a = 0; a < dids.size(); a++) {
                    did = ((Long) dids.get(a)).longValue();
                    if (message != null) {
                        SendMessagesHelper.getInstance(this.currentAccount).sendMessage(message.toString(), did, null, null, true, null, null, null);
                    }
                    SendMessagesHelper.getInstance(this.currentAccount).sendMessage(fmessages, did);
                }
                fragment.finishFragment();
                return;
            }
            did = ((Long) dids.get(0)).longValue();
            if (did != this.dialog_id) {
                int lower_part = (int) did;
                int high_part = (int) (did >> 32);
                Bundle args = new Bundle();
                args.putBoolean("scrollToTopOnResume", this.scrollToTopOnResume);
                if (lower_part == 0) {
                    args.putInt("enc_id", high_part);
                } else if (lower_part > 0) {
                    args.putInt("user_id", lower_part);
                } else if (lower_part < 0) {
                    args.putInt("chat_id", -lower_part);
                }
                if (lower_part == 0 || MessagesController.getInstance(this.currentAccount).checkCanOpenChat(args, fragment)) {
                    ChatActivity chatActivity = new ChatActivity(args);
                    if (presentFragment(chatActivity, true)) {
                        chatActivity.showFieldPanelForForward(true, fmessages);
                        if (!AndroidUtilities.isTablet()) {
                            removeSelfFromStack();
                            return;
                        }
                        return;
                    }
                    fragment.finishFragment();
                    return;
                }
                return;
            }
            fragment.finishFragment();
            moveScrollToLastMessage();
            showFieldPanelForForward(true, fmessages);
            if (AndroidUtilities.isTablet()) {
                this.actionBar.hideActionMode();
                updatePinnedMessageView(true);
            }
            updateVisibleRows();
        }
    }

    public boolean checkRecordLocked() {
        if (this.chatActivityEnterView == null || !this.chatActivityEnterView.isRecordLocked()) {
            return false;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
        if (this.chatActivityEnterView.isInVideoMode()) {
            builder.setTitle(LocaleController.getString("DiscardVideoMessageTitle", NUM));
            builder.setMessage(LocaleController.getString("DiscardVideoMessageDescription", NUM));
        } else {
            builder.setTitle(LocaleController.getString("DiscardVoiceMessageTitle", NUM));
            builder.setMessage(LocaleController.getString("DiscardVoiceMessageDescription", NUM));
        }
        builder.setPositiveButton(LocaleController.getString("DiscardVoiceMessageAction", NUM), new ChatActivity$$Lambda$57(this));
        builder.setNegativeButton(LocaleController.getString("Continue", NUM), null);
        showDialog(builder.create());
        return true;
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$checkRecordLocked$75$ChatActivity(DialogInterface dialog, int which) {
        if (this.chatActivityEnterView != null) {
            this.chatActivityEnterView.cancelRecordingAudioVideo();
        }
    }

    public boolean onBackPressed() {
        if (checkRecordLocked()) {
            return false;
        }
        if (this.actionBar != null && this.actionBar.isActionModeShowed()) {
            for (int a = 1; a >= 0; a--) {
                this.selectedMessagesIds[a].clear();
                this.selectedMessagesCanCopyIds[a].clear();
                this.selectedMessagesCanStarIds[a].clear();
            }
            this.actionBar.hideActionMode();
            updatePinnedMessageView(true);
            this.cantDeleteMessagesCount = 0;
            this.canEditMessagesCount = 0;
            updateVisibleRows();
            return false;
        } else if (this.chatActivityEnterView == null || !this.chatActivityEnterView.isPopupShowing()) {
            return true;
        } else {
            this.chatActivityEnterView.hidePopup(true);
            return false;
        }
    }

    private void updateVisibleRows() {
        if (this.chatListView != null) {
            int lastVisibleItem = -1;
            if (!(this.wasManualScroll || this.unreadMessageObject == null || this.chatListView.getMeasuredHeight() == 0)) {
                int pos = this.messages.indexOf(this.unreadMessageObject);
                if (pos >= 0) {
                    lastVisibleItem = this.chatAdapter.messagesStartRow + pos;
                }
            }
            int count = this.chatListView.getChildCount();
            MessageObject editingMessageObject = this.chatActivityEnterView != null ? this.chatActivityEnterView.getEditingMessageObject() : null;
            for (int a = 0; a < count; a++) {
                View view = this.chatListView.getChildAt(a);
                if (view instanceof ChatMessageCell) {
                    ChatMessageCell cell = (ChatMessageCell) view;
                    MessageObject messageObject = cell.getMessageObject();
                    boolean disableSelection = false;
                    boolean selected = false;
                    if (this.actionBar.isActionModeShowed()) {
                        int idx = messageObject.getDialogId() == this.dialog_id ? 0 : 1;
                        if (messageObject == editingMessageObject || this.selectedMessagesIds[idx].indexOfKey(messageObject.getId()) >= 0) {
                            setCellSelectionBackground(messageObject, cell, idx);
                            selected = true;
                        } else {
                            view.setBackgroundDrawable(null);
                        }
                        disableSelection = true;
                    } else {
                        view.setBackgroundDrawable(null);
                    }
                    cell.setMessageObject(cell.getMessageObject(), cell.getCurrentMessagesGroup(), cell.isPinnedBottom(), cell.isPinnedTop());
                    boolean z = !disableSelection;
                    boolean z2 = disableSelection && selected;
                    cell.setCheckPressed(z, z2);
                    z2 = (this.highlightMessageId == Integer.MAX_VALUE || messageObject == null || messageObject.getId() != this.highlightMessageId) ? false : true;
                    cell.setHighlighted(z2);
                    if (this.searchContainer != null && this.searchContainer.getVisibility() == 0) {
                        if (DataQuery.getInstance(this.currentAccount).isMessageFound(messageObject.getId(), messageObject.getDialogId() == this.mergeDialogId) && DataQuery.getInstance(this.currentAccount).getLastSearchQuery() != null) {
                            cell.setHighlightedText(DataQuery.getInstance(this.currentAccount).getLastSearchQuery());
                        }
                    }
                    cell.setHighlightedText(null);
                } else if (view instanceof ChatActionCell) {
                    ChatActionCell cell2 = (ChatActionCell) view;
                    cell2.setMessageObject(cell2.getMessageObject());
                }
            }
            this.chatListView.invalidate();
            if (lastVisibleItem != -1) {
                this.chatLayoutManager.scrollToPositionWithOffset(lastVisibleItem, ((this.chatListView.getMeasuredHeight() - this.chatListView.getPaddingBottom()) - this.chatListView.getPaddingTop()) - AndroidUtilities.dp(29.0f));
            }
        }
    }

    private void checkEditTimer() {
        if (this.chatActivityEnterView != null) {
            MessageObject messageObject = this.chatActivityEnterView.getEditingMessageObject();
            if (messageObject == null) {
                return;
            }
            if (this.currentUser == null || !this.currentUser.self) {
                int dt = messageObject.canEditMessageAnytime(this.currentChat) ? 360 : (MessagesController.getInstance(this.currentAccount).maxEditTime + 300) - Math.abs(ConnectionsManager.getInstance(this.currentAccount).getCurrentTime() - messageObject.messageOwner.date);
                if (dt > 0) {
                    if (dt <= 300) {
                        SimpleTextView simpleTextView = this.replyObjectTextView;
                        Object[] objArr = new Object[1];
                        objArr[0] = String.format("%d:%02d", new Object[]{Integer.valueOf(dt / 60), Integer.valueOf(dt % 60)});
                        simpleTextView.setText(LocaleController.formatString("TimeToEdit", NUM, objArr));
                    }
                    AndroidUtilities.runOnUIThread(new ChatActivity$$Lambda$58(this), 1000);
                    return;
                }
                this.chatActivityEnterView.onEditTimeExpired();
                this.replyObjectTextView.setText(LocaleController.formatString("TimeToEditExpired", NUM, new Object[0]));
            }
        }
    }

    private ArrayList<MessageObject> createVoiceMessagesPlaylist(MessageObject startMessageObject, boolean playingUnreadMedia) {
        ArrayList<MessageObject> messageObjects = new ArrayList();
        messageObjects.add(startMessageObject);
        int messageId = startMessageObject.getId();
        long startDialogId = startMessageObject.getDialogId();
        if (messageId != 0) {
            for (int a = this.messages.size() - 1; a >= 0; a--) {
                MessageObject messageObject = (MessageObject) this.messages.get(a);
                if ((messageObject.getDialogId() != this.mergeDialogId || startMessageObject.getDialogId() == this.mergeDialogId) && (((this.currentEncryptedChat == null && messageObject.getId() > messageId) || (this.currentEncryptedChat != null && messageObject.getId() < messageId)) && ((messageObject.isVoice() || messageObject.isRoundVideo()) && (!playingUnreadMedia || (messageObject.isContentUnread() && !messageObject.isOut()))))) {
                    messageObjects.add(messageObject);
                }
            }
        }
        return messageObjects;
    }

    private void alertUserOpenError(MessageObject message) {
        if (getParentActivity() != null) {
            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
            builder.setTitle(LocaleController.getString("AppName", NUM));
            builder.setPositiveButton(LocaleController.getString("OK", NUM), null);
            if (message.type == 3) {
                builder.setMessage(LocaleController.getString("NoPlayerInstalled", NUM));
            } else {
                builder.setMessage(LocaleController.formatString("NoHandleAppInstalled", NUM, message.getDocument().mime_type));
            }
            showDialog(builder.create());
        }
    }

    private void openSearchWithText(String text) {
        if (!this.actionBar.isSearchFieldVisible()) {
            this.avatarContainer.setVisibility(8);
            this.headerItem.setVisibility(8);
            this.attachItem.setVisibility(8);
            this.editTextItem.setVisibility(8);
            this.searchItem.setVisibility(0);
            updateSearchButtons(0, 0, -1);
            updateBottomOverlay();
        }
        this.openSearchKeyboard = text == null;
        this.searchItem.openSearch(this.openSearchKeyboard);
        if (text != null) {
            this.searchItem.setSearchFieldText(text, false);
            DataQuery.getInstance(this.currentAccount).searchMessagesInChat(text, this.dialog_id, this.mergeDialogId, this.classGuid, 0, this.searchingUserMessages);
        }
        updatePinnedMessageView(true);
    }

    public void didSelectLocation(MessageMedia location, int live) {
        SendMessagesHelper.getInstance(this.currentAccount).sendMessage(location, this.dialog_id, this.replyingMessageObject, null, null);
        moveScrollToLastMessage();
        if (live == 1) {
            hideFieldPanel();
            DataQuery.getInstance(this.currentAccount).cleanDraft(this.dialog_id, true);
        }
        if (this.paused) {
            this.scrollToTopOnResume = true;
        }
    }

    public boolean isEditingMessageMedia() {
        return (this.chatAttachAlert == null || this.chatAttachAlert.getEditingMessageObject() == null) ? false : true;
    }

    public boolean isSecretChat() {
        return this.currentEncryptedChat != null;
    }

    public User getCurrentUser() {
        return this.currentUser;
    }

    public Chat getCurrentChat() {
        return this.currentChat;
    }

    public boolean allowGroupPhotos() {
        return !isEditingMessageMedia() && (this.currentEncryptedChat == null || AndroidUtilities.getPeerLayerVersion(this.currentEncryptedChat.layer) >= 73);
    }

    public EncryptedChat getCurrentEncryptedChat() {
        return this.currentEncryptedChat;
    }

    public ChatFull getCurrentChatInfo() {
        return this.chatInfo;
    }

    public TL_userFull getCurrentUserInfo() {
        return this.userInfo;
    }

    public void sendMedia(PhotoEntry photoEntry, VideoEditedInfo videoEditedInfo) {
        if (photoEntry != null) {
            fillEditingMediaWithCaption(photoEntry.caption, photoEntry.entities);
            if (photoEntry.isVideo) {
                if (videoEditedInfo != null) {
                    SendMessagesHelper.prepareSendingVideo(photoEntry.path, videoEditedInfo.estimatedSize, videoEditedInfo.estimatedDuration, videoEditedInfo.resultWidth, videoEditedInfo.resultHeight, videoEditedInfo, this.dialog_id, this.replyingMessageObject, photoEntry.caption, photoEntry.entities, photoEntry.ttl, this.editingMessageObject);
                } else {
                    SendMessagesHelper.prepareSendingVideo(photoEntry.path, 0, 0, 0, 0, null, this.dialog_id, this.replyingMessageObject, photoEntry.caption, photoEntry.entities, photoEntry.ttl, this.editingMessageObject);
                }
                hideFieldPanel();
                DataQuery.getInstance(this.currentAccount).cleanDraft(this.dialog_id, true);
            } else if (photoEntry.imagePath != null) {
                SendMessagesHelper.prepareSendingPhoto(photoEntry.imagePath, null, this.dialog_id, this.replyingMessageObject, photoEntry.caption, photoEntry.entities, photoEntry.stickers, null, photoEntry.ttl, this.editingMessageObject);
                hideFieldPanel();
                DataQuery.getInstance(this.currentAccount).cleanDraft(this.dialog_id, true);
            } else if (photoEntry.path != null) {
                SendMessagesHelper.prepareSendingPhoto(photoEntry.path, null, this.dialog_id, this.replyingMessageObject, photoEntry.caption, photoEntry.entities, photoEntry.stickers, null, photoEntry.ttl, this.editingMessageObject);
                hideFieldPanel();
                DataQuery.getInstance(this.currentAccount).cleanDraft(this.dialog_id, true);
            }
        }
    }

    public void showOpenGameAlert(TL_game game, MessageObject messageObject, String urlStr, boolean ask, int uid) {
        User user = MessagesController.getInstance(this.currentAccount).getUser(Integer.valueOf(uid));
        String str;
        if (ask) {
            String name;
            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
            builder.setTitle(LocaleController.getString("AppName", NUM));
            if (user != null) {
                name = ContactsController.formatName(user.first_name, user.last_name);
            } else {
                name = "";
            }
            builder.setMessage(LocaleController.formatString("BotPermissionGameAlert", NUM, name));
            builder.setPositiveButton(LocaleController.getString("OK", NUM), new ChatActivity$$Lambda$59(this, game, messageObject, urlStr, uid));
            builder.setNegativeButton(LocaleController.getString("Cancel", NUM), null);
            showDialog(builder.create());
        } else if (VERSION.SDK_INT < 21 || AndroidUtilities.isTablet() || !WebviewActivity.supportWebview()) {
            Activity parentActivity = getParentActivity();
            str = game.short_name;
            String str2 = (user == null || user.username == null) ? "" : user.username;
            WebviewActivity.openGameInBrowser(urlStr, messageObject, parentActivity, str, str2);
        } else if (this.parentLayout.fragmentsStack.get(this.parentLayout.fragmentsStack.size() - 1) == this) {
            str = (user == null || TextUtils.isEmpty(user.username)) ? "" : user.username;
            presentFragment(new WebviewActivity(urlStr, str, game.title, game.short_name, messageObject));
        }
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$showOpenGameAlert$76$ChatActivity(TL_game game, MessageObject messageObject, String urlStr, int uid, DialogInterface dialogInterface, int i) {
        showOpenGameAlert(game, messageObject, urlStr, false, uid);
        MessagesController.getNotificationsSettings(this.currentAccount).edit().putBoolean("askgame_" + uid, false).commit();
    }

    public void showOpenUrlAlert(String url, boolean ask) {
        boolean z = true;
        if (Browser.isInternalUrl(url, null) || !ask) {
            Context parentActivity = getParentActivity();
            if (this.inlineReturn != 0) {
                z = false;
            }
            Browser.openUrl(parentActivity, url, z);
            return;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
        builder.setTitle(LocaleController.getString("AppName", NUM));
        builder.setMessage(LocaleController.formatString("OpenUrlAlert", NUM, url));
        builder.setPositiveButton(LocaleController.getString("Open", NUM), new ChatActivity$$Lambda$60(this, url));
        builder.setNegativeButton(LocaleController.getString("Cancel", NUM), null);
        showDialog(builder.create());
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$showOpenUrlAlert$77$ChatActivity(String url, DialogInterface dialogInterface, int i) {
        Browser.openUrl(getParentActivity(), url, this.inlineReturn == 0);
    }

    private void removeMessageObject(MessageObject messageObject) {
        int index = this.messages.indexOf(messageObject);
        if (index != -1) {
            this.messages.remove(index);
            if (this.chatAdapter != null) {
                this.chatAdapter.notifyItemRemoved(this.chatAdapter.messagesStartRow + index);
            }
        }
    }

    public void openVCard(String vcard, String first_name, String last_name) {
        try {
            File f = new File(FileLoader.getDirectory(4), "sharing/");
            f.mkdirs();
            File f2 = new File(f, "vcard.vcf");
            BufferedWriter writer = new BufferedWriter(new FileWriter(f2));
            writer.write(vcard);
            writer.close();
            presentFragment(new PhonebookShareActivity(null, null, f2, ContactsController.formatName(first_name, last_name)));
        } catch (Exception e) {
            FileLog.e(e);
        }
    }

    private void setCellSelectionBackground(MessageObject message, ChatMessageCell messageCell, int idx) {
        GroupedMessages groupedMessages = getValidGroupedMessage(message);
        if (groupedMessages != null) {
            boolean hasUnselected = false;
            for (int a = 0; a < groupedMessages.messages.size(); a++) {
                if (this.selectedMessagesIds[idx].indexOfKey(((MessageObject) groupedMessages.messages.get(a)).getId()) < 0) {
                    hasUnselected = true;
                    break;
                }
            }
            if (!hasUnselected) {
                groupedMessages = null;
            }
        }
        if (groupedMessages == null) {
            messageCell.setBackgroundColor(Theme.getColor("chat_selectedBackground"));
        } else {
            messageCell.setBackground(null);
        }
    }

    private void setItemAnimationsEnabled(boolean enabled) {
    }

    public ThemeDescription[] getThemeDescriptions() {
        ThemeDescriptionDelegate selectedBackgroundDelegate = new ChatActivity$$Lambda$61(this);
        ThemeDescription[] themeDescriptionArr = new ThemeDescription[388];
        themeDescriptionArr[0] = new ThemeDescription(this.fragmentView, 0, null, null, null, null, "chat_wallpaper");
        themeDescriptionArr[1] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, "actionBarDefault");
        themeDescriptionArr[2] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LISTGLOWCOLOR, null, null, null, null, "actionBarDefault");
        themeDescriptionArr[3] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_ITEMSCOLOR, null, null, null, null, "actionBarDefaultIcon");
        themeDescriptionArr[4] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SELECTORCOLOR, null, null, null, null, "actionBarDefaultSelector");
        themeDescriptionArr[5] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SUBMENUBACKGROUND, null, null, null, null, "actionBarDefaultSubmenuBackground");
        themeDescriptionArr[6] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SUBMENUITEM, null, null, null, null, "actionBarDefaultSubmenuItem");
        themeDescriptionArr[7] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, "actionBarDefault");
        themeDescriptionArr[8] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LISTGLOWCOLOR, null, null, null, null, "actionBarDefault");
        themeDescriptionArr[9] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_ITEMSCOLOR, null, null, null, null, "actionBarDefaultIcon");
        themeDescriptionArr[10] = new ThemeDescription(this.avatarContainer != null ? this.avatarContainer.getTitleTextView() : null, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "actionBarDefaultTitle");
        themeDescriptionArr[11] = new ThemeDescription(this.avatarContainer != null ? this.avatarContainer.getSubtitleTextView() : null, ThemeDescription.FLAG_TEXTCOLOR, null, new Paint[]{Theme.chat_statusPaint, Theme.chat_statusRecordPaint}, null, null, "actionBarDefaultSubtitle", null);
        themeDescriptionArr[12] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SELECTORCOLOR, null, null, null, null, "actionBarDefaultSelector");
        themeDescriptionArr[13] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SEARCH, null, null, null, null, "actionBarDefaultSearch");
        themeDescriptionArr[14] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SEARCHPLACEHOLDER, null, null, null, null, "actionBarDefaultSearchPlaceholder");
        themeDescriptionArr[15] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_AM_ITEMSCOLOR, null, null, null, null, "actionBarActionModeDefaultIcon");
        themeDescriptionArr[16] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_AM_BACKGROUND, null, null, null, null, "actionBarActionModeDefault");
        themeDescriptionArr[17] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_AM_TOPBACKGROUND, null, null, null, null, "actionBarActionModeDefaultTop");
        themeDescriptionArr[18] = new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_AM_SELECTORCOLOR, null, null, null, null, "actionBarActionModeDefaultSelector");
        themeDescriptionArr[19] = new ThemeDescription(this.selectedMessagesCountTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "actionBarActionModeDefaultIcon");
        themeDescriptionArr[20] = new ThemeDescription(this.avatarContainer != null ? this.avatarContainer.getTitleTextView() : null, 0, null, null, new Drawable[]{Theme.chat_muteIconDrawable}, null, "chat_muteIcon");
        themeDescriptionArr[21] = new ThemeDescription(this.avatarContainer != null ? this.avatarContainer.getTitleTextView() : null, 0, null, null, new Drawable[]{Theme.chat_lockIconDrawable}, null, "chat_lockIcon");
        themeDescriptionArr[22] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.avatar_broadcastDrawable, Theme.avatar_savedDrawable}, null, "avatar_text");
        themeDescriptionArr[23] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundRed");
        themeDescriptionArr[24] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundOrange");
        themeDescriptionArr[25] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundViolet");
        themeDescriptionArr[26] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundGreen");
        themeDescriptionArr[27] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundCyan");
        themeDescriptionArr[28] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundBlue");
        themeDescriptionArr[29] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundPink");
        themeDescriptionArr[30] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageRed");
        themeDescriptionArr[31] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageOrange");
        themeDescriptionArr[32] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageViolet");
        themeDescriptionArr[33] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageGreen");
        themeDescriptionArr[34] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageCyan");
        themeDescriptionArr[35] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageBlue");
        themeDescriptionArr[36] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessagePink");
        themeDescriptionArr[37] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, BotHelpCell.class}, null, new Drawable[]{Theme.chat_msgInDrawable, Theme.chat_msgInMediaDrawable}, null, "chat_inBubble");
        themeDescriptionArr[38] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInSelectedDrawable, Theme.chat_msgInMediaSelectedDrawable}, null, "chat_inBubbleSelected");
        themeDescriptionArr[39] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, BotHelpCell.class}, null, new Drawable[]{Theme.chat_msgInShadowDrawable, Theme.chat_msgInMediaShadowDrawable}, null, "chat_inBubbleShadow");
        themeDescriptionArr[40] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutDrawable, Theme.chat_msgOutMediaDrawable}, null, "chat_outBubble");
        themeDescriptionArr[41] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutSelectedDrawable, Theme.chat_msgOutMediaSelectedDrawable}, null, "chat_outBubbleSelected");
        themeDescriptionArr[42] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutShadowDrawable, Theme.chat_msgOutMediaShadowDrawable}, null, "chat_outBubbleShadow");
        themeDescriptionArr[43] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatActionCell.class}, Theme.chat_actionTextPaint, null, null, "chat_serviceText");
        themeDescriptionArr[44] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LINKCOLOR, new Class[]{ChatActionCell.class}, Theme.chat_actionTextPaint, null, null, "chat_serviceLink");
        themeDescriptionArr[45] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_shareIconDrawable, Theme.chat_replyIconDrawable, Theme.chat_botInlineDrawable, Theme.chat_botLinkDrawalbe, Theme.chat_goIconDrawable}, null, "chat_serviceIcon");
        themeDescriptionArr[46] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, ChatActionCell.class}, null, null, null, "chat_serviceBackground");
        themeDescriptionArr[47] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, ChatActionCell.class}, null, null, null, "chat_serviceBackgroundSelected");
        themeDescriptionArr[48] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, BotHelpCell.class}, null, null, null, "chat_messageTextIn");
        themeDescriptionArr[49] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_messageTextOut");
        themeDescriptionArr[50] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LINKCOLOR, new Class[]{ChatMessageCell.class, BotHelpCell.class}, null, null, null, "chat_messageLinkIn", null);
        themeDescriptionArr[51] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LINKCOLOR, new Class[]{ChatMessageCell.class}, null, null, null, "chat_messageLinkOut", null);
        themeDescriptionArr[52] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgNoSoundDrawable}, null, "chat_mediaTimeText");
        themeDescriptionArr[53] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutCheckDrawable, Theme.chat_msgOutHalfCheckDrawable}, null, "chat_outSentCheck");
        themeDescriptionArr[54] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutCheckSelectedDrawable, Theme.chat_msgOutHalfCheckSelectedDrawable}, null, "chat_outSentCheckSelected");
        themeDescriptionArr[55] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutClockDrawable}, null, "chat_outSentClock");
        themeDescriptionArr[56] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutSelectedClockDrawable}, null, "chat_outSentClockSelected");
        themeDescriptionArr[57] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInClockDrawable}, null, "chat_inSentClock");
        themeDescriptionArr[58] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInSelectedClockDrawable}, null, "chat_inSentClockSelected");
        themeDescriptionArr[59] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgMediaCheckDrawable, Theme.chat_msgMediaHalfCheckDrawable}, null, "chat_mediaSentCheck");
        themeDescriptionArr[60] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgStickerHalfCheckDrawable, Theme.chat_msgStickerCheckDrawable, Theme.chat_msgStickerClockDrawable, Theme.chat_msgStickerViewsDrawable}, null, "chat_serviceText");
        themeDescriptionArr[61] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgMediaClockDrawable}, null, "chat_mediaSentClock");
        themeDescriptionArr[62] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutViewsDrawable}, null, "chat_outViews");
        themeDescriptionArr[63] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutViewsSelectedDrawable}, null, "chat_outViewsSelected");
        themeDescriptionArr[64] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInViewsDrawable}, null, "chat_inViews");
        themeDescriptionArr[65] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInViewsSelectedDrawable}, null, "chat_inViewsSelected");
        themeDescriptionArr[66] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgMediaViewsDrawable}, null, "chat_mediaViews");
        themeDescriptionArr[67] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutMenuDrawable}, null, "chat_outMenu");
        themeDescriptionArr[68] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutMenuSelectedDrawable}, null, "chat_outMenuSelected");
        themeDescriptionArr[69] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInMenuDrawable}, null, "chat_inMenu");
        themeDescriptionArr[70] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInMenuSelectedDrawable}, null, "chat_inMenuSelected");
        themeDescriptionArr[71] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgMediaMenuDrawable}, null, "chat_mediaMenu");
        themeDescriptionArr[72] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutInstantDrawable, Theme.chat_msgOutCallDrawable}, null, "chat_outInstant");
        themeDescriptionArr[73] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgOutCallSelectedDrawable}, null, "chat_outInstantSelected");
        themeDescriptionArr[74] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInInstantDrawable, Theme.chat_msgInCallDrawable}, null, "chat_inInstant");
        themeDescriptionArr[75] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInCallSelectedDrawable}, null, "chat_inInstantSelected");
        themeDescriptionArr[76] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgCallUpRedDrawable, Theme.chat_msgCallDownRedDrawable}, null, "calls_callReceivedRedIcon");
        themeDescriptionArr[77] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgCallUpGreenDrawable, Theme.chat_msgCallDownGreenDrawable}, null, "calls_callReceivedGreenIcon");
        themeDescriptionArr[78] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_msgErrorPaint, null, null, "chat_sentError");
        themeDescriptionArr[79] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgErrorDrawable}, null, "chat_sentErrorIcon");
        themeDescriptionArr[80] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, selectedBackgroundDelegate, "chat_selectedBackground");
        themeDescriptionArr[81] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_durationPaint, null, null, "chat_previewDurationText");
        themeDescriptionArr[82] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_gamePaint, null, null, "chat_previewGameText");
        themeDescriptionArr[83] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inPreviewInstantText");
        themeDescriptionArr[84] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outPreviewInstantText");
        themeDescriptionArr[85] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inPreviewInstantSelectedText");
        themeDescriptionArr[86] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outPreviewInstantSelectedText");
        themeDescriptionArr[87] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_deleteProgressPaint, null, null, "chat_secretTimeText");
        themeDescriptionArr[88] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_stickerNameText");
        themeDescriptionArr[89] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_botButtonPaint, null, null, "chat_botButtonText");
        themeDescriptionArr[90] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_botProgressPaint, null, null, "chat_botProgress");
        themeDescriptionArr[91] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_timeBackgroundPaint, null, null, "chat_mediaTimeBackground");
        themeDescriptionArr[92] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inForwardedNameText");
        themeDescriptionArr[93] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outForwardedNameText");
        themeDescriptionArr[94] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inViaBotNameText");
        themeDescriptionArr[95] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outViaBotNameText");
        themeDescriptionArr[96] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_stickerViaBotNameText");
        themeDescriptionArr[97] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inReplyLine");
        themeDescriptionArr[98] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outReplyLine");
        themeDescriptionArr[99] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_stickerReplyLine");
        themeDescriptionArr[100] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inReplyNameText");
        themeDescriptionArr[101] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outReplyNameText");
        themeDescriptionArr[102] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_stickerReplyNameText");
        themeDescriptionArr[103] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inReplyMessageText");
        themeDescriptionArr[104] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outReplyMessageText");
        themeDescriptionArr[105] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inReplyMediaMessageText");
        themeDescriptionArr[106] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outReplyMediaMessageText");
        themeDescriptionArr[107] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inReplyMediaMessageSelectedText");
        themeDescriptionArr[108] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outReplyMediaMessageSelectedText");
        themeDescriptionArr[109] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_stickerReplyMessageText");
        themeDescriptionArr[110] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inPreviewLine");
        themeDescriptionArr[111] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outPreviewLine");
        themeDescriptionArr[112] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inSiteNameText");
        themeDescriptionArr[113] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outSiteNameText");
        themeDescriptionArr[114] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inContactNameText");
        themeDescriptionArr[115] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outContactNameText");
        themeDescriptionArr[116] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inContactPhoneText");
        themeDescriptionArr[117] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inContactPhoneSelectedText");
        themeDescriptionArr[118] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outContactPhoneText");
        themeDescriptionArr[119] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outContactPhoneSelectedText");
        themeDescriptionArr[120] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_mediaProgress");
        themeDescriptionArr[121] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioProgress");
        themeDescriptionArr[122] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioProgress");
        themeDescriptionArr[123] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioSelectedProgress");
        themeDescriptionArr[124] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioSelectedProgress");
        themeDescriptionArr[125] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_mediaTimeText");
        themeDescriptionArr[126] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inTimeText");
        themeDescriptionArr[127] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outTimeText");
        themeDescriptionArr[128] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inTimeSelectedText");
        themeDescriptionArr[129] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_adminText");
        themeDescriptionArr[130] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_adminSelectedText");
        themeDescriptionArr[131] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outTimeSelectedText");
        themeDescriptionArr[132] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioPerfomerText");
        themeDescriptionArr[133] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioPerfomerSelectedText");
        themeDescriptionArr[134] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioPerfomerText");
        themeDescriptionArr[135] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioPerfomerSelectedText");
        themeDescriptionArr[136] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioTitleText");
        themeDescriptionArr[137] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioTitleText");
        themeDescriptionArr[138] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioDurationText");
        themeDescriptionArr[139] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioDurationText");
        themeDescriptionArr[140] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioDurationSelectedText");
        themeDescriptionArr[141] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioDurationSelectedText");
        themeDescriptionArr[142] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioSeekbar");
        themeDescriptionArr[143] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioSeekbar");
        themeDescriptionArr[144] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioSeekbarSelected");
        themeDescriptionArr[145] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioSeekbarSelected");
        themeDescriptionArr[146] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioSeekbarFill");
        themeDescriptionArr[147] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioCacheSeekbar");
        themeDescriptionArr[148] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioSeekbarFill");
        themeDescriptionArr[149] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioCacheSeekbar");
        themeDescriptionArr[150] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inVoiceSeekbar");
        themeDescriptionArr[151] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outVoiceSeekbar");
        themeDescriptionArr[152] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inVoiceSeekbarSelected");
        themeDescriptionArr[153] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outVoiceSeekbarSelected");
        themeDescriptionArr[154] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inVoiceSeekbarFill");
        themeDescriptionArr[155] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outVoiceSeekbarFill");
        themeDescriptionArr[156] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileProgress");
        themeDescriptionArr[157] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileProgress");
        themeDescriptionArr[158] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileProgressSelected");
        themeDescriptionArr[159] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileProgressSelected");
        themeDescriptionArr[160] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileNameText");
        themeDescriptionArr[161] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileNameText");
        themeDescriptionArr[162] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileInfoText");
        themeDescriptionArr[163] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileInfoText");
        themeDescriptionArr[164] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileInfoSelectedText");
        themeDescriptionArr[165] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileInfoSelectedText");
        themeDescriptionArr[166] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileBackground");
        themeDescriptionArr[167] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileBackground");
        themeDescriptionArr[168] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileBackgroundSelected");
        themeDescriptionArr[169] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileBackgroundSelected");
        themeDescriptionArr[170] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inVenueInfoText");
        themeDescriptionArr[171] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outVenueInfoText");
        themeDescriptionArr[172] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inVenueInfoSelectedText");
        themeDescriptionArr[173] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outVenueInfoSelectedText");
        themeDescriptionArr[174] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_mediaInfoText");
        themeDescriptionArr[175] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_urlPaint, null, null, "chat_linkSelectBackground");
        themeDescriptionArr[176] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_textSearchSelectionPaint, null, null, "chat_textSelectBackground");
        themeDescriptionArr[177] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outLoader");
        themeDescriptionArr[178] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outMediaIcon");
        themeDescriptionArr[179] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outLoaderSelected");
        themeDescriptionArr[180] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outMediaIconSelected");
        themeDescriptionArr[181] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inLoader");
        themeDescriptionArr[182] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inMediaIcon");
        themeDescriptionArr[183] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inLoaderSelected");
        themeDescriptionArr[184] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inMediaIconSelected");
        themeDescriptionArr[185] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[0][0], Theme.chat_photoStatesDrawables[1][0], Theme.chat_photoStatesDrawables[2][0], Theme.chat_photoStatesDrawables[3][0]}, null, "chat_mediaLoaderPhoto");
        themeDescriptionArr[186] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[0][0], Theme.chat_photoStatesDrawables[1][0], Theme.chat_photoStatesDrawables[2][0], Theme.chat_photoStatesDrawables[3][0]}, null, "chat_mediaLoaderPhotoIcon");
        themeDescriptionArr[187] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[0][1], Theme.chat_photoStatesDrawables[1][1], Theme.chat_photoStatesDrawables[2][1], Theme.chat_photoStatesDrawables[3][1]}, null, "chat_mediaLoaderPhotoSelected");
        themeDescriptionArr[188] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[0][1], Theme.chat_photoStatesDrawables[1][1], Theme.chat_photoStatesDrawables[2][1], Theme.chat_photoStatesDrawables[3][1]}, null, "chat_mediaLoaderPhotoIconSelected");
        themeDescriptionArr[189] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[7][0], Theme.chat_photoStatesDrawables[8][0]}, null, "chat_outLoaderPhoto");
        themeDescriptionArr[190] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[7][0], Theme.chat_photoStatesDrawables[8][0]}, null, "chat_outLoaderPhotoIcon");
        themeDescriptionArr[191] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[7][1], Theme.chat_photoStatesDrawables[8][1]}, null, "chat_outLoaderPhotoSelected");
        themeDescriptionArr[192] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[7][1], Theme.chat_photoStatesDrawables[8][1]}, null, "chat_outLoaderPhotoIconSelected");
        themeDescriptionArr[193] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[10][0], Theme.chat_photoStatesDrawables[11][0]}, null, "chat_inLoaderPhoto");
        themeDescriptionArr[194] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[10][0], Theme.chat_photoStatesDrawables[11][0]}, null, "chat_inLoaderPhotoIcon");
        themeDescriptionArr[195] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[10][1], Theme.chat_photoStatesDrawables[11][1]}, null, "chat_inLoaderPhotoSelected");
        themeDescriptionArr[196] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[10][1], Theme.chat_photoStatesDrawables[11][1]}, null, "chat_inLoaderPhotoIconSelected");
        themeDescriptionArr[197] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[9][0]}, null, "chat_outFileIcon");
        themeDescriptionArr[198] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[9][1]}, null, "chat_outFileSelectedIcon");
        themeDescriptionArr[199] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[12][0]}, null, "chat_inFileIcon");
        themeDescriptionArr[200] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[12][1]}, null, "chat_inFileSelectedIcon");
        themeDescriptionArr[201] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[0]}, null, "chat_inContactBackground");
        themeDescriptionArr[202] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[0]}, null, "chat_inContactIcon");
        themeDescriptionArr[203] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[1]}, null, "chat_outContactBackground");
        themeDescriptionArr[204] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[1]}, null, "chat_outContactIcon");
        themeDescriptionArr[205] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_locationDrawable[0]}, null, "chat_inLocationBackground");
        themeDescriptionArr[206] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_locationDrawable[0]}, null, "chat_inLocationIcon");
        themeDescriptionArr[207] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_locationDrawable[1]}, null, "chat_outLocationBackground");
        themeDescriptionArr[208] = new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_locationDrawable[1]}, null, "chat_outLocationIcon");
        themeDescriptionArr[209] = new ThemeDescription(this.mentionContainer, 0, null, Theme.chat_composeBackgroundPaint, null, null, "chat_messagePanelBackground");
        themeDescriptionArr[210] = new ThemeDescription(this.mentionContainer, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, "chat_messagePanelShadow");
        themeDescriptionArr[211] = new ThemeDescription(this.searchContainer, 0, null, Theme.chat_composeBackgroundPaint, null, null, "chat_messagePanelBackground");
        themeDescriptionArr[212] = new ThemeDescription(this.searchContainer, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, "chat_messagePanelShadow");
        themeDescriptionArr[213] = new ThemeDescription(this.bottomOverlay, 0, null, Theme.chat_composeBackgroundPaint, null, null, "chat_messagePanelBackground");
        themeDescriptionArr[214] = new ThemeDescription(this.bottomOverlay, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, "chat_messagePanelShadow");
        themeDescriptionArr[215] = new ThemeDescription(this.bottomOverlayChat, 0, null, Theme.chat_composeBackgroundPaint, null, null, "chat_messagePanelBackground");
        themeDescriptionArr[216] = new ThemeDescription(this.bottomOverlayChat, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, "chat_messagePanelShadow");
        themeDescriptionArr[217] = new ThemeDescription(this.chatActivityEnterView, 0, null, Theme.chat_composeBackgroundPaint, null, null, "chat_messagePanelBackground");
        themeDescriptionArr[218] = new ThemeDescription(this.chatActivityEnterView, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, "chat_messagePanelShadow");
        themeDescriptionArr[219] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_BACKGROUND, new Class[]{ChatActivityEnterView.class}, new String[]{"audioVideoButtonContainer"}, null, null, null, "chat_messagePanelBackground");
        themeDescriptionArr[220] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"messageEditText"}, null, null, null, "chat_messagePanelText");
        themeDescriptionArr[221] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"recordSendText"}, null, null, null, "chat_fieldOverlayText");
        themeDescriptionArr[222] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_HINTTEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"messageEditText"}, null, null, null, "chat_messagePanelHint");
        themeDescriptionArr[223] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"sendButton"}, null, null, null, "chat_messagePanelSend");
        themeDescriptionArr[224] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"emojiButton"}, null, null, null, "chat_messagePanelIcons");
        themeDescriptionArr[225] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"botButton"}, null, null, null, "chat_messagePanelIcons");
        themeDescriptionArr[226] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"notifyButton"}, null, null, null, "chat_messagePanelIcons");
        themeDescriptionArr[227] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"attachButton"}, null, null, null, "chat_messagePanelIcons");
        themeDescriptionArr[228] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"audioSendButton"}, null, null, null, "chat_messagePanelIcons");
        themeDescriptionArr[229] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"videoSendButton"}, null, null, null, "chat_messagePanelIcons");
        themeDescriptionArr[230] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR | ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatActivityEnterView.class}, new String[]{"doneButtonImage"}, null, null, null, "chat_messagePanelSend");
        themeDescriptionArr[231] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"doneButtonImage"}, null, null, null, "chat_messagePanelBackground");
        themeDescriptionArr[232] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_BACKGROUND, new Class[]{ChatActivityEnterView.class}, new String[]{"recordedAudioPanel"}, null, null, null, "chat_messagePanelBackground");
        themeDescriptionArr[233] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"micDrawable"}, null, null, null, "chat_messagePanelVoicePressed");
        themeDescriptionArr[234] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"cameraDrawable"}, null, null, null, "chat_messagePanelVoicePressed");
        themeDescriptionArr[235] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"sendDrawable"}, null, null, null, "chat_messagePanelVoicePressed");
        themeDescriptionArr[236] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"lockDrawable"}, null, null, null, "key_chat_messagePanelVoiceLock");
        themeDescriptionArr[237] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"lockTopDrawable"}, null, null, null, "key_chat_messagePanelVoiceLock");
        themeDescriptionArr[238] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"lockArrowDrawable"}, null, null, null, "key_chat_messagePanelVoiceLock");
        themeDescriptionArr[239] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"lockBackgroundDrawable"}, null, null, null, "key_chat_messagePanelVoiceLockBackground");
        themeDescriptionArr[240] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"lockShadowDrawable"}, null, null, null, "key_chat_messagePanelVoiceLockShadow");
        themeDescriptionArr[241] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"recordDeleteImageView"}, null, null, null, "chat_messagePanelVoiceDelete");
        themeDescriptionArr[242] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatActivityEnterView.class}, new String[]{"recordedAudioBackground"}, null, null, null, "chat_recordedVoiceBackground");
        themeDescriptionArr[243] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"recordTimeText"}, null, null, null, "chat_recordTime");
        themeDescriptionArr[244] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_BACKGROUND, new Class[]{ChatActivityEnterView.class}, new String[]{"recordTimeContainer"}, null, null, null, "chat_messagePanelBackground");
        themeDescriptionArr[245] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"recordCancelText"}, null, null, null, "chat_recordVoiceCancel");
        themeDescriptionArr[246] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_BACKGROUND, new Class[]{ChatActivityEnterView.class}, new String[]{"recordPanel"}, null, null, null, "chat_messagePanelBackground");
        themeDescriptionArr[247] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"recordedAudioTimeTextView"}, null, null, null, "chat_messagePanelVoiceDuration");
        themeDescriptionArr[248] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"recordCancelImage"}, null, null, null, "chat_recordVoiceCancel");
        themeDescriptionArr[249] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"doneButtonProgress"}, null, null, null, "contextProgressInner1");
        themeDescriptionArr[250] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"doneButtonProgress"}, null, null, null, "contextProgressOuter1");
        themeDescriptionArr[251] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"cancelBotButton"}, null, null, null, "chat_messagePanelCancelInlineBot");
        themeDescriptionArr[252] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"redDotPaint"}, null, null, null, "chat_recordedVoiceDot");
        themeDescriptionArr[253] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"paint"}, null, null, null, "chat_messagePanelVoiceBackground");
        themeDescriptionArr[254] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"paintRecord"}, null, null, null, "chat_messagePanelVoiceShadow");
        themeDescriptionArr[255] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"seekBarWaveform"}, null, null, null, "chat_recordedVoiceProgress");
        themeDescriptionArr[256] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"seekBarWaveform"}, null, null, null, "chat_recordedVoiceProgressInner");
        themeDescriptionArr[257] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"playDrawable"}, null, null, null, "chat_recordedVoicePlayPause");
        themeDescriptionArr[258] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"pauseDrawable"}, null, null, null, "chat_recordedVoicePlayPause");
        themeDescriptionArr[259] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"playDrawable"}, null, null, null, "chat_recordedVoicePlayPausePressed");
        themeDescriptionArr[260] = new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"pauseDrawable"}, null, null, null, "chat_recordedVoicePlayPausePressed");
        themeDescriptionArr[261] = new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"dotPaint"}, null, null, null, "chat_emojiPanelNewTrending");
        themeDescriptionArr[262] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelBackground");
        themeDescriptionArr[263] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelShadowLine");
        themeDescriptionArr[264] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelEmptyText");
        themeDescriptionArr[265] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelIcon");
        themeDescriptionArr[266] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelIconSelected");
        themeDescriptionArr[267] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelStickerPackSelector");
        themeDescriptionArr[268] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelBackspace");
        themeDescriptionArr[269] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelTrendingTitle");
        themeDescriptionArr[270] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelTrendingDescription");
        themeDescriptionArr[271] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelBadgeText");
        themeDescriptionArr[272] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelBadgeBackground");
        themeDescriptionArr[273] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiBottomPanelIcon");
        themeDescriptionArr[274] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiSearchIcon");
        themeDescriptionArr[275] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelStickerSetNameHighlight");
        themeDescriptionArr[276] = new ThemeDescription(this.chatActivityEnterView != null ? this.chatActivityEnterView.getEmojiView() : this.chatActivityEnterView, 0, new Class[]{EmojiView.class}, null, null, null, selectedBackgroundDelegate, "chat_emojiPanelStickerPackSelectorLine");
        themeDescriptionArr[277] = new ThemeDescription(this.undoView, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, "undo_background");
        themeDescriptionArr[278] = new ThemeDescription(this.undoView, 0, new Class[]{UndoView.class}, new String[]{"undoImageView"}, null, null, null, "undo_cancelColor");
        themeDescriptionArr[279] = new ThemeDescription(this.undoView, 0, new Class[]{UndoView.class}, new String[]{"undoTextView"}, null, null, null, "undo_cancelColor");
        themeDescriptionArr[280] = new ThemeDescription(this.undoView, 0, new Class[]{UndoView.class}, new String[]{"infoTextView"}, null, null, null, "undo_infoColor");
        themeDescriptionArr[281] = new ThemeDescription(this.undoView, 0, new Class[]{UndoView.class}, new String[]{"textPaint"}, null, null, null, "undo_infoColor");
        themeDescriptionArr[282] = new ThemeDescription(this.undoView, 0, new Class[]{UndoView.class}, new String[]{"progressPaint"}, null, null, null, "undo_infoColor");
        themeDescriptionArr[283] = new ThemeDescription(null, 0, null, null, null, null, "chat_botKeyboardButtonText");
        themeDescriptionArr[284] = new ThemeDescription(null, 0, null, null, null, null, "chat_botKeyboardButtonBackground");
        themeDescriptionArr[285] = new ThemeDescription(null, 0, null, null, null, null, "chat_botKeyboardButtonBackgroundPressed");
        themeDescriptionArr[286] = new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_BACKGROUND | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"frameLayout"}, null, null, null, "inappPlayerBackground");
        themeDescriptionArr[287] = new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{FragmentContextView.class}, new String[]{"playButton"}, null, null, null, "inappPlayerPlayPause");
        themeDescriptionArr[288] = new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"titleTextView"}, null, null, null, "inappPlayerTitle");
        themeDescriptionArr[289] = new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_FASTSCROLL, new Class[]{FragmentContextView.class}, new String[]{"titleTextView"}, null, null, null, "inappPlayerPerformer");
        themeDescriptionArr[290] = new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{FragmentContextView.class}, new String[]{"closeButton"}, null, null, null, "inappPlayerClose");
        themeDescriptionArr[291] = new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_BACKGROUND | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"frameLayout"}, null, null, null, "returnToCallBackground");
        themeDescriptionArr[292] = new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"titleTextView"}, null, null, null, "returnToCallText");
        themeDescriptionArr[293] = new ThemeDescription(this.pinnedLineView, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, "chat_topPanelLine");
        themeDescriptionArr[294] = new ThemeDescription(this.pinnedMessageNameTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_topPanelTitle");
        themeDescriptionArr[295] = new ThemeDescription(this.pinnedMessageTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_topPanelMessage");
        themeDescriptionArr[296] = new ThemeDescription(this.alertNameTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_topPanelTitle");
        themeDescriptionArr[297] = new ThemeDescription(this.alertTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_topPanelMessage");
        themeDescriptionArr[298] = new ThemeDescription(this.closePinned, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_topPanelClose");
        themeDescriptionArr[299] = new ThemeDescription(this.closeReportSpam, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_topPanelClose");
        themeDescriptionArr[300] = new ThemeDescription(this.reportSpamView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_topPanelBackground");
        themeDescriptionArr[301] = new ThemeDescription(this.alertView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_topPanelBackground");
        themeDescriptionArr[302] = new ThemeDescription(this.pinnedMessageView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_topPanelBackground");
        themeDescriptionArr[303] = new ThemeDescription(this.addToContactsButton, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_addContact");
        themeDescriptionArr[304] = new ThemeDescription(this.reportSpamButton, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_reportSpam");
        themeDescriptionArr[305] = new ThemeDescription(this.replyLineView, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, "chat_replyPanelLine");
        themeDescriptionArr[306] = new ThemeDescription(this.replyNameTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_replyPanelName");
        themeDescriptionArr[307] = new ThemeDescription(this.replyObjectTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_replyPanelMessage");
        themeDescriptionArr[308] = new ThemeDescription(this.replyIconImageView, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_replyPanelIcons");
        themeDescriptionArr[309] = new ThemeDescription(this.replyCloseImageView, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_replyPanelClose");
        themeDescriptionArr[310] = new ThemeDescription(this.searchUpButton, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_searchPanelIcons");
        themeDescriptionArr[311] = new ThemeDescription(this.searchDownButton, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_searchPanelIcons");
        themeDescriptionArr[312] = new ThemeDescription(this.searchCalendarButton, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_searchPanelIcons");
        themeDescriptionArr[313] = new ThemeDescription(this.searchUserButton, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_searchPanelIcons");
        themeDescriptionArr[314] = new ThemeDescription(this.searchCountText, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_searchPanelText");
        themeDescriptionArr[315] = new ThemeDescription(this.bottomOverlayText, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_secretChatStatusText");
        themeDescriptionArr[316] = new ThemeDescription(this.bottomOverlayChatText, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_fieldOverlayText");
        themeDescriptionArr[317] = new ThemeDescription(this.bottomOverlayProgress, 0, null, null, null, null, "chat_fieldOverlayText");
        themeDescriptionArr[318] = new ThemeDescription(this.bigEmptyView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_serviceText");
        themeDescriptionArr[319] = new ThemeDescription(this.emptyView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_serviceText");
        themeDescriptionArr[320] = new ThemeDescription(this.progressBar, ThemeDescription.FLAG_PROGRESSBAR, null, null, null, null, "chat_serviceText");
        themeDescriptionArr[321] = new ThemeDescription(this.stickersPanelArrow, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_stickersHintPanel");
        themeDescriptionArr[322] = new ThemeDescription(this.stickersListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{StickerCell.class}, null, null, null, "chat_stickersHintPanel");
        themeDescriptionArr[323] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE, new Class[]{ChatUnreadCell.class}, new String[]{"backgroundLayout"}, null, null, null, "chat_unreadMessagesStartBackground");
        themeDescriptionArr[324] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatUnreadCell.class}, new String[]{"imageView"}, null, null, null, "chat_unreadMessagesStartArrowIcon");
        themeDescriptionArr[325] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatUnreadCell.class}, new String[]{"textView"}, null, null, null, "chat_unreadMessagesStartText");
        themeDescriptionArr[326] = new ThemeDescription(this.progressView2, ThemeDescription.FLAG_SERVICEBACKGROUND, null, null, null, null, "chat_serviceBackground");
        themeDescriptionArr[327] = new ThemeDescription(this.emptyView, ThemeDescription.FLAG_SERVICEBACKGROUND, null, null, null, null, "chat_serviceBackground");
        themeDescriptionArr[328] = new ThemeDescription(this.bigEmptyView, ThemeDescription.FLAG_SERVICEBACKGROUND, null, null, null, null, "chat_serviceBackground");
        themeDescriptionArr[329] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_SERVICEBACKGROUND, new Class[]{ChatLoadingCell.class}, new String[]{"textView"}, null, null, null, "chat_serviceBackground");
        themeDescriptionArr[330] = new ThemeDescription(this.chatListView, ThemeDescription.FLAG_PROGRESSBAR, new Class[]{ChatLoadingCell.class}, new String[]{"textView"}, null, null, null, "chat_serviceText");
        themeDescriptionArr[331] = new ThemeDescription(this.mentionListView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{BotSwitchCell.class}, new String[]{"textView"}, null, null, null, "chat_botSwitchToInlineText");
        themeDescriptionArr[332] = new ThemeDescription(this.mentionListView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{MentionCell.class}, new String[]{"nameTextView"}, null, null, null, "windowBackgroundWhiteBlackText");
        themeDescriptionArr[333] = new ThemeDescription(this.mentionListView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{MentionCell.class}, new String[]{"usernameTextView"}, null, null, null, "windowBackgroundWhiteGrayText3");
        themeDescriptionArr[334] = new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, new Drawable[]{Theme.chat_inlineResultFile, Theme.chat_inlineResultAudio, Theme.chat_inlineResultLocation}, null, "chat_inlineResultIcon");
        themeDescriptionArr[335] = new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "windowBackgroundWhiteGrayText2");
        themeDescriptionArr[336] = new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "windowBackgroundWhiteLinkText");
        themeDescriptionArr[337] = new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "windowBackgroundWhiteBlackText");
        themeDescriptionArr[338] = new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "chat_inAudioProgress");
        themeDescriptionArr[339] = new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "chat_inAudioSelectedProgress");
        themeDescriptionArr[340] = new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "divider");
        themeDescriptionArr[341] = new ThemeDescription(this.gifHintTextView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_gifSaveHintBackground");
        themeDescriptionArr[342] = new ThemeDescription(this.gifHintTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_gifSaveHintText");
        themeDescriptionArr[343] = new ThemeDescription(this.noSoundHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"textView"}, null, null, null, "chat_gifSaveHintText");
        themeDescriptionArr[344] = new ThemeDescription(this.noSoundHintView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{HintView.class}, new String[]{"imageView"}, null, null, null, "chat_gifSaveHintText");
        themeDescriptionArr[345] = new ThemeDescription(this.noSoundHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"arrowImageView"}, null, null, null, "chat_gifSaveHintBackground");
        themeDescriptionArr[346] = new ThemeDescription(this.forwardHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"textView"}, null, null, null, "chat_gifSaveHintText");
        themeDescriptionArr[347] = new ThemeDescription(this.forwardHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"arrowImageView"}, null, null, null, "chat_gifSaveHintBackground");
        themeDescriptionArr[348] = new ThemeDescription(this.pagedownButtonCounter, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_goDownButtonCounterBackground");
        themeDescriptionArr[349] = new ThemeDescription(this.pagedownButtonCounter, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_goDownButtonCounter");
        themeDescriptionArr[350] = new ThemeDescription(this.pagedownButtonImage, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_goDownButton");
        themeDescriptionArr[351] = new ThemeDescription(this.pagedownButtonImage, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, "chat_goDownButtonShadow");
        themeDescriptionArr[352] = new ThemeDescription(this.pagedownButtonImage, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_goDownButtonIcon");
        themeDescriptionArr[353] = new ThemeDescription(this.mentiondownButtonCounter, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_goDownButtonCounterBackground");
        themeDescriptionArr[354] = new ThemeDescription(this.mentiondownButtonCounter, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_goDownButtonCounter");
        themeDescriptionArr[355] = new ThemeDescription(this.mentiondownButtonImage, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_goDownButton");
        themeDescriptionArr[356] = new ThemeDescription(this.mentiondownButtonImage, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, "chat_goDownButtonShadow");
        themeDescriptionArr[357] = new ThemeDescription(this.mentiondownButtonImage, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_goDownButtonIcon");
        themeDescriptionArr[358] = new ThemeDescription(this.avatarContainer != null ? this.avatarContainer.getTimeItem() : null, 0, null, null, null, null, "chat_secretTimerBackground");
        themeDescriptionArr[359] = new ThemeDescription(this.avatarContainer != null ? this.avatarContainer.getTimeItem() : null, 0, null, null, null, null, "chat_secretTimerText");
        themeDescriptionArr[360] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[0]}, null, "chat_attachCameraIcon1");
        themeDescriptionArr[361] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[0]}, null, "chat_attachCameraIcon2");
        themeDescriptionArr[362] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[0]}, null, "chat_attachCameraIcon3");
        themeDescriptionArr[363] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[0]}, null, "chat_attachCameraIcon4");
        themeDescriptionArr[364] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[0]}, null, "chat_attachCameraIcon5");
        themeDescriptionArr[365] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[0]}, null, "chat_attachCameraIcon6");
        themeDescriptionArr[366] = new ThemeDescription(null, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[1]}, null, "chat_attachGalleryBackground");
        themeDescriptionArr[367] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[1]}, null, "chat_attachGalleryIcon");
        themeDescriptionArr[368] = new ThemeDescription(null, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[2]}, null, "chat_attachVideoBackground");
        themeDescriptionArr[369] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[2]}, null, "chat_attachVideoIcon");
        themeDescriptionArr[370] = new ThemeDescription(null, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[3]}, null, "chat_attachAudioBackground");
        themeDescriptionArr[371] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[3]}, null, "chat_attachAudioIcon");
        themeDescriptionArr[372] = new ThemeDescription(null, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[4]}, null, "chat_attachFileBackground");
        themeDescriptionArr[373] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[4]}, null, "chat_attachFileIcon");
        themeDescriptionArr[374] = new ThemeDescription(null, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[5]}, null, "chat_attachContactBackground");
        themeDescriptionArr[375] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[5]}, null, "chat_attachContactIcon");
        themeDescriptionArr[376] = new ThemeDescription(null, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[6]}, null, "chat_attachLocationBackground");
        themeDescriptionArr[377] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[6]}, null, "chat_attachLocationIcon");
        themeDescriptionArr[378] = new ThemeDescription(null, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[7]}, null, "chat_attachHideBackground");
        themeDescriptionArr[379] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[7]}, null, "chat_attachHideIcon");
        themeDescriptionArr[380] = new ThemeDescription(null, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[8]}, null, "chat_attachSendBackground");
        themeDescriptionArr[381] = new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachButtonDrawables[8]}, null, "chat_attachSendIcon");
        themeDescriptionArr[382] = new ThemeDescription(null, 0, null, null, null, selectedBackgroundDelegate, "dialogBackground");
        themeDescriptionArr[383] = new ThemeDescription(null, 0, null, null, null, selectedBackgroundDelegate, "dialogBackgroundGray");
        themeDescriptionArr[384] = new ThemeDescription(null, 0, null, null, null, selectedBackgroundDelegate, "dialogTextGray2");
        themeDescriptionArr[385] = new ThemeDescription(null, 0, null, null, null, selectedBackgroundDelegate, "dialogScrollGlow");
        themeDescriptionArr[386] = new ThemeDescription(null, 0, null, null, null, selectedBackgroundDelegate, "dialogGrayLine");
        themeDescriptionArr[387] = new ThemeDescription(null, 0, null, null, null, selectedBackgroundDelegate, "dialogCameraIcon");
        return themeDescriptionArr;
    }

    /* Access modifiers changed, original: final|synthetic */
    public final /* synthetic */ void lambda$getThemeDescriptions$78$ChatActivity() {
        updateVisibleRows();
        if (!(this.chatActivityEnterView == null || this.chatActivityEnterView.getEmojiView() == null)) {
            this.chatActivityEnterView.getEmojiView().updateUIColors();
        }
        if (this.chatAttachAlert != null) {
            this.chatAttachAlert.checkColors();
        }
    }
}
